{"version":3,"sources":["n-ui//dist/es5-polyfill-io.js?","n-ui//webpack/bootstrap 6746277060a128e699c8?","n-ui//./_deploy/wrapper.js?","n-ui//./main.js?","n-ui//./js-setup/index.js?","n-ui//./js-setup/js/component-initializer.js?","n-ui//./~/babel-runtime/helpers/classCallCheck.js?","n-ui//./js-setup/js/loader.js?","n-ui//./~/babel-runtime/helpers/typeof.js?","n-ui//./~/babel-runtime/core-js/symbol/iterator.js?","n-ui//./~/babel-runtime/~/core-js/library/fn/symbol/iterator.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/es6.string.iterator.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_string-at.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_to-integer.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_defined.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_iter-define.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_library.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_export.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_global.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_core.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_ctx.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_a-function.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_hide.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-dp.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_an-object.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_is-object.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_ie8-dom-define.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_descriptors.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_fails.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_dom-create.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_to-primitive.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_property-desc.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_redefine.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_has.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_iterators.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_iter-create.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-create.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-dps.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-keys.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-keys-internal.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_to-iobject.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_iobject.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_cof.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_array-includes.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_to-length.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_to-index.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_shared-key.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_shared.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_uid.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_enum-bug-keys.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_html.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_set-to-string-tag.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_wks.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-gpo.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_to-object.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/web.dom.iterable.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/es6.array.iterator.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_add-to-unscopables.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_iter-step.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_wks-ext.js?","n-ui//./~/babel-runtime/core-js/symbol.js?","n-ui//./~/babel-runtime/~/core-js/library/fn/symbol/index.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/es6.symbol.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_meta.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_wks-define.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_keyof.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_enum-keys.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-gops.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-pie.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_is-array.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-gopn-ext.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-gopn.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_object-gopd.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/es7.symbol.async-iterator.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/es7.symbol.observable.js?","n-ui//./typography/font-loader.js?","n-ui//./utils/index.js?","n-ui//./utils/js/to-ascii.js?","n-ui//./bower_components/fontfaceobserver/fontfaceobserver.standalone.js?","n-ui//./js-setup/js/instrument-fetch.js?","n-ui//o-errors (bower component)?","n-ui//./bower_components/o-errors/main.js?","n-ui//./bower_components/o-errors/src/js/oErrors.js?","n-ui//./bower_components/o-errors/src/js/logger.js?","n-ui//raven-js (bower component)?","n-ui//./bower_components/raven-js/dist/raven.js?","n-ui//./ads/index.js?","n-ui//./ads/js/krux.js?","n-ui//superstore (bower component)?","n-ui//./bower_components/superstore/lib/superstore.js?","n-ui//superstore-sync (bower component)?","n-ui//./bower_components/superstore-sync/lib/superstore-sync.js?","n-ui//o-ads (bower component)?","n-ui//./bower_components/o-ads/main.js?","n-ui//./bower_components/o-ads/src/js/config.js?","n-ui//./bower_components/o-ads/src/js/utils/index.js?","n-ui//./bower_components/o-ads/src/js/utils/cookie.js?","n-ui//./bower_components/o-ads/src/js/utils/events.js?","n-ui//./bower_components/o-ads/src/js/utils/messenger.js?","n-ui//./bower_components/o-ads/src/js/utils/responsive.js?","n-ui//o-viewport (bower component)?","n-ui//./bower_components/o-viewport/main.js?","n-ui//./bower_components/o-viewport/src/utils.js?","n-ui//./bower_components/o-ads/src/js/utils/timers.js?","n-ui//./bower_components/o-ads/src/js/utils/queue.js?","n-ui//./bower_components/o-ads/src/js/utils/log.js?","n-ui//./bower_components/o-ads/src/js/slots.js?","n-ui//./bower_components/o-ads/src/js/slot.js?","n-ui//./bower_components/o-ads/src/js/ad-servers/gpt.js?","n-ui//./bower_components/o-ads/src/js/targeting.js?","n-ui//./bower_components/o-ads/src/js/data-providers/krux.js?","n-ui//ftdomdelegate (bower component)?","n-ui//./bower_components/ftdomdelegate/lib/delegate.js?","n-ui//./bower_components/o-ads/src/js/data-providers/rubicon.js?","n-ui//./bower_components/o-ads/src/js/data-providers/admantx.js?","n-ui//./ads/js/utils.js?","n-ui//./ads/js/oAdsConfig.js?","n-ui//./ads/js/sandbox.js?","n-ui//./ads/js/reporter.js?","n-ui//./ads/js/metrics.js?","n-ui//./ads/js/sticky.js?","n-ui//./tracking/index.js?","n-ui//./tracking/ft/index.js?","n-ui//o-tracking (bower component)?","n-ui//./bower_components/o-tracking/main.js?","n-ui//./bower_components/o-tracking/src/javascript/core/settings.js?","n-ui//./bower_components/o-tracking/src/javascript/core/user.js?","n-ui//./bower_components/o-tracking/src/javascript/utils.js?","n-ui//./bower_components/o-tracking/src/libs/browser-cuid.js?","n-ui//./bower_components/o-tracking/src/javascript/core/store.js?","n-ui//./bower_components/o-tracking/src/javascript/core/session.js?","n-ui//./bower_components/o-tracking/src/javascript/core/send.js?","n-ui//./bower_components/o-tracking/src/javascript/core/queue.js?","n-ui//./bower_components/o-tracking/src/javascript/core/transports/index.js?","n-ui//./bower_components/o-tracking/src/javascript/core/transports/xhr.js?","n-ui//./bower_components/o-tracking/src/javascript/core/transports/send-beacon.js?","n-ui//./bower_components/o-tracking/src/javascript/core/transports/image.js?","n-ui//./bower_components/o-tracking/src/javascript/events/page-view.js?","n-ui//./bower_components/o-tracking/src/javascript/core.js?","n-ui//./bower_components/o-tracking/src/javascript/events/custom.js?","n-ui//./bower_components/o-tracking/src/javascript/events/link-click.js?","n-ui//o-grid (bower component)?","n-ui//./bower_components/o-grid/main.js?","n-ui//./tracking/ft/next-events.js?","n-ui//./tracking/ft/events/navigation-timing.js?","n-ui//./tracking/ft/events/cta.js?","n-ui//./tracking/ft/utils/getDomPath.js?","n-ui//./tracking/ft/utils/getDomPathString.js?","n-ui//./tracking/ft/utils/getHref.js?","n-ui//./tracking/ft/events/copy.js?","n-ui//./tracking/ft/events/page-attention.js?","n-ui//./tracking/ft/events/positional.js?","n-ui//./tracking/third-party/floodlight.js?","n-ui//./tracking/third-party/chartbeat.js?","n-ui//./tracking/third-party/mouseflow.js?","n-ui//./tracking/third-party/sourcepoint.js?","n-ui//./tracking/ft/events/scroll-depth-components.js?","n-ui//./~/babel-runtime/helpers/toConsumableArray.js?","n-ui//./~/babel-runtime/core-js/array/from.js?","n-ui//./~/babel-runtime/~/core-js/library/fn/array/from.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/es6.array.from.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_iter-call.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_is-array-iter.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_create-property.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/core.get-iterator-method.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_classof.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_iter-detect.js?","n-ui//./date/index.js?","n-ui//o-date (bower component)?","n-ui//./bower_components/o-date/main.js?","n-ui//./header/index.js?","n-ui//o-header (bower component)?","n-ui//./bower_components/o-header/main.js?","n-ui//./bower_components/o-header/src/js/header.js?","n-ui//./bower_components/o-header/src/js/search.js?","n-ui//o-toggle (bower component)?","n-ui//./bower_components/o-toggle/main.js?","n-ui//./bower_components/o-header/src/js/mega.js?","n-ui//./bower_components/o-header/src/js/drawer.js?","n-ui//./bower_components/o-header/src/js/subnav.js?","n-ui//o-utils (bower component)?","n-ui//./bower_components/o-utils/main.js?","n-ui//./bower_components/o-header/src/js/sticky.js?","n-ui//./header/js/typeahead.js?","n-ui//awesomplete (bower component)?","n-ui//./bower_components/awesomplete/awesomplete.js?","n-ui//(webpack)/buildin/module.js?","n-ui//./header/js/promoHandler.js?","n-ui//./opt-out/index.js?","n-ui//./cookie-message/index.js?","n-ui//./welcome-message/index.js?","n-ui//./message-prompts/index.js?","n-ui//./footer/index.js?","n-ui//o-footer (bower component)?","n-ui//./bower_components/o-footer/main.js?","n-ui//./bower_components/o-footer/src/js/footer.js?","n-ui//./bower_components/o-footer/src/js/layout.js?","n-ui//./myft/index.js?","n-ui//next-myft-client (bower component)?","n-ui//./bower_components/next-myft-client/myft-bower.js?","n-ui//./bower_components/next-myft-client/src/myft-client.js?","n-ui//next-session-client (bower component)?","n-ui//./bower_components/next-session-client/main.js?","n-ui//./bower_components/next-session-client/src/request.js?","n-ui//./bower_components/next-session-client/src/cache.js?","n-ui//fetchres (bower component)?","n-ui//./bower_components/fetchres/src/fetchres.js?","n-ui//./~/babel-runtime/helpers/possibleConstructorReturn.js?","n-ui//./~/babel-runtime/helpers/inherits.js?","n-ui//./~/babel-runtime/core-js/object/set-prototype-of.js?","n-ui//./~/babel-runtime/~/core-js/library/fn/object/set-prototype-of.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/es6.object.set-prototype-of.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/_set-proto.js?","n-ui//./~/babel-runtime/core-js/object/create.js?","n-ui//./~/babel-runtime/~/core-js/library/fn/object/create.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/es6.object.create.js?","n-ui//./bower_components/next-myft-client/src/lib/personalise-url.js?","n-ui//./bower_components/next-myft-client/src/lib/is-immutable-url.js?","n-ui//./bower_components/next-myft-client/src/lib/is-personalised-url.js?","n-ui//./bower_components/next-myft-client/src/lib/is-legacy-url.js?","n-ui//./bower_components/next-myft-client/src/lib/is-valid-uuid.js?","n-ui//./myft/ui.js?","n-ui//./buttons/index.js?","n-ui//./notification/index.js?","n-ui//n-notification (bower component)?","n-ui//./bower_components/n-notification/main.js?","n-ui//./bower_components/n-notification/src/js/template.js?","n-ui//./overlay/index.js?","n-ui//o-overlay (bower component)?","n-ui//./bower_components/o-overlay/main.js?","n-ui//./bower_components/o-overlay/src/js/overlay.js?","n-ui//o-layers (bower component)?","n-ui//./bower_components/o-layers/main.js?","n-ui//o-dom (bower component)?","n-ui//./bower_components/o-dom/main.js?","n-ui//./bower_components/o-overlay/src/js/utils.js?","n-ui//./myft/js/grab-url-hash-with-prefix.js?","n-ui//./myft/js/follow-email.js?","n-ui//./myft/js/set-follow-preferences.js?","n-ui//./myft/ui-instant.js?","n-ui//./myft-digest-promo/index.js?","n-ui//./~/babel-runtime/helpers/slicedToArray.js?","n-ui//./~/babel-runtime/core-js/is-iterable.js?","n-ui//./~/babel-runtime/~/core-js/library/fn/is-iterable.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/core.is-iterable.js?","n-ui//./~/babel-runtime/core-js/get-iterator.js?","n-ui//./~/babel-runtime/~/core-js/library/fn/get-iterator.js?","n-ui//./~/babel-runtime/~/core-js/library/modules/core.get-iterator.js?","n-ui//n-image (bower component)?","n-ui//./bower_components/n-image/main-client.js?","n-ui//./bower_components/n-image/src/lib/lazy-load.js?","n-ui//n-service-worker (bower component)?","n-ui//./bower_components/n-service-worker/main.js?","n-ui//babel-polyfill-silencer (bower component)?","n-ui//./bower_components/babel-polyfill-silencer/index.js?","n-ui//./expander/index.js?","n-ui//o-expander (bower component)?","n-ui//./bower_components/o-expander/main.js?","n-ui//./grid/index.js?","n-ui//./viewport/index.js?","n-ui//o-video (bower component)?","n-ui//./bower_components/o-video/main.js?","n-ui//./bower_components/o-video/src/js/video.js?","n-ui//o-fetch-jsonp (bower component)?","n-ui//./bower_components/o-fetch-jsonp/main.js?","n-ui//./bower_components/o-video/src/js/helpers/get-rendition.js?","n-ui//./bower_components/o-video/src/js/helpers/supported-formats.js?","n-ui//./bower_components/o-video/src/js/ads.js?","n-ui//./bower_components/o-video/src/js/info.js?","n-ui//./bower_components/o-video/src/js/playlist.js?","n-ui//./~/preact-compat/dist/preact-compat.js?","n-ui//(webpack)/~/node-libs-browser/~/process/browser.js?","n-ui//./~/proptypes/index.js?","n-ui//./~/preact-compat/~/preact-svg/dist/preact-svg.js?","n-ui//./~/preact/dist/preact.js?","n-ui//(webpack)/~/node-libs-browser/~/timers-browserify/main.js?"],"names":["ftNextUi","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","nUi","bootstrap","window","ftNextUiConfig","preset","preload","setTimeout","ftNextFireCondition","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","_interopRequireDefault","default","defineProperty","value","_ReactDom","_React","_superstoreSync","_superstore","_ftdomdelegate","_image","_video","_viewport","_overlay","_grid","_expander","_notification","_utils","_myftDigestPromo","_myft","_footer","_messagePrompts","_welcomeMessage","_cookieMessage","_promoMessages","_header","_date","_tracking","_ads","configure","undefined","_jsSetup","enumerable","get","_ads2","_ads3","_tracking2","_tracking3","_date2","_date3","_header2","_header3","_promoMessages2","_promoMessages3","_cookieMessage2","_cookieMessage3","_welcomeMessage2","_welcomeMessage3","_messagePrompts2","_messagePrompts3","_footer2","_footer3","_myft2","_myft3","_myftDigestPromo2","_myftDigestPromo3","_utils2","_utils3","_notification2","_notification3","_expander2","_expander3","_grid2","_grid3","_overlay2","_overlay3","_viewport2","_viewport3","_oVideo","_oVideo2","_nImage","image","_ftdomdelegate2","_ftdomdelegate3","_superstore2","_superstore3","_superstoreSync2","_superstoreSync3","_react","_react2","_reactDom","_reactDom2","_componentInitializer","ComponentInitializer","presets","_classCallCheck2","_classCallCheck3","_loader","_loader2","_optOut","_optOut2","_nServiceWorker","serviceWorker","discrete","header","footer","date","welcomeMessage","complete","cookieMessage","myft","messagePrompts","promoMessages","ads","this","initializedFeatures","configuration","loader","bind","isInitialized","feature","options","arguments","length","config","cb","_this","features","assign","_ref","flags","mainCss","appInfo","tracking","init","register","unregister","myftclient","clientOpts","push","relationship","type","client","myftClient","lazyLoadImages","lazyLoad","then","myftUi","ui","anonymous","test","document","cookie","uiInstant","Promise","resolve","lazyTracking","lazyInit","instance","Constructor","TypeError","dispatchLoadedEvent","ftNextLoaded","ftNextLoadedTrigger","readyState","dispatchEvent","CustomEvent","addEventListener","onreadystatechange","_typeof2","_typeof3","_fontLoader","_instrumentFetch","_instrumentFetch2","console","methods","i","oErrors","JsSetup","load","documentElement","isProduction","hasAttribute","version","getAttribute","name","nextFeatureFlags","reduce","flag","state","getAll","enabled","sentryEndpoint","siteVersion","logLevel","tags","appName","errorBuffer","realFetch","fetch","url","opts","err","log","JSON","stringify","res","querySelector","waitForCondition","callback","initResult","bootstrapResult","result","promise","perfMark","classList","add","stack","error","loadScript","src","_iterator","_iterator2","_symbol","_symbol2","_typeof","constructor","f","$at","String","iterated","_t","_i","point","O","index","done","toInteger","defined","TO_STRING","that","pos","a","b","s","l","charCodeAt","charAt","slice","ceil","Math","floor","it","isNaN","LIBRARY","$export","redefine","hide","has","Iterators","$iterCreate","setToStringTag","getPrototypeOf","ITERATOR","BUGGY","keys","FF_ITERATOR","KEYS","VALUES","returnThis","Base","NAME","next","DEFAULT","IS_SET","FORCED","IteratorPrototype","getMethod","kind","proto","TAG","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","entries","values","P","F","global","core","ctx","PROTOTYPE","source","own","out","IS_FORCED","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","IS_BIND","B","IS_WRAP","W","expProto","target","C","apply","Function","virtual","R","U","self","__g","__e","aFunction","fn","dP","createDesc","object","anObject","IE8_DOM_DEFINE","toPrimitive","Attributes","e","isObject","exec","is","createElement","val","toString","valueOf","bitmap","configurable","writable","create","descriptor","dPs","enumBugKeys","IE_PROTO","Empty","createDict","iframeDocument","iframe","lt","gt","style","display","appendChild","contentWindow","open","write","close","Properties","getKeys","defineProperties","$keys","toIObject","arrayIndexOf","names","IObject","cof","propertyIsEnumerable","split","toLength","toIndex","IS_INCLUDES","$this","el","fromIndex","min","max","shared","uid","SHARED","store","px","random","concat","def","tag","stat","Symbol","USE_SYMBOL","$exports","toObject","ObjectProto","TO_STRING_TAG","collections","Collection","Array","addToUnscopables","step","_k","Arguments","DESCRIPTORS","META","KEY","$fails","wks","wksExt","wksDefine","keyOf","enumKeys","isArray","_create","gOPNExt","$GOPD","$DP","gOPD","gOPN","$Symbol","$JSON","_stringify","HIDDEN","TO_PRIMITIVE","isEnum","SymbolRegistry","AllSymbols","OPSymbols","USE_NATIVE","QObject","setter","findChild","setSymbolDesc","D","protoDesc","wrap","sym","isSymbol","iterator","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","set","symbols","for","keyFor","useSetter","useSimple","getOwnPropertyDescriptor","getOwnPropertyNames","getOwnPropertySymbols","replacer","$replacer","args","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","w","fastKey","getWeak","onFreeze","meta","NEED","gOPS","pIE","getSymbols","arg","windowNames","getWindowNames","hiddenKeys","RegExp","fontLoadedCookieName","fontPromises","fontConfigs","map","fontConfig","FontFaceObserver","family","weight","className","labels","classes","label","fontLoadedPrefix","all","uuid","replace","$","sel","$$","querySelectorAll","debounce","func","wait","timeout","later","clearTimeout","throttle","_this2","ascii","rej","script","ftNextLoadScript","conditionName","action","broadcast","data","bubbles","rootEl","body","event","cancelable","detail","initCustomEvent","performance","LUX","msPerformance","webkitPerformance","mozPerformance","mark","getCookieValue","regex","toASCII","string","nonASCII","mapASCII","substr","à","á","â","ä","ã","å","ā","æ","ç","č","è","é","ê","ë","ē","ğ","î","ï","í","ì","ī","ł","ñ","ń","ô","ö","ò","ó","ø","õ","ō","œ","ş","ș","š","ß","û","ü","ù","ú","ū","ž","attachEvent","removeEventListener","k","detachEvent","v","setAttribute","createTextNode","h","g","cssText","y","offsetWidth","width","scrollLeft","scrollWidth","z","parentNode","A","stretch","H","font","I","join","FontFace","x","Date","getTime","J","fonts","K","race","q","navigator","userAgent","parseInt","r","t","u","d","removeChild","hidden","n","dir","check","restore","theFetch","XMLHttpRequest","useCorsProxy","urlObj","URL","headers","origin","initialise","errors","Errors","isFunction","throwLater","ravenClient","initialised","logger","_logEventHandler","handleLogEvent","_errorBuffer","_declarativeConfigString","_filterError","_transformError","Logger","raven","hasDeclarativeConfig","_hasDeclarativeConfig","configMissing","_initialiseDeclaratively","filterError","Error","transformError","transportFunction","isErrorsDisabled","off","defaultLogLength","report","wrapWithContext","level","consoleonly","_configureAndInstallRaven","captureException","uninstall","_flushBufferedErrors","updatePayloadBeforeSend","_updatePayloadBeforeSend","ravenOptions","dataCallback","release","transport","install","forEach","bufferedError","context","_context","reportObject","extra","transformedError","message","errormessage","warn","destroy","ev","info","context:dom","_getEventPath","reduceRight","builder","nodeName","toLowerCase","indexOf","path","element","srcElement","parentElement","logLines","_getDeclarativeConfig","textContent","innerText","innerHTML","declarativeOptions","parse","property","logSize","_logBuffer","_nextLogIndex","_logLevel","_consoleLog","noop","argsAsLogString","logName","consoleMethod","debug","append","logLine","nextLogIndex","rolledUpLogs","logEntry","contextonly","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","getLocationHref","location","href","triggerEvent","eventType","evt","hasDocument","toUpperCase","createEvent","initEvent","createEventObject","hasKey","fireEvent","RavenConfigError","parseDSN","str","dsnPattern","dsn","dsnKeys","pass","isUndefined","what","isString","objectPrototype","isEmptyObject","isError","each","j","handleStackInfo","stackInfo","frames","frame","normalizeFrame","processException","lineno","normalized","filename","line","colno","column","function","extractContextFromFrame","in_app","globalOptions","includePaths","fetchContext","pivot","isMinified","fileurl","stacktrace","fullMessage","ignoreErrors","reverse","ignoreUrls","whitelistUrls","send","objectMerge","exception","culprit","obj1","obj2","truncate","trimPacket","maxMessageLength","now","getHttpData","httpData","User-Agent","referrer","Referer","baseData","project","globalProject","platform","request","globalContext","startTime","user","serverName","server_name","shouldSendCallback","lastEventId","event_id","uuid4","logDebug","isSetup","makeRequest","globalServer","auth","sentry_version","sentry_client","Raven","VERSION","sentry_key","globalKey","onSuccess","onError","sentry_data","img","newImage","urlencode","crossOrigin","onload","onerror","onabort","hasJSON","ravenNotConfiguredError","joinRegExp","patterns","pattern","sources","len","crypto","msCrypto","getRandomValues","arr","Uint16Array","pad","num","originalConsoleMethods","originalConsole","_slice","afterLoad","RavenConfig","o","pairs","encodeURIComponent","mergeContext","TraceKit","remoteFetching","collectWindowErrors","linesOfContext","UNKNOWN_FUNCTION","subscribe","handler","installGlobalHandler","handlers","unsubscribe","splice","unsubscribeAll","uninstallGlobalHandler","notifyHandlers","isWindowError","inner","traceKitWindowOnError","lineNo","colNo","ex","lastExceptionStack","computeStackTrace","augmentStackTraceWithInitialElement","processLastException","guessFunctionName","gatherContext","_oldOnerrorHandler","_onErrorHandlerInstalled","_lastExceptionStack","_lastArgs","lastArgs","lastException","rethrow","incomplete","loadSource","getXHR","ActiveXObject","responseText","getSource","sourceCache","domain","reFunctionArgNames","reGuessFunction","maxLines","linesBefore","linesAfter","start","end","escapeRegExp","text","escapeCodeAsRegExpForMatchingInsideHTML","findSourceInUrls","re","urls","substring","lastIndexOf","findSourceInLine","fragment","findSourceByFunctionBody","parts","scripts","getElementsByTagName","code","codeRE","eventRE","computeStackTraceFromStackProp","chrome","gecko","winjs","lines","reference","columnNumber","computeStackTraceFromStacktraceProp","testRE","exc","computeStackTraceFromOperaMultiLineMessage","lineRE1","lineRE2","lineRE3","inlineScriptBlocks","item","relativeLine","midline","initial","unshift","partial","computeStackTraceByWalkingCallerChain","depth","functionName","funcs","recursion","curr","caller","input","description","sourceURL","fileName","lineNumber","lastCapturedException","_Raven","isRavenInstalled","plugins","method","noConflict","uri","lastSlash","host","port","protocol","_","plugin","wrapped","deep","__raven__","__inner__","captureMessage","ex1","msg","addPlugin","setUserContext","setExtraContext","setTagsContext","clearContext","getContext","setRelease","setDataCallback","setShouldSendCallback","setTransport","setUser","setReleaseContext","initOAds","initObj","oAdsConfig","containers","utils","dfp_targeting","onAdsCompleteCallback","onAdsComplete","slotCount","Ads","slots","initSlot","slot","container","reporter","Reporter","gpt","isEmpty","slotsRendered","customTimings","firstAdLoaded","sendTimings","adIframeLoaded","sendMetrics","krux","oAds","Sticky","stickyAd","sibling","stickUntil","stickyRight","topOffset","getAppName","Superstore","addPixel","Image","frequencyCap","limit","Krux","isPersisting","kuid","retrieve","kurlParams","kurl","namespace","sync","unset","clear","storage","newValue","escapeRegex","persist","removeItem","clearPrefix","clearKeyRegex","match","local","session","addDOMEventListener","initAll","removeDOMEventListener","rubicon","admantx","targeting","targetingApi","fetchData","page","response","responseObj","kruxObj","attributes","buildObjectFromArray","dfp","usePageZone","adUnit","zone","initLibrary","json","on","isInitialised","metas","from","stop","filter","remove","localStorage","getItem","setItem","fetchMetaConfig","results","content","fetchDeclaritiveConfig","extend","fetchCanonicalURL","canonical","canonicalTag","Config","defaults","formats","MediumRectangle","sizes","Rectangle","WideSkyscraper","Leaderboard","SuperLeaderboard","HalfPage","Billboard","Portrait","AdhesionBanner","MicroBar","Button2","Responsive","responsive","large","medium","small","refresh","inview","access","isPlainObject","createIsTest","curryIsMethods","classNames","pop","copy","copyIsArray","clone","hop","isWindow","nodeType","isNonEmptyString","isElement","tagName","isNumeric","parseFloat","isFinite","hash","delimiter","pairing","pair","idx","trim","attach","scriptUrl","async","errorcb","autoRemove","processCallback","hasRun","node","insertBefore","isScriptAlreadyLoaded","createCORSRequest","xhr","responseType","XDomainRequest","xhrEvent","ontimeout","getReferrer","capitalise","letter","dehyphenise","hyphen","hyphenise","parseAttributeName","attribute","getLocation","getQueryString","search","getTimestamp","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","iframes","iframeToSlotName","iframeWindow","slotName","targetObject","prev","timers","queue","raw","decoded","decodeURIComponent","pluses","getRegExp","param","AYSC","FT_U","FT_Remember","FT_User","FTQA","today","expires","days","setDate","cookies","toUTCString","secure","decode","removeCookie","getCookieParam","matches","wholeValue","once","targ","messenger","post","top","postMessage","getNearestBreakpoint","findCurrentBreakpoint","breakpoint","breakpointDims","breakpoints","dims","height","winner","oViewport","getSize","fire","current","setCurrent","getCurrent","brps","listenTo","setThrottleInterval","interval","intervals","listenToResize","listeners","resize","viewport","originalEvent","listenToOrientation","orientation","getOrientation","listenToVisibility","visibility","detectVisiblityAPI","getVisibility","listenToScroll","scroll","scrollPos","getScrollPosition","scrollHeight","left","scrollTop","stopListeningTo","getHeight","ignoreScrollbars","clientHeight","innerHeight","getWidth","clientWidth","innerWidth","de","db","isCSS1Compat","compatMode","ieX","ieY","pageXOffset","scrollX","pageYOffset","scrollY","screen","mozOrientation","msOrientation","matchMedia","hiddenName","mozHidden","msHidden","webkitHidden","Timer","maxTicks","ticks","Timers","scope","hasExecutionPaused","time","lastTick","threshold","reset","timer","resumeall","pauseall","stopall","tick","setInterval","resume","timeLeft","pause","kill","clearInterval","Queue","processor","items","processed","setProcessor","process","argsIndex","isOn","group","groupCollapsed","groupEnd","table","columns","attributeTable","Slots","invokeMethodOnSlots","run","findFormatBySize","size","prop","onBreakpointChange","screensize","isCurrentlyResponsive","stillWantsResponsive","Slot","collapse","uncollapse","submitImpression","getElementById","removeAttribute","initLazyLoading","initRefresh","initRendered","server","format","setFormatLoaded","maximise","initResponsive","initPostMessage","pmHandler","_ret","messageToSend","mastercompanion","companion","customMessages","disableSwipeDefault","disableDefaultSwipeHandler","setResponsiveCreative","slotConfig","lazyLoadingConfig","lazyLoadObserver","onChange","changes","intersectionRect","sort","change","viewportMargin","rootMargin","IntersectionObserver","_this3","row","unit name","unitName","creative id","creativeId","line item id","lineItemId","outer","addContainer","class","setName","defer","center","outOfPage","collapseEmpty","attributeParsers","screenName","parseAttributeConfig","initLazyLoad","centerContainer","labelContainer","VALID_SIZE_STRINGS","mapping","responsiveSizes","responsiveFormats","lazyLoadThreshold","Number","base","convertLazyLoadBooleanToObject","getAttributes","observe","hasValidSize","render","unobserve","responsiveCreative","clearSlot","submitGptImpression","details","attrs","attr","insertAdjacentHTML","lastChild","gptConfig","initGoogleTag","onReady","slotMethods","onRender","onRefresh","onResize","googletag","cmd","setup","pubads","onRenderEnded","enableCompanions","setRenderingMode","setPageTargeting","setPageCollapseEmpty","enableServices","rendering","enableSyncRendering","enableSingleRequest","enableAsyncRendering","setTargeting","mode","collapseEmptyDivs","companions","disableInitialLoad","companionAds","setRefreshUnfilledSlots","defineSlot","addServices","setCollapseEmpty","setURL","gptSlotId","getSlotId","domId","getDomId","iframeId","getId","serviceName","updateCorrelator","updatePageTargeting","override","params","setUnitName","defineOutOfPageSlot","defineSizeMapping","gptSlot","pubadsReady","sizeMapping","addSize","build","_this4","network","site","_this5","addService","_this6","setCollapseEmptyDiv","getImpressionURL","trackingUrlElement","dataset","oAdsImpressionUrl","impressionURL","_this7","_this8","conf","Targeting","parameters","socialReferrer","getSocialReferrer","pageReferrer","getPageReferrer","timestamp","getFromConfig","searchTerm","hostRegex","rf","codedValue","refUrl","refererRegexTemplate","lookup","t.co","facebook.com","linkedin.com","drudgereport.com","refererRegex","socref","qs","keywords","query","queryText","searchField","unescape","kw","ts","customAttributes","Delegate","api","setAttributes","custom","finalSrc","loadKruxScript","events","requestIdleCallback","segments","segs","ksg","khost","hostname","bht","dwell_time","total","delegated","eventScope","kEvnt","delEvnt","eType","selector","configured","prefix","alias","root","listenerMap","handle","matchesTag","matchesRoot","rootElement","matchesId","captureForType","useCapture","matcher","matcherParam","listener","listenerList","singleEventType","phase","returned","EVENTIGNORE","eventPhase","currentTarget","preventDefault","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","Element","Rubicon","initValuation","zones","oz_api","oz_callback","valuationCallbackFactory","oz_ad_server","oz_async","oz_cached_only","cached","oz_site","oz_ad_slot_size","oz_zone","oz_insight","estimate","tier","rtp","Admantx","admants","makeAPIRequest","requestData","decorator","processCollection","collection","targetingObj","shortName","categories","immediate","callNow","getLayoutName","layout","abStateEl","abState","adsLayoutAB","getMetaData","keyValueString","htmlNode","firstChild","getLazyLoadConfig","adsLazyLoadPosition","sandbox","apiUrlRoot","getContextualTargeting","getZone","pageType","eidMatch","userCookieMetadata","eid","pt","nlayout","kruxConfig","isActive","PaidPost","endpoint","slackChannel","defaultText","cssClass","adData","link","addLinkToContainer","onClickHandler","addEvent","onClick","hasReported","_handler","removeEvent","btn","updateLink","html","dispatch","Accept","Content-Type","credentials","status","statusText","timingsObject","slotDetails","offsets","_calculateOffsets","marks","_calculateMarks","category","timings","creative","timingName","domContentLoadedEventEnd","timing","loadEventEnd","domInteractive","getEntriesByName","round","stickAfter","getBoundingClientRect","stick","position","marginTop","offsetHeight","onScroll","stickyUntilPoint","requestAnimationFrame","unstick","bindScroll","onScrollListener","offsetTop","zIndex","scrollDepthComponents","nodesToArray","nodelist","getRootData","oTracking","oGrid","nextEvents","oTrackingWrapper","userData","getCurrentLayout","connection","mozConnection","webkitConnection","connectionType","product","app","appVersion","contentId","rootContentId","conceptId","rootConceptId","rootTaxonomy","errorStatus","pageViewConf","parent","edition","segmentId","pageMeta","FT","useSendBeacon","barrierType","productSelectorFlag","barrier","isProductSelector","opportunity","subtype","offers","acquisitionContext","Tracking","api_key","settings","developer","_getDeclarativeConfigElement","noSend","user_id","configEl","declarativeConfigString","configError","setValue","getValue","migrate_across_domains","ls_name","proper_id","getValueFromCookie","setTime","toGMTString","encode","defaultUserConfig","merge","nameOverride","Store","userID","read","guid","variable","escape","onPage","page_callbacks","triggerPage","$1","getValueFromUrl","getValueFromJsVariable","namespaces","cuid","blockSize","discreteValues","pow","randomBlock","safeCounter","counter","fingerprint","slug","print","globalCount","cache","count","mimeTypes","keyPrefix","loadStore","undefinedName","storageKey","cookieLoad","cookieSave","expiry","cookieRemove","test_key","_type","save","setSession","getSession","isNew","exp","defaultSessionConfig","should_use_sendBeacon","sendBeacon","sendRequest","queueTime","offlineLag","transports","user_callback","core_system","system","offset","all_events","counts","queue_length","nextRequest","shift","addAndRun","first","last","doAdd","created_at","invalidArg","mock","withCredentials","setRequestHeader","resolver","rejecter","reject","defaultPageConfig","Core","setRootID","track","new_id","requestID","getRootID","root_id","request_id","coreContext","defaultConfig","Session","device","spoor_session","spoor_session_is_new","spoor_id","User","Send","passport_id","ft_session","trackingEvent","noCategoryActionVals","defaultEventConfig","origamiElement","getOrigamiEventTarget","component_name","component_id","getComponentId","_getElementPath","siblingIndex","srcParent","childNodes","normalisedStringPath","_generateHash","isInternal","isExternal","isFile","parentTree","tree","createLinkID","parents","click_config","identifier","defaultLinkConfig","dom_path","dom_path_tokens","node_name","source_id","destination","is_internal","internalQueue","clickEvent","runQueue","nextLink","links","configException","getGridProperties","gridProperties","getComputedStyle","getPropertyValue","isIE8","getCurrentGutter","gutter","docElem","isIE","Timing","Cta","Copy","Attention","Positional","NextEvents","cta","attention","positional","timingEvents","getOffsets","offsetEvent","offsetTime","eventTime","getMarks","getEntriesByType","getCustom","chromeObj","loadTimes","chromeLoadTimes","firstPaint","firstPaintTime","startLoadTime","msFirstPaint","navigationStart","NavigationTiming","getDomPath","getDomPathString","getHref","CTA","allowedElementsSelector","delegate","clickHandler","isTrackable","ariaPressed","domPath","aria","pressed","expanded","role","domPressed","domPathTokens","siblings","Node","TEXT_NODE","trackable","trackableOnce","pathname","getSelection","selection","characters","words","ATTENTION_INTERVAL","ATTENTION_EVENTS","UNATTENTION_EVENTS","eventToSend","totalAttentionTime","startAttentionTime","endAttentionTime","startAttention","endAttention","handleVisibilityChange","addVideoEvents","attentionTimeout","startConstantAttention","constantAttentionInterval","endConstantAttention","videoPlayers","FTVideo","getElementsByClassName","createPlayerAsync","player","MEDIA_PLAY_EVENT","MEDIA_STOP_EVENT","section","article","articles","isAnonymous","spoorId","country","term","offer","isSignUpForm","isSubscriptionConfirmation","isTrialConfirmation","spoor","enableChartbeat","_sf_async_config","useCanonical","spoorNumber","spoorNumberTrim","spoorNumberDec","enableMouseflow","_mfq","isAutomatedTest","isSignUpApp","hasLightSignup","isAllocated","provider","sp","_toConsumableArray2","_toConsumableArray3","componentId","componentPos","intersectionCallback","observer","component","findIndex","_from","_from2","arr2","isArrayIter","createProperty","getIterFn","iter","arrayLike","aLen","mapfn","iterFn","ret","ArrayProto","classof","getIteratorMethod","ARG","tryGet","T","callee","SAFE_CLOSING","riter","skipClosing","safe","__wrapsOrigami","ODate","HTMLElement","update","compile","tpl","funcString","months","formatReplacementsMap","compiledTemplates","datetime","MMMM","MMM","MM","M","yyyy","yy","EEEE","EEE","dd","mm","hh","HH","inSeconds","minute","hour","day","week","month","year","printer","hasTextNode","toDate","dateString","asTodayOrYesterdayOrNothing","timeAgo","ftTime","nodeValue","title","dateFormat","getSecondsBetween","otherTime","dateObj","isNearFuture","isFarFuture","isToday","isYesterday","within24Hours","sameDayOfWeek","getDay","within48Hours","consecutiveDaysOfTheWeek","dateEls","constructAll","promoHandler","OHeader","typeaheadElements","Typeahead","_search","_search2","_mega","_mega2","_drawer","_drawer2","_subnav","_subnav2","_sticky","_sticky2","Header","headerEl","controls","opening","focus","_oToggle2","_oToggle","Toggle","toggleEl","targetEl","_toggles","toggle","targetArray","togglePosition","toggleEls","toggles","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","Map","addEvents","menu","isOpen","show","INTENT_ENTER","INTENT_LEAVE","animate","menus","handleCloseEvents","handleKeydown","keyCode","handleClick","contains","handleMouseenter","handleMouseleave","INTENT_DELAY","removeEvents","addDrawerToggles","drawerEl","toggleCallback","handleClose","LISTEN_DELAY","control","drawerToggle","addSubmenuToggles","submenus","submenu","button","appendUserDetail","ok","emailAddress","emailEl","direction","scrollable","wrapper","buttons","disabled","remaining","distance","subnav","oUtils","onclick","_oUtils","handleFrame","scrollDepth","viewportOffset","abs","lastScrollDepth","isScrollingDown","startLoop","lastAnimationFrame","stopLoop","cancelAnimationFrame","scrollStart","debouncedScrollEnd","scrollEnd","getParentElDataTrackableValue","makeAwesompleteReadable","suggestion","taxonomy","trackSearchEvent","Awesomplete","MIN_LENGTH","DISPLAY_ITEMS","dataUrl","awesomplete","maxItems","FILTER_CONTAINS","ITEM","handleSubmit","handleType","handleSelect","handleFocus","latestTerm","getSuggestions","suggestions","setSuggestions","list","Suggestion","properties","attrValue","expr","con","me","minChars","autoFirst","DATA","SORT_BYLENGTH","REPLACE","around","ul","inside","aria-live","aria-relevant","evaluate","blur","reason","keydown","opened","selected","select","form","submit","mousedown","li","_list","children","activeElement","previous","goto","lis","allowed","regExpEscape","FILTER_STARTSWITH","aria-selected","ref","previousElementSibling","Document","webpackPolyfill","deprecate","paths","fetchSession","extractResult","statusTest","supportsCors","decorateTheSession","isForRegisteredUser","sessionIsForRegisteredUser","isForWeekendUser","sessionIsForWeekendUser","isForAnonymousUser","products","isSignupForm","isBarrier","showPromo","promo","discountSpan","discount","barrierDiscountByCohort","checkAnonWithoutSession","L","S_5","isWebAppCapableDevice","IOS_DEVICE_REGEX","isModernAndroidDevice","ANDROID_DEVICE_REGEX","showWebAppLink","showAndroidLink","FLAG_NOT_ON","EXIT_PAGE","COOKIE_CONSENT","CookieMessage","ensureMessageIsRequired","setupView","insertMessage","template","flagUserAsConsentingToCookies","hideMessage","userHasConsentedToCookies","hasLocalStorage","superstore","TEST_KEY","TEST_VAL","retrieved","fixedEl","staticEl","STORAGE_KEY","Boolean","closeButton","_layout","_layout2","COLLAPSIBLE_BREAKPOINTS","Footer","footerEl","_oViewport2","lastBreakpoint","_oGrid2","_oGrid","_oViewport","_myftClient","_myftClient2","apiRoot","fetchres","lib","personaliseUrl","emptyResponse","MyFtClient","additionalRelationships","setPerfMark","_ref2","userId","X-FT-Session-Token","relationships","Set","rel","emit","fetchJson","actor","actorId","subject","getFallbackActorIdIfNecessary","updateRelationship","getUuid","getItems","topic","_ref3","promises","validate","detailsCache","BadServerResponseError","ReadTimeoutError","InvalidJsonError","originatedError","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_Error","_Error2","_Error3","ReferenceError","_setPrototypeOf","_setPrototypeOf2","_create2","subClass","superClass","__proto__","setPrototypeOf","buggy","$Object","isImmutableUrl","isValidUuid","$0","$2","isPersonalisedUrl","isLegacyUrl","myFtFeatureFromEvent","actionFromEvent","UUID","toggleButton","buttonEl","isPressed","nextButtons","toggleState","updateUiForFeature","uiSelectors","myftFeature","featureForms","idProperty","idProperties","uuids","subjects","relBtns","hasRelBtns","activeMultiButton","getActiveMultiButton","newButtonState","relName","relValue","_rel","activeButton","openOverlay","_ref$name","_ref$title","_ref$shaded","shaded","overlay","Overlay","heading","setUpSaveToExistingListListeners","saveToExistingListButton","listSelect","nameFormGroup","listId","selectedIndex","updateAfterIO","setUpNewListListeners","createListButton","nameInput","descriptionInput","createListData","nNotification","showListsOverlay","overlayTitle","formHtmlUrl","showCopyToListOverlay","excludeList","showArticleSavedOverlay","fromClippings","showCreateListOverlay","getMessage","messages","followed","saved","contained","getPersonaliseUrlPromise","personalisedUrl","messagePromise","collectionPending","followEmail","prefs","subscribedToDigest","userDismissed","setUpOverlayListeners","createdLists","isRedirect","_ref2$message","_ref2$type","onLoad","Items","setInitialPrefs","extractMetaData","inputs","startsWith","getInteractionHandler","buttonWithValTriggered","closest","formButtons","some","types","hiddenFields","metaFields","conceptIds","taxonomies","followPromises","singleMeta","actors","grabUrlHashWithPrefix","messageKey","nNotificationMsgs","duration","personaliseLinks","updateUi","ignoreLinks","subscribeUrl","signInLink","preferred","followAnon","saveAnon","opted","alreadyToggled","ariaLabel","alternateAriaLabel","alternateText","isInstantiated","optionsContent","lastNotice","timeoutDuration","Notice","eventShow","teardown","notice","dispatchNotificationCloseEvent","noticeEl","contentWrapperEl","titleEl","contentEl","oOverlay","oLayers","overlays","checkOptions","trigger","arrow","modal","compact","getOptionsFromTrigger","optionsFromKey","triggerClickHandler","stopPropagation","visible","noOptError","getLayerContext","delegates","doc","loadContent","copyContentFromUrl","copyContentFromElement","wrapperEl","zindex","headingId","shadow","closeHandler","resizeListenerHandler","resizeListener","closeOnNewLayerHandler","closeOnNewLayer","closeOnExternalClickHandler","closeOnExternalClick","closeOnEscapePressHandler","closeOnEscapePress","outline","respondToWindow","overlay_id","realign","dimension","edge","borderHeight","fills","currentposition","getCurrentArrowPosition","oppositeEdge","arrowSize","targetClientRect","getOffsetRect","dimensionValue","wrapperWidth","wrapperHeight","right","bottom","borderWidth","triggers","overlaysArray","overlayIds","getOverlays","dom","getClosestMatch","getIndex","previousSibling","unCapitalise","outerHTML","dashIndex","subKey","eClientRect","clientTop","clientLeft","removeHash","loc","scrollV","scrollH","supportsHistory","history","replaceState","initialized","hashPrefix","startsWithPrefix","allLoadedPrefs","_myFtClient","find","pref","_overlayFormHandler","_setFollowPreferences","_overlayForm","checked","addPref","myFtApi","addRelationship","relData","timezone","emailPrefPromise","dismissPrefPromise","apiBackwardsCompatibility","instant","updateConceptData","subjectId","updateButtons","newState","affectedButtons","UI_HOOK","conceptRemoved","conceptData","conceptUpdated","showAnonNotification","formSubmitted","submitEl","applyModel","eventListeners","instantAlertForms","bindListeners","CLASSES","ctaBtn","dismissBtn","addToDigest","hidePromo","setDismissState","shouldShowPromo","myFtClient","_slicedToArray3","follows","prefers","getDismissState","promoComponent","promoEnabled","metaConcept","metaEmail","shouldShow","_slicedToArray2","_isIterable2","_isIterable3","_getIterator2","_getIterator3","sliceIterator","_arr","_n","_d","_e","_s","isIterable","getIterator","_lazyLoad","_lazyLoad2","lazyLoadingModifier","lazyLoadingImageClass","lazyLoadingWrapperClass","imageHasLoaded","loadImage","observedImg","observeIntersection","_ref2$root","passFlags","ready","registration","messageChannel","MessageChannel","port1","onmessage","active","port2","getRegistration","__BabelPolyfillSilencerSymbol","mixin","rootClassName","expandMethods","toggleContent","contentClassName","hasStateDefined","isRequired","overflows","shrinkTo","countSelector","isCollapsed","expand","hiderMethods","Expander","toggleClassName","toggleSelector","ariaToggles","invertState","setting","defaultVal","candidate","isSilent","displayState","toggleExpander","construct","fireBreakpointEvent","listenForBreakpointChanges","listening","_video2","eventListener","video","getProgress","advertising","progress","videoEl","updatePosterUrl","posterImage","getOptionsFromDataAttributes","_oFetchJsonp","_oFetchJsonp2","_getRendition","_getRendition2","_info","_info2","_playlist","_playlist2","defaultOpts","autorender","optimumwidth","placeholder","placeholderInfo","Video","containerEl","videoId","videoAds","getData","dataPromise","videoData","videoStillURL","rendition","renditions","renderVideo","addPlaceholder","addVideo","loadAdsLibrary","updateVideo","placeholderEl","autoplay","autostart","pauseOtherVideos","clearCurrentlyPlaying","setUpAds","poster","placeholderImageEl","infoPanel","playButtonEl","playButtonTextEl","playButtonIconEl","paused","play","updatePlaceholder","newOpts","currentTime","currentlyPlayingVideo","videos","videoEls","Playlist","jsonpCallbackNames","generateCallbackName","callbackName","crossDomainFetch","jsonpFetch","defaultOptsKey","scriptTag","getRendition","optimumvideowidth","supportedFormats","_supportedFormats2","appropriateRendition","orderedRenditions","videoCodec","renditionOne","renditionTwo","frameWidth","_supportedFormats","testEl","supported","canPlayType","mpeg4","h264","ogg","webm","createVideoOverlayElement","overlayEl","sdkScriptLoaded","VideoAds","adsLoaded","videoLoad","googleSdkScript","getVideoBrand","filtered","adContainerEl","adDisplayContainer","google","ima","AdDisplayContainer","adsLoader","AdsLoader","adsManagerLoadedHandler","adErrorHandler","adEventHandler","contentPauseRequestHandler","contentResumeRequestHandler","AdsManagerLoadedEvent","Type","ADS_MANAGER_LOADED","AdErrorEvent","AD_ERROR","requestAds","playAdEventHandler","adsRequest","AdsRequest","brand","advertisingUrl","adTagUrl","linearAdSlotWidth","linearAdSlotHeight","nonLinearAdSlotWidth","nonLinearAdSlotHeight","adsManagerLoadedEvent","adsRenderingSettings","AdsRenderingSettings","restoreCustomPlaybackStateOnAdBreakComplete","adsManager","getAdsManager","AdEvent","CONTENT_PAUSE_REQUESTED","CONTENT_RESUME_REQUESTED","ALL_ADS_COMPLETED","LOADED","STARTED","COMPLETE","startAds","videoLoaded","ViewMode","NORMAL","adError","initialize","loadedmetadataHandler","adEvent","ad","getAd","isLinear","formatBrand","formatDuration","lengthInMs","lengthInSeconds","minutes","seconds","VideoInfo","infoEl","brandEl","durationEl","descriptionEl","shortDescription","currentId","currentIndex","currentVideoId","nextVideoId","nextVideoOpts","factory","PropTypes","SVG","preact","render$1","vnode","_preactCompatRendered","_component","unmountComponentAtNode","existing","EmptyComponent","createFactory","applyClassName","currentComponent","createStringRefProxy","cloneElement$1","props","_len","_key","cloneElement","isValidElement","VNode","$$typeof","REACT_ELEMENT_TYPE","_refProxies","resolved","refs","cl","createClass","Component$1","BYPASS_HOOK","bindAll","newComponentHook","propTypes","defaultProps","getDefaultProps","displayName","__bound","AUTOBIND_BLACKLIST","callMethod","multihook","hooks","_i2","propsHook","componentWillReceiveProps","beforeRender","afterRender","DEV","Component","ELEMENTS","shouldComponentUpdate","componentWillRecieveProps","componentWillUpdate","componentDidUpdate","componentWillMount","componentDidMount","componentWillUnmount","componentDidUnmount","NODE_ENV","childrenPropertyAlias","oldVnodeHook","ARR","Children","toArray","only","DOM","findDOMNode","isReactComponent","getDOMNode","isMounted","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","Item","array","nextTick","browser","env","argv","versions","addListener","removeListener","removeAllListeners","binding","cwd","chdir","umask","__WEBPACK_AMD_DEFINE_FACTORY__","getIteratorFn","maybeIterable","iteratorFn","ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","createChainableTypeChecker","checkType","propName","componentName","propFullName","ANONYMOUS","locationName","ReactPropTypeLocationNames","chainedCheckType","createPrimitiveTypeChecker","expectedType","propValue","propType","getPropType","preciseType","getPreciseType","createAnyTypeChecker","emptyFunction","thatReturns","createArrayOfTypeChecker","typeChecker","createElementTypeChecker","ReactElement","createInstanceTypeChecker","expectedClass","expectedClassName","actualClassName","getClassName","createEnumTypeChecker","expectedValues","valuesString","createObjectOfTypeChecker","createUnionTypeChecker","arrayOfTypeCheckers","checker","createNodeChecker","isNode","createShapeTypeChecker","shapeTypes","every","entry","childContext","ReactPropTypes","bool","number","any","arrayOf","instanceOf","objectOf","oneOf","oneOfType","shape","overwriteProperty","PROPERTY_ERRORS","contentPropertyDef","attemptOverwriteProperty","hasPropertyErrors","setStateUpdateProxy","babelHelpers","classCallCheck","inherits","objectWithoutProperties","possibleConstructorReturn","SVG_ATTRS","NS","xlink","NS_ATTR","PROP_TO_ATTR_MAP","EMPTY","updateMode","div","oldCreate","createElementNS","createAttributeShim","memoize","mem","ns","_Component","hasRendered","setState","xmlns","setImmediate","delve","styleObjToCss","empty","jsToCss","NON_DIMENSION_PROPS","hashToClassName","normalize","optionsHook","hook","deepHook","attributeChildren","lastSimple","_p","falsey","SHARED_TEMP_ARRAY","child","simple","createLinkedState","eventPath","p0","_component$setState","enqueueRender","debounceRendering","rerender","currentItems","itemsOffline","_dirty","renderComponent","isFunctionalComponent","buildFunctionalComponent","getNodeProps","EMPTY_BASE","ensureNodeData","ATTR_KEY","getNodeType","appendChildren","many","into","createDocumentFragment","removeNode","getAccessor","setAccessor","__html","setComplexAccessor","normalizeEventName","_listeners","eventProxy","getNodeAttributes","getRawNodeAttributes","getNamedItem","getAttributesAsObject","isSameNodeType","_componentConstructor","collectNode","cleanNode","normalizeName","nodes","createNode","diff","originalAttributes","buildComponentFromVNode","TEXT_CONTENT","UNDEFINED_ELEMENT","recollectNodeTree","innerDiffNode","diffAttributes","keyed","keyedLen","childrenLen","__key","vchildren","vlen","vchild","removeOrphanedChildren","unmountOnly","unmountComponent","old","collectComponent","components","createComponent","Ctor","inst","nextBase","triggerComponentRender","setComponentProps","_disableRendering","__ref","prevContext","prevProps","renderSync","syncComponentUpdates","skip","rendered","previousProps","previousState","prevState","previousContext","isUpdate","initialBase","childComponent","getChildContext","toUnmount","childProps","SYNC_RENDER","_parentComponent","NO_RENDER","DOM_RENDER","cbase","replaceChild","componentRef","_renderCallbacks","oldDom","isOwner","createComponentFromVNode","_linkedStates","built","HAS_DOM","boxFlex","boxFlexGroup","columnCount","fillOpacity","flex","flexGrow","flexPositive","flexShrink","flexNegative","fontWeight","lineClamp","lineHeight","opacity","order","orphans","strokeOpacity","widows","zoom","ch","linkState","cacheKey","forceUpdate","clearImmediate","Timeout","clearFn","_id","_clearFn","immediateIds","nextImmediateId","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout"],"mappings":";;;;;;;;;;;;;;;;;AAAA,GAAIA,UACK,SAAUC,GCGnB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA,KDOM,SAASI,EAAQD,EAASH,GAE/B,YE9CD,IAAMW,GAAMX,EAAQ,EAEpBW,GAAIC,UAAUC,OAAOC,iBACpBC,OAAQ,WACRC,SAAS,IAKVC,WAAW,WACVC,oBAAoB,cAClB,GAEHd,EAAOD,QAAUQ,GFqDX,SAASP,EAAQD,EAASH,GAE/B,YAwHA,SAASmB,GAAwBC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIE,KAAa,IAAW,MAAPF,EAAe,IAAK,GAAIG,KAAOH,GAAWI,OAAOC,UAAUC,eAAenB,KAAKa,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,GAAgC,OAAtBD,cAAiBF,EAAYE,EAElQ,QAASK,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GAxHvFI,OAAOK,eAAe1B,EAAS,cAC7B2B,OAAO,IAET3B,EAAQ4B,UAAY5B,EAAQ6B,OAAS7B,EAAQ8B,gBAAkB9B,EAAQ+B,YAAc/B,EAAQgC,eAAiBhC,EAAQiC,OAASjC,EAAQkC,OAASlC,EAAQmC,UAAYnC,EAAQoC,SAAWpC,EAAQqC,MAAQrC,EAAQsC,UAAYtC,EAAQuC,cAAgBvC,EAAQwC,OAASxC,EAAQyC,iBAAmBzC,EAAQ0C,MAAQ1C,EAAQ2C,QAAU3C,EAAQ4C,gBAAkB5C,EAAQ6C,gBAAkB7C,EAAQ8C,eAAiB9C,EAAQ+C,eAAiB/C,EAAQgD,QAAUhD,EAAQiD,MAAQjD,EAAQkD,UAAYlD,EAAQmD,KAAOnD,EAAQoD,UAAYpD,EAAQS,UAAY4C,MAEphB,IAAIC,GAAWzD,EAAoB,EAEnCwB,QAAOK,eAAe1B,EAAS,aAC7BuD,YAAY,EACZC,IAAK,WACH,MAAOF,GG/EJ7C,aHkFPY,OAAOK,eAAe1B,EAAS,aAC7BuD,YAAY,EACZC,IAAK,WACH,MAAOF,GGrFOF,aADnBvD,EAAA,IAIA,IAAA4D,GAAA5D,EAAA,IH0FK6D,EAAQlC,EAAuBiC,GGxFpCE,EAAA9D,EAAA,KH4FK+D,EAAapC,EAAuBmC,GG1FzCE,EAAAhE,EAAA,KH8FKiE,EAAStC,EAAuBqC,GG5FrCE,EAAAlE,EAAA,KHgGKmE,EAAWxC,EAAuBuC,GG9FvCE,EAAApE,EAAA,KHkGKqE,EAAkB1C,EAAuByC,GGhG9CE,EAAAtE,EAAA,KHoGKuE,EAAkB5C,EAAuB2C,GGlG9CE,EAAAxE,EAAA,KHsGKyE,EAAmB9C,EAAuB6C,GGpG/CE,EAAA1E,EAAA,KHwGK2E,EAAmBhD,EAAuB+C,GGtG/CE,EAAA5E,EAAA,KH0GK6E,EAAWlD,EAAuBiD,GGxGvCE,EAAA9E,EAAA,KH4GK+E,EAASpD,EAAuBmD,GG1GrCE,EAAAhF,EAAA,KH8GKiF,EAAoBtD,EAAuBqD,GG5GhDE,EAAAlF,EAAA,IHgHKmF,EAAUxD,EAAuBuD,GG9GtCE,EAAApF,EAAA,KHkHKqF,EAAiB1D,EAAuByD,GGhH7CE,EAAAtF,EAAA,KHoHKuF,EAAa5D,EAAuB2D,GGlHzCE,EAAAxF,EAAA,KHsHKyF,EAAS9D,EAAuB6D,GGpHrCE,EAAA1F,EAAA,KHwHK2F,EAAYhE,EAAuB+D,GGtHxCE,EAAA5F,EAAA,KH0HK6F,EAAalE,EAAuBiE,GGxHzCE,EAAA9F,EAAA,KH4HK+F,EAAWpE,EAAuBmE,GG1HvCE,EAAAhG,EAAA,KAAYiG,EH8HC9E,EAAwB6E,GG1HrCE,EAAAlG,EAAA,KH8HKmG,EAAkBxE,EAAuBuE,GG5H9CE,EAAApG,EAAA,IHgIKqG,EAAe1E,EAAuByE,GG9H3CE,EAAAtG,EAAA,IHkIKuG,EAAmB5E,EAAuB2E,GGhI/CE,EAAAxG,EAAA,KHoIKyG,EAAU9E,EAAuB6E,GGlItCE,EAAA1G,EAAA,KHsIK2G,EAAahF,EAAuB+E,EGrL5BpD,qBAEAD,yBAEAD,qBAEAD,uBAEAD,8BAEAD,8BAEAD,+BAEAD,+BAEAD,uBAEAD,qBAEAD,gCAEAD,sBAEAD,6BAEAD,yBAEAD,qBAEAD,wBAEAD,yBAEAD,sBAEAD,SAAS6D,EAIT9D,8BAEAD,2BAEAD,+BAEAD,sBAEAD,0BH0KP,SAAS3B,EAAQD,EAASH,GAE/B,YAEAwB,QAAOK,eAAe1B,EAAS,cAC7B2B,OAAO,GIrOV,IAAA8E,GAAA5G,EAAA,EJ0OCG,cIxOc,GAAAyG,GAAAC,qBJyOdzG,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YAqEA,SAASmB,GAAwBC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIE,KAAa,IAAW,MAAPF,EAAe,IAAK,GAAIG,KAAOH,GAAWI,OAAOC,UAAUC,eAAenB,KAAKa,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,GAAgC,OAAtBD,cAAiBF,EAAYE,EAElQ,QAASK,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GArEvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,IAER3B,EAAQ0G,qBAAuB1G,EAAQ2G,QAAUtD,MAEjD,IAAIuD,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GK1P/CE,EAAAjH,EAAA,GL8PKkH,EAAWvF,EAAuBsF,GK7PvC3D,EAAAtD,EAAA,ILiQK4D,EAAQjC,EAAuB2B,GKhQpCD,EAAArD,EAAA,KLoQK8D,EAAanC,EAAuB0B,GKnQzCD,EAAApD,EAAA,KLuQKgE,EAASrC,EAAuByB,GKtQrCD,EAAAnD,EAAA,KL0QKkE,EAAWvC,EAAuBwB,GKzQvCgE,EAAAnH,EAAA,KL6QKoH,EAAWzF,EAAuBwF,GK5QvCjE,EAAAlD,EAAA,KLgRKoE,EAAkBzC,EAAuBuB,GK/Q9CD,EAAAjD,EAAA,KLmRKsE,EAAkB3C,EAAuBsB,GKlR9CD,EAAAhD,EAAA,KLsRKwE,EAAmB7C,EAAuBqB,GKrR/CD,EAAA/C,EAAA,KLyRK0E,EAAmB/C,EAAuBoB,GKxR/CD,EAAA9C,EAAA,KL4RK4E,EAAWjD,EAAuBmB,GK3RvCD,EAAA7C,EAAA,KL+RK8E,EAASnD,EAAuBkB,GK9RrCD,EAAA5C,EAAA,KLkSKgF,EAAoBrD,EAAuBiB,GKjShDoD,EAAAhG,EAAA,KACAqH,EAAArH,EAAA,KAAYsH,ELsSSnG,EAAwBkG,GKpShCP,aACZS,UACCC,QAAQ,EACRC,QAAQ,EACRC,MAAM,EACNC,gBAAgB,GAEjBC,UACCJ,QAAQ,EACRC,QAAQ,EACRC,MAAM,EACNG,eAAe,EACfF,gBAAgB,EAChBG,MAAM,EACNC,gBAAgB,EAChBC,eAAe,EACfC,KAAK,GL8SqB9H,GK1Sf0G,qBL0S8C,WKzS1D,QAAAA,MAAe,EAAAG,cAAAkB,KAAArB,GACdqB,KAAKC,uBACLD,KAAKE,iBACLF,KAAKG,OAAS,GAAAnB,cACdgB,KAAK3E,UAAY2E,KAAK3E,UAAU+E,KAAKJ,MACrCA,KAAKtH,UAAYsH,KAAKtH,UAAU0H,KAAKJ,MLgcrC,MAjJArB,GAAqBpF,UK5StB8G,cL4SgD,SK5SjCC,GACd,QAASN,KAAKC,oBAAoBK,IL+SlC3B,EAAqBpF,UK5StB8B,UL4S4C,WK5SnB,GAAdkF,GAAcC,UAAAC,QAAA,GAAAnF,SAAAkF,UAAA,MAAAA,UAAA,EAGxBR,MAAKE,cAAgBK,GLiTrB5B,EAAqBpF,UK9StBb,UL8S4C,SK9SjCgI,EAAQC,GAAI,GAAAC,GAAAZ,IAiBtB,OAfKW,IAAwB,kBAAXD,KACjBC,EAAKD,EACLA,EAAS,MAGVC,EAAKA,GAAO,iBAAM,OAClBD,EAASA,GAAUV,KAAKE,kBAGnBQ,EAAOG,WACXH,EAAOG,SAAWvH,OAAOwH,UAAWJ,IAGrCA,EAAOG,SAAWvH,OAAOwH,UAAWlC,EAAQ8B,EAAO7H,QAAS6H,EAAOG,UAE5Db,KAAKG,OAAOzH,UAAUgI,EAAQ,SAAAK,GAAiC,GAA9BC,GAA8BD,EAA9BC,MAAOC,EAAuBF,EAAvBE,QAASC,EAAcH,EAAdG,OAoBvD,IAlBKN,EAAKX,oBAAoBkB,WAE7BvF,aAASwF,KAAKJ,EAAOE,GACrBN,EAAKX,oBAAoBkB,UAAW,GAGjCH,EAAMvF,IAAI,iBACb2D,EACEiC,SAASL,GADX5B,SAEQ,cAERA,EAAckC,aAGXN,EAAMvF,IAAI,aACbyD,aAAOkC,OAGJV,EAAOG,SAASjB,OAASgB,EAAKX,oBAAoBsB,WAAY,CACjE,GAAMC,KAEFR,GAAMvF,IAAI,WACb+F,EAAWC,MAAMC,aAAc,WAAYC,KAAM,YAG9CX,EAAMvF,IAAI,iBACb+F,EAAWC,MAAMC,aAAc,QAASC,KAAM,YAE/C/E,aAAKgF,OAAOR,KAAKI,GAEbR,EAAMvF,IAAI,oBACbqB,aAAYsE,OAGbR,EAAKX,oBAAoB4B,YAAa,EA2DvC,MAxDInB,GAAOG,SAASvB,SAAWsB,EAAKX,oBAAoBX,SACvDtD,aAAOoF,KAAKJ,GACZJ,EAAKX,oBAAoBX,QAAS,GAG/BoB,EAAOG,SAASrB,OAASoB,EAAKX,oBAAoBT,OACrD1D,aAAKsF,OACLR,EAAKX,oBAAoBT,MAAO,GAG7BkB,EAAOG,SAASiB,iBAAmBlB,EAAKX,oBAAoB6B,kBAC/D,EAAAhE,EAAAiE,YACAnB,EAAKX,oBAAoB6B,gBAAiB,GAG3Cb,EACEe,KAAK,WAEDtB,EAAOG,SAAStB,SAAWqB,EAAKX,oBAAoBV,SACvD7C,aAAO0E,KAAKJ,GACZJ,EAAKX,oBAAoBV,QAAS,GAG/BmB,EAAOG,SAASlB,gBAAkBiB,EAAKX,oBAAoBN,gBAC9DvD,aAAcgF,KAAKJ,GACnBJ,EAAKX,oBAAoBN,eAAgB,GAGtCe,EAAOG,SAASpB,iBAAmBmB,EAAKX,oBAAoBR,iBAC/DuB,EAAMvF,IAAI,iBAAmBa,aAAe8E,OAC5CR,EAAKX,oBAAoBR,gBAAiB,GAGvCiB,EAAOG,SAAShB,iBAAmBe,EAAKX,oBAAoBJ,iBAC/DrD,aAAe4E,KAAKJ,GACpBJ,EAAKX,oBAAoBJ,gBAAiB,GAGvCa,EAAOG,SAASjB,OAASgB,EAAKX,oBAAoBgC,SACrDrF,aAAKsF,GAAGd,MACPe,WAAa,aAAaC,KAAKC,SAASC,QACxCtB,UAEDpE,aAAK2F,UAAUnB,MACde,WAAa,aAAaC,KAAKC,SAASC,QACxCtB,UAEDJ,EAAKX,oBAAoBgC,QAAS,GAG/BvB,EAAOG,SAASf,gBAAkBc,EAAKX,oBAAoBH,gBAC9D5D,aAAckF,KAAKJ,GACnBJ,EAAKX,oBAAoBH,eAAgB,KAIrC0C,QAAQC,SAASzB,QAAOC,UAASC,YACtCc,KAAKrB,GACLqB,KAAK,WAWL,MATKpB,GAAKX,oBAAoBF,MAC7BrE,aAAI0F,KAAKJ,EAAOE,GAChBN,EAAKX,oBAAoBF,KAAM,GAG3Ba,EAAKX,oBAAoByC,eAC7B9G,aAAS+G,SAAS3B,GAClBJ,EAAKX,oBAAoByC,cAAe,IAEjC1B,QAAOC,UAASC,gBLsTpBvC,MAKH,SAASzG,EAAQD,GM/evB,YAEAA,GAAAkB,YAAA,EAEAlB,aAAA,SAAA2K,EAAAC,GACA,KAAAD,YAAAC,IACA,SAAAC,WAAA,uCNufM,SAAS5K,EAAQD,EAASH,GAE/B,YAkBA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GOlgBxF,QAAS6J,KACR,GAAIC,IAAe,EACbC,EAAsB,WAC3B,GAA4B,aAAxBZ,SAASa,YAA6BF,KAAiB,EAG1D,MAFAA,IAAe,EACfrK,OAAOwK,cAAc,GAAIC,aAAY,kBAC9B,EAGJH,OACJtK,OAAO0K,iBAAiB,OAAQJ,GAChCZ,SAASiB,mBAAqBL,GPue/B,GAAIM,GAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,GAElC1E,EAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GO9f/C4E,EAAA3L,EAAA,IACA2C,EAAA3C,EAAA,IACA4L,EAAA5L,EAAA,IPogBK6L,EAAoBlK,EAAuBiK,EO9gBhD,KAAK/K,OAAOiL,QAAS,CACpBjL,OAAOiL,UAEP,KAAK,GADCC,IAAW,OAAQ,MAAO,OAAQ,SAC/BC,EAAI,EAAGA,EAAID,EAAQpD,OAAQqD,IACnCnL,OAAOiL,QAAQC,EAAQC,IAAM,aAO/B,GAAMC,GAAUjM,EAAQ,IAkBlBkM,EPghBS,WACb,QAASA,MACR,EAAIlF,cAA0BkB,KAAMgE,GAsGrC,MAnGAA,GAAQzK,UOnhBT6H,KPmhB0B,YOjhBzB,EAAAqC,EAAAQ,MAAU5B,SAAS6B,iBAEnBlE,KAAKkB,SACJiD,aAAc9B,SAAS6B,gBAAgBE,aAAa,2BACpDC,QAAShC,SAAS6B,gBAAgBI,aAAa,qBAC/CC,KAAMlC,SAAS6B,gBAAgBI,aAAa,iBAG7C,IAAMtD,GAAQrI,OAAO6L,iBAAiBC,OAAO,SAACvL,EAAKwL,GAElD,MADAxL,GAAIwL,EAAKH,MAAQG,EAAKC,MACfzL,IAEPuC,IAAK,SAAU8I,GACd,MAAOvE,MAAKuE,IAEbK,OAAQ,WACP,MAAO5E,QA4BT,OAxBA+D,GAAQ3C,MACPyD,QAAS7D,EAAMvF,IAAI,yBAA2BuE,KAAKkB,QAAQiD,aAC3DW,eAAgB,mEAChBC,YAAa/E,KAAKkB,QAAQmD,QAC1BW,SAAUhE,EAAMvF,IAAI,gCAAkC,cAAgB,MACtEwJ,MAAQC,QAASlF,KAAKkB,QAAQqD,MAC9BY,YAAaxM,OAAOwM,mBAGrB,EAAAxB,cAAgB3C,EAAO+C,GAEnB/C,EAAMvF,IAAI,8BAA6B,WAE1C,GAAM2J,GAAYzM,OAAO0M,KAEzB1M,QAAO0M,MAAQ,SAAUC,EAAKC,GAC7B,MAAOH,GAAU/M,KAAK2H,KAAMsF,EAAKC,GAA1BH,SACC,SAAUI,GAEhB,KADAzB,GAAQ0B,IAAIH,GAAOC,EAAOG,KAAKC,UAAUJ,GAAQ,IAAOC,GAClDA,QAKHhD,QAAQC,SACdzB,MAAOA,EACPE,QAASlB,KAAKkB,QACdD,QAAS,GAAIuB,SAAQ,SAAAoD,GAEhBvD,SAASwD,cAAc,4BAC1B,EAAApL,EAAAqL,kBAAiB,UAAWF,GAE5BA,SP0hBH5B,EAAQzK,UOphBTb,UPohB+B,SOphBpB6M,EAAMQ,GAAU,GAAAnF,GAAAZ,IAC1BuF,GAAOA,OACP,EAAA9K,EAAAqL,kBAAiB,WAAY,WAC5BlF,EAAKoF,WAAapF,EAAKoF,YAAcpF,EAAKQ,OAE1CR,EAAKqF,gBAAkBrF,EAAKoF,WAC1BhE,KAAK,SAAAkE,GACL,GAAIC,GAAUJ,EAASG,EAIvB,OAHMC,IAAmC,kBAAjBA,GAAQnE,OAC/BmE,EAAU3D,QAAQC,WAEZ0D,EACLnE,KAAK,WACDuD,EAAKzM,SACR,EAAA2B,EAAA2L,UAAS,kBAET/D,SAAS6B,gBAAgBmC,UAAUC,IAAI,eACvC,EAAA7L,EAAA2L,UAAS,iBACTrD,SAbkBnC,SAiBf,SAAA4E,GACD5E,EAAKM,QAAQiD,eACE,YAAf,mBAAOqB,GAAP,eAAAhC,cAAOgC,KAAoBA,EAAIe,MAClC3C,QAAQ4C,MAAMhB,EAAIe,OAElB3C,QAAQ4C,MAAMhB,IAGhBzB,EAAQyC,MAAMhB,QPwhBjBxB,EAAQzK,UOnhBTkN,WPmhBgC,SOnhBpBC,GACX,OAAO,EAAAjM,EAAAgM,YAAWC,IPshBX1C,IOlhBT9L,GAAOD,QAAU+L,GPyhBX,SAAS9L,EAAQD,EAASH,GQ7pBhC,YAcA,SAAA2B,GAAAP,GAAsC,MAAAA,MAAAC,WAAAD,GAAuCQ,UAAAR,GAZ7EjB,EAAAkB,YAAA,CAEA,IAAAwN,GAAA7O,EAAA,GAEA8O,EAAAnN,EAAAkN,GAEAE,EAAA/O,EAAA,IAEAgP,EAAArN,EAAAoN,GAEAE,EAAA,kBAAAD,eAAA,gBAAAF,cAAA,SAAA1N,GAAiH,aAAAA,IAAqB,SAAAA,GAAmB,MAAAA,IAAA,kBAAA4N,eAAA5N,EAAA8N,cAAAF,aAAA,eAAA5N,GAIzJjB,cAAA,kBAAA6O,eAAA,WAAAC,EAAAH,cAAA,SAAA1N,GACA,yBAAAA,GAAA,YAAA6N,EAAA7N,IACC,SAAAA,GACD,MAAAA,IAAA,kBAAA4N,eAAA5N,EAAA8N,cAAAF,aAAA,4BAAA5N,GAAA,YAAA6N,EAAA7N,KRoqBM,SAAShB,EAAQD,EAASH,GSvrBhCI,EAAAD,SAAkByB,UAAA5B,EAAA,GAAAqB,YAAA,IT6rBZ,SAASjB,EAAQD,EAASH,GU7rBhCA,EAAA,GACAA,EAAA,IACAI,EAAAD,QAAAH,EAAA,IAAAmP,EAAA,aVmsBM,SAAS/O,EAAQD,EAASH,GWrsBhC,YACA,IAAAoP,GAAApP,EAAA,OAGAA,GAAA,IAAAqP,OAAA,kBAAAC,GACApH,KAAAqH,GAAAF,OAAAC,GACApH,KAAAsH,GAAA,GAEC,WACD,GAEAC,GAFAC,EAAAxH,KAAAqH,GACAI,EAAAzH,KAAAsH,EAEA,OAAAG,IAAAD,EAAA/G,QAA+B7G,MAAA0B,OAAAoM,MAAA,IAC/BH,EAAAL,EAAAM,EAAAC,GACAzH,KAAAsH,IAAAC,EAAA9G,QACU7G,MAAA2N,EAAAG,MAAA,OX4sBJ,SAASxP,EAAQD,EAASH,GY3tBhC,GAAA6P,GAAA7P,EAAA,IACA8P,EAAA9P,EAAA,GAGAI,GAAAD,QAAA,SAAA4P,GACA,gBAAAC,EAAAC,GACA,GAGAC,GAAAC,EAHAC,EAAAf,OAAAS,EAAAE,IACAhE,EAAA6D,EAAAI,GACAI,EAAAD,EAAAzH,MAEA,OAAAqD,GAAA,GAAAA,GAAAqE,EAAAN,EAAA,GAAAvM,QACA0M,EAAAE,EAAAE,WAAAtE,GACAkE,EAAA,OAAAA,EAAA,OAAAlE,EAAA,IAAAqE,IAAAF,EAAAC,EAAAE,WAAAtE,EAAA,WAAAmE,EAAA,MACAJ,EAAAK,EAAAG,OAAAvE,GAAAkE,EACAH,EAAAK,EAAAI,MAAAxE,IAAA,IAAAkE,EAAA,YAAAC,EAAA,iBZmuBM,SAAS/P,EAAQD,GahvBvB,GAAAsQ,GAAAC,KAAAD,KACAE,EAAAD,KAAAC,KACAvQ,GAAAD,QAAA,SAAAyQ,GACA,MAAAC,OAAAD,MAAA,GAAAA,EAAA,EAAAD,EAAAF,GAAAG,KbwvBM,SAASxQ,EAAQD,Gc3vBvBC,EAAAD,QAAA,SAAAyQ,GACA,GAAApN,QAAAoN,EAAA,KAAA5F,WAAA,yBAAA4F,EACA,OAAAA,KdmwBM,SAASxQ,EAAQD,EAASH,GetwBhC,YACA,IAAA8Q,GAAA9Q,EAAA,IACA+Q,EAAA/Q,EAAA,IACAgR,EAAAhR,EAAA,IACAiR,EAAAjR,EAAA,IACAkR,EAAAlR,EAAA,IACAmR,EAAAnR,EAAA,IACAoR,EAAApR,EAAA,IACAqR,EAAArR,EAAA,IACAsR,EAAAtR,EAAA,IACAuR,EAAAvR,EAAA,gBACAwR,OAAAC,MAAA,WAAAA,QACAC,EAAA,aACAC,EAAA,OACAC,EAAA,SAEAC,EAAA,WAA4B,MAAA3J,MAE5B9H,GAAAD,QAAA,SAAA2R,EAAAC,EAAAhH,EAAAiH,EAAAC,EAAAC,EAAAC,GACAf,EAAArG,EAAAgH,EAAAC,EACA,IAeAjG,GAAAxK,EAAA6Q,EAfAC,EAAA,SAAAC,GACA,IAAAd,GAAAc,IAAAC,GAAA,MAAAA,GAAAD,EACA,QAAAA,GACA,IAAAX,GAAA,kBAAwC,UAAA5G,GAAA7C,KAAAoK,GACxC,KAAAV,GAAA,kBAA4C,UAAA7G,GAAA7C,KAAAoK,IACvC,kBAA2B,UAAAvH,GAAA7C,KAAAoK,KAEhCE,EAAAT,EAAA,YACAU,EAAAR,GAAAL,EACAc,GAAA,EACAH,EAAAT,EAAArQ,UACAkR,EAAAJ,EAAAhB,IAAAgB,EAAAb,IAAAO,GAAAM,EAAAN,GACAW,EAAAD,GAAAN,EAAAJ,GACAY,EAAAZ,EAAAQ,EAAAJ,EAAA,WAAAO,EAAApP,OACAsP,EAAA,SAAAf,EAAAQ,EAAAQ,SAAAJ,GAwBA,IArBAG,IACAV,EAAAd,EAAAwB,EAAAvS,KAAA,GAAAuR,KACAM,IAAA5Q,OAAAC,YAEA4P,EAAAe,EAAAI,GAAA,GAEA1B,GAAAI,EAAAkB,EAAAb,IAAAN,EAAAmB,EAAAb,EAAAM,KAIAY,GAAAE,KAAAlG,OAAAmF,IACAc,GAAA,EACAE,EAAA,WAAiC,MAAAD,GAAApS,KAAA2H,QAGjC4I,IAAAqB,IAAAX,IAAAkB,GAAAH,EAAAhB,IACAN,EAAAsB,EAAAhB,EAAAqB,GAGAzB,EAAAY,GAAAa,EACAzB,EAAAqB,GAAAX,EACAI,EAMA,GALAlG,GACAiH,OAAAP,EAAAG,EAAAP,EAAAT,GACAH,KAAAS,EAAAU,EAAAP,EAAAV,GACAoB,QAAAF,GAEAV,EAAA,IAAA5Q,IAAAwK,GACAxK,IAAAgR,IAAAvB,EAAAuB,EAAAhR,EAAAwK,EAAAxK,QACKwP,KAAAkC,EAAAlC,EAAAmC,GAAA1B,GAAAkB,GAAAX,EAAAhG,EAEL,OAAAA,Kf6wBM,SAAS3L,EAAQD,GgBj1BvBC,EAAAD,SAAA,GhBu1BM,SAASC,EAAQD,EAASH,GiBv1BhC,GAAAmT,GAAAnT,EAAA,IACAoT,EAAApT,EAAA,IACAqT,EAAArT,EAAA,IACAiR,EAAAjR,EAAA,IACAsT,EAAA,YAEAvC,EAAA,SAAAlH,EAAA4C,EAAA8G,GACA,GASAhS,GAAAiS,EAAAC,EATAC,EAAA7J,EAAAkH,EAAAmC,EACAS,EAAA9J,EAAAkH,EAAA6C,EACAC,EAAAhK,EAAAkH,EAAA+C,EACAC,EAAAlK,EAAAkH,EAAAkC,EACAe,EAAAnK,EAAAkH,EAAAkD,EACAC,EAAArK,EAAAkH,EAAAoD,EACAhU,EAAAwT,EAAAP,IAAA3G,KAAA2G,EAAA3G,OACA2H,EAAAjU,EAAAmT,GACAe,EAAAV,EAAAR,EAAAU,EAAAV,EAAA1G,IAAA0G,EAAA1G,QAAqF6G,EAErFK,KAAAJ,EAAA9G,EACA,KAAAlL,IAAAgS,GAEAC,GAAAE,GAAAW,GAAA7Q,SAAA6Q,EAAA9S,GACAiS,GAAAjS,IAAApB,KAEAsT,EAAAD,EAAAa,EAAA9S,GAAAgS,EAAAhS,GAEApB,EAAAoB,GAAAoS,GAAA,kBAAAU,GAAA9S,GAAAgS,EAAAhS,GAEAyS,GAAAR,EAAAH,EAAAI,EAAAN,GAEAe,GAAAG,EAAA9S,IAAAkS,EAAA,SAAAa,GACA,GAAApB,GAAA,SAAAhD,EAAAC,EAAA1P,GACA,GAAAyH,eAAAoM,GAAA,CACA,OAAA5L,UAAAC,QACA,iBAAA2L,EACA,kBAAAA,GAAApE,EACA,kBAAAoE,GAAApE,EAAAC,GACW,UAAAmE,GAAApE,EAAAC,EAAA1P,GACF,MAAA6T,GAAAC,MAAArM,KAAAQ,WAGT,OADAwK,GAAAI,GAAAgB,EAAAhB,GACAJ,GAEKO,GAAAM,GAAA,kBAAAN,GAAAJ,EAAAmB,SAAAjU,KAAAkT,KAELM,KACA5T,EAAAsU,UAAAtU,EAAAsU,aAA+ClT,GAAAkS,EAE/C5J,EAAAkH,EAAA2D,GAAAN,MAAA7S,IAAA0P,EAAAmD,EAAA7S,EAAAkS,KAKA1C,GAAAmC,EAAA,EACAnC,EAAA6C,EAAA,EACA7C,EAAA+C,EAAA,EACA/C,EAAAkC,EAAA,EACAlC,EAAAkD,EAAA,GACAlD,EAAAoD,EAAA,GACApD,EAAA4D,EAAA,GACA5D,EAAA2D,EAAA,IACAtU,EAAAD,QAAA4Q,GjB61BM,SAAS3Q,EAAQD,GkBx5BvB,GAAAgT,GAAA/S,EAAAD,QAAA,mBAAAU,gBAAA6P,WACA7P,OAAA,mBAAA+T,YAAAlE,WAAAkE,KAAAJ,SAAA,gBACA,iBAAAK,WAAA1B,IlB+5BM,SAAS/S,EAAQD,GmBl6BvB,GAAAiT,GAAAhT,EAAAD,SAA6BoM,QAAA,QAC7B,iBAAAuI,WAAA1B,InBw6BM,SAAShT,EAAQD,EAASH,GoBx6BhC,GAAA+U,GAAA/U,EAAA,GACAI,GAAAD,QAAA,SAAA6U,EAAAhF,EAAArH,GAEA,GADAoM,EAAAC,GACAxR,SAAAwM,EAAA,MAAAgF,EACA,QAAArM,GACA,uBAAAuH,GACA,MAAA8E,GAAAzU,KAAAyP,EAAAE,GAEA,wBAAAA,EAAAC,GACA,MAAA6E,GAAAzU,KAAAyP,EAAAE,EAAAC,GAEA,wBAAAD,EAAAC,EAAA1P,GACA,MAAAuU,GAAAzU,KAAAyP,EAAAE,EAAAC,EAAA1P,IAGA,kBACA,MAAAuU,GAAAT,MAAAvE,EAAAtH,cpBi7BM,SAAStI,EAAQD,GqBl8BvBC,EAAAD,QAAA,SAAAyQ,GACA,qBAAAA,GAAA,KAAA5F,WAAA4F,EAAA,sBACA,OAAAA,KrBy8BM,SAASxQ,EAAQD,EAASH,GsB38BhC,GAAAiV,GAAAjV,EAAA,IACAkV,EAAAlV,EAAA,GACAI,GAAAD,QAAAH,EAAA,aAAAmV,EAAA5T,EAAAO,GACA,MAAAmT,GAAA9F,EAAAgG,EAAA5T,EAAA2T,EAAA,EAAApT,KACC,SAAAqT,EAAA5T,EAAAO,GAED,MADAqT,GAAA5T,GAAAO,EACAqT,ItBk9BM,SAAS/U,EAAQD,EAASH,GuBx9BhC,GAAAoV,GAAApV,EAAA,IACAqV,EAAArV,EAAA,IACAsV,EAAAtV,EAAA,IACAiV,EAAAzT,OAAAK,cAEA1B,GAAAgP,EAAAnP,EAAA,IAAAwB,OAAAK,eAAA,SAAA6N,EAAAuD,EAAAsC,GAIA,GAHAH,EAAA1F,GACAuD,EAAAqC,EAAArC,GAAA,GACAmC,EAAAG,GACAF,EAAA,IACA,MAAAJ,GAAAvF,EAAAuD,EAAAsC,GACG,MAAAC,IACH,UAAAD,IAAA,OAAAA,GAAA,KAAAvK,WAAA,2BAEA,OADA,SAAAuK,KAAA7F,EAAAuD,GAAAsC,EAAAzT,OACA4N,IvB+9BM,SAAStP,EAAQD,EAASH,GwB7+BhC,GAAAyV,GAAAzV,EAAA,GACAI,GAAAD,QAAA,SAAAyQ,GACA,IAAA6E,EAAA7E,GAAA,KAAA5F,WAAA4F,EAAA,qBACA,OAAAA,KxBo/BM,SAASxQ,EAAQD,GyBv/BvBC,EAAAD,QAAA,SAAAyQ,GACA,sBAAAA,GAAA,OAAAA,EAAA,kBAAAA,KzB8/BM,SAASxQ,EAAQD,EAASH,G0B//BhCI,EAAAD,SAAAH,EAAA,MAAAA,EAAA,eACA,MAAmG,IAAnGwB,OAAAK,eAAA7B,EAAA,gBAAsE2D,IAAA,WAAgB,YAAauM,K1BsgC7F,SAAS9P,EAAQD,EAASH,G2BtgChCI,EAAAD,SAAAH,EAAA,eACA,MAAsE,IAAtEwB,OAAAK,kBAAiC,KAAQ8B,IAAA,WAAgB,YAAauM,K3B8gChE,SAAS9P,EAAQD,G4BhhCvBC,EAAAD,QAAA,SAAAuV,GACA,IACA,QAAAA,IACG,MAAAF,GACH,Y5BwhCM,SAASpV,EAAQD,EAASH,G6B5hChC,GAAAyV,GAAAzV,EAAA,IACAuK,EAAAvK,EAAA,IAAAuK,SAEAoL,EAAAF,EAAAlL,IAAAkL,EAAAlL,EAAAqL,cACAxV,GAAAD,QAAA,SAAAyQ,GACA,MAAA+E,GAAApL,EAAAqL,cAAAhF,Q7BmiCM,SAASxQ,EAAQD,EAASH,G8BviChC,GAAAyV,GAAAzV,EAAA,GAGAI,GAAAD,QAAA,SAAAyQ,EAAAkD,GACA,IAAA2B,EAAA7E,GAAA,MAAAA,EACA,IAAAoE,GAAAa,CACA,IAAA/B,GAAA,mBAAAkB,EAAApE,EAAAkF,YAAAL,EAAAI,EAAAb,EAAAzU,KAAAqQ,IAAA,MAAAiF,EACA,uBAAAb,EAAApE,EAAAmF,WAAAN,EAAAI,EAAAb,EAAAzU,KAAAqQ,IAAA,MAAAiF,EACA,KAAA/B,GAAA,mBAAAkB,EAAApE,EAAAkF,YAAAL,EAAAI,EAAAb,EAAAzU,KAAAqQ,IAAA,MAAAiF,EACA,MAAA7K,WAAA,6C9B+iCM,SAAS5K,EAAQD,G+BzjCvBC,EAAAD,QAAA,SAAA6V,EAAAlU,GACA,OACA4B,aAAA,EAAAsS,GACAC,eAAA,EAAAD,GACAE,WAAA,EAAAF,GACAlU,W/BikCM,SAAS1B,EAAQD,EAASH,GgCtkChCI,EAAAD,QAAAH,EAAA,KhC4kCM,SAASI,EAAQD,GiC5kCvB,GAAAuB,MAAuBA,cACvBtB,GAAAD,QAAA,SAAAyQ,EAAArP,GACA,MAAAG,GAAAnB,KAAAqQ,EAAArP,KjCmlCM,SAASnB,EAAQD,GkCrlCvBC,EAAAD,YlC2lCM,SAASC,EAAQD,EAASH,GmC3lChC,YACA,IAAAmW,GAAAnW,EAAA,IACAoW,EAAApW,EAAA,IACAqR,EAAArR,EAAA,IACAoS,IAGApS,GAAA,IAAAoS,EAAApS,EAAA,2BAAgF,MAAAkI,QAEhF9H,EAAAD,QAAA,SAAA4K,EAAAgH,EAAAC,GACAjH,EAAAtJ,UAAA0U,EAAA/D,GAAqDJ,KAAAoE,EAAA,EAAApE,KACrDX,EAAAtG,EAAAgH,EAAA,enCkmCM,SAAS3R,EAAQD,EAASH,GoC5mChC,GAAAoV,GAAApV,EAAA,IACAqW,EAAArW,EAAA,IACAsW,EAAAtW,EAAA,IACAuW,EAAAvW,EAAA,gBACAwW,EAAA,aACAlD,EAAA,YAGAmD,EAAA,WAEA,GAIAC,GAJAC,EAAA3W,EAAA,cACAgM,EAAAsK,EAAA3N,OACAiO,EAAA,IACAC,EAAA,GAYA,KAVAF,EAAAG,MAAAC,QAAA,OACA/W,EAAA,IAAAgX,YAAAL,GACAA,EAAA/H,IAAA,cAGA8H,EAAAC,EAAAM,cAAA1M,SACAmM,EAAAQ,OACAR,EAAAS,MAAAP,EAAA,SAAAC,EAAA,oBAAAD,EAAA,UAAAC,GACAH,EAAAU,QACAX,EAAAC,EAAAxD,EACAlH,WAAAyK,GAAAnD,GAAAgD,EAAAtK,GACA,OAAAyK,KAGArW,GAAAD,QAAAqB,OAAA2U,QAAA,SAAAzG,EAAA2H,GACA,GAAAjJ,EAQA,OAPA,QAAAsB,GACA8G,EAAAlD,GAAA8B,EAAA1F,GACAtB,EAAA,GAAAoI,GACAA,EAAAlD,GAAA,KAEAlF,EAAAmI,GAAA7G,GACGtB,EAAAqI,IACHjT,SAAA6T,EAAAjJ,EAAAiI,EAAAjI,EAAAiJ,KpCqnCM,SAASjX,EAAQD,EAASH,GqC5pChC,GAAAiV,GAAAjV,EAAA,IACAoV,EAAApV,EAAA,IACAsX,EAAAtX,EAAA,GAEAI,GAAAD,QAAAH,EAAA,IAAAwB,OAAA+V,iBAAA,SAAA7H,EAAA2H,GACAjC,EAAA1F,EAKA,KAJA,GAGAuD,GAHAxB,EAAA6F,EAAAD,GACA1O,EAAA8I,EAAA9I,OACAqD,EAAA,EAEArD,EAAAqD,GAAAiJ,EAAA9F,EAAAO,EAAAuD,EAAAxB,EAAAzF,KAAAqL,EAAApE,GACA,OAAAvD,KrCmqCM,SAAStP,EAAQD,EAASH,GsC7qChC,GAAAwX,GAAAxX,EAAA,IACAsW,EAAAtW,EAAA,GAEAI,GAAAD,QAAAqB,OAAAiQ,MAAA,SAAA/B,GACA,MAAA8H,GAAA9H,EAAA4G,KtCqrCM,SAASlW,EAAQD,EAASH,GuC1rChC,GAAAkR,GAAAlR,EAAA,IACAyX,EAAAzX,EAAA,IACA0X,EAAA1X,EAAA,QACAuW,EAAAvW,EAAA,eAEAI,GAAAD,QAAA,SAAAgV,EAAAwC,GACA,GAGApW,GAHAmO,EAAA+H,EAAAtC,GACAnJ,EAAA,EACAoC,IAEA,KAAA7M,IAAAmO,GAAAnO,GAAAgV,GAAArF,EAAAxB,EAAAnO,IAAA6M,EAAAzE,KAAApI,EAEA,MAAAoW,EAAAhP,OAAAqD,GAAAkF,EAAAxB,EAAAnO,EAAAoW,EAAA3L,SACA0L,EAAAtJ,EAAA7M,IAAA6M,EAAAzE,KAAApI,GAEA,OAAA6M,KvCisCM,SAAShO,EAAQD,EAASH,GwC/sChC,GAAA4X,GAAA5X,EAAA,IACA8P,EAAA9P,EAAA,GACAI,GAAAD,QAAA,SAAAyQ,GACA,MAAAgH,GAAA9H,EAAAc,MxCutCM,SAASxQ,EAAQD,EAASH,GyC1tChC,GAAA6X,GAAA7X,EAAA,GACAI,GAAAD,QAAAqB,OAAA,KAAAsW,qBAAA,GAAAtW,OAAA,SAAAoP,GACA,gBAAAiH,EAAAjH,KAAAmH,MAAA,IAAAvW,OAAAoP,KzCkuCM,SAASxQ,EAAQD,G0CruCvB,GAAA2V,MAAiBA,QAEjB1V,GAAAD,QAAA,SAAAyQ,GACA,MAAAkF,GAAAvV,KAAAqQ,GAAAJ,MAAA,Q1C4uCM,SAASpQ,EAAQD,EAASH,G2C7uChC,GAAAyX,GAAAzX,EAAA,IACAgY,EAAAhY,EAAA,IACAiY,EAAAjY,EAAA,GACAI,GAAAD,QAAA,SAAA+X,GACA,gBAAAC,EAAAC,EAAAC,GACA,GAGAvW,GAHA4N,EAAA+H,EAAAU,GACAxP,EAAAqP,EAAAtI,EAAA/G,QACAgH,EAAAsI,EAAAI,EAAA1P,EAGA,IAAAuP,GAAAE,MAAA,KAAAzP,EAAAgH,GAEA,GADA7N,EAAA4N,EAAAC,KACA7N,KAAA,aAEK,MAAW6G,EAAAgH,EAAeA,IAAA,IAAAuI,GAAAvI,IAAAD,KAC/BA,EAAAC,KAAAyI,EAAA,MAAAF,IAAAvI,GAAA,CACK,QAAAuI,S3CuvCC,SAAS9X,EAAQD,EAASH,G4CxwChC,GAAA6P,GAAA7P,EAAA,IACAsY,EAAA5H,KAAA4H,GACAlY,GAAAD,QAAA,SAAAyQ,GACA,MAAAA,GAAA,EAAA0H,EAAAzI,EAAAe,GAAA,sB5CgxCM,SAASxQ,EAAQD,EAASH,G6CpxChC,GAAA6P,GAAA7P,EAAA,IACAuY,EAAA7H,KAAA6H,IACAD,EAAA5H,KAAA4H,GACAlY,GAAAD,QAAA,SAAAwP,EAAAhH,GAEA,MADAgH,GAAAE,EAAAF,GACAA,EAAA,EAAA4I,EAAA5I,EAAAhH,EAAA,GAAA2P,EAAA3I,EAAAhH,K7C2xCM,SAASvI,EAAQD,EAASH,G8ChyChC,GAAAwY,GAAAxY,EAAA,YACAyY,EAAAzY,EAAA,GACAI,GAAAD,QAAA,SAAAoB,GACA,MAAAiX,GAAAjX,KAAAiX,EAAAjX,GAAAkX,EAAAlX,M9CuyCM,SAASnB,EAAQD,EAASH,G+C1yChC,GAAAmT,GAAAnT,EAAA,IACA0Y,EAAA,qBACAC,EAAAxF,EAAAuF,KAAAvF,EAAAuF,MACAtY,GAAAD,QAAA,SAAAoB,GACA,MAAAoX,GAAApX,KAAAoX,EAAApX,S/CizCM,SAASnB,EAAQD,GgDrzCvB,GAAAE,GAAA,EACAuY,EAAAlI,KAAAmI,QACAzY,GAAAD,QAAA,SAAAoB,GACA,gBAAAuX,OAAAtV,SAAAjC,EAAA,GAAAA,EAAA,QAAAlB,EAAAuY,GAAA9C,SAAA,OhD4zCM,SAAS1V,EAAQD,GiD9zCvBC,EAAAD,QAAA,gGAEA4X,MAAA,MjDq0CM,SAAS3X,EAAQD,EAASH,GkDx0ChCI,EAAAD,QAAAH,EAAA,IAAAuK,mBAAA6B,iBlD80CM,SAAShM,EAAQD,EAASH,GmD90ChC,GAAA+Y,GAAA/Y,EAAA,IAAAmP,EACA+B,EAAAlR,EAAA,IACAwS,EAAAxS,EAAA,kBAEAI,GAAAD,QAAA,SAAAyQ,EAAAoI,EAAAC,GACArI,IAAAM,EAAAN,EAAAqI,EAAArI,IAAAnP,UAAA+Q,IAAAuG,EAAAnI,EAAA4B,GAAkEyD,cAAA,EAAAnU,MAAAkX,MnDq1C5D,SAAS5Y,EAAQD,EAASH,GoD11ChC,GAAA2Y,GAAA3Y,EAAA,WACAyY,EAAAzY,EAAA,IACAkZ,EAAAlZ,EAAA,IAAAkZ,OACAC,EAAA,kBAAAD,GAEAE,EAAAhZ,EAAAD,QAAA,SAAAsM,GACA,MAAAkM,GAAAlM,KAAAkM,EAAAlM,GACA0M,GAAAD,EAAAzM,KAAA0M,EAAAD,EAAAT,GAAA,UAAAhM,IAGA2M,GAAAT,SpDg2CM,SAASvY,EAAQD,EAASH,GqDz2ChC,GAAAkR,GAAAlR,EAAA,IACAqZ,EAAArZ,EAAA,IACAuW,EAAAvW,EAAA,gBACAsZ,EAAA9X,OAAAC,SAEArB,GAAAD,QAAAqB,OAAA8P,gBAAA,SAAA5B,GAEA,MADAA,GAAA2J,EAAA3J,GACAwB,EAAAxB,EAAA6G,GAAA7G,EAAA6G,GACA,kBAAA7G,GAAAR,aAAAQ,eAAAR,YACAQ,EAAAR,YAAAzN,UACGiO,YAAAlO,QAAA8X,EAAA,OrDi3CG,SAASlZ,EAAQD,EAASH,GsD33ChC,GAAA8P,GAAA9P,EAAA,GACAI,GAAAD,QAAA,SAAAyQ,GACA,MAAApP,QAAAsO,EAAAc,MtDm4CM,SAASxQ,EAAQD,EAASH,GuDt4ChCA,EAAA,GAMA,QALAmT,GAAAnT,EAAA,IACAiR,EAAAjR,EAAA,IACAmR,EAAAnR,EAAA,IACAuZ,EAAAvZ,EAAA,mBAEAwZ,GAAA,sEAAAxN,EAAA,EAAwGA,EAAA,EAAOA,IAAA,CAC/G,GAAA+F,GAAAyH,EAAAxN,GACAyN,EAAAtG,EAAApB,GACAQ,EAAAkH,KAAAhY,SACA8Q,OAAAgH,IAAAtI,EAAAsB,EAAAgH,EAAAxH,GACAZ,EAAAY,GAAAZ,EAAAuI,QvD64CM,SAAStZ,EAAQD,EAASH,GwDx5ChC,YACA,IAAA2Z,GAAA3Z,EAAA,IACA4Z,EAAA5Z,EAAA,IACAmR,EAAAnR,EAAA,IACAyX,EAAAzX,EAAA,GAMAI,GAAAD,QAAAH,EAAA,IAAA0Z,MAAA,iBAAApK,EAAAgD,GACApK,KAAAqH,GAAAkI,EAAAnI,GACApH,KAAAsH,GAAA,EACAtH,KAAA2R,GAAAvH,GAEC,WACD,GAAA5C,GAAAxH,KAAAqH,GACA+C,EAAApK,KAAA2R,GACAlK,EAAAzH,KAAAsH,IACA,QAAAE,GAAAC,GAAAD,EAAA/G,QACAT,KAAAqH,GAAA/L,OACAoW,EAAA,IAEA,QAAAtH,EAAAsH,EAAA,EAAAjK,GACA,UAAA2C,EAAAsH,EAAA,EAAAlK,EAAAC,IACAiK,EAAA,GAAAjK,EAAAD,EAAAC,MACC,UAGDwB,EAAA2I,UAAA3I,EAAAuI,MAEAC,EAAA,QACAA,EAAA,UACAA,EAAA,YxD85CM,SAASvZ,EAAQD,GyD/7CvBC,EAAAD,QAAA,czDq8CM,SAASC,EAAQD,G0Dr8CvBC,EAAAD,QAAA,SAAAyP,EAAA9N,GACA,OAAUA,QAAA8N,Y1D48CJ,SAASxP,EAAQD,EAASH,G2D78ChCG,EAAAgP,EAAAnP,EAAA,K3Dm9CM,SAASI,EAAQD,EAASH,G4Dn9ChCI,EAAAD,SAAkByB,UAAA5B,EAAA,IAAAqB,YAAA,I5Dy9CZ,SAASjB,EAAQD,EAASH,G6Dz9ChCA,EAAA,IACAA,EAAA,IACAA,EAAA,IACAA,EAAA,IACAI,EAAAD,QAAAH,EAAA,IAAAkZ,Q7D+9CM,SAAS9Y,EAAQD,EAASH,G8Dn+ChC,YAEA,IAAAmT,GAAAnT,EAAA,IACAkR,EAAAlR,EAAA,IACA+Z,EAAA/Z,EAAA,IACA+Q,EAAA/Q,EAAA,IACAgR,EAAAhR,EAAA,IACAga,EAAAha,EAAA,IAAAia,IACAC,EAAAla,EAAA,IACAwY,EAAAxY,EAAA,IACAqR,EAAArR,EAAA,IACAyY,EAAAzY,EAAA,IACAma,EAAAna,EAAA,IACAoa,EAAApa,EAAA,IACAqa,EAAAra,EAAA,IACAsa,EAAAta,EAAA,IACAua,EAAAva,EAAA,IACAwa,EAAAxa,EAAA,IACAoV,EAAApV,EAAA,IACAyX,EAAAzX,EAAA,IACAsV,EAAAtV,EAAA,IACAkV,EAAAlV,EAAA,IACAya,EAAAza,EAAA,IACA0a,EAAA1a,EAAA,IACA2a,EAAA3a,EAAA,IACA4a,EAAA5a,EAAA,IACAwX,EAAAxX,EAAA,IACA6a,EAAAF,EAAAxL,EACA8F,EAAA2F,EAAAzL,EACA2L,EAAAJ,EAAAvL,EACA4L,EAAA5H,EAAA+F,OACA8B,EAAA7H,EAAAvF,KACAqN,EAAAD,KAAAnN,UACAyF,EAAA,YACA4H,EAAAf,EAAA,WACAgB,EAAAhB,EAAA,eACAiB,KAAuBtD,qBACvBuD,EAAA7C,EAAA,mBACA8C,EAAA9C,EAAA,WACA+C,EAAA/C,EAAA,cACAc,EAAA9X,OAAA8R,GACAkI,EAAA,kBAAAT,GACAU,EAAAtI,EAAAsI,QAEAC,GAAAD,MAAAnI,KAAAmI,EAAAnI,GAAAqI,UAGAC,EAAA7B,GAAAG,EAAA,WACA,MAEG,IAFHO,EAAAxF,KAAsB,KACtBtR,IAAA,WAAoB,MAAAsR,GAAA/M,KAAA,KAAuBpG,MAAA,IAASoO,MACjDA,IACF,SAAAU,EAAArP,EAAAsa,GACD,GAAAC,GAAAjB,EAAAvB,EAAA/X,EACAua,UAAAxC,GAAA/X,GACA0T,EAAArE,EAAArP,EAAAsa,GACAC,GAAAlL,IAAA0I,GAAArE,EAAAqE,EAAA/X,EAAAua,IACC7G,EAED8G,EAAA,SAAA/C,GACA,GAAAgD,GAAAV,EAAAtC,GAAAyB,EAAAM,EAAAzH,GAEA,OADA0I,GAAAnC,GAAAb,EACAgD,GAGAC,EAAAT,GAAA,gBAAAT,GAAAmB,SAAA,SAAAtL,GACA,sBAAAA,IACC,SAAAA,GACD,MAAAA,aAAAmK,IAGAoB,EAAA,SAAAvL,EAAArP,EAAAsa,GAKA,MAJAjL,KAAA0I,GAAA6C,EAAAZ,EAAAha,EAAAsa,GACAzG,EAAAxE,GACArP,EAAA+T,EAAA/T,GAAA,GACA6T,EAAAyG,GACA3K,EAAAoK,EAAA/Z,IACAsa,EAAAnY,YAIAwN,EAAAN,EAAAsK,IAAAtK,EAAAsK,GAAA3Z,KAAAqP,EAAAsK,GAAA3Z,IAAA,GACAsa,EAAApB,EAAAoB,GAAsBnY,WAAAwR,EAAA,UAJtBhE,EAAAN,EAAAsK,IAAAjG,EAAArE,EAAAsK,EAAAhG,EAAA,OACAtE,EAAAsK,GAAA3Z,IAAA,GAIKqa,EAAAhL,EAAArP,EAAAsa,IACF5G,EAAArE,EAAArP,EAAAsa,IAEHO,EAAA,SAAAxL,EAAAqC,GACAmC,EAAAxE,EAKA,KAJA,GAGArP,GAHAkQ,EAAA8I,EAAAtH,EAAAwE,EAAAxE,IACAjH,EAAA,EACAqE,EAAAoB,EAAA9I,OAEA0H,EAAArE,GAAAmQ,EAAAvL,EAAArP,EAAAkQ,EAAAzF,KAAAiH,EAAA1R,GACA,OAAAqP,IAEAyL,EAAA,SAAAzL,EAAAqC,GACA,MAAAzP,UAAAyP,EAAAwH,EAAA7J,GAAAwL,EAAA3B,EAAA7J,GAAAqC,IAEAqJ,EAAA,SAAA/a,GACA,GAAAgb,GAAAnB,EAAA7a,KAAA2H,KAAA3G,EAAA+T,EAAA/T,GAAA,GACA,SAAA2G,OAAAoR,GAAApI,EAAAoK,EAAA/Z,KAAA2P,EAAAqK,EAAAha,QACAgb,IAAArL,EAAAhJ,KAAA3G,KAAA2P,EAAAoK,EAAA/Z,IAAA2P,EAAAhJ,KAAAgT,IAAAhT,KAAAgT,GAAA3Z,KAAAgb,IAEAC,EAAA,SAAA5L,EAAArP,GAGA,GAFAqP,EAAA6G,EAAA7G,GACArP,EAAA+T,EAAA/T,GAAA,GACAqP,IAAA0I,IAAApI,EAAAoK,EAAA/Z,IAAA2P,EAAAqK,EAAAha,GAAA,CACA,GAAAsa,GAAAhB,EAAAjK,EAAArP,EAEA,QADAsa,IAAA3K,EAAAoK,EAAA/Z,IAAA2P,EAAAN,EAAAsK,IAAAtK,EAAAsK,GAAA3Z,KAAAsa,EAAAnY,YAAA,GACAmY,IAEAY,EAAA,SAAA7L,GAKA,IAJA,GAGArP,GAHAoW,EAAAmD,EAAArD,EAAA7G,IACAxC,KACApC,EAAA,EAEA2L,EAAAhP,OAAAqD,GACAkF,EAAAoK,EAAA/Z,EAAAoW,EAAA3L,OAAAzK,GAAA2Z,GAAA3Z,GAAAyY,GAAA5L,EAAAzE,KAAApI,EACG,OAAA6M,IAEHsO,GAAA,SAAA9L,GAMA,IALA,GAIArP,GAJAob,EAAA/L,IAAA0I,EACA3B,EAAAmD,EAAA6B,EAAApB,EAAA9D,EAAA7G,IACAxC,KACApC,EAAA,EAEA2L,EAAAhP,OAAAqD,IACAkF,EAAAoK,EAAA/Z,EAAAoW,EAAA3L,OAAA2Q,IAAAzL,EAAAoI,EAAA/X,IAAA6M,EAAAzE,KAAA2R,EAAA/Z,GACG,OAAA6M,GAIHoN,KACAT,EAAA,WACA,GAAA7S,eAAA6S,GAAA,KAAA/P,WAAA,+BACA,IAAAgO,GAAAP,EAAA/P,UAAAC,OAAA,EAAAD,UAAA,GAAAlF,QACAoZ,EAAA,SAAA9a,GACAoG,OAAAoR,GAAAsD,EAAArc,KAAAgb,EAAAzZ,GACAoP,EAAAhJ,KAAAgT,IAAAhK,EAAAhJ,KAAAgT,GAAAlC,KAAA9Q,KAAAgT,GAAAlC,IAAA,GACA4C,EAAA1T,KAAA8Q,EAAA9D,EAAA,EAAApT,IAGA,OADAiY,IAAA2B,GAAAE,EAAAtC,EAAAN,GAA8D/C,cAAA,EAAA4G,IAAAD,IAC9Db,EAAA/C,IAEAhI,EAAA+J,EAAAzH,GAAA,sBACA,MAAApL,MAAA2R,KAGAc,EAAAxL,EAAAqN,EACA5B,EAAAzL,EAAAgN,EACAnc,EAAA,IAAAmP,EAAAuL,EAAAvL,EAAAsN,EACAzc,EAAA,IAAAmP,EAAAmN,EACAtc,EAAA,IAAAmP,EAAAuN,GAEA3C,IAAA/Z,EAAA,KACAgR,EAAAsI,EAAA,uBAAAgD,GAAA,GAGAlC,EAAAjL,EAAA,SAAA1C,GACA,MAAAsP,GAAA5B,EAAA1N,MAIAsE,IAAA6C,EAAA7C,EAAAoD,EAAApD,EAAAmC,GAAAsI,GAA0DtC,OAAA6B,GAE1D,QAAA+B,IAAA,iHAGA/E,MAAA,KAAA/L,GAAA,EAAoB8Q,GAAAnU,OAAAqD,IAAoBmO,EAAA2C,GAAA9Q,MAExC,QAAA8Q,IAAAtF,EAAA2C,EAAAxB,OAAA3M,GAAA,EAA0C8Q,GAAAnU,OAAAqD,IAAoBqO,EAAAyC,GAAA9Q,MAE9D+E,KAAA+C,EAAA/C,EAAAmC,GAAAsI,EAAA,UAEAuB,MAAA,SAAAxb,GACA,MAAA2P,GAAAmK,EAAA9Z,GAAA,IACA8Z,EAAA9Z,GACA8Z,EAAA9Z,GAAAwZ,EAAAxZ,IAGAyb,OAAA,SAAAzb,GACA,GAAA0a,EAAA1a,GAAA,MAAA+Y,GAAAe,EAAA9Z,EACA,MAAAyJ,WAAAzJ,EAAA,sBAEA0b,UAAA,WAAwBvB,GAAA,GACxBwB,UAAA,WAAwBxB,GAAA,KAGxB3K,IAAA+C,EAAA/C,EAAAmC,GAAAsI,EAAA,UAEArF,OAAAkG,EAEAxa,eAAAsa,EAEA5E,iBAAA6E,EAEAe,yBAAAX,EAEAY,oBAAAX,EAEAY,sBAAAX,KAIA1B,GAAAjK,IAAA+C,EAAA/C,EAAAmC,IAAAsI,GAAAtB,EAAA,WACA,GAAApG,GAAAiH,GAIA,iBAAAE,GAAAnH,KAAyD,MAAzDmH,GAAoD/K,EAAA4D,KAAa,MAAAmH,EAAAzZ,OAAAsS,OAChE,QACDjG,UAAA,SAAA+C,GACA,GAAApN,SAAAoN,IAAAqL,EAAArL,GAAA,CAIA,IAHA,GAEA0M,GAAAC,EAFAC,GAAA5M,GACA5E,EAAA,EAEAtD,UAAAC,OAAAqD,GAAAwR,EAAA7T,KAAAjB,UAAAsD,KAQA,OAPAsR,GAAAE,EAAA,GACA,kBAAAF,KAAAC,EAAAD,IACAC,GAAA/C,EAAA8C,OAAA,SAAA/b,EAAAO,GAEA,GADAyb,IAAAzb,EAAAyb,EAAAhd,KAAA2H,KAAA3G,EAAAO,KACAma,EAAAna,GAAA,MAAAA,KAEA0b,EAAA,GAAAF,EACArC,EAAA1G,MAAAyG,EAAAwC,OAKAzC,EAAAzH,GAAA6H,IAAAnb,EAAA,IAAA+a,EAAAzH,GAAA6H,EAAAJ,EAAAzH,GAAAyC,SAEA1E,EAAA0J,EAAA,UAEA1J,EAAAX,KAAA,WAEAW,EAAA8B,EAAAvF,KAAA,Y9Dy+CM,SAASxN,EAAQD,EAASH,G+DntDhC,GAAAga,GAAAha,EAAA,YACAyV,EAAAzV,EAAA,IACAkR,EAAAlR,EAAA,IACAyd,EAAAzd,EAAA,IAAAmP,EACA9O,EAAA,EACAqd,EAAAlc,OAAAkc,cAAA,WACA,UAEAC,GAAA3d,EAAA,eACA,MAAA0d,GAAAlc,OAAAoc,yBAEAC,EAAA,SAAAjN,GACA6M,EAAA7M,EAAAoJ,GAAqBlY,OACrBkK,EAAA,OAAA3L,EACAyd,SAGAC,EAAA,SAAAnN,EAAAuF,GAEA,IAAAV,EAAA7E,GAAA,sBAAAA,MAAA,gBAAAA,GAAA,SAAAA,CACA,KAAAM,EAAAN,EAAAoJ,GAAA,CAEA,IAAA0D,EAAA9M,GAAA,SAEA,KAAAuF,EAAA,SAEA0H,GAAAjN,GAEG,MAAAA,GAAAoJ,GAAAhO,GAEHgS,EAAA,SAAApN,EAAAuF,GACA,IAAAjF,EAAAN,EAAAoJ,GAAA,CAEA,IAAA0D,EAAA9M,GAAA,QAEA,KAAAuF,EAAA,QAEA0H,GAAAjN,GAEG,MAAAA,GAAAoJ,GAAA8D,GAGHG,EAAA,SAAArN,GAEA,MADA+M,IAAAO,EAAAC,MAAAT,EAAA9M,KAAAM,EAAAN,EAAAoJ,IAAA6D,EAAAjN,GACAA,GAEAsN,EAAA9d,EAAAD,SACA8Z,IAAAD,EACAmE,MAAA,EACAJ,UACAC,UACAC,a/D0tDM,SAAS7d,EAAQD,EAASH,GgE7wDhC,GAAAmT,GAAAnT,EAAA,IACAoT,EAAApT,EAAA,IACA8Q,EAAA9Q,EAAA,IACAoa,EAAApa,EAAA,IACA6B,EAAA7B,EAAA,IAAAmP,CACA/O,GAAAD,QAAA,SAAAsM,GACA,GAAAsO,GAAA3H,EAAA8F,SAAA9F,EAAA8F,OAAApI,KAA0DqC,EAAA+F,WAC1D,MAAAzM,EAAA8D,OAAA,IAAA9D,IAAAsO,IAAAlZ,EAAAkZ,EAAAtO,GAAgF3K,MAAAsY,EAAAjL,EAAA1C,OhEoxD1E,SAASrM,EAAQD,EAASH,GiE3xDhC,GAAAsX,GAAAtX,EAAA,IACAyX,EAAAzX,EAAA,GACAI,GAAAD,QAAA,SAAAgV,EAAAiD,GAMA,IALA,GAIA7W,GAJAmO,EAAA+H,EAAAtC,GACA1D,EAAA6F,EAAA5H,GACA/G,EAAA8I,EAAA9I,OACAgH,EAAA,EAEAhH,EAAAgH,GAAA,GAAAD,EAAAnO,EAAAkQ,EAAA9B,QAAAyI,EAAA,MAAA7W,KjEkyDM,SAASnB,EAAQD,EAASH,GkEzyDhC,GAAAsX,GAAAtX,EAAA,IACAoe,EAAApe,EAAA,IACAqe,EAAAre,EAAA,GACAI,GAAAD,QAAA,SAAAyQ,GACA,GAAAxC,GAAAkJ,EAAA1G,GACA0N,EAAAF,EAAAjP,CACA,IAAAmP,EAKA,IAJA,GAGA/c,GAHAub,EAAAwB,EAAA1N,GACAwK,EAAAiD,EAAAlP,EACAnD,EAAA,EAEA8Q,EAAAnU,OAAAqD,GAAAoP,EAAA7a,KAAAqQ,EAAArP,EAAAub,EAAA9Q,OAAAoC,EAAAzE,KAAApI,EACG,OAAA6M,KlEizDG,SAAShO,EAAQD,GmE9zDvBA,EAAAgP,EAAA3N,OAAA6b,uBnEo0DM,SAASjd,EAAQD,GoEp0DvBA,EAAAgP,KAAc2I,sBpE00DR,SAAS1X,EAAQD,EAASH,GqEz0DhC,GAAA6X,GAAA7X,EAAA,GACAI,GAAAD,QAAAuZ,MAAAc,SAAA,SAAA+D,GACA,eAAA1G,EAAA0G,KrEi1DM,SAASne,EAAQD,EAASH,GsEn1DhC,GAAAyX,GAAAzX,EAAA,IACA8a,EAAA9a,EAAA,IAAAmP,EACA2G,KAAkBA,SAElB0I,EAAA,gBAAA3d,iBAAAW,OAAA4b,oBACA5b,OAAA4b,oBAAAvc,WAEA4d,EAAA,SAAA7N,GACA,IACA,MAAAkK,GAAAlK,GACG,MAAA4E,GACH,MAAAgJ,GAAAhO,SAIApQ,GAAAD,QAAAgP,EAAA,SAAAyB,GACA,MAAA4N,IAAA,mBAAA1I,EAAAvV,KAAAqQ,GAAA6N,EAAA7N,GAAAkK,EAAArD,EAAA7G,MtE41DM,SAASxQ,EAAQD,EAASH,GuE52DhC,GAAAwX,GAAAxX,EAAA,IACA0e,EAAA1e,EAAA,IAAA8Y,OAAA,qBAEA3Y,GAAAgP,EAAA3N,OAAA4b,qBAAA,SAAA1N,GACA,MAAA8H,GAAA9H,EAAAgP,KvEo3DM,SAASte,EAAQD,EAASH,GwEz3DhC,GAAAqe,GAAAre,EAAA,IACAkV,EAAAlV,EAAA,IACAyX,EAAAzX,EAAA,IACAsV,EAAAtV,EAAA,IACAkR,EAAAlR,EAAA,IACAqV,EAAArV,EAAA,IACA6a,EAAArZ,OAAA2b,wBAEAhd,GAAAgP,EAAAnP,EAAA,IAAA6a,EAAA,SAAAnL,EAAAuD,GAGA,GAFAvD,EAAA+H,EAAA/H,GACAuD,EAAAqC,EAAArC,GAAA,GACAoC,EAAA,IACA,MAAAwF,GAAAnL,EAAAuD,GACG,MAAAuC,IACH,GAAAtE,EAAAxB,EAAAuD,GAAA,MAAAiC,IAAAmJ,EAAAlP,EAAA5O,KAAAmP,EAAAuD,GAAAvD,EAAAuD,MxEg4DM,SAAS7S,EAAQD,KAMjB,SAASC,EAAQD,EAASH,GyEp5DhCA,EAAA,sBzE05DM,SAASI,EAAQD,EAASH,G0E15DhCA,EAAA,mB1Eg6DM,SAASI,EAAQD,EAASH,GAE/B,Y2E34DM,SAASmM,GAAMiM,GACrB,GAAI,GAAIuG,QAAJ,UAAqBC,EAArB,WAAoDtU,KAAKC,SAASC,QACrE,MAAOE,SAAQC,SAEhB,IAAMkU,GAAeC,EAAYC,IAAI,SAAAC,GACpC,MAAO,IAAIC,kBAAiBD,EAAWE,QAAUC,OAAQH,EAAWG,SAClEhT,OACAjC,KAAK,iBACLkO,GAAGgH,WAAaJ,EAAWK,OAAO1S,OACjC,SAAC2S,EAASC,GAAV,MAAoBD,QAAeE,EAAmBD,GAAS,OAKnE,OAAO7U,SAAQ+U,IAAIZ,GACjB3U,KAAK,WAELK,SAASC,OAAYoU,EAArB,2CAEA,EAAAjc,EAAA2L,UAAS,iBALJ5D,SAOC,c3Ew3DRlJ,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,IAER3B,E2Eh5DegM,MArBhB,IAAAxJ,GAAA3C,EAAA,GADAA,GAAQ,GAER,IAAMwf,GAAmB,wBACnBZ,EAAuB,oBACvBE,IAEJI,OAAQ,sBACRC,OAAQ,SACRE,QAAS,kBAGTH,OAAQ,YACRC,OAAQ,SACRE,QAAS,OAAQ,cAGjBH,OAAQ,YACRC,OAAQ,IACRE,QAAS,WAAY,mB3Ei8DjB,SAASjf,EAAQD,EAASH,GAE/B,Y4Er9DD,SAAS0f,GAAMxP,GAAG,MAAOA,IAAGA,EAAgB,GAAdQ,KAAKmI,UAAa3I,EAAE,GAAG4F,SAAS,MAAM,2BAA2B6J,QAAQ,SAASD,GAEhHtf,EAAOD,SACNyf,EAAG,SAAUC,EAAKxM,GAAO,OAAQA,GAAO9I,UAAUwD,cAAc8R,IAChEC,GAAI,SAAUD,EAAKxM,GAAO,SAAU7C,MAAMjQ,MAAM8S,GAAO9I,UAAUwV,iBAAiBF,KAClFG,SAAU,SAAUC,EAAMC,GACzB,GAAIC,SACJ,OAAO,YAAY,GAAArX,GAAAZ,KACZsV,EAAO9U,UACP0X,EAAQ,WACbD,EAAU,KACVF,EAAK1L,MAALzL,EAAiB0U,GAElB6C,cAAaF,GACbA,EAAUlf,WAAWmf,EAAOF,KAI9BI,SAAU,SAAUL,EAAMC,GACzB,GAAIC,SACJ,OAAO,YAAY,GAAAI,GAAArY,IAClB,KAAIiY,EAAJ,CAGA,GAAM3C,GAAO9U,UACP0X,EAAQ,WACbD,EAAU,KACVF,EAAK1L,MAALgM,EAAiB/C,GAGlB2C,GAAUlf,WAAWmf,EAAOF,MAG9BR,KAAMA,EACNc,MAAOxgB,EAAQ,IACf2O,WAAY,SAACC,GACZ,MAAO,IAAIlE,SAAQ,SAACoD,EAAK2S,GACxB,GAAMC,GAAS7f,OAAO8f,iBAAiB/R,EACvC8R,GAAOnV,iBAAiB,OAAQuC,GAChC4S,EAAOnV,iBAAiB,QAASkV,MAGnCzS,iBAAkB,SAAC4S,EAAeC,GACjC,MAAOhgB,iBAAgB+f,EAAhB,UACNC,IACAtW,SAASgB,iBAAT,SAAmCqV,EAAnC,SAA0DC,IAE5DC,UAAW,SAACrU,EAAMsU,GAAyB,GAAnBC,GAAmBtY,UAAAC,QAAA,GAAAnF,SAAAkF,UAAA,IAAAA,UAAA,GACpCuY,EAAS1W,SAAS2W,KAClBC,EAAS,WACd,IACC,MAAO,IAAI7V,aAAYmB,GAAOuU,QAASA,EAASI,YAAY,EAAMC,OAAQN,IACzE,MAAOvL,GACR,MAAOlK,aAAYgW,gBAAgB7U,GAAM,GAAM,EAAMsU,MAIvDE,GAAO5V,cAAc8V,IAEtB7S,SAAU,SAAA7B,GACT,GAAM8U,GAAc1gB,OAAO2gB,KAAO3gB,OAAO0gB,aAAe1gB,OAAO4gB,eAAiB5gB,OAAO6gB,mBAAqB7gB,OAAO8gB,cAC/GJ,IAAeA,EAAYK,MAC9BL,EAAYK,KAAKnV,IAGnBoV,eAAgB,SAAAtgB,GACf,GAAMugB,GAAQ,GAAInD,QAAUpd,EAAd,WAA6B,KACrC2O,EAAI4R,EAAMpM,KAAKnL,SAASC,OAC9B,OAAQ0F,GAAKA,EAAE,GAAK1M,U5Ey+DhB,SAASpD,EAAQD,GAEtB,Y6EjgED,SAAS4hB,GAASC,GACjB,GAAIC,EAAS3X,KAAK0X,MAAY,EAC7B,MAAOA,EAKR,KAFA,GAAIhW,GAAIgW,EAAOrZ,OAERqD,MAAQ,CACd,GAAMwU,GAAQ0B,EAASF,EAAOhW,GAE1BwU,KACHwB,EAASA,EAAOG,OAAO,EAAGnW,GAAKwU,EAAQwB,EAAOG,OAAOnW,EAAI,IAG1DA,IAGD,MAAOgW,GAhER,GAAME,IACLE,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KAGA5C,EAAW,eAsBjB7hB,GAAOD,QAAU4hB,G7EsjEX,SAAS3hB,EAAQD,GAEtB,c8E3nEA,WAAW,QAASkQ,GAAEH,EAAEC,GAAG5F,SAASgB,iBAAiB2E,EAAE3E,iBAAiB,SAAS4E,GAAE,GAAID,EAAE4U,YAAY,SAAS3U,GAAG,QAAS3P,GAAE0P,GAAG3F,SAAS2W,KAAKhR,IAAI3F,SAASgB,iBAAiBhB,SAASgB,iBAAiB,mBAAmB,QAAS9K,KAAI8J,SAASwa,oBAAoB,mBAAmBtkB,GAAGyP,MAAM3F,SAASua,YAAY,qBAAqB,QAASE,KAAO,eAAeza,SAASa,YAAY,YAAYb,SAASa,aAAWb,SAAS0a,YAAY,qBAAqBD,GAAG9U,OAAO,QAASgV,GAAEhV,GAAGhI,KAAKgI,EAAE3F,SAASqL,cAAc,OAAO1N,KAAKgI,EAAEiV,aAAa,cAAc,QAAQjd,KAAKgI,EAAE8G,YAAYzM,SAAS6a,eAAelV,IAAIhI,KAAKiI,EAAE5F,SAASqL,cAAc,QAAQ1N,KAAKzH,EAAE8J,SAASqL,cAAc,QAAQ1N,KAAKmd,EAAE9a,SAASqL,cAAc,QAAQ1N,KAAKiH,EAAE5E,SAASqL,cAAc,QAAQ1N,KAAKod,KAAKpd,KAAKiI,EAAE2G,MAAMyO,QAAQ,+GAA+Grd,KAAKzH,EAAEqW,MAAMyO,QAAQ,+GACx5Brd,KAAKiH,EAAE2H,MAAMyO,QAAQ,+GAA+Grd,KAAKmd,EAAEvO,MAAMyO,QAAQ,6EAA6Erd,KAAKiI,EAAE6G,YAAY9O,KAAKmd,GAAGnd,KAAKzH,EAAEuW,YAAY9O,KAAKiH,GAAGjH,KAAKgI,EAAE8G,YAAY9O,KAAKiI,GAAGjI,KAAKgI,EAAE8G,YAAY9O,KAAKzH,GAC/U,QAASqd,GAAE5N,EAAEC,GAAGD,EAAEA,EAAE4G,MAAMyO,QAAQ,qLAAqLpV,EAAE,IAAI,QAASqV,GAAEtV,GAAG,GAAIC,GAAED,EAAEA,EAAEuV,YAAYhlB,EAAE0P,EAAE,GAA+E,OAA3ED,GAAEf,EAAE2H,MAAM4O,MAAMjlB,EAAE,KAAKyP,EAAEzP,EAAEklB,WAAWllB,EAAEyP,EAAEC,EAAEwV,WAAWzV,EAAEC,EAAEyV,YAAY,IAAW1V,EAAEoV,IAAInV,IAAGD,EAAEoV,EAAEnV,GAAE,GAAO,QAAS0V,GAAE3V,EAAEC,GAAG,QAAS1P,KAAI,GAAIyP,GAAE8U,CAAEQ,GAAEtV,IAAI,OAAOA,EAAEA,EAAE4V,YAAY3V,EAAED,EAAEoV,GAAG,GAAIN,GAAE9U,CAAEG,GAAEH,EAAEC,EAAE1P,GAAG4P,EAAEH,EAAEzP,EAAEA,GAAG+kB,EAAEtV,GAAI,QAAS6V,GAAE7V,EAAEC,GAAG,GAAI1P,GAAE0P,KAAMjI,MAAKgX,OAAOhP,EAAEhI,KAAK4O,MAAMrW,EAAEqW,OAAO,SAAS5O,KAAKiX,OAAO1e,EAAE0e,QAAQ,SAASjX,KAAK8d,QAAQvlB,EAAEulB,SAAS,SAA+C,QAASC,KAAI,GAAG,OAAO3R,EAAE,CAAC,GAAIpE,GAAE3F,SAASqL,cAAc,MAAO,KAAI1F,EAAE4G,MAAMoP,KAAK,6BAA6B,MAAM/V,IAAImE,EAAE,KAAKpE,EAAE4G,MAAMoP,KAAK,MAAO5R,GAAE,QAAS6R,GAAEjW,EAAEC,GAAG,OAAOD,EAAE4G,MAAM5G,EAAEiP,OAAO8G,IAAI/V,EAAE8V,QAAQ,GAAG,QAAQ7V,GAAGiW,KAAK,KAAlQ,GAAInS,GAAE,KAAKK,EAAE,KAAKV,IAAI/S,OAAOwlB,QAC9nBN,GAAEtkB,UAAU0K,KAAK,SAAS+D,EAAEC,GAAG,GAAI1P,GAAEyH,KAAK8c,EAAE9U,GAAG,UAAUoW,EAAEnW,GAAG,IAAI0L,GAAG,GAAI0K,OAAMC,SAAU,OAAO,IAAI9b,SAAQ,SAASwF,EAAEC,GAAG,GAAGyD,EAAE,CAAC,GAAI6S,GAAE,GAAI/b,SAAQ,SAASwF,EAAEC,GAAG,QAASqF,MAAK,GAAI+Q,OAAMC,UAAU3K,GAAGyK,EAAEnW,IAAI5F,SAASmc,MAAMva,KAAKga,EAAE1lB,EAAEA,EAAEye,QAAQ8F,GAAG9a,KAAK,SAASzJ,GAAG,GAAGA,EAAEkI,OAAOuH,IAAIjP,WAAWuU,EAAE,KAAK,WAAWrF,MAAMqF,MAAMmR,EAAE,GAAIjc,SAAQ,SAASwF,EAAEzP,GAAGQ,WAAWR,EAAE6lB,IAAK5b,SAAQkc,MAAMD,EAAEF,IAAIvc,KAAK,WAAWgG,EAAEzP,IAAI,WAAW0P,EAAE1P,SAAUD,GAAE,WAAW,QAASqmB,KAAI,GAAI1W,IAAKA,MAAMhB,OAAOmW,OAAOnW,OAAOkW,OAAOC,OAC9eD,MAAGlV,EAAEhB,GAAGmW,GAAGnW,GAAGkW,GAAGC,GAAGD,KAAK,OAAOpR,IAAI9D,EAAE,sCAAsCuF,KAAK7U,OAAOimB,UAAUC,WAAW9S,IAAI9D,IAAI,IAAI6W,SAAS7W,EAAE,GAAG,KAAK,MAAM6W,SAAS7W,EAAE,GAAG,KAAK,IAAI6W,SAAS7W,EAAE,GAAG,MAAMA,EAAE8D,IAAI9E,GAAG8X,GAAG3B,GAAG2B,GAAG5B,GAAG4B,GAAG9X,GAAG+X,GAAG5B,GAAG4B,GAAG7B,GAAG6B,GAAG/X,GAAGgY,GAAG7B,GAAG6B,GAAG9B,GAAG8B,IAAIhX,GAAGA,GAAEA,IAAI,OAAOiX,EAAEtB,YAAYsB,EAAEtB,WAAWuB,YAAYD,GAAG/G,aAAanN,GAAGhD,EAAEzP,IAAI,QAAS8b,KAAI,IAAI,GAAIgK,OAAMC,UAAU3K,GAAGyK,EAAE,OAAOc,EAAEtB,YAAYsB,EAAEtB,WAAWuB,YAAYD,GAAGjX,EAAE1P,OAAO,CAAC,GAAIyP,GAAE3F,SAAS+c,QAAU,IAAKpX,GAAG,SAASA,IAAEf,EAAEqG,EAAEtF,EAAEuV,YAAYH,EAAEiC,EAAErX,EAAEuV,YACnfJ,EAAE3kB,EAAEwP,EAAEuV,YAAYoB,KAAI3T,EAAEjS,WAAWsb,EAAE,KAAK,GAAI/G,GAAE,GAAI0P,GAAEF,GAAGuC,EAAE,GAAIrC,GAAEF,GAAGtkB,EAAE,GAAIwkB,GAAEF,GAAG7V,KAAKmW,KAAKD,KAAK4B,KAAKC,KAAKC,KAAKC,EAAE7c,SAASqL,cAAc,OAAO1C,EAAE,CAAEkU,GAAEI,IAAI,MAAM1J,EAAEtI,EAAE2Q,EAAE1lB,EAAE,eAAeqd,EAAEyJ,EAAEpB,EAAE1lB,EAAE,UAAUqd,EAAEpd,EAAEylB,EAAE1lB,EAAE,cAAc2mB,EAAEpQ,YAAYxB,EAAEtF,GAAGkX,EAAEpQ,YAAYuQ,EAAErX,GAAGkX,EAAEpQ,YAAYtW,EAAEwP,GAAG3F,SAAS2W,KAAKlK,YAAYoQ,GAAGH,EAAEzR,EAAEtF,EAAEuV,YAAYyB,EAAEK,EAAErX,EAAEuV,YAAY0B,EAAEzmB,EAAEwP,EAAEuV,YAAYlJ,IAAIsJ,EAAErQ,EAAE,SAAStF,GAAGf,EAAEe,EAAE2W,MAAM/I,EAAEtI,EAAE2Q,EAAE1lB,EAAE,IAAIA,EAAEye,OAAO,iBAAiB2G,EAAE0B,EAAE,SAASrX,GAAGoV,EAAEpV,EAAE2W,MAAM/I,EAAEyJ,EAAEpB,EAAE1lB,EAAE,IAAIA,EAAEye,OAAO,YAAY2G,EAAEnlB,EAAE,SAASwP,GAAGmV,EACvfnV,EAAE2W,MAAM/I,EAAEpd,EAAEylB,EAAE1lB,EAAE,IAAIA,EAAEye,OAAO,qBAAqBre,OAAOoe,iBAAiB8G,EAAEllB,OAAOoe,iBAAiBxd,UAAUgmB,MAAM5mB,OAAOoe,iBAAiBxd,UAAU0K,KAAK4Z,EAAEtkB,UAAU0K,KAAK,mBAAqB/L,KAASA,EAAOD,QAAQU,OAAOoe,sB9E+sE1N,SAAS7e,EAAQD,GAEtB,Y+EvrEM,SAASunB,KACXC,IACH9mB,OAAO0M,MAAQoa,G/EurEhBnmB,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,IAGR3B,a+E5tEc,SAAU+I,EAAO+C,GAC/B0b,EAAWA,GAAY9mB,OAAO0M,MAExB,mBAAqB,IAAIqa,kBAAmB,WACjD,GAAMta,GAAYzM,OAAO0M,KAEzB1M,QAAO0M,MAAQ,SAAUC,EAAKC,GAC7B,GAAIA,EAAKoa,aAAc,CACtB,GAAMC,GAAS,GAAIC,KAAIva,EACvBC,GAAKua,QAAUva,EAAKua,YACpBva,EAAKua,QAAQ,YAAcF,EAAOG,OAClCza,EAAMA,EAAImS,QAAQmI,EAAOG,OAAQ,gBAElC,MAAO3a,GAAU/M,KAAK2H,KAAMsF,EAAKC,OAK/BvE,EAAMvF,IAAI,8BAA6B,WAC1C,GAAM2J,GAAYzM,OAAO0M,KACzB1M,QAAO0M,MAAQ,SAAUC,EAAKC,GAC7B,MAAOH,GAAU/M,KAAK2H,KAAMsF,EAAKC,GAA1BH,SACC,SAAUI,GAEhB,KADAzB,GAAQ0B,IAAIH,GAAOC,EAAOG,KAAKC,UAAUJ,GAAQ,IAAOC,GAClDA,S/EquEVvN,E+E9tEeunB,SAhChB,IAAIC,W/EwwEE,SAASvnB,EAAQD,EAASH,GgFxwEhCI,EAAAD,QAAAH,EAAA,KhF8wEM,SAASI,EAAQD,EAASH,GAE/B,YiFtwED,SAASkoB,KACRC,EAAO7e,OACPiB,SAASwa,oBAAoB,qBAAsBmD,GANpD,GAAME,GAASpoB,EAAQ,IACjBmoB,EAAS,GAAIC,EAUnB7d,UAASgB,iBAAiB,qBAAsB2c,GAQhD9nB,EAAOD,QAAUgoB,GjFqxEX,SAAS/nB,EAAQD,EAASH,GAE/B,YkF9yED,SAASqoB,GAAWrT,GACnB,MAAqB,kBAAPA,GAGf,QAASsT,GAAW5Z,GAInBzN,WAAW,WACV,KAAMyN,IACJ,GAMJ,QAAS0Z,KAERlgB,KAAKqgB,YAAc,KAMnBrgB,KAAKsgB,aAAc,EAEnBtgB,KAAKugB,OAAS,KACdvgB,KAAKwgB,iBAAmBxgB,KAAKygB,eAAergB,KAAKJ,MAGjDA,KAAK0gB,gBAIL1gB,KAAK2gB,0BAA2B,EAGhC3gB,KAAK4gB,aAAe,WAAa,OAAO,GACxC5gB,KAAK6gB,gBAAkB,SAAShI,GAAQ,MAAOA,IAxChD,GAAMiI,GAAShpB,EAAQ,GAmEvBooB,GAAO3mB,UAAU6H,KAAO,SAASb,EAASwgB,GACzC,GAAI/gB,KAAKsgB,YACR,MAAOtgB,KAGR,IAAMghB,GAAuBhhB,KAAKihB,wBAC5BC,IAAkBF,GAAwBzgB,EAOhD,IAAI2gB,EACH,MAAOlhB,KAGRO,GAAUA,MAENygB,IACHzgB,EAAUP,KAAKmhB,yBAAyB5gB,GAEpCA,EAAQ6gB,cACX7gB,EAAQ6gB,YAAc9lB,OACtB8kB,EAAW,GAAIiB,OAAM,mHAGlB9gB,EAAQ+gB,iBACX/gB,EAAQ+gB,eAAiBhmB,OACzB8kB,EAAW,GAAIiB,OAAM,yHAGlB9gB,EAAQghB,oBACXhhB,EAAQghB,kBAAoBjmB,OAC5B8kB,EAAW,GAAIiB,OAAM,iJAInBlB,EAAW5f,EAAQ+gB,kBACtBthB,KAAK6gB,gBAAkBtgB,EAAQ+gB,gBAG5BnB,EAAW5f,EAAQ6gB,eACtBphB,KAAK4gB,aAAergB,EAAQ6gB,aAGzB5P,MAAMc,QAAQ/R,EAAQ4E,cAAgB5E,EAAQ4E,YAAY1E,OAAS,IACtET,KAAK0gB,aAAe1gB,KAAK0gB,aAAa9P,OAAOrQ,EAAQ4E,aAMtD,IAAMqc,GAAuClmB,SAApBiF,EAAQsE,SAAgCtE,EAAQsE,WAAY,EAE/EG,EAAWwc,EAAmBV,EAAOW,IAAMlhB,EAAQyE,SACnD0c,EAAmB,EAGzB,IAFA1hB,KAAKugB,OAAS,GAAIO,GAAOY,EAAkB1c,GAEvCwc,EAIH,MAHAxhB,MAAK2hB,OAAS,SAASnb,GAAS,MAAOA,IACvCxG,KAAK4hB,gBAAkB,SAAS9U,GAAM,MAAOA,IAC7C9M,KAAKsgB,aAAc,EACZtgB,IAGR,KAAKO,EAAQuE,eACZ,KAAM,IAAIuc,OAAM;AAkBjB,MAdIP,GAAOe,MAAM7c,KAAc8b,EAAOe,MAAMC,YAC3C9hB,KAAK+hB,0BAA0BxhB,EAASwgB,GAExC/gB,KAAKqgB,aACJ2B,iBAAkB,aAClBC,UAAW,cAIb5f,SAASgB,iBAAiB,cAAerD,KAAKwgB,kBAE9CxgB,KAAKsgB,aAAc,EAEnBtgB,KAAKkiB,uBACEliB,MAGRkgB,EAAO3mB,UAAUwoB,0BAA4B,SAASxhB,EAASwgB,GAMxDA,GAAS/gB,KAAKqgB,cACnBU,EAAQjpB,EAAQ,KAGjBkI,KAAKqgB,YAAcU,CAEnB,IAAMjc,GAAiBvE,EAAQuE,eACzBqd,EAA0BniB,KAAKoiB,yBAAyBhiB,KAAKJ,MAE7DqiB,GACLC,aAAcH,EAGX5hB,GAAQwE,cACXsd,EAAaE,QAAUhiB,EAAQwE,aAG5BxE,EAAQ0E,OACXod,EAAapd,KAAO1E,EAAQ0E,MAGzBkb,EAAW5f,EAAQghB,qBACtBc,EAAaG,UAAYjiB,EAAQghB,mBAGlCvhB,KAAKqgB,YAAY3f,OAAOoE,EAAgBud,GACxCriB,KAAKqgB,YAAYoC,WASlBvC,EAAO3mB,UAAU2oB,qBAAuB,WACvC,GAAKliB,KAAKsgB,YAAV,CAIA,GAAML,GAASjgB,IACfA,MAAK0gB,aAAagC,QAAQ,SAASC,GAClC1C,EAAO0B,OAAOgB,EAAcnc,MAAOmc,EAAcC,WAIlD5iB,KAAK0gB,kBAuBNR,EAAO3mB,UAAUooB,OAAS,SAASnb,EAAOoc,GACzC,GAAMC,GAAWD,MACbE,GACHtc,MAAOA,EACPoc,SAICG,MAAOF,GAIT,KAAK7iB,KAAKsgB,YAET,MADAtgB,MAAK0gB,aAAajf,KAAKqhB,GAChBtc,CAGR,IAAMwc,GAAmBhjB,KAAK6gB,gBAAgBiC,EAa9C,OARIE,IAAoBA,EAAiBxc,QACxCsc,EAAeE,GAGXF,EAAaF,UACjBE,EAAaF,YAGT5iB,KAAK4gB,aAAakC,IAOnBA,EAAatc,MAAMyc,UACtBH,EAAaF,QAAQM,aAAeJ,EAAatc,MAAMyc,SAGxDjjB,KAAKqgB,YAAY2B,iBAAiBc,EAAatc,MAAOsc,EAAaF,SAC5Dpc,GAXCA,GA0BT0Z,EAAO3mB,UAAUiN,MAAQ,WACxBxG,KAAKugB,OAAO/Z,MAAM6F,MAAMrM,KAAKugB,OAAQ/f,YAYtC0f,EAAO3mB,UAAU4pB,KAAO,WACvBnjB,KAAKugB,OAAO4C,KAAK9W,MAAMrM,KAAKugB,OAAQ/f,YAWrC0f,EAAO3mB,UAAUkM,IAAM,WACtBzF,KAAKugB,OAAO9a,IAAI4G,MAAMrM,KAAKugB,OAAQ/f,YAoBpC0f,EAAO3mB,UAAUsa,KAAO,SAAS/G,GAChC,MAAO9M,MAAK4hB,mBAAoB9U,IAmBjCoT,EAAO3mB,UAAUqoB,gBAAkB,SAASgB,EAAS9V,GACpD,GAAMmT,GAASjgB,IACf,OAAO,YACN,IACC,MAAO8M,GAAGT,MAAM/Q,OAAWkF,WAC1B,MAAM8M,GAEP,KADA2S,GAAO0B,OAAOrU,EAAGsV,GACXtV,KAcT4S,EAAO3mB,UAAU6pB,QAAU,WACrBpjB,KAAKsgB,cACVje,SAASwa,oBAAoB,cAAe7c,KAAKwgB,kBACjDxgB,KAAKqgB,YAAY4B,cAGlB/B,EAAO3mB,UAAUknB,eAAiB,SAAS4C,GAE1C,GAAKA,EAAL,CAKA,GAAMT,IACLU,KAAMD,EAAGlK,OAAOmK,SAChBP,OACCQ,cAAevjB,KAAKwjB,cAAcH,GAAII,YAAY,SAASC,EAASxT,GACnE,GAAM7J,GAAYmL,MAAMjY,UAAU+O,MAAMjQ,KAAK6X,EAAG7J,cAEhD,KAAK6J,EAAGyT,SACP,MAAOD,GAAU,MAAQxT,EAAGlJ,YAAYzC,KAAO,IAGhD,IAAMof,GAAWzT,EAAGyT,SAASC,aAE7B,OAA8B,KAA1BD,EAASE,QAAQ,KACbH,EAAU,IAAMC,EAAW,MAG5BD,EAAU,IAAMxT,EAAGyT,SAASC,cAAgB,WAAavd,EAAU6X,KAAK,KAAO,UAAYhO,EAAG/X,IAAM,IAAM,QAC/G,KAGL6H,MAAK2hB,OAAO0B,EAAGlK,OAAO3S,MAAOoc,KAW9B1C,EAAO3mB,UAAUiqB,cAAgB,SAASvK,GAOzC,IANA,GAAM6K,MAIFC,EAAU9K,EAAM9M,QAAUxT,OAAOsgB,MAAM+K,WAEpCD,GACND,EAAKriB,KAAKsiB,GACVA,EAAUA,EAAQE,aAGnB,OAAOH,IAUR5D,EAAO3mB,UAAU6oB,yBAA2B,SAASvJ,GAIpD,MAHI7Y,MAAKugB,OAAO1b,UACfgU,EAAKkK,MAAM,eAAiB/iB,KAAKugB,OAAO2D,YAElCrL,GASRqH,EAAO3mB,UAAU0nB,sBAAwB,WACxC,QAASjhB,KAAKmkB,yBASfjE,EAAO3mB,UAAU4qB,sBAAwB,WACxC,IAAKnkB,KAAK2gB,yBAA0B,CACnC,GAAMjgB,GAAS2B,SAASwD,cAAc,+BACtC,KAAInF,EAGH,OAAO,CAFPV,MAAK2gB,yBAA2BjgB,EAAO0jB,aAAe1jB,EAAO2jB,WAAa3jB,EAAO4jB,UAMnF,MAAOtkB,MAAK2gB,0BAabT,EAAO3mB,UAAU4nB,yBAA2B,SAAS5gB,GAEpD,IAAKP,KAAKihB,wBACT,OAAO,CAGR,IAAIsD,SAEJ,KACCA,EAAqB7e,KAAK8e,MAAMxkB,KAAKmkB,yBACpC,MAAM7W,GACP,KAAM,IAAI+T,OAAM,kFAAoF/T,EAAE2V,QAAU,KAGjH,IAAK,GAAMwB,KAAYF,GAClBA,EAAmB/qB,eAAeirB,KACrClkB,EAAQkkB,GAAYlkB,EAAQkkB,IAAaF,EAAmBE,GAM9D,OADAzkB,MAAK2gB,0BAA2B,EACzBpgB,GAGRrI,EAAOD,QAAUioB,GlF+zEX,SAAShoB,EAAQD,GAEtB,YmFvzFD,SAAS6oB,GAAO4D,EAAS1f,GACxBhF,KAAK2kB,WAAa,GAAInT,OAAMkT,GAC5B1kB,KAAK4kB,cAAgB,EAGrB5kB,KAAK6kB,UAAY/D,EAAOe,MAAM7c,GAE9BhF,KAAK6E,QAAU7E,KAAK6kB,YAAc/D,EAAOe,MAAMJ,IAC1CzhB,KAAK6E,UACT7E,KAAK8kB,YAAcC,EAGpB,IAAMxZ,GAAM,mBAAuB3H,SAAUA,SAAY6B,IAAKsf,EAAM5B,KAAM4B,EAAMve,MAAOue,EACvF/kB,MAAKuL,IAAMA,EA6BZ,QAASyZ,GAAgBC,EAAS3P,GAOjC,IAAI,GANAwE,GAASmL,EAAU,IAMfxd,EAAQ,EAAGA,EAAQ6N,EAAK7U,OAAQgH,IACvCqS,GAAU,IAAMxE,EAAK7N,EAGtB,OAAOqS,GAyER,QAASiL,MA9GTjE,EAAOvnB,UAAUiN,MAAQ,WACxBxG,KAAK8kB,YAAY,QAAS9kB,KAAKuL,IAAI/E,MAAOhG,YAG3CsgB,EAAOvnB,UAAUkM,IAAM,WACtBzF,KAAK8kB,YAAY,MAAO9kB,KAAKuL,IAAI9F,IAAKjF,YAGvCsgB,EAAOvnB,UAAU4pB,KAAO,WACvBnjB,KAAK8kB,YAAY,OAAQ9kB,KAAKuL,IAAI4X,KAAM3iB,YAGzCsgB,EAAOvnB,UAAUurB,YAAc,SAASvgB,EAAM2gB,EAAe5P,GAC5D,GAAM6P,GAAQnlB,KAAK6kB,YAAc/D,EAAOe,MAAMsD,OAASnlB,KAAK6kB,YAAc/D,EAAOe,MAAMC,YAKjFmB,EAAU+B,EAAgBzgB,EAAM+Q,EACtCtV,MAAKolB,OAAOnC,GAERkC,GAASD,GACZA,EAAc7Y,MAAMrM,KAAKuL,IAAK+J,IAkBhCwL,EAAOvnB,UAAU6rB,OAAS,SAASC,GAClCrlB,KAAK2kB,WAAW3kB,KAAK4kB,eAAiBS,EAItCrlB,KAAK4kB,gBACD5kB,KAAK4kB,gBAAkB5kB,KAAK2kB,WAAWlkB,SAC1CT,KAAK4kB,cAAgB,IAYvB9D,EAAOvnB,UAAU2qB,SAAW,WAC3B,GAAIzc,GAAQzH,KAAK4kB,cACXU,EAAetlB,KAAK4kB,cACpBW,IAEN,GAAG,CACF,GAAMC,GAAWxlB,KAAK2kB,WAAWld,EAEhBnM,UAAbkqB,GACHD,EAAa9jB,KAAKzB,KAAK2kB,WAAWld,IAGnCA,IAEIA,GAASzH,KAAK2kB,WAAWlkB,SAC5BgH,EAAQ,SAEDA,IAAU6d,EAEnB,OAAOC,GAAarH,KAAK,OAQ1B4C,EAAOe,OAINJ,IAAa,EAMbgE,YAAa,EAMbN,MAAa,EAKbrD,YAAa,GAKd5pB,EAAOD,QAAU6oB,GnFs0FX,SAAS5oB,EAAQD,EAASH,GoF/8FhCI,EAAAD,QAAAH,EAAA,KpFq9FM,SAASI,EAAQD,EAASH,GAQ/B,QAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GANvF,GAAIwsB,GAA8BC,EAE9BpiB,EAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,IqFh9FtC,SAAU5K,EAAQ2C,GACnB,YAoBA,SAASsqB,KACL,MAAwB,mBAAbvjB,UACA,GAEJA,SAASwjB,SAASC,KAw8C7B,QAASC,GAAaC,EAAWzlB,GAE7B,GAAI0lB,GAAK5sB,CAET,IAAK6sB,EAAL,CAGA3lB,EAAUA,MAEVylB,EAAY,QAAUA,EAAU/L,OAAO,EAAE,GAAGkM,cAAgBH,EAAU/L,OAAO,GAEzE5X,SAAS+jB,aACTH,EAAM5jB,SAAS+jB,YAAY,cAC3BH,EAAII,UAAUL,GAAW,GAAM,KAE/BC,EAAM5jB,SAASikB,oBACfL,EAAID,UAAYA,EAGpB,KAAK3sB,IAAOkH,GAAagmB,EAAOhmB,EAASlH,KACrC4sB,EAAI5sB,GAAOkH,EAAQlH,GAGvB,IAAIgJ,SAAS+jB,YAET/jB,SAASc,cAAc8iB,OAIvB,KACI5jB,SAASmkB,UAAU,KAAOP,EAAID,UAAUpC,cAAeqC,GACzD,MAAM3Y,MAOhB,QAASmZ,GAAiBxD,GACtBjjB,KAAKuE,KAAO,mBACZvE,KAAKijB,QAAUA,EAMnB,QAASyD,GAASC,GACd,GAAIruB,GAAIsuB,GAAWpZ,KAAKmZ,GACpBE,KACA/iB,EAAI,CAER,KACI,KAAOA,KAAK+iB,EAAIC,GAAQhjB,IAAMxL,EAAEwL,IAAM,GACxC,MAAMwJ,GACJ,KAAM,IAAImZ,GAAiB,gBAAkBE,GAGjD,GAAIE,EAAIE,KACJ,KAAM,IAAIN,GAAiB,8CAE/B,OAAOI,GAGX,QAASG,GAAYC,GACjB,MAAgB,UAATA,EAGX,QAAS9G,GAAW8G,GAChB,MAAuB,kBAATA,GAGlB,QAASC,GAASD,GACd,MAA+C,oBAAxCE,EAAgBvZ,SAASvV,KAAK4uB,GAGzC,QAAS1Z,GAAS0Z,GACd,MAAuB,YAAhB,mBAAOA,GAAP,eAAAzjB,cAAOyjB,KAA8B,OAATA,EAGvC,QAASG,GAAcH,GACnB,IAAK,GAAInK,KAAKmK,GAAM,OAAO,CAC3B,QAAO,EAKX,QAASI,GAAQJ,GACb,MAAO1Z,GAAS0Z,IAC4B,mBAAxCE,EAAgBvZ,SAASvV,KAAK4uB,IAC9BA,YAAgB5F,OAUxB,QAASkF,GAAOtZ,EAAQ5T,GACpB,MAAO8tB,GAAgB3tB,eAAenB,KAAK4U,EAAQ5T,GAGvD,QAASiuB,GAAKpuB,EAAK6M,GACf,GAAIjC,GAAGyjB,CAEP,IAAIP,EAAY9tB,EAAIuH,QAChB,IAAKqD,IAAK5K,GACFqtB,EAAOrtB,EAAK4K,IACZiC,EAAS1N,KAAK,KAAMyL,EAAG5K,EAAI4K,QAKnC,IADAyjB,EAAIruB,EAAIuH,OAEJ,IAAKqD,EAAI,EAAGA,EAAIyjB,EAAGzjB,IACfiC,EAAS1N,KAAK,KAAMyL,EAAG5K,EAAI4K,IAM3C,QAAS0jB,GAAgBC,EAAWlnB,GAChC,GAAImnB,KAEAD,GAAUlhB,OAASkhB,EAAUlhB,MAAM9F,QACnC6mB,EAAKG,EAAUlhB,MAAO,SAASzC,EAAGyC,GAC9B,GAAIohB,GAAQC,EAAerhB,EACvBohB,IACAD,EAAOjmB,KAAKkmB,KAKxB5B,EAAa,UACT0B,UAAWA,EACXlnB,QAASA,IAGbsnB,EACIJ,EAAUljB,KACVkjB,EAAUxE,QACVwE,EAAUniB,IACVmiB,EAAUK,OACVJ,EACAnnB,GAIR,QAASqnB,GAAeD,GACpB,GAAKA,EAAMriB,IAAX,CAGA,GAK6CxB,GALzCikB,GACAC,SAAYL,EAAMriB,IAClBwiB,OAAYH,EAAMM,KAClBC,MAAYP,EAAMQ,OAClBC,WAAYT,EAAM5P,MAAQ,KAC3B6K,EAAUyF,EAAwBV,EAErC,IAAI/E,EAAS,CACT,GAAIrZ,IAAQ,cAAe,eAAgB,eAE3C,KADAzF,EAAI,EACGA,KAAKikB,EAAWxe,EAAKzF,IAAM8e,EAAQ9e,GAY9C,MATAikB,GAAWO,SAEJC,EAAcC,aAAapmB,OAASmmB,EAAcC,aAAapmB,KAAK2lB,EAAWC,WAElF,qBAAqB5lB,KAAK2lB,EAAW,cAErC,qBAAqB3lB,KAAK2lB,EAAWC,WAGlCD,GAGX,QAASM,GAAwBV,GAE7B,GAAKA,EAAM/E,SAAY2F,EAAcE,aAArC,CAMA,IAJA,GAAI7F,GAAU+E,EAAM/E,QAChB8F,KAAW9F,EAAQniB,OAAS,GAC5BqD,EAAI8e,EAAQniB,OAAQkoB,GAAa,EAE9B7kB,KAKH,GAAI8e,EAAQ9e,GAAGrD,OAAS,IAAK,CACzBkoB,GAAa,CACb,OAIR,GAAIA,EAAY,CAEZ,GAAI3B,EAAYW,EAAMQ,QAAS,MAI/B,WAEIvF,EAAQ8F,GAAOzO,OAAO0N,EAAMQ,OAAQ,QAK5C,OACIvF,EAAQta,MAAM,EAAGogB,GACjB9F,EAAQ8F,GACR9F,EAAQta,MAAMogB,EAAQ,KAI9B,QAASb,GAAiBlmB,EAAMshB,EAAS2F,EAASd,EAAQJ,EAAQnnB,GAC9D,GAAIsoB,GAAeC,CAEbP,GAAcQ,aAAa3mB,MAAQmmB,EAAcQ,aAAa3mB,KAAK6gB,KAEzEA,GAAW,GACX6F,EAAcnnB,EAAO,KAAOshB,EAExByE,GAAUA,EAAOjnB,QACjBmoB,EAAUlB,EAAO,GAAGM,UAAYY,EAGhClB,EAAOsB,UACPH,GAAcnB,OAAQA,IACfkB,IACPC,GACInB,SACIM,SAAUY,EACVd,OAAQA,EACRQ,QAAQ,MAKdC,EAAcU,WAAW7mB,MAAQmmB,EAAcU,WAAW7mB,KAAKwmB,IAC/DL,EAAcW,cAAc9mB,OAASmmB,EAAcW,cAAc9mB,KAAKwmB,IAG5EO,EACIC,GAEIC,WACIve,SACInJ,KAAMA,EACN/H,MAAOqpB,EACP4F,WAAYA,KAGpBS,QAASV,EACT3F,QAAS6F,GACVvoB,KAIX,QAAS6oB,GAAYG,EAAMC,GACvB,MAAKA,IAGLlC,EAAKkC,EAAM,SAASnwB,EAAKO,GACrB2vB,EAAKlwB,GAAOO,IAET2vB,GALIA,EAQf,QAASE,GAAS9C,EAAKtW,GACnB,MAAOsW,GAAIlmB,QAAU4P,EAAMsW,EAAMA,EAAI1M,OAAO,EAAG5J,GAAO,IAG1D,QAASqZ,GAAW7Q,GAGhB,GAAIxI,GAAMkY,EAAcoB,gBAExB,IADA9Q,EAAKoK,QAAUwG,EAAS5Q,EAAKoK,QAAS5S,GAClCwI,EAAKwQ,UAAW,CAChB,GAAIA,GAAYxQ,EAAKwQ,UAAUve,OAAO,EACtCue,GAAUzvB,MAAQ6vB,EAASJ,EAAUzvB,MAAOyW,GAGhD,MAAOwI,GAGX,QAAS+Q,KACL,OAAQ,GAAIvL,MAGhB,QAASwL,KACL,GAAK3D,GAAgB7jB,SAASwjB,UAAaxjB,SAASwjB,SAASC,KAA7D,CAIA,GAAIgE,IACAhK,SACIiK,aAAcnL,UAAUC,WAUhC,OANAiL,GAASxkB,IAAMjD,SAASwjB,SAASC,KAE7BzjB,SAAS2nB,WACTF,EAAShK,QAAQmK,QAAU5nB,SAAS2nB,UAGjCF,GAGX,QAASX,GAAKtQ,GACV,GAAIqR,IACAC,QAASC,EACT7J,OAAQgI,EAAchI,OACtB8J,SAAU,cACXP,EAAWD,GAEVC,KACAI,EAASI,QAAUR,GAGvBjR,EAAOuQ,EAAYc,EAAUrR,GAG7BA,EAAK5T,KAAOmkB,EAAYA,KAAgBmB,EAActlB,MAAO4T,EAAK5T,MAClE4T,EAAKkK,MAAQqG,EAAYA,KAAgBmB,EAAcxH,OAAQlK,EAAKkK,OAGpElK,EAAKkK,MAAM,oBAAsB6G,IAAQY,GAGrCpD,EAAcvO,EAAK5T,aAAc4T,GAAK5T,KAEtCslB,EAAcE,OAEd5R,EAAK4R,KAAOF,EAAcE,MAI1BlC,EAAchG,UAAS1J,EAAK0J,QAAUgG,EAAchG,SAEpDgG,EAAcmC,aAAY7R,EAAK8R,YAAcpC,EAAcmC,YAE3DvK,EAAWoI,EAAcjG,gBACzBzJ,EAAO0P,EAAcjG,aAAazJ,IAASA,GAI1CA,IAAQuO,EAAcvO,KAKvBsH,EAAWoI,EAAcqC,sBAAwBrC,EAAcqC,mBAAmB/R,KAOtFgS,EAAchS,EAAKiS,WAAajS,EAAKiS,SAAWC,KAGhDlS,EAAO6Q,EAAW7Q,GAElBmS,EAAS,QAAS,uBAAwBnS,GAErCoS,MAEJ1C,EAAc/F,WAAa0I,IACxB5lB,IAAK6lB,EACLC,MACIC,eAAgB,IAChBC,cAAe,YAAcC,GAAMC,QACnCC,WAAYC,GAEhB7S,KAAMA,EACNtY,QAASgoB,EACToD,UAAW,WACP5F,EAAa,WACTlN,KAAMA,EACNnS,IAAKykB,KAGbS,QAAS,WACL7F,EAAa,WACTlN,KAAMA,EACNnS,IAAKykB,SAMrB,QAASD,GAAY3lB,GAEjBA,EAAK6lB,KAAKS,YAAcnmB,KAAKC,UAAUJ,EAAKsT,KAE5C,IAAIiT,GAAMC,IACNrlB,EAAMnB,EAAKD,IAAM,IAAM0mB,EAAUzmB,EAAK6lB,MACtCa,EAAc1mB,EAAKhF,QAAQ0rB,aAE3BA,GAA+B,KAAhBA,KACfH,EAAIG,YAAcA,GAEtBH,EAAII,OAAS3mB,EAAKomB,UAClBG,EAAIK,QAAUL,EAAIM,QAAU7mB,EAAKqmB,QACjCE,EAAIplB,IAAMA,EAMd,QAASqlB,KACL,MAAO1pB,UAASqL,cAAc,OAKlC,QAASud,KACL,QAAKoB,MACAlB,IACImB,IACHtB,EAAS,QAAS,yCACpBsB,IAA0B,GACnB,IAKf,QAASC,GAAWC,GAOhB,IAJA,GAEIC,GAFAC,KACA5oB,EAAI,EAAG6oB,EAAMH,EAAS/rB,OAGnBqD,EAAI6oB,EAAK7oB,IACZ2oB,EAAUD,EAAS1oB,GACfojB,EAASuF,GAGTC,EAAQjrB,KAAKgrB,EAAQhV,QAAQ,8BAA+B,SACrDgV,GAAWA,EAAQphB,QAE1BqhB,EAAQjrB,KAAKgrB,EAAQphB,OAI7B,OAAO,IAAIoL,QAAOiW,EAAQxO,KAAK,KAAM,KAGzC,QAAS6M,KACL,GAAI6B,GAASj0B,EAAOi0B,QAAUj0B,EAAOk0B,QAErC,KAAK7F,EAAY4F,IAAWA,EAAOE,gBAAiB,CAEhD,GAAIC,GAAM,GAAIC,aAAY,EAC1BJ,GAAOE,gBAAgBC,GAGvBA,EAAI,GAAc,KAATA,EAAI,GAAa,MAE1BA,EAAI,GAAc,MAATA,EAAI,GAAc,KAE3B,IAAIE,GAAM,SAASC,GAEf,IADA,GAAIlQ,GAAIkQ,EAAItf,SAAS,IACdoP,EAAEvc,OAAS,GACduc,EAAI,IAAMA,CAEd,OAAOA,GAGX,OAAQiQ,GAAIF,EAAI,IAAME,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAAME,EAAIF,EAAI,IACxEE,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAAME,EAAIF,EAAI,IAGpC,MAAO,mCAAmCtV,QAAQ,QAAS,SAASlf,GAChE,GAAIwmB,GAAkB,GAAdvW,KAAKmI,SAAY,EACrBqM,EAAS,KAALzkB,EAAWwmB,EAAO,EAAFA,EAAM,CAC9B,OAAO/B,GAAEpP,SAAS,MAK9B,QAASod,GAASnJ,GACVsL,GAAuBtL,IAAU0J,GAAMpG,OAGvCgI,GAAuBtL,GAAOxV,MAAM+gB,EAAiBC,EAAOh1B,KAAKmI,UAAW,IAIpF,QAAS8sB,KAEL,GAAIC,GAAc50B,EAAO40B,WACrBA,IACAhC,GAAM7qB,OAAO6sB,EAAY1G,IAAK0G,EAAY7sB,QAAQ+hB,UAI1D,QAASuJ,GAAUwB,GACf,GAAIC,KAIJ,OAHAnG,GAAKkG,EAAG,SAASn0B,EAAKO,GAClB6zB,EAAMhsB,KAAKisB,mBAAmBr0B,GAAO,IAAMq0B,mBAAmB9zB,MAE3D6zB,EAAMvP,KAAK,KAGtB,QAASyP,GAAat0B,EAAKupB,GACnBoE,EAAYpE,SACL2H,GAAclxB,GAErBkxB,EAAclxB,GAAO+vB,EAAYmB,EAAclxB,OAAYupB,GA39DnE,GAAIgL,IACAC,gBAAgB,EAChBC,qBAAqB,EAErBC,eAAgB,EAChB5I,OAAO,GAIPkI,KAAY/kB,MACZ0lB,EAAmB,GAiDvBJ,GAASjM,OAAU,WAUf,QAASsM,GAAUC,GACfC,IACAC,EAAS3sB,KAAKysB,GAOlB,QAASG,GAAYH,GACjB,IAAK,GAAIpqB,GAAIsqB,EAAS3tB,OAAS,EAAGqD,GAAK,IAAKA,EACpCsqB,EAAStqB,KAAOoqB,GAChBE,EAASE,OAAOxqB,EAAG,GAQ/B,QAASyqB,KACLC,IACAJ,KAOJ,QAASK,GAAeloB,EAAOmoB,GAC3B,GAAIrF,GAAY,IAChB,KAAIqF,GAAkBd,EAASE,oBAA/B,CAGA,IAAK,GAAIhqB,KAAKsqB,GACV,GAAI7H,EAAO6H,EAAUtqB,GACjB,IACIsqB,EAAStqB,GAAGuI,MAAM,MAAO9F,GAAOqK,OAAOyc,EAAOh1B,KAAKmI,UAAW,KAChE,MAAOmuB,GACLtF,EAAYsF,EAKxB,GAAItF,EACA,KAAMA,IAiBd,QAASuF,GAAsB3L,EAAS3d,EAAKupB,EAAQC,EAAOC,GACxD,GAAIxoB,GAAQ,IAEZ,IAAIyoB,EACApB,EAASqB,kBAAkBC,oCAAoCF,EAAoB1pB,EAAKupB,EAAQ5L,GAChGkM,QACG,IAAIJ,EAIPxoB,EAAQqnB,EAASqB,kBAAkBF,GACnCN,EAAeloB,GAAO,OACnB,CACH,GAAIsf,IACAvgB,IAAOA,EACP2iB,KAAQ4G,EACR1G,OAAU2G,EAEdjJ,GAAS9N,KAAO6V,EAASqB,kBAAkBG,kBAAkBvJ,EAASvgB,IAAKugB,EAASoC,MACpFpC,EAASjD,QAAUgL,EAASqB,kBAAkBI,cAAcxJ,EAASvgB,IAAKugB,EAASoC,MACnF1hB,GACI0c,QAAWA,EACX3d,IAAOsgB,IACPrf,OAAUsf,IAEd4I,EAAeloB,GAAO,GAG1B,QAAI+oB,GACOA,EAAmBjjB,MAAMrM,KAAMQ,WAM9C,QAAS2tB,KAEDoB,IAGJD,EAAqB32B,EAAOwzB,QAC5BxzB,EAAOwzB,QAAUyC,EACjBW,GAA2B,GAG/B,QAASf,KAEAe,IAGL52B,EAAOwzB,QAAUmD,EACjBC,GAA2B,EAC3BD,EAAqBh0B,GAGzB,QAAS6zB,KACL,GAAIK,GAAsBR,EACtBS,EAAYC,CAChBA,GAAW,KACXV,EAAqB,KACrBW,EAAgB,KAChBlB,EAAepiB,MAAM,MAAOmjB,GAAqB,GAAO5e,OAAO6e,IAUnE,QAAS9N,GAAOoN,EAAIa,GAChB,GAAIta,GAAO+X,EAAOh1B,KAAKmI,UAAW,EAClC,IAAIwuB,EAAoB,CACpB,GAAIW,IAAkBZ,EAClB,MAEFI,KAIN,GAAI5oB,GAAQqnB,EAASqB,kBAAkBF,EAevC,IAdAC,EAAqBzoB,EACrBopB,EAAgBZ,EAChBW,EAAWpa,EAMX3c,EAAOI,WAAW,WACV42B,IAAkBZ,GAClBI,KAEJ5oB,EAAMspB,WAAa,IAAO,GAE1BD,KAAY,EACZ,KAAMb,GAxKd,GA0DIO,GAAoBC,EA1DpBnB,KACAsB,EAAW,KACXC,EAAgB,KAChBX,EAAqB,IA4KzB,OAHArN,GAAOsM,UAAYA,EACnBtM,EAAO0M,YAAcA,EACrB1M,EAAOM,UAAYsM,EACZ5M,KAuDXiM,EAASqB,kBAAqB,WAS1B,QAASa,GAAWxqB,GAChB,IAAKsoB,EAASC,eACV,MAAO,EAEX,KACI,GAAIkC,GAAS,WACT,IACI,MAAO,IAAIp3B,GAAO+mB,eACpB,MAAOpS,GAEL,MAAO,IAAI3U,GAAOq3B,cAAc,uBAIpC1F,EAAUyF,GAGd,OAFAzF,GAAQtb,KAAK,MAAO1J,GAAK,GACzBglB,EAAQnB,KAAK,IACNmB,EAAQ2F,aACjB,MAAO3iB,GACL,MAAO,IASf,QAAS4iB,GAAU5qB,GACf,IAAK4hB,EAAS5hB,GAAM,QACpB,KAAKihB,EAAO4J,EAAa7qB,GAAM,CAG3B,GAAI+F,GAAS,GACT+kB,EAAS,EACb,KAAMA,EAAS/tB,SAAS+tB,OAAU,MAAO9iB,IACrChI,EAAIue,QAAQuM,UACZ/kB,EAASykB,EAAWxqB,IAExB6qB,EAAY7qB,GAAO+F,EAASA,EAAOwE,MAAM,SAG7C,MAAOsgB,GAAY7qB,GAWvB,QAAS8pB,GAAkB9pB,EAAKupB,GAC5B,GAKIv2B,GALA+3B,EAAqB,8BACrBC,EAAkB,mEAClBrI,EAAO,GACPsI,EAAW,GACXllB,EAAS6kB,EAAU5qB,EAGvB,KAAK+F,EAAO5K,OACR,MAAOutB,EAKX,KAAK,GAAIlqB,GAAI,EAAGA,EAAIysB,IAAYzsB,EAG5B,GAFAmkB,EAAO5c,EAAOwjB,EAAS/qB,GAAKmkB,GAEvBjB,EAAYiB,GAAO,CACpB,GAAK3vB,EAAIg4B,EAAgB9iB,KAAKya,GAC1B,MAAO3vB,GAAE,EACN,IAAKA,EAAI+3B,EAAmB7iB,KAAKya,GACpC,MAAO3vB,GAAE,GAKrB,MAAO01B,GAUX,QAASqB,GAAc/pB,EAAK2iB,GACxB,GAAI5c,GAAS6kB,EAAU5qB,EAEvB,KAAK+F,EAAO5K,OACR,MAAO,KAGX,IAAImiB,MAIA4N,EAAchoB,KAAKC,MAAMmlB,EAASG,eAAiB,GAEnD0C,EAAaD,EAAe5C,EAASG,eAAiB,EACtD2C,EAAQloB,KAAK6H,IAAI,EAAG4X,EAAOuI,EAAc,GACzCG,EAAMnoB,KAAK4H,IAAI/E,EAAO5K,OAAQwnB,EAAOwI,EAAa,EAEtDxI,IAAQ,CAER,KAAK,GAAInkB,GAAI4sB,EAAO5sB,EAAI6sB,IAAO7sB,EACtBkjB,EAAY3b,EAAOvH,KACpB8e,EAAQnhB,KAAK4J,EAAOvH,GAI5B,OAAO8e,GAAQniB,OAAS,EAAImiB,EAAU,KAS1C,QAASgO,GAAaC,GAClB,MAAOA,GAAKpZ,QAAQ,4BAA6B,QAUrD,QAASqZ,GAAwC9X,GAC7C,MAAO4X,GAAa5X,GAAMvB,QAAQ,IAAK,cAAcA,QAAQ,IAAK,cAAcA,QAAQ,IAAK,eAAeA,QAAQ,IAAK,gBAAgBA,QAAQ,OAAQ,QAU7J,QAASsZ,GAAiBC,EAAIC,GAE1B,IAAK,GADD5lB,GAAQ/S,EACHwL,EAAI,EAAGyjB,EAAI0J,EAAKxwB,OAAQqD,EAAIyjB,IAAKzjB,EAEtC,IAAKuH,EAAS6kB,EAAUe,EAAKntB,KAAKrD,SAC9B4K,EAASA,EAAO6S,KAAK,MAChB5lB,EAAI04B,EAAGxjB,KAAKnC,IAGb,OACI/F,IAAO2rB,EAAKntB,GACZmkB,KAAQ5c,EAAO6lB,UAAU,EAAG54B,EAAEmP,OAAOoI,MAAM,MAAMpP,OACjD0nB,OAAU7vB,EAAEmP,MAAQ4D,EAAO8lB,YAAY,KAAM74B,EAAEmP,OAAS,EAQxE,OAAO,MAWX,QAAS2pB,GAAiBC,EAAU/rB,EAAK2iB,GACrC,GAEI3vB,GAFA+S,EAAS6kB,EAAU5qB,GACnB0rB,EAAK,GAAIva,QAAO,MAAQma,EAAaS,GAAY,MAKrD,OAFApJ,IAAQ,EAEJ5c,GAAUA,EAAO5K,OAASwnB,IAAS3vB,EAAI04B,EAAGxjB,KAAKnC,EAAO4c,KAC/C3vB,EAAEmP,MAGN,KAUX,QAAS6pB,GAAyBvZ,GAC9B,GAAwB,mBAAb1V,UAAX,CAaA,IAAK,GARD2W,GAIAgY,EACAO,EACArrB,EARA+qB,GAAQt4B,EAAOktB,SAASC,MACxB0L,EAAUnvB,SAASovB,qBAAqB,UAExCC,EAAO,GAAK3Z,EACZ4Z,EAAS,2EACTC,EAAU,iEAKL9tB,EAAI,EAAGA,EAAI0tB,EAAQ/wB,SAAUqD,EAAG,CACrC,GAAI0U,GAASgZ,EAAQ1tB,EACjB0U,GAAO9R,KACPuqB,EAAKxvB,KAAK+W,EAAO9R,KAIzB,GAAM6qB,EAAQI,EAAOnkB,KAAKkkB,GAMrB,CACD,GAAIntB,GAAOgtB,EAAM,GAAK,OAASA,EAAM,GAAK,GACtCjc,EAAOic,EAAM,GAAG1hB,MAAM,KAAKqO,KAAK,YAEpClF,GAAO4X,EAAaW,EAAM,IAAI9Z,QAAQ,KAAM,MAC5CuZ,EAAK,GAAIva,QAAO,WAAalS,EAAO,cAAgB+Q,EAAO,mBAAqB0D,EAAO,aAVvFgY,GAAK,GAAIva,QAAOma,EAAac,GAAMja,QAAQ,OAAQ,QAcvD,IAAKvR,EAAS6qB,EAAiBC,EAAIC,GAC/B,MAAO/qB,EAIX,IAAKqrB,EAAQK,EAAQpkB,KAAKkkB,GAAQ,CAC9B,GAAIzY,GAAQsY,EAAM,EAMlB,IALAvY,EAAO8X,EAAwCS,EAAM,IAGrDP,EAAK,GAAIva,QAAO,KAAOwC,EAAQ,eAAiBD,EAAO,cAAe,KAEjE9S,EAAS6qB,EAAiBC,EAAIC,EAAK,IACpC,MAAO/qB,EAMX,IAFA8qB,EAAK,GAAIva,QAAOuC,GAEX9S,EAAS6qB,EAAiBC,EAAIC,GAC/B,MAAO/qB,GAIf,MAAO,OA8CX,QAAS2rB,GAA+B9C,GACpC,IAAI/H,EAAY+H,EAAGxoB,QAAWwoB,EAAGxoB,MAAjC,CAWA,IAAK,GAJDgrB,GACAxN,EANA+N,EAAS,mGACTC,EAAQ,4EACRC,EAAQ,kGACRC,EAAQlD,EAAGxoB,MAAMsJ,MAAM,MACvBtJ,KAGA2rB,EAAY,sBAAsB1kB,KAAKuhB,EAAG9L,SAErCnf,EAAI,EAAGyjB,EAAI0K,EAAMxxB,OAAQqD,EAAIyjB,IAAKzjB,EAAG,CAC1C,GAAKytB,EAAQQ,EAAMvkB,KAAKykB,EAAMnuB,IAC1BigB,GACIze,IAAOisB,EAAM,GACbxZ,KAAQwZ,EAAM,IAAMvD,EACpB1Y,KAAQic,EAAM,GAAKA,EAAM,GAAG1hB,MAAM,KAAO,GACzCoY,MAASsJ,EAAM,GACfpJ,OAAUoJ,EAAM,IAAMA,EAAM,GAAK,UAElC,IAAKA,EAAQO,EAAOtkB,KAAKykB,EAAMnuB,IAClCigB,GACIze,IAAOisB,EAAM,GACbxZ,KAAQwZ,EAAM,IAAMvD,EACpB/F,MAASsJ,EAAM,GACfpJ,OAAUoJ,EAAM,IAAMA,EAAM,GAAK,UAElC,MAAKA,EAAQS,EAAMxkB,KAAKykB,EAAMnuB,KAQjC,QAPAigB,IACIze,IAAOisB,EAAM,GACbxZ,KAAQwZ,EAAM,IAAMvD,EACpB/F,MAASsJ,EAAM,GACfpJ,OAAUoJ,EAAM,IAAMA,EAAM,GAAK,OAMpCxN,EAAQhM,MAAQgM,EAAQkE,OACzBlE,EAAQhM,KAAOqX,EAAkBrL,EAAQze,IAAKye,EAAQkE,OAGtDlE,EAAQkE,OACRlE,EAAQnB,QAAUyM,EAActL,EAAQze,IAAKye,EAAQkE,OAGzD1hB,EAAM9E,KAAKsiB,GAGf,MAAKxd,GAAM9F,QAIP8F,EAAM,GAAG0hB,OAAS1hB,EAAM,GAAG4hB,QAAU+J,EACrC3rB,EAAM,GAAG4hB,OAASiJ,EAAiBc,EAAU,GAAI3rB,EAAM,GAAGjB,IAAKiB,EAAM,GAAG0hB,MAChE1hB,EAAM,GAAG4hB,QAAWnB,EAAY+H,EAAGoD,gBAI3C5rB,EAAM,GAAG4hB,OAAS4G,EAAGoD,aAAe,IAIpC5tB,KAAQwqB,EAAGxqB,KACX0e,QAAW8L,EAAG9L,QACd3d,IAAOsgB,IACPrf,MAASA,IAhBF,MA0Bf,QAAS6rB,GAAoCrD,GAIzC,GAAIlG,GAAakG,EAAGlG,UACpB,KAAI7B,EAAY+H,EAAGlG,aAAgBkG,EAAGlG,WAAtC,CAOA,IAAK,GAFD0I,GAHAc,EAAS,gGACTJ,EAAQpJ,EAAWhZ,MAAM,MACzBtJ,KAGKzC,EAAI,EAAGyjB,EAAI0K,EAAMxxB,OAAQqD,EAAIyjB,EAAGzjB,GAAK,EAC1C,GAAKytB,EAAQc,EAAO7kB,KAAKykB,EAAMnuB,IAAM,CACjC,GAAIigB,IACAkE,MAASsJ,EAAM,GACfpJ,QAAWoJ,EAAM,GACjBxZ,KAAQwZ,EAAM,IAAMA,EAAM,GAC1Bjc,KAAQic,EAAM,GAAKA,EAAM,GAAG1hB,MAAM,QAClCvK,IAAOisB,EAAM,GAMjB,KAHKxN,EAAQhM,MAAQgM,EAAQkE,OACzBlE,EAAQhM,KAAOqX,EAAkBrL,EAAQze,IAAKye,EAAQkE,OAEtDlE,EAAQkE,KACR,IACIlE,EAAQnB,QAAUyM,EAActL,EAAQze,IAAKye,EAAQkE,MACvD,MAAOqK,IAGRvO,EAAQnB,UACTmB,EAAQnB,SAAWqP,EAAMnuB,EAAI,KAGjCyC,EAAM9E,KAAKsiB,GAInB,MAAKxd,GAAM9F,QAKP8D,KAAQwqB,EAAGxqB,KACX0e,QAAW8L,EAAG9L,QACd3d,IAAOsgB,IACPrf,MAASA,GAPF,MAoBf,QAASgsB,GAA2CxD,GAehD,GAAIkD,GAAQlD,EAAG9L,QAAQpT,MAAM,KAC7B,IAAIoiB,EAAMxxB,OAAS,EACf,MAAO,KAGX,IAMI8wB,GACAztB,EACA6oB,EACAthB,EATAmnB,EAAU,oFACVC,EAAU,6FACVC,EAAU,yCACVnsB,KACAirB,EAAUnvB,SAASovB,qBAAqB,UACxCkB,IAMJ,KAAK7uB,IAAK0tB,GACFjL,EAAOiL,EAAS1tB,KAAO0tB,EAAQ1tB,GAAG4C,KAClCisB,EAAmBlxB,KAAK+vB,EAAQ1tB,GAIxC,KAAKA,EAAI,EAAG6oB,EAAMsF,EAAMxxB,OAAQqD,EAAI6oB,EAAK7oB,GAAK,EAAG,CAC7C,GAAI8uB,GAAO,IACX,IAAKrB,EAAQiB,EAAQhlB,KAAKykB,EAAMnuB,IAC5B8uB,GACIttB,IAAOisB,EAAM,GACbxZ,KAAQwZ,EAAM,GACdtJ,MAASsJ,EAAM,QAEhB,IAAKA,EAAQkB,EAAQjlB,KAAKykB,EAAMnuB,IAAM,CACzC8uB,GACIttB,IAAOisB,EAAM,GACbxZ,KAAQwZ,EAAM,GAElB,IAAIsB,IAAiBtB,EAAM,GACvB/Y,EAASma,EAAmBpB,EAAM,GAAK,EAC3C,IAAI/Y,IACAnN,EAAS6kB,EAAU0C,EAAKttB,MACZ,CACR+F,EAASA,EAAO6S,KAAK,KACrB,IAAInW,GAAMsD,EAAOwY,QAAQrL,EAAO6L,UAC5Btc,IAAO,IACP6qB,EAAK3K,KAAO4K,EAAexnB,EAAO6lB,UAAU,EAAGnpB,GAAK8H,MAAM,MAAMpP,aAIzE,IAAK8wB,EAAQmB,EAAQllB,KAAKykB,EAAMnuB,IAAM,CACzC,GAAIwB,GAAM3M,EAAOktB,SAASC,KAAKrO,QAAQ,OAAQ,IAC3CwQ,EAAOsJ,EAAM,GACbP,EAAK,GAAIva,QAAOqa,EAAwCmB,EAAMnuB,EAAI,IACtEuH,GAAS0lB,EAAiBC,GAAK1rB,IAC/BstB,GACIttB,IAAOA,EACP2iB,KAAQ5c,EAASA,EAAO4c,KAAOA,EAC/BlQ,KAAQ,IAIhB,GAAI6a,EAAM,CACDA,EAAK7a,OACN6a,EAAK7a,KAAOqX,EAAkBwD,EAAKttB,IAAKstB,EAAK3K,MAEjD,IAAIrF,GAAUyM,EAAcuD,EAAKttB,IAAKstB,EAAK3K,MACvC6K,EAAWlQ,EAAUA,EAAQpa,KAAKC,MAAMma,EAAQniB,OAAS,IAAM,IAC/DmiB,IAAWkQ,EAAQrb,QAAQ,OAAQ,MAAQwa,EAAMnuB,EAAI,GAAG2T,QAAQ,OAAQ,IACxEmb,EAAKhQ,QAAUA,EAGfgQ,EAAKhQ,SAAWqP,EAAMnuB,EAAI,IAE9ByC,EAAM9E,KAAKmxB,IAGnB,MAAKrsB,GAAM9F,QAKP8D,KAAQwqB,EAAGxqB,KACX0e,QAAWgP,EAAM,GACjB3sB,IAAOsgB,IACPrf,MAASA,GAPF,KAwBf,QAAS2oB,GAAoCzH,EAAWniB,EAAKupB,EAAQ5L,GACjE,GAAI8P,IACAztB,IAAOA,EACP2iB,KAAQ4G,EAGZ,IAAIkE,EAAQztB,KAAOytB,EAAQ9K,KAAM,CAC7BR,EAAUoI,YAAa,EAElBkD,EAAQhb,OACTgb,EAAQhb,KAAOqX,EAAkB2D,EAAQztB,IAAKytB,EAAQ9K,OAGrD8K,EAAQnQ,UACTmQ,EAAQnQ,QAAUyM,EAAc0D,EAAQztB,IAAKytB,EAAQ9K,MAGzD,IAAIiK,GAAY,cAAc1kB,KAAKyV,EAKnC,IAJIiP,IACAa,EAAQ5K,OAASiJ,EAAiBc,EAAU,GAAIa,EAAQztB,IAAKytB,EAAQ9K,OAGrER,EAAUlhB,MAAM9F,OAAS,GACrBgnB,EAAUlhB,MAAM,GAAGjB,MAAQytB,EAAQztB,IAAK,CACxC,GAAImiB,EAAUlhB,MAAM,GAAG0hB,OAAS8K,EAAQ9K,KACpC,OAAO,CACJ,KAAKR,EAAUlhB,MAAM,GAAG0hB,MAAQR,EAAUlhB,MAAM,GAAGwR,OAASgb,EAAQhb,KAGvE,MAFA0P,GAAUlhB,MAAM,GAAG0hB,KAAO8K,EAAQ9K,KAClCR,EAAUlhB,MAAM,GAAGqc,QAAUmQ,EAAQnQ,SAC9B,EAOnB,MAFA6E,GAAUlhB,MAAMysB,QAAQD,GACxBtL,EAAUwL,SAAU,GACb,EAKX,MAHIxL,GAAUoI,YAAa,GAGpB,EAYX,QAASqD,GAAsCnE,EAAIoE,GAS/C,IAAK,GAJD5B,GACAqB,EACAvnB,EANA+nB,EAAe,qEACf7sB,KACA8sB,KACAC,GAAY,EAKPC,EAAOL,EAAsCM,OAAQD,IAASD,EAAWC,EAAOA,EAAKC,OAC1F,GAAID,IAAStE,GAAqBsE,IAAS3F,EAASjM,OAApD,CAkBA,GAbAiR,GACIttB,IAAO,KACPyS,KAAQiW,EACR/F,KAAQ,KACRE,OAAU,MAGVoL,EAAKhvB,KACLquB,EAAK7a,KAAOwb,EAAKhvB,MACTgtB,EAAQ6B,EAAa5lB,KAAK+lB,EAAK3lB,eACvCglB,EAAK7a,KAAOwZ,EAAM,IAGG,mBAAdqB,GAAK7a,KACd,IACE6a,EAAK7a,KAAOwZ,EAAMkC,MAAMvC,UAAU,EAAGK,EAAMkC,MAAM5P,QAAQ,MACzD,MAAOvW,IAGX,GAAKjC,EAASimB,EAAyBiC,GAAQ,CAC3CX,EAAKttB,IAAM+F,EAAO/F,IAClBstB,EAAK3K,KAAO5c,EAAO4c,KAEf2K,EAAK7a,OAASiW,IACd4E,EAAK7a,KAAOqX,EAAkBwD,EAAKttB,IAAKstB,EAAK3K,MAGjD,IAAIiK,GAAY,cAAc1kB,KAAKuhB,EAAG9L,SAAW8L,EAAG2E,YAChDxB,KACAU,EAAKzK,OAASiJ,EAAiBc,EAAU,GAAI7mB,EAAO/F,IAAK+F,EAAO4c,OAIpEoL,EAAM,GAAKE,GACXD,GAAY,EAEZD,EAAM,GAAKE,IAAQ,EAGvBhtB,EAAM9E,KAAKmxB,GAGXO,GAGA5sB,EAAM+nB,OAAO,EAAG6E,EAGpB,IAAIjtB,IACA3B,KAAQwqB,EAAGxqB,KACX0e,QAAW8L,EAAG9L,QACd3d,IAAOsgB,IACPrf,MAASA,EAGb,OADA2oB,GAAoChpB,EAAQ6oB,EAAG4E,WAAa5E,EAAG6E,SAAU7E,EAAG9G,MAAQ8G,EAAG8E,WAAY9E,EAAG9L,SAAW8L,EAAG2E,aAC7GxtB,EAQX,QAAS+oB,GAAkBF,EAAIoE,GAC3B,GAAI5sB,GAAQ,IACZ4sB,GAAkB,MAATA,EAAgB,GAAKA,CAE9B,KAKI,GADA5sB,EAAQ6rB,EAAoCrD,GAExC,MAAOxoB,GAEb,MAAO+G,GACL,GAAIsgB,EAASzI,MACT,KAAM7X,GAId,IAEI,GADA/G,EAAQsrB,EAA+B9C,GAEnC,MAAOxoB,GAEb,MAAO+G,GACL,GAAIsgB,EAASzI,MACT,KAAM7X,GAId,IAEI,GADA/G,EAAQgsB,EAA2CxD,GAE/C,MAAOxoB,GAEb,MAAO+G,GACL,GAAIsgB,EAASzI,MACT,KAAM7X,GAId,IAEI,GADA/G,EAAQ2sB,EAAsCnE,EAAIoE,EAAQ,GAEtD,MAAO5sB,GAEb,MAAO+G,GACL,GAAIsgB,EAASzI,MACT,KAAM7X,GAId,OACI/I,KAAQwqB,EAAGxqB,KACX0e,QAAW8L,EAAG9L,QACd3d,IAAOsgB,KA3uBf,GAAIuK,KAovBJ,OALAlB,GAAkBC,oCAAsCA,EACxDD,EAAkB4C,+BAAiCA,EACnD5C,EAAkBG,kBAAoBA,EACtCH,EAAkBI,cAAgBA,EAE3BJ,IAQX,IAII6E,GACAjJ,EACAM,EACAO,EACAtB,EARA2J,EAASp7B,EAAO4yB,MAChBc,IAA6B,YAAhB,mBAAO3mB,MAAP,eAAAlC,cAAOkC,SAAqBA,KAAKC,WAE9CugB,EAAkC,mBAAb7jB,UAMrBkoB,KACAhC,GACIhI,OAAQ,aACRwI,gBACAE,cACAC,iBACAV,gBACAyD,YAAa,YACb6B,qBAAqB,EACrBnE,iBAAkB,KAEtBqK,GAAmB,EACnB7M,EAAkB7tB,OAAOC,UAGzB6zB,EAAkBz0B,EAAOiL,YACzBupB,MACA8G,MACAzJ,GAAYZ,GAEhB,KAAK,GAAIsK,MAAU9G,GACjBD,GAAuB+G,IAAU9G,EAAgB8G,GAOnD,IAAI3I,KACAC,QAAS,QAETrG,OAAO,EAQPgP,WAAY,WAER,MADAx7B,GAAO4yB,MAAQwI,EACRxI,IAUX7qB,OAAQ,SAASmmB,EAAKtmB,GAClB,GAAI4qB,EAEA,MADAH,GAAS,QAAS,4CACXO,EAEX,KAAK1E,EAAK,MAAO0E,GAEjB,IAAI6I,GAAM1N,EAASG,GACfwN,EAAYD,EAAItQ,KAAKqN,YAAY,KACjCrN,EAAOsQ,EAAItQ,KAAK7J,OAAO,EAAGoa,EAgD9B,OA7CI9zB,IACA+mB,EAAK/mB,EAAS,SAASlH,EAAKO,GAEb,QAAPP,GAAwB,SAAPA,EACjBkxB,EAAclxB,GAAOO,EAErB2uB,EAAclvB,GAAOO,IAOjC2uB,EAAcQ,aAAatnB,KAAK,qBAChC8mB,EAAcQ,aAAatnB,KAAK,iDAGhC8mB,EAAcQ,aAAewD,EAAWhE,EAAcQ,cACtDR,EAAcU,aAAaV,EAAcU,WAAWxoB,QAAS8rB,EAAWhE,EAAcU,YACtFV,EAAcW,gBAAgBX,EAAcW,cAAczoB,QAAS8rB,EAAWhE,EAAcW,eAC5FX,EAAcC,aAAe+D,EAAWhE,EAAcC,cAEtDkD,EAAY0I,EAAI3J,KAChBL,EAAgBgK,EAAItQ,KAAK7J,OAAOoa,EAAY,GAG5ClJ,EAAe,KAAOiJ,EAAIE,MACXF,EAAIG,KAAO,IAAMH,EAAIG,KAAO,IAC7B,IAAMzQ,EAAO,OAASsG,EAAgB,UAEhDgK,EAAII,WACJrJ,EAAeiJ,EAAII,SAAW,IAAMrJ,GAGpC5C,EAAcE,eACdmF,EAASC,gBAAiB,GAG1BtF,EAAcwF,iBACdH,EAASG,eAAiBxF,EAAcwF,gBAG5CH,EAASE,sBAAwBvF,EAAcuF,oBAGxCvC,IAWX9I,QAAS,WAYL,MAXIwI,OAAc+I,IACdpG,EAASjM,OAAOsM,UAAUzG,GAG1BF,EAAK2M,GAAS,SAASQ,EAAGC,GACtBA,MAGJV,GAAmB,GAGhBzI,IAWX3I,QAAS,SAASriB,EAASwX,EAAMzC,GAO7B,MANI6K,GAAW5f,KACX+U,EAAOyC,MACPA,EAAOxX,EACPA,EAAUjF,GAGPiwB,GAAM1X,KAAKtT,EAASwX,GAAM1L,MAAMrM,KAAMsV,IAUjDzB,KAAM,SAAStT,EAASwX,GAwBpB,QAAS4c,KAML,IALA,GAAIrf,MAAWxR,EAAItD,UAAUC,OACzBm0B,GAAQr0B,GAAWA,GAAWA,EAAQq0B,QAAS,EAI7C9wB,KAAKwR,EAAKxR,GAAK8wB,EAAOrJ,GAAM1X,KAAKtT,EAASC,UAAUsD,IAAMtD,UAAUsD,EAE1E,KAEI,MAAOiU,GAAK1L,MAAMrM,KAAMsV,GAC1B,MAAMhI,GAEJ,KADAie,IAAMvJ,iBAAiB1U,EAAG/M,GACpB+M,GAlCd,GAAI0Z,EAAYjP,KAAUoI,EAAW5f,GACjC,MAAOA,EAWX,IAPI4f,EAAW5f,KACXwX,EAAOxX,EACPA,EAAUjF,IAKT6kB,EAAWpI,GACZ,MAAOA,EAIX,IAAIA,EAAK8c,UACL,MAAO9c,EAqBX,KAAK,GAAI0M,KAAY1M,GACbwO,EAAOxO,EAAM0M,KACbkQ,EAAQlQ,GAAY1M,EAAK0M,GAUjC,OAPAkQ,GAAQp7B,UAAYwe,EAAKxe,UAIzBo7B,EAAQE,WAAY,EACpBF,EAAQG,UAAY/c,EAEb4c,GAQX1S,UAAW,WAIP,MAHA2L,GAASjM,OAAOM,YAChB+R,GAAmB,EAEZzI,IAUXvJ,iBAAkB,SAAS+M,EAAIxuB,GAE3B,IAAK8mB,EAAQ0H,GAAK,MAAOxD,IAAMwJ,eAAehG,EAAIxuB,EAGlDuzB,GAAwB/E,CAOxB,KACI,GAAIxoB,GAAQqnB,EAASqB,kBAAkBF,EACvCvH,GAAgBjhB,EAAOhG,GACzB,MAAMy0B,GACJ,GAAGjG,IAAOiG,EACN,KAAMA,GAId,MAAOzJ,KAUXwJ,eAAgB,SAASE,EAAK10B,GAI1B,IAAMgoB,EAAcQ,aAAa3mB,OAAQmmB,EAAcQ,aAAa3mB,KAAK6yB,GAWzE,MANA9L,GACIC,GACInG,QAASgS,EAAM,IAChB10B,IAGAgrB,IAGX2J,UAAW,SAASR,GAGhB,MAFAT,IAAQxyB,KAAKizB,GACTV,GAAkBU,IACfnJ,IASX4J,eAAgB,SAAS1K,GAIrB,MAFAF,GAAcE,KAAOA,EAEdc,IASX6J,gBAAiB,SAASrS,GAGtB,MAFA4K,GAAa,QAAS5K,GAEfwI,IASX8J,eAAgB,SAASpwB,GAGrB,MAFA0oB,GAAa,OAAQ1oB,GAEdsmB,IAQX+J,aAAc,WAGV,MAFA/K,MAEOgB,IAQXgK,WAAY,WAER,MAAO7vB,MAAK8e,MAAM9e,KAAKC,UAAU4kB,KASrCiL,WAAY,SAASjT,GAGjB,MAFAgG,GAAchG,QAAUA,EAEjBgJ,IAUXkK,gBAAiB,SAAS1vB,GAGtB,MAFAwiB,GAAcjG,aAAevc,EAEtBwlB,IAUXmK,sBAAuB,SAAS3vB,GAG5B,MAFAwiB,GAAcqC,mBAAqB7kB,EAE5BwlB,IAYXoK,aAAc,SAASnT,GAGnB,MAFA+F,GAAc/F,UAAYA,EAEnB+I,IAQXoE,cAAe,WACX,MAAOmE,IAQXjJ,YAAa,WACT,MAAOA,IAQXI,QAAS,WACL,MAAOA,MAKfM,IAAMqK,QAAUrK,GAAM4J,eACtB5J,GAAMsK,kBAAoBtK,GAAMiK,UAqChC,IAAI1O,IAAU,2CAA2CjX,MAAM,KAC3D+W,GAAa,+DAMjBH,GAAiBltB,UAAY,GAAI8nB,OACjCoF,EAAiBltB,UAAUyN,YAAcyf,CAuXzC,IAAI6F,GAoGJgB,KAIA30B,EAAO4yB,MAAQA,GAKX7F,KAAAC,EAAoB,WAClB,MAAO4F,KADTlf,MAAApU,EAAAytB,KAAAC,IAAArqB,IAAApD,EAAAD,QAAA0tB,KAWiB,mBAAXhtB,QAAyBA,OAAhC2C,SrFy9FG,SAASpD,EAAQD,EAASH,GAE/B,YsFj9JD,SAASg+B,GAAU90B,GAClB,GAAM+0B,GAAUC,EAAWh1B,GACrBi1B,KAAgB3tB,MAAMjQ,KAAKgK,SAASwV,iBAAiB,UAE3Dqe,GAAMzwB,IAAI,gBAAiBswB,EAAQI,eACnCC,EAAwBC,EAAcj2B,KAAKJ,KAAMgB,GAEjDqB,SAASgB,iBAAiB,gBAAiB+yB,GAE3CE,EAAYL,EAAWx1B,OAEvBy1B,EAAMzwB,IAAI6d,KAAKgT,EAAY,0BAC3B,IAAMv2B,GAAMw2B,EAAIn1B,KAAK20B,EACrBh2B,GAAIiC,KAAK,SAAA4D,GAAA,MAAOqwB,GAAWvT,QAAQ9c,EAAI4wB,MAAMC,SAASr2B,KAAKwF,EAAI4wB,UAGhE,QAASH,GAAer1B,EAAOiY,GAC9B,GAAME,GAASF,EAAME,MAED,SAAhBA,EAAOxX,OAGPX,GAASA,EAAMvF,IAAI,qBAAuB0d,EAAOud,MAAQvd,EAAOud,KAAKC,YACpExd,EAAOud,KAAKE,UACdzd,EAAOud,KAAKE,SAASxT,UAEtBjK,EAAOud,KAAKE,SAAW,GAAIC,GAAS1d,EAAOud,OAGxCvd,EAAOud,KAAKI,KAAO3d,EAAOud,KAAKI,IAAIC,WAAY,GAClDb,EAAMzwB,IAAI6d,KAAK,oBAAqBrK,GACd,IAAlB+d,KACH,EAAAv8B,EAAA2L,UAAS,iBACL,aAAahE,KAAKC,SAASC,UAAS,WACvC20B,EAAcC,eAAgB,GAAI7Y,OAAOC,SACzC,IAAM6Y,GAAc,QAAdA,KACLF,EAAcG,gBAAiB,GAAI/Y,OAAOC,WAC1C,EAAA7jB,EAAA2L,UAAS,kBACTixB,EAAYJ,EAAe9d,EAAOud,MAClCr0B,SAAS2W,KAAK6D,oBAAoB,sBAAuBsa,GAE1D90B,UAAS2W,KAAK3V,iBAAiB,sBAAuB8zB,QAG9Che,EAAOud,KAAKI,KAAO3d,EAAOud,KAAKI,IAAIC,WAAY,IACzDb,EAAMzwB,IAAI0d,KAAK,oCACf+S,EAAMzwB,IAAIwT,IAEX+d,KAIGA,IAAkBV,GACrBJ,EAAMzwB,IAAI,0BA5DZ,GAAAhL,GAAA3C,EAAA,IATMw/B,EAAOx/B,EAAQ,IACfy+B,EAAM59B,OAAO4+B,KAAOz/B,EAAQ,IAE5Bo+B,EAAQp+B,EAAQ,KAChBk+B,EAAal+B,EAAQ,KACrB++B,EAAW/+B,EAAQ,KACnBu/B,EAAcv/B,EAAQ,KACtB0/B,EAAS1/B,EAAQ,KAInBw+B,SACAU,EAAgB,EAChBZ,SACEa,IA2DN/+B,GAAOD,SACNmJ,KAAM,SAAAJ,GACL,MAAOwB,SAAQC,UACbT,KAAK,WACL,GAAIhB,GAASA,EAAMvF,IAAI,OAAQ,CAC9B,GAAI,kCAAkC2G,KAAKwc,UAAUC,WACpD,MAGD,IAAG7d,GAASA,EAAMvF,IAAI,kBAAmB,CACpC,GAAIg8B,GAAW,GAAID,GAClBn1B,SAASwD,cAAc,yBACrB6xB,QAAY,8BACdC,WAAe,+BAEhBF,GAASr2B,OAEV,GAAGJ,GAASA,EAAMvF,IAAI,iBAAkB,CACvC,GAAIm8B,GAAc,GAAIJ,GACrBn1B,SAASwD,cAAc,oBACrBgyB,UAAc,OACfF,WAAe,UAEjBC,GAAYx2B,OAGjB,MAAOoB,SAAQC,UACbT,KAAK,WAGL,GAAMkD,GAAUgxB,EAAM4B,YAClB92B,IAASA,EAAMvF,IAAI,QAAUyJ,GAChC4wB,EAAS90B,KAGVgB,KAAK,WACFhB,GAASA,EAAMvF,IAAI,SAGrB67B,EAAKl2B,KAAKJ,WtF0+JZ,SAAS9I,EAAQD,EAASH,GAE/B,YuF5lKD,IAAMigC,GAAajgC,EAAQ,IACrB2Y,EAAQ,GAAIsnB,GAAW,UAAW,aAClCR,EAAOz/B,EAAQ,IAEfkgC,EAAW,SAACtxB,GACjB,GAAMolB,GAAM,GAAImM,MAChBnM,GAAIplB,IAAMA,GAMLwxB,EAAe,SAAC3zB,EAAM4zB,EAAOrrB,GAClC,GAAMzT,sBAAyBkL,CAC/BkM,GAAMhV,IAAIpC,GAAK2I,KAAK,SAAA2L,GACnBA,EAAMA,GAAO,EACVmR,SAASnR,GAAOwqB,IAClBrrB,IACA2D,EAAMkE,IAAItb,IAAOsU,GAAjB8C,SAA4B,iBAJ9BA,SAMS,cAGVxY,GAAQmJ,KAAO,SAACJ,GAEfqB,SAAS2W,KAAK3V,iBAAiB,wBAAyB,WAEvD,GAA0B,mBAAhB1K,QAAOy/B,MAAyBL,EAAWM,eAArD,CAIA,GAAMC,GAAOf,EAAKD,KAAKiB,SAAS,OAE7BD,IAAwB,mBAATA,KAGdt3B,EAAMvF,IAAI,2BACZy8B,EAAa,UAAW,EAAG,WAAQF,6DAAoEM,KAIrGt3B,EAAMvF,IAAI,0BACby8B,EAAa,cAAe,EAAG,WAAQF,EAAS,yFAM7Ch3B,EAAMvF,IAAI,0BACZy8B,EAAa,SAAU,EAAG,WAAQF,iDAAwDM,KAGxFt3B,EAAMvF,IAAI,6BACZy8B,EAAa,YAAa,EAAG,WAC5B,GAAMM,GAAa9K,4BAA4B4K,EAA5B,8EACbG,sCAA2CD,CACjDR,oEAA0ES,KAIzEz3B,EAAMvF,IAAI,uBACZy8B,EAAa,aAAc,EAAG,WAAQF,EAAS,qEAI7Ch3B,EAAMvF,IAAI,2BACZy8B,EAAa,UAAW,EAAG,WAC1BF,sFAA6FM,EAA7F,uBAMAt3B,EAAMvF,IAAI,6BACZy8B,EAAa,gBAAiB,EAAG,WAAQF,EAAS,yGvF6mK/C,SAAS9/B,EAAQD,EAASH,GwFvrKhCI,EAAAD,QAAAH,EAAA,KxF6rKM,SAASI,EAAQD,EAASH,GAE/B,YyFprKD,SAASigC,GAAWp2B,EAAM+2B,GACxB,IAAIA,EACF,KAAM,oBAER14B,MAAKyQ,MAAQkoB,EAAKh3B,GAClB3B,KAAK04B,UAAY,OAAOA,EAAU,IAVpC,GAAIC,GAAO7gC,EAAQ,GAanBigC,GAAWx+B,UAAUkC,IAAM,SAASpC,GAClC,MAAO,IAAImJ,SAAQ,SAASC,GAC7BA,EAAQzC,KAAKyQ,MAAMhV,IAAIuE,KAAK04B,UAAUr/B,KACnC+G,KAAKJ,QAGT+3B,EAAWx+B,UAAUob,IAAM,SAAStb,EAAKO,GACvC,MAAO,IAAI4I,SAAQ,SAASC,GAC1BA,EAAQzC,KAAKyQ,MAAMkE,IAAI3U,KAAK04B,UAAUr/B,EAAKO,KAC3CwG,KAAKJ,QAGT+3B,EAAWx+B,UAAUq/B,MAAQ,SAASv/B,GACpC,MAAO,IAAImJ,SAAQ,SAASC,GAC1BA,EAAQzC,KAAKyQ,MAAMmoB,MAAM54B,KAAK04B,UAAUr/B,KACxC+G,KAAKJ,QAOT+3B,EAAWx+B,UAAUs/B,MAAQ,WAC3B,MAAO,IAAIr2B,SAAQ,SAASC,GAC1BA,EAAQzC,KAAKyQ,MAAMooB,MAAM74B,KAAK04B,aAC9Bt4B,KAAKJ,QAGT+3B,EAAWM,aAAeM,EAAKN,aAE/BngC,EAAOD,QAAU8/B,GzFqsKX,SAAS7/B,EAAQD,EAASH,G0FtvKhCI,EAAAD,QAAAH,EAAA,K1F4vKM,SAASI,EAAQD,GAEtB,Y2F5uKD,SAAS8/B,GAAWp2B,GACnB3B,KAAK84B,QAAUngC,OAAOgJ,GACrB3B,KAAKuJ,QACLvJ,KAAKyQ,SAEL9X,OAAO0K,iBAAiB,UAAW,SAASiK,GACtCtN,KAAKuJ,KAAK+D,EAAEjU,OACd2G,KAAKuJ,KAAK+D,EAAEjU,MAAO,EACnB2G,KAAKyQ,MAAMnD,EAAEjU,KAAOqM,KAAK8e,MAAMlX,EAAEyrB,YAEnC34B,KAAKJ,OArBT,GAAIg5B,GAAc,SAASrS,GACzB,MAAOxf,QAAOwf,GAAKlP,QAAQ,6BAA8B,SAKvDwhB,GAAU,CAyBdlB,GAAWx+B,UAAUkC,IAAM,SAASpC,GAClC,GAAyB,IAArBmH,UAAUC,OACZ,KAAM4gB,OAAM,2BAA6B7gB,UAAUC,OAAS,WAAapH,EAE3E,KAAK2G,KAAKuJ,KAAKlQ,IAAQ4/B,EAAS,CAC9B,GAAIpgB,EACJ,KACEA,EAAO7Y,KAAK84B,QAAQz/B,GACpB,MAAMiU,GACN2rB,GAAU,EAKRpgB,IAAMA,EAAOnT,KAAK8e,MAAM3L,IAC5B7Y,KAAKyQ,MAAMpX,GAAOwf,EAClB7Y,KAAKuJ,KAAKlQ,IAAO,EAEnB,MAAO2G,MAAKyQ,MAAMpX,IAWpB0+B,EAAWx+B,UAAUob,IAAM,SAAStb,EAAKO,GACvC,GAAyB,IAArB4G,UAAUC,OACZ,KAAM4gB,OAAM,4BAA8B7gB,UAAUC,OAAS,WAAapH,EAE5E,IAAI4/B,EACF,IACEj5B,KAAK84B,QAAQz/B,GAAOqM,KAAKC,UAAU/L,GACnC,MAAM4L,GAGN,GAAiB,KAAbA,EAAIksB,KAGN,KAAMlsB,EAFNyzB,IAAU,EAShB,MAFAj5B,MAAKyQ,MAAMpX,GAAOO,EAClBoG,KAAKuJ,KAAKlQ,IAAO,EACVO,GAQTm+B,EAAWx+B,UAAUq/B,MAAQ,SAASv/B,SAC7B2G,MAAKyQ,MAAMpX,SACX2G,MAAKuJ,KAAKlQ,GACjB2G,KAAK84B,QAAQI,WAAW7/B,IAS1B0+B,EAAWx+B,UAAUs/B,MAAQ,SAASM,GACpC,IAAKA,EAMH,MALIF,IACFj5B,KAAK84B,QAAQD,QAEf74B,KAAKyQ,cACLzQ,KAAKuJ,QAIP4vB,GAAcH,EAAYG,EAC1B,IAAIC,GAAgB,GAAI3iB,QAAO,IAAM0iB,EACrC,KAAK,GAAI9/B,KAAO2G,MAAKuJ,KACflQ,EAAIggC,MAAMD,IACZp5B,KAAK44B,MAAMv/B,IAKjBnB,EAAOD,QAAQogC,aAAe,WAC7B,MAAOY,IAGR/gC,EAAOD,QAAQqhC,MAAQ,GAAIvB,GAAW,gBACtC7/B,EAAOD,QAAQshC,QAAU,GAAIxB,GAAW,mB3FmwKlC,SAAS7/B,EAAQD,EAASH,G4Ft4KhCI,EAAAD,QAAAH,EAAA,K5F44KM,SAASI,EAAQD,EAASH,GAE/B,Y6F94KD,SAASy+B,KACRiD,IAmHD,QAASA,KACRn3B,SAASgB,iBAAiB,qBAAsBo2B,GAEjD,QAASC,KACRr3B,SAASwa,oBAAoB,qBAAsB4c,GAnHpDlD,EAAIh9B,UAAUmH,OAAS5I,EAAQ,IAC/By+B,EAAIh9B,UAAUi9B,MAAQ1+B,EAAQ,KAC9By+B,EAAIh9B,UAAUu9B,IAAMh/B,EAAQ,KAC5By+B,EAAIh9B,UAAU+9B,KAAOx/B,EAAQ,KAC7By+B,EAAIh9B,UAAUogC,QAAU7hC,EAAQ,KAChCy+B,EAAIh9B,UAAUqgC,QAAU9hC,EAAQ,KAChCy+B,EAAIh9B,UAAUsgC,UAAY/hC,EAAQ,KAClCy+B,EAAIh9B,UAAU28B,MAAQp+B,EAAQ,IAQ9By+B,EAAIh9B,UAAU6H,KAAO,SAASb,GAAS,GAAAK,GAAAZ,IACtCA,MAAKU,OAAOU,OACZpB,KAAKU,OAAOH,EACZ,IAAMu5B,GAAe95B,KAAKU,SAASo5B,YACnC,OAAGA,GACKt3B,QAAQ+U,KAAKwiB,EAAUD,EAAarP,MAAOsP,EAAUD,EAAaE,QACxEh4B,KAAK,SAAAi4B,GAEL,IAAI,GAAIn2B,GAAI,EAAGA,EAAIm2B,EAASx5B,OAAQqD,IAAI,CACvC,GAAIo2B,GAAcD,EAASn2B,GACvByF,GAAQ,OAAQ,QAChB4wB,IAWJ,IATGD,EAAY5C,MAAQ4C,EAAY5C,KAAK8C,aACvCD,EAAQ5wB,EAAKzF,IAAMlD,EAAKs1B,MAAMmE,qBAAqBH,EAAY5C,KAAK8C,YACpEx5B,EAAK02B,KAAKhxB,IAAI6zB,IAGZD,EAAYI,KAAOJ,EAAYI,IAAIT,WACrCj5B,EAAKi5B,UAAUvzB,IAAI1F,EAAKs1B,MAAMmE,qBAAqBH,EAAYI,IAAIT,YAGjEC,EAAaS,aAAeL,EAAYI,KAAOJ,EAAYI,IAAIE,OAAQ,CACzE,GAAM1D,GAAMl2B,EAAKF,OAAO,MAErBo2B,IAAOA,EAAI2D,OACb3D,EAAI2D,KAAOP,EAAYI,IAAIE,OAAOtc,KAAK,OAI1C,MAAOtd,GAAK85B,gBAzBNl4B,SA2BAxC,KAAK06B,aAELl4B,QAAQC,QAAQzC,KAAK06B,eAI9B,IAAMX,GAAY,SAAS5tB,GACzB,MAAIA,GACG9G,MAAM8G,GACX8L,QAAS,IAEX0H,cAAc,IAEb3d,KAAK,SAAA4D,GAAQ,MAAOA,GAAI+0B,SALlBt1B,SAMA,cAPc7C,QAAQC,YAU/B8zB,GAAIh9B,UAAUmhC,YAAc,WAU3B,MATA16B,MAAKw2B,MAAMp1B,OACXpB,KAAK82B,IAAI11B,OACTpB,KAAKs3B,KAAKl2B,OACVpB,KAAK25B,QAAQv4B,OACbpB,KAAK45B,QAAQx4B,OACbpB,KAAKk2B,MAAM0E,GAAG,QAAS56B,KAAKmlB,MAAM/kB,KAAKJ,OACvCA,KAAK66B,eAAgB,EACrB76B,KAAKk2B,MAAMtd,UAAU,cAAe5Y,MACpC05B,IACO15B,KAGR,IAAMy5B,GAAU,WACf,GAAMqB,GAAQtpB,MAAMupB,KAAK14B,SAASovB,qBAAqB,SACjDuJ,EAAOF,EAAMG,OAAO,SAASjlB,GAClC,MAAqB,eAAdA,EAAKzR,MAGRy2B,GAAKv6B,QAETV,EAAIqB,OAAOY,KAAK,WACf,GAAMw0B,GAAQhlB,MAAMupB,KAAK14B,SAASwV,iBAAiB,6BACnD2e,GAAM9T,QAAQ3iB,EAAIy2B,MAAMC,SAASr2B,KAAKL,EAAIy2B,UAM7CD,GAAIh9B,UAAU4rB,MAAQ,WACrB,GAAI+V,IAAS,CACTC,cAAaC,QAAQ,QACxBF,GAAS,EAETC,aAAaE,QAAQ,QAAQ,GAE9Br7B,KAAK45B,QAAQzU,QACbnlB,KAAK82B,IAAI3R,QACTnlB,KAAKs3B,KAAKnS,QACVnlB,KAAKw2B,MAAMrR,QACXnlB,KAAK65B,UAAU1U,QAEX+V,GACHC,aAAajC,WAAW,QAW1B,IAAMn5B,GAAM,GAAIw2B,EAChBr+B,GAAOD,QAAU8H,G7Fo5KX,SAAS7H,EAAQD,EAASH,GAE/B,Y8Fv9KD,SAASwjC,KACR,GAAIC,MACET,EAAQtpB,MAAMupB,KAAK14B,SAASovB,qBAAqB,QAWvD,OAVAqJ,GAAMpY,QAAQ,SAAA1M,GACTA,EAAKzR,OACsC,SAA1CyR,EAAK1R,aAAa,oBACrBi3B,EAAQvlB,EAAKzR,MAAS5L,OAAO+M,KAAQA,KAAK8e,MAAMxO,EAAKwlB,SAAW,cAEhED,EAAQvlB,EAAKzR,MAAQyR,EAAKwlB,WAKtBD,EAGR,QAASE,KACR,GAAIF,MACE/J,EAAUhgB,MAAMupB,KAAK14B,SAASwV,iBAAiB,6BAKrD,OAJA2Z,GAAQ9O,QAAQ,SAAAlK,GACf+iB,EAAW5iC,OAAO+M,KAAQwwB,EAAMwF,OAAOH,EAAS71B,KAAK8e,MAAMhM,EAAO8L,YAAc,gBAG1EiX,EAQR,QAASI,KACR,GAAIC,UACEC,EAAex5B,SAASwD,cAAc,wBAK5C,OAJIg2B,KACHD,EAAYC,EAAa/V,OAGjB8V,UAAWA,GAQrB,QAASE,KACR97B,KAAKyQ,SAnFN,GAAMylB,GAAQp+B,EAAQ,IAIhBikC,GACLC,SACCC,iBAAmBC,OAAQ,IAAK,MAChCC,WAAaD,OAAQ,IAAK,KAC1BE,gBAAkBF,OAAQ,IAAK,MAC/BG,aAAeH,OAAQ,IAAK,KAC5BI,kBAAmBJ,QAAS,IAAK,KAAM,IAAK,MAC5CK,UAAWL,OAAQ,IAAK,MACxBM,WAAaN,OAAQ,IAAK,MAC1BO,UAAYP,OAAQ,IAAK,OACzBQ,gBAAiBR,OAAQ,IAAK,KAC9BS,UAAWT,OAAQ,GAAI,KACvBU,SAAUV,OAAQ,IAAK,KACvBW,YAAcX,OAAQ,EAAE,KAEzBY,YACC/Z,OAAQ,KAAM,GACdga,OAAQ,IAAM,GACdC,QAAS,IAAK,GACdC,OAAQ,EAAG,IAEZj8B,OACCk8B,SAAS,EACTC,QAAQ,GA2DVrB,GAAOviC,UAAU6jC,OAAS,SAAStgB,EAAGE,GACrC,GAAI9W,SAeJ,OAdIgwB,GAAMmH,cAAcvgB,IACvBoZ,EAAMwF,QAAO,EAAM17B,KAAKyQ,MAAOqM,GAC/B5W,EAASlG,KAAKyQ,OACS,mBAANuM,GAEhB9W,EADgB,mBAAN4W,GACD9c,KAAKyQ,MAELzQ,KAAKyQ,MAAMqM,IAGrB9c,KAAKyQ,MAAMqM,GAAKE,EAChB9W,EAAS8W,GAGH9W,GAIR41B,EAAOviC,UAAUs/B,MAAQ,SAASx/B,GAC7BA,QACI2G,MAAKyQ,MAAMpX,GAElB2G,KAAKyQ,UAIPqrB,EAAOviC,UAAU6H,KAAO,WAEvB,MADApB,MAAKyQ,MAAQylB,EAAMwF,QAAO,KAAUK,EAAUT,IAAmBK,IAAqBF,KAC/Ez7B,KAAKyQ,MAGb,IAAM/P,GAAS,GAAIo7B,EACnB5jC,GAAOD,QAAUyI,EAAO08B,OAAOh9B,KAAKM,GACpCxI,EAAOD,QAAQmJ,KAAOV,EAAOU,KAAKhB,KAAKM,GACvCxI,EAAOD,QAAQ4gC,MAAQn4B,EAAOm4B,MAAMz4B,KAAKM,I9FuhLnC,SAASxI,EAAQD,EAASH,GAE/B,YAMA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G+FhqLxF,QAASuU,GAAGR,GACX,GAAMtL,GAAOrI,OAAOC,UAAUqU,SAASvV,KAAK4U,GAC3CosB,MAAM,sBAAsB,EAE7B,OAAe,QAAXpsB,EACI,OACc3R,SAAX2R,EACH,YAEAtL,EAWT,QAAS27B,GAAapmB,GACrB,MAAO,UAAShe,GACf,MAAOuU,GAAGvU,KAASge,GAWrB,QAASqmB,GAAerkC,EAAKskC,GAS5B,IARAA,EAAaA,IACb,QACA,SACA,SACA,WACA,WAGSA,EAAW/8B,QAAQ,CAC3B,GAAMyW,GAAYsmB,EAAWC,KAC7BvkC,QAASge,GAAeomB,EAAapmB,GAGtC,MAAOhe,GAgFR,QAASwiC,KAGR,GAAIn7B,UACAmG,SACAg3B,SACAC,SACAC,SACAzxB,EAAS3L,UAAU,OACnBC,EAASD,UAAUC,OACnBm0B,GAAO,EACP9wB,EAAI,CAmBR,IAhBsB,iBAAXqI,KACVyoB,EAAOzoB,EACPA,EAAS3L,UAAU,OAGnBsD,EAAI,GAKiB,YAAlB,mBAAOqI,GAAP,eAAA3I,cAAO2I,KAAwB+pB,EAAM/V,WAAWhU,KACnDA,MAKG1L,IAAWqD,EACd,MAAOqI,EAGR,MAAOrI,EAAIrD,EAAQqD,IAElB,GAAiC,QAA5BvD,EAAUC,UAAUsD,IAExB,IAAK,GAAIS,KAAQhE,GAAS,CAEzB,IAAIA,EAAQ/G,eAAe+K,GAC1B,MAEDmC,GAAMyF,EAAO5H,GACbm5B,EAAOn9B,EAAQgE,GAGX4H,IAAWuxB,IAKX9I,GAAQ8I,IAASxH,EAAMmH,cAAcK,IAASxH,EAAM5jB,QAAQorB,KAC/DC,EAAczH,EAAM5jB,QAAQorB,GACxBC,GACHA,GAAc,EACdC,EAAQl3B,GAAOwvB,EAAM5jB,QAAQ5L,GAAOA,MAEpCk3B,EAAQl3B,GAAOwvB,EAAM3oB,SAAS7G,GAAOA,KAItCyF,EAAO5H,GAAQm3B,EAAO9G,EAAMgJ,EAAOF,IAGhBpiC,SAAToiC,IACVvxB,EAAO5H,GAAQm5B,IAOnB,MAAOvxB,G/Fo9KP,GAAI5I,GAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,G+FzqLjCs6B,EAAMvkC,OAAOC,UAAUC,eAEvB08B,EAAQh+B,EAAOD,OAgErBC,GAAOD,QAAQ6lC,SAAW,SAAS5kC,GAClC,MAAOA,IAAe,OAARA,GAAgBA,IAAQP,QAUvCT,EAAOD,QAAQolC,cAAgB,SAASnkC,GACvC,GAAM2kC,GAAMvkC,OAAOC,UAAUC,cAK7B,KAAKN,IAAQg9B,EAAM3oB,SAASrU,IAAQA,EAAI6kC,UAAY7H,EAAM4H,SAAS5kC,GAClE,OAAO,CAGR,KAEC,GAAIA,EAAI8N,cAAgB62B,EAAIxlC,KAAKa,EAAK,iBAAmB2kC,EAAIxlC,KAAKa,EAAI8N,YAAYzN,UAAW,iBAC5F,OAAO,EAEP,MAAO+T,GAGR,OAAO,EAKR,GAAIjU,SACJ,KAAKA,IAAOH,IAEZ,MAAeoC,UAARjC,GAAqBwkC,EAAIxlC,KAAKa,EAAKG,IAQ3CnB,EAAOD,QAAQ+lC,iBAAmB,SAASrX,GAC1C,MAAOuP,GAAMhP,SAASP,MAAUA,EAAIlmB,QAGrCvI,EAAOD,QAAQgmC,UAAY,SAASla,GACnC,MAAOA,IAAgC,IAArBA,EAAQga,UAAkBha,EAAQma,UAAW,GAQhEhmC,EAAOD,QAAQkmC,UAAY,SAASjR,GACnC,OAAQvkB,MAAMy1B,WAAWlR,KAASmR,SAASnR,IAW5Ch1B,EAAOD,QAAQyjC,OAASA,EAuFxBxjC,EAAOD,QAAQqmC,KAAO,SAAS3X,EAAK4X,EAAWC,GAC9C,GAAIC,UACA7kC,SACE0kC,IACN,IAAI3X,GAAOA,EAAI9W,MAAO,CACrB8W,EAAMA,EAAI9W,MAAM0uB,EAEhB,KAAK,GAAIG,GAAM,EAAGv2B,EAAIwe,EAAIlmB,OAAQi+B,EAAMv2B,EAAGu2B,GAAO,EACjD9kC,EAAQ+sB,EAAI+X,GACZD,EAAO7kC,EAAMiW,MAAM2uB,GACfC,EAAKh+B,OAAS,IACjB69B,EAAKG,EAAK,GAAGE,QAAUF,EAAKn2B,MAAM,GAAG4V,KAAKsgB,IAK7C,MAAOF,IAaRpmC,EAAOD,QAAQ2mC,OAAS,SAASC,EAAWC,EAAO/4B,EAAUg5B,EAASC,GAKrE,QAASC,GAAgBl5B,GAEnBm5B,IACJn5B,EAAS1N,OACT6mC,GAAS,EAENF,GACFluB,EAAImT,cAAc9E,YAAYrO,IAXjC,GAAMA,GAAMzO,SAASqL,cAAc,UAC7ByxB,EAAO98B,SAASovB,qBAAqB,UAAU,GACjDyN,GAAS,CA4Cb,OA9BApuB,GAAImM,aAAa,MAAO4hB,GACxB/tB,EAAImM,aAAa,QAAS,IAEtB6hB,IACHhuB,EAAIguB,MAAQ,QAGT5I,EAAM/V,WAAWpa,KAEhB83B,EAAIxlC,KAAKyY,EAAK,sBACjBA,EAAIxN,mBAAqB,WACD,WAAnBwN,EAAI5N,YACP+7B,EAAgBl5B,IAIlB+K,EAAIob,OAAS,WACZ+S,EAAgBl5B,KAMfmwB,EAAM/V,WAAW4e,KACpBjuB,EAAIqb,QAAU,WACb8S,EAAgBF,KAIlBI,EAAKvhB,WAAWwhB,aAAatuB,EAAKquB,GAC3BruB,GAQR5Y,EAAOD,QAAQonC,sBAAwB,SAAS/5B,GAE/C,IAAK,GADCksB,GAAUnvB,SAASovB,qBAAqB,UACrC3tB,EAAI0tB,EAAQ/wB,OAAQqD,KAC5B,GAAI0tB,EAAQ1tB,GAAG4C,MAAQpB,EAAK,OAAO,CAGpC,QAAO,GAWRpN,EAAOD,QAAQqnC,kBAAoB,SAASh6B,EAAK4uB,EAAQnuB,EAAUg5B,EAAS9mB,GAC3E,GAAIsnB,GAAM,GAAI7f,eA4Bd,OA1BI,mBAAqB6f,IACxBA,EAAIvwB,KAAKklB,EAAQ5uB,GAAK,GACtBi6B,EAAIC,aAAe,QACiB,mBAAnBC,iBACjBF,EAAM,GAAIE,gBACVF,EAAIvwB,KAAKklB,EAAQ5uB,GAAK,KAEtBi6B,EAAM,KACNR,KAIsB,gBAAZ9mB,KACTsnB,EAAItnB,QAAUA,GAGhBsnB,EAAIrT,OAAS,SAASwT,GACrB35B,EAAS1N,KAAK2H,KAAMA,KAAKi6B,UAAYj6B,KAAKiwB,aAAcyP,IAGrDxJ,EAAM/V,WAAW4e,KACpBQ,EAAIpT,QAAU4S,EACdQ,EAAII,UAAYZ,GAGjBQ,EAAIpW,OACGoW,GASRrnC,EAAOD,QAAQ2nC,YAAc,WAC5B,MAAOv9B,UAAS2nB,UAAY,IAQ7B9xB,EAAOD,QAAQ4nC,WAAa,SAAS/lB,GACpC,MAAOA,GAAOrC,QAAQ,WAAY,SAAS4hB,EAAOyG,GACjD,MAAOA,GAAO3Z,iBAShBjuB,EAAOD,QAAQ8nC,YAAc,SAASjmB;AACrC,MAAOA,GAAOrC,QAAQ,cAAe,SAAS4hB,EAAO2G,EAAQF,GAC5D,MAAOA,GAAO3Z,iBAShBjuB,EAAOD,QAAQgoC,UAAY,SAASnmB,GACnC,MAAOA,GAAOrC,QAAQ,WAAY,SAAS4hB,EAAOyG,GACjD,UAAWA,EAAOlc,iBASpB1rB,EAAOD,QAAQioC,mBAAqB,SAASC,GAC5C,GAAM57B,GAAO2xB,EAAMhP,SAASiZ,GAAaA,EAAYA,EAAU57B,IAC/D,OAAO2xB,GAAM6J,YAAYx7B,EAAKkT,QAAQ,iBAAkB,MASzDvf,EAAOD,QAAQmoC,YAAc,WAC5B,MAAO/9B,UAASwjB,SAASC,MAAQ,IASlC5tB,EAAOD,QAAQooC,eAAiB,WAC/B,MAAOh+B,UAASwjB,SAASya,OAAOpP,UAAU,IAAM,IAOjDh5B,EAAOD,QAAQsoC,aAAe,WAC7B,GAAM3W,GAAM,GAAIvL,KAChB,QACAuL,EAAI4W,eACJ,KAAM5W,EAAI6W,WAAa,IAAMn4B,WAC7B,IAAKshB,EAAI8W,WAAap4B,WACtB,IAAKshB,EAAI+W,YAAcr4B,WACvB,IAAKshB,EAAIgX,cAAgBt4B,WACzB,IAAKshB,EAAIiX,cAAgBv4B,WACvB4V,KAAK,IAIR,IAAM4iB,GAAUz+B,SAASovB,qBAAqB,SAS9Cv5B,GAAOD,QAAQ8oC,iBAAmB,SAASC,GAM1C,IALA,GAAIC,UACA9B,SACAr7B,EAAIg9B,EAAQrgC,OAGTqD,KAEN,GAAIg9B,EAAQh9B,GAAGiL,gBAAkBiyB,EAAc,CAC9C7B,EAAO2B,EAAQh9B,EACf,OAIF,GAAIq7B,EAEH,KAAOA,EAAKvhB,YAAY,CAGvB,GAFAqjB,EAAW9B,EAAK76B,aAAa,mBAG5B,MAAO28B,EAGR9B,GAAOA,EAAKvhB,WAId,OAAO,GAGR1lB,EAAOD,QAAQoiC,qBAAuB,SAA8B6G,GACnE,MAAOA,GAAaz8B,OAAO,SAAC08B,EAAMtoB,GAEjC,MADAsoB,GAAKtoB,EAAKxf,KAAOwf,EAAKjf,MACfunC,QAITzF,EAAOxjC,EAAOD,QAASH,EAAQ,KAC/B4jC,EAAOxjC,EAAOD,QAASH,EAAQ,KAC/B4jC,EAAOxjC,EAAOD,QAASH,EAAQ,KAC/BI,EAAOD,QAAQ6kC,WAAahlC,EAAQ,IACpCI,EAAOD,QAAQmpC,OAAStpC,EAAQ,OAChCI,EAAOD,QAAQopC,MAAQvpC,EAAQ,KAC/BI,EAAOD,QAAQwN,IAAM3N,EAAQ,KAC7BylC,EAAerlC,EAAOD,U/FwqLhB,SAASC,EAAQD,EAASH,GAE/B,YgGvpMD,SAASwpC,GAAIp5B,GACZ,MAAOA,GAGR,QAASq5B,GAAQr5B,GAChB,MAAOs5B,oBAAmBt5B,EAAEuP,QAAQgqB,EAAQ,MA4E7C,QAASC,GAAUn9B,EAAMo9B,GACxB,GAAI3Q,UAEEgL,GACL4F,KAAQ,aACRC,KAAQ,mBACRC,YAAe,cACfC,QAAW,cACXC,KAAQ,cAGT,QAAQhG,EAAQz3B,IAChB,IAAK,aACJysB,MAAS2Q,EAAT,UACA,MACD,KAAK,mBACJ3Q,MAAS2Q,EAAT,WACA,MACD,KAAK,cACJ3Q,MAAS2Q,EAAT,UACA,MACD,KAAK,cACJ3Q,EAAQ2Q,EAAR,UACA,MACD,SACC3Q,EAAK,YAGN,MAAO,IAAIva,QAAOua,GAjHnB,GAAMkF,GAAQp+B,EAAQ,IAChB2pC,EAAS,MACTQ,EAAQ,GAAI5jB,MAiBZ3d,EAASxI,EAAOD,QAAQqK,OAAS,SAASjJ,EAAKO,EAAO2G,GAE3D,GAAcjF,SAAV1B,EAAqB,CAOxB,GANA2G,EAAU21B,EAAMwF,UAAWh7B,EAAOq7B,SAAUx7B,GAE9B,OAAV3G,IACH2G,EAAQ2hC,YAGsB,gBAApB3hC,GAAQ2hC,QAAsB,CACxC,GAAMC,GAAO5hC,EAAQ2hC,QACfljB,EAAIze,EAAQ2hC,QAAU,GAAI7jB,KAChCW,GAAEojB,QAAQpjB,EAAE0hB,UAAYyB,GAWzB,MARAvoC,GAAQ8G,EAAOi6B,KAAOj1B,KAAKC,UAAU/L,GAASuN,OAAOvN,GACrDA,EAAQ8G,EAAO4gC,IAAM1nC,EAAQ8zB,mBAAmB9zB,GAC1C2G,EAAQ2hC,SAAY3hC,EAAQ2hC,QAAQr0B,UAAYo0B,EAAMp0B,UAAa,QACjEqoB,GAAMmM,QAAQ3U,mBAAmBr0B,IAExC68B,EAAMmM,QAAQ3U,mBAAmBr0B,IAAQO,EAGlCyI,SAASC,QACjBorB,mBAAmBr0B,GAAM,IAAKO,EAC9B2G,EAAQ2hC,QAAR,aAA+B3hC,EAAQ2hC,QAAQI,cAAkB,GACjE/hC,EAAQujB,KAAR,UAAyBvjB,EAAQujB,KAAS,GAC1CvjB,EAAQ6vB,OAAR,YAA6B7vB,EAAQ6vB,OAAW,GAChD7vB,EAAQgiC,OAAR,WAA8B,IAC5BrkB,KAAK,IAIR,GAAMskB,GAAS9hC,EAAO4gC,IAAMA,EAAMC,EAC5Bj/B,EAAS4zB,EAAMmM,QAAQ3U,mBAAmBr0B,GAChD,OAAMiJ,IAAqB,KAAXA,EACR5B,EAAOi6B,KAAOj1B,KAAK8e,MAAMge,EAAOlgC,IAAWkgC,EAAOlgC,GAGnD,KAGR5B,GAAOq7B,YAQP7jC,EAAOD,QAAQwqC,aAAe,SAASppC,EAAKkH,GAC3C,MAAmC,QAA/BrI,EAAOD,QAAQqK,OAAOjJ,KACzBnB,EAAOD,QAAQqK,OAAOjJ,EAAK,KAAMkH,IAC1B,IAmDTrI,EAAOD,QAAQyqC,eAAiB,SAASn+B,EAAMo9B,GAC9C,GAAIgB,UAEEC,EAAa1qC,EAAOD,QAAQqK,OAAOiC,IAAS,EAMlD,OAJIo9B,KACHgB,EAAUC,EAAWvJ,MAAMqI,EAAUn9B,EAAMo9B,KAGpCgB,GAAWA,EAAQliC,OAAUkiC,EAAQ,GAAKrnC,QAQnDpD,EAAOD,QAAQoqC,QAAUnM,EAAMoI,KAAKj8B,SAASC,OAAQ,IAAK,MhGmqMpD,SAASpK,EAAQD,GAEtB,YiG1yMD,SAAS2gB,GAAUrU,EAAMsU,EAAM1M,GAE9BA,EAASA,GAAU9J,SAAS2W,MAAQ3W,SAAS6B,gBAC7CK,UAAeA,CACf,IAAMgB,IACLuT,SAAS,EACTI,YAAY,EACZC,OAAQN,EAET1M,GAAOhJ,cAAc,GAAIC,aAAYmB,EAAMgB,IAW5C,QAASq1B,GAAGr2B,EAAMwB,EAAUoG,GAC3B5H,UAAeA,EAEf4H,EAASA,GAAU9J,SAAS2W,MAAQ3W,SAAS6B,gBAC7CiI,EAAO9I,iBAAiBkB,EAAMwB,GAU/B,QAAS88B,GAAKt+B,EAAMwB,EAAUoG,GAC7B,GAAM+hB,GAAU,SAASjV,GAExB,GAAM6pB,GAAO7pB,EAAM9M,QAAU8M,EAAM+K,UACnC8e,GAAKjmB,oBAAoBtY,UAAeA,EAAQwB,GAC5CA,IACHA,EAASkT,GAGTlT,EAAW,MAGb60B,GAAGr2B,EAAM2pB,EAAS/hB,GA/CnBjU,EAAOD,QAAQ2gB,UAAYA,EAoB3B1gB,EAAOD,QAAQ2iC,GAAKA,EAcpB1iC,EAAOD,QAAQ4qC,KAAOA,GjG40MhB,SAAS3qC,EAAQD,GAEtB,YkGv3MDC,GAAOD,QAAQ8qC,WACdC,KAAM,SAAS/f,EAAS5X,GACvB4X,EAA8B,gBAAZA,GAAwBA,EAAUvd,KAAKC,UAAUsd,GACnE5X,EAAS7K,UAAU,IAAM7H,OAAOsqC,IAChC53B,EAAO63B,YAAYjgB,EAAS,MAE7BuB,MAAO,SAASvB,GAGf,GAAuB,gBAAZA,IAAuC,MAAfA,EAAQ,GAC1C,MAAOA,EAIR,KACC,MAAOvd,MAAK8e,MAAMvB,GAGnB,MAAM3V,GACL,MAAO2V,OlGs4MJ,SAAS/qB,EAAQD,EAASH,GAE/B,YmG35MD,SAASqrC,KAGR,QAASC,GAAsBC,GAC9B,GAAMC,GAAiBC,EAAYF,EAC/BG,GAAKhmB,OAAS8lB,EAAe,IAAME,EAAKC,QAAUH,EAAe,MAC/DI,GAAUJ,EAAe,IAAMC,EAAYG,GAAQ,MACvDA,EAASL,GANZ,GAAIK,UACEF,EAAOG,EAAUC,SAAQ,EAY/B,OAFAtqC,QAAOiQ,KAAKg6B,GAAa7gB,QAAQ0gB,GAE1BM,EAGR,QAASG,KACR,GAAMH,GAASP,GAEXW,KAAYJ,IACfK,EAAWL,GACX39B,EAAS29B,IAIX,QAASK,GAAWx/B,GACnBu/B,EAAUv/B,EAGX,QAASy/B,KACR,MAAOF,GAGR,QAAS1iC,GAAK6iC,EAAMtjC,GAEnB,QAAKu1B,EAAM/V,WAAWxf,KAKtB4iC,EAAcU,EACdl+B,EAAWpF,EAEXojC,EAAWZ,KACX9gC,SAAS2W,KAAK3V,iBAAiB,wBAAyBwgC,GACxDxhC,SAAS2W,KAAK3V,iBAAiB,mBAAoBwgC,GACnDF,EAAUO,SAAS,eACnBP,EAAUO,SAAS,UAEZF,KAxDR,GAAIj+B,UACAw9B,SACAO,SACE5N,EAAQp+B,EAAQ,IAChB6rC,EAAY7rC,EAAQ,GAuD1BI,GAAOD,QAAUmJ,EACjBlJ,EAAOD,QAAQ+rC,WAAaA,EAC5B9rC,EAAOD,QAAQksC,oBAAsBR,EAAUQ,qBnGu6MzC,SAASjsC,EAAQD,EAASH,GoGp+MhCI,EAAAD,QAAAH,EAAA,MpG0+MM,SAASI,EAAQD,EAASH,GAE/B,YqG/9MD,SAASqsC,GAAoBne,EAAWoe,GACX,gBAAjB5jC,WAAU,IACpB2jC,EAAoB,SAAU3jC,UAAU,IACxC2jC,EAAoB,SAAU3jC,UAAU,IACxC2jC,EAAoB,cAAe3jC,UAAU,IAC7C2jC,EAAoB,aAAc3jC,UAAU,KAClC4jC,IACVC,EAAUre,GAAaoe,GAIzB,QAASE,KACR,IAAIC,EAAUC,OAAd,CAGA,GAAMxe,GAAY,SACZkI,EAAUpW,EAAS,SAASuL,GACjC6S,EAAMtd,UAAU,UACf6rB,SAAUvO,EAAM0N,UAChBc,cAAerhB,KAEdghB,EAAUG,OAGb7rC,QAAO0K,iBAAiB2iB,EAAWkI,GACnCqW,EAAUC,QACTxe,UAAWA,EACXkI,QAASA,IAIX,QAASyW,KAER,IAAIJ,EAAUK,YAAd,CAIA,GAAM5e,GAAY,oBACZkI,EAAUpW,EAAS,SAASuL,GACjC6S,EAAMtd,UAAU,eACf6rB,SAAUvO,EAAM0N,UAChBgB,YAAa1O,EAAM2O,iBACnBH,cAAerhB,KAEdghB,EAAUO,YAEbjsC,QAAO0K,iBAAiB2iB,EAAWkI,GACnCqW,EAAUK,aACT5e,UAAWA,EACXkI,QAASA,IAIX,QAAS4W,KAER,IAAIP,EAAUQ,WAAd,CAIA,GAAM/e,GAAYkQ,EAAM8O,qBAAqBhf,UACvCkI,EAAUpW,EAAS,SAASuL,GACjC6S,EAAMtd,UAAU,cACfwG,OAAQ8W,EAAM+O,gBACdP,cAAerhB,KAEdghB,EAAUU,WAEbpsC,QAAO0K,iBAAiB2iB,EAAWkI,GAEnCqW,EAAUQ,YACT/e,UAAWA,EACXkI,QAASA,IAIX,QAASgX,KAER,IAAIX,EAAUY,OAAd,CAIA,GAAMnf,GAAY,SACZkI,EAAU9V,EAAS,SAASiL,GACjC,GAAM+hB,GAAYlP,EAAMmP,mBACxBnP,GAAMtd,UAAU,UACf6rB,SAAUvO,EAAM0N,UAChB0B,aAAcF,EAAU3B,OACxBhmB,WAAY2nB,EAAUG,KACtBC,UAAWJ,EAAUnC,IACrBvlB,YAAa0nB,EAAU5nB,MACvBknB,cAAerhB,KAEdghB,EAAUc,OAEbxsC,QAAO0K,iBAAiB2iB,EAAWkI,GACnCqW,EAAUY,QACTnf,UAAWA,EACXkI,QAASA,IAIX,QAASgW,GAASle,GACC,WAAdA,GAAwC,QAAdA,GAC7Bse,IAGiB,WAAdte,GAAwC,QAAdA,GAC7Bkf,IAGiB,gBAAdlf,GAA6C,QAAdA,GAClC2e,IAGiB,eAAd3e,GAA4C,QAAdA,GACjC8e,IAIF,QAASW,GAAgBzf,GACN,QAAdA,EACH1sB,OAAOiQ,KAAKg7B,GAAW7hB,QAAQ+iB,GACrBlB,EAAUve,KACpBrtB,OAAOkkB,oBAAoB0nB,EAAUve,GAAWA,UAAWue,EAAUve,GAAWkI,eACzEqW,GAAUve,IAxInB,GAAMkQ,GAAQp+B,EAAQ,KAChBsgB,EAAW8d,EAAM9d,SACjBN,EAAWoe,EAAMpe,SAEjBysB,KACAF,GACLG,OAAQ,IACRI,YAAa,IACbG,WAAY,IACZI,OAAQ,IAmITjtC,GAAOD,SACNktB,MAAO,WAEN+Q,EAAM/Q,SAEP+e,SAAUA,EACVuB,gBAAiBA,EACjBtB,oBAAqBA,EACrBU,eAAgB3O,EAAM2O,eACtBjB,QAAS1N,EAAM0N,QACfyB,kBAAmBnP,EAAMmP,oBrGk/MpB,SAASntC,EAAQD,GAEtB,YsGvoND,SAAS2gB,GAAUoN,EAAWnN,EAAM1M,GACnCA,EAASA,GAAU9J,SAAS2W,KAExBmM,GACHvhB,QAAQ6B,IAAI,aAAcugB,EAAWnN,GAGtC1M,EAAOhJ,cAAc,GAAIC,aAAY,aAAe4iB,GACnD7M,OAAQN,EACRC,SAAS,KAIX,QAAS4sB,GAAUC,GAClB,MAAOA,GAAmBtjC,SAAS6B,gBAAgB0hC,aAAep9B,KAAK6H,IAAIhO,SAAS6B,gBAAgB0hC,aAAcjtC,OAAOktC,aAAe,GAGzI,QAASC,GAASH,GACjB,MAAOA,GAAmBtjC,SAAS6B,gBAAgB6hC,YAAcv9B,KAAK6H,IAAIhO,SAAS6B,gBAAgB6hC,YAAaptC,OAAOqtC,YAAc,GAGtI,QAASpC,GAAQ+B,GAChB,OACClC,OAAQvrC,EAAOD,QAAQytC,UAAUC,GACjCnoB,MAAOtlB,EAAOD,QAAQ6tC,SAASH,IAIjC,QAASN,KACR,GAAMY,GAAK5jC,SAAS6B,gBACdgiC,EAAK7jC,SAAS2W,KAGdmtB,EAAgD,gBAA/B9jC,SAAS+jC,YAAc,IAExCC,EAAMF,EAAeF,EAAGxoB,WAAayoB,EAAGzoB,WACxC6oB,EAAMH,EAAeF,EAAGT,UAAYU,EAAGV,SAC7C,QACC/B,OAAQyC,EAAGZ,aACX9nB,MAAO0oB,EAAGxoB,YACV6nB,KAAM5sC,OAAO4tC,aAAe5tC,OAAO6tC,SAAWH,EAC9CpD,IAAKtqC,OAAO8tC,aAAe9tC,OAAO+tC,SAAWJ,GAI/C,QAASzB,KACR,GAAMD,GAAcjsC,OAAOguC,OAAO/B,aAAejsC,OAAOguC,OAAOC,gBAAkBjuC,OAAOguC,OAAOE,eAAiBvrC,MAChH,OAAIspC,GAC2B,gBAAhBA,GACbA,EAAY/0B,MAAM,KAAK,GACvB+0B,EAAYjjC,KAAKkO,MAAM,KAAK,GACnBlX,OAAOmuC,WACVnuC,OAAOmuC,WAAW,2BAA2BnE,QAAU,WAAa,YAEpE+C,KAAeI,IAAa,WAAa,YAIlD,QAASd,KACR,GAAI+B,UACA/gB,QAeJ,OAd+B,mBAApB3jB,UAAS+c,QACnB2nB,EAAa,SACb/gB,EAAY,oBAC4B,mBAAvB3jB,UAAS2kC,WAC1BD,EAAa,YACb/gB,EAAY,uBAC2B,mBAAtB3jB,UAAS4kC,UAC1BF,EAAa,WACb/gB,EAAY,sBAC+B,mBAA1B3jB,UAAS6kC,eAC1BH,EAAa,eACb/gB,EAAY,2BAIZ+gB,WAAYA,EACZ/gB,UAAWA,GAIb,QAASif,KACR,GAAM8B,GAAa/B,IAAqB+B,UACxC,OAAO1kC,UAAS0kC,GAGjB,QAASjvB,GAAUC,EAAMC,GACxB,GAAIC,SACJ,OAAO,YAAY,GAAArX,GAAAZ,KACZsV,EAAO9U,UACP0X,EAAQ,WACbD,EAAU,KACVF,EAAK1L,MAALzL,EAAiB0U,GAElB6C,cAAaF,GACbA,EAAUlf,WAAWmf,EAAOF,IAI9B,QAASI,GAAUL,EAAMC,GACxB,GAAIC,SACJ,OAAO,YAAY,GAAAI,GAAArY,IAClB,KAAIiY,EAAJ,CAGA,GAAM3C,GAAO9U,UACP0X,EAAQ,WACbD,EAAU,KACVF,EAAK1L,MAALgM,EAAiB/C,GAGlB2C,GAAUlf,WAAWmf,EAAOF,KAjH9B,GAAImN,SAqHJjtB,GAAOD,SACNktB,MAAO,WACNA,GAAQ,GAETvM,UAAWA,EACXktB,SAAUA,EACVJ,UAAWA,EACX9B,QAASA,EACTyB,kBAAmBA,EACnBJ,cAAeA,EACfJ,eAAgBA,EAChBG,mBAAoBA,EACpB5sB,SAAUA,EACVN,SAAUA,ItGopNL,SAAS5f,EAAQD,GAEtB,YuGzxND,SAAS2xB,KACR,OAAQ,GAAIvL,OAAQxQ,UAGrB,QAASs5B,GAAM/C,EAAUt3B,EAAIs6B,EAAU7hC,GAOtC,MANAvF,MAAKokC,SAAyC,KAA7BhG,WAAWgG,IAAa,GACzCpkC,KAAKonC,SAAWtoB,SAASsoB,EAAU,KAAO,EAC1CpnC,KAAK8M,GAAKA,EACV9M,KAAKqnC,MAAQ,EACbrnC,KAAKuF,KAAOA,MACZvF,KAAK0wB,QACE1wB,KAyER,QAASsnC,KAQR,QAAS/vB,GAAI2c,GACZ,MAAO,YAGN,IAAK,GAFC3M,GAAIggB,EAAMnG,OAAO3gC,OAEdqD,EAAI,EAAGA,EAAIyjB,EAAGzjB,IACtByjC,EAAMnG,OAAOt9B,GAAGowB,MAKnB,QAASsT,GAAmB16B,GAC3B,MAAO,YACN,GAAMq6B,GAAQnnC,KACRynC,EAAO7d,IAAQud,EAAMO,SAAWP,EAAM/C,SACtCuD,EAA6B,IAAjBR,EAAM/C,QAEpBuD,GAAYF,GACdN,EAAMS,QAGR96B,EAAGT,MAAM86B,IAIX,QAASl5B,GAAOm2B,EAAUt3B,EAAIs6B,EAAU7hC,GAClCA,GAAQA,EAAKqiC,QACjB96B,EAAK06B,EAAmB16B,GAGzB,IAAM+6B,GAAQ,GAAIV,GAAM/C,EAAUt3B,EAAIs6B,EAAU7hC,EAEhD,OADAgiC,GAAMnG,OAAO3/B,KAAKomC,GACXA,EAtCR,KAAM7nC,eAAgBsnC,IACrB,MAAO,IAAIA,EAGZ,IAAMC,GAAQvnC,IAqCd,OApCAA,MAAKohC,WAqCJnzB,OAAQA,EACR65B,UAAWvwB,EAAI,UACfwwB,SAAUxwB,EAAI,SACdywB,QAASzwB,EAAI,SApHf4vB,EAAM5tC,UAAU0uC,KAAO,WACtB,GAAMd,GAAQnnC,IACd,OAAO,YACNmnC,EAAME,QACNF,EAAMr6B,GAAGT,MAAM86B,GACfA,EAAMO,SAAW9d,IAEbud,EAAME,QAAUF,EAAMC,UACzBD,EAAMnM,SAKTmM,EAAM5tC,UAAUm3B,MAAQ,WAGvB,MAFA1wB,MAAKwqB,UAAYxqB,KAAK0nC,SAAW9d,IACjC5pB,KAAK7H,GAAK+vC,YAAYloC,KAAKioC,OAAQjoC,KAAKokC,WACjC,GAGR+C,EAAM5tC,UAAU4uC,OAAS,WACxB,QAAInoC,KAAKooC,WACRpoC,KAAK7H,GAAK+vC,YAAYloC,KAAKioC,OAAQjoC,KAAKooC,gBACjCpoC,MAAKooC,UACL,IAMTjB,EAAM5tC,UAAU8uC,MAAQ,WACvB,QAAIroC,KAAK7H,KACR6H,KAAKooC,SAAYpoC,KAAKokC,UAAaxa,IAAQ5pB,KAAK0nC,UAChD1nC,KAAKsoC,QACE,IAMTnB,EAAM5tC,UAAUquC,MAAQ,WACvB,QAAM5nC,KAAKwqB,YACVxqB,KAAKwqB,UAAYZ,IACjB5pB,KAAKqnC,MAAQ,GACN,IAMTF,EAAM5tC,UAAU+uC,KAAO,WACtB,QAAItoC,KAAK7H,KACRowC,cAAcvoC,KAAK7H,UACZ6H,MAAK7H,IACL,IAMTgvC,EAAM5tC,UAAUyhC,KAAO,WACtB,SAAIh7B,KAAK7H,KAAM6H,KAAKooC,YACnBpoC,KAAKqnC,MAAQ,EACbrnC,KAAKsoC,aACEtoC,MAAKooC,UACL,IAwDTlwC,EAAOD,QAAUqvC,GvG+xNX,SAASpvC,EAAQD,GAEtB,YwGv6ND,SAASuwC,GAAMC,GACd,MAAMzoC,gBAAgBwoC,IAItBxoC,KAAK0oC,SACL1oC,KAAK2oC,WAAY,OACjB3oC,KAAKyoC,UAAYA,GAAa,eALtB,GAAID,GAAMC,GAQnBD,EAAMjvC,UAAUqvC,aAAe,SAASH,GAEvC,MADAzoC,MAAKyoC,UAAYA,EACVzoC,MAGRwoC,EAAMjvC,UAAUsvC,QAAU,WAAW,GAAAjoC,GAAAZ,IAMpC,OALAA,MAAK2oC,WAAY,EACjB3oC,KAAK0oC,MAAMhmB,QAAQ,SAAAkQ,GAClBhyB,EAAK6nC,UAAU7V,KAGT5yB,MAGRwoC,EAAMjvC,UAAU+M,IAAM,SAASssB,GAO9B,MANI5yB,MAAK2oC,aAAc,EACtB3oC,KAAKyoC,UAAU7V,GAEf5yB,KAAK0oC,MAAMjnC,KAAKmxB,GAGV5yB,MAGR9H,EAAOD,QAAUuwC,GxG+6NX,SAAStwC,EAAQD,EAASH,GAE/B,YyGn8ND,SAAS2N,KACR,GAAI9D,UACA2T,SACAwzB,QACA,uBAAsBjlB,QAAQrjB,UAAU,UAC3CmB,EAAO,MACPmnC,EAAY,IAEZnnC,EAAOnB,UAAU,GACjBsoC,EAAY,GAGbxzB,KAAUhN,MAAMjQ,KAAKmI,UAAWsoC,GAE5BrjC,EAAIsjC,KAAKpnC,IACZhJ,OAAOiL,QAAQjC,GAAM0K,MAAM1T,OAAOiL,QAAS0R,GAvB7Cpd,EAAOD,QAAUwN,EA+BjBvN,EAAOD,QAAQ8wC,KAAO,SAASpnC,GAE9B,GAAMwjB,GAAQgW,aAAaC,QAAQ,SAAWvV,SAASya,OAAOzc,QAAQ,kBACtE,OAAOsB,IAASxsB,OAAOiL,SAAWjL,OAAOiL,QAAQjC,IAMlDzJ,EAAOD,QAAQkrB,KAAO,WACrB,GAAM7N,IAAQ,QAAQ1E,UAAUtI,MAAMjQ,KAAKmI,UAAW,GACtDiF,GAAI4G,MAAM,KAAMiJ,IAMjBpd,EAAOD,QAAQuO,MAAQ,WACtB,GAAM8O,IAAQ,SAAS1E,UAAUtI,MAAMjQ,KAAKmI,UAAW,GACvDiF,GAAI4G,MAAM,KAAMiJ,IAMjBpd,EAAOD,QAAQqrB,KAAO,WACrB,GAAMhO,IAAQ,QAAQ1E,UAAUtI,MAAMjQ,KAAKmI,UAAW,GACtDiF,GAAI4G,MAAM,KAAMiJ,IAOjBpd,EAAOD,QAAQy4B,MAAQ,SAASsY,GAC1BvjC,EAAIsjC,KAAK,mBAIdpwC,OAAOiL,QAAQqlC,eAAeD,GAAS,UAMxC9wC,EAAOD,QAAQ04B,IAAM,WACflrB,EAAIsjC,KAAK,aAIdpwC,OAAOiL,QAAQslC,YAGhBhxC,EAAOD,QAAQkxC,MAAQ,SAAStwB,EAAMuwB,GACjC3jC,EAAIsjC,KAAK,QAAUpwC,OAAOiL,UAC1BA,QAAQulC,MACVvlC,QAAQulC,MAAMtwB,EAAMuwB,GAEpBxlC,QAAQ6B,IAAIoT,KAKf3gB,EAAOD,QAAQoxC,eAAiB,SAASp8B,EAAQm8B,GAChD,GAAMlT,GAAQp+B,EAAQ,GACtB,IAAI2N,EAAIsjC,KAAK,QAAUpwC,OAAOiL,QAC7B,GAAIqJ,GAAUrJ,QAAQulC,MAAO,CAC5B,GAAMtwB,GAAOvf,OAAOiQ,KAAK0D,GAAQ4J,IAAI,SAAC+b,GACrC,GAAIjlB,SAMJ,OAJCA,GADGuoB,EAAM5jB,QAAQrF,EAAO2lB,KAAUsD,EAAM3oB,SAASN,EAAO2lB,IAClDltB,KAAKC,UAAUsH,EAAO2lB,IAEtB3lB,EAAO2lB,IAGbv5B,IAAKu5B,EACLh5B,MAAO+T,IAGT/J,SAAQulC,MAAMtwB,EAAMuwB,OAEpBxlC,SAAQ6B,IAAIwH,KzG69NT,SAAS/U,EAAQD,EAASH,GAE/B,YAMA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G0GllOxF,QAASowC,MAGT,QAASC,GAAoB95B,EAAOykB,EAAQnuB,GAC3C,GAAIywB,KAgBJ,OAfA/mB,GAAQA,GAASnW,OAAOiQ,KAAKvJ,MAGzBk2B,EAAM8H,iBAAiBvuB,GAC1B+mB,EAAM/0B,KAAKgO,GACDymB,EAAM5jB,QAAQ7C,KACxB+mB,EAAQ/mB,GAGT+mB,EAAM9T,QAAQ8mB,EAAIppC,KAAK,KAAMJ,KAAMk0B,IAEhCgC,EAAM/V,WAAWpa,IAClBA,EAAS1N,KAAK2H,KAAMw2B,GAGfx2B,KAQR,QAASwpC,GAAIhT,EAAO7d,EAAQpU,GAC3B,GAAMmyB,GAAOF,EAAMjyB,EACfmyB,GACCR,EAAM/V,WAAWuW,EAAK/d,IACzB+d,EAAK/d,KAEFud,EAAM/V,WAAWuW,EAAKmN,MACxBnN,EAAKmN,KAAKlrB,GAEVud,EAAMzwB,IAAI0d,KAAK,mCAAoCxK,EAAQpU,GAI7D2xB,EAAMzwB,IAAI0d,KAAK,uCAAwCxK,EAAQpU,GAIjE,QAASklC,GAAiBC,GACzB,IAAIA,EACH,OAAO,CAER,IAAM1N,GAAUt7B,EAAO,UACvB,KAAI,GAAIipC,KAAQ3N,GAEf,GAAGA,EAAQxiC,eAAemwC,GAAO,CAEhC,GAAIzN,GAAQF,EAAQ2N,GAAMzN,KAC1BA,GAAQhG,EAAM5jB,QAAQ4pB,EAAM,IAAMA,GAASA,EAC3C,IAAM7C,GAAQ6C,EAAMjB,OAAO,SAAS/yB,GACnC,MAAQA,GAAE,KAAO4W,SAAS4qB,EAAK,KAAOxhC,EAAE,KAAO4W,SAAS4qB,EAAK,KAE9D,IAAGrQ,EAAM54B,OACR,MAAOkpC,IAwIX,QAASC,GAAmBpT,EAAOqT,GAClCrT,EAAM9T,QAAQ,SAASgU,GAEtB,GAAIA,EAAM,CAGT,GAAMoT,GAAwBpT,EAAKC,WAAkE,eAArDD,EAAKC,UAAUryB,aAAa,qBACtEylC,EAAuBrT,EAAKwF,MAAM2N,IAAenT,EAAKwF,MAAM2N,GAAY5O,OAAO,SAAAyO,GAAA,MAAmC,eAA3BD,EAAiBC,KAAwBjpC,OAAS,CAE/I,IAAIqpC,GAAyBC,EAC5B,OAAO,CAERrT,GAAKmT,WAAaA,EAClBnT,EAAKmN,KAAK,cAAgBgG,WAAYA,O1G63NxC,GAAItmC,GAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,G0G5lOjC2yB,EAAQp+B,EAAQ,IAChB4I,EAAS5I,EAAQ,IACjBkyC,EAAOlyC,EAAQ,KAEjB+xC,EAAa,IA4EjBP,GAAM/vC,UAAU0wC,SAAW,SAASx6B,GACnC,MAAO85B,GAAoBlxC,KAAK2H,KAAMyP,EAAO,aAM9C65B,EAAM/vC,UAAU2wC,WAAa,SAASz6B,GACrC,MAAO85B,GAAoBlxC,KAAK2H,KAAMyP,EAAO,eAM9C65B,EAAM/vC,UAAU2jC,QAAU,SAASztB,GAClC,MAAO85B,GAAoBlxC,KAAK2H,KAAMyP,EAAO,YAO9C65B,EAAM/vC,UAAUs/B,MAAQ,SAASppB,GAChC,MAAO85B,GAAoBlxC,KAAK2H,KAAMyP,EAAO,UAM9C65B,EAAM/vC,UAAU6pB,QAAU,SAAS3T,GAClC,MAAO85B,GAAoBlxC,KAAK2H,KAAMyP,EAAO,QAAS,SAASA,GAAM,GAAA7O,GAAAZ,IACnEyP,GAAMiT,QAAQ,SAAAne,GACb3D,EAAK2D,GAAQ,WACN3D,GAAK2D,QAQhB+kC,EAAM/vC,UAAU4wC,iBAAmB,SAAS5lC,GAC3C,MAAOglC,GAAoBlxC,KAAK2H,KAAMuE,EAAM,qBAM7C+kC,EAAM/vC,UAAUk9B,SAAW,SAASE,GAYnC,GATIT,EAAMhP,SAASyP,KAClBA,EAAYt0B,SAAS+nC,eAAezT,IAAct0B,SAASwD,cAAT,qBAA4C8wB,EAA5C,MAC9CA,GAAaA,EAAUx+B,KAC1Bw+B,EAAU1Z,aAAa,kBAAmB0Z,EAAUx+B,IACpDw+B,EAAU0T,gBAAgB,SAKvBnU,EAAM+H,UAAUtH,GAEpB,MADAT,GAAMzwB,IAAIe,MAAM,qCAAsCmwB,IAC/C,CAIRA,GAAU1Z,aAAa,cAAe,OAEtC,IAAMyZ,GAAO,GAAIsT,GAAKrT,EAAWkT,EAAY7pC,KAAKsqC,gBAAgBlqC,KAAKJ,MASvE,OAPI02B,KAAS12B,KAAK02B,EAAKnyB,OACtBvE,KAAK02B,EAAKnyB,MAAQmyB,EAClBA,EAAKmN,KAAK,UACA7jC,KAAK02B,EAAKnyB,OACpB2xB,EAAMzwB,IAAIe,MAAM,8BAA+BkwB,EAAKnyB,MAG9CmyB,GAGR4S,EAAM/vC,UAAUgxC,YAAc,WAC7B,GAAI7pC,EAAO,SAASw8B,SAAWx8B,EAAO,WAAY,CACjD,GAAMmY,GAAOnY,EAAO,UAEhBmY,GAAK4uB,OAAS5uB,EAAKskB,SACtBn9B,KAAKohC,OAAOlE,QAAUhH,EAAMkL,OAAOnzB,OAAO4K,EAAK4uB,KAAMznC,KAAKk9B,QAAQ98B,KAAKJ,MAAO6Y,EAAKxI,KAAO,IAI5F,MAAOrQ,OAORspC,EAAM/vC,UAAUixC,aAAe,WAa9B,MAZAtU,GAAM0E,GAAG,WAAY,SAASpE,EAAOvd,GACpC,GAAMyd,GAAOF,EAAMvd,EAAME,OAAO5U,KAEhC,IAAImyB,EAAM,CACTR,EAAMwF,OAAOhF,EAAKA,EAAK+T,QAASxxB,EAAME,OAAOud,EAAK+T,QAClD,IAAMf,GAAOzwB,EAAME,OAAO2d,IAAI4S,KACxBgB,EAASjB,EAAiBC,EAChChT,GAAKiU,gBAAgBD,GACrBhU,EAAKkU,SAASlB,GACdhT,EAAKmN,KAAK,WAAY5qB,EAAME,UAE5B/Y,KAAK,KAAMJ,OACNA,MAMRspC,EAAM/vC,UAAUsxC,eAAiB,WAChC,GAAMtH,GAAc7iC,EAAO,aAM3B,OAJIw1B,GAAM3oB,SAASg2B,KAClBsG,EAAa3T,EAAM4G,WAAWyG,EAAaqG,EAAmBxpC,KAAK,KAAMJ,QAGnEA,MA2BRspC,EAAM/vC,UAAUuxC,gBAAkB,WAIjC,QAASC,GAAUvU,EAAOvd,GACzB,GAAMJ,GAAOqd,EAAM6M,UAAUve,MAAMvL,EAAMJ,KAEzC,IAAIA,EAAKlX,OAAS,UAAUS,KAAKyW,EAAKlX,OAAS,SAASS,KAAKyW,EAAKlX,OAAQ,IAAAqpC,GAAA,WACzE,GAAMrpC,GAAOkX,EAAKlX,KAAK8V,QAAQ,QAAU,IACrCif,IAAO7d,EAAKtU,MAAOiyB,EAAM3d,EAAKtU,KAClC,IAAa,WAAT5C,GAAqBsX,EAAM5N,OAAQ,CAEtChJ,SAAS2W,KAAK7V,cAAe,GAAIC,aAAY,uBAE7C,IAAM6nC,IAAkBtpC,KAAM,eACxBs/B,EAAW/K,EAAM6K,iBAAiB9nB,EAAM5N,OAAO1S,OACrD+9B,GAAOF,EAAMyK,KAAa,EAEtBvK,GACC7d,EAAKoxB,UACRvT,EAAKuT,WAGFpxB,EAAKqyB,kBAAiB,WACzB,GAAMxB,GAAOhT,EAAKI,IAAI4S,KAChBgB,EAASjB,EAAiBC,EAChClT,GAAM9T,QAAQ,SAASxa,GACnBA,EAAEijC,WAAajjC,EAAE3D,OAASmyB,EAAKnyB,OACjC2D,EAAE27B,KAAK,eAAgBnN,GACvBxuB,EAAEyuB,UAAU1Z,aAAa,2BAA4BytB,SAI/C7xB,EAAKuyB,gBAAiD,YAA/B,EAAA5nC,cAAOqV,EAAKuyB,iBAC1C1U,EAAKmN,KAAK,iBAAkBhrB,EAAKuyB,gBAEhC1U,EAAK2U,sBACPJ,EAAcK,4BAA6B,GAG5CL,EAAc1mC,KAAO08B,EACrBgK,EAAc/O,MAAQxF,EAAKwF,MAE3BhG,EAAM6M,UAAUC,KAAKiI,EAAehyB,EAAM5N,UAE1C6qB,EAAMzwB,IAAIe,MAAM,2CAChB0vB,EAAM6M,UAAUC,KAAKiI,EAAehyB,EAAM5N,aAErC,CACN,IAAKqrB,EAEJ,MADAR,GAAMzwB,IAAIe,MAAM,4CAChBwW,EAAA,OAGW,gBAATrb,EACF+0B,EAAK6U,uBAAsB,GACjBrV,EAAM/V,WAAWuW,EAAK/0B,IAChC+0B,EAAK/0B,KACK,SAASS,KAAKyW,EAAKlX,MAC7B+0B,EAAKmN,KAAK,QAAShrB,UAEZA,GAAKlX,WACLkX,GAAKtU,KACZmyB,EAAKmN,KAAKliC,EAAMkX,OAxDuD,mCAAAmyB,GAAA,eAAAxnC,cAAAwnC,IAAA,MAAAA,GAAAhuB,GAL3ErkB,OAAO0K,iBAAiB,UAAW0nC,EAAU3qC,KAAK,KAAMJ,OAAO,IAoEhEspC,EAAM/vC,UAAU+wC,gBAAkB,SAASkB,GAC1C,GAAMC,GAAoB/qC,EAAO,aAAe8qC,CAGhD,IAAG,wBAA0B7yC,UAAWqH,KAAK0rC,kBAAsBD,EAAmB,IAG5EE,GAAT,SAAkBC,GAAS,GAAAvzB,GAAArY,IAG1B4rC,GACC3Q,OAAO,SAAAjzB,GAAA,MAAKA,GAAE6jC,iBAAiBpI,QAAUz7B,EAAE6jC,iBAAiBruB,OAASxV,EAAE6jC,iBAAiB5I,KAAOj7B,EAAE6jC,iBAAiBtG,OAClHuG,KAAK,SAAC9jC,EAAEC,GAAH,MAASD,GAAE6jC,iBAAiB5I,IAAMh7B,EAAE4jC,iBAAiB5I,MAC1DvgB,QAAQ,SAACqpB,GACT,GAAM9K,GAAW8K,EAAO5/B,OAAO7H,aAAa,kBAEzC28B,IACFsI,EAAoBlxC,KAApBggB,EAA+B4oB,EAAU,aAZxC1gC,IAiB6B,aAA9B,mBAAOkrC,GAAP,eAAAjoC,cAAOioC,MAENA,EAAkBO,iBACpBzrC,EAAQ0rC,WAAaR,EAAkBO,gBAGrCP,EAAkB9D,YACpBpnC,EAAQonC,UAAY8D,EAAkB9D,YAGxC3nC,KAAK0rC,iBAAmB,GAAIQ,sBAAqBP,EAASvrC,KAAKJ,MAAOO,GAGvE,MAAOP,MAAK0rC,kBAIbpC,EAAM/vC,UAAUmpB,QAAU,SAAS5V,GAAI,GAAAq/B,GAAAnsC,IAQtC,OAPA1G,QAAOiQ,KAAKvJ,MAAM0iB,QAAQ,SAAAne,GACzB,GAAMmyB,GAAOyV,EAAK5nC,EAEdmyB,aAAgBsT,IACnBl9B,EAAGzU,KAAH8zC,EAAczV,KAGT12B,MAMRspC,EAAM/vC,UAAU6H,KAAO,WACtBpB,KAAKuqC,cACLvqC,KAAKwqC,eACLxqC,KAAK6qC,iBACL7qC,KAAK8qC,kBACL9qC,KAAKsqC,mBAGNhB,EAAM/vC,UAAU6nC,UAEhBkI,EAAM/vC,UAAU4rB,MAAQ,WACvB,GAAM1f,GAAMywB,EAAMzwB,IACZoT,IAEN7Y,MAAK0iB,QAAQ,SAAUgU,GACtB,GAAM0V,IACL7nC,KAAMmyB,EAAKnyB,KACX8nC,YAAa3V,EAAKI,IAAIwV,SACtBC,cAAe7V,EAAKI,IAAI0V,YAAc,MACtCC,eAAgB/V,EAAKI,IAAI4V,YAAc,MACvChD,KAAOxT,EAAM5jB,QAAQokB,EAAKI,IAAI4S,OAAShT,EAAKI,IAAI4S,KAAKxrB,KAAK,MAAUwY,EAAKI,IAAIC,SAAW,SAAY,MACpGmF,MAAQhG,EAAM5jB,QAAQokB,EAAKwF,QAAUxF,EAAKwF,MAAMrlB,IAAI,SAAS+b,GAAO,MAAOA,GAAK1U,KAAK,OAASA,KAAK,OAAU,kBAC7G2b,UAAWvgC,OAAOiQ,KAAKmtB,EAAKmD,WAAWhjB,IAAI,SAAU8qB,GAAS,MAAUA,GAAV,IAAmBjL,EAAKmD,UAAU8H,KAAazjB,KAAK,MAEnHrF,GAAKpX,KAAK2qC,KAGX3mC,EAAIirB,MAAM,aACVjrB,EAAI0jC,MAAMtwB,GACVpT,EAAIkrB,OAKLz4B,EAAOD,QAAU,GAAIqxC,I1GsnOf,SAASpxC,EAAQD,EAASH,GAE/B,Y2Gh5OD,SAASkyC,GAAKrT,EAAWkT,EAAYS,GAAiB,GAAA1pC,GAAAZ,KACjDwrC,EAAa9qC,EAAO,aACpB2qC,EAAsB3qC,EAAO,yBAA0B,CAyD3D,OAtDAV,MAAK22B,UAAYA,EAIbkT,IACH7pC,KAAK6pC,WAAaA,GAInB7pC,KAAK2sC,MAAQ3sC,KAAK4sC,aAAajW,GAC9BkW,QAAS,iBAEV7sC,KAAK2uB,MAAQ3uB,KAAK4sC,aAAa5sC,KAAK2sC,OACnCE,QAAS,iBAIV7sC,KAAK8sC,UACL9sC,KAAKurC,uBAAsB,GAC3BC,EAAaA,EAAWxrC,KAAKuE,UAG7BvE,KAAKyqC,OAAS,MACdzqC,KAAK+sC,OAAQ,EAGb/sC,KAAK65B,UAAY2R,EAAW3R,cAC5B75B,KAAKk8B,MAAQsP,EAAWtP,UACxBl8B,KAAKgtC,OAASxB,EAAWwB,SAAU,EACnChtC,KAAKqX,MAAQm0B,EAAWn0B,QAAS,EACjCrX,KAAKitC,UAAYzB,EAAWyB,YAAa,EAEzCjtC,KAAKqrC,oBAAsBG,EAAWH,qBAAuBA,EAC7DrrC,KAAKmrC,UAAaK,EAAWL,aAAc,EAC3CnrC,KAAKktC,cAAgB1B,EAAW0B,cAE5BhX,EAAM5jB,QAAQk5B,EAAWxP,SAC5BmR,EAAiBnR,QAAQwP,EAAWxP,QAASh8B,KAAKk8B,OACxChG,EAAMmH,cAAcmO,EAAWxP,WACzCh8B,KAAKk8B,SACL5iC,OAAOiQ,KAAKiiC,EAAWxP,SAAStZ,QAAQ,SAAA0qB,GACvCxsC,EAAKs7B,MAAMkR,GAAcD,EAAiBnR,QAAQwP,EAAWxP,QAAQoR,UAIpC,mBAAxB5B,GAAWzpC,SACrB/B,KAAK+B,SAAWypC,EAAWzpC,SAE3B/B,KAAK+B,SAAWrB,EAAO,cAAe,EAIvCV,KAAKqtC,uBAEArtC,KAAKk8B,MAAMz7B,QAAWy1B,EAAMmH,cAAcr9B,KAAKk8B,QAMpDl8B,KAAK0rC,iBAAmBpB,EAAgBtqC,KAAK+B,UAC7C/B,KAAKstC,eAELttC,KAAKutC,kBACLvtC,KAAKwtC,qBAELxtC,MAAK6qC,mBAXJ3U,EAAMzwB,IAAIe,MAAM,mCAAoCxG,KAAKuE,OAClD,GAvKT,GAAM2xB,GAAQp+B,EAAQ,IAChB4I,EAAS5I,EAAQ,IAEjB21C,GAAsB,SAEtBN,GACLjR,MAAO,SAAStiC,EAAOsiC,GACtB,MAAItiC,MAAU,GAAmB,UAAVA,IAIds8B,EAAM5jB,QAAQ4pB,KAAQ,WAC9B,GAAMtiB,GAAQ,aACdhgB,GAAMiW,MAAM,KAAKorB,OAAO,SAAAyO,GAAA,MAAQA,GAAKjpC,SAAQiiB,QAAQ,SAAAgnB,GACjD9vB,EAAMxX,KAAKsnC,GACbA,EAAKjyB,QAAQmC,EAAO,SAASyf,EAAO7b,EAAOimB,GAC1CvH,EAAMz6B,MAAMqd,SAAStB,EAAO,IAAKsB,SAAS2kB,EAAQ,QAEzCgK,EAAmB5pB,QAAQ6lB,IAAS,GAC9CxN,EAAMz6B,KAAKioC,QAIPxN,IAGRF,QAAS,SAASpiC,EAAOsiC,GAsBxB,MArBItiC,MAAU,GAAmB,UAAVA,EACtBsiC,GAAQ,GACF,WACN,GAAMwR,GAAUhtC,IAASs7B,QACnBA,EAAU9F,EAAM5jB,QAAQ1Y,GAASA,EAAQA,EAAMiW,MAAM,IAC3DmsB,GAAQtZ,QAAQ,SAAAgoB,GACXgD,GAAWA,EAAQhD,IACtBA,EAASgD,EAAQhD,GACbxU,EAAM5jB,QAAQo4B,EAAOxO,MAAM,KAAOuR,EAAmB5pB,QAAQ6mB,EAAOxO,MAAM,KAAO,EACpFwO,EAAOxO,MAAMxZ,QAAQ,SAAAgnB,GACpBxN,EAAMz6B,KAAKioC,KAGZxN,EAAMz6B,KAAKipC,EAAOxO,QAGnBhG,EAAMzwB,IAAIe,MAAV,uCAAuDkkC,QAKnDxO,GAGRyR,gBAAiB,SAASppC,EAAM3K,EAAOsiC,GACtC,GAAMkR,GAAa7oC,EAAKkT,QAAQ,SAAU,IAAImM,aAO9C,OALKsS,GAAMmH,cAAcnB,KACxBA,MAGDA,EAAMkR,GAAcD,EAAiBjR,MAAMtiC,EAAOsiC,EAAMkR,QACjDlR,GAGR0R,kBAAmB,SAASrpC,EAAM3K,EAAOsiC,GACxC,GAAMkR,GAAa7oC,EAAKkT,QAAQ,WAAY,IAAImM,aAOhD,OALKsS,GAAMmH,cAAcnB,KACxBA,MAGDA,EAAMkR,GAAcD,EAAiBnR,QAAQpiC,MACtCsiC,GAGR2R,kBAAmB,SAASj0C,GAC3B,MAAOA,GAAMiW,MAAM,KAAKgH,IAAIi3B,SAG7BjU,UAAW,SAASjgC,EAAOigC,GAG1B,MAFAjgC,GAAQs8B,EAAMoI,KAAK1kC,EAAO,IAAK,KAC/Bs8B,EAAMwF,OAAO7B,EAAWjgC,GACjBigC,GAGRkU,KAAM,SAASn0C,GAQd,MANc,KAAVA,GAA0B,SAAVA,EACnBA,GAAQ,EACY,UAAVA,IACVA,GAAQ,GAGFA,IAIHo0C,EAAiC,SAAC90C,GACpCA,EAAI6I,YAAa,IACnB7I,EAAI6I,aAuFNioC,GAAKzwC,UAAU8zC,qBAAuB,WAAW,GAAAh1B,GAAArY,IAChDwR,OAAMupB,KAAK/6B,KAAK22B,UAAUyD,YAAY1X,QAAQ,SAAAyd,GAC7C,GAAM57B,GAAO2xB,EAAMgK,mBAAmBC,EAAU57B,MAC1C3K,EAAQumC,EAAUvmC,KACX,aAAT2K,EACH8T,EAAK9T,GAAQ4oC,EAAiB5oC,GAAM3K,EAAOye,EAAK6jB,OAC7B,sBAAT33B,GAAgC8T,EAAKtW,UAC/CisC,KACA31B,EAAKtW,SAAS4lC,UAAYwF,EAAiBU,kBAAkBj0C,IAC1C,2BAAT2K,GAAqC8T,EAAKtW,UACpDisC,KACA31B,EAAKtW,SAASiqC,eAAiBmB,EAAiBY,KAAKn0C,IAAkBuzC,EAAiB5oC,GACxF8T,EAAK9T,GAAQ4oC,EAAiB5oC,GAAM3K,EAAOye,EAAK9T,IACtC,cAAcnC,KAAKmC,GAC7B8T,EAAK6jB,MAAQiR,EAAiBS,kBAAkBrpC,EAAM3K,EAAOye,EAAK6jB,OACxD,YAAY95B,KAAKmC,GAC3B8T,EAAK6jB,MAAQiR,EAAiBQ,gBAAgBppC,EAAM3K,EAAOye,EAAK6jB,OAExD7jB,EAAK7e,eAAe+K,KAC5B8T,EAAK9T,GAAQ4oC,EAAiBY,KAAKn0C,OAKtCowC,EAAKzwC,UAAU00C,cAAgB,WAC9B,GAAM7T,KAKN,OAJA5oB,OAAMupB,KAAK/6B,KAAK22B,UAAUyD,YAAY1X,QAAQ,SAAAyd,GAC7C/F,EAAWlE,EAAMgK,mBAAmBC,IAAcA,EAAUvmC,QAE7DoG,KAAKo6B,WAAaA,EACXp6B,MAMRgqC,EAAKzwC,UAAU+zC,aAAe,WAAW,GAAAnB,GAAAnsC,IAgBxC,OAdIA,MAAK0rC,kBAAoB1rC,KAAK+B,WACjC/B,KAAK+sC,OAAQ,EACb/sC,KAAK0rC,iBAAiBwC,QAAQluC,KAAK22B,WAIhC32B,KAAKmrC,WACPjV,EAAM2M,KAAK,eAAgB,WACtBsJ,EAAKgC,gBACRhC,EAAKiC,UAEJpuC,KAAK22B,YAGH32B,MAGRgqC,EAAKzwC,UAAU60C,OAAS,WACvBpuC,KAAK6jC,KAAK,UAEP7jC,KAAK0rC,kBACP1rC,KAAK0rC,iBAAiB2C,UAAUruC,KAAK22B,YAStCqT,EAAKzwC,UAAUsxC,eAAiB,WAqBhC,MAnBI3U,GAAMmH,cAAcr9B,KAAKk8B,SAEvBl8B,KAAKmuC,gBACTnuC,KAAKiqC,WAGN/T,EAAM0E,GAAG,aAAc,SAAS3hB,GAC/B,GAAMyd,GAAOzd,EAAME,OAAOud,IAC1BA,GAAKmT,WAAa5wB,EAAME,OAAO0wB,WAE3BnT,EAAKyX,eACRzX,EAAKwT,cAELxT,EAAKuT,WACLvT,EAAKmC,UAEJ74B,KAAK22B,YAGF32B,MAMRgqC,EAAKzwC,UAAUqxC,SAAW,SAASlB,GAC9BA,GAAqB,OAAZA,EAAK,IAA2B,OAAZA,EAAK,IACrC1pC,KAAK6jC,KAAK,UACT6F,MAAO,OAAQ,WAQlBM,EAAKzwC,UAAUuzC,QAAU,WAMxB,MALA9sC,MAAKuE,KAAOvE,KAAK22B,UAAUryB,aAAa,oBAAsBtE,KAAK22B,UAAUryB,aAAa,cACrFtE,KAAKuE,OACTvE,KAAKuE,KAAL,cAA2BiE,KAAKC,MAAsB,IAAhBD,KAAKmI,UAC3C3Q,KAAK22B,UAAU1Z,aAAa,kBAAmBjd,KAAKuE,OAE9CvE,MAMRgqC,EAAKzwC,UAAUgyC,sBAAwB,SAAS3xC,GAE/C,MADAoG,MAAKsuC,mBAAqB10C,EACnBoG,MAORgqC,EAAKzwC,UAAU0wC,SAAW,WAIzB,MAHAjqC,MAAK22B,UAAUtwB,UAAUC,IAAI,gBAC7BtG,KAAK2qC,iBAAgB,GACrBtoC,SAAS2W,KAAK3S,UAAUC,IAAxB,YAAwCtG,KAAKuE,MACtCvE,MAMRgqC,EAAKzwC,UAAUoxC,gBAAkB,SAASD,GAEzC,MADA1qC,MAAK22B,UAAU1Z,aAAa,oBAAqBytB,GAC1C1qC,MAMRgqC,EAAKzwC,UAAU2wC,WAAa,WAG3B,MAFAlqC,MAAK22B,UAAUtwB,UAAU60B,OAAO,gBAChC74B,SAAS2W,KAAK3S,UAAU60B,OAAxB,YAA2Cl7B,KAAKuE,MACzCvE,MAMRgqC,EAAKzwC,UAAUs/B,MAAQ,WAKtB,MAHI3C,GAAM/V,WAAWngB,KAAA,YACpBA,KAAKuuC,YAECvuC,MAMRgqC,EAAKzwC,UAAU4wC,iBAAmB,WAKjC,MAHIjU,GAAM/V,WAAWngB,KAAA,sBACpBA,KAAKwuC,sBAECxuC,MAMRgqC,EAAKzwC,UAAUsqC,KAAO,SAASt/B,EAAMsU,GACpC,GAAM41B,IACLlqC,KAAMvE,KAAKuE,KACXmyB,KAAM12B,KAQP,OALIk2B,GAAMmH,cAAcxkB,IACvBqd,EAAMwF,OAAO+S,EAAS51B,GAGvBqd,EAAMtd,UAAUrU,EAAMkqC,EAASzuC,KAAK22B,WAC7B32B,MAMRgqC,EAAKzwC,UAAUqzC,aAAe,SAASzN,EAAMuP,GAC5C,GAAI/X,GAAY,OAUhB,OARI+X,IACHp1C,OAAOiQ,KAAKmlC,GAAOhsB,QAAQ,SAASisB,GACnC,GAAM/0C,GAAQ80C,EAAMC,EACpBhY,IAAgBgY,EAAhB,IAAwB/0C,EAAxB,MAGF+8B,GAAa,UACbwI,EAAKyP,mBAAmB,YAAajY,GAC9BwI,EAAK0P,WAIb7E,EAAKzwC,UAAU40C,aAAe,SAAStE,GAEtC,MADAA,GAAaA,GAAc7pC,KAAK6pC,YAC5BA,IAAc3T,EAAMmH,cAAcr9B,KAAKk8B,QACnCl8B,KAAKk8B,MAAM2N,MAAgB,GAUpCG,EAAKzwC,UAAUg0C,gBAAkB,WAKhC,MAJIvtC,MAAKgtC,QACRhtC,KAAK22B,UAAUtwB,UAAUC,IAAI,iBAGvBtG,MAORgqC,EAAKzwC,UAAUi0C,eAAiB,WAC/B,GAAIt2B,SAUJ,OATIlX,MAAKqX,SAAU,GAAuB,SAAfrX,KAAKqX,MAC/BH,EAAY,aACa,UAAflX,KAAKqX,QACfH,EAAY,eAGTA,GACHlX,KAAK22B,UAAUtwB,UAAUC,IAAzB,UAAuC4Q,GAEjClX,MAGR9H,EAAOD,QAAU+xC,G3GsgPX,SAAS9xC,EAAQD,EAASH,GAE/B,Y4Gj6PD,SAASsJ,KACR,GAAM0tC,GAAYpuC,EAAO,UACzB6iC,GAAc7iC,EAAO,cACrBquC,IACA7Y,EAAM0E,GAAG,QAASoU,EAAQ5uC,KAAK,KAAM6uC,IACrC/Y,EAAM0E,GAAG,SAAUsU,GACnBhZ,EAAM0E,GAAG,UAAWuU,GACpBjZ,EAAM0E,GAAG,SAAUwU,GACnBC,UAAUC,IAAI7tC,KAAK8tC,EAAMnvC,KAAK,KAAM0uC,IAMrC,QAASC,KACHp2C,OAAO02C,YAEX12C,OAAO02C,aAKP12C,OAAO02C,UAAUC,QAGlBpZ,EAAM0I,OAAO,6CAA6C,EAAM,KAAM,SAASp5B,GAC9E0wB,EAAMtd,UAAU,oBAAqBpT,KAevC,QAAS+pC,GAAMT,GAOd,MANAO,WAAUG,SAASnsC,iBAAiB,kBAAmBosC,GACvDC,EAAiBZ,GACjBa,EAAiBb,GACjBc,EAAiB/V,EAAUp+B,OAC3Bo0C,EAAqBf,GACrBO,UAAUS,kBACH,EAQR,QAASH,GAAiBb,GACzB,GAAMiB,GAAYjB,EAAUiB,SACV,UAAdA,EACHV,UAAUG,SAASQ,sBACK,QAAdD,EACVV,UAAUG,SAASS,sBAEnBZ,UAAUG,SAASU,uBAUrB,QAASN,GAAiB/V,GAEzB,QAASsW,GAAa92C,EAAKO,GAC1By1C,UAAUG,SAASW,aAAa92C,EAAKO,GAWtC,MARIs8B,GAAMmH,cAAcxD,GACvBvgC,OAAOiQ,KAAKswB,GAAWnX,QAAQ,SAASif,GACvC0N,UAAUC,IAAI7tC,KAAK0uC,EAAa/vC,KAAK,KAAMuhC,EAAO9H,EAAU8H,OAG7DzL,EAAMzwB,IAAI0d,KAAK,kCAAmC0W,GAG5CA,EAUR,QAASgW,GAAqBf,GAC7B,GAAMsB,GAAOtB,EAAU5B,aAEV,YAATkD,GAAqBA,KAAS,EACjCf,UAAUG,SAASa,mBAAkB,GAAM,GACxB,UAATD,GAAoBA,KAAS,EACvCf,UAAUG,SAASa,mBAAkB,GAErChB,UAAUG,SAASa,mBAAkB,GASvC,QAASX,GAAiBZ,GACrBA,EAAUwB,aACbjB,UAAUG,SAASe,qBACnBlB,UAAUmB,eAAeC,yBAAwB,IAanD,QAASzB,GAAQC,EAAah2B,GAC7B,GAAMyd,GAAOzd,EAAME,OAAOud,IAEN,SAAhBA,EAAK+T,SACR/T,EAAKI,OAGLZ,EAAMwF,OAAOhF,EAAMuY,GAGnBI,UAAUC,IAAI7tC,KAAK,WAClBi1B,EAAKga,aACJC,cACAC,mBACAT,eACAU,UAEIna,EAAKqW,OAASrW,EAAKyX,gBACvBzX,EAAK7nB,aAQT,QAASqgC,GAASj2B,GACjB,GAAMyd,GAAOzd,EAAME,OAAOud,IAEtBR,GAAM/V,WAAWuW,EAAK7nB,UACzB6nB,EAAK7nB,UAOP,QAASsgC,GAAUl2B,GAUlB,MATAtgB,QAAO02C,UAAUC,IAAI7tC,KAAK,WACzB,GAAMo4B,GAAY5gB,EAAME,OAAO0gB,SAC3B3D,GAAMmH,cAAcxD,IACvBvgC,OAAOiQ,KAAKswB,GAAWnX,QAAQ,SAAAne,GAC9B0U,EAAME,OAAOud,KAAKI,IAAIJ,KAAKyZ,aAAa5rC,EAAMs1B,EAAUt1B,MAG1D8qC,UAAUG,SAAStS,SAASjkB,EAAME,OAAOud,KAAKI,IAAIJ,SAE5C12B,KAGR,QAASovC,GAASn2B,GACjB,GAAMxK,GAASwK,EAAME,OAAOud,KAAKI,IAAIroB,OAC/Bi7B,EAAOzwB,EAAME,OAAOuwB,IAC1Bj7B,GAAO+O,MAAQksB,EAAK,GACpBj7B,EAAOg1B,OAASiG,EAAK,GAMtB,QAAS+F,GAAcx2B,GACtB,GAAMJ,IACLie,QAGKga,EAAY73B,EAAMyd,KAAKqa,YACvBC,EAAQF,EAAUG,WAAWphC,MAAM,KACnCqhC,uBAAgCJ,EAAUK,OAChDt4B,GAAKlX,KAAOqvC,EAAMvT,MAClB5kB,EAAKtU,KAAOysC,EAAM9yB,KAAK,IACvB,IAAM/E,GAASN,EAAKie,GACpB3d,GAAO4d,QAAU9d,EAAM8d,QACvB5d,EAAOuwB,KAAOzwB,EAAMywB,KACpBvwB,EAAOqzB,WAAavzB,EAAMuzB,WAC1BrzB,EAAOuzB,WAAazzB,EAAMyzB,WAC1BvzB,EAAOi4B,YAAcn4B,EAAMm4B,YAC3Bj4B,EAAO1K,OAASpM,SAAS+nC,eAAe8G,GACxChb,EAAMtd,UAAU,WAAYC,GAiN7B,QAASw4B,KACRhC,UAAUC,IAAI7tC,KAAK,WAClB4tC,UAAUG,SAAS6B,qBAIrB,QAASC,GAAoBC,GAC5B,GAAI54C,OAAO02C,UAAW,CACrB,GAAMmC,GAAStb,EAAMmH,cAAckU,GAAYA,EAAW1X,EAAUp+B,KACpEm0C,GAAiB4B,OAGjBtb,GAAMzwB,IAAI0d,KAAK,2EAzbjB,GAAMziB,GAAS5I,EAAQ,IACjBo+B,EAAQp+B,EAAQ,IAChB+hC,EAAY/hC,EAAQ,KACtByrC,GAAc,EAkOZ0L,GAILyB,WAAY,WAAW,GAAA9vC,GAAAZ,IAiBtB,OAhBArH,QAAO02C,UAAUC,IAAI7tC,KAAK,WACzBb,EAAKk2B,IAAI3+B,GAAQyI,EAAK2D,KAAtB,OACA3D,EAAK+tB,MAAM1R,aAAa,KAAMrc,EAAKk2B,IAAI3+B,IACvCyI,EAAK6wC,cACA7wC,EAAKqsC,UASTrsC,EAAKk2B,IAAIJ,KAAO2Y,UAAUqC,oBAAoB9wC,EAAKk2B,IAAIwV,SAAU1rC,EAAKk2B,IAAI3+B,IARtEorC,GAAerN,EAAM3oB,SAAS3M,EAAKs7B,QACtCt7B,EAAKiqC,iBACLjqC,EAAKk2B,IAAIJ,KAAO2Y,UAAUqB,WAAW9vC,EAAKk2B,IAAIwV,YAAc1rC,EAAKk2B,IAAI3+B,IAAIw5C,kBAAkB/wC,EAAKk2B,IAAIoF,QAEpGt7B,EAAKk2B,IAAIJ,KAAO2Y,UAAUqB,WAAW9vC,EAAKk2B,IAAIwV,SAAU1rC,EAAKs7B,MAAOt7B,EAAKk2B,IAAI3+B,MAOzE6H,MAERuuC,UAAW,SAASqD,GACnB,SAAIj5C,OAAO02C,UAAUwC,cAAel5C,OAAO02C,UAAUG,UACpDoC,EAAUA,GAAW5xC,KAAK82B,IAAIJ,KACvB2Y,UAAUG,SAAS3W,OAAO+Y,MAKnC/G,eAAgB,WAAW,GAAAxyB,GAAArY,IA2B1B,OA1BArH,QAAO02C,UAAUC,IAAI7tC,KAAK,WACzBy0B,EAAM0E,GAAG,aAAc,SAAC3hB,GACvB,GAAMyd,GAAOzd,EAAME,OAAOud,KACpBmT,EAAa5wB,EAAME,OAAO0wB,UAEhCyH,IAAsB1rC,IAAKikC,IAEvBnT,EAAKyX,aAAatE,KAAgBnT,EAAK4X,qBAEtC5X,EAAKI,IAAIroB,OACZioB,EAAKmN,KAAK,WACCxrB,EAAK00B,OAChBrW,EAAK7nB,YAGLwJ,EAAKse,UAER,IAAM+W,GAAU2B,UAAUyC,aAC1Bx4C,QAAOiQ,KAAKg6B,GAAa7gB,QAAQ,SAAA2gB,GAC5BhrB,EAAK6jB,MAAMmH,IACdqK,EAAQqE,QAAQxO,EAAYF,GAAahrB,EAAK6jB,MAAMmH,MAItDhrB,EAAKye,IAAIoF,MAAQwR,EAAQsE,UAEnBhyC,MAKR6O,QAAS,WAAW,GAAAs9B,GAAAnsC,IAInB,OAHArH,QAAO02C,UAAUC,IAAI7tC,KAAK,WACzB4tC,UAAUxgC,QAAQs9B,EAAKrV,IAAI3+B,MAErB6H,MAKRyxC,YAAa,WAAW,GAAAQ,GAAAjyC,IAoBvB,OAnBArH,QAAO02C,UAAUC,IAAI7tC,KAAK,WACzB,GAAI6qC,UACExV,EAAMp2B,EAAO,WACbiuC,EAAOsD,EAAKtb,UAAUryB,aAAa,2BAEzC,IAAI4xB,EAAM8H,iBAAiB2Q,GAC1BrC,EAAWqC,MACL,IAAIzY,EAAM8H,iBAAiBlH,EAAIwV,UACrCA,EAAWxV,EAAIwV,aACT,CACN,GAAM4F,GAAUpb,EAAIob,QACdC,EAAOrb,EAAIqb,KACX1X,EAAO3D,EAAI2D,IACjB6R,OAAe4F,EACf5F,GAAYpW,EAAM8H,iBAAiBmU,GAAvB,IAAmCA,EAAS,GACxD7F,GAAYpW,EAAM8H,iBAAiBvD,GAAvB,IAAmCA,EAAS,GAEzDwX,EAAKnb,IAAIwV,SAAWA,IAEdtsC,MAKR2wC,YAAa,SAASiB,GAAS,GAAAQ,GAAApyC,IAS9B,OARArH,QAAO02C,UAAUC,IAAI7tC,KAAK,WACzB,GAAMq1B,GAAMp2B,EAAO,UACnBkxC,GAAUA,GAAWQ,EAAKtb,IAAIJ,KAC9Bkb,EAAQS,WAAWhD,UAAUG,UACzB1Y,EAAIwZ,YAAc8B,EAAKjH,aAAc,GACxCyG,EAAQS,WAAWhD,UAAUmB,kBAGxBxwC,MAUR4wC,iBAAkB,WAAW,GAAA0B,GAAAtyC,IAY5B,OAXArH,QAAO02C,UAAUC,IAAI7tC,KAAK,WACzB,GAAM2uC,GAAOkC,EAAKpF,eAAiBxsC,EAAO,gBAEtC0vC,MAAS,GAAiB,UAATA,EACpBkC,EAAKxb,IAAIJ,KAAK6b,qBAAoB,GACf,WAATnC,EACVkC,EAAKxb,IAAIJ,KAAK6b,qBAAoB,GAAM,GAC9BnC,KAAS,GAAkB,UAATA,GAC5BkC,EAAKxb,IAAIJ,KAAK6b,qBAAoB,KAG7BvyC,MAERwuC,oBAAsB,WACrB,GAAIxuC,KAAKitC,WAAajtC,KAAK82B,IAAIroB,OAAQ,IAC7B+jC,GAAT,SAA0B/jC,GACzB,GAAMgkC,GAAqBhkC,EAAOM,cAAc1M,SAASwD,cAAc,8BACvE,OAAI4sC,GACIA,EAAmBC,QAAQC,mBAElCzc,EAAMzwB,IAAI0d,KAAK,mEACR,IAGHyvB,EAAgBJ,EAAiBxyC,KAAK82B,IAAIroB,OAE7CmkC,IACF1c,EAAM0I,OAAOgU,GAAe,EAC3B,WACC1c,EAAMzwB,IAAI6d,KAAK,6BAEhB,WACC4S,EAAMzwB,IAAI6d,KAAK,iDAEhB,OAKF4S,GAAMzwB,IAAI0d,KAAK,0DAOjB0tB,OAAQ,SAASe,GAAS,GAAAiB,GAAA7yC,IAMzB,OALArH,QAAO02C,UAAUC,IAAI7tC,KAAK,WACzBmwC,EAAUA,GAAWiB,EAAK/b,IAAIJ,IAC9B,IAAMkF,GAAYl7B,EAAO,YACzBkxC,GAAQj9B,IAAI,WAAainB,EAAYA,EAAY1F,EAAMkK,iBAEjDpgC,MAMRmwC,aAAc,SAASyB,GAAS,GAAAkB,GAAA9yC,IAU/B,OATArH,QAAO02C,UAAUC,IAAI7tC,KAAK,WACzBmwC,EAAUA,GAAWkB,EAAKhc,IAAIJ,KAE1BR,EAAMmH,cAAcyV,EAAKjZ,YAC5BvgC,OAAOiQ,KAAKupC,EAAKjZ,WAAWnX,QAAQ,SAAAif,GACnCiQ,EAAQzB,aAAaxO,EAAOmR,EAAKjZ,UAAU8H,QAIvC3hC,MA+BT9H,GAAOD,QAAQmJ,KAAOA,EACtBlJ,EAAOD,QAAQo5C,iBAAmBA,EAClCn5C,EAAOD,QAAQq5C,oBAAsBA,EAErCp5C,EAAOD,QAAQktB,MAAQ,WACtB,GAAM1f,GAAMywB,EAAMzwB,IACZstC,EAAOryC,EAAO,MAChBqyC,KAIJttC,EAAIirB,MAAM,OACTjrB,EAAI4jC,eAAe0J,GACpBttC,EAAIkrB,S5Gq8PC,SAASz4B,EAAQD,EAASH,GAE/B,Y6Gr5QD,SAASk7C,MAJT,GAAMtyC,GAAS5I,EAAQ,IACjBo+B,EAAQp+B,EAAQ,IAClBm7C,IAKJD,GAAUz5C,UAAUkC,IAAM,WACzB,GAAMoI,IACLqvC,eAAgBlzC,KAAKmzC,kBACrBC,aAAcpzC,KAAKqzC,gBACnBC,UAAWtzC,KAAKszC,UAChBxW,WAAY98B,KAAK88B,WAGlB5G,GAAMwF,OAAOuX,EAAYjzC,KAAKuzC,gBAAiBvzC,KAAKwzC,aAEpD,KAAK,GAAI5gB,KAAQ/uB,GAEZA,EAAQrK,eAAeo5B,IAC1BsD,EAAMwF,OAAOuX,EAAYpvC,EAAQ+uB,KAInC,OAAOqgB,IAGRD,EAAUz5C,UAAU+M,IAAM,SAASpN,GAE9Bg9B,EAAMmH,cAAcnkC,IACvBg9B,EAAMwF,OAAOuX,EAAY/5C,IAI3B85C,EAAUz5C,UAAUs/B,MAAQ,WAC3Boa,MAODD,EAAUz5C,UAAUg6C,cAAgB,WACnC,GAAI1Z,GAAYn5B,EAAO,oBAQvB,OAPKw1B,GAAMmH,cAAcxD,IAEpB3D,EAAMhP,SAAS2S,KAClBA,EAAY3D,EAAMoI,KAAKzE,EAAW,IAAK,MAIlCA,GAGRmZ,EAAUz5C,UAAU85C,gBAAkB,WACrC,GAAII,UACApa,EAAQ,KACNrP,EAAWkM,EAAM0J,aAcvB,OAXiB,KAAb5V,IACHypB,EAAY,sBAGZpa,EAAQoa,EAAUjmC,KAAKwc,GAAU,GAEnB,OAAVqP,GACHA,EAAMnI,UAAU,IAIXmI,IAAUqa,GAAIra,EAAMnI,UAAU,SAGtC8hB,EAAUz5C,UAAU45C,kBAAoB,WACvC,GAAIQ,UACAC,SACE5pB,EAAWkM,EAAM0J,cACjBiU,EAAuB,sGACvBC,GACLC,OAAQ,MACRC,eAAgB,MAChBC,eAAgB,MAChBC,mBAAoB,MAIrB,IAAIhe,EAAMhP,SAAS8C,GAClB,IAAK4pB,IAAUE,GAEd,GAAIA,EAAOt6C,eAAeo6C,GAAS,CAClC,GAAMO,GAAe,GAAI19B,QAAOo9B,EAAqBp8B,QAAQ,gBAAiBm8B,GAE9E,IAAet4C,SAAXs4C,GAAwBO,EAAa/xC,KAAK4nB,GAAW,CACxD2pB,EAAaG,EAAOF,EACpB,QAMJ,MAAOD,KAAgBS,OAAQT,QAGhCX,EAAUz5C,UAAUi6C,WAAa,WAChC,GAAMa,GAAKne,EAAMoI,KAAKpI,EAAMmK,iBAAkB,QAAS,KACnDiU,EAAWD,EAAG11B,GAAK01B,EAAGnsC,GAAKmsC,EAAGE,OAASF,EAAGG,WAAaH,EAAGI,aAAen5C,MAU7E,OAPIg5C,IAAyB,KAAbA,IACfA,EAAWI,SAASJ,GAAU1wB,cAC7BnM,QAAQ,YAAa,KACrBA,QAAQ,OAAQ,KAChBknB,SAGMgW,GAAIL,IAGbtB,EAAUz5C,UAAU+5C,UAAY,WAC/B,OAASsB,GAAI1e,EAAMqK,iBAGpByS,EAAUz5C,UAAUujC,WAAa,WAChC,MAAOp8B,GAAO,eAAkBkF,IAAKswB,EAAM4G,WAAWkH,kBAGvDgP,EAAUz5C,UAAU4rB,MAAQ,WAC3B,GAAM1f,GAAMywB,EAAMzwB,IACZwtC,EAAajzC,KAAKvE,KAEe,KAAnCnC,OAAOiQ,KAAK0pC,GAAYxyC,SAC3BgF,EAAIirB,MAAM,aACVjrB,EAAI4jC,eAAerpC,KAAKvE,OACxBgK,EAAIkrB,QAKNz4B,EAAOD,QAAU,GAAI+6C,I7G05Qf,SAAS96C,EAAQD,EAASH,GAE/B,Y8G9hRD,SAASsgC,KACRp4B,KAAK60C,oBAXN,GAAM3e,GAAQp+B,EAAQ,IAChB4I,EAAS5I,EAAQ,IACjBg9C,EAAWh9C,EAAQ,KACnB+hC,EAAY/hC,EAAQ,IAW1BsgC,GAAK7+B,UAAU+M,IAAM,SAAU6F,GAC9B+pB,EAAMwF,QAAO,EAAM17B,KAAK60C,iBAAkB1oC,IAG3CisB,EAAK7+B,UAAU6H,KAAO,WAAW,GAAAR,GAAAZ,IAChCA,MAAKU,OAASA,EAAO,QACjBV,KAAKU,QAAUV,KAAKU,OAAOvI,KAAI,WAG7BQ,OAAOy/B,QACTz/B,OAAOy/B,KAAO,WACfz/B,OAAOy/B,KAAKzZ,EAAEld,KAAKjB,aACjBme,MAIJ/d,EAAKm0C,IAAMp8C,OAAOy/B,KAEfx3B,EAAKF,OAAO05B,aACdx5B,EAAK0F,IAAI1F,EAAKF,OAAO05B,YACrBx5B,EAAKo0C,cAAc,aAAcp0C,EAAKi0C,iBAAiB7a,UACvDp5B,EAAKo0C,cAAc,aAAcp0C,EAAKi0C,iBAAiBpqB,UACvD7pB,EAAKo0C,cAAc,GAAIp0C,EAAKi0C,iBAAiBI,YAG9C,IAAIvuC,UACEpO,EAAI49B,EAAMkK,cAAc/G,MAAM,kBAChC/gC,KACHoO,EAAM86B,mBAAmBlpC,EAAE,IAG5B,IAAM48C,GAAW,iDAAiD9yC,KAAKsE,GAAOA,EAAc,YAARA,EAAoB,GAApB,6BAAsD9F,EAAKF,OAAOvI,GAAlE,MAE9Eg9C,EAAiB,WACtBjf,EAAM0I,OAAOsW,GAAU,EAAM,WAC5Bhf,EAAMtd,UAAU,sBAEjBhY,EAAKw0C,OAAOh0C,OAEbrI,YAAW,WACP,uBAAyBJ,QAC3B08C,oBAAoBF,GAEpBA,KAEC,KAEHtb,EAAUvzB,IAAI1F,EAAKi5B,iBAYrBzB,EAAK7+B,UAAUg/B,SAAW,SAASh0B,GAClC,GAAI3K,SASJ,OARA2K,QAAYA,EAER5L,OAAOwiC,cAAgBA,aAAaC,QAAQ72B,GAC/C3K,EAAQuhC,aAAaC,QAAQ72B,GACnB2xB,EAAM5zB,OAAOiC,KACvB3K,EAAQs8B,EAAM5zB,OAAOiC,IAGf3K,GASRw+B,EAAK7+B,UAAU+7C,SAAW,WACzB,MAAOt1C,MAAKu4B,SAAS,SAUtBH,EAAK7+B,UAAUsgC,UAAY,WAC1B,GAAI0b,GAAOv1C,KAAKs1C,UAUhB,OARIC,KACHA,EAAOA,EAAK1lC,MAAM,KAEdnP,EAAO,QAAQy3B,QAClBod,EAAOA,EAAKjtC,MAAM,EAAG5H,EAAO,QAAQy3B,UAKrCG,KAAQt4B,KAAKu4B,SAAS,QACtBid,IAAOD,EACPE,MAAS/nB,mBAAmB7H,SAAS6vB,UACrCC,IAAOJ,GAAQA,EAAK90C,OAAS,EAAI,OAAS,UAU5C23B,EAAK7+B,UAAU67C,QACdQ,WAAY,SAASl1C,GAAQ,GAAA2X,GAAArY,IAExBU,KAAQ,WACX,GAAMmjC,GAAOxrB,EAAKwrB,KACZO,EAAW1jC,EAAO0jC,UAAY,EAC9B/zB,EAAO3P,EAAOm1C,MAAQzR,GAAa,IACnC7zB,EAAM7P,EAAOvI,EACnB+9B,GAAMkL,OAAOnzB,OAAOm2B,EAAW,WAC9B,MAAO,YACNP,EAAKtzB,GAAMqlC,WAAa51C,KAAKokC,SAAWpkC,KAAKqnC,MAAS,UAElDh3B,GAAMu3B,OAAO,QAGrBkO,UAAW,SAASp1C,GAAQ,GAAAyrC,GAAAnsC,IAEvBrH,QAAO0K,kBAEN3C,IAAQ,WACX,GAAMmjC,GAAOsI,EAAKtI,KACZkS,EAAa,SAASC,GAC3B,MAAO,YACNnS,EAAKnjC,EAAOs1C,GAAO79C,KAIrBQ,QAAO0K,iBAAiB,OAAQ,WAC/B,GAAM4yC,GAAU,GAAInB,GAASzyC,SAAS2W,KACtC,KAAK,GAAIg9B,KAASt1C,GAEbA,EAAOlH,eAAew8C,IACzBC,EAAQrb,GAAGl6B,EAAOs1C,GAAOE,MAAOx1C,EAAOs1C,GAAOG,SAAUJ,EAAWC,MAGnE,QAMP5d,EAAK7+B,UAAU67C,OAAOvR,KAAO,SAAS1rC,EAAIu2C,GAEzC,QAAIv2C,IACHu2C,EAAQxY,EAAMmH,cAAcqR,GAASA,KAC9B/1C,OAAOy/B,KAAK,WAAYjgC,EAAIu2C,KAMrCtW,EAAK7+B,UAAU67C,OAAOh0C,KAAO,WAC5B,GAAI6X,UACKm9B,EAAa11C,EAAO,SAAWA,EAAO,QAAQ00C,MAEvD,IAAIlf,EAAMmH,cAAc+Y,GACvB,IAAKn9B,IAASm9B,GAETlgB,EAAM/V,WAAWngB,KAAKiZ,IACzBjZ,KAAKiZ,GAAOm9B,EAAWn9B,IACbid,EAAM/V,WAAWi2B,EAAWn9B,GAAOnM,KAC7CspC,EAAWn9B,GAAOnM,GAAGspC,EAAWn9B,KAMpCmf,EAAK7+B,UAAUy7C,cAAgB,SAAUqB,EAAQjc,GAAY,GAAA6X,GAAAjyC,IAEzDo6B,IACF9gC,OAAOiQ,KAAK6wB,GAAY1X,QAAQ,SAAAkQ,GAC/Bqf,EAAK8C,IAAI,MAAOsB,EAASzjB,EAAMwH,EAAWxH,OAK7CwF,EAAK7+B,UAAU4rB,MAAQ,WACtB,GAAM1f,GAAMywB,EAAMzwB,GAClB,IAAKzF,KAAKU,OAAV,CAUC,GAPD+E,EAAIirB,MAAM,SACTjrB,EAAI,SAAU,oBAAqBzF,KAAKU,OAAOvI,IAE3C6H,KAAKU,OAAOy3B,OACf1yB,EAAI,oBAAqB,oBAAqBzF,KAAKU,OAAOy3B,OAGvDn4B,KAAKU,OAAO05B,WAAY,CAC3B,GAAMA,GAAap6B,KAAKU,OAAO05B,UAC/B30B,GAAIirB,MAAM,cACTjrB,EAAIirB,MAAM,QACTjrB,EAAI4jC,eAAejP,EAAWJ;AAC/Bv0B,EAAIkrB,MAEJlrB,EAAIirB,MAAM,QACTjrB,EAAI4jC,eAAejP,EAAW3P,MAC/BhlB,EAAIkrB,MAEJlrB,EAAIirB,MAAM,UACTjrB,EAAI4jC,eAAejP,EAAW6a,QAC/BxvC,EAAIkrB,MACLlrB,EAAIkrB,MAEL,GAAI3wB,KAAKU,OAAO00C,OAAQ,CACvB,GAAMA,GAASp1C,KAAKU,OAAO00C,MAC3B3vC,GAAIirB,MAAM,UACL0kB,EAAOQ,aACVnwC,EAAIirB,MAAM,cACTjrB,EAAI,eAAgB,oBAAqB2vC,EAAOQ,WAAWxR,UAC3D3+B,EAAI,SAAU,oBAAqB2vC,EAAOQ,WAAWz9C,IACrDsN,EAAI,YAAa,oBAAqB2vC,EAAOQ,WAAWC,OACzDpwC,EAAIkrB,OAELlrB,EAAIirB,MAAM,aACTjrB,EAAI0jC,MAAMiM,EAAOU,WAClBrwC,EAAIkrB,MACLlrB,EAAIkrB,MAGL,GAAMkJ,GAAY75B,KAAK65B,WACvBp0B,GAAIirB,MAAM,aACTjrB,EAAI4jC,eAAexP,GACpBp0B,EAAIkrB,KAEJ,IAAM1rB,GAAOuM,MAAMupB,KAAK14B,SAASwV,iBAAiB,gBAC9C5S,GAAKxE,SACRgF,EAAIirB,MAASzrB,EAAKxE,OAAlB,sBACCwE,EAAKyd,QAAQ,SAAS5R,GACrBrL,EAAIqL,EAAI4hC,QAAQ4D,MAAOxlC,EAAIjL,cAAc,aAE3CJ,EAAIkrB,OAENlrB,EAAIkrB,QAGLz4B,EAAOD,QAAU,GAAImgC,I9G2jRf,SAASlgC,EAAQD,EAASH,G+Gn0RhCI,EAAAD,QAAAH,EAAA,M/Gy0RM,SAASI,EAAQD,GgHv0RvB,YAcA,SAAS68C,GAASyB,GAQhBv2C,KAAKw2C,oBACDD,GACFv2C,KAAKu2C,KAAKA,GAIZv2C,KAAKy2C,OAAS3B,EAASv7C,UAAUk9C,OAAOr2C,KAAKJ,MAmW/C,QAAS02C,GAAWxY,EAASna,GAC3B,MAAOma,GAAQta,gBAAkBG,EAAQma,QAAQta,cAWnD,QAAS+yB,GAAYR,EAAUpyB,GAE7B,MAAI/jB,MAAK42C,cAAgBj+C,OAAeorB,IAAY1hB,SAC7CrC,KAAK42C,cAAgB7yB,EAc9B,QAAS8yB,GAAU1+C,EAAI4rB,GACrB,MAAO5rB,KAAO4rB,EAAQ5rB,GA3ZxBD,EAAOD,QAAU68C,EAoCjBA,EAASv7C,UAAUg9C,KAAO,SAASA,GACjC,GACIvwB,GADAwwB,EAAcx2C,KAAKw2C,WAIvB,IAAIx2C,KAAK42C,YAAa,CACpB,IAAK5wB,IAAawwB,GAAY,GACxBA,EAAY,GAAGh9C,eAAewsB,IAChChmB,KAAK42C,YAAY/5B,oBAAoBmJ,EAAWhmB,KAAKy2C,QAAQ,EAGjE,KAAKzwB,IAAawwB,GAAY,GACxBA,EAAY,GAAGh9C,eAAewsB,IAChChmB,KAAK42C,YAAY/5B,oBAAoBmJ,EAAWhmB,KAAKy2C,QAAQ,GAQnE,IAAKF,IAASA,EAAKlzC,iBAIjB,MAHIrD,MAAK42C,mBACA52C,MAAK42C,YAEP52C,IASTA,MAAK42C,YAAcL,CAGnB,KAAKvwB,IAAawwB,GAAY,GACxBA,EAAY,GAAGh9C,eAAewsB,IAChChmB,KAAK42C,YAAYvzC,iBAAiB2iB,EAAWhmB,KAAKy2C,QAAQ,EAG9D,KAAKzwB,IAAawwB,GAAY,GACxBA,EAAY,GAAGh9C,eAAewsB,IAChChmB,KAAK42C,YAAYvzC,iBAAiB2iB,EAAWhmB,KAAKy2C,QAAQ,EAI9D,OAAOz2C,OAOT80C,EAASv7C,UAAUu9C,eAAiB,SAAS9wB,GAC3C,OAAQ,OAAQ,QAAS,QAAS,OAAQ,SAAU,UAAUnC,QAAQmC,SA4BxE8uB,EAASv7C,UAAUqhC,GAAK,SAAS5U,EAAWmwB,EAAUjoB,EAAS6oB,GAC7D,GAAIR,GAAMC,EAAaQ,EAASC,CAEhC,KAAKjxB,EACH,KAAM,IAAIljB,WAAU,uBAAyBkjB,EAiB/C,IAZwB,kBAAbmwB,KACTY,EAAa7oB,EACbA,EAAUioB,EACVA,EAAW,MAKM76C,SAAfy7C,IACFA,EAAa/2C,KAAK82C,eAAe9wB,IAGZ,kBAAZkI,GACT,KAAM,IAAIprB,WAAU,qCAyCtB,OAtCAyzC,GAAOv2C,KAAK42C,YACZJ,EAAcx2C,KAAKw2C,YAAYO,EAAa,EAAI,GAG3CP,EAAYxwB,KACXuwB,GACFA,EAAKlzC,iBAAiB2iB,EAAWhmB,KAAKy2C,OAAQM,GAEhDP,EAAYxwB,OAGTmwB,EAQM,YAAY/zC,KAAK+zC,IAC1Bc,EAAed,EACfa,EAAUN,GACD,mBAAmBt0C,KAAK+zC,IACjCc,EAAed,EAAS7tC,MAAM,GAC9B0uC,EAAUH,IAEVI,EAAed,EACfa,EAAUrU,IAfVsU,EAAe,KAIfD,EAAUL,EAAYv2C,KAAKJ,OAe7Bw2C,EAAYxwB,GAAWvkB,MACrB00C,SAAUA,EACVjoB,QAASA,EACT8oB,QAASA,EACTC,aAAcA,IAGTj3C,MAaT80C,EAASv7C,UAAUkoB,IAAM,SAASuE,EAAWmwB,EAAUjoB,EAAS6oB,GAC9D,GAAIjzC,GAAGozC,EAAUV,EAAaW,EAAcC,CAY5C,IARwB,kBAAbjB,KACTY,EAAa7oB,EACbA,EAAUioB,EACVA,EAAW,MAKM76C,SAAfy7C,EAGF,MAFA/2C,MAAKyhB,IAAIuE,EAAWmwB,EAAUjoB,GAAS,GACvCluB,KAAKyhB,IAAIuE,EAAWmwB,EAAUjoB,GAAS,GAChCluB,IAIT,IADAw2C,EAAcx2C,KAAKw2C,YAAYO,EAAa,EAAI,IAC3C/wB,EAAW,CACd,IAAKoxB,IAAmBZ,GAClBA,EAAYh9C,eAAe49C,IAC7Bp3C,KAAKyhB,IAAI21B,EAAiBjB,EAAUjoB,EAIxC,OAAOluB,MAIT,GADAm3C,EAAeX,EAAYxwB,IACtBmxB,IAAiBA,EAAa12C,OACjC,MAAOT,KAKT,KAAK8D,EAAIqzC,EAAa12C,OAAS,EAAGqD,GAAK,EAAGA,IACxCozC,EAAWC,EAAarzC,GAElBqyC,GAAYA,IAAae,EAASf,UAAejoB,GAAWA,IAAYgpB,EAAShpB,SACrFipB,EAAa7oB,OAAOxqB,EAAG,EAc3B,OATKqzC,GAAa12C,eACT+1C,GAAYxwB,GAGfhmB,KAAK42C,aACP52C,KAAK42C,YAAY/5B,oBAAoBmJ,EAAWhmB,KAAKy2C,OAAQM,IAI1D/2C,MAST80C,EAASv7C,UAAUk9C,OAAS,SAASx9B,GACnC,GAAInV,GAAGqE,EAAsBouC,EAAMc,EAAOH,EAAUI,EAA6BnrC,EAAvExK,EAAOsX,EAAMtX,KAAuCw1C,KAAyCI,EAAc,sBAErH,IAAIt+B,EAAMs+B,MAAiB,EAA3B,CAgBA,OAZAprC,EAAS8M,EAAM9M,OAIS,IAApBA,EAAO4xB,WACT5xB,EAASA,EAAOyR,YAGlB24B,EAAOv2C,KAAK42C,YAEZS,EAAQp+B,EAAMu+B,aAAgBv+B,EAAM9M,SAAW8M,EAAMw+B,cAAgB,EAAI,IAGvE,IAAK,GACHN,EAAen3C,KAAKw2C,YAAY,GAAG70C,EACrC,MACA,KAAK,GACC3B,KAAKw2C,YAAY,IAAMx2C,KAAKw2C,YAAY,GAAG70C,KAAOw1C,EAAeA,EAAavmC,OAAO5Q,KAAKw2C,YAAY,GAAG70C,KACzG3B,KAAKw2C,YAAY,IAAMx2C,KAAKw2C,YAAY,GAAG70C,KAAOw1C,EAAeA,EAAavmC,OAAO5Q,KAAKw2C,YAAY,GAAG70C,IAC/G,MACA,KAAK,GACHw1C,EAAen3C,KAAKw2C,YAAY,GAAG70C,GAUvC,IADAwG,EAAIgvC,EAAa12C,OACV0L,GAAUhE,GAAG,CAClB,IAAKrE,EAAI,EAAGA,EAAIqE,IACd+uC,EAAWC,EAAarzC,GAMnBozC,GAPYpzC,IAwBjB,GAPIozC,EAASF,QAAQ3+C,KAAK8T,EAAQ+qC,EAASD,aAAc9qC,KACvDmrC,EAAWt3C,KAAK6jC,KAAK5qB,EAAO9M,EAAQ+qC,IAMlCI,KAAa,EAGf,MAFAr+B,GAAMs+B,IAAe,MACrBt+B,GAAMy+B,gBAUV,IAAIvrC,IAAWoqC,EACb,KAGFpuC,GAAIgvC,EAAa12C,OACjB0L,EAASA,EAAO8X,iBAYpB6wB,EAASv7C,UAAUsqC,KAAO,SAAS5qB,EAAO9M,EAAQ+qC,GAChD,MAAOA,GAAShpB,QAAQ71B,KAAK8T,EAAQ8M,EAAO9M,GAU9C,IAAIw2B,GAAW,SAASzyB,GACtB,GAAKA,EAAL,CACA,GAAI1X,GAAI0X,EAAG3W,SACX,OAAQf,GAAEmqC,SAAWnqC,EAAEm/C,iBAAmBn/C,EAAEo/C,uBAAyBp/C,EAAEq/C,oBAAsBr/C,EAAEs/C,mBAAqBt/C,EAAEu/C,mBACtHC,QAsDFlD,GAASv7C,UAAU6pB,QAAU,WAC3BpjB,KAAKyhB,MACLzhB,KAAKu2C,ShH21RD,SAASr+C,EAAQD,EAASH,GAE/B,YiH1vSD,SAASmgD,MAHT,GAAM/hB,GAAQp+B,EAAQ,IAChB4I,EAAS5I,EAAQ,GAMvBmgD,GAAQ1+C,UAAU6H,KAAO,WAAW,GAAAR,GAAAZ,IAGnC,IAFAA,KAAKqhC,MAAQnL,EAAMmL,MAAMrhC,KAAKk4C,cAAc93C,KAAKJ,OACjDA,KAAKU,OAASA,EAAO,eACjBV,KAAKU,OAAOvI,IAAM6H,KAAKU,OAAOyxC,KAAM,CACvC,GAAI4C,GAAM/0C,KAAKU,OAAOq0C,KAAO,qEAC7BA,IAAU/0C,KAAKU,OAAOvI,GAAtB,IAA4B6H,KAAKU,OAAOyxC,KACxCjc,EAAM0I,OAAOmW,GAAK,EAAM,WACvBn0C,EAAKygC,MAAMwH,WACT,WACFjoC,EAAKygC,MAAMuH,aAAa,SAASlS,GAChCR,EAAMzwB,IAAIe,MAAM,+BAAgCkwB,EAAKnyB,QACnDskC,YAGJ3S,EAAM0E,GAAG,QAAS,SAAA3hB,GACjBrY,EAAKygC,MAAM/6B,IAAI2S,EAAME,OAAOud,UAW/BuhB,EAAQ1+C,UAAU2+C,cAAgB,SAASxhB,GAC1C,GAAMh2B,GAASV,KAAKU,OACd+5B,IAAQ/5B,EAAOy3C,OAASz3C,EAAOy3C,MAAMzhB,EAAKnyB,MAC1CmlC,IAAQhpC,EAAOs7B,SAAWt7B,EAAOs7B,QAAQtF,EAAKnyB,KAEhDk2B,IAAQiP,IAEX/wC,OAAOy/C,OAAS,YAChBz/C,OAAO0/C,YAAcr4C,KAAKs4C,yBAAyBl4C,KAAK,KAAMs2B,EAAMh2B,EAAOyL,QAC3ExT,OAAO4/C,aAAe,MACtB5/C,OAAO6/C,UAAW,EAClB7/C,OAAO8/C,eAAiB/3C,EAAOg4C,SAAU,EACzC//C,OAAOggD,QAAaj4C,EAAOvI,GAA3B,IAAiCuI,EAAOyxC,KACxCx5C,OAAOigD,gBAAkBlP,EACzB/wC,OAAOkgD,QAAUpe,EACjB9hC,OAAOmgD,eAWTb,EAAQ1+C,UAAU++C,yBAA2B,SAAS5hB,EAAMvqB,EAAQovB,GACnE7E,EAAKC,UAAU1Z,aAAa,iBAAkBse,EAAQwd,SAASC,MAC3D7sC,IACHuqB,EAAKmD,UAAUof,IAAM1d,EAAQwd,SAASC,OAIxC9gD,EAAOD,QAAU,GAAIggD,IjH8wSf,SAAS//C,EAAQD,EAASH,GAE/B,YkHx1SD,SAASohD,MALT,GAAMhjB,GAAQp+B,EAAQ,IAChB4I,EAAS5I,EAAQ,IACjB+hC,EAAY/hC,EAAQ,IAO1BohD,GAAQ3/C,UAAU6H,KAAO,WACxBpB,KAAKU,OAASA,EAAO,eACjBV,KAAKU,OAAOvI,KACf6H,KAAKsR,YAActR,KAAKU,OAAO4Q,cAAgB6nC,SAAS,GACxDn5C,KAAK+0C,IAAM/0C,KAAKU,OAAO4E,KAAO,wDAC9BtF,KAAKo5C,mBAIPF,EAAQ3/C,UAAU6/C,eAAiB,WAClC,GAAMC,IACLhgD,IAAO2G,KAAKU,OAAOvI,GACnB+7B,OAAS,aACTkc,KAAO,QACPkJ,UAAY,cACZre,QAAU,WACVt5B,KAAO,MACPqX,KAAQ0U,mBAAmBwI,EAAMkK,gBAE5B96B,EAAMtF,KAAK+0C,IAAMrnB,mBAAmBhoB,KAAKC,UAAU0zC,GACzDr5C,MAAKu/B,IAAMrJ,EAAMoJ,kBAAkBh6B,EAAK,MAAOtF,KAAKyC,QAAQrC,KAAKJ,MAAOA,KAAKyC,QAAQrC,KAAKJ,QAG3Fk5C,EAAQ3/C,UAAUggD,kBAAoB,SAASC,EAAYnpC,GAG1D,IAAK,GAFCZ,MACA8X,EAAI2O,EAAMiI,UAAU9tB,GAAO7H,KAAK4H,IAAIC,EAAKmpC,EAAW/4C,QAAU+4C,EAAW/4C,OACtEqD,EAAE,EAAGA,EAAIyjB,EAAGzjB,IACpB2L,EAAMhO,KAAK+3C,EAAW11C,GAAGS,MAAQi1C,EAAW11C,GAG7C,OAAO2L,IAGRypC,EAAQ3/C,UAAUkJ,QAAU,SAASw3B,GACpC,GAAM3oB,GAActR,KAAKsR,YACnBmoC,KACFD,SACAE,QAEJ,IAAIxjB,EAAMhP,SAAS+S,GAClB,IACCA,EAAWv0B,KAAK8e,MAAMyV,GACrB,MAAO3sB,GAGR2sB,GAAW,EAMb,GAAIA,EAAU,CACb,IAAKuf,IAAcloC,GAEdA,EAAY9X,eAAeggD,IAAeloC,EAAYkoC,IAAevf,EAASuf,KACjFE,EAAYF,EAAWv/B,OAAO,EAAG,GACjCw/B,EAAaC,GAAa15C,KAAKu5C,kBAAkBtf,EAASuf,GAAaloC,EAAYkoC,IAIrF3f,GAAUvzB,IAAImzC,KAIhBP,EAAQ3/C,UAAU4rB,MAAQ,WACzB,GAAM1f,GAAMywB,EAAMzwB,GAEbzF,MAAKU,SAIV+E,EAAIirB,MAAM,WACTjrB,EAAI,SAAU,oBAAqBzF,KAAKU,OAAOvI,IAC/CsN,EAAI,UAAW,oBAAqBzF,KAAK+0C,KAErC/0C,KAAKU,OAAO4Q,cACf7L,EAAIirB,MAAM,eACTjrB,EAAI,cAAe,oBAAqBzF,KAAKU,OAAO4Q,YAAY6nC,SAChE1zC,EAAI,iBAAkB,oBAAqBzF,KAAKU,OAAO4Q,YAAYqoC,YACpEl0C,EAAIkrB,OAGD3wB,KAAKu/B,KAAOv/B,KAAKu/B,IAAItF,WACxBx0B,EAAIirB,MAAM,YACTjrB,EAAIirB,MAAM,WACTjrB,EAAI4jC,eAAerpC,KAAKu/B,IAAItF,SAASkf,SAAU,UAChD1zC,EAAIkrB,MACJlrB,EAAIirB,MAAM,cACTjrB,EAAI4jC,eAAerpC,KAAKu/B,IAAItF,SAAS0f,YAAa,UACnDl0C,EAAIkrB,MACLlrB,EAAIkrB,OAENlrB,EAAIkrB,QAGLz4B,EAAOD,QAAU,GAAIihD,IlHg2Sf,SAAShhD,EAAQD,GAEtB,YmHz8SD,SAAS6f,GAAUC,EAAMC,EAAM4hC,GAC9B,GAAI3hC,SACJ,OAAO,YACN,GAAM2K,GAAU5iB,KACVsV,EAAO9U,UACP0X,EAAQ,WACbD,EAAU,KACL2hC,GAAW7hC,EAAK1L,MAAMuW,EAAStN,IAE/BukC,EAAUD,IAAc3hC,CAC9BE,cAAaF,GACbA,EAAUlf,WAAWmf,EAAOF,GACxB6hC,GACH9hC,EAAK1L,MAAMuW,EAAStN,IAKvB,QAASwiB,KACR,GAAM/T,GAAU1hB,SAASwD,cAAc,kBACvC,OAAIke,GACIA,EAAQzf,aAAa,iBAEtB,UAIR,QAASw1C,KACR,GAAIC,GAAS,UACPC,EAAY33C,SAASwD,cAAc,kBACzC,IAAoD,IAAhDlN,OAAOktB,SAASya,OAAOzc,QAAQ,aAAoB,CACtD,GAAMjK,GAAQ,GAAInD,QAAO,6BACzBsjC,GAASngC,EAAMpM,KAAK7U,OAAOktB,SAASya,OAAOpP,UAAU,IAAI,OAEjD7uB,UAASwD,cAAc,uBAC/Bk0C,EAAS13C,SAASwD,cAAc,qBAAqBvB,aAAa,mBAEnE,IAAG01C,EAAW,CACb,GAAMC,GAAUD,EAAU11C,aAAa,iBACjC41C,EAAcD,GAAWA,EAAQ5gB,MAAM,kDAC1C6gB,IAAeA,EAAYz5C,OAAS,IACtCs5C,cAAqBG,EAAY,IAInC,MAAOH,GAGR,QAASI,GAAa51C,GACrB,GAAMyR,GAAO3T,SAASwD,cAAc,cAActB,EAAK,KACvD,SAAIyR,GACIA,EAAK1R,aAAa,WAK3B,QAAS81C,GAAgBlhD,GACxB,MAAOI,QAAOiQ,KAAKrQ,GAAK2d,IAAI,SAAUxd,GACrC,MAAOA,GAAM,IAAMH,EAAIG,KACrB6kB,KAAK,KAGT,QAAS0hB,KACR,MAAOv9B,UAAS2nB,SAGjB,QAAS+M,GAASsjB,GACjB,MAA+B,QAAxBA,EAASC,YAAwD,IAAjCD,EAASC,WAAWvc,UAAwD,SAAtCsc,EAASC,WAAW1rC,MAAMC,QAGxG,QAASpJ,KACR,GAAI9D,UACA2T,SACAwzB,QACA,uBAAsBjlB,QAAQrjB,UAAU,UAC3CmB,EAAO,MACPmnC,EAAY,IAEZnnC,EAAOnB,UAAU,GACjBsoC,EAAY,GAGbxzB,KAAUhN,MAAMjQ,KAAKmI,UAAWsoC,GAE3BrjC,EAAIsjC,QAAWpwC,OAAOiL,SAAYjL,OAAOiL,QAAQjC,IAItDhJ,OAAOiL,QAAQjC,GAAM0K,MAAM1T,OAAOiL,QAAS0R,GAG5C7P,EAAI0d,KAAO,WACV,GAAM7N,IAAQ,QAAQ1E,UAAUtI,MAAMjQ,KAAKmI,UAAW,GACtDiF,GAAI4G,MAAM,KAAMiJ,IAGjB7P,EAAIe,MAAQ,WACX,GAAM8O,IAAQ,SAAS1E,UAAUtI,MAAMjQ,KAAKmI,UAAW,GACvDiF,GAAI4G,MAAM,KAAMiJ,IAGjB7P,EAAI6d,KAAO,WACV,GAAMhO,IAAQ,QAAQ1E,UAAUtI,MAAMjQ,KAAKmI,UAAW,GACtDiF,GAAI4G,MAAM,KAAMiJ,IAGjB7P,EAAIirB,MAAQ,WACPjrB,EAAIsjC,QAAWpwC,OAAOiL,SAAYjL,OAAOiL,QAAQqlC,gBAIrDtwC,OAAOiL,QAAQqlC,eAAe,uBAG/BxjC,EAAIkrB,IAAM,WACJlrB,EAAIsjC,QAAWpwC,OAAOiL,SAAYjL,OAAOiL,QAAQslC,UAItDvwC,OAAOiL,QAAQslC,YAGhBzjC,EAAIsjC,KAAO,WACV,MAAOljB,UAASya,OAAOzc,QAAQ,iBAGhC3rB,EAAOD,SACN6f,SAAUA,EACVggB,WAAYA,EACZgiB,cAAeA,EACfK,YAAaA,EACbva,YAAaA,EACbwa,eAAgBA,EAChBrjB,QAASA,EACTtxB,IAAKA,InH+8SA,SAASvN,EAAQD,EAASH,GAE/B,YoHnlTD,SAASyiD,GAAmBv5C,GAC3B,OAAOA,EAAMw5C,qBACZ,IAAK,SACJ,OAAO,CACR,KAAK,OACJ,OAASxO,eAAgB,SAC1B,KAAK,QACJ,OAASA,eAAgB,UAC1B,SACC,OAASA,eAAgB,OAd5B,GAAM9V,GAAQp+B,EAAQ,KAChB2iD,EAAU3iD,EAAQ,KAClB4jC,EAAS5jC,EAAQ,IAASo+B,MAAMwF,OAChCgf,EAAa,4BAenBxiD,GAAOD,QAAU,SAAU+I,GAuB1B,QAAS25C,GAAwBz1C,GAChC,GAAIsS,UACAlS,SACEo1C,EAAa,4BACnB,IAAgB,YAAZx1C,EAAuB,CAC1BsS,EAAOnV,SAASwD,cAAc,qBAAqBvB,aAAa,kBAEhE,IAAM0lB,GAAWkM,EAAM0J,aACvBt6B,GAASo1C,EAAT,WAA8BljC,EAC3BwS,IACF1kB,gBAAoBooB,mBAAmB1D,EAASna,MAAM,QAAQ,SAEzC,gBAAZ3K,IACVsS,EAAOnV,SAASwD,cAAc,qBAAqBvB,aAAa,mBAChEgB,EAASo1C,EAAT,WAA8BljC,EAG/B,OAAOlS,GAGR,QAASs1C,KACR,GAAIngB,IAASvE,EAAMikB,YAAY,YAAajkB,EAAMikB,YAAY,aAAclf,OAAQ,SAAAjzB,GAAA,MAAKA,IAIzF,OAHIyyB,GAAKh6B,SACRg6B,GAAQ,iBAEFA,EAAKvc,KAAK,KA/ClB,GAAM28B,GAAW3kB,EAAM4B,aACjBgjB,EAAWz4C,SAASC,OAAO+2B,MAAM,aAGjC0hB,GACLC,IAAKF,GAAYA,EAASr6C,OAAS,EAAIq6C,EAAS,GAAK,MAGhDjhB,EAAY6B,GACjBuf,GAAIJ,EAASj3B,cAAc3J,OAAO,EAAG,GACrCihC,QAAShlB,EAAM4jB,iBACbiB,GAGGI,EAAcn6C,EAAMvF,IAAI,UAC7BtD,GAAI,WACJiiC,YACC3P,KAAMswB,EACN/gB,SAgCF,QACClD,KACCob,QAAS,OACTC,KAAMsI,EAAQW,WAAa,kBAAmB,SAC9C3gB,KAAMmgB,KAEP5e,SACCqf,UACCnf,MAAO,UAGT5E,KAAM6jB,EACNjO,cAAe,SACf/W,cAAeD,EAAMkkB,eAAevgB,GACpC93B,SAAUw4C,EAAkBv5C,GAC5B84B,cACCrP,KAASiwB,EAAT,OACA1gB,KAAM2gB,EAAuBE,GAC7BtgB,aAAa,MpHkmTV,SAASriC,EAAQD,GAEtB,YqH3rTD,SAASwiD,KACR,MAAO50B,UAASyY,KAAKza,QAAQ,gBAG9B3rB,EAAOD,QAAQmjD,SAAWX,GrHisTpB,SAASviD,EAAQD,GAEtB,YsHjsTD,SAAS4+B,GAAUH,GAClB12B,KAAKU,QACJ46C,SAAU,8BACVC,aAAc,4DACdC,YAAa,mBACbC,SAAU,uBAGXz7C,KAAK07C,QACJ5kB,KACC0V,WAAY9V,EAAKI,IAAI0V,WACrBE,WAAYhW,EAAKI,IAAI4V,WACrBhD,KAAMhT,EAAKI,IAAI4S,KACf0H,YAAa1a,EAAKI,IAAIsa,YACtB9E,SAAU5V,EAAKI,IAAIwV,UAEpBzS,UAAWnD,EAAKmD,WAEjB75B,KAAK22B,UAAYD,EAAKC,UACtB32B,KAAK27C,KAAO37C,KAAK47C,qBACjB57C,KAAK67C,eAAiB77C,KAAK87C,SAAS,QAAS97C,KAAK+7C,QAAS/7C,MAC3DA,KAAKg8C,aAAc,EAQpBnlB,EAASt9B,UAAUuiD,SAAW,SAAU7iC,EAAOiV,EAASsF,GACvD,GAAIyoB,SAIJ,OAHAj8C,MAAK27C,KAAKt4C,iBAAiB4V,EAAOgjC,EAAW,SAAU3uC,GACtD4gB,EAAQ71B,KAAKm7B,EAAQlmB,KAEf2uC,GAMRplB,EAASt9B,UAAU2iD,YAAc,SAAUjjC,EAAOiV,GACjDluB,KAAK27C,KAAK9+B,oBAAoB5D,EAAOiV,IAGtC2I,EAASt9B,UAAU6pB,QAAU,WAC5BpjB,KAAKk8C,YAAY,QAASl8C,KAAK67C,gBAC5B77C,KAAK27C,MACP37C,KAAK27C,KAAK13B,cAAc9E,YAAYnf,KAAK27C,OAS3C9kB,EAASt9B,UAAUqiD,mBAAqB,WACvC,GAAIO,GAAM95C,SAASqL,cAAc,SAKjC,OAJAyuC,GAAI91C,UAAUC,IAAItG,KAAKU,OAAO+6C,UAC9BU,EAAI73B,UAAYtkB,KAAKU,OAAO86C,YAE5Bx7C,KAAK22B,UAAU7nB,YAAYqtC,GACpBn8C,KAAK22B,UAAUkY,WAQvBhY,EAASt9B,UAAU6iD,WAAa,SAAUC,GAEzC,MADAr8C,MAAK27C,KAAKr3B,UAAY+3B,EACfr8C,MAOR62B,EAASt9B,UAAUwiD,QAAU,SAAUzuC,GACtCA,EAAEoqC,iBACC13C,KAAKg8C,YACPrjD,OAAOqW,KAAKhP,KAAKU,OAAO66C,aAAc,UAEtCv7C,KAAKs8C,SAASt8C,KAAK07C,SAQrB7kB,EAASt9B,UAAU+iD,SAAW,SAAUzjC,GAAM,GAAAjY,GAAAZ,IAK7C,IAFAA,KAAKg8C,aAAc,GAEdh8C,KAAK07C,OAET,WADA17C,MAAKo8C,WAAW,mCAIjB,IAAM72C,IACL2uB,OAAQ,OACRpU,SACCy8B,OAAU,mBACVC,eAAgB,oBAEjBC,YAAa,UACbzjC,KAAMtT,KAAKC,UAAUkT,GAGtBxT,OAAMrF,KAAKU,OAAO46C,SAAU/1C,GAC1BvD,KAAK,SAAUi4B,GACf,GAAwB,MAApBA,EAASyiB,OACZ,KAAMr7B,OAAM4Y,EAAS0iB,YAAc1iB,EAASyiB,OAE7C,OAAOziB,GAASpJ,SAEhB7uB,KAAK,SAACi4B,GACNr5B,EAAKw7C,WAAW,YAAcniB,EAAW,2BAR3C50B,SAUQ,SAACG,GAEP,MADA5E,GAAKw7C,WAAW,4CACTx4C,QAAQ4C,MAAR,wBAAsChB,MAIhDtN,EAAOD,QAAU4+B,GtH0sTX,SAAS3+B,EAAQD,EAASH,GAE/B,YuHl1TD,IAAA2C,GAAA3C,EAAA,GAEAI,GAAOD,QAAU,SAAC2kD,EAAeC,GAChC,GAAMxjC,GAAc1gB,OAAO0gB,aAAe1gB,OAAO4gB,eAAiB5gB,OAAO6gB,mBAAqB7gB,OAAO8gB,cACrG,IAAIJ,GAAeA,EAAYK,MAAQkjC,EAAe,CACrD,GAAME,GAAUC,EAAkB1jC,EAAaujC,GACzCI,EAAQC,EAAgB5jC,EAAaujC,IAE3C,EAAAniD,EAAAme,WAAU,mBACTskC,SAAU,MACVvkC,OAAQ,aACRwkC,SAAWL,UAASE,SACpBI,UACCjlD,GAAI0kD,EAAY/lB,IAAI0V,WACpB4E,YAAayL,EAAY/lB,IAAIsa,YAC7B1H,KAAMmT,EAAYlmB,UAAUryB,aAAa,yBAO7C,IAAMy4C,GAAoB,SAAC1jC,EAAa8jC,GACvC,GAAML,KAQN,OAPAxjD,QAAOiQ,KAAK4zC,GAASz6B,QAAQ,SAAC26B,GAC7BP,EAAQO,IACPC,yBAA0BH,EAAQE,GAAchkC,EAAYkkC,OAAZ,yBAChDC,aAAcL,EAAQE,GAAchkC,EAAYkkC,OAAZ,aACpCE,eAAgBN,EAAQE,GAAchkC,EAAYkkC,OAAZ,kBAGjCT,GAGFG,EAAkB,SAAC5jC,EAAa8jC,GACrC,GAAMH,KAQN,OAPI3jC,GAAYqkC,kBACfpkD,OAAOiQ,KAAK4zC,GAASz6B,QAAQ,SAAC26B,GAC7BhkC,EAAYqkC,iBAAiBL,GAAY36B,QAAQ,SAAChJ,GACjDsjC,EAAMtjC,EAAKnV,MAAQiE,KAAKm1C,MAAMjkC,EAAK8Q,eAI/BwyB,IvHy1TF,SAAS9kD,EAAQD,EAASH,GAE/B,YwHp4TD,SAAS0/B,GAAQtnB,EAAI3K,GACpBvF,KAAKkQ,GAAKA,EACVlQ,KAAKuF,KAAOA,MACZvF,KAAK03B,QAAWnyB,EAAKmyB,QAAWr1B,SAASwD,cAAcN,EAAKmyB,SAAW,KACvE13B,KAAK23B,WAAcpyB,EAAKoyB,WAAct1B,SAASwD,cAAcN,EAAKoyB,YAAc,KAC9D,mBAAPznB,KACXlQ,KAAKuF,KAAKq4C,WAAa59C,KAAKkQ,GAAG2tC,wBAAwB5a,KARxD,GAAMnrB,GAAWhgB,EAAQ,KAAWggB,QAWpC0f,GAAOj+B,UAAUukD,MAAQ,WACxB99C,KAAKkQ,GAAGtB,MAAMmvC,SAAW,QACzB/9C,KAAKkQ,GAAGtB,MAAMq0B,IAAMjjC,KAAKuF,KAAKsyB,WAAa,IACvC73B,KAAK03B,UAAU13B,KAAK03B,QAAQ9oB,MAAMovC,UAAYh+C,KAAKkQ,GAAG+tC,aAAe,OAG1EzmB,EAAOj+B,UAAU2kD,SAAW,WACvBl+C,KAAKm+C,iBAAmBxlD,OAAO8tC,aAAiB9tC,OAAO8tC,YAAczmC,KAAKuF,KAAKq4C,WAClFQ,sBAAsBp+C,KAAK89C,MAAM19C,KAAKJ,OAC5BA,KAAKm+C,iBAAmBxlD,OAAO8tC,YACzC2X,sBAAsBp+C,KAAKq+C,QAAQj+C,KAAKJ,OAEhCrH,OAAO8tC,YAAczmC,KAAKuF,KAAKq4C,aACvC59C,KAAKkQ,GAAGtB,MAAMmvC,SAAW,WAI3BvmB,EAAOj+B,UAAU+kD,WAAa,WAC7Bt+C,KAAKu+C,iBAAmBzmC,EAAS9X,KAAKk+C,UAAU99C,KAAKJ,MACrDrH,OAAO0K,iBAAiB,SAAUrD,KAAKu+C,mBAGxC/mB,EAAOj+B,UAAU8kD,QAAU,WAE1Br+C,KAAKkQ,GAAGtB,MAAMmvC,SAAW,WACzB/9C,KAAKkQ,GAAGtB,MAAMq0B,IAAOjjC,KAAKm+C,iBAAmBn+C,KAAKkQ,GAAG+tC,aAAgB,MAItEzmB,EAAOj+B,UAAU6H,KAAO,YACnBpB,KAAKkQ,IAAMvX,OAAO8tC,YAAc,IAGpCzmC,KAAKm+C,iBAAoBn+C,KAAK23B,WAAW6mB,UAAYx+C,KAAK23B,WAAWsmB,aAAej+C,KAAKkQ,GAAG+tC,aAC5Fj+C,KAAKkQ,GAAGtB,MAAM6vC,OAAS,KACvBz+C,KAAKs+C,eAGNpmD,EAAOD,QAAUu/B,GxH64TX,SAASt/B,EAAQD,EAASH,GAE/B,YyHh8TDI,GAAOD,SACNmJ,KAAM,SAAUJ,EAAOE,GACtBpJ,EAAQ,KAAQsJ,KAAKJ,EAAOE,IAE7ByB,SAAU,SAAU3B,GACnBrI,OAAO0K,iBAAiB,eAAgB,WACvCvL,EAAQ,KAA4BkJ,GACpClJ,EAAQ,KAA2BkJ,GACnClJ,EAAQ,KAA2BkJ,GACnClJ,EAAQ,KAA6BkJ,MAGvC09C,sBAAuB5mD,EAAQ,OzHw8T1B,SAASI,EAAQD,EAASH,GAE/B,Y0H98TD,SAAS6mD,GAAcC,GACtB,SAAUt2C,MAAMjQ,KAAKumD,GAGtB,QAASC,GAAat6C,GACrB,MAAOlC,UAAS6B,gBAAgBI,aAAzB,QAA8CC,GARtD,GAAA9J,GAAA3C,EAAA,IALMgnD,EAAYhnD,EAAQ,KACpBinD,EAAQjnD,EAAQ,KAChB6rC,EAAY7rC,EAAQ,IACpBknD,EAAalnD,EAAQ,KAarBmnD,GACL79C,KAAM,SAAUJ,EAAOE,GAEtB,GAAKF,GAAUA,EAAMvF,IAAI,aAAzB,CAKA,IACC,GAAMyjD,IACLnF,OAAQgF,EAAMI,mBACdva,YAAajB,EAAUkB,kBAGlBua,EAAaxgC,UAAUwgC,YAAcxgC,UAAUygC,eAAiBzgC,UAAU0gC,gBAE5EF,IAAcA,EAAWz9C,OAC5Bu9C,EAASK,eAAiBH,EAAWz9C,KAGtC,IAAMihB,IACL48B,QAAS,OACTC,IAAKv+C,GAAWA,EAAQqD,KACxBm7C,WAAYx+C,GAAWA,EAAQmD,SAG1Bs7C,EAAYd,EAAY,aAC1Bc,KACH/8B,EAAQg9B,cAAgBD,EAGzB,IAAME,GAAYhB,EAAY,aAC1BgB,KACHj9B,EAAQk9B,cAAgBD,EACxBj9B,EAAQm9B,aAAelB,EAAY,YAGpC,IAAMmB,IAAe,0BAA0BxyC,KAAK7U,OAAOktB,SAASya,aAAe,GAC7E2f,GAAgBr9B,WAElBo9B,KAGHp9B,EAAQtd,IAAM26C,EAAar9B,QAAQtd,IAAM3M,OAAOunD,OAAOr6B,SAASjY,WAChEgV,EAAQoH,SAAWi2B,EAAar9B,QAAQoH,SAAWrxB,OAAOunD,OAAO79C,SAAS2nB,SAC1EpH,EAAQo9B,YAAcC,EAAar9B,QAAQo9B,YAAcA,EAG1D,IAAMG,GAAU99C,SAASwD,cAAc,uBAAyBxD,SAASwD,cAAc,uBAAuBvB,aAAa,qBAAuB,IAClJse,GAAQu9B,QAAUA,CAClB,IAAMC,GAAYj5C,OAAOxO,OAAOktB,SAASya,QAAQjH,MAAM,4BACnD+mB,GAAU,KACbx9B,EAAA,qBAAkCw9B,EAAU,GAE7C,IAAMC,GAAW1nD,OAAO2nD,IAAM3nD,OAAO2nD,GAAGD,QACxC,IAAIA,GAAaA,IAAa/mD,OAAO+mD,GACpC,IAAK,GAAIhnD,KAAOgnD,GACXA,EAAS7mD,eAAeH,KAC3BupB,EAAQvpB,GAAOgnD,EAAShnD,GAK3BylD,GAAU19C,MACTqpC,OAAQ,kCACR7nB,QAASA,EACT6H,KAAMy0B,EACNqB,cAAev/C,EAAMvF,IAAI,eAI1B,IAAI+kD,GAAcn+C,SAASwD,cAAc,kBACrC46C,EAAsBp+C,SAASwD,cAAc,qCAUjD,IARI26C,IACHP,EAAar9B,QAAQ89B,SAAU,EAC/BT,EAAar9B,QAAQ49B,YAAcA,EAAYl8C,aAAa,iBAI7Dw6C,EAAU9kB,KAAKimB,EAAar9B,SAExB49B,EAAa,CAEhB,GAAMG,KAAqBF,GAAgG,SAAzEA,EAAoBn8C,aAAa,oCAG7Es8C,GACLj/C,KAAOg/C,EAAqB,WAAa,UACzCE,QAASL,EAAYl8C,aAAa,iBAG7Bw8C,EAASz+C,SAASwV,iBAAiB,mBACnCkpC,EAAqB1+C,SAASwV,iBAAiB,+BAErD,EAAApd,EAAAme,WAAU,kBAAmBtf,OAAOwH,QACnCo8C,SAAU,UACVvkC,OAAQ,OACRioC,YAAaA,EACbj/C,KAAM6+C,EAAYl8C,aAAa,gBAC/By8C,mBAAoBpC,EAAaoC,GAAoBlqC,IAAI,SAAAvJ,GAAA,MAAKA,GAAEhJ,aAAa,8BAC7Ew8C,OAAQnC,EAAamC,GAAQjqC,IAAI,SAAAvJ,GAAA,MAAKA,GAAEhJ,aAAa,oBACnDse,KAGH,MAAOpd,IACR,EAAA/K,EAAAme,WAAU,eACTpS,MAAOhB,EACP8d,MACCL,QAAS,+BAKZ+7B,EAAW59C,SAIblJ,GAAOD,QAAUgnD,G1H89TX,SAAS/mD,EAAQD,EAASH,G2HpmUhCI,EAAAD,QAAAH,EAAA,M3H0mUM,SAASI,EAAQD,EAASH,G4HxmUhC,YA2BA,SAASkpD,KACRhhD,KAAKqE,QAAUA,EACfrE,KAAKqL,OAASA,EACdrL,KAAKihD,QAAUA,EAMfjhD,KAAKsgB,aAAc,EAwKpB,QAASN,KACR7e,EAASC,OACTiB,SAASwa,oBAAoB,qBAAsBmD,GA3MpD,GAAMkhC,GAAWppD,EAAQ,KACnB2yB,EAAO3yB,EAAQ,KACfyhC,EAAUzhC,EAAQ,KAClBqxB,EAAOrxB,EAAQ,KAMfuM,EAAU,SAKVgH,EAAS,aAKT41C,EAAU,gCAsBhBD,GAASznD,UAAU4nD,UAAY,SAASt/B,GACnCA,EACHq/B,EAASvsC,IAAI,aAAa,IAE1BusC,EAAS99B,QAAQ,YAAa,MAC9B89B,EAAS99B,QAAQ,UAAW,QAQ9B49B,EAASznD,UAAU6pB,QAAU,WAC5BpjB,KAAKmhD,WAAU,GACfnhD,KAAKsgB,aAAc,EAEnB4gC,EAAS99B,QAAQ,UACjB89B,EAAS99B,QAAQ,cAOlB49B,EAASznD,UAAUqU,SAAW,WAC7B,MAAO,qBAAuBvJ,GAG/B28C,EAASznD,UAAUygC,KAAOliC,EAAQ,KAElCkpD,EAASznD,UAAU0f,MAAQnhB,EAAQ,KAEnCkpD,EAASznD,UAAUoiD,KAAO7jD,EAAQ,KAElCkpD,EAASznD,UAAU28B,MAAQp+B,EAAQ,KA4BnCkpD,EAASznD,UAAU6H,KAAO,SAASV,GAClC,GAAIV,KAAKsgB,YACR,MAAOtgB,KAGR,IAAMghB,KAAyBhhB,KAAKohD,8BAEpC,OAAMpgC,IAAwBtgB,GAI9BA,EAASA,MACLsgB,IACHtgB,EAASV,KAAKmkB,sBAAsBzjB,IAGrCwgD,EAASvsC,IAAI,SAAUjU,GACvBwgD,EAASvsC,IAAI,UAAW3U,KAAKqE,SAC7B68C,EAASvsC,IAAI,SAAU3U,KAAKqL,QAC5B61C,EAASvsC,IAAI,UAAW3U,KAAKihD,SAE7BC,EAASvsC,IAAI,aAAa,GAGtBjU,EAAOygD,YACVnhD,KAAKmhD,UAAUzgD,EAAOygD,WAElBzgD,EAAO2gD,QACVH,EAASvsC,IAAI,WAAW,IAK1B8V,EAAKrpB,KAAKV,EAAO+pB,KAAO/pB,EAAO+pB,KAAK62B,QAAU,MAG9C/nB,EAAQn4B,KAAKV,EAAO64B,SAGpBpQ,EAAK/nB,OAELpB,KAAKiZ,MAAM7X,OACXpB,KAAKg6B,KAAK54B,OACVpB,KAAKsgB,aAAc,EACZtgB,MApCCA,MA4CTghD,EAASznD,UAAU6nD,6BAA+B,WACjD,MAAO/+C,UAASwD,cAAc,mCAW/Bm7C,EAASznD,UAAU4qB,sBAAwB,SAAS5jB,GACnD,GAAMghD,GAAWvhD,KAAKohD,+BAClBI,QACJ,KAAID,EAGH,OAAO,CAFPC,GAA0BD,EAASn9B,aAAem9B,EAASl9B,WAAak9B,EAASj9B,SAKlF,IAAIC,SAEJ,KACCA,EAAqB7e,KAAK8e,MAAMg9B,GAC/B,MAAMl0C,GACP,GAAMm0C,GAAc,GAAIpgC,OAAM,oFAAsF/T,EAAE2V,QAAU,IAKhI,MAJAjjB,MAAKk2B,MAAMtd,UAAU,UAAW,OAC/BpS,MAAOi7C,EAAYx+B,QACnBK,MAAQprB,OAAQ,gBAEXupD,EAGP,IAAK,GAAMh9B,KAAYF,GAClBA,EAAmB/qB,eAAeirB,KACrClkB,EAAQkkB,GAAYlkB,EAAQkkB,IAAaF,EAAmBE,GAI9D,OAAOlkB,GAGR,IAAMY,GAAW,GAAI6/C,EASrB3+C,UAASgB,iBAAiB,qBAAsB2c,GAQhD9nB,EAAOD,QAAUkJ,G5HgnUX,SAASjJ,EAAQD,G6H30UvB,YAYA,SAAS2lC,GAAMhkC,GACd,GAAc0B,SAAV1B,EACH,MAAOA,EAER,QAAQN,OAAOC,UAAUqU,SAASvV,KAAKuB,IACtC,IAAK,kBACJ,MAAO8L,MAAK8e,MAAM9e,KAAKC,UAAU/L,GAClC,KAAK,iBACJ,SAAU0O,MAAMjQ,KAAKuB,EACtB,SACC,MAAOA,IAWV,QAAS8nD,GAASroD,EAAKO,GACtBsnD,EAAS7nD,GAAOukC,EAAMhkC,GAUvB,QAAS+nD,GAAStoD,GACjB,MAAOukC,GAAMsjB,EAAS7nD,IASvB,QAAS+pB,GAAQ/pB,SACT6nD,GAAS7nD,GApDjB,GAAM6nD,KAuDNhpD,GAAOD,SACN0c,IAAO+sC,EACPjmD,IAAOkmD,EACPv+B,QAAWA,I7Ho1UN,SAASlrB,EAAQD,EAASH,G8Hj5UhC,YA4BA,SAAS8pD,GAAuBnxC,EAAO6wC,GACtC,GAAMO,GAAU,uBACZC,QAEJ,KAIC,GAFAA,EAAY5rB,EAAM6rB,mBAAmBF,EAAQ,aAExCC,EAAW,CACf,GAAM5iC,GAAI,GAAIb,KACda,GAAE8iC,QAAQ9iC,EAAEZ,UAAa,QACzB,IAAM4jB,GAAU,WAAahjB,EAAE+iC,cAAgB,GAE/CtpD,QAAO0J,SAASC,OAASu/C,EAAU,IAAM3rB,EAAMgsB,OAAOZ,GAAW,IAAMpf,EAAU,kBAAoBigB,EAAkB/xB,OAAS,IAChI0xB,EAAYR,GAEZ,MAAO96C,GACR0vB,EAAMtd,UAAU,UAAW,OAC1BpS,MAAOA,EAAMyc,QACbK,MAAQprB,OAAQ,gBAEjB4pD,EAAYR,EAQb,MAJA3oD,QAAO0J,SAASC,OAAS,2DAEzBmO,EAAMxB,MAAM6yC,GAELA,EASR,QAAS1gD,GAAKxH,GACb,GAAM8G,GAASw1B,EAAMksB,MAAMD,GAAqBvoD,MAAOA,GAyBvD,OAtBuB,WAAnB8G,EAAOo4B,SAAwBp4B,EAAO6D,OACzC7D,EAAO2hD,aAAe3hD,EAAO6D,MAG9BkM,EAAQ,GAAI6xC,GAAM5hD,EAAO6D,KAAM7D,GAE/B6hD,EAAS9xC,EAAM+xC,OAEXD,IACHA,EAASX,EAAuBnxC,EAAO8xC,IAGnCA,IACJA,EAAS7hD,EAAO9G,OAGZ2oD,IACJA,EAASrsB,EAAMusB,QAGhBhyC,EAAMxB,MAAMszC,GAELA,EAGR,QAASn/B,KACR3S,EAAM2S,UA7FP,GAAIm/B,UACA9xC,SACE0xC,GACLrpB,QAAS,SACTv0B,KAAM,WACN3K,MAAO,KACPw2B,OAAS/tB,SAASwd,IAAIwZ,MAAM,wCAAwC,GAAGxV,QAAQ,aAAiB,SAAW,MAGtGqS,EAAQp+B,EAAQ,KAChBwqD,EAAQxqD,EAAQ,IAsFtBI,GAAOD,SACNmJ,KAAMA,EACNmhD,OAAQ,WAAc,MAAOA,IAC7Bn/B,QAASA,I9H45UJ,SAASlrB,EAAQD,EAASH,G+HlgVhC,Y/HkhVC,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G+Hz/UxF,QAASuM,KACR,GAAIy7C,EAASzlD,IAAI,cAAgB9C,OAAOiL,QACvC,IAAK,GAAIE,GAAE,EAAEA,EAAEtD,UAAUC,OAAOqD,IAC/BnL,OAAOiL,QAAQ6B,IAAIjF,UAAUsD,IAahC,QAAS2J,GAAGi1C,EAAU/gD,GAIrB,MAHKA,KACJA,EAAO,cAED,mBAAO+gD,GAAP,eAAAl/C,cAAOk/C,MAAa/gD,EAW5B,QAASygD,GAAMj2C,EAAQ5L,GACjBA,IACJA,EAAU4L,EACVA,KAGD,IAAI5H,UACAmC,SACAg3B,QAIJ,KAAKn5B,IAAQhE,GACZmG,EAAMyF,EAAO5H,GACbm5B,EAAOn9B,EAAQgE,GAGX4H,IAAWuxB,GAKK,mBAATA,IAAiC,OAATA,IAClCvxB,EAAO5H,GAASmC,IAAQpN,OAAOoN,IAAS+G,EAAG/G,EAAK,YAAiCg3B,EAAnB0kB,EAAM17C,EAAKg3B,GAM3E,OAAOvxB,GASR,QAAS+1C,GAAOv7B,GACf,MAAIhuB,QAAO+0B,mBACH/0B,OAAO+0B,mBAAmB/G,GAE1BhuB,OAAOgqD,OAAOh8B,GAUvB,QAAS6b,GAAO7b,GACf,MAAIhuB,QAAO6oC,mBACH7oC,OAAO6oC,mBAAmB7a,GAE1BhuB,OAAO+7C,SAAS/tB,GAWzB,QAASm1B,GAAS/3B,EAAS9K,EAAOi+B,GAC7BnzB,EAAQ1gB,iBACX0gB,EAAQ1gB,iBAAiB4V,EAAOi+B,GAAU,GAE1CnzB,EAAQnH,YAAY,KAAO3D,EAAOi+B,GAWpC,QAASt+B,GAAU8f,EAAW1S,EAAW7M,GACxCA,EAASA,KACT,KACOxgB,OAAOwK,cAAc,GAAIC,aAAYs1B,EAAY,IAAM1S,GACnD7M,OAAQA,EACRL,SAAS,KAEf,MAAOtS,KASb,QAASo8C,GAAOjiD,GACX8M,EAAG9M,EAAI,aACVkiD,EAAephD,KAAKd,GAQtB,QAASmiD,KACR,IAAK,GAAIh/C,GAAI,EAAGA,EAAI++C,EAAepiD,OAAQqD,IAC1C++C,EAAe/+C,KASjB,QAASi+C,GAAmB/K,GAC3B,MAAO30C,UAASC,OAAO+2B,MAAM2d,IAA0B,KAAdvgC,OAAOssC,IAA2B,SAAdtsC,OAAOssC,GAAgBtsC,OAAOssC,GAAK,KAQjG,QAASC,GAAgBhM,GACxB,MAAO30C,UAASwjB,SAASC,KAAKuT,MAAM2d,IAA0B,KAAdvgC,OAAOssC,GAAYtsC,OAAOssC,GAAK,KAQhF,QAASE,GAAuBt8B,GAC/B,GAAmB,gBAARA,GACV,MAAO,KAIR,IAAI7iB,UACEo/C,EAAav8B,EAAI9W,MAAM,KACzBzN,EAAOzJ,MAEX,KAAKmL,EAAI,EAAGA,EAAIo/C,EAAWziD,OAAQqD,GAAQ,EAAG,CAC7C,GAAmC,mBAAxB1B,GAAK8gD,EAAWp/C,IAC1B,MAAO,KAGR1B,GAAOA,EAAK8gD,EAAWp/C,IAGxB,MAAgB,KAAT1B,EAAcA,EAAO,K/H2zU5B,GAAImB,GAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,G+HzgVjC29C,EAAWppD,EAAQ,KAKnBqrD,EAAOrrD,EAAQ,KAKf+qD,IAqMN3qD,GAAOD,SACNwN,IAAKA,EACLgI,GAAIA,EACJuZ,YAAavZ,EACb20C,MAAOA,EACPF,OAAQA,EACR1f,OAAQA,EACRigB,KAAMU,EACNrH,SAAUA,EACVljC,UAAWA,EACXgqC,OAAQA,EACRE,YAAaA,EACbf,mBAAoBA,EACpBiB,gBAAiBA,EACjBC,uBAAwBA,I/HihVnB,SAAS/qD,EAAQD,EAASH,GAE/B,cgI3uVA,SAAU2nD,GAET,GACElnD,GAAI,EACJ6qD,EAAY,EACZrV,EAAO,GACPsV,EAAiB76C,KAAK86C,IAAIvV,EAAMqV,GAEhCn2B,EAAM,SAAaC,EAAKwc,GACtB,GAAIxhC,GAAI,YAAcglB,CACtB,OAAOhlB,GAAE+R,OAAO/R,EAAEzH,OAAOipC,IAG3B6Z,EAAc,WACZ,MAAOt2B,IAAKzkB,KAAKmI,SACX0yC,GAAkB,GACjBz1C,SAASmgC,GAAOqV,IAGzBI,EAAc,WAGZ,MAFAjrD,GAAKA,EAAI8qD,EAAkB9qD,EAAI,EAC/BA,IACOA,EAAI,GAGbw8C,EAAM,WAGJ,GAQE0O,GARE3jB,EAAS,IAKXwT,GAAa,GAAIj1B,OAAOC,UAAW1Q,SAASmgC,GAQ5C2V,EAAc3O,EAAI2O,cAGlB/yC,EAAS4yC,IAAgBA,GAI3B,OAFEE,GAAUx2B,EAAIu2B,IAAc51C,SAASmgC,GAAOqV,GAErCtjB,EAASwT,EAAYmQ,EAAUC,EAAc/yC,EAG1DokC,GAAI4O,KAAO,WACT,GACEF,GADEjkD,GAAO,GAAI6e,OAAOC,UAAU1Q,SAAS,IAEvCg2C,EAAQ7O,EAAI2O,cAAcp7C,MAAM,EAAE,GAChCysC,EAAI2O,cAAcp7C,UACpBqI,EAAS4yC,IAAcj7C,SAIzB,OAFEm7C,GAAUD,IAAc51C,SAAS,IAAItF,UAEhC9I,EAAK8I,UACVm7C,EAAUG,EAAQjzC,GAGtBokC,EAAI8O,YAAc,WAEhB,GAAIC,GAAS,WACT,GAAIhgD,GACFigD,EAAQ,CAEV,KAAKjgD,IAAKnL,QACRorD,GAGF,OAAOA,KAIX,OADAhP,GAAI8O,YAAc,WAAc,MAAOC,IAChCA,GAGT/O,EAAI2O,YAAc,WAChB,MAAOz2B,IAAKrO,UAAUolC,UAAUvjD,OAC9Bme,UAAUC,UAAUpe,QAAQmN,SAAS,IACrCmnC,EAAI8O,cAAcj2C,SAAS,IAAK,IAKlC1V,EAAOD,QAAU88C,GAzFpBz5C,ShI01VK,SAASpD,EAAQD,EAASH,GiIt2VhC,YAWA,IAAMwqD,GAAQ,SAAU/9C,EAAM7D,GAK7B,GAAMujD,GAAY,aAMdC,SACEhuB,EAAQp+B,EAAQ,IAEtB,IAAIo+B,EAAMlP,YAAYziB,GAAO,CAC5B,GAAM4/C,GAAgB,GAAI9iC,OAAM,yCAKhC,MAJA6U,GAAMtd,UAAU,UAAW,OAC1BpS,MAAO29C,EAAclhC,QACrBK,MAAQprB,OAAQ,gBAEXisD,EA0GP,GAvGAnkD,KAAKU,OAASw1B,EAAMksB,OAAQtpB,QAAS,OAAQoJ,QAAU,SAAmCxhC,GAK1FV,KAAK6Y,KAAO,KAKZ7Y,KAAKokD,WAAcpkD,KAAKU,OAAOlH,eAAe,gBAAkBwG,KAAKU,OAAO2hD,cAAgB4B,EAAW1/C,GAAM2Z,KAAK,KAOlHle,KAAK84B,QAAW,SAAUp4B,EAAQ/H,GA2BjC,QAAS0rD,GAAW9/C,GACnBA,GAAc,GAEd,IAAM89B,GAAU1pC,EAAO0J,SAASC,OAAOuN,MAAM,KACzC/L,SACAxB,QAEJ,KAAKwB,EAAI,EAAGA,EAAIu+B,EAAQ5hC,OAAQqD,GAAQ,EAEvC,GADAxB,EAAS+/B,EAAQv+B,GAAG2T,QAAQ,aAAc,IACb,IAAzBnV,EAAOuhB,QAAQtf,GAClB,MAAO2xB,GAAMsM,OAAOlgC,EAAO4uB,UAAU3sB,EAAK9D,OAAQ6B,EAAO7B,QAI3D,OAAO,MAGR,QAAS6jD,GAAW//C,EAAM3K,EAAO2qD,GAChC,GAAIrlC,UACAgjB,EAAU,GACV5/B,QAEA4zB,GAAMzoB,GAAG82C,EAAQ,YACpBrlC,EAAI,GAAIb,MACRa,EAAE8iC,QAAQ9iC,EAAEZ,UAAYimC,GACxBriB,EAAU,WAAahjB,EAAE+iC,cAAgB,KAG1C3/C,EAAS4zB,EAAMgsB,OAAO39C,GAAQ,IAAM2xB,EAAMgsB,OAAOtoD,GAAS,IAAMsoC,EAAU,WAAaxhC,EAAO0vB,OAAS,WAAa1vB,EAAO0vB,OAAS,IAAM,IAC1Iz3B,EAAO0J,SAASC,OAASA,EAG1B,QAASkiD,GAAajgD,GACrB+/C,EAAW//C,EAAM,OA3DlB,GAAMkgD,GAAWR,EAAY,eAG7B,IAAuB,WAAnBvjD,EAAOo4B,QACV,IACC,GAAIngC,EAAOwiC,eACVxiC,EAAOwiC,aAAaE,QAAQopB,EAAU,QAEQ,SAA1C9rD,EAAOwiC,aAAaC,QAAQqpB,IAE/B,MADA9rD,GAAOwiC,aAAajC,WAAWurB,IAE9BC,MAAO,eACPzgD,KAAM,SAAUM,GAAQ,MAAO5L,GAAOwiC,aAAaC,QAAQ/iC,KAAKM,EAAOwiC,aAAc52B,IACrFogD,KAAM,SAAUpgD,EAAM3K,GAAS,MAAOjB,GAAOwiC,aAAaE,QAAQhjC,KAAKM,EAAOwiC,aAAc52B,EAAM3K,IAClGshC,OAAQ,SAAU32B,GAAQ,MAAO5L,GAAOwiC,aAAajC,WAAW7gC,KAAKM,EAAOwiC,aAAc52B,KAI5F,MAAOiC,GACR0vB,EAAMtd,UAAU,UAAW,OAC1BpS,MAAOA,EAAMyc,QACbK,MAAQprB,OAAQ,gBA2CnB,MAFAosD,GAAWG,EAAU,QAEQ,SAAzBJ,EAAWI,IACdD,EAAaC,IAGZC,MAAO,SACPzgD,KAAMogD,EACNM,KAAML,EACNppB,OAAQspB,KAKTE,MAAO,OACPzgD,KAAM,aACN0gD,KAAM,aACNzpB,OAAQ,eAERl7B,KAAKU,OAAQ/H,QAGfurD,EAAYlkD,KAAK84B,QAAQ70B,KAAKjE,KAAKokD,YAElC,IACCpkD,KAAK6Y,KAAOnT,KAAK8e,MAAM0/B,GACtB,MAAO19C,GACR0vB,EAAMtd,UAAU,UAAW,OAC1BpS,MAAOA,EAAMyc,QACb/qB,OAAQ,eAET8H,KAAK6Y,KAAOqrC,EAId,MAAOlkD,MAQRsiD,GAAM/oD,UAAUipD,KAAO,WACtB,MAAOxiD,MAAK6Y,MASbypC,EAAM/oD,UAAU0V,MAAQ,SAAU4J,GAKjC,MAHA7Y,MAAK6Y,KAAOA,EACZ7Y,KAAK84B,QAAQ6rB,KAAK3kD,KAAKokD,WAAkC,gBAAdpkD,MAAK6Y,KAAoB7Y,KAAK6Y,KAAOnT,KAAKC,UAAU3F,KAAK6Y,MAAQ7Y,KAAKU,OAAOwhC,SAEjHliC,MAORsiD,EAAM/oD,UAAU6pB,QAAU,WAGzB,MAFApjB,MAAK6Y,KAAO,KACZ7Y,KAAK84B,QAAQoC,OAAOl7B,KAAKokD,YAClBpkD,MAGR9H,EAAOD,QAAUqqD,GjIq3VX,SAASpqD,EAAQD,EAASH,GkI9iWhC,YAmBA,SAAS8sD,GAAWrrB,GACnB,GAAMra,GAAI,GAAIb,KACda,GAAE8iC,QAAQ9iC,EAAEZ,UAAY7N,EAAM/P,OAAOwhC,SAErCzxB,EAAMxB,OACLrV,MAAO2/B,EACPgrB,OAAQrlC,EAAErR,YASZ,QAASg3C,KACR,GAAM38C,GAAIuI,EAAM+xC,OACZjpB,SACAurB,GAAQ,CAEZ,IAAI58C,EAAG,CACN,GAAMgX,IAAK,GAAIb,OAAQxQ,UACjBk3C,EAAMjmC,SAAS5W,EAAEq8C,OAGnBQ,IAAO7lC,IACVqa,EAAUrxB,EAAEtO,OAad,MARK2/B,KACJA,EAAUrD,EAAMusB,OAChBqC,GAAQ,GAITF,EAAWrrB,IAGVphC,GAAIohC,EACJurB,MAAOA,GAUT,QAAS1jD,GAAKV,GACTw1B,EAAMzoB,GAAG/M,EAAQ,YACpBA,GAAW6D,KAAM7D,IAGdw1B,EAAMlP,YAAYtmB,KACrBA,KAGD,IAAMnI,GAAI29B,EAAMksB,MAAM4C,EAAsBtkD,EAS5C,OANkB,WAAdnI,EAAEugC,SAAwBp4B,EAAO6D,OACpChM,EAAE8pD,aAAe9pD,EAAEgM,MAGpBkM,EAAQ,GAAI6xC,GAAM/pD,EAAEgM,KAAMhM,GAEnBssD,IArFR,GAAIp0C,UACEu0C,GACLlsB,QAAS,OACTv0B,KAAM,UACN29B,QAAU,MAGLhM,EAAQp+B,EAAQ,KAChBwqD,EAAQxqD,EAAQ,IAgFtBI,GAAOD,SACNmJ,KAAMA,EACNm4B,QAASsrB,IlIujWJ,SAAS3sD,EAAQD,EAASH,GmIppWhC,YAwBA,SAASmtD,KACR,MAAQrmC,WAAUsmC,YAAc1iD,UAAY0+C,EAASzlD,IAAI,eAAiB8kD,cAU3E,QAAS4E,GAAY76B,EAASvkB,GAC7B,GAAMq/C,GAAY96B,EAAQ86B,UACpBC,GAAa,GAAIhnC,OAAOC,UAAY8mC,EACtCthC,SACEtB,EAAYyiC,IAA0BK,EAAW7pD,IAAI,gBAClD9C,OAAO+mB,gBAAkB,mBAAqB,IAAI/mB,QAAO+mB,eAAmB4lC,EAAW7pD,IAAI,SAC3F6pD,EAAW7pD,IAAI,WAClB8pD,EAAgBj7B,EAAQvkB,SAExBy/C,EAActE,EAASzlD,IAAI,WAAaylD,EAASzlD,IAAI,UAAUgqD,WAC/DA,EAASvvB,EAAMksB,MAAMoD,GAC1BvE,QAASC,EAASzlD,IAAI,WACtB4I,QAAS68C,EAASzlD,IAAI,WACtB4P,OAAQ61C,EAASzlD,IAAI,WAGtB6uB,GAAU4L,EAAMksB,OAAQqD,OAAQA,GAAUn7B,GAGtC+6B,EAAa,KAAQA,EAAc,UACtC/6B,EAAQmd,KAAOnd,EAAQmd,SACvBnd,EAAQmd,KAAKie,OAASL,SAEhB/6B,GAAQvkB,eACRukB,GAAQwU,YACRxU,GAAQ3oB,WACR2oB,GAAQ86B,UAEflvB,EAAMzwB,IAAI,gBAAiB8/C,GAC3BrvB,EAAMzwB,IAAI,UAAW6kB,GAErBxG,EAAOpe,KAAKC,UAAU2kB,GAEtB4L,EAAMzwB,IAAI,OAAQqe,GAElBtB,EAAU9iB,SAAS,SAAU8G,GACxB0vB,EAAMzoB,GAAG83C,EAAe,cAC3BA,EAAcltD,KAAKiyB,GACnB4L,EAAMzwB,IAAI,0BAGPe,GAGH8jB,EAAQ86B,UAAYA,EACpB/jB,EAAM/6B,IAAIgkB,GAASq6B,OAEnBzuB,EAAMtd,UAAU,UAAW,OAC1BpS,MAAOA,EAAMyc,QACbK,MAAQprB,OAAQ,iBAGjB6N,GAAYA,MAKRm7C,EAASzlD,IAAI,cAAgBylD,EAASzlD,IAAI,YAC/C+mB,EAAU2G,KAAKiH,EAAQtM,GAUzB,QAASxd,GAAIgkB,GACZA,EAAQ86B,WAAa,GAAI/mC,OAAQC,UAC7B2mC,IACHE,EAAY76B,GAEZ+W,EAAM/6B,IAAIgkB,GAASq6B,OAEpBzuB,EAAMzwB,IAAI,eAAgB47B,GAS3B,QAASmI,GAAIzjC,GACRmwB,EAAMlP,YAAYjhB,KACrBA,EAAW,aAKT,IAAM4/C,GAAatkB,EAAM9pB,KAErBouC,GAAWllD,OAAS,MAAK,WACzB,GAAMmlD,KAEND,GAAWjjC,QAAQ,SAAUzJ,GACzB,GAAM5B,IAAS4B,EAAMikC,SAAUjkC,EAAMN,QAAQuF,KAAK,IAE7C0nC,GAAOpsD,eAAe6d,KACvBuuC,EAAOvuC,GAAS,GAGpBuuC,EAAOvuC,IAAU,IAGrBgqB,EAAM5pB,YAEN4pB,EAAM/6B,KACF42C,SAAU,aACVvkC,OAAQ,YACRiK,SACItd,IAAKjD,SAASiD,IACdugD,aAAcF,EAAWllD,OACzBmlD,OAAQA,EACR9sB,QAASuI,EAAMvI,QAAQA,QAAQ4rB,WAK9C,IAAM56C,GAAO,WACZ0/B,IACAzjC,KAEK+/C,EAAczkB,EAAM0kB,OAG1B,OAAKD,GAKEX,EAAYW,EAAah8C,GAJxB/D,IAaT,QAASigD,GAAU17B,GAClBhkB,EAAIgkB,GACJkf,IAOD,QAASpoC,KAaR,MAZAigC,GAAQ,GAAImH,GAAM,YAEd0Y,EAASzlD,IAAI,WAAaylD,EAASzlD,IAAI,UAAUgvC,SACpDra,EAAS8wB,EAASzlD,IAAI,UAAUgvC,QAIjCvU,EAAM4lB,SAASnjD,OAAQ,SAAU6wC,GAGjCA,IAEOnI,EAnMR,GAAM6f,GAAWppD,EAAQ,KACnBo+B,EAAQp+B,EAAQ,KAChB0wC,EAAQ1wC,EAAQ,KAChBwtD,EAAaxtD,EAAQ,KAIvBs4B,EAAS,+BAOTiR,QAwLJnpC,GAAOD,SACNmJ,KAAMA,EACNkF,IAAKA,EACLkjC,IAAKA,EACLwc,UAAWA,InI4pWN,SAAS9tD,EAAQD,EAASH,GoIz2WhC,YAGA,IAAMo+B,GAAQp+B,EAAQ,KAChBwqD,EAAQxqD,EAAQ,KAShB0wC,EAAQ,SAAUjkC,GACvB,GAAI2xB,EAAMlP,YAAYziB,GAAO,CAC5B,GAAM4/C,GAAgB,GAAI9iC,OAAM,yCAKhC,MAJA6U,GAAMtd,UAAU,UAAW,OAC1BpS,MAAO29C,EAAclhC,QACrBK,MAAQprB,OAAQ,gBAEXisD,EAoBP,MAbAnkD,MAAKqhC,SAMLrhC,KAAK84B,QAAU,GAAIwpB,GAAM/9C,GAGrBvE,KAAK84B,QAAQ0pB,SAChBxiD,KAAKqhC,MAAQrhC,KAAK84B,QAAQ0pB,QAGpBxiD,KAQRwoC,GAAMjvC,UAAUge,IAAM,WACrB,GAA0B,IAAtBvX,KAAKqhC,MAAM5gC,OACd,QAKD,KAAK,GAFCioC,MAEG5kC,EAAI,EAAGA,EAAI9D,KAAKqhC,MAAM5gC,OAAQqD,GAAQ,EAC9C4kC,EAAMjnC,KAAKzB,KAAKqhC,MAAMv9B,GAAG8uB,KAG1B,OAAO8V,IAQRF,EAAMjvC,UAAU0sD,MAAQ,WACvB,MAA0B,KAAtBjmD,KAAKqhC,MAAM5gC,OACP,KAGDT,KAAKqhC,MAAM,GAAGzO,MAQtB4V,EAAMjvC,UAAU2sD,KAAO,WACtB,MAA0B,KAAtBlmD,KAAKqhC,MAAM5gC,OACP,KAGDT,KAAKqhC,MAAM/4B,UAAU,GAAGsqB,MAUhC4V,EAAMjvC,UAAU+M,IAAM,SAAUssB,GAM/B,QAASuzB,GAAMvzB,GACdlmB,EAAK20B,MAAM5/B,MACV2kD,YAAa,GAAI/nC,OAAQxQ,UACzB+kB,KAAMA,IANR,GAAMlmB,GAAO1M,KACT8D,QASJ,IAAIoyB,EAAMzoB,GAAGmlB,EAAM,WAAaA,EAAK5rB,YAAY4G,WAAWyrB,MAAM,UACjE,IAAKv1B,EAAI,EAAGA,EAAI8uB,EAAKnyB,OAAQqD,GAAQ,EACpCqiD,EAAMvzB,EAAK9uB,QAGZqiD,GAAMvzB,EAGP,OAAOlmB,IAUR87B,EAAMjvC,UAAUke,QAAU,SAAUixB,GACnC,GAAIxS,EAAMzoB,GAAGi7B,EAAO,WAAaA,EAAM1hC,YAAY4G,WAAWyrB,MAAM,UAInE,MAHAr5B,MAAKqhC,SACLrhC,KAAKsG,IAAIoiC,GAAOic,OAET3kD,IAGR,IAAMqmD,GAAa,GAAIhlC,OAAM,sCAK7B,MAJA6U,GAAMtd,UAAU,UAAW,OAC1BpS,MAAO6/C,EAAWpjC,QAClBK,MAAQprB,OAAQ,gBAEXmuD,GAQP7d,EAAMjvC,UAAUwsD,MAAQ,WACvB,GAA0B,IAAtB/lD,KAAKqhC,MAAM5gC,OACd,MAAO,KAGR,IAAMmyB,GAAO5yB,KAAKqhC,MAAM0kB,QAAQnzB,IAIhC,OAFA5yB,MAAK2kD,OAEE/xB,GAQR4V,EAAMjvC,UAAUorD,KAAO,WAGtB,MAFA3kD,MAAK84B,QAAQ7pB,MAAMjP,KAAKqhC,OAEjBrhC,MAGR9H,EAAOD,QAAUuwC,GpIi3WX,SAAStwC,EAAQD,EAASH,GAE/B,YqI/hXDI,GAAOD,SACNsnC,IAAKznC,EAAQ,KACbotD,WAAYptD,EAAQ,KACpBiG,MAAOjG,EAAQ,KACf2D,IAAK,SAAU8I,GACd,MAAOvE,MAAKsmD,MAAQtmD,KAAKuE,MrIuiXrB,SAASrM,EAAQD,GAEtB,YsI9iXDC,GAAOD,QAAU,WAChB,GAAMsnC,GAAM,GAAI5mC,QAAO+mB,cAEvB,QACCyJ,KAAM,SAAU7jB,EAAKuT,GACpB0mB,EAAIvwB,KAAK,OAAQ1J,GAAK,GACtBi6B,EAAIgnB,iBAAkB,EACtBhnB,EAAIinB,iBAAiB,eAAgB,oBACrCjnB,EAAIpW,KAAKtQ,IAEVnZ,SAAU,SAAUqG,GACnBw5B,EAAIpT,QAAU,WACbpmB,EAAS/F,OAEVu/B,EAAIrT,OAAS,WACRqT,EAAImd,QAAU,KAAOnd,EAAImd,OAAS,IACrC32C,IAEAA,EAAS,uBAAyBw5B,EAAImd,atIyjXrC,SAASxkD,EAAQD,GAEtB,YuI7kXDC,GAAOD,QAAU,WACb,GAAIwuD,UACAC,SACEluD,EAAI,GAAIgK,SAAQ,SAACC,EAASkkD,GAC5BF,EAAWhkD,EACXikD,EAAWC,GAEf,QACIx9B,KAAM,SAAU7jB,EAAKuT,GACb+F,UAAUsmC,WAAW5/C,EAAKuT,GAC1B4tC,IAEAC,EAAS,GAAIrlC,OAAM,gCAAkCxI,EAAKjL,cAIlElO,SAAU,SAAUqG,GAChBA,GAAYvN,EAAEwJ,KAAK+D,EAAUA,OvIqlXnC,SAAS7N,EAAQD,EAASH,GAE/B,YwIxmXD,IAAMo+B,GAAQp+B,EAAQ,IAEtBI,GAAOD,QAAU,WAChB,GAAM8F,GAAQ,GAAIk6B,OAAM,EAAE,EAE1B,QACC9O,KAAM,SAAU7jB,EAAKuT,GACpB9a,EAAM2I,IAAMpB,EAAM,SAAW4wB,EAAMgsB,OAAOrpC,IAE3CnZ,SAAU,SAAUqG,GACfhI,EAAMsF,kBACTtF,EAAMsF,iBAAiB,QAAS0C,GAChChI,EAAMsF,iBAAiB,OAAQ,iBAAM0C,SAErChI,EAAM6e,YAAY,UAAW7W,GAC7BhI,EAAM6e,YAAY,SAAU,iBAAM7W,YxIunXhC,SAAS7N,EAAQD,EAASH,GyIpoXhC,YA+BA,SAASkiC,GAAKt5B,EAAQqF,GACrBrF,EAASw1B,EAAMksB,MAAMwE,KACpBhkC,QAASliB,IAIVmmD,EAAKC,YACLD,EAAKE,MAAMrmD,EAAQqF,GAGnBmwB,EAAM4sB,cAUP,QAAS5L,GAAS5pC,GACjB0sB,EAAK1sB,EAAE6L,QAjDR,GAAM0tC,GAAO/uD,EAAQ,KACfo+B,EAAQp+B,EAAQ,KAOhB8uD,EAAoB,WACzB,OACC1J,SAAU,OACVvkC,OAAQ,OACRiK,SACCtd,IAAKjD,SAASwd,IACdmK,SAAU3nB,SAAS2nB,UAGpB8U,OAAO,GAqCT5mC,GAAOD,QAAU+hC,EACjB9hC,EAAOD,QAAQmJ,KAAO,WACrB80B,EAAM4lB,SAASnjD,OAAQ,iBAAkBu+C,KzI2oXpC,SAASh/C,EAAQD,EAASH,G0ItsXhC,YAqCA,SAASgvD,GAAUE,GAElB,MADA9F,GAASvsC,IAAI,UAAWsyC,EAAUD,IAC3B9F,EAASzlD,IAAI,WAOrB,QAASyrD,KACR,GAAIC,GAAUjG,EAASzlD,IAAI,UAM3B,OAJIy6B,GAAMlP,YAAYmgC,KACrBA,EAAUL,KAGJK,EAUR,QAASF,GAAUG,GAKlB,MAJIlxB,GAAMlP,YAAYogC,KACrBA,EAAalxB,EAAMusB,QAGb2E,EAWR,QAASL,GAAMrmD,EAAQqF,GAClBmwB,EAAMlP,YAAYjhB,KACrBA,EAAW,aAGZ,IAAMshD,GAAcnG,EAASzlD,IAAI,WAAaylD,EAASzlD,IAAI,UAAUmnB,WACrEliB,GAAOkiB,QAAUsT,EAAMksB,MAAMiF,EAAa3mD,EAAOkiB,QAEjD,IAAI0H,GAAU4L,EAAMksB,MAAMkF,IAAiBpxB,EAAMksB,MAAM1hD,GAAUqF,SAAUA,KAErEwzB,EAAUguB,EAAQhuB,SAsBxB,OAnBAjP,GAAU4L,EAAMksB,OACfx/B,SACCzqB,GAAI8uD,EAAU38B,EAAQnyB,IACtBgvD,QAASD,KAGVz8B,KAAMy2B,EAASzlD,IAAI,UAAYylD,EAASzlD,IAAI,UAAUgvB,QAEtD+8B,QACCC,cAAeluB,EAAQphC,GACvBuvD,qBAAsBnuB,EAAQurB,MAC9B6C,SAAUC,EAAKrF,WAEdj4B,GAEH4L,EAAMzwB,IAAI,aAAc6kB,GAExBu9B,EAAK7B,UAAU17B,GAERA,EA5GR,GAAMu9B,GAAO/vD,EAAQ,KACf8vD,EAAO9vD,EAAQ,KACfyvD,EAAUzvD,EAAQ,KAMlBopD,EAAWppD,EAAQ,KACnBo+B,EAAQp+B,EAAQ,KAOhBwvD,EAAgB,WACrB,OACCxoB,OAAO,EACP/4B,SAAU,aACV0/C,UACA7iC,WACA6H,MACCq9B,YAAa5xB,EAAM6rB,mBAAmB,qBAAuB7rB,EAAM6rB,mBAAmB,kBACtFgG,WAAY7xB,EAAM6rB,mBAAmB,uBAuFxC7pD,GAAOD,SACN6uD,UAAWA,EACXI,UAAWA,EACXH,MAAOA,I1I+sXF,SAAS7uD,EAAQD,EAASH,G2Ip0XhC,YA+BA,SAASmhB,GAAM+uC,EAAejiD,GAC7B,GAAImwB,EAAMzoB,GAAGu6C,EAAc7uC,OAAO+jC,WAAahnB,EAAMzoB,GAAGu6C,EAAc7uC,OAAOR,QAAS,CACrF,GAAMsvC,GAAuB,mCAK7B,MAJA/xB,GAAMtd,UAAU,UAAW,OAC1BpS,MAAOyhD,EACP3kC,MAAQprB,OAAQ,gBAEX+vD,EAGP,GAAMvnD,GAASw1B,EAAMksB,MAAM8F,KAC1BhL,SAAU8K,EAAc7uC,OAAO+jC,SAC/BvkC,OAAQqvC,EAAc7uC,OAAOR,OAC7BiK,QAASolC,EAAc7uC,eAGjBzY,GAAOkiB,QAAQs6B,eACfx8C,GAAOkiB,QAAQjK,MAEtB,IAAMwvC,GAAiBC,EAAsBJ,EACzCG,IACHznD,EAAOkiB,QAAQylC,eAAiBF,EAAe7jD,aAAa,oBAC5D5D,EAAOkiB,QAAQ0lC,aAAe5nD,EAAOkiB,QAAQ0lC,cAAgBC,EAAeJ,KAE5EznD,EAAOkiB,QAAQylC,eAAiB3nD,EAAOkiB,QAAQylC,eAC/C3nD,EAAOkiB,QAAQ0lC,aAAe5nD,EAAOkiB,QAAQ0lC,cAG9CzB,EAAKE,MAAMrmD,EAAQqF,GAQpB,QAASqiD,GAAsBnvC,GAG9B,GAAM8K,GAAU9K,EAAM9M,QAAU8M,EAAM+K,UAEtC,OAAID,IAAWA,EAAQzf,aAAa,oBAC5Byf,EAEP,OAWF,QAASwkC,GAAexkC,GACvB,GAAMD,GAAO0kC,EAAgBzkC,EAE7B,IAAoB,mBAATD,GAAX,CAKA,GAAME,GAAaF,EAAK,GAMlB2kC,EAAgB,SAAyB1kC,GAC9C,GAAM2kC,GAAY3kC,EAAQE,aAC1B,IAAIykC,EAAW,CACd,IAAK,GAAI5kD,GAAI,EAAGA,EAAI4kD,EAAUC,WAAWloD,OAAQqD,IAChD,GAAI4kD,EAAUC,WAAW7kD,KAAOkgB,EAC/B,MAAOlgB,EAGT,UAEA,MAAO,IAEPkgB,GAGI4kC,EAAuB9kC,EAAKL,YAAY,SAASC,EAASxT,GAC/D,IAAKA,EAAGyT,SACP,MAAOD,GAAU,MAAQxT,EAAGlJ,YAAYzC,KAAO,IAGhD,IAAMof,GAAWzT,EAAGyT,SAASC,aAG7B,OAA8B,KAA1BD,EAASE,QAAQ,KACbH,EAAU,IAAMC,EAAW,IAI5BD,EAAU,IAAMC,EAAU,SAAWzT,EAAG/X,IAAM,IAAM,MACzD,GAIH,OAAO0wD,GAAcD,EAAuB,iBAAmBH,IAYhE,QAASD,GAAgBzkC,GAGxB,IAFA,GAAMD,MAECC,GACND,EAAKriB,KAAKsiB,GACVA,EAAUA,EAAQE,aAGnB,OAAOH,GAwBR,QAAS+kC,GAAcliC,GAMtB,IALA,GAAIxe,GAAIwe,EAAIlmB,OACR0c,EAAI,EAAIhV,EACRrE,EAAI,EACJgZ,SAEG3U,GAAK,GACX2U,EAA0B,IAApB6J,EAAIve,WAAWtE,IACI,IAAtB6iB,EAAIve,aAAatE,KAAc,GACT,IAAtB6iB,EAAIve,aAAatE,KAAc,IACT,IAAtB6iB,EAAIve,aAAatE,KAAc,GAElCgZ,EAAqB,YAAV,MAAJA,KAA4C,YAAZA,IAAM,IAAoB,QAAW,IAC5EA,GAAKA,IAAM,GACXA,EAAqB,YAAV,MAAJA,KAA4C,YAAZA,IAAM,IAAoB,QAAW,IAE5EK,EAAqB,YAAV,MAAJA,KAA4C,YAAZA,IAAM,IAAoB,QAAW,IAAOL,EAEnF3U,GAAK,IACHrE,CAGH,QAAQqE,GACP,IAAK,GACJgV,IAA8B,IAAxBwJ,EAAIve,WAAWtE,EAAI,KAAc,EACvC,MACD,KAAK,GACJqZ,IAA8B,IAAxBwJ,EAAIve,WAAWtE,EAAI,KAAc,CACvC,MACD,KAAK,GACJqZ,GAA0B,IAApBwJ,EAAIve,WAAWtE,GACrBqZ,EAAqB,YAAV,MAAJA,KAA4C,YAAZA,IAAM,IAAoB,QAAW,IAO9E,MAJAA,IAAKA,IAAM,GACXA,EAAqB,YAAV,MAAJA,KAA4C,YAAZA,IAAM,IAAoB,QAAW,IAC5EA,GAAKA,IAAM,GAEJA,IAAM,EApNd,GAAM0pC,GAAO/uD,EAAQ,KACfo+B,EAAQp+B,EAAQ,KAQhBowD,EAAqB,WAC1B,OACChL,SAAU,QACVvkC,OAAQ,UACRiK,YA4MF1qB,GAAOD,QAAUghB;AACjB/gB,EAAOD,QAAQmJ,KAAO,WACrB80B,EAAM4lB,SAASnjD,OAAQ,kBAAmBsgB,K3Iu0XrC,SAAS/gB,EAAQD,EAASH,G4IriYhC,Y5IgjYC,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G4IhhYxF,QAAS4vD,GAAWxjD,GACnB,MAAOA,GAAIue,QAAQlrB,OAAO0J,SAASwjB,SAAS6vB,aAW7C,QAASqT,GAAWzjD,GACnB,OAAQwjD,EAAWxjD,GAYpB,QAAS0jD,GAAO1jD,GACf,GAAMwe,GAAOxe,EAAImS,QAAQ,YAAa,IAAIA,QAAQ,YAAa,IAAIA,QAAQ,MAAO,GAGlF,OAAIqM,GAAKD,QAAQ,cAKZC,EAAKuV,MAAM,oBAKX,OAAQ,MAAO,OAAOxV,QAAQpN,OAAOssC,SAe3C,QAASkG,GAAWllC,GACnB,IAAKA,EACJ,QAGD,IAAMmlC,IAAQnlC,EAEd,OAAyB,SAArBA,EAAQJ,SACJulC,EAGDA,EAAKt4C,OAAOq4C,EAAWllC,EAAQE,gBAWvC,QAASklC,GAAaxN,GACrB,GAAMyN,GAAUH,EAAWtN,EA0B3B,OAAOyN,GAAQvyC,IAAI,SAAUre,GAC5B,MAAOA,GAAE8L,aAAa,kBAAoB9L,EAAE8L,aAAa,mBAAqB9L,EAAE0lC,QAAQta,gBAAkBprB,EAAEL,GAAK,IAAMK,EAAEL,GAAK,MAAQK,EAAE0e,UAAY,IAAM1e,EAAE0e,UAAUrH,MAAM,KAAK,GAAK,OACpLorB,OAAO,SAAU3tB,EAAGxJ,EAAGipB,GACzB,MAAOA,GAAIoE,YAAY7jB,KAAOxJ,IAC5BklB,UAYJ,QAAS+9B,GAAMhjC,EAASslC,GACnBnzB,EAAMlP,YAAYqiC,KACrBA,KAGD,IAAMC,GAAaH,EAAaplC,GAE1BrjB,EAASw1B,EAAMksB,MAAMmH,KAC1BrM,UAAW,SAAU,QAAS,UAAUr5B,QAAQE,EAAQma,YAAgBna,EAAQma,QAAQta,cAAgB,OACxGhB,SACC+4B,KAAMzlB,EAAMksB,OACXoH,SAAUF,EAAWprC,KAAK,OAC1BurC,gBAAiBH,EACjBI,UAAW3lC,EAAQma,QACnByrB,UAAW9C,EAAKK,YAChB0C,YAAa7lC,EAAQ+B,KACrB+K,OAAQ,QAAS,UAAUhN,QAAQE,EAAQma,YAAgBna,EAAQxf,KAAOwf,EAAQ8M,MAAMjjB,WAAW+wB,OACnGkrB,YAAaf,EAAW/kC,EAAQ+B,OAC9BujC,KAIL,OAAIN,GAAWhlC,EAAQ+B,OAASkjC,EAAOjlC,EAAQ+B,OAE9CplB,EAAOo+B,OAAQ,EACR+nB,EAAKE,MAAMrmD,EAAQqF,KAGvB+iD,EAAW/kC,EAAQ+B,OAEtBgkC,EAAcxjD,IAAI5F,GAAQikD,QAGpB,GAWR,QAASoF,GAAW9wC,GACnB,MAAO8tC,GAAM9tC,EAAM9M,QASpB,QAAS4vC,GAAQp7C,GAChBoF,EAAWpF,EAQZ,QAASqpD,KACR,GAAMlgD,GAAO,WAAckgD,IAAYjkD,KACjCkkD,EAAWH,EAAc/D,OAC3BkE,IACHpD,EAAKE,MAAMkD,EAAUngD,GAWvB,QAASotC,GAAS5pC,GACjBy5C,EAAMz5C,EAAE6L,QAcT,QAAS/X,GAAKV,GACb,GAAIwpD,UACApmD,QAuBJ,IArBAgmD,EAAgB,GAAIthB,GAAM,SAE1BwhB,IAGA9zB,EAAM0sB,OAAOoH,GAET9zB,EAAMlP,YAAYtmB,KACrBA,MAEDA,EAASw1B,EAAMksB,OACd7L,KAAM59C,OAAO0J,SACb8zC,SAAU,IACVl9B,MAAO,QACPixC,MAAO,MACLxpD,GAECA,EAAOlH,eAAe,cACzBuM,EAAWrF,EAAOqF,UAGfrF,EAAOwpD,OAASh0B,EAAMzoB,GAAG/M,EAAOwpD,MAAO,WAAaxpD,EAAOwpD,MAAMljD,YAAY4G,WAAWyrB,MAAM,UAGjG,IAFA6wB,EAAQxpD,EAAOwpD,MAEVpmD,EAAI,EAAGA,EAAIomD,EAAMzpD,OAAQqD,GAAQ,EACrCoyB,EAAM4lB,SAASoO,EAAMpmD,GAAIpD,EAAOuY,MAAO8wC,OAElC,CACN,GAA2B,YAAvB,EAAAvmD,cAAO9C,EAAO61C,OAAgD,gBAApB71C,GAAOy1C,SAAuB,CAC3E,GAAMgU,GAAkB,+EAKxB,MAJAj0B,GAAMtd,UAAU,UAAW,OAC1BpS,MAAO2jD,EACP7mC,MAAQprB,OAAQ,gBAEXiyD,EAGPj0B,EAAM4lB,SAASp7C,EAAO61C,KAAM71C,EAAOuY,MAAO,SAAUA,GAC/CA,EAAM9M,OAAO+xB,UAAYx9B,EAAOy1C,SAAShwB,eAC5C4jC,EAAW1xD,KAAK4gB,EAAM9M,OAAQ8M,KAKjCid,EAAM4lB,SAASnjD,OAAQ,iBAAkBu+C,G5IwwXzC,GAAI3zC,GAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,G4I3iYjCilC,EAAQ1wC,EAAQ,KAChB+uD,EAAO/uD,EAAQ,KACfo+B,EAAQp+B,EAAQ,KAClBgyD,SAQEP,EAAoB,WACzB,OACCrM,SAAU,OACVvkC,OAAQ,QACRiK,aAIE7c,EAAW,YAiRf7N,GAAOD,SACNmJ,KAAMA,EACN26C,QAASA,EACTgL,MAAOA,I5IgjYF,SAAS7uD,EAAQD,EAASH,G6I51YhCI,EAAAD,QAAAH,EAAA,M7Ik2YM,SAASI,EAAQD,GAEtB,Y8I70YD,SAASmyD,KAGR,IACC,GAAIC,GAAiB1xD,OAAO2xD,iBAAiBjoD,SAAS6B,gBAAiB,UAAUqmD,iBAAiB,UAIlG,OADAF,GAAiBA,EAAe5yC,QAAQ,KAAM,IAAIA,QAAQ,MAAO,IAAIA,QAAQ,KAAM,IAAIA,QAAQ,KAAM,IAC9F/R,KAAK8e,MAAM6lC,GACjB,MAAO/8C,GACR,UAQF,QAAS6xC,KACR,MAAIqL,GACI,IAGDJ,IAAoBrQ,OAO5B,QAAS0Q,KACR,MAAID,GACI,OAGDJ,IAAoBM,O9I4yY3BpxD,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,G8Ih2YT,IAAM4wD,GAAS,WACd,GAAMviD,GAAI5F,SAASqL,cAAc,KAC3Bi9C,EAAUtoD,SAAS6B,gBACrB0mD,QAMJ,OAJA3iD,GAAEqc,UAAY,iDACdqmC,EAAQ77C,YAAY7G,GACpB2iD,IAASvoD,SAAS+nC,eAAe,WACjCugB,EAAQxrC,YAAYlX,GACb2iD,I9Is5YP3yD,e8Ix2YAknD,iBAAkBA,EAClBsL,iBAAkBA,G9I22YlBvyD,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,Y+Ih7YD,IAAM+yD,GAAS/yD,EAAQ,KACjBgzD,EAAMhzD,EAAQ,KACdizD,EAAOjzD,EAAQ,KACfkzD,EAAYlzD,EAAQ,KACpBmzD,EAAanzD,EAAQ,KAErBozD,EAAa,YAEnBA,GAAW3xD,UAAU6H,KAAO,WAG3BpB,KAAKmrD,IAAM,GAAIL,GACf9qD,KAAKmrD,IAAIpE,MAAM1kD,SAAS2W,MAGxBhZ,KAAK09B,KAAO,GAAIqtB,GAAK1oD,SAAS2W,MAC9BhZ,KAAK09B,KAAKqpB,QACV/mD,KAAKorD,UAAY,GAAIJ,GACrBhrD,KAAKorD,UAAUhqD,OAEfpB,KAAKqrD,WAAa,GAAIJ,GACtBjrD,KAAKqrD,WAAWjqD,KAAKiB,WAGrB,GAAIwoD,IAAS9D,SAGdmE,EAAW3xD,UAAU6pB,QAAU,WAC9BpjB,KAAKmrD,IAAI/nC,WAGVlrB,EAAOD,QAAU,GAAIizD,I/Is7Yf,SAAShzD,EAAQD,EAASH,GAE/B,YgJv9YD,IAAM8gB,GAAY9gB,EAAQ,IAAkB8gB,UAGtC0yC,GACL,kBACA,mBACA,iBACA,gBACA,cACA,aACA,oBACA,kBACA,eACA,aACA,wBACA,eACA,gBACA,cACA,aACA,iBACA,6BACA,2BACA,cACA,iBACA,gBAGKC,EAAa,SAAAlyC,GAClB,GAAMkkC,GAASlkC,EAAYkkC,MAC3B,QAAQ,kBAAmB,cACzB94C,OAAO,SAACq4C,EAAS0O,GACjB,GAAMC,GAAalO,EAAOiO,EAS1B,OARA1O,GAAQ0O,GAAeF,EAAahjD,MAAMgjD,EAAaznC,QAAQ2nC,GAAe,GAC5E/mD,OAAO,SAAC2wC,EAAQn8B,GAChB,GAAMyyC,GAAYnO,EAAOtkC,EAIzB,OAHIyyC,KACHtW,EAAOn8B,GAASyyC,EAAYD,GAEtBrW,OAEF0H,QAIJ6O,EAAW,SAAAtyC,GAAA,MAChBA,GAAYuyC,iBACXvyC,EAAYuyC,iBAAiB,QAC3BnnD,OAAO,SAACu4C,EAAOtjC,GAEf,MADAsjC,GAAMtjC,EAAKnV,MAAQiE,KAAKm1C,MAAMjkC,EAAK8Q,WAC5BwyB,WAIL6O,EAAY,SAAClzD,EAAQ0gB,GAC1B,GAAM47B,MAEA6W,EAAYnzD,EAAOm5B,MACzB,IAAIg6B,GAAaA,EAAUC,UAAW,CACrC,GAAMC,GAAkBF,EAAUC,WAClC9W,GAAOgX,WAAazjD,KAAKm1C,MAAwC,IAAjCqO,EAAgBE,eAA0D,IAAhCF,EAAgBG,mBACrC,gBAApC9yC,GAAYkkC,OAAO6O,eACpCnX,EAAOgX,WAAa5yC,EAAYkkC,OAAO6O,aAAe/yC,EAAYkkC,OAAO8O,gBAG1E,OAAOpX,IAGFqX,EAAmB,YAEzBA,GAAiB/yD,UAAUwtD,MAAQ,WAClCpuD,OAAO0K,iBAAiB,OAAQ,WAC/B,GAAMgW,GAAc1gB,OAAO0gB,aAAe1gB,OAAO6gB,mBAAqB7gB,OAAO4gB,eAAiB5gB,OAAO8gB,cACrG,UAAKJ,GAAiB,UAAYA,IAAiB,aAAajX,KAAKC,SAASC,cAI9EvJ,YAAW,WACV,GAAM+jD,GAAUyO,EAAWlyC,GACrB2jC,EAAQ2O,EAAStyC,GACjB47B,EAAS4W,EAAUlzD,OAAQ0gB,EAEjCT,GAAU,mBACTskC,SAAU,YACVvkC,OAAQ,SACRwkC,SAAWL,UAASE,QAAO/H,aAE1B,MAIL/8C,EAAOD,QAAUq0D,GhJm8YX,SAASp0D,EAAQD,EAASH,GAE/B,YiJ/hZD,IAAMy0D,GAAaz0D,EAAQ,KACrB00D,EAAmB10D,EAAQ,KAC3B20D,EAAU30D,EAAQ,KAClBg9C,EAAWh9C,EAAQ,KAEnB8gB,EAAY9gB,EAAQ,IAAkB8gB,UAEtC8zC,EAAM,WACX1sD,KAAK2sD,wBAA0B,oCAC/B3sD,KAAK4sD,SAAW,GAAI9X,GAKrB4X,GAAInzD,UAAUwtD,MAAQ,SAAUxQ,GAC/Bv2C,KAAK4sD,SAASrW,KAAKA,GACnBv2C,KAAK6sD,aAAgB,SAAUv/C,EAAGyW,GACjC,GAAMJ,GAAWI,EAAQJ,SAASC,cAC5BkpC,EAAc/oC,EAAQ3f,aAAa,iBAEzC,KAAK0oD,EACJ,OAAO,CAGR,IAAMC,GAAchpC,EAAQzf,aAAa,gBACnCwhB,EAAO2mC,EAAQ1oC,GAEjB/N,EAAO+N,EAAQzf,aAAa,sBAChC0R,GAAOA,EAAOtQ,KAAK8e,MAAMxO,MAEzBA,EAAK2N,SAAWA,EAChB3N,EAAKg3C,QAAUR,EAAiBzoC,GAChC/N,EAAKoO,YAAcL,EAAQK,YAEvB0B,IACH9P,EAAK4zC,YAAc6C,EAAQ3mC,IAI5B9P,EAAKi3C,MACJC,QAAyB,SAAhBH,EACTI,SAAoD,SAA1CppC,EAAQzf,aAAa,iBAC/B8oD,KAAMrpC,EAAQzf,aAAa,SAQ5B0R,EAAKq3C,WAA6B,SAAhBN,GAA0C,KAAhBA,EAE5C/2C,EAAKs3C,cAAgBf,EAAWxoC,MAAaiF,UAC7ChT,EAAK7J,OAAS4X,EAAQzf,aAAa,kBACnC0R,EAAK6pC,UAAY97B,EAAQzf,aAAa,mBACtC0R,EAAK2pC,UAAY57B,EAAQzf,aAAa,kBAEtC,IAAMy5C,GAAWh6B,EAAQzf,aAAa,iBAChCipD,EAAWxpC,EAAQzf,aAAa,iBAChCslD,EAAc7lC,EAAQzf,aAAa,OAErCy5C,KACH/nC,EAAK+nC,SAAWj/B,SAASi/B,IAGtBwP,IACHv3C,EAAKu3C,SAAWzuC,SAASyuC,IAGtB3D,IACH5zC,EAAK4zC,YAAcA,GAGpB5zC,EAAKknC,SAAW,QAChBlnC,EAAK2C,OAAS,MACd3C,EAAKgU,SAAW3nB,SAAS2nB,SACzBhU,EAAK1Q,IAAMjD,SAASwjB,SAASC,KAC7BlN,EAAU,kBAAmB5C,IAE3B5V,KAAKJ,MAGRA,KAAK4sD,SAAShyB,GAAG,QAAS56B,KAAK2sD,wBAAyB3sD,KAAK6sD,cAAc,IAI5EH,EAAInzD,UAAU6pB,QAAU,WACvBpjB,KAAK4sD,SAASxpC,WAGflrB,EAAOD,QAAUy0D,GjJmiZX,SAASx0D,EAAQD,GAEtB,YkJvmZD,IAAMs0D,GAAa,QAAbA,GAAuBr8C,EAAI4T,EAAMqP,GAItC,GAFAA,EAAQA,GAAS,GAEZjjB,EAAG0N,WACP,MAAOkG,EAIY,KAAhBA,EAAKrjB,QAAiByP,EAAG6tB,WAAayvB,KAAKC,YAC9Cv9C,EAAKA,EAAG0N,WAGT,IAAM8vC,GAAYx9C,EAAG5L,aAAa,iBAE9BopD,IACH5pC,EAAKriB,KAAKisD,EAGX,IAAMC,GAAgBz9C,EAAG9L,aAAa,sBAQtC,OALIupD,IAA2B,IAAVx6B,GACpBjjB,EAAGm6B,gBAAgB,kBAIhBn6B,EAAG9L,aAAa,4BACZ0f,EAGDyoC,EAAWr8C,EAAG0N,WAAYkG,EAAMqP,EAAQ,GAGhDj7B,GAAOD,QAAUs0D,GlJqoZX,SAASr0D,EAAQD,EAASH,GAE/B,YmJjsZD,IAAMy0D,GAAaz0D,EAAQ,KAErB00D,EAAmB,SAAUzoC,GAClC,MAAOwoC,GAAWxoC,MAAaiF,UAAU9K,KAAK,OAG/ChmB,GAAOD,QAAUu0D,GnJusZX,SAASt0D,EAAQD,GAEtB,YoJ/sZD,IAAMw0D,GAAU,QAAVA,GAAoBv8C,EAAI4T,GAE7B,IAAK5T,EAAG0N,WACP,MAAOkG,EAGR,IAAMgC,GAAO5V,EAAG5L,aAAa,OAE7B,IAAIwhB,EAAM,CACT,GAAM9d,GAAI3F,SAASqL,cAAc,IAEjC,OADA1F,GAAE8d,KAAOA,EACC9d,EAAEwsB,SAAZ,KAAyBxsB,EAAE0tC,SAAW1tC,EAAE4lD,SAGzC,MAAOnB,GAAQv8C,EAAG0N,WAAYkG,GAG/B5rB,GAAOD,QAAUw0D,GpJqtZX,SAASv0D,EAAQD,EAASH,GAE/B,YqJxuZD,IAAM8gB,GAAY9gB,EAAQ,IAAkB8gB,UAEtCmyC,EAAO,SAAUxU,GACtBv2C,KAAKu2C,KAAOA,GAAQl0C,SAGrB0oD,GAAKxxD,UAAUwtD,MAAQ,WAEtB/mD,KAAKu2C,KAAKlzC,iBAAiB,OAAQ,SAAUiK,GAE5C,GAAMyW,GAAUzW,EAAEnB,OACZ0M,GACLF,OAAQ,OACRukC,SAAU,OACVt6B,SACCe,SAAUI,EAAQJ,SAASC,cAC3B47B,QAAS,QAIX,IAAI7mD,OAAOk1D,aAAc,CACxB,GAAMC,GAAYn1D,OAAOk1D,eAAejgD,UACxCiL,GAAK+J,QAAQmrC,WAAaD,EAAUrtD,OACpCoY,EAAK+J,QAAQorC,MAAQxlD,KAAKD,KAAKulD,EAAUj+C,MAAM,MAAMpP,OAAS,GAC1DqtD,EAAUrtD,OAAS,IACtBoY,EAAKi1C,UAAYA,EAAU7zC,OAAO,EAAG,IAAM,QAAU6zC,EAAU7zC,YAE/DpB,EAAKi1C,UAAYA,EAGnBl1C,EAAU,kBAAmBC,MAI/B3gB,EAAOD,QAAU8yD,GrJ8uZX,SAAS7yD,EAAQD,EAASH,GAE/B,YAMA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GAJvF,GAAI2F,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GsJtxZzC8kC,EAAY7rC,EAAQ,IACpB8gB,EAAY9gB,EAAQ,IAAkB8gB,UACtCq1C,EAAqB,IACrBC,GAAoB,OAAQ,QAAS,QAAS,SAAU,YAAa,aAAc,WAAY,cAAe,cAC9GC,GAAsB,QACtBC,EAAe,kBAAoBz1D,QAAU,eAAiB,SAE9DqyD,EtJ0xZW,WsJzxZhB,QAAAA,MAAe,EAAAlsD,cAAAkB,KAAAgrD,GACdhrD,KAAKquD,mBAAqB,EAC1BruD,KAAKsuD,mBACLtuD,KAAKuuD,iBtJi5ZL,MAlHAvD,GAAUzxD,UsJ5xZX6H,KtJ4xZ4B,WsJzxZ3B,IAAK,GAHER,GAAAZ,KAGE8D,EAAI,EAAGA,EAAIoqD,EAAiBztD,OAAQqD,IAC5CnL,OAAO0K,iBAAiB6qD,EAAiBpqD,GAAI,SAAAuf,GAAA,MAAMziB,GAAK4tD,eAAenrC,IAGxE,KAAK,GAAIvf,GAAI,EAAGA,EAAIqqD,EAAmB1tD,OAAQqD,IAC9CnL,OAAO0K,iBAAiB8qD,EAAmBrqD,GAAI,SAAAuf,GAAA,MAAMziB,GAAK6tD,aAAaprC,IAGxEsgB,GAAUO,SAAS,cACnB7hC,SAAS2W,KAAK3V,iBAAiB,uBAAwB,SAAAggB,GAAA,MAAMziB,GAAK8tD,uBAAuBrrC,KAAK,GAE9FrjB,KAAK2uD,iBAGLh2D,OAAO0K,iBAAiB+qD,EAAa,WACpCxtD,EAAK6tD,eACL71C,EAAU,mBACTskC,SAAU,OACVvkC,OAAQ,cACRiK,SACCwoC,WACCvV,MAAOj1C,EAAKytD,0BtJ0yZhBrD,EAAUzxD,UsJlyZXi1D,etJkyZsC,WsJlyZpB,GAAAn2C,GAAArY,IACjBmY,cAAanY,KAAK4uD,kBACd5uD,KAAKsuD,qBACRtuD,KAAKsuD,oBAAsB,GAAIjwC,OAAQC,WAExCte,KAAK4uD,iBAAmB71D,WAAW,iBAAMsf,GAAKo2C,gBAAgBR,ItJyyZ9DjD,EAAUzxD,UsJtyZXs1D,uBtJsyZ8C,WsJtyZpB,GAAA1iB,GAAAnsC,IACzBA,MAAK8uD,0BAA4B5mB,YAAY,iBAAMiE,GAAKqiB,kBAAkBP,ItJ6yZ1EjD,EAAUzxD,UsJ1yZXw1D,qBtJ0yZ4C,WsJzyZ3C/uD,KAAKyuD,eACLlmB,cAAcvoC,KAAK8uD,4BtJ6yZnB9D,EAAUzxD,UsJ1yZXk1D,atJ0yZoC,WsJzyZhCzuD,KAAKsuD,qBACPtuD,KAAKuuD,kBAAoB,GAAIlwC,OAAQC,UACrCte,KAAKquD,oBAAsB7lD,KAAKm1C,OAAO39C,KAAKuuD,iBAAmBvuD,KAAKsuD,oBAAoB,KACxFn2C,aAAanY,KAAK4uD,kBAClB5uD,KAAKsuD,mBAAqB,OtJ8yZ3BtD,EAAUzxD,UsJ1yZXo1D,etJ0yZsC,WsJ1yZpB,GAAAvc,GAAApyC,IAEjB,IADAA,KAAKgvD,aACDr2D,OAAOs2D,QAAS,CACnBjvD,KAAKgvD,aAAe3sD,SAAS6sD,uBAAuB,uBACpD,KAAK,GAAIprD,GAAI,EAAGA,EAAI9D,KAAKgvD,aAAavuD,OAAQqD,IAC7CnL,OAAOs2D,QAAQE,kBAAkBnvD,KAAKgvD,aAAalrD,GAAG3L,GAAI,SAAUi3D,GAAQ,GAAAnd,GAAAjyC,IAC3EovD,GAAOx0B,GAAGw0B,EAAOC,iBAAkB,SAAAhsC,GAAA,MAAM4uB,GAAK4c,uBAAuBxrC,KACrE+rC,EAAOx0B,GAAGw0B,EAAOE,iBAAkB,SAAAjsC,GAAA,MAAM4uB,GAAK8c,qBAAqB1rC,WAG/D,CACNrjB,KAAKgvD,aAAe3sD,SAASovB,qBAAqB,QAClD,KAAK,GAAI3tB,GAAI,EAAGA,EAAI9D,KAAKgvD,aAAavuD,OAAQqD,IAC7C9D,KAAKgvD,aAAalrD,GAAGT,iBAAiB,UAAW,SAAAggB,GAAA,MAAM+uB,GAAKyc,uBAAuBxrC,KACnFrjB,KAAKgvD,aAAalrD,GAAGT,iBAAiB,QAAS,SAAAggB,GAAA,MAAM+uB,GAAK2c,qBAAqB1rC,KAC/ErjB,KAAKgvD,aAAalrD,GAAGT,iBAAiB,QAAS,SAAAggB,GAAA,MAAM+uB,GAAK2c,qBAAqB1rC,OtJ6zZjF2nC,EAAUzxD,UsJxzZXm1D,uBtJwzZ8C,SsJxzZtBrrC,GACnBA,EAAGlK,OAAOiG,OACbpf,KAAKyuD,eAELzuD,KAAKwuD,kBtJ4zZCxD,IsJtzZT9yD,GAAOD,QAAU+yD,GtJ6zZX,SAAS9yD,EAAQD,EAASH,GAE/B,YAMA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GAJvF,GAAI2F,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GuJz6ZzCi2C,EAAWh9C,EAAQ,KAEnB4f,EAAI,SAACiH,GAAD,SAAUrW,MAAMjQ,KAAKsmB,IAEzBssC,EvJ+6ZY,WuJ76ZjB,QAAAA,MAAe,EAAAnsD,cAAAkB,KAAAirD,GACdjrD,KAAK4sD,SAAW,GAAI9X,GvJk8ZpB,MAfAmW,GAAW1xD,UuJh7ZZ6H,KvJg7Z6B,SuJh7ZvB8O,GACLwH,EAAExH,EAAG2H,iBAAiB,wBACpB6K,QAAQ,SAAC6sC,GACT73C,EAAE63C,EAAQ13C,iBAAiB,YACzB6K,QAAQ,SAAC8sC,EAAS/nD,EAAOgoD,GACzB/3C,EAAE83C,EAAQ33C,iBAAiB,MACzB6K,QAAQ,SAAAi5B,GACRA,EAAK1+B,aAAa,gBAAiBxV,EAAQ,GAC3Ck0C,EAAK1+B,aAAa,gBAAiBwyC,EAAShvD,evJm7ZlDwqD,EAAW1xD,UuJ76ZZ6pB,QvJ66ZgC,WuJ56Z/BpjB,KAAK4sD,SAASxpC,WvJg7ZP6nC,IuJ56ZT/yD,GAAOD,QAAUgzD,GvJm7ZX,SAAS/yD,EAAQD,GAEtB,YwJj9ZDC,GAAOD,QAAU,SAAU+I,GAE1B,GAAM0uD,IAAe,YAAYttD,KAAKC,SAASC,QACzCqtD,EAAU,mBAAmBniD,KAAKnL,SAASC,QAC3CgyB,EAAO,4DAGP/7B,EAAI8J,SAASwD,eAAe,wBAC5BmZ,EAAI3c,SAASwD,eAAe,qBAC5B2nB,EAAInrB,SAASwD,eAAe,sBAE5B+pD,EAAWr3D,EAAKA,EAAE+L,aAAa,uBAAyBhJ,OACxDu0D,EAAQ7wC,EAAKzmB,EAAE+L,aAAa,oBAAsBhJ,OAClDw0D,EAAStiC,EAAKj1B,EAAE+L,aAAa,qBAAuBhJ,OAGpDy0D,EAAe,YAAY3tD,KAAKyjB,SAAS+nC,UACzCoC,EAA6B,eAAe5tD,KAAKyjB,SAAS+nC,UAC1DqC,EAAsB,8EAA8E7tD,KAAK0tD,GAEzGI,EAASP,EAAWA,EAAQ,GAAK,EAEvC,IAAI3uD,GAAUA,EAAMvF,IAAI,eAAiBi0D,GAAeC,EAAU,CAEjE,GAAM7rD,GAAI,GAAIm0B,MAEV83B,GACHjsD,EAAE4C,IAAS4tB,EAAX,sFACU07B,EACVlsD,EAAE4C,IAAS4tB,EAAX,sCAAqDw7B,EAArD,OAAiEF,EAAjE,OAA+EC,EAA/E,QAA2FK,EAA3F,uDACUD,EACVnsD,EAAE4C,IAAS4tB,EAAX,uCAAsDw7B,EAAtD,OAAkEF,EAAlE,OAAgFC,EAAhF,QAA4FK,EAA5F,uDAEApsD,EAAE4C,IAAS4tB,EAAX,mCAAkD47B,EAAlD,qExJ29ZG,SAASh4D,EAAQD,EAASH,GAE/B,YyJx/ZD,IAAA2C,GAAA3C,EAAA,IAEMq4D,EAAkB,WACvBx3D,OAAOy3D,kBACN7/C,IAAK,MACL6f,OAAQ,cACRigC,cAAc,GAKW,MAAtBxqC,SAAS+nC,UAAoBvrD,SAASwD,cAAc,yBACvDlN,OAAOy3D,iBAAiBtsC,KAAO,UAAYzhB,SAASwD,cAAc,uBAAuBvB,aAAa,sBAAwB,MAE/H,EAAA7J,EAAAgM,YAAW,0CAMZvO,GAAOD,QAAU,SAAA+I,GAChB,GAAIA,EAAMvF,IAAI,gBACb00D,QAEI,IAAInvD,EAAMvF,IAAI,aAAc,CAChC,GAAMk0D,IAAU,EAAAl1D,EAAAkf,gBAAe,YACzB22C,EAAcX,EAAQl4C,QAAQ,KAAM,IACpC84C,EAAkBD,EAAYp/B,UAAUo/B,EAAY7vD,OAAS,GAAI6vD,EAAY7vD,QAC7E+vD,EAAiB1xC,SAASyxC,EAAiB,GAC7CC,GAAiB,IAAM,IAC1BL,OzJwgaG,SAASj4D,EAAQD,EAASH,GAE/B,Y0J7iaD,SAAS24D,KACR93D,OAAO+3D,KAAO/3D,OAAO+3D,SACrB/3D,OAAO+3D,KAAKjvD,MAAM,cAAe,WAAW,EAAAhH,EAAAkf,gBAAe,eAC3D,EAAAlf,EAAAgM,YAAW,8EALZ,GAAAhM,GAAA3C,EAAA,GASAI,GAAOD,QAAU,SAAU+I,GAE1B,GAAM2vD,GAAkBh4D,OAAOktB,SAASC,KAAKjC,QAAQ,gBAC/C+sC,IAAgBvuD,SAASwD,cAAc,gCAAkC8qD,EACzEE,IAAmBxuD,SAASwD,cAAc,uBAEhD,IAAI7E,EAAMvF,IAAI,kBACbg1D,QAEI,IAAIzvD,EAAMvF,IAAI,aAKlB,GAHIm1D,GACHH,IAEGI,GAAkBroD,KAAKmI,UAAY,IACtC8/C,QAEI,CACJ,GAAMd,IAAU,EAAAl1D,EAAAkf,gBAAe,YACzB22C,EAAcX,EAAQl4C,QAAQ,KAAM,IACpC84C,EAAkBD,EAAYp/B,UAAUo/B,EAAY7vD,OAAS,GAAI6vD,EAAY7vD,QAC7E+vD,EAAiB1xC,SAASyxC,EAAiB,GAE7CC,GAAiB,MAAQ,GAC5BC,O1JujaE,SAASv4D,EAAQD,EAASH,GAE/B,Y2J1laD,IAAA2C,GAAA3C,EAAA,IAEMg5D,EAAc,WACnB,MAAO,aAAa1uD,KAAKC,SAASC,QAInCpK,GAAOD,QAAU,SAAU+I,GAC1B,GAAIA,GAASA,EAAMvF,IAAI,gBAAkBq1D,IAAe,CAEvDzuD,SAASgB,iBAAiB,cAAe,YACxC,EAAA5I,EAAAme,WAAU,mBACTskC,SAAU,MACVvkC,OAAQ,UACRiK,SACCmuC,SAAU,kBAKb,IAAMC,GAAK3uD,SAASqL,cAAc,SAClCsjD,GAAGlyB,MAAQkyB,EAAGjkB,OAAQ,EACtBikB,EAAGtqD,IAAM,yDACTsqD,EAAG/zC,aAAa,iBAAkB,mBAClC5a,SAAS2W,KAAKlK,YAAYkiD,M3JmmatB,SAAS94D,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GARvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIq3D,GAAsBn5D,EAAoB,KAE1Co5D,EAAsBz3D,EAAuBw3D,G4Jroa5Cr4C,EAAY9gB,EAAQ,IAAkB8gB,UAEtCmuC,EAAQ,SAACoK,EAAaC,GAAd,MACbx4C,GAAU,mBAAqBskC,SAAU,OAAQvkC,OAAQ,cAAew4C,cAAaC,kBAEhFC,EAAuB,SAACC,EAAU1lB,GAAX,MAC5BA,GAAQlpB,QAAQ,SAAAqpB,GACf,GAAMwlB,GAAYxlB,EAAO5/B,OACnBglD,EAAcI,EAAUp5D,GAExBi5D,KAAexgD,QAAA,EAAAsgD,cAAI7uD,SAASwV,iBAAiB,4BACjD25C,UAAU,SAAAD,GAAA,MAAaA,GAAUp5D,KAAOg5D,GAC1CpK,GAAMoK,EAAaC,EAAe,GAClCE,EAASjjB,UAAUkjB,MAGfnwD,EAAO,WACZ,IAAK,aAAagB,KAAKC,SAASC,UAAY3J,OAAOuzC,qBAClD,OAAO,CAER,IAAMolB,GAAW,GAAIplB,sBACpB,SAAUN,GACTylB,EAAqBrxD,KAAM4rC,QAG7Bh7B,QAAA,EAAAsgD,cAAI7uD,SAASwV,iBAAiB,4BAC5B6K,QAAQ,SAAA6uC,GACRD,EAASpjB,QAAQqjB,K5J6oanBt5D,e4JzoagBmJ,Q5J0oahBlJ,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,G6J7qahC,YAQA,SAAA2B,GAAAP,GAAsC,MAAAA,MAAAC,WAAAD,GAAuCQ,UAAAR,GAN7EjB,EAAAkB,YAAA,CAEA,IAAAs4D,GAAA35D,EAAA,KAEA45D,EAAAj4D,EAAAg4D,EAIAx5D,cAAA,SAAA80B,GACA,GAAAvb,MAAAc,QAAAya,GAAA,CACA,OAAAjpB,GAAA,EAAA6tD,EAAAngD,MAAAub,EAAAtsB,QAA6CqD,EAAAipB,EAAAtsB,OAAgBqD,IAC7D6tD,EAAA7tD,GAAAipB,EAAAjpB,EAGA,OAAA6tD,GAEA,SAAAD,cAAA3kC,K7JqraM,SAAS70B,EAAQD,EAASH,G8JvsahCI,EAAAD,SAAkByB,UAAA5B,EAAA,KAAAqB,YAAA,I9J6saZ,SAASjB,EAAQD,EAASH,G+J7sahCA,EAAA,GACAA,EAAA,KACAI,EAAAD,QAAAH,EAAA,IAAA0Z,MAAAupB,M/JmtaM,SAAS7iC,EAAQD,EAASH,GgKrtahC,YACA,IAAAqT,GAAArT,EAAA,IACA+Q,EAAA/Q,EAAA,IACAqZ,EAAArZ,EAAA,IACAO,EAAAP,EAAA,KACA85D,EAAA95D,EAAA,KACAgY,EAAAhY,EAAA,IACA+5D,EAAA/5D,EAAA,KACAg6D,EAAAh6D,EAAA,IAEA+Q,KAAA+C,EAAA/C,EAAAmC,GAAAlT,EAAA,cAAAi6D,GAA0EvgD,MAAAupB,KAAAg3B,KAAoB,SAE9Fh3B,KAAA,SAAAi3B,GACA,GAOAvxD,GAAAyF,EAAAwL,EAAAsC,EAPAxM,EAAA2J,EAAA6gD,GACA5lD,EAAA,kBAAApM,WAAAwR,MACAygD,EAAAzxD,UAAAC,OACAyxD,EAAAD,EAAA,EAAAzxD,UAAA,GAAAlF,OACAoyC,EAAApyC,SAAA42D,EACAzqD,EAAA,EACA0qD,EAAAL,EAAAtqD,EAIA,IAFAkmC,IAAAwkB,EAAA/mD,EAAA+mD,EAAAD,EAAA,EAAAzxD,UAAA,GAAAlF,OAAA,IAEAA,QAAA62D,GAAA/lD,GAAAoF,OAAAogD,EAAAO,GAMA,IADA1xD,EAAAqP,EAAAtI,EAAA/G,QACAyF,EAAA,GAAAkG,GAAA3L,GAAiCA,EAAAgH,EAAgBA,IACjDoqD,EAAA3rD,EAAAuB,EAAAimC,EAAAwkB,EAAA1qD,EAAAC,MAAAD,EAAAC,QANA,KAAAuM,EAAAm+C,EAAA95D,KAAAmP,GAAAtB,EAAA,GAAAkG,KAAoDsF,EAAAsC,EAAAlK,QAAApC,KAAgCD,IACpFoqD,EAAA3rD,EAAAuB,EAAAimC,EAAAr1C,EAAA2b,EAAAk+C,GAAAxgD,EAAA9X,MAAA6N,IAAA,GAAAiK,EAAA9X,MASA,OADAsM,GAAAzF,OAAAgH,EACAvB,MhK8taM,SAAShO,EAAQD,EAASH,GiK/vahC,GAAAoV,GAAApV,EAAA,GACAI,GAAAD,QAAA,SAAA+b,EAAAlH,EAAAlT,EAAAiR,GACA,IACA,MAAAA,GAAAiC,EAAAI,EAAAtT,GAAA,GAAAA,EAAA,IAAAkT,EAAAlT,GAEG,MAAA0T,GACH,GAAA8kD,GAAAp+C,EAAA,SAEA,MADA1Y,UAAA82D,GAAAllD,EAAAklD,EAAA/5D,KAAA2b,IACA1G,KjKwwaM,SAASpV,EAAQD,EAASH,GkKhxahC,GAAAmR,GAAAnR,EAAA,IACAuR,EAAAvR,EAAA,gBACAu6D,EAAA7gD,MAAAjY,SAEArB,GAAAD,QAAA,SAAAyQ,GACA,MAAApN,UAAAoN,IAAAO,EAAAuI,QAAA9I,GAAA2pD,EAAAhpD,KAAAX,KlKwxaM,SAASxQ,EAAQD,EAASH,GmK9xahC,YACA,IAAAmc,GAAAnc,EAAA,IACAkV,EAAAlV,EAAA,GAEAI,GAAAD,QAAA,SAAAgV,EAAAxF,EAAA7N,GACA6N,IAAAwF,GAAAgH,EAAAhN,EAAAgG,EAAAxF,EAAAuF,EAAA,EAAApT,IACAqT,EAAAxF,GAAA7N,InKqyaM,SAAS1B,EAAQD,EAASH,GoK3yahC,GAAAw6D,GAAAx6D,EAAA,KACAuR,EAAAvR,EAAA,gBACAmR,EAAAnR,EAAA,GACAI,GAAAD,QAAAH,EAAA,IAAAy6D,kBAAA,SAAA7pD,GACA,GAAApN,QAAAoN,EAAA,MAAAA,GAAAW,IACAX,EAAA,eACAO,EAAAqpD,EAAA5pD,MpKkzaM,SAASxQ,EAAQD,EAASH,GqKvzahC,GAAA6X,GAAA7X,EAAA,IACAwS,EAAAxS,EAAA,mBAEA06D,EAA6C,aAA7C7iD,EAAA,WAAyB,MAAAnP,eAGzBiyD,EAAA,SAAA/pD,EAAArP,GACA,IACA,MAAAqP,GAAArP,GACG,MAAAiU,KAGHpV,GAAAD,QAAA,SAAAyQ,GACA,GAAAlB,GAAAkrD,EAAA3mD,CACA,OAAAzQ,UAAAoN,EAAA,mBAAAA,EAAA,OAEA,iBAAAgqD,EAAAD,EAAAjrD,EAAAlO,OAAAoP,GAAA4B,IAAAooD,EAEAF,EAAA7iD,EAAAnI,GAEA,WAAAuE,EAAA4D,EAAAnI,KAAA,kBAAAA,GAAAmrD,OAAA,YAAA5mD,IrK+zaM,SAAS7T,EAAQD,EAASH,GsKp1ahC,GAAAuR,GAAAvR,EAAA,gBACA86D,GAAA,CAEA,KACA,GAAAC,IAAA,GAAAxpD,IACAwpD,GAAA,qBAA+BD,GAAA,GAC/BphD,MAAAupB,KAAA83B,EAAA,WAA+B,UAC9B,MAAAvlD,IAEDpV,EAAAD,QAAA,SAAAuV,EAAAslD,GACA,IAAAA,IAAAF,EAAA,QACA,IAAAG,IAAA,CACA,KACA,GAAAhmC,IAAA,GACAglC,EAAAhlC,EAAA1jB,IACA0oD,GAAAjoD,KAAA,WAA2B,OAASpC,KAAAqrD,GAAA,IACpChmC,EAAA1jB,GAAA,WAA+B,MAAA0oD,IAC/BvkD,EAAAuf,GACG,MAAAzf,IACH,MAAAylD,KtK21aM,SAAS76D,EAAQD,EAASH,GAE/B,YuKh3aDI,GAAOD,QAAUH,EAAQ,KACzBI,EAAOD,QAAQ+6D,gBAAiB,GvKs3a1B,SAAS96D,EAAQD,EAASH,GwKv3ahCI,EAAAD,QAAAH,EAAA,MxK63aM,SAASI,EAAQD,EAASH,GAE/B,YAMA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GyKt1axF,QAAS+5D,GAAMl6C,GAAQ,GAAAnY,GAAAZ,IACjB+Y,GAEQA,YAAkBm6C,eAC9Bn6C,EAAS1W,SAASwD,cAAckT,IAFhCA,EAAS1W,SAAS2W,KAK6B,WAA5CD,EAAOzU,aAAa,oBACvBtE,KAAKkQ,GAAK6I,EAEV/Y,KAAKkQ,GAAK6I,EAAOlT,cAAc,gCAGhBvK,SAAZ0E,KAAKkQ,KACR7N,SAAS2W,KAAK3V,iBAAiB,eAAgB,WAC9CzC,EAAKuyD,WAGNnzD,KAAKmzD,UAGD/uB,IACJA,EAAW8D,YAAY,WACtB7lC,SAAS2W,KAAK7V,cAAc,GAAIC,aAAY,kBAC1C,MA+CL,QAASgwD,GAAQ1oB,GAChB,GAAM2oB,GAAMr3B,EAAQ0O,IAAWA,EAE3B4oB,EAAa,eAAiBC,EAAS,WAAapxB,EAAO,GAW/D,OAVAmxB,IAAa,2DACbA,GAAc,WAAaD,EAAI57C,QAAQ,cAAe,SAAU4hB,GAC/D,GAAwB,OAApBA,EAAMhxB,OAAO,GAChB,MAAOgxB,GAAMpf,OAAO,EAErB,IAAM7E,GAAWo+C,EAAsBn6B,EAEvC,OAAOjkB,GAAW,OAASA,EAAW,OAASikB,IAC3C,IAEGo6B,EAAkB/oB,GAAU,GAAIp+B,UAAS,OAAQgnD,GzK6vazD,GAAI/vD,GAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,GyKj4ajCgwD,EAAS,KAAO,wFAAwF1jD,MAAM,KAAKqO,KAAK,OAAS,KACjIikB,EAAO,KAAO,2DAA2DtyB,MAAM,KAAKqO,KAAK,OAAS,KAClG8d,GACL03B,SAAU,sBACVl0D,KAAM,gBAGDi0D,KAOAD,GACLG,KAAM,0BACNC,IAAK,sCACLC,GAAI,+BACJC,EAAG,wBACHC,KAAM,qBACNC,GAAI,wCACJC,KAAM,sBACNC,IAAK,kCACLh1C,EAAG,iBACHi1C,GAAI,uBACJ77D,EAAG,oBACH87D,GAAI,0BACJj3C,EAAG,sCACHk3C,GAAI,0CACJt2C,EAAG,kBACHu2C,GAAI,wBACJtsD,EAAG,yCAGEusD,GACLC,OAAQ,GACRC,KAAM,KACNC,IAAK,MACLC,KAAM,OACNC,MAAO,OACPC,KAAM,SAGHzwB,QA8BJ6uB,GAAM15D,UAAU45D,OAAS,WACxB,GAAIjjD,GAAKlQ,KAAKkQ,GAEV1Q,EAAO0Q,EAAG5L,aAAa,YACvBomC,EAASx6B,EAAG5L,aAAa,sBAEvBwwD,EAAU5kD,EAAGrK,cAAc,qBAAuBqK,EAClD6kD,EAAcD,EAAQxa,YAA8C,IAAhCwa,EAAQxa,WAAWvc,QAS7D,IAPIv+B,EACHA,EAAOyzD,EAAM+B,OAAOx1D,GACVu1D,IAEVv1D,EAAO,GAAI6e,OAGP7e,EAAL,CAEA,GAAIy1D,SAGHA,GADc,kCAAXvqB,EACUuoB,EAAMiC,4BAA4B11D,GAC1B,cAAXkrC,EACGuoB,EAAMvoB,OAAOlrC,EAAM,QACX,2BAAXkrC,EACGuoB,EAAMkC,QAAQ31D,GAAQ24B,MAAO,EAAEo8B,EAAUE,OAExCxB,EAAMmC,OAAO51D,GAKxBu1D,EACHD,EAAQxa,WAAW+a,UAAYJ,EAE/BH,EAAQxwC,UAAY2wC,EAGrB/kD,EAAGolD,MAAQrC,EAAMvoB,OAAOlrC,EAAM,YAC9B0Q,EAAG+M,aAAa,iBAAkB,IAClC/M,EAAG+M,aAAa,aAAcg4C,KAoB/BhC,EAAM+B,OAAS,SAASx1D,GAEvB,GADAA,EAAOA,YAAgB6e,MAAO7e,EAAO,GAAI6e,MAAK7e,GACtB,iBAApBA,EAAKoO,WACR,MAAOpO,IAITyzD,EAAMvoB,OAAS,SAASlrC,EAAM+1D,GAC7BA,EAAaA,GAAc,UAC3B,IAAMlC,GAAMI,EAAkB8B,IAAenC,EAAQmC,EAErD,OADA/1D,GAAOyzD,EAAM+B,OAAOx1D,GACbA,GAAQ6zD,EAAI7zD,IAGpByzD,EAAMuC,kBAAoB,SAAS/tB,EAAMguB,GACxC,MAAOjtD,MAAKm1C,OAAOlW,EAAOguB,GAAa,MAGxCxC,EAAMmC,OAAS,SAASM,GACvB,GAAM9rC,GAAM,GAAIvL,MACV+lB,EAAW6uB,EAAMuC,kBAAkB5rC,EAAK8rC,GAC1CT,QAyBJ,OApBCA,GADGhC,EAAM0C,aAAavxB,GACT,WAIH6uB,EAAM2C,YAAYxxB,GACf6uB,EAAMvoB,OAAOgrB,EAAS,QAGzBzC,EAAM4C,QAAQH,EAAS9rC,EAAKwa,IAAcA,EAAY,EAAImwB,EAAUE,KACjExB,EAAMkC,QAAQO,EAAStxB,GAG1B6uB,EAAM6C,YAAYJ,EAAS9rC,EAAKwa,GAC7B,YAIA6uB,EAAMvoB,OAAOgrB,EAAS,SAMrCzC,EAAM0C,aAAe,SAASvxB,GAE7B,MAAQA,GAAW,GAAKA,IAAa,EAAImwB,EAAUC,SAGpDvB,EAAM2C,YAAc,SAASxxB,GAE5B,MAAOA,KAAa,EAAImwB,EAAUC,SAGnCvB,EAAM4C,QAAU,SAASr2D,EAAMoqB,EAAKwa,GACnC,GAAM2xB,GAAgB3xB,EAAWmwB,EAAUG,IACrCsB,EAAgBpsC,EAAIqsC,WAAaz2D,EAAKy2D,QAC5C,OAAQF,IAAiBC,GAG1B/C,EAAM6C,YAAc,SAASt2D,EAAMoqB,EAAKwa,GACvC,GAAM8xB,GAAgB9xB,EAAW,EAAImwB,EAAUG,IACzCyB,EAA2BvsC,EAAIqsC,WAAaz2D,EAAKy2D,SAAS,CAChE,OAAQC,IAAiBC,GAG1BlD,EAAMkC,QAAU,SAAS31D,EAAM4kC,EAAU7jC,GAGxC,GADAf,EAAOyzD,EAAM+B,OAAOx1D,GAepB,MAXyB,KAArBgB,UAAUC,QAAoC,YAApB,mBAAO2jC,GAAP,eAAA5gC,cAAO4gC,MACpC7jC,EAAU6jC,EACVA,EAAW7jC,EAAQ6jC,UAIfA,IACJA,EAAW6uB,EAAMuC,kBAAkB,GAAIn3C,MAAQ7e,IAI5Ce,GAAWA,EAAQ43B,MAAQ,KAAOiM,GAAYA,EAAW7jC,EAAQ43B,OAC7D,GAGJiM,EAAWmwB,EAAUC,OACjBpwB,EAAW,eACRA,EAAY,IAAMmwB,EAAUC,OAC/B,eACGpwB,EAAY,GAAKmwB,EAAUC,OAC9BhsD,KAAKm1C,MAAMvZ,EAAWmwB,EAAUC,QAAU,eACvCpwB,EAAY,IAAMmwB,EAAUE,KAC/B,cACGrwB,EAAW,GAAKmwB,EAAUE,KAC7BjsD,KAAKm1C,MAAMvZ,EAAWmwB,EAAUE,MAAQ,aACrCrwB,EAAY,IAAMmwB,EAAUG,IAC/B,YACGtwB,EAAW,GAAKmwB,EAAUG,IAC7BlsD,KAAKm1C,MAAMvZ,EAAWmwB,EAAUG,KAAO,YACpCtwB,EAAY,GAAKmwB,EAAUG,IAC9B,cACGtwB,EAAW,IAAMmwB,EAAUG,IAC9BlsD,KAAKm1C,MAAMvZ,EAAWmwB,EAAUK,OAAS,cACtCxwB,EAAY,IAAMmwB,EAAUG,IAC/B,aAEAlsD,KAAK6H,IAAI,EAAG7H,KAAKC,MAAM27B,EAAWmwB,EAAUM,OAAS,cAI9D5B,EAAMiC,4BAA8B,SAAS11D,GAE5C,GAAKA,EAAL,CAEA,GAAMoqB,GAAM,GAAIvL,MACV+lB,EAAW6uB,EAAMuC,kBAAkB5rC,EAAKpqB,GAE1Cy1D,QAWJ,OAPCA,GADGhC,EAAM4C,QAAQr2D,EAAMoqB,EAAKwa,GACf,QACH6uB,EAAM6C,YAAYt2D,EAAMoqB,EAAKwa,GAC1B,YAEA,KAMf6uB,EAAM7xD,KAAO,SAAS8O,GASrB,GARKA,IACJA,EAAK7N,SAAS2W,MAET9I,YAAcgjD,eACnBhjD,EAAK7N,SAASwD,cAAcqK,IAIzB,aAAa9N,KAAK8N,EAAG5L,aAAa,qBACrC,MAAO,IAAI2uD,GAAM/iD,EAIlB,IAAMkmD,GAAUlmD,EAAG2H,iBAAiB,+BACpC,UAAUhB,IAAIxe,KAAK+9D,EAAS,SAASlmD,GACpC,MAAO,IAAI+iD,GAAM/iD,KAInB,IAAMmmD,GAAe,QAAfA,KACLpD,EAAM7xD,OACNiB,SAASwa,oBAAoB,qBAAsBw5C,GAG9B,oBAAX19D,SACV0J,SAASgB,iBAAiB,qBAAsBgzD,GAGjDn+D,EAAOD,QAAUg7D,GzK64aX,SAAS/6D,EAAQD,EAASH,GAE/B,Y0KzrbD,SAASsJ,GAAMJ,GACds1D,EAAal1D,KAAKJ,GAElB,GAAIu1D,GAGJ,GAAIA,GAAQl0D,SAASwD,cAAc,2BAEnC,IAAM2wD,GAAoBn0D,SAASwV,iBAAiB,mBACpD,IAAI7W,EAAMvF,IAAI,cAAgB+6D,EAAkB/1D,OAC/C,IAAK,GAAIqD,GAAI,EAAGA,EAAI0yD,EAAkB/1D,OAAQqD,IAAK,CAClD,GAAIigB,GAAUyyC,EAAkB1yD,EAChC,IAAI2yD,GAAW1yC,EAAf,KAA6BprB,OAAOktB,SAASyO,KAA7C,2BAhBH,GAAMiiC,GAAUz+D,EAAQ,KAClB2+D,EAAY3+D,EAAQ,KACpBw+D,EAAex+D,EAAQ,IAmB7BI,GAAOD,SAAYmJ,S1Kmsbb,SAASlJ,EAAQD,EAASH,G2KxtbhCI,EAAAD,QAAAH,EAAA,M3K8tbM,SAASI,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GARvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,G4KnubT,IAAAqB,GAAAnD,EAAA,K5KwubKkE,EAAWvC,EAAuBwB,G4KtubjCo7D,EAAe,QAAfA,KACLr6D,aAAOoF,OACPiB,SAASwa,oBAAoB,qBAAsBw5C,GAGpDh0D,UAASgB,iBAAiB,qBAAsBgzD,G5K4ub/Cp+D,aAAkB+D,aAClB9D,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YA8BA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GA5BvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIiF,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,G6Klwb/C63D,EAAA5+D,EAAA,K7KswbK6+D,EAAWl9D,EAAuBi9D,G6KrwbvCE,EAAA9+D,EAAA,K7KywbK++D,EAASp9D,EAAuBm9D,G6KxwbrCE,EAAAh/D,EAAA,K7K4wbKi/D,EAAWt9D,EAAuBq9D,G6K3wbvCE,EAAAl/D,EAAA,K7K+wbKm/D,EAAWx9D,EAAuBu9D,G6K9wbvCE,EAAAp/D,EAAA,K7KkxbKq/D,EAAW19D,EAAuBy9D,G6KhxbjCE,E7KoxbQ,W6Klxbb,QAAAA,GAAaC,IAAU,EAAAv4D,cAAAkB,KAAAo3D,GACjBC,EAE0B,gBAAbA,KACjBA,EAAWh1D,SAASwD,cAAcwxD,IAFlCA,EAAWh1D,SAASwD,cAAc,iCAK/BwxD,EAASjzD,aAAa,uBAI1BpE,KAAKq3D,SAAWA,EAEhBV,aAAOv1D,KAAKpB,KAAKq3D,UACjBR,aAAKz1D,KAAKpB,KAAKq3D,UACfN,aAAO31D,KAAKpB,KAAKq3D,UACjBJ,aAAO71D,KAAKpB,KAAKq3D,UACjBF,aAAO/1D,KAAKpB,KAAKq3D,UAEjBr3D,KAAKq3D,SAAShtB,gBAAgB,wBAC9BrqC,KAAKq3D,SAASp6C,aAAa,oBAAqB,K7K4ybhD,MApBAm6C,G6KrxbMh2D,K7KqxbQ,S6KrxbF2X,GAOZ,MANKA,KACJA,EAAS1W,SAAS2W,MAEbD,YAAkBm6C,eACvBn6C,EAAS1W,SAASwD,cAAckT,IAE7B,eAAe3W,KAAK2W,EAAOzU,aAAa,qBACpC,GAAI8yD,GAAOr+C,MAGTlC,IAAIxe,KAAK0gB,EAAOlB,iBAAiB,iCAAkC,SAAA3H,GAC5E,IAAKA,EAAG9L,aAAa,qBACpB,MAAO,IAAIgzD,GAAOlnD,KAEjB+qB,OAAO,SAAC37B,GACV,MAAkBhE,UAAXgE,K7KyxbD83D,IAGRn/D,c6Ktxbcm/D,E7Kuxbdl/D,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G8K11bxF,QAASkI,GAAMi2D,GACd,GAAMlrD,GAASkrD,EAASxxD,cAAc,0BAChCyxD,EAAWnrD,GAAUkrD,EAASx/C,iBAAT,mBAA6C1L,EAAOhU,GAApD,KAE3B,IAAiB,OAAbm/D,GAAyC,IAApBA,EAAS72D,OAiBlC,IAAK,GAbC82D,MAEAxxD,EAAW,SAAUpB,EAAO2I,GACnB,SAAV3I,GAEH4yD,EAAQ91D,KAAK6L,EAAEmqC,eACftrC,EAAOtG,cAAc,cAAc2xD,SAGnCD,EAAQ92D,QAAU82D,EAAQ95B,MAAM+5B,SAIzB1zD,EAAI,EAAG6oB,EAAM2qC,EAAS72D,OAAQqD,EAAI6oB,EAAK7oB,IAC/C,GAAA2zD,cAAWH,EAASxzD,IAAMqI,SAAQpG,a9K4zbnCzM,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,G8Kr1bT,IAAA89D,GAAA5/D,EAAA,K9K01bK2/D,EAAYh+D,EAAuBi+D,EA8BvCz/D,e8K51bgBmJ,Q9K61bhBlJ,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,G+K73bhCI,EAAAD,QAAAH,EAAA,M/Km4bM,SAASI,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GARvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIiF,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GgL74bzC84D,EhLi5bQ,WgL/4bb,QAAAA,GAAYC,EAAUl3D,IAAQ,EAAA5B,cAAAkB,KAAA23D,GACxBC,IAEQA,YAAoB1E,eAChC0E,EAAWv1D,SAASwD,cAAc+xD,IAG9BA,EAASxzD,aAAa,uBAItB1D,IACJA,KAEA8Q,MAAMjY,UAAUmpB,QAAQrqB,KAAKu/D,EAASx9B,WAAY,SAACuU,GAClD,GAA2C,IAAvCA,EAAKpqC,KAAKsf,QAAQ,iBAAwB,CAE7C,GAAMxqB,GAAMs1C,EAAKpqC,KAAKkT,QAAQ,iBAAkB,GAChD,KAGC/W,EAAOrH,GAAOqM,KAAK8e,MAAMmqB,EAAK/0C,MAAM6d,QAAQ,MAAO,MAClD,MAAOnK,GACR5M,EAAOrH,GAAOs1C,EAAK/0C,WAMvBoG,KAAK+F,SAAWrF,EAAOqF,SACM,gBAAlB/F,MAAK+F,WACf/F,KAAK+F,SAAW,GAAIuG,UAAStM,KAAK+F,WAGnC/F,KAAK63D,SAAWn3D,EAAOyL,OACjBnM,KAAK63D,mBAAoB3E,eAC9BlzD,KAAK63D,SAAWx1D,SAASwD,cAAc7F,KAAK63D,WAG7C73D,KAAK43D,SAAWA,EAEkC,mBAAvCD,GAAOG,SAASr8D,IAAIuE,KAAK63D,UACnCF,EAAOG,SAASnjD,IAAI3U,KAAK63D,UAAW73D,OAEpC23D,EAAOG,SAASr8D,IAAIuE,KAAK63D,UAAUp2D,KAAKzB,MAGV,MAA3BA,KAAK43D,SAASj0C,UACjB3jB,KAAK43D,SAAS36C,aAAa,OAAQ,UAGpCjd,KAAK43D,SAAS36C,aAAa,gBAAiB,SAC5Cjd,KAAK+3D,OAAS/3D,KAAK+3D,OAAO33D,KAAKJ,MAC/BA,KAAK43D,SAASv0D,iBAAiB,QAASrD,KAAK+3D,QAE7C/3D,KAAK63D,SAAS56C,aAAa,cAAe,QAC1Cjd,KAAK43D,SAAS36C,aAAa,oBAAqB,UhL09bhD,MArEA06C,GAAOp+D,UgLl5bRw+D,OhLk5b2B,SgLl5bpBzqD,GAEN,GAAM3I,GAAQ3E,KAAK63D,SAASxxD,UAAU0xD,OAAO,mBAE7CJ,GAAOG,SAASr8D,IAAIuE,KAAK63D,UAAUn1C,QAAQ,SAACq1C,GAC3CA,EAAOH,SAAS36C,aAAa,gBAAiBtY,KAG/C3E,KAAK63D,SAAS56C,aAAa,eAAgBtY,GAE3C2I,GAAKA,EAAEoqC,iBACP13C,KAAK+F,UAAY/F,KAAK+F,SAASpB,EAAQ,OAAS,QAAS2I,IhLq5bzDqqD,EAAOp+D,UgLl5bR6pB,QhLk5b4B,WgLj5b3BpjB,KAAK43D,SAAS/6C,oBAAoB,QAAS7c,KAAK+3D,QAChD/3D,KAAK43D,SAASvtB,gBAAgB,iBAC9BrqC,KAAK43D,SAASvtB,gBAAgB,QAC9BrqC,KAAK43D,SAASvtB,gBAAgB,qBAC9BrqC,KAAK63D,SAASxtB,gBAAgB,cAE9B,IAAM2tB,GAAcL,EAAOG,SAASr8D,IAAIuE,KAAK63D,UACvCI,EAAiBD,EAAYn0C,QAAQ7jB,KAE3C23D,GAAOG,SAASnjD,IAAI3U,KAAK63D,SACpBG,EAAY1vD,MAAM,EAAG2vD,GACjB/5C,KAAK85C,EAAY1vD,MAAM2vD,EAAiB,KAEjDj4D,KAAK63D,SAAWv8D,OAChB0E,KAAK43D,SAAWt8D,OAChB0E,KAAK+F,SAAWzK,QhLm5bhBq8D,EgLh5bMv2D,KhLg5bQ,SgLh5bH8O,EAAIxP,GACVwP,EAEQA,YAAcgjD,eAC1BhjD,EAAK7N,SAASwD,cAAcqK,IAF5BA,EAAK7N,SAAS2W,IAIf,IAAMk/C,GAAYhoD,EAAG2H,iBAAiB,iCAChCsgD,KAPiBC,GAAA,EAAAC,GAAA,EAAAC,EAAAh9D,MAAA,KAQvB,OAAAi9D,GAAA5xD,EAAqBuxD,EAArBlnD,OAAAgD,cAAAokD,GAAAG,EAAA5xD,EAAAmD,QAAApC,MAAA0wD,GAAA,EAAgC,IAAvBR,GAAuBW,EAAA3+D,KAC1Bg+D,GAASxzD,aAAa,sBAC1B+zD,EAAQ12D,KAAK,GAAIk2D,GAAOC,EAAUl3D,KAVb,MAAA8E,GAAA6yD,GAAA,EAAAC,EAAA9yD,EAAA,aAAA4yD,GAAAzxD,2BAAA,WAAA0xD,EAAA,KAAAC,IAavB,MAAOH,IhLy6bAR,IgLr6bTA,GAAOG,SAAW,GAAIU,IAEtB,IAAMnC,GAAe,QAAfA,KACLsB,EAAOv2D,OACPiB,SAASwa,oBAAoB,qBAAsBw5C,GAGpDh0D,UAASgB,iBAAiB,qBAAsBgzD,GhL46b/Cp+D,agL16bc0/D,EhL26bdz/D,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,GAEtB,YiLpicD,SAASwgE,GAAWvY,EAAQwY,GAC3B,GAAIzgD,SAEJioC,GAAO78C,iBAAiB,aAAc,WACrC8U,aAAaF,GAET0gD,EAAOD,KAIXzgD,EAAUlf,WAAW,WAChBo0D,EAAS1sD,QACZsI,EAAKokD,EAAS,IACdyL,EAAKF,GAAM,IAEXE,EAAKF,GAAM,IAEVG,MAGJ3Y,EAAO78C,iBAAiB,aAAc,WACrC8U,aAAaF,GACbA,EAAUlf,WAAW,iBAAM4/D,GAAOD,IAAS3vD,EAAK2vD,IAAOI,KAIzD,QAASH,GAAQD,GAChB,MAAOvL,GAAStpC,QAAQ60C,QAGzB,QAASE,GAAMF,EAAMK,GAChBA,GACHL,EAAKryD,UAAUC,IAAI,6BAGpBoyD,EAAKz7C,aAAa,cAAe,SACjCy7C,EAAKz7C,aAAa,gBAAiB,QAEnCy7C,EAAKv1D,cAAc,GAAIC,aAAY,wBAA0B0V,SAAS,KAEtEq0C,EAAS1rD,KAAKi3D,GAGf,QAAS3vD,GAAM2vD,GACdA,EAAKryD,UAAU60B,OAAO,6BACtBw9B,EAAKz7C,aAAa,cAAe,QACjCy7C,EAAKz7C,aAAa,gBAAiB,SAEnCy7C,EAAKv1D,cAAc,GAAIC,aAAY,wBAA0B0V,SAAS,KAEtEq0C,EAAS7+B,OAAO6+B,EAAStpC,QAAQ60C,GAAO,GAGzC,QAASt3D,GAAMi2D,GACd,GAAM2B,GAAQxnD,MAAMupB,KAAKs8B,EAASx/C,iBAAiB,yBAC7CuxC,EAAU4P,EAAMniD,IAAI,SAAA6hD,GAAA,MAAQA,GAAK96C,YAEvCo7C,GAAMt2C,QAAQ,SAAAg2C,GACbA,EAAKz7C,aAAa,cAAe,QACjCy7C,EAAKz7C,aAAa,gBAAiB,WAGpCmsC,EAAQ1mC,QAAQ,SAACw9B,EAAQp8C,GAAT,MAAe20D,GAAUvY,EAAQ8Y,EAAMl1D,MjLw+bvDxK,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GiL5icT,IAAMi/D,GAAe,IACfC,EAAe,IAEf3L,IjLuncLl1D,eiLpjcgBmJ,OAAMw3D,OAAM7vD,QjLqjc5B7Q,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YAcA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GkL1ocxF,QAAS+/D,GAAmB1xB,EAAOxhC,GAClC,GAAIkS,UAEEihD,EAAgB,SAAC5rD,GACJ,KAAdA,EAAE6rD,SACLpzD,KAIIqzD,EAAc,SAAC9rD,GACfi6B,EAAM8xB,SAAS/rD,EAAEnB,SACrBpG,KAIIuzD,EAAmB,WACxBnhD,aAAaF,IAGRshD,EAAmB,WACxBthD,EAAUlf,WAAWgN,EAAUyzD,IAG1BC,EAAe,WACpBthD,aAAaF,GAEbsvB,EAAM1qB,oBAAoB,aAAcy8C,GACxC/xB,EAAM1qB,oBAAoB,aAAc08C,GACxCl3D,SAASwa,oBAAoB,QAASu8C,GACtC/2D,SAASwa,oBAAoB,aAAcu8C,GAC3C/2D,SAASwa,oBAAoB,UAAWq8C,IAGnCT,EAAY,WACjBlxB,EAAMlkC,iBAAiB,aAAci2D,GACrC/xB,EAAMlkC,iBAAiB,aAAck2D,GACrCl3D,SAASgB,iBAAiB,QAAS+1D,GACnC/2D,SAASgB,iBAAiB,aAAc+1D,GACxC/2D,SAASgB,iBAAiB,UAAW61D,GAGtC,QAAST,YAAWgB,gBAGrB,QAASC,GAAkBC,GAI1B,QAASC,GAAej1D,GACT,UAAVA,EACHk1D,EAAYJ,eAIZ1gE,WAAW8gE,EAAYpB,UAAWqB,GAGnCH,EAAStzD,UAAU0xD,OAAO,4BAAuC,UAAVpzD,GACvDg1D,EAAStzD,UAAU0xD,OAAO,4BAAuC,SAAVpzD,GAbxD,GAAM2yD,8BAAej1D,SAAS2W,KAAKnB,iBAAd,mBAAkD8hD,EAASxhE,GAA3D,QAEjB0hE,QAcJvC,GAAS50C,QAAQ,SAACq3C,GACjB,GAAMC,GAAe,GAAAvC,cAAWsC,GAC/B5tD,OAAQwtD,EACR5zD,SAAU6zD,GAMNC,KACJA,EAAcZ,EAAkBU,EAAUK,EAAajC,WAK1D,QAASkC,GAAmBN,GAC3B,GAAMO,GAAWP,EAAS9hD,iBAAiB,iCAE3CrG,OAAMupB,KAAKm/B,GAAUx3C,QAAQ,SAAAy3C,GAC5B,GAAMC,GAAST,EAAS9zD,cAAT,mBAA0Cs0D,EAAQhiE,GAAlD,KAEfgiE,GAAQl9C,aAAa,cAAe,QAEpC,GAAAw6C,cAAW2C,GACVjuD,OAAQguD,EACRp0D,SAAU,SAACpB,GACVy1D,EAAOh2C,YAAcg2C,EAAOh2C,YAAY3M,QAAQ,aAAwB,SAAV9S,EAAmB,QAAU,aAM/F,QAAS01D,GAAkBluD,GAC1B,MAAO9G,OAAM,gCACZo3C,YAAa,YAEbz6C,KAAK,SAACi4B,GACN,MAAIA,GAASqgC,GACLrgC,EAASU,OAETV,EAASpJ,OAAO7uB,KAAK,SAACwD,GAAU,KAAM,IAAI6b,OAAM7b,OAGxDxD,KAAK,SAAC6W,GACN1M,EAAOkY,UAAYxL,EAAK0hD,eAI1B,QAASn5D,KACR,GAAMu4D,GAAWt3D,SAAS2W,KAAKnT,cAAc,yBAC7C,IAAK8zD,EAAL,CAGAM,EAAkBN,GAClBD,EAAiBC,EAEjB,IAAMa,GAAUb,EAAS9zD,cAAc,oCAGnC20D,IAAY,mBAAqB,IAAI96C,iBACxC26C,EAAiBG,GAGlBb,EAAStvB,gBAAgB,+BACzBsvB,EAAS18C,aAAa,2BAA4B,SlLigclD3jB,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIq3D,GAAsBn5D,EAAoB,KAE1Co5D,EAAsBz3D,EAAuBw3D,GkLzoclDyG,EAAA5/D,EAAA,KlL6ocK2/D,EAAYh+D,EAAuBi+D,GkL3oclCoC,EAAe,IACfN,EAAe,GlLixcpBvhE,ekL/ocgBmJ,QlLgpchBlJ,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YAMA,SAASmB,GAAwBC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIE,KAAa,IAAW,MAAPF,EAAe,IAAK,GAAIG,KAAOH,GAAWI,OAAOC,UAAUC,eAAenB,KAAKa,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,GAAgC,OAAtBD,cAAiBF,EAAYE,EmL/xcnQ,QAASgI,GAAKi2D,GAab,QAASoD,GAAUL,GAClB,MAAOA,GAAOljD,UAAUmiB,MAAM,cAAcoE,MAG7C,QAASi9B,KACRh9C,EAAci9C,EAAQj9C,YACtBqoB,EAAc40B,EAAQ50B,YAEtB60B,EAAQl4C,QAAQ,SAAA03C,GACf,GAA0B,SAAtBK,EAAUL,GACbA,EAAOS,SAAkC,IAAvBF,EAAQl9C,eACpB,CACN,GAAMq9C,GAAYp9C,EAAcqoB,EAAc40B,EAAQl9C,UAEtD28C,GAAOS,SAAWC,GAAa,KAKlC,QAAS31B,GAAO73B,GACf,GAAIytD,GAAW,GAEf,IAAmC,SAA/BN,EAAUntD,EAAEmqC,eACfsjB,GAAYJ,EAAQl9C,WAAas9C,EAAWA,EAAWJ,EAAQl9C,mBACzD,CACN,GAAMq9C,GAAYp9C,EAAcqoB,EAAc40B,EAAQl9C,UACtDs9C,GAAWD,EAAYC,EAAWA,EAAWD,EAG9CH,EAAQl9C,WAAak9C,EAAQl9C,WAAas9C,EAE1CL,IA3CD,GAAMM,GAAS3D,EAASxxD,cAAc,yBAEtC,IAAe,OAAXm1D,EAAJ,CAIA,GAAML,GAAUK,EAAOn1D,cAAc,kCAC/B+0D,EAAUppD,MAAMupB,KAAKigC,EAAOvpC,qBAAqB,WAEnD/T,SACAqoB,QAoCJ40B,GAAQt3D,iBAAiB,SAAU43D,EAAO7iD,SAASsiD,EAAY,MAC/D/hE,OAAO0K,iBAAiB,mBAAoBq3D,GAE5CE,EAAQl4C,QAAQ,SAAA03C,GACfA,EAAOc,QAAU/1B,IAGlBu1B,KAxDD,GAAAS,GAAArjE,EAAA,KAAYmjE,EnL+xcEhiE,EAAwBkiE,EmLpuctCjjE,GAAOD,SAAYmJ,SnLqycb,SAASlJ,EAAQD,EAASH,GoLh2chCI,EAAAD,QAAAH,EAAA,MpLs2cM,SAASI,EAAQD,GAEtB,YqL31cD,SAAS6f,GAASC,EAAMC,GACvB,GAAIC,SACJ,OAAO,YAAW,GAAArX,GAAAZ,KACXsV,EAAO9U,UACP0X,EAAQ,WACbD,EAAU,KACVF,EAAK1L,MAALzL,EAAiB0U,GAElB6C,cAAaF,GACbA,EAAUlf,WAAWmf,EAAOF,IAgB9B,QAASI,GAASL,EAAMC,GACvB,GAAIC,SACJ,OAAO,YAAW,GAAAI,GAAArY,IACjB,KAAIiY,EAAJ,CAGA,GAAM3C,GAAO9U,UACP0X,EAAQ,WACbD,EAAU,KACVF,EAAK1L,MAALgM,EAAiB/C,GAGlB2C,GAAUlf,WAAWmf,EAAOF,KrLwzc7B1e,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,IA4DR3B,EqLh3cA6f,WrLi3cA7f,EqLh3cAmgB,YrLo3cK,SAASlgB,EAAQD,EAASH,GAE/B,YsL56cD,SAASsJ,GAAMi2D,GASd,QAAS+D,KAGR,GAAMC,GAAc1iE,OAAO8tC,aAAe9tC,OAAO+tC,QAC3C0U,EAAWigB,EAAcC,CAK/B,IAHAjE,EAAShxD,UAAU0xD,OAAO,0BAA2B3c,GAGjD5yC,KAAK+yD,IAAIF,EAAcG,GAAmB,GAAI,CACjD,GAAMC,GAAkBD,EAAkBH,CAC1ChE,GAAShxD,UAAU0xD,OAAO,+BAAgC3c,GAAYqgB,GACtEpE,EAAShxD,UAAU0xD,OAAO,6BAA8B3c,IAAaqgB,GAGtED,EAAkBH,EAGnB,QAASK,KACRJ,EAAiB3iE,OAAOktC,YAAc,EAEtC81B,EAAqBhjE,OAAOylD,sBAAsB,WACjDgd,IACAM,MAIF,QAASE,KACRD,GAAsBhjE,OAAOkjE,qBAAqBF,GAGnD,QAASG,KACRnjE,OAAOkkB,oBAAoB,SAAUi/C,GACrCnjE,OAAO0K,iBAAiB,SAAU04D,GAClCL,IAGD,QAASM,KACRJ,IACAjjE,OAAOkkB,oBAAoB,SAAUk/C,GACrCpjE,OAAO0K,iBAAiB,SAAUy4D,GAhDnC,GAAKzE,EAASjzD,aAAa,yBAA3B,CAIA,GAAIk3D,UACAE,SACAG,SA6CEI,GAAqB,EAAAZ,EAAArjD,UAASkkD,EAAW,IAE/CrjE,QAAO0K,iBAAiB,SAAUy4D,GAElCV,KtLs3cA9hE,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GsLj7cT,IAAAuhE,GAAArjE,EAAA,ItLi/cCG,esLp7cgBmJ,QtLq7chBlJ,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GuL96cxF,QAAS+iE,GAA+B/rD,GACvC,MAAIA,GAAG9L,aAAa,4BACZ,GACG8L,EAAG0N,YAAc1N,EAAG0N,WAAWtZ,aAAa,kBACtD,IAAW4L,EAAG0N,WAAWtZ,aAAa,kBAE/B23D,EAA8B/rD,EAAG0N,YAI1C,QAASs+C,GAAyBC,GACjC,OAASA,EAAW53D,KAAM43D,EAAW72D,KAAX,WAA6B62D,EAAWC,SAAxC,MAAsDD,EAAWhkE,IAG5F,QAASkkE,GAAkBz5C,GAC1B,GAAMzhB,GAAW,GAAIiC,aAAY,mBAChC+V,QACC+jC,SAAU,OACVvkC,uBAAwBiK,GAEzB9J,SAAS,GAGVzW,UAAS2W,KAAK7V,cAAchC,GvL+4c5B7H,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIiF,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GuL//czCy9D,EAAcxkE,EAAQ,KACtBo+B,EAAQp+B,EAAQ,IAEhBykE,EAAa,EACbC,EAAgB,EAEhB/F,EvLogdW,WuLlgdhB,QAAAA,GAAatqD,EAAQswD,IAAS,EAAA39D,cAAAkB,KAAAy2D;AAC7Bz2D,KAAKmM,OAASA,EACdnM,KAAKyzB,MAAQtnB,EAAOtG,cAAc,SAClC7F,KAAK4iB,QAAUq5C,EAA8B9vD,GAC7CnM,KAAKy8D,QAAUA,EAEfz8D,KAAKwzC,WAAa,GAElBxzC,KAAK08D,YAAc,GAAIJ,GAAYt8D,KAAKyzB,OACvCkpC,SAAUH,EACVvhC,OAAQ,SAAUpK,EAAM4C,GAEvB,MAAO6oC,GAAYM,gBAAgB1mC,EAAM5d,MAAMuY,EAAKxZ,OAAQ6e,EAAM5d,MAAMmb,KAEzEb,KAAM,SAAU/B,EAAM4C,GAErB,MAAO6oC,GAAYO,KAAK3mC,EAAM5d,MAAMuY,EAAKxZ,OAAQ6e,EAAM5d,MAAMmb,KAE9DqY,KAAM,GAAIx/B,YAGXtM,KAAKmM,OAAO9I,iBAAiB,SAAUrD,KAAK88D,aAAa18D,KAAKJ,OAC9DA,KAAKyzB,MAAMpwB,iBAAiB,QAAS6yB,EAAMpe,SAAS9X,KAAK+8D,WAAW38D,KAAKJ,MAAO,MAChFA,KAAKyzB,MAAMpwB,iBAAiB,qBAAsBrD,KAAKg9D,aAAa58D,KAAKJ,OACzEA,KAAKyzB,MAAMpwB,iBAAiB,QAASrD,KAAKi9D,YAAY78D,KAAKJ,OvLsjd3D,MA9CAy2D,GAAUl9D,UuLrgdXwjE,WvLqgdkC,WuLpgdjC,GAAMG,GAAal9D,KAAKyzB,MAAM75B,MAAM+kC,MAEhC3+B,MAAKwzC,aAAe0pB,IACvBl9D,KAAKwzC,WAAa0pB,EAEdl9D,KAAKwzC,WAAW/yC,QAAU87D,GAC7Bv8D,KAAKm9D,eAAen9D,KAAKwzC,cvL0gd3BijB,EAAUl9D,UuLrgdXyjE,avLqgdoC,SuLrgdtB35C,GACbg5C,EAAiBr8D,KAAK4iB,SACtBS,EAAGq0B,iBACH/+C,OAAOktB,SAASC,KAAOzC,EAAGwN,KAAKj3B,OvLwgd/B68D,EAAUl9D,UuLrgdXujE,avLqgdoC,WuLpgdnCT,EAAiBr8D,KAAK4iB,UvLwgdtB6zC,EAAUl9D,UuLrgdX0jE,YvLqgdmC,WuLpgd9Bj9D,KAAKwzC,WAAW/yC,QAAU87D,GAC7Bv8D,KAAK08D,YAAY1tD,QvLygdlBynD,EAAUl9D,UuLrgdX4jE,evLqgdsC,SuLrgdtBvjE,GAAO,GAAAgH,GAAAZ,IACtB,OAAOqF,OAAMrF,KAAKy8D,QAAU/uC,mBAAmB9zB,IAC7CoI,KAAK,SAAAi4B,GACL,IAAKA,EAASqgC,GACb,KAAM,IAAIj5C,OAAM4Y,EAAS0iB,WAG1B,OAAO1iB,GAASU,SAEhB34B,KAAK,SAAAo7D,GACLx8D,EAAKy8D,eAAeD,MvLygdtB3G,EAAUl9D,UuLrgdX8jE,evLqgdsC,SuLrgdtBD,GACfp9D,KAAK08D,YAAYY,KAAOF,EAAYvmD,IAAIqlD,IvLwgdjCzF,IA6BRx+D,cuLtgdcw+D,EvLugddv+D,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GwLzndhCI,EAAAD,QAAAH,EAAA,MxL+ndM,SAASI,EAAQD,EAASH,IAEH,SAASI,GAAS,YAM9C,SAASuB,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GAJvF,GAAIqK,GAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,IyL9ndtC,WAkSD,QAASg6D,GAAW1kD,GACnB,GAAI2U,GAAIhc,MAAMc,QAAQuG,IAChBxB,MAAOwB,EAAK,GAAIjf,MAAOif,EAAK,IACd,YAAhB,mBAAOA,GAAP,eAAArV,cAAOqV,KAAqB,SAAWA,IAAQ,SAAWA,GAAOA,GAASxB,MAAOwB,EAAMjf,MAAOif,EAElG7Y,MAAKqX,MAAQmW,EAAEnW,OAASmW,EAAE5zB,MAC1BoG,KAAKpG,MAAQ4zB,EAAE5zB,MAShB,QAASyB,GAAUuH,EAAU46D,EAAYhwC,GACxC,IAAK,GAAI1pB,KAAK05D,GAAY,CACzB,GAAIzqC,GAAUyqC,EAAW15D,GACrB25D,EAAY76D,EAAS6wB,MAAMnvB,aAAa,QAAUR,EAAE8f,cAEjC,iBAAZmP,GACVnwB,EAASkB,GAAKgb,SAAS2+C,GAEf1qC,KAAY,EACpBnwB,EAASkB,GAAmB,OAAd25D,EAEN1qC,YAAmBzmB,UAC3B1J,EAASkB,GAAK,KAGdlB,EAASkB,GAAK25D,EAGV76D,EAASkB,IAAsB,IAAhBlB,EAASkB,KAC5BlB,EAASkB,GAAMA,IAAK0pB,GAAIA,EAAE1pB,GAAKivB,IASlC,QAASrb,GAAEgmD,EAAMC,GAChB,MAAuB,gBAATD,IAAoBC,GAAOt7D,UAAUwD,cAAc63D,GAAQA,GAAQ,KAGlF,QAAS9lD,GAAG8lD,EAAMC,GACjB,MAAOr1D,GAAMjQ,MAAMslE,GAAOt7D,UAAUwV,iBAAiB6lD,IAgEtD,QAASt8D,KACRwW,EAAG,qBAAqB8K,QAAQ,SAAU+Q,GACzC,GAAIgB,GAAEhB,KAlZR,GAAIgB,GAAI,QAAJA,GAAchB,EAAOjG,GACxB,GAAIowC,GAAK59D,IAITA,MAAKyzB,MAAQ/b,EAAE+b,GACfzzB,KAAKyzB,MAAMxW,aAAa,eAAgB,OACxCjd,KAAKyzB,MAAMxW,aAAa,oBAAqB,QAE7CuQ,EAAIA,MAEJnyB,EAAU2E,MACT69D,SAAU,EACVlB,SAAU,GACVmB,WAAW,EACXjlD,KAAM4b,EAAEspC,KACR9iC,OAAQxG,EAAEmoC,gBACV9wB,KAAMrX,EAAEupC,cACRprC,KAAM6B,EAAEooC,KACRplD,QAASgd,EAAEwpC,SACTzwC,GAEHxtB,KAAKyH,SAILzH,KAAK22B,UAAYjf,EAAEzJ,OAAO,OACzBiJ,UAAW,cACXgnD,OAAQzqC,IAGTzzB,KAAKm+D,GAAKzmD,EAAEzJ,OAAO,MAClBmR,OAAQ,SACRg/C,OAAQp+D,KAAK22B,YAGd32B,KAAK08C,OAAShlC,EAAEzJ,OAAO,QACtBiJ,UAAW,kBACXk2C,KAAM,SACNiR,YAAa,YACbC,gBAAiB,YACjBF,OAAQp+D,KAAK22B,YAKdjf,EAAEtX,KAAKJ,KAAKyzB,OACXA,MAASzzB,KAAKu+D,SAASn+D,KAAKJ,MAC5Bw+D,KAAQx+D,KAAKkP,MAAM9O,KAAKJ,MAAQy+D,OAAQ,SACxCC,QAAW,SAASz4C,GACnB,GAAI1tB,GAAI0tB,EAAIkzC,OAITyE,GAAGe,SACK,KAANpmE,GAAYqlE,EAAGgB,UAClB34C,EAAIyxB,iBACJkmB,EAAGiB,UAEW,KAANtmE,EACRqlE,EAAG1uD,OAAQuvD,OAAQ,QAEL,KAANlmE,GAAkB,KAANA,IACpB0tB,EAAIyxB,iBACJkmB,EAAS,KAANrlE,EAAU,WAAa,eAM9Bmf,EAAEtX,KAAKJ,KAAKyzB,MAAMqrC,MAAOC,OAAU/+D,KAAKkP,MAAM9O,KAAKJ,MAAQy+D,OAAQ,aAEnE/mD,EAAEtX,KAAKJ,KAAKm+D,IAAKa,UAAa,SAAS/4C,GACtC,GAAIg5C,GAAKh5C,EAAI9Z,MAEb,IAAI8yD,IAAOj/D,KAAM,CAEhB,KAAOi/D,IAAO,MAAM78D,KAAK68D,EAAGt7C,WAC3Bs7C,EAAKA,EAAGrhD,UAGLqhD,IAAqB,IAAfh5C,EAAIm0C,SACbn0C,EAAIyxB,iBACJkmB,EAAGiB,OAAOI,EAAIh5C,EAAI9Z,aAKjBnM,KAAKyzB,MAAMrvB,aAAa,SAC3BpE,KAAKs9D,KAAO,IAAMt9D,KAAKyzB,MAAMnvB,aAAa,QAC1CtE,KAAKyzB,MAAM4W,gBAAgB,SAG3BrqC,KAAKs9D,KAAOt9D,KAAKyzB,MAAMnvB,aAAa,cAAgBkpB,EAAE8vC,SAGvD7oC,EAAEld,IAAI9V,KAAKzB,MAGZy0B,GAAEl7B,WACD+jE,GAAIA,MAAKA,GACR,GAAI9rD,MAAMc,QAAQgrD,GACjBt9D,KAAKk/D,MAAQ5B,MAET,IAAoB,gBAATA,IAAqBA,EAAKz5C,QAAQ,QAChD7jB,KAAKk/D,MAAQ5B,EAAKztD,MAAM,eAKzB,IAFAytD,EAAO5lD,EAAE4lD,GAELA,GAAQA,EAAK6B,SAAU,CAC1B,GAAIz2B,KACJpgC,GAAM+D,MAAMixD,EAAK6B,UAAUz8C,QAAQ,SAAUxS,GAC5C,IAAKA,EAAG2qD,SAAU,CACjB,GAAIhqC,GAAO3gB,EAAGkU,YAAYua,OACtB/kC,EAAQsW,EAAGtW,OAASi3B,EACpBxZ,EAAQnH,EAAGmH,OAASwZ,CACV,MAAVj3B,GACH8uC,EAAMjnC,MAAO4V,MAAOA,EAAOzd,MAAOA,OAIrCoG,KAAKk/D,MAAQx2B,EAIXrmC,SAAS+8D,gBAAkBp/D,KAAKyzB,OACnCzzB,KAAKu+D,YAIPK,GAAIA,YACH,MAAO5+D,MAAKyH,UAGbk3D,GAAIA,UACH,OAAQ3+D,KAAKm+D,GAAG/5D,aAAa,WAG9B8K,MAAO,SAAUse,GACXxtB,KAAK2+D,SAIV3+D,KAAKm+D,GAAGlhD,aAAa,SAAU,IAC/Bjd,KAAKyH,SAELiQ,EAAEmsB,KAAK7jC,KAAKyzB,MAAO,oBAAqBjG,SAGzCxe,KAAM,WACLhP,KAAKm+D,GAAG9zB,gBAAgB,UAEpBrqC,KAAK89D,WAAa99D,KAAKyH,YAC1BzH,aAAU,GAGX0X,EAAEmsB,KAAK7jC,KAAKyzB,MAAO,qBAGpB3pB,KAAM,WACL,GAAIi6C,GAAQ/jD,KAAKm+D,GAAGgB,SAAS1+D,MAE7BT,cAAUA,KAAKyH,MAAQs8C,EAAQ,EAAG/jD,KAAKyH,MAAQ,OAGhD43D,SAAU,WACT,GAAItb,GAAQ/jD,KAAKm+D,GAAGgB,SAAS1+D,MAE7BT,cAAUA,KAAK4+D,SAAU5+D,KAAKyH,MAAQ,EAAIs8C,EAAQ,IAInDub,OAAM,SAAUx7D,GACf,GAAIy7D,GAAMv/D,KAAKm+D,GAAGgB,QAEdn/D,MAAK4+D,UACRW,EAAIv/D,KAAKyH,OAAOwV,aAAa,gBAAiB,SAG/Cjd,KAAKyH,MAAQ3D,EAETA,MAAUy7D,EAAI9+D,OAAS,IAC1B8+D,EAAIz7D,GAAGmZ,aAAa,gBAAiB,QACrCjd,KAAK08C,OAAOt4B,YAAcm7C,EAAIz7D,GAAGsgB,YAEjC1M,EAAEmsB,KAAK7jC,KAAKyzB,MAAO,yBAClB5C,KAAM7wB,KAAKo9D,YAAYp9D,KAAKyH,WAK/Bo3D,OAAQ,SAAUD,EAAU7+C,GAO3B,GANI6+C,EACH5+D,KAAKyH,MAAQiQ,EAAE+wC,aAAamW,GAE5BA,EAAW5+D,KAAKm+D,GAAGgB,SAASn/D,KAAKyH,OAG9Bm3D,EAAU,CACb,GAAIzC,GAAan8D,KAAKo9D,YAAYp9D,KAAKyH,OAEnC+3D,EAAU9nD,EAAEmsB,KAAK7jC,KAAKyzB,MAAO,sBAChC5C,KAAMsrC,EACNp8C,OAAQA,GAAU6+C,GAGfY,KACHx/D,KAAKyX,QAAQ0kD,GACbn8D,KAAKkP,OAAQuvD,OAAQ,WACrB/mD,EAAEmsB,KAAK7jC,KAAKyzB,MAAO,8BAClB5C,KAAMsrC,OAMVoC,SAAU,WACT,GAAIX,GAAK59D,KACLpG,EAAQoG,KAAKyzB,MAAM75B,KAEnBA,GAAM6G,QAAUT,KAAK69D,UAAY79D,KAAKk/D,MAAMz+D,OAAS,GACxDT,KAAKyH,SAELzH,KAAKm+D,GAAG75C,UAAY,GAEpBtkB,KAAKo9D,YAAcp9D,KAAKk/D,MACtBroD,IAAI,SAAS+b,GACb,MAAO,IAAI2qC,GAAWK,EAAG/kD,KAAK+Z,EAAMh5B,MAEpCqhC,OAAO,SAASrI,GAChB,MAAOgrC,GAAG3iC,OAAOrI,EAAMh5B,KAEvBkyC,KAAK9rC,KAAK8rC,MACVxjC,MAAM,EAAGtI,KAAK28D,UAEhB38D,KAAKo9D,YAAY16C,QAAQ,SAASmO,GAChC+sC,EAAGO,GAAGrvD,YAAY8uD,EAAGhrC,KAAK/B,EAAMj3B,MAGF,IAA5BoG,KAAKm+D,GAAGgB,SAAS1+D,OACpBT,KAAKkP,OAAQuvD,OAAQ,cAErBz+D,KAAKgP,QAINhP,KAAKkP,OAAQuvD,OAAQ,gBAOxBhqC,EAAEld,OAEFkd,EAAEmoC,gBAAkB,SAAU/rC,EAAM4C,GACnC,MAAOhd,QAAOiB,EAAE+nD,aAAahsC,EAAMkL,QAAS,KAAKv8B,KAAKyuB,IAGvD4D,EAAEirC,kBAAoB,SAAU7uC,EAAM4C,GACrC,MAAOhd,QAAO,IAAMiB,EAAE+nD,aAAahsC,EAAMkL,QAAS,KAAKv8B,KAAKyuB,IAG7D4D,EAAEupC,cAAgB,SAAUh2D,EAAGC,GAC9B,MAAID,GAAEvH,SAAWwH,EAAExH,OACXuH,EAAEvH,OAASwH,EAAExH,OAGduH,EAAIC,KAAQ,GAGpBwsB,EAAEooC,KAAO,SAAUhsC,EAAM4C,GACxB,GAAI4oB,GAAiB,KAAV5oB,EAAe5C,EAAOA,EAAKpZ,QAAQhB,OAAOiB,EAAE+nD,aAAahsC,EAAMkL,QAAS,MAAO,kBAC1F,OAAOjnB,GAAEzJ,OAAO,MACfqW,UAAW+3B,EACXsjB,gBAAiB,WAInBlrC,EAAEwpC,QAAU,SAAUptC,GACrB7wB,KAAKyzB,MAAM75B,MAAQi3B,EAAKj3B,OAGzB66B,EAAEspC,KAAO,SAAUnrC,GAAmB,MAAOA,IAY7Ct5B,OAAOK,eAAe4jE,EAAWhkE,UAAYD,OAAO2U,OAAO9G,OAAO5N,WAAY,UAC7EkC,IAAK,WAAa,MAAOuE,MAAKqX,MAAM5W,UAErC88D,EAAWhkE,UAAUqU,SAAW2vD,EAAWhkE,UAAUsU,QAAU,WAC9D,MAAO,GAAK7N,KAAKqX,MA6BlB,IAAI/O,GAAQkJ,MAAMjY,UAAU+O,KAsG5B,OA5FAoP,GAAEzJ,OAAS,SAAS6C,EAAK0c,GACxB,GAAIzJ,GAAU1hB,SAASqL,cAAcoD,EAErC,KAAK,GAAIhN,KAAK0pB,GAAG,CAChB,GAAI7f,GAAM6f,EAAE1pB,EAEZ,IAAU,WAANA,EACH4T,EAAE/J,GAAKmB,YAAYiV,OAEf,IAAU,WAANjgB,EAAgB,CACxB,GAAI87D,GAAMloD,EAAE/J,EACZiyD,GAAIhiD,WAAWwhB,aAAarb,EAAS67C,GACrC77C,EAAQjV,YAAY8wD,OAEZ97D,KAAKigB,GACbA,EAAQjgB,GAAK6J,EAGboW,EAAQ9G,aAAanZ,EAAG6J,GAI1B,MAAOoW,IAGRrM,EAAEtX,KAAO,SAAS2jB,EAASyJ,GAC1B,GAAIzJ,EACH,IAAK,GAAI9K,KAASuU,GAAG,CACpB,GAAIznB,GAAWynB,EAAEvU,EAEjBA,GAAMpJ,MAAM,OAAO6S,QAAQ,SAAUzJ,GACpC8K,EAAQ1gB,iBAAiB4V,EAAOlT,OAMpC2R,EAAEmsB,KAAO,SAAS13B,EAAQxK,EAAM67D,GAC/B,GAAIv3C,GAAM5jB,SAAS+jB,YAAY,aAE/BH,GAAII,UAAU1kB,GAAM,GAAM,EAE1B,KAAK,GAAI4lB,KAAKi2C,GACbv3C,EAAIsB,GAAKi2C,EAAWj2C,EAGrB,OAAOpb,GAAOhJ,cAAc8iB,IAG7BvO,EAAE+nD,aAAe,SAAUv3D,GAC1B,MAAOA,GAAEuP,QAAQ,uBAAwB,SAG1CC,EAAE+wC,aAAe,SAAUv4C,GAE1B,IAAK,GAAIpM,GAAI,EAAGoM,EAAKA,EAAG2vD,uBAAwB/7D,KAChD,MAAOA,IAYgB,mBAAbg8D,YAEkB,YAAxBz9D,SAASa,WACZ9B,IAIAiB,SAASgB,iBAAiB,mBAAoBjC,IAIhDqzB,EAAE/c,EAAIA,EACN+c,EAAE7c,GAAKA,EAGa,mBAATlL,QACVA,KAAK4vD,YAAc7nC,GAIE,YAAlB,EAAAjxB,cAAOtL,IAAuBA,EAAOD,UACxCC,EAAOD,QAAUw8B,GAGXA,OzLkoduBp8B,KAAKJ,EAASH,EAAoB,KAAKI,KAI/D,SAASA,EAAQD,G0L9jevBC,EAAAD,QAAA,SAAAC,GAQA,MAPAA,GAAA6nE,kBACA7nE,EAAA8nE,UAAA,aACA9nE,EAAA+nE,SAEA/nE,EAAAinE,YACAjnE,EAAA6nE,gBAAA,GAEA7nE,I1LskeM,SAASA,EAAQD,GAEtB,Y2LxkeD,SAASioE,KACR,MAAO76D,OAAM,gCACZ4S,QAAS,IACTwkC,YAAa,YAIf,QAAS0jB,GAAelmC,GACvB,OAAQA,EAASyiB,QAChB,IAAK,KACJ,QACD,KAAK,KACJ,MAAOziB,GAASU,MACjB,SACC,KAAM,IAAItZ,OAAS4Y,EAASyiB,OAAtB,MAAkCziB,EAASmmC,aAKpD,QAASC,KACR,MAAQ,mBAAqB,IAAI3gD,gBAGlC,QAAS4gD,GAAoB/mC,GAI5B,MAHAA,GAAQgnC,oBAAsBC,EAA2BjnC,GACzDA,EAAQknC,iBAAmBC,EAAwBnnC,GACnDA,EAAQonC,oBAAsBpnC,EAAQqnC,SAC/BrnC,EAGR,QAASsnC,KACR,MAAoC,YAA7BloE,OAAOktB,SAAS+nC,UACU,eAA7Bj1D,OAAOktB,SAAS+nC,SAGrB,QAASkT,KACR,QAASz+D,SAASwD,cAAc,YAGjC,QAASk7D,GAAW//D,GACnB,GAAMggE,GAAQ3+D,SAASwD,cAAc,6BAErC,IAAIm7D,EAAO,CACV,GAAMC,GAAe5+D,SAASwD,cAAc,mBAExCo7D,KACHA,EAAa58C,UAAe68C,EAASlgE,EAAMmgE,yBAA3C,KAEDH,EAAM36D,UAAUC,IAAI,YAItB,QAAS86D,KACR,MAAO/+D,UAASC,OAAOuhB,QAAQ,YAGhC,QAAS28C,GAA4BjnC,GACpC,MAAOA,GAAQqnC,UACXrnC,EAAQqnC,SAAS/8C,QAAQ,UACzB0V,EAAQqnC,SAAS/8C,QAAQ,YACzB0V,EAAQqnC,SAAS/8C,QAAQ,WAG9B,QAAS68C,GAAyBnnC,GACjC,MAAOA,GAAQqnC,UACXrnC,EAAQqnC,SAAS/8C,QAAQ,UACzB0V,EAAQqnC,SAAS/8C,QAAQ,YACzB0V,EAAQqnC,SAAS/8C,QAAQ,WAavB,QAASziB,GAAMJ,GAGhB6/D,KAAmBC,MAGnBT,IACHH,IACEl+D,KAAKm+D,GACLn+D,KAAKs+D,GACLt+D,KAAK,SAAUu3B,IACXA,EAAQonC,oBAAsBpnC,EAAQgnC,qBAAuBhnC,EAAQknC,mBACxEM,EAAU//D,KAILogE,KAGRL,EAAU//D,I3Lu+dZ1H,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,IAER3B,E2L7/demJ,MAtFhB,IAAM8/D,IACLG,EAAG,GACHz1D,EAAG,GACH01D,IAAK,K3LureA,SAASppE,EAAQD,EAASH,GAE/B,Y4LzreD,SAASypE,GAAuB1iD,GAC/B,MAAO2iD,GAAiBp/D,KAAKyc,GAG9B,QAAS4iD,GAAuB5iD,GAC/B,MAAO6iD,GAAqBt/D,KAAKyc,GAGlC,QAAS8iD,MACR,EAAAlnE,EAAAmd,IAAG,mBAAmB8K,QAAQ,SAAA1a,GAC7BA,EAAE4lD,SAAW/nC,SAAS+nC,SACtB5lD,EAAEs4B,OAASza,SAASya,OACpBt4B,EAAEoX,QAAS,IAIb,QAASwiD,MACR,EAAAnnE,EAAAmd,IAAG,oBAAoB8K,QAAQ,SAAA1a,GAC9B,GAAM25B,GAAQ,YAAcjU,mBAAmB7H,SAAS+nC,SAAW/nC,SAASya,OAC5Et4B,GAAEs4B,OAASt4B,EAAEs4B,QAAUt4B,EAAEs4B,OAAO7/B,OAAS,IAAM,KAAOkhC,EACtD35B,EAAEoX,QAAS,IAIb,QAAShe,KACJmgE,EAAsB3iD,UAAUC,WACnC8iD,IACUF,EAAsB7iD,UAAUC,YAC1C+iD,IAjCF,GAAAnnE,GAAA3C,EAAA,IAEM0pE,EAAmB,mCACnBE,EAAuB,2BAkC7BxpE,GAAOD,SACNmJ,OACAmgE,wBACAE,0B5LqseK,SAASvpE,EAAQD,GAGtB,cAIK,SAASC,EAAQD,EAASH,GAE/B,YAcA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GAZvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIiF,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,G6L9ve/C9E,EAAAjC,EAAA,I7LkweKsG,EAAmB3E,EAAuBM,G6LhwezC8nE,EAAc,cACdC,EAAY,YACZC,EAAiB,6BAEFC,E7LoweA,WACnB,QAASA,MACR,EAAIljE,cAA0BkB,KAAMgiE,GA4DrC,MAzDAA,G6LvweM5gE,K7Luwee,S6LvweTJ,GACZ,MAAOghE,GACLC,wBAAwBjhE,GACxBgB,KAAKggE,EAAcE,Y7LwwerBF,E6LrweMC,wB7LqwekC,S6LrweTjhE,GAC/B,MAAIA,GAAMvF,IAAI,iBAGV,8BAA8B2G,KAAKyjB,SAAS+nC,UACxCprD,QAAQmkD,OAAOmb,GAEhBt/D,QAAQC,UALPD,QAAQmkD,OAAOkb,I7L6wevBG,E6LrweME,U7LqweoB,W6L3ve1B,QAASC,KACRl/C,EAAQqB,UAAY09C,EAAcI,WAClCn/C,EAAQpd,cAAc,8BAA8BxC,iBAAiB,QAASg/D,GAC9EhgE,SAAS2W,KAAKomB,aAAanc,EAAS5gB,SAAS2W,KAAKshC,YAGnD,QAASgoB,KACRr/C,EAAQ5c,UAAUC,IAAI,0BAGvB,QAAS+7D,KACRjkE,aAAMk7B,MAAM3kB,IAAIotD,EAAgB,GAChCO,IAGD,QAASC,KACR,MAAwC,KAApCnkE,aAAMk7B,MAAM79B,IAAIsmE,MAKhB,kCAAkC3/D,KAAKC,SAASC,UACnD+/D,KACO,GA/BT,IAAIE,IAAJ,CAIA,GAAMt/C,GAAU5gB,SAASqL,cAAc,MAEvCy0D,O7LoyeAH,E6LpweMI,S7LowemB,W6LnwezB,u4B7LuweOJ,IAGR/pE,c6Lr0eoB+pE,E7Ls0epB9pE,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,Y8L10eD,SAAS0qE,KACRC,EAAWnpC,MAAM3kB,IAAI+tD,EAAUC,EAC/B,IAAMC,GAAYH,EAAWnpC,MAAM79B,IAAIinE,EAEvC,OADAD,GAAWnpC,MAAMV,MAAM8pC,GAChBC,IAAaC,GAAaH,EAAWpqC,eAG7C,QAASj3B,KACR,GAAMyhE,IAAU,EAAApoE,EAAAid,GAAE,6BACZorD,GAAW,EAAAroE,EAAAid,GAAE,8BAEb0oC,EAAYj5C,OAAOxO,OAAOktB,SAASya,QAAQjH,MAAM,wBASvD,IARI+mB,IACCoiB,KACHC,EAAWnpC,MAAM3kB,IAAIouD,EAAa,GAEnCF,EAAQzjD,QAAS,EACjB0jD,EAAS1jD,QAAS,GAGf4jD,QAAQP,EAAWnpC,MAAM79B,IAAIsnE,OAAkB,GAASP,IAAmB,CAC9E,GAAMS,IAAc,EAAAxoE,EAAAid,GAAE,SAAUmrD,EAEhCI,GAAY/H,QAAU,WACrB2H,EAAQzjD,QAAS,GAGlByjD,EAAQzjD,QAAS,EACjB0jD,EAAS1jD,QAAS,EAGlBqjD,EAAWnpC,MAAM3kB,IAAIouD,EAAa,IArCpC,GAAAtoE,GAAA3C,EAAA,IAFM2qE,EAAa3qE,EAAQ,IAIrBirE,EAAc,yBACdL,EAAW,yBACXC,EAAW,WAqCjBzqE,GAAOD,SAAYmJ,S9Lw1eb,SAASlJ,EAAQD,GAEtB,Y+Lp4eDC,GAAOD,Y/L24eD,SAASC,EAAQD,EAASH,GgM54ehC,YAEA,SAASsJ,KACRtJ,EAAQ,KAAYsJ,OAGrBlJ,EAAOD,SAAYmJ,ShMk5eb,SAASlJ,EAAQD,EAASH,GiMx5ehCI,EAAAD,QAAAH,EAAA,MjM85eM,SAASI,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GARvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GkMn6eT,IAAAgB,GAAA9C,EAAA,KlMw6eK4E,EAAWjD,EAAuBmB,GkMt6ejCy7D,EAAe,QAAfA,KACL35D,aAAO0E,OACPiB,SAASwa,oBAAoB,qBAAsBw5C,GAGpDh0D,UAASgB,iBAAiB,qBAAsBgzD,GlM46e/Cp+D,aAAkByE,aAClBxE,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YAkBA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GAhBvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIiF,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GmMl8e/C64D,EAAA5/D,EAAA,KnMs8eK2/D,EAAYh+D,EAAuBi+D,GmMr8exCwL,EAAAprE,EAAA,KnMy8eKqrE,EAAW1pE,EAAuBypE,GmMv8ejCE,GAA2B,UAAW,KAAM,KAE5CC,EnM28eQ,WmMz8eb,QAAAA,GAAaC,GAAU,GAAA1iE,GAAAZ,MAAA,EAAAlB,cAAAkB,KAAAqjE,GACjBC,EAE0B,gBAAbA,KACjBA,EAAWjhE,SAASwD,cAAcy9D,IAFlCA,EAAWjhE,SAASwD,cAAc,iCAKnC7F,KAAKsjE,SAAWA,GAEhB,EAAAH,cAAO,SAAA9/B,GACN,MAAI+/B,GAAwBv/C,QAAQwf,SAAuBziC,EAAKk3D,SAI5DsL,EAAwBv/C,QAAQwf,SAAsBziC,EAAKk3D,SACvDl3D,EAAKwiB,UADb,OAHQxiB,EAAK2uC,UAQdvvC,KAAKsjE,SAASj5B,gBAAgB,wBAC9BrqC,KAAKsjE,SAASrmD,aAAa,oBAAqB,InMi/ehD,MAhCAomD,GAAO9pE,UmM98eRg2C,MnM88e0B,WmM98ejB,GAAAl3B,GAAArY,IACRA,MAAK83D,WAEL,IAAMI,GAAYl4D,KAAKsjE,SAASzrD,iBAAiB,kBAEjDrG,OAAMjY,UAAUmpB,QAAQrqB,KAAK6/D,EAAW,SAAAN,GACvC,GAAMzrD,GAAS9J,SAAS+nC,eAAewtB,EAAStzD,aAAa,iBAC7DszD,GAAS36C,aAAa,OAAQ,UAC9B5E,EAAKy/C,SAASr2D,KAAK,GAAAg2D,cAAWG,GAAYzrD,enMo9e3Ck3D,EAAO9pE,UmMh9eR6pB,QnMg9e4B,WmM/8e3BpjB,KAAK83D,SAASp1C,QAAQ,SAAAq1C,GAAA,MAAUA,GAAO30C,YACvCpjB,KAAK83D,SAAW,MnMq9ehBuL,EmMl9eMjiE,KnMk9eQ,SmMl9eF2X,GACPA,EAEwB,gBAAXA,KACjBA,EAAS1W,SAASwD,cAAckT,IAFhCA,EAAS1W,SAAS2W,IAKnB,IAAMsqD,GAAWvqD,EAAOlT,cAAc,gCACtC,OAAO,IAAIw9D,GAAOC,InMq9eXD,IAGRprE,cmMn9ecorE,EnMo9ednrE,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YAeA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GoMlifzE,QAASkI,GAAM2E,GAC7Bw9D,aAAUr/B,SAAS,SAEnB,IAAIs/B,GAAiBC,aAAMtkB,kBAE3B98C,UAAS2W,KAAK3V,iBAAiB,mBAAoB,WAClD,GAAMggC,GAAaogC,aAAMtkB,kBAErB9b,KAAemgC,IAClBz9D,EAASs9B,GACTmgC,EAAiBngC,KAInBt9B,EAASy9D,GpMugfTlqE,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,IAER3B,aoMxhfuBmJ,CAHxB,IAAAsiE,GAAA5rE,EAAA,KpM+hfK2rE,EAAUhqE,EAAuBiqE,GoM9hftCC,EAAA7rE,EAAA,IpMkifKyrE,EAAc9pE,EAAuBkqE,EAoBzCzrE,GAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YqM7jfDI,GAAOD,SACN2J,OAAQ9J,EAAQ,KAChBoK,GAAIpK,EAAQ,KACZyK,UAAWzK,EAAQ,OrMokfd,SAASI,EAAQD,EAASH,GsMvkfhCI,EAAAD,QAAAH,EAAA,MtM6kfM,SAASI,EAAQD,EAASH,GuM7kfhC,YvMylfC,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GARvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GuMhlfT,IAAAgqE,GAAA9rE,EAAA,KvMqlfK+rE,EAAepqE,EAAuBmqE,EAI1C3rE,cuMvlfc,GAAA4rE,eACdC,QAAS,wBvMylfT5rE,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GwMlmfhC,YxM8mfC,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GARvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIiF,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GwM1mfzC06B,EAAUzhC,EAAQ,KAClBisE,EAAWjsE,EAAQ,KAEnBksE,GACLC,eAAgBnsE,EAAQ,MAGnBosE,GACLruB,MAAO,EACPnN,SACAqb,MAAO,GAGFogB,ExM8mfY,WwM7mfjB,QAAAA,KAA6B,GAAApjE,GAAAP,UAAAC,QAAA,GAAAnF,SAAAkF,UAAA,MAAAA,UAAA,GAAfsjE,EAAe/iE,EAAf+iE,OACb,KAD4B,EAAAhlE,cAAAkB,KAAAmkE,IACvBL,EACJ,KAAM,iDAEP9jE,MAAK8jE,QAAUA,EACf9jE,KAAK5H,UxM8zfL,MAjMA+rE,GAAW5qE,UwMrnfZ6H,KxMqnf6B,WwMrnfO,GAAAR,GAAAZ,KAA9BokE,EAA8B5jE,UAAAC,QAAA,GAAAnF,SAAAkF,UAAA,MAAAA,UAAA,EAEnC,OAAIR,MAAKsgB,YACD9d,QAAQC,WAEhBzC,KAAKsgB,aAAc,EACnBtgB,KAAKqkE,cACE9qC,EAAQ/hB,OACbxV,KAAK,SAAAsiE,GAAY,GAAV9sD,GAAU8sD,EAAV9sD,IAEP,KAAIA,EACH,MAAOhV,SAAQmkD,OAAO,sCAGvB/lD,GAAK2jE,OAAS/sD,EAEd5W,EAAKkf,SACJ08B,eAAgB,mBAChBgoB,qBAAsBjrC,EAAQj3B,SAG/B,IAAImiE,GAAgB,GAAIC,OACtBhjE,aAAc,YAAaC,KAAM,eACjCD,aAAc,UAAWC,KAAM,aAC/BD,aAAc,UAAWC,KAAM,SAGjCyiE,GAAwB1hD,QAAQ,SAAAiiD,GAC3BF,EAAcz7D,IAAI27D,IAAQF,EAAcn+D,IAAIq+D,KAGjDF,EAAc/hD,QAAQ,SAAAhhB,GAAA,MAAgBd,GAAKqD,KAAKvC,OAxB3C63B,SA2BC,SAAAjsB,GAEN,GAAkB,4BAAdA,EAAE2V,QAGN,KAAM3V,OxM4nfR62D,EAAW5qE,UwMxnfZ8qE,YxMwnfoC,WwMvnfnC,GAAM7rE,GAAIG,OAAO0gB,aAAe1gB,OAAO4gB,eAAiB5gB,OAAO6gB,mBAAqB7gB,OAAO8gB,cACtFjhB,IAAMA,EAAEkhB,MACblX,QAAQ+U,KACP,GAAI/U,SAAQ,SAAAoD,GACXvD,SAASgB,iBAAiB,kCAAmCuC,KAE9D,GAAIpD,SAAQ,SAAAoD,GACXvD,SAASgB,iBAAiB,+BAAgCuC,OAG1D5D,KAAK,iBAAMxJ,GAAEkhB,KAAK,iBxMynfpByqD,EAAW5qE,UwMtnfZqrE,KxMsnf6B,SwMtnfvBrgE,EAAMsU,GACXxW,SAAS2W,KAAK7V,cAAc,GAAIC,aAAJ,QAAwBmB,GACnD4U,OAAQN,EACRC,SAAS,MxM0nfVqrD,EAAW5qE,UwMtnfZsrE,UxMsnfkC,SwMtnfvB3wC,EAAQonB,EAAUziC,GAC5B,GAAItY,IACH2zB,SACApU,QAAS9f,KAAK8f,QACd28B,YAAa,UAMd,OAHe,QAAXvoB,IACH3zB,EAAQyY,KAAOtT,KAAKC,UAAUkT,QAExBxT,MAAMrF,KAAK8jE,QAAUxoB,EAAU/6C,GACpCyB,KAAK+hE,EAASppC,OxMwnfhBwpC,EAAW5qE,UwMpnfZ0K,KxMonf6B,SwMpnfvBvC,GAAc,GAAA2W,GAAArY,KACb3G,EAASqI,EAAaA,aAAtB,IAAsCA,EAAaC,IAEzD3B,MAAK6kE,UAAU,MAAU7kE,KAAKukE,OAA9B,IAAwC7iE,EAAaA,aAArD,IAAqEA,EAAaC,MAChFK,KAAK,SAAAu5B,GACDA,IACHA,EAAU2oC,GAEX7rD,EAAKjgB,OAAOiB,GAAOkiC,EACnBljB,EAAKusD,KAAL,QAAkBvrE,EAAlB,QAA8BkiC,KANhCv7B,SAQQ,SAAAwF,GACN,GAAoB,wBAAhBA,EAAIyd,QAIP,KAAMzd,EAHN6S,GAAKjgB,OAAOiB,GAAO6qE,EACnB7rD,EAAKusD,KAAL,QAAkBvrE,EAAlB,QAA8B6qE,MxM2nfjCC,EAAW5qE,UwMpnfZ+M,IxMonf4B,SwMpnfvBw+D,EAAOC,EAASrjE,EAAcC,EAAMqjE,EAASnsD,GAAM,GAAAszB,GAAAnsC,IAEvD,OADA+kE,GAAU/kE,KAAKilE,8BAA8BH,EAAOC,GAC7C/kE,KAAK6kE,UAAU,MAAUC,EAAzB,IAAkCC,EAAlC,IAA6CrjE,EAA7C,IAA6DC,EAA7D,IAAqEqjE,EAAWnsD,GACrF7W,KAAK,SAAAu5B,GACL,GAAMkT,IAAWs2B,UAASxpC,UAASypC,UAASnsD,OAE5C,OADAszB,GAAKy4B,KAAQE,EAAb,IAAsBpjE,EAAtB,IAAsCC,EAAtC,OAAkD8sC,GAC3CA,KxMynfT01B,EAAW5qE,UwMrnfZ2hC,OxMqnf+B,SwMrnfvB4pC,EAAOC,EAASrjE,EAAcC,EAAMqjE,EAASnsD,GAAM,GAAAo5B,GAAAjyC,IAE1D,OADA+kE,GAAU/kE,KAAKilE,8BAA8BH,EAAOC,GAC7C/kE,KAAK6kE,UAAU,SAAaC,EAA5B,IAAqCC,EAArC,IAAgDrjE,EAAhD,IAAgEC,EAAhE,IAAwEqjE,GAC7EhjE,KAAK,WACL,GAAMysC,IAAWs2B,UAASC,UAASnsD,OAEnC,OADAo5B,GAAK2yB,KAAQE,EAAb,IAAsBpjE,EAAtB,IAAsCC,EAAtC,UAAqD8sC,GAC9CA,KxM0nfT01B,EAAW5qE,UwMtnfZ2rE,mBxMsnf2C,SwMtnfvBJ,EAAOC,EAASrjE,EAAcC,EAAMqjE,EAASnsD,GAAM,GAAAu5B,GAAApyC,IAEtE,OADA+kE,GAAU/kE,KAAKilE,8BAA8BH,EAAOC,GAC7C/kE,KAAK6kE,UAAU,MAAUC,EAAzB,IAAkCC,EAAlC,IAA6CrjE,EAA7C,IAA6DC,EAA7D,IAAqEqjE,EAAWnsD,GACrF7W,KAAK,SAAAu5B,GACL,GAAMkT,IAAWs2B,UAASxpC,UAASypC,UAASnsD,OAE5C,OADAu5B,GAAKwyB,KAAQE,EAAb,IAAsBpjE,EAAtB,IAAsCC,EAAtC,UAAqD8sC,GAC9CA,KxM2nfT01B,EAAW5qE,UwMvnfZkC,IxMunf4B,SwMvnfvBiG,EAAcC,EAAMqjE,GAAS,GAAA1yB,GAAAtyC,IACjC,OAAOA,MAAK4E,OAAOlD,EAAcC,GAAMK,KAAK,SAAA0mC,GAC3C,MAAOA,GAAMzN,OAAO,SAAArI,GAAA,MAAQ0f,GAAK6yB,QAAQvyC,GAAM/O,QAAQmhD,WxM+nfxDb,EAAW5qE,UwM3nfZqL,OxM2nf+B,SwM3nfvBlD,EAAcC,GAAM,GAAAkxC,GAAA7yC,IAC3B,OAAO,IAAIwC,SAAQ,SAACC,GACfowC,EAAKz6C,OAAUsJ,EAAf,IAA+BC,GAClCc,EAAQowC,EAAKuyB,SAAS1jE,EAAcC,IAEpCU,SAAS2W,KAAK3V,iBAAd,aAA4C3B,EAA5C,IAA4DC,EAA5D,QAAyE,WACxEc,EAAQowC,EAAKuyB,SAAS1jE,EAAcC,SxMmofvCwiE,EAAW5qE,UwM7nfZyP,IxM6nf4B,SwM7nfvBtH,EAAcC,EAAMqjE,GACxB,MAAOhlE,MAAKvE,IAAIiG,EAAcC,EAAMqjE,GAClChjE,KAAK,SAAA0mC,GAAA,MAASA,GAAMjoC,OAAS,KxMiof/B0jE,EAAW5qE,UwM9nfZ4rE,QxM8nfgC,SwM9nfvBE,GACR,MAAOA,GAAM7tD,MxMiofb2sD,EAAW5qE,UwM9nfZ6rE,SxM8nfiC,SwM9nfvB1jE,EAAcC,GACvB,MAAO3B,MAAK5H,OAAUsJ,EAAf,IAA+BC,GAAQ+mC,WxMiof9Cy7B,EAAW5qE,UwM9nfZ0qE,exM8nfuC,SwM9nfvB3+D,GACf,MAAOi0B,GAAQ/hB,OACbxV,KAAK,SAAAsjE,GAAY,GAAV9tD,GAAU8tD,EAAV9tD,IACP,OAAOwsD,GAAIC,eAAe3+D,EAAKkS,MxMsofjC2sD,EAAW5qE,UwMjofZ0rE,8BxMiofsD,SwMjofvBH,EAAOC,GACrC,GAAIA,EAOH,MAAOA,EANP,IAAa,SAAVD,EACF,MAAO9kE,MAAKukE,MAEZ,MAAM,IAAIljD,OAAM,yBxMwofX8iD,IAGRlsE,cwMnofcksE,ExMoofdjsE,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GyM31fhCI,EAAAD,QAAAH,EAAA,MzMi2fM,SAASI,EAAQD,EAASH,G0Mj2fhC,YAKA,SAAS0f,KACR,GAAIA,GAAOssC,EAAM,OAEjB,OAAItsC,GACIhV,QAAQC,SACd+U,KAAKA,KAGF+tD,EAAS/tD,OACb+tD,EAAS/tD,KAAO8S,EAAQ,SAAStoB,KAAK,SAASi4B,GAE9C,MADA6pB,GAAM,OAAQ7pB,EAASziB,MAChByiB,KAIFsrC,EAAS/tD,MAGjB,QAASguD,KACR,MAAOl7C,GAAQ,aAvBhB,GAAIA,GAAUxyB,EAAQ,KAClBgsD,EAAQhsD,EAAQ,KAChBytE,IAwBJrtE,GAAOD,SACNuf,KAAOA,EACPguD,SAAWA,EACX1hB,MAAQA,EACRxhD,OAAS,WACR,OAAQ,oBAAoBkL,KAAKnL,SAASC,UAAY,KAAM,KAAK,M1M02f7D,SAASpK,EAAQD,G2M14fvB,YAEA,SAASqyB,GAAQhlB,GAEhB,MAAIjD,UAASC,OAAOuhB,QAAQ,mBACpBrhB,QAAQmkD,OAAO,GAAItlC,OAAM,4BAG1Bhc,oCAAoCC,GAC1Cm3C,YAAY,UACZ98B,cAAc,IACZ3d,KAAK,SAASi4B,GAChB,MAAIA,GAASqgC,GACI,cAARh1D,EAAuB9C,QAAQC,SAAQ,GAAQw3B,EAASU,OAEhD,cAARr1B,EAAuB9C,QAAQC,SAAQ,GAASD,QAAQmkD,OAAO1sB,EAASyiB,UAP3Er3C,SAUE,SAASiI,GACjB,GAAI2V,GAAU3V,EAAE2V,SAAW,EACvBA,GAAQY,QAAQ,iBAAqBZ,EAAQY,QAAQ,8BAAkCZ,EAAQY,QAAQ,iBAI1GxhB,SAAS2W,KAAK7V,cAAc,GAAIC,aAAY,eAC3C0V,SAAS,EACTK,QACC3S,MAAO8G,EACPgW,MACCiuC,UAAW,6BAQjBr5D,EAAOD,QAAUqyB,G3M+4fX,SAASpyB,EAAQD,EAASH,G4Mp7fhC,Y5M47fC,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G4Mv7fxF,QAAS4qD,GAAMv/C,EAAM3K,GACpB,GAAmB,YAAhB,mBAAO2K,GAAP,eAAAf,cAAOe,IAET,YADAkhE,EAAelhE,EAIhB,IAAmB,gBAATA,IAAsC,gBAAV3K,GAErC,YADA6rE,EAAalhE,GAAQ3K,EAItB,IAAmB,gBAAT2K,IAAsC,mBAAV3K,GACrC,MAAO6rE,GAAalhE,IAAS,IAG9B,IAAmB,mBAATA,IAAyC,mBAAV3K,GACxC,MAAO6rE,EAGR,MAAM,IAAIpkD,OAAM,qB5Mg6fhB,GAAI9d,GAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,G4Mx7fnCkiE,IAyBJ3hB,GAAMjrB,MAAQ,WACb4sC,MAGDvtE,EAAOD,QAAU6rD,G5M+7fX,SAAS5rD,EAAQD,EAASH,G6M99fhCI,EAAAD,QAAAH,EAAA,M7Mo+fM,SAASI,EAAQD,EAASH,G8Mp+fhC,Y9M6/fC,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G8M3/fjF,QAASyhC,GAAKV,GACpB,GAAIzoB,MAAMc,QAAQ2nB,GACjB,MAAOz3B,SAAQ+U,IAAI0iB,EAASpjB,IAAI8jB,GAEjC,KAAKV,EAASqgC,GACb,KAAM,IAAIoL,GAAuBzrC,EAASyiB,OAG3C,IAAwB,MAApBziB,EAASyiB,OAIb,MAAOziB,GAASU,OAATV,SACC,SAASz0B,GACf,GAAIA,EAAIyd,QAAQY,QAAQ,cACvB,KAAM,IAAI8hD,GAAiBngE,EAAIyd,QAGhC,MAAM,IAAI2iD,GAAiBpgE,EAAIyd,WAI3B,QAAS4N,GAAKoJ,GACpB,GAAIzoB,MAAMc,QAAQ2nB,GACjB,MAAOz3B,SAAQ+U,IAAI0iB,EAASpjB,IAAIga,GAGjC,KAAKoJ,EAASqgC,GACb,KAAM,IAAIoL,GAAuBzrC,EAASyiB,OAG3C,IAAwB,MAApBziB,EAASyiB,OAIb,MAAOziB,GAASpJ,OA6BV,QAASg1C,GAAgBrgE,GAC/B,MAAIA,GAAIjB,OAASmhE,EAAuBnhE,MACpCiB,EAAIjB,OAASqhE,EAAiBrhE,MAC9BiB,EAAIjB,OAASohE,EAAiBphE,K9Mm6flCjL,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,IAER3B,EAAQ0tE,iBAAmB1tE,EAAQ2tE,iBAAmB3tE,EAAQytE,uBAAyBpqE,MAEvF,IAAIuD,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GAE1CinE,EAA8BhuE,EAAoB,KAElDiuE,EAA8BtsE,EAAuBqsE,GAErDE,EAAaluE,EAAoB,KAEjCmuE,EAAaxsE,EAAuBusE,EAExC/tE,G8Mv/fe0iC,O9Mw/ff1iC,E8Ml+fe44B,O9Mm+ff54B,E8Mz7fe4tE,iB9Mk+ff,I8M5/fYH,G9M4/fiBztE,E8M5/fjBytE,uB9M4/fkD,SAAUQ,G8Mz/fxE,QAAAR,GAAYnlE,IAAS,EAAAzB,cAAAkB,KAAA0lE,EAAA,IAAA9kE,IAAA,EAAAmlE,cAAA/lE,KACpBkmE,EAAA7tE,KAAA2H,MADoB,OAEpBY,GAAKqiB,QAAU1iB,EACfK,EAAK2D,KAAO,yBAHQ3D,E9MwggBpB,OAdA,EAAIqlE,cAAoBP,EAAwBQ,GAczCR,G8M3ggBmCrkD,OAU/BukD,E9MoggBW3tE,E8MpggBX2tE,iB9MoggBsC,SAAUO,G8MnggB5D,QAAAP,GAAYrlE,IAAS,EAAAzB,cAAAkB,KAAA4lE,EAAA,IAAAvtD,IAAA,EAAA0tD,cAAA/lE,KACpBmmE,EAAA9tE,KAAA2H,MADoB,OAEpBqY,GAAK4K,QAAU1iB,EACf8X,EAAK9T,KAAO,mBAHQ8T,E9MghgBpB,OAZA,EAAI4tD,cAAoBL,EAAkBO,GAYnCP,G8MjhgB6BvkD,OAQzBskD,E9M4ggBW1tE,E8M5ggBX0tE,iB9M4ggBsC,SAAUS,G8M3ggB5D,QAAAT,GAAYplE,IAAS,EAAAzB,cAAAkB,KAAA2lE,EAAA,IAAAx5B,IAAA,EAAA45B,cAAA/lE,KACpBomE,EAAA/tE,KAAA2H,MADoB,OAEpBmsC,GAAKlpB,QAAU1iB,EACf4rC,EAAK5nC,KAAO,mBAHQ4nC,E9MwhgBpB,OAZA,EAAI85B,cAAoBN,EAAkBS,GAYnCT,G8MzhgB6BtkD,Q9MsigBhC,SAASnpB,EAAQD,EAASH,G+MhmgBhC,YAQA,SAAA2B,GAAAP,GAAsC,MAAAA,MAAAC,WAAAD,GAAuCQ,UAAAR,GAN7EjB,EAAAkB,YAAA,CAEA,IAAAoK,GAAAzL,EAAA,GAEA0L,EAAA/J,EAAA8J,EAIAtL,cAAA,SAAAyU,EAAArU,GACA,IAAAqU,EACA,SAAA25D,gBAAA,4DAGA,QAAAhuE,GAAA,+BAAAA,GAAA,eAAAmL,cAAAnL,KAAA,kBAAAA,GAAAqU,EAAArU,I/MumgBM,SAASH,EAAQD,EAASH,GgNtngBhC,YAgBA,SAAA2B,GAAAP,GAAsC,MAAAA,MAAAC,WAAAD,GAAuCQ,UAAAR,GAd7EjB,EAAAkB,YAAA,CAEA,IAAAmtE,GAAAxuE,EAAA,KAEAyuE,EAAA9sE,EAAA6sE,GAEA/zD,EAAAza,EAAA,KAEA0uE,EAAA/sE,EAAA8Y,GAEAhP,EAAAzL,EAAA,GAEA0L,EAAA/J,EAAA8J,EAIAtL,cAAA,SAAAwuE,EAAAC,GACA,qBAAAA,IAAA,OAAAA,EACA,SAAA5jE,WAAA,+EAAA4jE,GAAA,eAAAljE,cAAAkjE,IAGAD,GAAAltE,WAAA,EAAAitE,cAAAE,KAAAntE,WACAyN,aACApN,MAAA6sE,EACAjrE,YAAA,EACAwS,UAAA,EACAD,cAAA,KAGA24D,IAAAH,cAAA,EAAAA,cAAAE,EAAAC,GAAAD,EAAAE,UAAAD,KhN6ngBM,SAASxuE,EAAQD,EAASH,GiN5pgBhCI,EAAAD,SAAkByB,UAAA5B,EAAA,KAAAqB,YAAA,IjNkqgBZ,SAASjB,EAAQD,EAASH,GkNlqgBhCA,EAAA,KACAI,EAAAD,QAAAH,EAAA,IAAAwB,OAAAstE,gBlNwqgBM,SAAS1uE,EAAQD,EAASH,GmNxqgBhC,GAAA+Q,GAAA/Q,EAAA,GACA+Q,KAAA+C,EAAA,UAA8Bg7D,eAAA9uE,EAAA,KAAA6c,OnN+qgBxB,SAASzc,EAAQD,EAASH,GoN/qgBhC,GAAAyV,GAAAzV,EAAA,IACAoV,EAAApV,EAAA,IACAynB,EAAA,SAAA/X,EAAA6C,GAEA,GADA6C,EAAA1F,IACA+F,EAAAlD,IAAA,OAAAA,EAAA,KAAAvH,WAAAuH,EAAA,6BAEAnS,GAAAD,SACA0c,IAAArb,OAAAstE,iBAAA,gBACA,SAAAxkE,EAAAykE,EAAAlyD,GACA,IACAA,EAAA7c,EAAA,IAAAwU,SAAAjU,KAAAP,EAAA,IAAAmP,EAAA3N,OAAAC,UAAA,aAAAob,IAAA,GACAA,EAAAvS,MACAykE,IAAAzkE,YAAAoP,QACO,MAAAlE,GAAUu5D,GAAA,EACjB,gBAAAr/D,EAAA6C,GAIA,MAHAkV,GAAA/X,EAAA6C,GACAw8D,EAAAr/D,EAAAm/D,UAAAt8D,EACAsK,EAAAnN,EAAA6C,GACA7C,QAEQ,GAAAlM,QACRikB,UpNwrgBM,SAASrnB,EAAQD,EAASH,GqN/sgBhCI,EAAAD,SAAkByB,UAAA5B,EAAA,KAAAqB,YAAA,IrNqtgBZ,SAASjB,EAAQD,EAASH,GsNrtgBhCA,EAAA,IACA,IAAAgvE,GAAAhvE,EAAA,IAAAwB,MACApB,GAAAD,QAAA,SAAA8S,EAAA4I,GACA,MAAAmzD,GAAA74D,OAAAlD,EAAA4I,KtN4tgBM,SAASzb,EAAQD,EAASH,GuN/tgBhC,GAAA+Q,GAAA/Q,EAAA,GAEA+Q,KAAA+C,EAAA,UAA8BqC,OAAAnW,EAAA,OvNqugBxB,SAASI,EAAQD,EAASH,GwNvugBhC,YAEA,IAAMivE,GAAiBjvE,EAAQ,KACzBkvE,EAAclvE,EAAQ,IAE5BI,GAAOD,QAAU,SAAUqN,EAAKi/D,GAC/B,GAAIwC,EAAezhE,GAClB,MAAOA,EAGR,KAAIi/D,IAAWA,EAAO9jE,SAAWumE,EAAYzC,GAC5C,KAAM,IAAIljD,OAAM,sBAAwBkjD,EAGzC,OAAOj/D,GAAImS,QAAQ,0CAA2C,SAAUwvD,EAAIlkB,EAAImkB,GAC/E,MAAO,SAAWnkB,EAAKA,EAAK,IAAM,IAAMwhB,GAAU2C,GAAM,QxN+ugBpD,SAAShvE,EAAQD,EAASH,GyN9vgBhC,YAEA,IAAMqvE,GAAoBrvE,EAAQ,KAC5BsvE,EAActvE,EAAQ,IAE5BI,GAAOD,QAAU,SAAAqN,GAAA,MAAO,sBAAsBlD,KAAKkD,IAClD,6BAA6BlD,KAAKkD,IAClC,qBAAqBlD,KAAKkD,IAC1B8hE,EAAY9hE,IACZ6hE,EAAkB7hE,KzNmwgBb,SAASpN,EAAQD,G0N5wgBvB,YAEAC,GAAOD,QAAU,SAAU6rB,GAC1B,MAAO,iEAAiE1hB,KAAK0hB,K1NoxgBxE,SAAS5rB,EAAQD,GAEtB,Y2NzxgBDC,GAAOD,QAAU,SAAA6rB,GAAA,MAAQ,2CAA2C1hB,KAAK0hB,K3NkygBnE,SAAS5rB,EAAQD,G4NlygBvB,YAEAC,GAAOD,QAAU,SAAA0uB,GAAA,MAAO,iEAAiEvkB,KAAKukB,K5N2ygBxF,SAASzuB,EAAQD,EAASH,GAE/B,YAkBA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G6NzwgBxF,QAASmuE,GAAsBhkD,GAC9B,MAAOA,GAAG1hB,KAAK8V,QAAQ,QAAS,IAAI5H,MAAM,KAAK,GAGhD,QAASy3D,GAAiBjkD,GACzB,GAAM2C,GAAY3C,EAAG1hB,KAAKkO,MAAM,IAChC,OAAOmW,GAAUA,EAAUvlB,OAAS,GAGrC,QAAS0kE,GAASvyC,GACjB,MAAOA,GAAK20C,MAAQ30C,EAAKpb,KAG1B,QAASgwD,GAAcC,EAAU9iE,GAChC,GAAM+iE,GAAsD,SAA1CD,EAASnjE,aAAa,eAEpCK,KAAU+iE,GACbC,EAAYC,YAAYH,GAEzBA,EAASp9B,gBAAgB,YAI1B,QAASw9B,GAAoBtiE,GAC5B,GAAKuiE,EAAYviE,EAAKwiE,aAAtB,CAIA,GAAMC,GAAepwD,EAAGkwD,EAAYviE,EAAKwiE,aAAcxiE,EAAKqd,SACtDqlD,EAAaC,EAAa3iE,EAAKwiE,aAC/BI,EAAQ5iE,EAAK6iE,SAASvxD,IAAIsuD,EAIhC6C,GAAatlD,QAAQ,SAAAo8C,GACpB,GAAMr3D,GAAQ0gE,EAAMtkD,QAAQi7C,EAAKx6D,aAAa2jE,GAC9C,IAAIxgE,KAAY,IAAAujC,GAAA,WACf,GAAMq9B,GAAUvJ,EAAKjnD,iBAAiB,yBAChCywD,EAAcD,EAAQ5nE,OAAS,EACjC8nE,QAIJ,OAAID,KACHC,EAAoBC,EAAqBH,EAASvJ,EAAMv5D,EAAK6iE,SAAS3gE,KACjE8gE,IACJvrD,EAAA,SAIFpF,EAAG,SAAUknD,GAAMp8C,QAAQ,SAAA03C,GAC1B,GAAMqO,GAAkBH,EAAelO,IAAWmO,EAAqBhjE,EAAKZ,KAC5E6iE,GAAapN,EAAQqO,SAItB3J,GAAKz4D,UAAU0xD,OAAf,YAAkCxyD,EAAKwiE,YAAvC,QAA2DxiE,EAAKZ,UApBjD,mCAAAqmC,GAAA,eAAAxnC,cAAAwnC,IAAA,MAAAA,GAAAhuB,MAyBlB,QAASwrD,GAAsBH,EAASvJ,EAAMkG,GAC7C,GAAM0D,GAAUL,EAAQ,GAAG/jE,aAAa,QAAQmT,QAAQ,QAAS,IAC3DkxD,EAAW3D,EAAQ4D,MAAQ5D,EAAQ4D,KAAKF,GAExCG,EAAe/J,EAAKj5D,cAAL,kBAAoC8iE,GAAY,UAAhD,KACrB,OAAOE,GAGR,QAASC,GAAazsB,EAAtBt7C,GAAmF,GAAAgoE,GAAAhoE,EAArDwD,OAAqDjJ,SAAAytE,EAA9C,UAA8CA,EAAAC,EAAAjoE,EAAnCu0D,QAAmCh6D,SAAA0tE,EAA3B,SAA2BA,EAAAC,EAAAloE,EAAjBmoE,SAAiB5tE,SAAA2tE,KAC5EE,EAAU,GAAIC,GAAQ7kE,GAC3B8kE,SAAW/T,QAAO4T,UAClB7sB,QAKD,OAFA8sB,GAAQn6D,OAED,GAAIxM,SAAQ,SAAAC,GAClBJ,SAAS2W,KAAK3V,iBAAiB,iBAAkB,iBAAMZ,GAAQ0mE,OAIjE,QAASG,GAAkCH,EAASxpB,GAEnD,GAAM4pB,GAA2BJ,EAAQ3tC,QAAQ31B,cAAc,6BACzD2jE,EAAaL,EAAQ3tC,QAAQ31B,cAAc,kBAE7C0jE,IACHA,EAAyBlmE,iBAAiB,QAAS,SAAAggB,GAGlD,GAFAA,EAAGq0B,kBAEC8xB,EAAW5vE,MAAO,CACrB,GAAM6vE,GAAgBN,EAAQ3tC,QAAQ31B,cAAc,iBAEpD,aADA4jE,EAAcvyD,WAAa,6CAI5B,GAAMwyD,GAASF,EAAWjpE,QAAQipE,EAAWG,eAAe/vE,KAC5DiI,GAAWyE,IAAI,OAAQojE,EAAQ,YAAa,UAAW/pB,GACrD39C,KAAK,SAAAmX,GACLywD,EAAc,YAAazwD,GAC3BgwD,EAAQj6D,YAMb,QAAS26D,GAAuBV,EAASxpB,GAExC,GAAMmqB,GAAmBX,EAAQ3tC,QAAQ31B,cAAc,mBACjDkkE,EAAYZ,EAAQ3tC,QAAQ31B,cAAc,YAC1CmkE,EAAmBb,EAAQ3tC,QAAQ31B,cAAc,kBAEvDikE,GAAiBzmE,iBAAiB,QAAS,SAAAggB,GAG1C,GAFAA,EAAGq0B,kBAECqyB,EAAUnwE,MAAO,CACpB,GAAM6vE,GAAgBN,EAAQ3tC,QAAQ31B,cAAc,iBAEpD,aADA4jE,EAAcvyD,WAAa,6CAI5B,GAAM+yD,IACL1lE,KAAMwlE,EAAUnwE,MAChB85B,YAAas2C,EAAiBpwE,MAG/BiI,GAAWyE,IAAI,OAAQ,KAAM,UAAW,OAAQkR,IAAQyyD,GACtDjoE,KAAK,SAAAmX,GACL,MAAGwmC,GACK99C,EAAWyE,IAAI,OAAQ6S,EAAO6rD,QAAS,YAAa,UAAWrlB,GAE/DxmC,IAIRnX,KAAK,SAAAmX,GACFwmC,GACFiqB,EAAc,YAAazwD,GAE5BgwD,EAAQj6D,UAbVrN,SAeQ,SAAA2D,GAON,KAJA0kE,GAActR,MACbp9B,QAASmkB,EAAY,mCAAqC,0BAC1Dh+C,KAAM,UAED6D,MAMV,QAAS2kE,GAAkBC,EAAcC,EAAa1qB,GAErD99C,EAAWoiE,eAAeoG,GACxBroE,KAAK,SAAAsD,GAAA,MAAOD,OAAMC,GAClBm3C,YAAa,kBAEbz6C,KAAK,SAAA4D,GAAA,MAAOA,GAAIirB,SAChB7uB,KAAK,SAAAq6C,GAAA,MAAQysB,GAAYzsB,GAAQiZ,MAAO8U,MACxCpoE,KAAK,SAAAmnE,GACLG,EAAiCH,EAASxpB,GAC1CkqB,EAAsBV,EAASxpB,KAKlC,QAAS2qB,GAAuB3qB,EAAW4qB,GAC1CJ,EAAiB,eAAjB,gDAAiFxqB,EAAjF,gBAA0G4qB,EAAe5qB,GAG1H,QAAS6qB,GAAyB7qB,EAAW8qB,GAC5CN,EAAiB,gBAAjB,4DAA8FxqB,GAAY8qB,GAAiB,uBAAyB9qB,GAGrJ,QAAS+qB,KACRP,EAAiB,cAAe,4BAGjC,QAASQ,GAAYjpE,EAAcyX,EAAQ2M,GAC1C3M,EAAON,KAAOM,EAAON,QAErB,IAAM+xD,IACLC,0IAEG1xD,EAAOoiB,QAAU,oBAAsB,kBAF1C,OAEiEpiB,EAAON,KAAKtU,KAF7E,yBAGYuhB,EAHZ,8CAIAglD,uIAEG3xD,EAAOoiB,QAAU,wBAA0B,6BAF9C,oBAGYzV,EAHZ,kDAIAilD,2IAEG5xD,EAAOoiB,QAAP,+CACSzV,EADT,0CACyD,kCAG7D,OAAQ8kD,GAASpxE,eAAekI,GAAiBkpE,EAASlpE,GAAe,GAG1E,QAASspE,GAA0BhxC,EAAMt4B,EAAcyX,GACtD,MAAOtX,GAAWoiE,eAAX,SAAmCjqC,GACxCh4B,KAAK,SAAAipE,GAAA,OACLtpE,KAAM,UACNshB,QAAS0nD,EAAWjpE,EAAcyX,EAAQ8xD,MAI7C,QAASrB,GAAe7B,EAAa5uD,EAAQR,GAE5CkvD,GACCE,cACAK,WAAa5wD,KAAM2B,EAAO6rD,QAAS4D,KAAQzvD,EAAON,MAAQM,EAAON,KAAK+vD,OACtEjkE,QAASwU,EAAOoiB,SAGjB,IAAI2vC,GAAiB1oE,QAAQC,WAE7B,QAAQslE,GACP,IAAK,WACJ,GAAI/mE,EAAMvF,IAAI,oBAAsB0d,EAAOoiB,UAAY4vC,GAAgC,WAAXxyD,IAEtEyyD,EAAYC,MAAMC,qBAAuBF,EAAYC,MAAME,eAAiBpyD,EAAON,KAAKtU,KAE5F,MAAO1C,GAAWoiE,eAAX,yDAAmFv2C,mBAAmBvU,EAAON,KAAKtU,OACvHvC,KAAK,SAAAsD,GAAA,MAAOD,OAAMC,GAAOm3C,YAAa,kBACtCz6C,KAAK,SAAA4D,GAAA,MAAOA,GAAIirB,SAChB7uB,KAAK,SAAAq6C,GAAA,MAAQysB,GAAYzsB,GACzB93C,KAAM,cACN2kE,QAAQ,MAERlnE,KAAK,SAAAmnE,GAAA,MAAWiC,GAAYI,sBAAsBrC,KAP7CtnE,SAQC,iBAAM,OAIhB,MACD,KAAK,QACAb,EAAMvF,IAAI,cAAgB0d,EAAOoiB,UACpC2vC,EAAiBrpE,EAAW+C,OAAO,UAAW,QAC5C5C,KAAK,SAAAypE,GAAA,MAAgBA,GAAaxwC,OAAO,SAAAqiC,GAAA,OAASA,EAAKoO,eACvD1pE,KAAK,SAAAypE,GACL,MAAIA,GAAahrE,QAChB+pE,EAAwBrxD,EAAO6rD,UACvB/hD,QAAS,YAKrB,MACD,KAAK,YACJioD,EAAiBF,UAAiC7xD,EAAO4rD,QAAW,YAAa5rD,EACjF,MACD,KAAK,YAEmB,iBAAnBA,EAAO6rD,QACVoG,EAAYC,MAAMC,oBAAqB,EACV,2BAAnBnyD,EAAO6rD,UACjBoG,EAAYC,MAAME,eAAgB,GAKrCL,EACElpE,KAAK,SAAAsiE,GAAmC,GAAAqH,GAAArH,EAAjCrhD,UAAiC3nB,SAAAqwE,EAAvB,KAAuBA,EAAAC,EAAAtH,EAAjB3iE,OAAiBrG,SAAAswE,EAAV,KAAUA,CACnC3oD,IAGLinD,EAActR,MACbp9B,QAASvY,EACTthB,OACA+rD,UAAW,iCAMf,QAASme,GAAQxoD,GAChB,GAAM0kD,GAAcV,EAAqBhkD,EACzCkY,GAAQwsC,GAAe1kD,EAAGlK,OAAO2yD,OAASzoD,EAAGlK,OAAOuvB,UAGhC,cAAhBq/B,GACHqD,EAAYW,kBAGblE,GACCE,cACAK,SAAU7sC,EAAQwsC,GAClBpjE,OAAO,IAKT,QAASqnE,GAAiBC,GACzB,GAAMj2D,KAaN,OAXAi2D,GAAOvpD,QAAQ,SAAC+Q,GACf,GAAIA,EAAMlvB,KAAK2nE,WAAW,SAAU,CACnC,GAAM7yE,GAAMo6B,EAAMlvB,KAAK+D,MAAM,QAAQ7H,OACrCuV,GAAK4yD,KAAO5yD,EAAK4yD,SACjB5yD,EAAK4yD,KAAKvvE,GAAOo6B,EAAM75B,UAEE,WAAf65B,EAAM9xB,OAChBqU,EAAKyd,EAAMlvB,MAAQkvB,EAAM75B,SAIpBoc,EAGR,QAASm2D,GAAuBpE,GAC/B,MAAO,UAAU1kD,EAAInT,GACpBmT,EAAGq0B,gBAEH,IAAM00B,KAAyD,WAA7Bl8D,EAAGguB,QAAQta,gBAA8B1T,EAAG3L,OAAQ2L,EAAGtW,OACnFivE,EAAgBuD,EAA0Bl8D,EAAKA,EAAGrK,cAAc,UAChEi5D,EAAQsN,EAA0Bl8D,EAAGm8D,QAAQ,QAAUn8D,EACvDo8D,EAAeF,EAA0Bx0D,EAAG,SAAUknD,IAAS+J,EAErE,KAAIyD,EAAYC,KAAK,SAACnS,GAAD,MAAYA,GAAOh2D,aAAa,cAArD,CAIAkoE,EAAY5pD,QAAQ,SAAC03C,GAAD,MAAYA,GAAOn9C,aAAa,WAAY,KAEhE,IAAMyqD,GAA0D,SAA9CmB,EAAavkE,aAAa,gBAExCqU,QAEHA,GADGyzD,EAC8B,WAAvBvD,EAAajvE,MAAsB,SAAW,MAE9C8tE,EAAa,SAAW,KAGnC,IAAMvvE,GAAK2mE,EAAKx6D,aAAa4jE,EAAaH,IACpCpmE,EAAO6qE,EAAMzE,GACb0E,EAAe70D,EAAG,uBAAwBknD,GAC1C4N,EAAcN,GAA2BvD,GAA5Bj4D,QAAA,EAAAsgD,cAA6Cub,IAAgBA,EAE5Ez2D,EAAOg2D,EAAgBU,KAErB,MAAO,UAAU7oD,QAAQlL,IAAS,WACvC,GAAMosD,GAAUjG,EAAKx6D,aAAa,gBAErB,aAAT3C,GAAoB,WACvB,GAAMgrE,GAAax0E,EAAG0X,MAAM,KACtB+8D,EAAa52D,EAAKomD,SAASvsD,MAAM,KACjCJ,EAAQuG,EAAKzR,KAAKsL,MAAM,IAG1B88D,GAAWlsE,OAAS,IACvB0qE,GAAoB,EAGrB,IAAM0B,GAAiBF,EAAW91D,IAAI,SAACgpC,EAAW/7C,GACjD,GAAMgpE,GAAaxzE,OAAOwH,UAAWkV,GACpCzR,KAAMkL,EAAM3L,GACZs4D,SAAUwQ,EAAW9oE,IAEtB,OAAOjC,GAAW8W,GAAQo0D,EAAOhF,GAAchD,EAASgD,EAAapmE,EAAMk+C,EAAWitB,IAGvFtqE,SAAQ+U,IAAIs1D,GACV7qE,KAAK,iBAAMwlE,GAAaqB,EAAyB,QAAXlwD,KADxCnW,SAEQ,cACNR,KAAK,iBAAMmpE,IAAoB,OAGjCtpE,EAAW8W,GAAQo0D,EAAOhF,GAAchD,EAASgD,EAAapmE,EAAMxJ,EAAI6d,MAIzEnU,EAAW8W,GAAQovD,EAAapmE,EAAMxJ,EAAI6d,KAKtC,QAAS5U,GAAMmE,GACjB+a,IAGJA,GAAc,EACdtf,EAAQuE,EAAKvE,MAEbgsE,EAAsB,sBACpBhrE,KAAK,SAAAirE,GACAA,GAAeC,EAAkB1zE,eAAeyzE,IACrD/C,EAActR,MACbp9B,QAAS0xC,EAAkBD,GAC3BtrE,KAAM,YACNwrE,SAAU,MAIbH,EAAsB,sBACpBhrE,KAAK,SAAAirE,GACL,GAAmB,cAAfA,EAA4B,CAC/B,GAAMtqC,GAAUhqC,OAAOktB,SAAS+nC,SAASv0B,MAAM,6EAC3CsJ,IAAWA,EAAQliC,QACtB+pE,EAAwB7nC,EAAQ,IAAI,MAKpCp9B,GAAQA,EAAKpD,WACf,SAAU,QAAQugB,QAAQ,SAAA/J,GAC1Bi0C,EAAShyB,GAAG,SAAZ,eAAqCjiB,EAAU,SAAA0K,GAC9CA,EAAGq0B,iBACHwyB,EAActR,MACbp9B,QAAS0xC,EAAqBv0D,EAArB,QACT+0C,UAAW,mBAKd0f,IAEA9zE,OAAOiQ,KAAKu+D,GAAaplD,QAAQ,SAAAqlD,GAC5BlmE,EAAWzJ,OAAX,eAAiCo0E,EAAMzE,KAC1CxsC,EAAQwsC,GAAelmE,EAAWzJ,OAAX,eAAiCo0E,EAAMzE,IAE9DF,GACCE,cACAK,SAAU7sC,EAAQwsC,GAClBpjE,OAAO,IAIY,cAAhBojE,GACHqD,EAAYW,mBAIb1pE,SAAS2W,KAAK3V,iBAAd,aAA4C0kE,EAA5C,IAA2DyE,EAAMzE,GAAjE,QAAsF8D,GAGvFxpE,SAAS2W,KAAK3V,iBAAd,QAAuC0pE,EAAOhF,GAA9C,IAA8DA,EAA9D,IAA6EyE,EAAMzE,GAAnF,OAAuG,SAAA1kD,GAAA,MAAMumD,GAAcvC,EAAqBhkD,GAAKA,EAAGlK,OAAQmuD,EAAgBjkD,MAChLhhB,SAAS2W,KAAK3V,iBAAd,QAAuC0pE,EAAOhF,GAA9C,IAA8DA,EAA9D,IAA6EyE,EAAMzE,GAAnF,UAA0G,SAAA1kD,GAAA,MAAMumD,GAAcvC,EAAqBhkD,GAAKA,EAAGlK,OAAQmuD,EAAgBjkD,MACnLhhB,SAAS2W,KAAK3V,iBAAd,QAAuC0pE,EAAOhF,GAA9C,IAA8DA,EAA9D,IAA6EyE,EAAMzE,GAAnF,UAA0G,SAAA1kD,GAAA,MAAMumD,GAAcvC,EAAqBhkD,GAAKA,EAAGlK,OAAQmuD,EAAgBjkD,MAEnLupC,EAAShyB,GAAG,SAAUktC,EAAYC,GAAcoE,EAAsBpE,MAGvEnb,EAAShyB,GAAG,QAAS,kCAAmCuxC,EAAsB,cAG9Evf,EAAShyB,GAAG,QAAS,gCAAiC,SAAAvX,GACrDA,EAAGq0B,iBACH4yB,EAAsBjnD,EAAGlX,OAAO7H,aAAa,mBAAoB+e,EAAGlX,OAAO7H,aAAa,oBAGzFsoD,EAAShyB,GAAG,QAAS,+BAAgC,SAAAvX,GACpDA,EAAGq0B,iBACHgzB,QAKI,QAAS2C,GAAUn9D,EAAIo9D,GACxBA,GACJF,EAAiBl9D,GAGlB5W,OAAOiQ,KAAKu+D,GAAaplD,QAAQ,SAAAqlD,GAC3BxsC,EAAQwsC,IAIbF,GACCE,cACAK,SAAU7sC,EAAQwsC,GAClBpjE,OAAO,EACPie,QAAS1S,MAKL,QAASk9D,GAAkBl9D,GACjC,GAAMg6C,GAASh6C,GAAsB,MAAhBA,EAAGyT,UAAqBzT,GAAM0H,EAAG,mBAAoB1H,EAC1Eg6C,GAAMxnC,QAAQ,SAAAi5B,GACb95C,EAAWoiE,eAAetoB,EAAKr3C,aAAa,SAC1CtC,KAAK,SAAAipE,GAAA,MAAmBtvB,GAAK1+B,aAAa,OAAQguD,O7NoxfrD3xE,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIq3D,GAAsBn5D,EAAoB,KAE1Co5D,EAAsBz3D,EAAuBw3D,GAE7C1tD,EAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,EAEtCtL,G6Nx4femJ,O7Ny4ffnJ,E6Nxzfeo1E,W7Nyzffp1E,E6Ntyfem1E,kBAvhBhB,IAAMzF,GAAc7vE,EAAQ,KACtBoyE,EAAgBpyE,EAAQ,KACxBsxE,EAAUtxE,EAAQ,KAClB+J,EAAa/J,EAAQ,KACrBg9C,EAAWh9C,EAAQ,KAEnB80D,EAAW,GAAI9X,GAASzyC,SAAS2W,MACjCg0D,EAAwBl1E,EAAQ,KAChCszE,EAActzE,EAAQ,KACtB0f,EAAO1f,EAAQ,IAAY0f,KAC3BI,EAAK9f,EAAQ,IAAY8f,GAEzB21D,EAAe,wEACfC,EAAa,SAEfxsE,SACAu6B,KACAjb,SACA6qD,GAAoB,EAElBqB,GACL1B,MAAO;AACPD,SAAU,UACV4C,UAAW,aACX1C,UAAW,WAGNgC,GACLjC,MAAO,OACPD,SAAU,OACV4C,UAAW,OACX1C,UAAW,QAGNjD,GACLgD,MAAO,yBACPD,SAAU,0BACV4C,UAAW,0BACX1C,UAAW,8BAGN7C,GACL4C,MAAO,kBACPD,SAAU,kBACV4C,UAAW,uBACX1C,UAAW,mBAGNmC,GACLQ,8BAA+BH,EAA/B,0DAAqGC,EAArG,+DACAG,4BAA6BJ,EAA7B,0DAAmGC,EAAnG,+DACAI,MAAO,0E7Nu0hBF,SAAS11E,EAAQD,GAEtB,Y8N93hBDC,GAAOD,SACN2vE,YAAa,SAAUzrB,EAAK0xB,GAE3B,GAAMC,GAAY3xB,EAAI73C,aAAa,cAC7BypE,EAAqB5xB,EAAI73C,aAAa,uBAExCwpE,KACH3xB,EAAIl/B,aAAa,aAAc8wD,GAC/B5xB,EAAIl/B,aAAa,QAAS8wD,GAC1B5xB,EAAIl/B,aAAa,uBAAwB6wD,GAE1C,IAAMj9C,GAAOsrB,EAAI/3B,aAAe+3B,EAAI93B,SAEpC,IAAIwM,EAAM,CACT,GAAMm9C,GAAgB7xB,EAAI73C,aAAa,wBAA0BypE,CACjE5xB,GAAI/3B,YAAc4pD,EAClB7xB,EAAIl/B,aAAa,sBAAuB4T,GAGzC,GAAM62C,GAAiD,SAArCvrB,EAAI73C,aAAa,eAanC,OAXKupE,IACJ1xB,EAAIl/B,aAAa,gBAAiByqD,GAGnCvrB,EAAIh5C,cAAc,GAAIC,aAAY,wBACjC+V,QACCxU,MAAO+iE,GAER5uD,SAAS,KAGHqjC,K9Ns4hBH,SAASjkD,EAAQD,EAASH,GAE/B,Y+Nx6hBDI,GAAOD,QAAUH,EAAQ,M/N86hBnB,SAASI,EAAQD,EAASH,GgO96hBhCI,EAAAD,QAAAH,EAAA,MhOo7hBM,SAASI,EAAQD,EAASH,GAE/B,YAMA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GiOj5hBxF,QAAS0/D,GAAMr4D,GAEd,GADK0tE,GAAiB7sE,IAClBmF,EAAM9F,OAAS,GAAK8F,EAAMA,EAAM9F,OAAS,GAAGytE,iBAAmB3tE,EAAQi7B,QAAS,CACnF,GAAI2yC,GAAa5nE,EAAMA,EAAM9F,OAAS,EACtC0X,cAAag2D,EAAWl2D,SACxBk2D,EAAWl2D,QAAUlf,WAAWo1E,EAAWplE,KAAK3I,KAAK+tE,GAAaC,OAElE7nE,GAAM9E,KAAK,GAAI4sE,GAAO9tE,IAIxB,QAASa,KACJ6sE,IAEJt3C,EAAYt0B,SAASqL,cAAc,OACnCipB,EAAUzf,UAAa,iBACvB7U,SAAS2W,KAAKlK,YAAY6nB,GAC1Bt0B,SAASgB,iBAAiB,qBAAsBirE,GAAW,GAC3DL,GAAiB,GAGlB,QAASM,KACRhoE,EAAMmc,QAAQ,SAAAkQ,GAAA,MAAQA,GAAK7pB,SAC3BxC,EAAM9F,OAAS,EACfk2B,EAAU/Y,WAAWuB,YAAYwX,GACjCt0B,SAASwa,oBAAoB,qBAAsByxD,GAAW,GAC9DL,GAAiB,EjOm3hBjB,GAAIpvE,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GiO17hBzCujE,EAAWtqE,EAAQ,KACnBs2E,EAAkB,IAElB7nE,KACA+nE,EAAY,SAAChhE,GAAD,MAAOsrD,GAAKtrD,EAAE6L,SAC5B80D,GAAiB,EACjBt3C,SAEE03C,EjOg8hBQ,WiO97hBb,QAAAA,GAAa9tE,IAAS,EAAAzB,cAAAkB,KAAAquE,GAErB9tE,EAAQmtD,UAAYntD,EAAQmtD,WAAR,gBAAqCntD,EAAQoB,KAEjE3B,KAAKwuE,OAASnsE,SAASqL,cAAc,OACrC1N,KAAKwuE,OAAO1/D,YAAYszD,EAAS7hE,IACjCP,KAAKwuE,OAAO3oE,cAAc,UAAUq1D,QAAUl7D,KAAK+I,KAAK3I,KAAKJ,KAE7D,IAAMs6C,GAAa3jB,EAAU2jB,UAC7B3jB,GAAUyI,aAAap/B,KAAKwuE,OAAQl0B,GAEZ,IAArB/5C,EAAQ4sE,WACVntE,KAAKiY,QAAUlf,WAAWiH,KAAK+I,KAAK3I,KAAKJ,MAAOO,EAAQ4sE,UAAYiB,IAGrEpuE,KAAKkuE,eAAiB3tE,EAAQi7B,QjOk9hB9B,MAdA6yC,GAAO90E,UiOj8hBRwP,KjOi8hByB,WiOh8hBxBoP,aAAanY,KAAKiY,SAClBjY,KAAKwuE,OAAO5wD,WAAWuB,YAAYnf,KAAKwuE,OACxC,IAAM/mE,GAAQlB,EAAMsd,QAAQ7jB,KACxByH,OACHlB,EAAM+nB,OAAO7mB,EAAO,GAErBzH,KAAKyuE,kCjOo8hBLJ,EAAO90E,UiOj8hBRk1E,+BjOi8hBmD,WiOh8hBlDpsE,SAASc,cAAc,GAAIC,aAAY,yBjOo8hBhCirE,IiOn6hBTn2E,GAAOD,SACNmJ,KAAMA,EACNw3D,KAAMA,EACN2V,SAAUA,IjO48hBL,SAASr2E,EAAQD,GAEtB,YkOzhiBDC,GAAOD,QAAU,SAACsI,GAEjB,GAAMmuE,GAAWrsE,SAASqL,cAAc,MACxCghE,GAASx3D,UAAT,yCAA6D3W,EAAQoB,KAAOpB,EAAQoB,KAAO,WAC3F+sE,EAASzxD,aAAa,OAAQ,SAC9ByxD,EAASzxD,aAAa,iBAAkB1c,EAAQmtD,UAEhD,IAAMihB,GAAmBtsE,SAASqL,cAAc,MAGhD,IAFAihE,EAAiBz3D,UAAY,kCAEzB3W,EAAQ+0D,MAAO,CAClB,GAAMsZ,GAAUvsE,SAASqL,cAAc,KACvCkhE,GAAQ13D,UAAY,wBACpB03D,EAAQtqD,UAAY/jB,EAAQ+0D,MAC5BqZ,EAAiB7/D,YAAY8/D,GAG9B,GAAIruE,EAAQi7B,QAAS,CACpB,GAAMqzC,GAAYxsE,SAASqL,cAAc,MACzCmhE,GAAU33D,UAAY,0BACtB23D,EAAUvqD,UAAY/jB,EAAQi7B,QAC9BmzC,EAAiB7/D,YAAY+/D,GAG9B,GAAMpH,GAAWplE,SAASqL,cAAc,SAQxC,OAPA+5D,GAASvwD,UAAY,wBACrBuwD,EAASxqD,aAAa,iBAAkB,SACxCwqD,EAASnjD,UAAY,QAErBoqD,EAAS5/D,YAAY6/D,GACrBD,EAAS5/D,YAAY24D,GAEdiH,IlOgiiBF,SAASx2E,EAAQD,EAASH,GAE/B,YmOlkiBDI,GAAOD,QAAUH,EAAQ,KACzBI,EAAOD,QAAQ+6D,gBAAiB,GnOwkiB1B,SAAS96D,EAAQD,EAASH,GoOzkiBhCI,EAAAD,QAAAH,EAAA,MpO+kiBM,SAASI,EAAQD,EAASH,GAE/B,YqOjliBD,IAAMg3E,GAAWh3E,EAAQ,KACnBu+D,EAAe,QAAfA,KACLyY,EAAS1tE,OACTiB,SAASwa,oBAAoB,qBAAsBw5C,GAGpDh0D,UAASgB,iBAAiB,qBAAsBgzD,GAChDn+D,EAAOD,QAAU62E,GrOuliBX,SAAS52E,EAAQD,EAASH,GAE/B,YsOhmiBD,IAAMg9C,GAAWh9C,EAAQ,KACnB2sC,EAAW3sC,EAAQ,IACnBi3E,EAAUj3E,EAAQ,KAClBo+B,EAAQp+B,EAAQ,KAChBk3E,KAEAC,EAAe,SAAS1pE,GAM7B,IALIA,EAAK2pE,SAAa3pE,EAAK2pE,kBAAmBhc,eAC7C3tD,EAAK2pE,QAAU7sE,SAASwD,cAAcN,EAAK2pE,UAIxC3pE,EAAK8jE,WAAa9jE,EAAK8jE,QAAQ/T,QAAU/vD,EAAK8jE,QAAQ/T,MAAM32B,QAC/D,KAAM,IAAItd,OAAM,0EAQjB,IAJK9b,EAAK4pE,OAA+B,mBAAf5pE,GAAK6pE,QAC9B7pE,EAAK6pE,OAAQ,GAGV7pE,EAAK8pE,SAAW9pE,EAAK8jE,SAAW9jE,EAAK8jE,QAAQH,OAChD,KAAM,IAAI7nD,OAAM,kEAGjB,IAAI9b,EAAK4pE,MAAO,CAWf,GATK5pE,EAAK4pE,MAAMpxB,WACfx4C,EAAK4pE,MAAMpxB,SAAW,QAInBx4C,EAAK6pE,QACR7pE,EAAK6pE,OAAQ,GAGc,SAAxB7pE,EAAK4pE,MAAMpxB,UAA+C,UAAxBx4C,EAAK4pE,MAAMpxB,UAAgD,QAAxBx4C,EAAK4pE,MAAMpxB,UAA8C,WAAxBx4C,EAAK4pE,MAAMpxB,SACpH,KAAM,IAAI18B,OAAM,oGAIjB,KAA6B,QAAxB9b,EAAK4pE,MAAMpxB,UAA8C,WAAxBx4C,EAAK4pE,MAAMpxB,WAA2Bx4C,EAAK8jE,SAAW9jE,EAAK8jE,QAAQH,OACxG,KAAM,IAAI7nD,OAAM,iIAIjB,IAAK9b,EAAK4pE,MAAMhjE,OAMH5G,EAAK4pE,MAAMhjE,iBAAkB+mD,eACzC3tD,EAAK4pE,MAAMhjE,OAAS9J,SAASwD,cAAcN,EAAK4pE,MAAMhjE,aAP/B,CACvB,IAAI5G,EAAK2pE,QAGR,KAAM,IAAI7tD,OAAM,yHAFhB9b,GAAK4pE,MAAMhjE,OAAS5G,EAAK2pE,SAS5B,MAAO3pE,IAGF+pE,EAAwB,SAASJ,GACtC,GAAI3pE,KAYJ,OAVI2pE,aAAmBhc,eACtB1hD,MAAMjY,UAAUmpB,QAAQrqB,KAAK62E,EAAQ90C,WAAY,SAASuU,GACzD,GAA4C,IAAxCA,EAAKpqC,KAAKsf,QAAQ,kBAAyB,CAE9C,GAAMxqB,GAAMs1C,EAAKpqC,KAAKkT,QAAQ,kBAAmB,GACjDlS,GAAO2wB,EAAMq5C,eAAel2E,EAAKs1C,EAAK/0C,MAAO2L,MAG/CA,EAAK2pE,QAAUA,GAET3pE,GAGFiqE,EAAsB,SAASr3E,EAAIkrB,GACxCA,EAAGosD,iBACH,IAAMtG,GAAU6F,EAAS72E,EACrBgxE,KACCA,EAAQuG,WAAY,EACvBvG,EAAQj6D,QAERi6D,EAAQn6D,SAKLo6D,EAAU,SAASjxE,EAAIoN,GAC5Bk/B,EAASP,SAAS,UAClBlkC,KAAK0vE,SAAU,EACf1vE,KAAK7H,GAAKA,CAEV,KACC6H,KAAKuF,KAAO0pE,EAAa1pE,GACxB,MAAM+H,GAIP,KAHAtN,MAAK4Y,UAAU,MAAO,WACrBpS,MAAO8G,IAEFA,EAGP,IAAKtN,KAAKuF,KAAM,CACf,GAAMoqE,GAAa,GAAItuD,OAAM,wDAI7B,MAHArhB,MAAK4Y,UAAU,MAAO,WACrBpS,MAAOmpE,IAEFA,EAEH3vE,KAAKuF,KAAK2pE,SACblvE,KAAKuF,KAAK2pE,QAAQ7rE,iBAAiB,QAASmsE,EAAoBpvE,KAAKJ,KAAKuF,KAAK2pE,QAAS/2E,IAAK,GAC7F6H,KAAK4iB,QAAU5iB,KAAKuF,KAAK4pE,MAAQJ,EAAQa,gBAAgB5vE,KAAKuF,KAAK4pE,MAAMhjE,QAAU4iE,EAAQa,gBAAgB5vE,KAAKuF,KAAK2pE,UAErHlvE,KAAK4iB,QAAU5iB,KAAKuF,KAAK4pE,MAAQJ,EAAQa,gBAAgB5vE,KAAKuF,KAAK4pE,MAAMhjE,QAAU9J,SAAS2W,KAG7FhZ,KAAK6vE,WACJC,IAAK,GAAIh7B,GACTjhC,KAAM,GAAIihC,GACVlyB,QAAS,GAAIkyB,IAIdk6B,EAAS72E,GAAM6H,KAGhBopE,GAAQ7vE,UAAUyV,KAAO,WAAW,GAAApO,GAAAZ,IAC/BA,MAAKuF,KAAK2pE,SACblvE,KAAKuF,KAAK2pE,QAAQjyD,aAAa,eAAgB,QAG3Cjd,KAAKw7B,QAUTx7B,KAAK44D,QAVa,WAClB,GAAMuQ,IACNvoE,GAAKmvE,YAAY,SAAS1zB,GAEzB,GADA8sB,EAAQ5jE,KAAK82C,KAAOA,GACf8sB,EAAQ5jE,KAAK82C,KACjB,KAAM,IAAIh7B,OAAM,iGAEjB8nD,GAAQ/6B,eAOXg7B,EAAQ7vE,UAAUw2E,YAAc,SAAShqE,IACnC/F,KAAKuF,KAAK82C,MAAQr8C,KAAKuF,KAAKmB,IAC5B,mBAAmBtE,KAAKpC,KAAKuF,KAAKmB,KACrCwvB,EAAM85C,mBAAmBhwE,KAAKuF,KAAKmB,IAAK,SAAS21C,GAChDt2C,EAASs2C,KAGVnmB,EAAM+5C,uBAAuB5tE,SAASwD,cAAc7F,KAAKuF,KAAKmB,KAAM,SAAS21C,GAC5Et2C,EAASs2C,KAIXt2C,EAAS/F,KAAKuF,KAAK82C,OAIrB+sB,EAAQ7vE,UAAU60C,OAAS,WAC1B,GAAM8hC,GAAY7tE,SAASqL,cAAc,MASzC,IARAwiE,EAAUh5D,UAAY,YACtBg5D,EAAU7pE,UAAUC,IAAI,cAAgBtG,KAAK7H,GAAGsf,QAAQ,IAAK,MAC7Dy4D,EAAUjzD,aAAa,OAAQ,UAC3Bjd,KAAKuF,KAAK4qE,SACbD,EAAUthE,MAAM6vC,OAASz+C,KAAKuF,KAAK4qE,QAEpCnwE,KAAK26D,QAAUuV,EAEXlwE,KAAKuF,KAAK8jE,QAAS,CACtB,GAAMA,GAAUhnE,SAASqL,cAAc,UACjC0iE,EAAYpwE,KAAKuF,KAAK8jE,QAAQ/T,MAAM79C,QAAQ,IAAK,KAAKmM,aAC5DylD,GAAQhjE,UAAUC,IAAI,sBACtB+iE,EAAQpsD,aAAa,KAAMmzD,GAC3BF,EAAUjzD,aAAa,kBAAmBmzD,GAEtCpwE,KAAKuF,KAAK8jE,QAAQH,QACrBG,EAAQhjE,UAAUC,IAAI,6BAGvB,IAAM8zD,GAAS/3D,SAASqL,cAAc,IACtC0sD,GAAOljD,UAAY,mBACnBkjD,EAAOn9C,aAAa,OAAQ,UAC5Bm9C,EAAOn9C,aAAa,WAAY,KAChCm9C,EAAOn9C,aAAa,OAAQ,SAC5Bm9C,EAAOn9C,aAAa,aAAc,SAClCm9C,EAAOn9C,aAAa,QAAS,QAE7B,IAAMq4C,GAAQjzD,SAASqL,cAAc,OACrC4nD,GAAMr4C,aAAa,OAAQ,WAC3Bq4C,EAAMp+C,UAAY,mBAClBo+C,EAAMhxC,UAAYtkB,KAAKuF,KAAK8jE,QAAQ/T,MAEpC+T,EAAQv6D,YAAYsrD,GACpBiP,EAAQv6D,YAAYwmD,GACpB4a,EAAUphE,YAAYu6D,GAGvB,GAAM7tC,GAAUn5B,SAASqL,cAAc,UACvC8tB,GAAQtkB,UAAY,qBACpBg5D,EAAUphE,YAAY0sB,GAEtBx7B,KAAKw7B,QAAUA,EAEXx7B,KAAKuF,KAAK8pE,SACba,EAAU7pE,UAAUC,IAAI,sBAGzBtG,KAAK44D,QAGNwQ,EAAQ7vE,UAAUq/D,KAAO,WACxB,GAAI54D,KAAKuF,KAAK6pE,MAAO,CACpBpvE,KAAK26D,QAAQt0D,UAAUC,IAAI,mBAC3B,IAAM+pE,GAAShuE,SAASqL,cAAc,MACtC2iE,GAAOn5D,UAAY,mBACnBlX,KAAKqwE,OAASA,EACdhuE,SAAS2W,KAAKlK,YAAYuhE,GAG3BrwE,KAAK6vE,UAAUC,IAAIv5B,KAAKl0C,SAAS2W,MACjChZ,KAAK6vE,UAAUh8D,KAAK0iC,KAAKv2C,KAAK26D,SAC9B36D,KAAK6vE,UAAUjtD,QAAQ2zB,KAAKv2C,KAAK4iB,SAEjC5iB,KAAKswE,aAAetwE,KAAKkP,MAAM9O,KAAKJ,MACpCA,KAAKuwE,sBAAwBvwE,KAAKwwE,eAAepwE,KAAKJ,MACtDA,KAAK6vE,UAAUC,IAAIl1C,GAAG,mBAAoB,OAAQ56B,KAAKuwE,uBACvDvwE,KAAKywE,uBAAyBzwE,KAAK0wE,gBAAgBtwE,KAAKJ,MACxDA,KAAK6vE,UAAUjtD,QAAQgY,GAAG,cAAe56B,KAAKywE,wBAE1CzwE,KAAKuF,KAAK8jE,UACbrpE,KAAK6vE,UAAUh8D,KAAK+mB,GAAG,QAAS,oBAAqB56B,KAAKswE,cAC1DtwE,KAAK6vE,UAAUh8D,KAAK+mB,GAAG,WAAY,oBAAqB56B,KAAKswE,eAG9DtwE,KAAK2wE,4BAA8B3wE,KAAK4wE,qBAAqBxwE,KAAKJ,MAClEA,KAAK6vE,UAAUC,IAAIl1C,GAAG,QAAS,OAAQ56B,KAAK2wE,6BAC5C3wE,KAAK6vE,UAAUC,IAAIl1C,GAAG,WAAY,OAAQ56B,KAAK2wE,6BAE/C3wE,KAAK6wE,0BAA4B7wE,KAAK8wE,mBAAmB1wE,KAAKJ,MAC9DA,KAAK6vE,UAAUC,IAAIl1C,GAAG,QAAS56B,KAAK6wE,2BAEpC7wE,KAAK4Y,UAAU,MAAO,WACtB5Y,KAAK4iB,QAAQ9T,YAAY9O,KAAK26D,SAG9B36D,KAAK26D,QAAQ19C,aAAa,WAAY,KACtCjd,KAAK26D,QAAQ/rD,MAAMmiE,QAAU,CAM7B,IAAM5H,GAAUnpE,IAChBrH,QAAOylD,sBAAsB,WACvB+qB,EAAQ3tC,QAAQlX,YAEa,gBAAtB6kD,GAAQ5jE,KAAK82C,KACvB8sB,EAAQ3tC,QAAQlX,UAAY6kD,EAAQ5jE,KAAK82C,KAEzC8sB,EAAQ3tC,QAAQ1sB,YAAYq6D,EAAQ5jE,KAAK82C,OAG3C8sB,EAAQ3rD,MAAQ2rD,EAAQrjC,WACxBqjC,EAAQ1lC,OAAS0lC,EAAQzjC,YACzByjC,EAAQ6H,gBAAgBvsC,EAASb,WACjCulC,EAAQuG,SAAU,EAClBvG,EAAQxO,QAAQnD,QAChB2R,EAAQvwD,UAAU,SAGlBuwD,EAAQvwD,UAAU,QAAS,aAC1BskC,SAAU,UACVvkC,OAAQ,OACRs4D,WAAY9H,EAAQhxE,QAKvBixE,EAAQ7vE,UAAU2V,MAAQ,WA0BzB,MAzBAlP,MAAK6vE,UAAUC,IAAI1sD,UACnBpjB,KAAK6vE,UAAUh8D,KAAKuP,UACpBpjB,KAAK6vE,UAAUjtD,QAAQQ,UAEvBqhB,EAASgB,gBAAgB,UAEzBzlC,KAAK4Y,UAAU,WACf5Y,KAAK4Y,UAAU,QAAS,aACvBskC,SAAU,UACVvkC,OAAQ,QACRs4D,WAAYjxE,KAAK7H,KAGlB6H,KAAK4iB,QAAQzD,YAAYnf,KAAK26D,SAC1B36D,KAAKuF,KAAK6pE,OACbpvE,KAAKqwE,OAAOzyD,WAAWuB,YAAYnf,KAAKqwE,QAIrCrwE,KAAKuF,KAAK2pE,UACblvE,KAAKuF,KAAK2pE,QAAQ1X,QAClBx3D,KAAKuF,KAAK2pE,QAAQjyD,aAAa,eAAgB,UAEhDjd,KAAK0vE,SAAU,EACf1vE,KAAK4Y,UAAU,QAAS,YACjB,GAGRwwD,EAAQ7vE,UAAUq3E,qBAAuB,SAASvtD,GAC5CrjB,KAAK26D,QAAQtB,SAASh2C,EAAGlX,SAAYnM,KAAKuF,KAAK6pE,QAAUpvE,KAAKuF,KAAK2pE,SAAYlvE,KAAKuF,KAAK2pE,QAAQ7V,SAASh2C,EAAGlX,SACjHnM,KAAKkP,SAIPk6D,EAAQ7vE,UAAUu3E,mBAAqB,SAASztD,GAC5B,KAAfA,EAAG81C,SACNn5D,KAAKkP,SAIPk6D,EAAQ7vE,UAAUm3E,gBAAkB,SAASrtD,GACvCA,EAAGlK,QAAUkK,EAAGlK,OAAOjJ,KAAOlQ,MAClCA,KAAKkP,SAIPk6D,EAAQ7vE,UAAUi3E,eAAiB,SAASntD,GACtCrjB,KAAK26D,QAAQtB,SAASh2C,EAAGlX,SAC7BnM,KAAKgxE,gBAAgB3tD,EAAGlK,OAAOsrB,WAIjC2kC,EAAQ7vE,UAAUqf,UAAY,SAASoN,EAAW0S,EAAWvf,GAC5Duf,EAAYA,GAAa,UACzB,IAAMvsB,GAAuB,YAAdusB,EAA0B14B,KAAK4iB,QAAU5iB,KAAK26D,SAAWt4D,SAAS2W,IAEjFG,GAASA,MAES,cAAduf,IACHvf,EAAOjJ,GAAKlQ,MAGbmM,EAAOhJ,cAAc,GAAIC,aAAYs1B,EAAY,IAAM1S,GACtD7M,OAAQA,EAERL,QAAuB,YAAd4f,MAIX0wC,EAAQ7vE,UAAU23E,QAAU,SAASC,EAAWznC,GAC/C,GAAM0nC,GAAqB,UAAdD,EAAwB,OAAS,KAE9C,IAAIznC,GAAQ1pC,KAAKmxE,IAIhB,GAHAnxE,KAAK26D,QAAQt0D,UAAUC,IAAI,mBAAqB6qE,GAChDnxE,KAAK26D,QAAQ/rD,MAAMwiE,GAAQ,IAC3BpxE,KAAK26D,QAAQ/rD,MAAM,SAAWsnB,EAAM2J,WAAWuxC,IAAS,EACtC,WAAdD,EAAwB,CAI3B,GAAME,GAAerxE,KAAK26D,QAAQ1c,aAAej+C,KAAK26D,QAAQ/0B,YAC9D5lC,MAAKw7B,QAAQ5sB,MAAM60B,OAASzjC,KAAK26D,QAAQ1c,cAAgBj+C,KAAKuF,KAAK8jE,QAAUrpE,KAAK26D,QAAQ90D,cAAc,UAAUo4C,aAAe,GAAKozB,EAAe,UAGpI,WAAdF,IAEHnxE,KAAKw7B,QAAQ5sB,MAAM60B,OAAS,MAE7BzjC,KAAK26D,QAAQt0D,UAAU60B,OAAO,mBAAqBi2C,GAC9CnxE,KAAKuF,KAAK4pE,QACdnvE,KAAK26D,QAAQ/rD,MAAM,SAAWsnB,EAAM2J,WAAWuxC,MAAWpxE,KAAK26D,QAAQ,SAAWzkC,EAAM2J,WAAWsxC,IAAY,GAAK,MAMrHnxE,KAAK26D,QAAQ/rD,MAAMwiE,GAAQ,OAI7BhI,EAAQ7vE,UAAUy3E,gBAAkB,SAAStnC,GAS5C,GARA1pC,KAAKkxE,QAAQ,QAASxnC,EAAKlsB,OAC3Bxd,KAAKkxE,QAAQ,SAAUxnC,EAAKjG,QAE5BzjC,KAAK26D,QAAQt0D,UAAU60B,OAAO,wBAC9Bl7B,KAAK26D,QAAQt0D,UAAU60B,OAAO,2BAC9Bl7B,KAAK26D,QAAQt0D,UAAU60B,OAAO,yBAC9Bl7B,KAAK26D,QAAQt0D,UAAU60B,OAAO,0BAE1Bl7B,KAAKuF,KAAK4pE,QAAUnvE,KAAKsxE,QAAS,CACrCtxE,KAAKuF,KAAK4pE,MAAMoC,gBAAkBvxE,KAAKwxE,wBAAwBxxE,KAAKuF,KAAK4pE,MAAMpxB,UAC/E/9C,KAAK26D,QAAQt0D,UAAUC,IAAI,oBAAsBtG,KAAKuF,KAAK4pE,MAAMoC,gBAEjE,IAAMH,GAA4C,SAApCpxE,KAAKuF,KAAK4pE,MAAMoC,iBAAkE,UAApCvxE,KAAKuF,KAAK4pE,MAAMoC,gBAA+B,OAAS,MAC9GE,EAAoD,SAApCzxE,KAAKuF,KAAK4pE,MAAMoC,iBAAkE,UAApCvxE,KAAKuF,KAAK4pE,MAAMoC,gBAA+B,MAAQ,OACrHJ,EAAiD,SAApCnxE,KAAKuF,KAAK4pE,MAAMoC,iBAAkE,UAApCvxE,KAAKuF,KAAK4pE,MAAMoC,gBAA+B,SAAW,QAEvH7rB,EAAS,EAEPgsB,EAAY,GACZC,EAAmBz7C,EAAM07C,cAAc5xE,KAAKuF,KAAK4pE,MAAMhjE,QACvD0lE,EAAiBF,EAAiBR,EACxC,QAAQnxE,KAAKuF,KAAK4pE,MAAMoC,iBACvB,IAAK,OACJ7rB,EAASisB,EAAiBpsC,KAAOosC,EAAiBn0D,MAAQk0D,CAC1D,MACD,KAAK,QACJhsB,EAASisB,EAAiBpsC,KAAOvlC,KAAKwd,MAAQk0D,CAC9C,MACD,KAAK,MACJhsB,EAASisB,EAAiB1uC,IAAM0uC,EAAiBluC,OAASiuC,CAC1D,MACD,KAAK,SACJhsB,EAASisB,EAAiB1uC,IAAMjjC,KAAKyjC,OAASiuC,EAIhD1xE,KAAK26D,QAAQ/rD,MAAMwiE,GAAQ1rB,EAAS,KAIpC1lD,KAAK26D,QAAQ/rD,MAAM6iE,GAAgBE,EAAiBF,GAAiBI,EAAiB,EAAM7xE,KAAKmxE,GAAa,EAAK,OAIrH/H,EAAQ7vE,UAAUi4E,wBAA0B,SAASzzB,GACpD,GAAM4zB,GAAmB3xE,KAAKuF,KAAK4pE,MAAMhjE,OAAO0xC,wBAE1C6zB,EAAY,GACZI,EAAe9xE,KAAK26D,QAAQ9c,wBAAwBrgC,MAAQk0D,EAC5DK,EAAgB/xE,KAAK26D,QAAQ9c,wBAAwBpa,OAASiuC,CAGpE,QAAQ1xE,KAAKuF,KAAK4pE,MAAMpxB,UACvB,IAAK,OACA4zB,EAAiBK,MAAQF,GAAgBn5E,OAAOqtC,YAClD2rC,EAAiBpsC,KAAOusC,EAAe,IAExC/zB,EAAW,QAEZ,MACD,KAAK,QACA4zB,EAAiBpsC,KAAOusC,GAAgB,GAC1CH,EAAiBK,MAAQF,EAAen5E,OAAOqtC,aAEhD+X,EAAW,OAEZ,MACD,KAAK,MACA4zB,EAAiBM,OAASF,GAAiBp5E,OAAOktC,aACpD8rC,EAAiB1uC,IAAM8uC,EAAgBL,EAAY,IAEpD3zB,EAAW,SAEZ,MACD,KAAK,SACA4zB,EAAiB1uC,IAAM8uC,GAAiB,GAC1CJ,EAAiBM,OAASF,EAAgBp5E,OAAOktC,cAElDkY,EAAW,OAId,MAAOA,IAGRqrB,EAAQ7vE,UAAU+3E,MAAQ,SAASH,GAClC,MAAOnxE,MAAK26D,QAAQt0D,UAAUgzD,SAAS,mBAAqB8X,IAG7D/H,EAAQ7vE,UAAU6pB,QAAU,WACvBpjB,KAAK0vE,WAAY,GACpB1vE,KAAKkP,QAEFlP,KAAKuF,KAAK2pE,SACblvE,KAAKuF,KAAK2pE,QAAQryD,oBAAoB,QAAS2yD,SAEzCR,GAAShvE,KAAK7H,KAGtBixE,EAAQ7vE,UAAUmsC,UAAY,WAC7B,GAAM2rC,GAAerxE,KAAK26D,QAAQ1c,aAAej+C,KAAK26D,QAAQ/0B,YAC9D,OAAO5lC,MAAKw7B,QAAQ8J,cAAgBtlC,KAAKuF,KAAK8jE,QAAUrpE,KAAK26D,QAAQ90D,cAAc,UAAUo4C,aAAe,GAAKozB,GAGlHjI,EAAQ7vE,UAAUusC,SAAW,WAC5B,GAAMosC,GAAclyE,KAAK26D,QAAQp9C,YAAcvd,KAAK26D,QAAQ50B,WAC5D,OAAO/lC,MAAKw7B,QAAQ9d,YAAcw0D,GAGnC9I,EAAQhoE,KAAO,SAAS8O,GAClBA,IACJA,EAAK7N,SAAS2W,MAET9I,YAAcgjD,eACnBhjD,EAAK7N,SAASwD,cAAcqK,GAI7B,KAAK,GAFCiiE,GAAWjiE,EAAG2H,iBAAiB,sBAC/Bu6D,KACGpzD,EAAI,EAAGA,EAAImzD,EAAS1xE,OAAQue,IAE/BgwD,EAASmD,EAASnzD,GAAG1a,aAAa,uBACtC8tE,EAAc3wE,KAAK,GAAI2nE,GAAQ+I,EAASnzD,GAAG1a,aAAa,qBAAsBgrE,EAAsB6C,EAASnzD,KAI/G,OAAOozD,IAGRhJ,EAAQhmD,QAAU,WACjB,GAAMivD,GAAa/4E,OAAOiQ,KAAKylE,EAC/BqD,GAAW3vD,QAAQ,SAASvqB,GAC3B62E,EAAS72E,GAAIirB,aAIfgmD,EAAQkJ,YAAc,WACrB,MAAOtD,IAGR92E,EAAOD,QAAUmxE,GtOqmiBX,SAASlxE,EAAQD,EAASH,GuO/mjBhCI,EAAAD,QAAAH,EAAA,MvOqnjBM,SAASI,EAAQD,EAASH,GwOrnjBhC,YAEA,IAAIy6E,GAAMz6E,EAAQ,IAElBI,GAAOD,SACN23E,gBAAiB,SAAU1/D,GAC1B,MAAOqiE,GAAIC,gBAAgBtiE,EAAI,uBAAyB7N,SAAS2W,QxO6njB7D,SAAS9gB,EAAQD,EAASH,GyOnojBhCI,EAAAD,QAAAH,EAAA,MzOyojBM,SAASI,EAAQD,EAASH,G0OxojBhC,Y1OipjBC,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G0O/ojBxF,QAASs5E,GAAgBtiE,EAAIimC,GAC5B,KAAOjmC,GAAI,CACV,GAAIA,EAAGyyB,QAAQwT,GACd,MAAOjmC,EAEPA,GAAKA,EAAG+T,cAGV,OAAO,EAGR,QAASwuD,GAASviE,GACjB,GAAIpM,GAAI,CACR,IAAIoM,GAAoB,YAAd,mBAAOA,GAAP,eAAA1M,cAAO0M,KAAmC,IAAhBA,EAAG6tB,SAAgB,CACtD,KAAO7tB,EAAGwiE,iBACTxiE,EAAKA,EAAGwiE,gBACY,IAAhBxiE,EAAG6tB,YACJj6B,CAGJ,OAAOA,I1OunjBR,GAAIP,GAAWzL,EAAoB,GAE/B0L,EAAW/J,EAAuB8J,E0OrnjBvCtL,GAAQu6E,gBAAkBA,EAC1Bv6E,EAAQw6E,SAAWA,G1OqpjBb,SAASv6E,EAAQD,GAEtB,Y2OnrjBDC,GAAOD,SACN06E,aAAc,SAAShsD,GACtB,MAAOA,GAAIte,OAAO,GAAGub,cAAgB+C,EAAI1M,OAAO,IAGjD4lB,WAAY,SAASlZ,GACpB,MAAOA,GAAIte,OAAO,GAAG8d,cAAgBQ,EAAI1M,OAAO,IAGjDg2D,uBAAwB,SAASz0C,EAASz1B,GACzC,GAAMs2C,GAA4B,WAArB7gB,EAAQ7X,SAAwB6X,EAAQlX,UAAYkX,EAAQo3C,SACzE7sE,GAASs2C,IAGV2zB,mBAAoB,SAAS1qE,EAAKS,GACjC,GAAMw5B,GAAM,GAAI7f,eAChB6f,GAAIvwB,KAAK,MAAO1J,GAAK,GACrBi6B,EAAIrT,OAAS,WACW,IAAnBqT,EAAIr8B,YAEN6C,EADkB,MAAfw5B,EAAImd,OACEnd,EAAItP,aAEJ,qCAIZsP,EAAIpT,QAAU,SAAS7e,GACtB,KAAM,IAAI+T,OAAM,4CAA8C/b,EAAM,uBAAyBgI,IAG9FiyB,EAAIpW,KAAK,OAGVomD,eAAgB,SAASl2E,EAAKO,EAAO2L,GACpC,GAAMstE,GAAYx5E,EAAIwqB,QAAQ,IAC9B,IAAIgvD,OACH,IAGCttE,EAAKlM,GAAOqM,KAAK8e,MAAM5qB,EAAM6d,QAAQ,MAAO,MAC3C,MAAOnK,GACR/H,EAAKlM,GAAOO,MAEP,CAEN,GAAMk5E,GAASz5E,EAAI4gB,OAAO,EAAG44D,EAGxBttE,GAAKutE,KACTvtE,EAAKutE,OAINvtE,EAAKutE,GAAU9yE,KAAKuvE,eAAel2E,EAAI4gB,OAAO44D,EAAU,GAAIj5E,EAAO2L,EAAKutE,IAGzE,MAAOvtE,IAIRqsE,cAAe,SAAStkE,GACvB,GAAMylE,GAAczlE,EAAEuwC,wBAEhB7kC,EAAO3W,SAAS2W,KAChB2xC,EAAUtoD,SAAS6B,gBAGnBshC,EAAY7sC,OAAO8tC,aAAekkB,EAAQnlB,WAAaxsB,EAAKwsB,UAC5D/nB,EAAa9kB,OAAO4tC,aAAeokB,EAAQltC,YAAczE,EAAKyE,WAG9Du1D,EAAYroB,EAAQqoB,WAAah6D,EAAKg6D,WAAa,EACnDC,EAAatoB,EAAQsoB,YAAcj6D,EAAKi6D,YAAc,CAE5D,QAECz1D,MAAOu1D,EAAYv1D,OAASu1D,EAAYf,MAAQe,EAAYxtC,KAC5D9B,OAAQsvC,EAAYtvC,QAAUsvC,EAAYd,OAASc,EAAY9vC,IAC/DA,IAAK8vC,EAAY9vC,IAAMuC,EAAYwtC,EACnCztC,KAAMwtC,EAAYxtC,KAAO9nB,EAAaw1D,M3O6rjBnC,SAAS/6E,EAAQD,GAEtB,Y4O3wjBD,SAASi7E,KACR,GAAMC,GAAMx6E,OAAOktB,SACb7M,EAAO3W,SAAS2W,KAClBo6D,SACAC,QAEAC,GACHC,QAAQC,aAAa,GAAInxE,SAASizD,MAAO6d,EAAIvlB,SAAWulB,EAAI7yC,SAG5D8yC,EAAUp6D,EAAKwsB,UACf6tC,EAAUr6D,EAAKyE,WACf01D,EAAI70C,KAAO,GACXtlB,EAAKwsB,UAAY4tC,EACjBp6D,EAAKyE,WAAa41D,GAjBpB,GAAII,IAAc,EACdH,QAoBJp7E,GAAOD,QAAU,SAACy7E,GACZD,IACJH,EAAkB36E,OAAO46E,SAAW,gBAAkBA,UAEvDE,GAAc,CAEd,IAAMn1C,GAAOzY,SAASyY,KAAKpN,UAAU,GAC/ByiD,EAAmBr1C,GAAqC,IAA7BA,EAAKza,QAAQ6vD,GACxCzG,EAAa3uC,EAAKpN,UAAUwiD,EAAWjzE,OAE7C,OAAIkzE,IACHT,IACO1wE,QAAQC,QAAQwqE,IAEhBzqE,QAAQC,Y5OoxjBX,SAASvK,EAAQD,EAASH,GAQ/B,QAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G6O/yjBxF,QAAS6yE,KACR,GAAM6H,GAAiBC,EAAYz7E,OAAO,wBAAwBswC,KAElE2iC,GAAMC,mBAAqBsI,EAAeE,KAAK,SAAAC,GAAA,MAAsB,iBAAdA,EAAKv8D,OAC5D6zD,EAAME,cAAgBqI,EAAeE,KAAK,SAAAC,GAAA,MAAsB,2BAAdA,EAAKv8D,OAGxD,QAASw8D,GAAqB3wD,EAAI8lD,GACjC9lD,EAAGq0B,gBAEH,IAAIxjB,GAAS,KAEkC,YAA3C7Q,EAAGo0B,cAAcvZ,QAAQta,gBAC5BsQ,EAAS7Q,EAAGo0B,cAAc79C,OAG3Bq6E,EAAsBJ,EAAYtP,OAAQrwC,EAAQggD,EAAa,0BAA0BC,SAAzFF,SACQ,iBAAM,QACZjyE,KAAK,iBAAMmnE,GAAQj6D,UAGtB,QAASs8D,GAAuBrC,GAC/B+K,EAAgB/K,EAAWA,EAAQ3tC,QAAQ31B,cAAc,yBAA2B,KAE/EquE,IAELA,EAAa7wE,iBAAiB,SAAU,SAAAggB,GACvC2wD,EAAoB3wD,EAAI8lD,QAGzBv4D,QAAA,EAAAsgD,cAAIgjB,EAAar8D,iBAAiB,YAChC6K,QAAQ,SAAAxS,GAAA,MAAMA,GAAG7M,iBAAiB,QAAS,SAAAggB,GAC3C2wD,EAAoB3wD,EAAI8lD,Q7OywjB1B,GAEIlY,GAAsBn5D,EAAoB,KAE1Co5D,EAAsBz3D,EAAuBw3D,G6O1zjB5C4iB,EAAc/7E,EAAQ,KACtBm8E,EAAwBn8E,EAAQ,KAIlCo8E,SAGA7I,GACHC,mBAAoB,KACpBC,cAAe,KAuChBrzE,GAAOD,SACNozE,QACAU,kBACAP,0B7O+0jBK,SAAStzE,EAAQD,EAASH,GAE/B,Y8Ol4jBD,SAASs8E,GAAS58D,EAAM+sD,EAAQI,GAC/B,GAAM9rD,KAON,OALI8rD,KACH9rD,EAAK+vD,KAAOjE,GAI0B,kBAA5B0P,GAAQC,gBACXD,EAAQC,gBAAgB,OAAQ/P,EAAQ,YAAa,aAAcjrE,OAAOwH,UAAW+X,GAAQrB,UAE7F68D,EAAQ/tE,IAAI,OAAQi+D,EAAQ,YAAa,aAAc/sD,EAAMqB,GAjBtE,GAAMw7D,GAAUv8E,EAAQ,KAClBy8E,GACLC,SAAU,gBACV7yE,KAAM,QAkBPzJ,GAAOD,QAAU,SAACssE,EAAQrwC,EAAQq3C,GACjC,GAAIkJ,GAAmBjyE,QAAQC,UAC3BiyE,EAAqBlyE,QAAQC,SAUjC,OARe,QAAXyxB,IACHugD,EAAmBL,EAAQ,eAAgB7P,EAAQgQ,IAGhDhJ,IACHmJ,EAAqBN,EAAQ,yBAA0B7P,IAGjD/hE,QAAQ+U,KAAKk9D,EAAkBC,M9O+4jBjC,SAASx8E,EAAQD,EAASH,GAE/B,Y+O95jBD,SAAS68E,GAA2B16C,GACnC,MAAQA,GAAS2uC,KAAQ3uC,EAAS2uC,KAAKgM,QAAU36C,EAASsB,QAAQ,GAAGopC,IAAInH,WAAWoX,QAGrF,QAASC,GAAmBC,EAAWj8D,GACtChX,EAAWqjE,mBAAmB,OAAQ,KAAM,WAAY,UAAW4P,EAAWj8D,GAG/E,QAAS2uD,GAAcC,EAAU9iE,GAChC,GAAM+iE,GAAsD,SAA1CD,EAASnjE,aAAa,eAEpCK,KAAU+iE,GACbC,EAAYC,YAAYH,GAEzBA,EAASp9B,gBAAgB,YACzBo9B,EAASxqD,aAAa,SAAUtY,GAGjC,QAASowE,GAAeD,EAAWE,GAClC,GAAMC,GAAkBr9D,EAAMs9D,EAAN,qBAAkCJ,EAAlC,YACxBG,GAAgBvyD,QAAQ,SAAC03C,GACxBoN,EAAapN,EAAQ4a,KAIvB,QAASG,GAAgBC,GACxBL,EAAcK,EAAYpQ,SAAS,GAGpC,QAASqQ,GAAgBD,GACxB,GAAMJ,GAAWL,EAA0BS,EAC3CL,GAAcK,EAAYpQ,QAASgQ,GAGpC,QAASM,KACRpL,EAActR,MACbp9B,2BAA4B+xC,EAA5B,0DAAkGC,EAAlG,oEACA9f,UAAW,cAIb,QAASse,GAAiBC,GACzB,GAAMj2D,KAaN,OAXAi2D,GAAOvpD,QAAQ,SAAC+Q,GACf,GAAIA,EAAMlvB,KAAK2nE,WAAW,SAAU,CACnC,GAAM7yE,GAAMo6B,EAAMlvB,KAAK+D,MAAM,QAAQ7H,OACrCuV,GAAK4yD,KAAO5yD,EAAK4yD,SACjB5yD,EAAK4yD,KAAKvvE,GAAOo6B,EAAM75B,UAEE,WAAf65B,EAAM9xB,OAChBqU,EAAKyd,EAAMlvB,MAAQkvB,EAAM75B,SAIpBoc,EAGR,QAASu/D,GAAet8D,EAAO8K,GAE9B,GADA9K,EAAMy+B,iBACFh3C,GAAUA,EAAOyB,UACpBmzE,QACM,CACN,GAAMR,GAAY/wD,EAAQzf,aAAa,mBACjCkxE,EAAW99D,EAAE,SAAUqM,GACvBkoD,EAASr0D,EAAG,QAASmM,EAC3BkoD,GAAOxqE,KAAK+zE,GACZX,EAAkBC,EAAW9I,EAAgBC,KAM/C,QAASwJ,KACJ5zE,EAAWzJ,QAAUyJ,EAAWzJ,OAAO,qBAC1CyJ,EAAWzJ,OAAO,oBAAoBswC,MAAMhmB,QAAQ,SAACkQ,GAChDA,EAAKg2C,KAAKgM,SACbG,EAAcniD,EAAKpb,MAAM,KAM7B,QAASk+D,KACRrzE,SAAS2W,KAAK3V,iBAAiB,kCAAmCoyE,GAClEpzE,SAAS2W,KAAK3V,iBAAiB,oCAAqC,SAAAggB,GAAA,MAAM8xD,GAAe9xD,EAAGlK,UAC5F9W,SAAS2W,KAAK3V,iBAAiB,oCAAqC,SAAAggB,GAAA,MAAMgyD,GAAehyD,EAAGlK,UAC5FyzC,EAAShyB,GAAG,SAAZ,GAAyBs6C,EAAWK,GAK9B,QAASn0E,GAAMmE,GACrB,GAAMowE,GAAoB/9D,EAAGs9D,EAC7Bx0E,GAAS6E,EACLowE,EAAkBl1E,OAAS,IAC9Bg1E,IACAC,K/O+zjBDp8E,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,IAER3B,E+Ov0jBemJ,MA3GhB,IAAMumE,GAAc7vE,EAAQ,KACtBoyE,EAAgBpyE,EAAQ,KACxBg9C,EAAWh9C,EAAQ,KACnB+J,EAAa/J,EAAQ,KAErB80D,EAAW,GAAI9X,GAASzyC,SAAS2W,MACjCtB,EAAI5f,EAAQ,IAAY4f,EACxBE,EAAK9f,EAAQ,IAAY8f,GACzB21D,EAAe,wEACfC,EAAa,SAEb0H,EAAU,2BACZx0E,U/OqikBE,SAASxI,EAAQD,EAASH,GAE/B,YAMA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GgP9ikBxF,QAAS08E,KACR,GAAMz5B,GAAM95C,SAASwD,cAAcgwE,EAAQC,QACrCC,EAAa1zE,SAASwD,cAAcgwE,EAAQE,WAElD55B,GAAI94C,iBAAiB,QAAS2yE,GAAa,GAC3CD,EAAW1yE,iBAAiB,QAAS,WACpC4yE,IACAC,MACE,GAGJ,QAASC,GAAiBt2B,GACzB,MAAOr9C,SAAQ+U,KACd6+D,EAAW36E,IAAI,WAAY,UAAWokD,GACtCu2B,EAAW36E,IAAI,YAAa,aAAc,kBACxCuG,KAAK,SAAAjB,GAAwB,GAAAujE,IAAA,EAAA+R,cAAAt1E,EAAA,GAAtBu1E,EAAsBhS,EAAA,GAAbiS,EAAajS,EAAA,EAC/B,OAA0B,KAAnBgS,EAAQ71E,QAAmC,IAAnB81E,EAAQ91E,SAAiB+1E,MAI1D,QAASzV,KACRh9C,EAAU1hB,SAASwD,cAAcgwE,EAAQY,gBACzC1yD,EAAQ1d,UAAUC,IAAIuvE,EAAQa,cAG/B,QAAST,KACRlyD,EAAU1hB,SAASwD,cAAcgwE,EAAQY,gBACzC1yD,EAAQ1d,UAAU60B,OAAO26C,EAAQa,cAGlC,QAASF,KACR,MAAO/T,GAAWlpC,QAAQ99B,IAAIsnE,GAG/B,QAASmT,KACRzT,EAAWlpC,QAAQ5kB,IAAIouD,EAAa,GAGrC,QAASiT,KACR,GAAMW,IACLpyE,KAAM43C,EAAI73C,aAAa,cACvB83D,SAAUjgB,EAAI73C,aAAa,kBAEtBsyE,GACLhO,MACCjnE,KAAM,QACN6yE,SAAU,iBAIb,OAAOhyE,SAAQ+U,KACb6+D,EAAW9vE,IAAI,OAAQ,KAAM,WAAY,UAAWu5C,EAAW82B,GAC/DP,EAAW9vE,IAAI,OAAQ,KAAM,YAAa,aAAc,eAAgBswE,KACtE50E,KAAK,WACP44D,EAAQgN,YAAYzrB,GAAK,GACzBA,EAAIl/B,aAAa,YAAY,KAI/B,QAAS7b,KACR2iB,EAAU1hB,SAASwD,cAAcgwE,EAAQY,gBACrChU,EAAWpqC,gBAAmBtU,IAClCo4B,EAAM95C,SAASwD,cAAcgwE,EAAQC,QACrCj2B,EAAY1D,EAAI73C,aAAa,mBAC7B6xE,EAAgBt2B,GAAW79C,KAAK,SAAA60E,GAC5BA,IACF9V,IACA6U,QhPu+jBF,GAAIkB,GAAkBh/E,EAAoB,KAEtCu+E,EAAkB58E,EAAuBq9E,GgP5jkBxCV,EAAat+E,EAAQ,KACrB8iE,EAAU9iE,EAAQ,KAClB2qE,EAAa3qE,EAAQ,IACrBirE,EAAc,2BAEd8S,GACLC,OAAO,gCACPC,WAAW,oCACXU,eAAe,uBACfC,aAAa,gCAGVv6B,SACAp4B,SACA87B,QA0EJ3nD,GAAOD,SAAYmJ,ShPqkkBb,SAASlJ,EAAQD,EAASH,GiP7pkBhC,YAYA,SAAA2B,GAAAP,GAAsC,MAAAA,MAAAC,WAAAD,GAAuCQ,UAAAR,GAV7EjB,EAAAkB,YAAA,CAEA,IAAA49E,GAAAj/E,EAAA,KAEAk/E,EAAAv9E,EAAAs9E,GAEAE,EAAAn/E,EAAA,KAEAo/E,EAAAz9E,EAAAw9E,EAIAh/E,cAAA,WACA,QAAAk/E,GAAApqD,EAAAjpB,GACA,GAAAszE,MACAC,GAAA,EACAC,GAAA,EACAC,EAAAj8E,MAEA,KACA,OAAAk8E,GAAAlwE,GAAA,EAAA4vE,cAAAnqD,KAAwDsqD,GAAAG,EAAAlwE,EAAAwC,QAAApC,QACxD0vE,EAAA31E,KAAA+1E,EAAA59E,QAEAkK,GAAAszE,EAAA32E,SAAAqD,GAHuFuzE,GAAA,IAKlF,MAAA7xE,GACL8xE,GAAA,EACAC,EAAA/xE,EACK,QACL,KACA6xE,GAAA/vE,EAAA,WAAAA,EAAA,YACO,QACP,GAAAgwE,EAAA,KAAAC,IAIA,MAAAH,GAGA,gBAAArqD,EAAAjpB,GACA,GAAA0N,MAAAc,QAAAya,GACA,MAAAA,EACK,OAAAiqD,cAAA19E,OAAAyzB,IACL,MAAAoqD,GAAApqD,EAAAjpB,EAEA,UAAAhB,WAAA,6DjPsqkBM,SAAS5K,EAAQD,EAASH,GkPrtkBhCI,EAAAD,SAAkByB,UAAA5B,EAAA,KAAAqB,YAAA,IlP2tkBZ,SAASjB,EAAQD,EAASH,GmP3tkBhCA,EAAA,IACAA,EAAA,GACAI,EAAAD,QAAAH,EAAA,MnPiukBM,SAASI,EAAQD,EAASH,GoPnukBhC,GAAAw6D,GAAAx6D,EAAA,KACAuR,EAAAvR,EAAA,gBACAmR,EAAAnR,EAAA,GACAI,GAAAD,QAAAH,EAAA,IAAA2/E,WAAA,SAAA/uE,GACA,GAAAlB,GAAAlO,OAAAoP,EACA,OAAApN,UAAAkM,EAAA6B,IACA,cAAA7B,IACAyB,EAAAzP,eAAA84D,EAAA9qD,MpP0ukBM,SAAStP,EAAQD,EAASH,GqPjvkBhCI,EAAAD,SAAkByB,UAAA5B,EAAA,KAAAqB,YAAA,IrPuvkBZ,SAASjB,EAAQD,EAASH,GsPvvkBhCA,EAAA,IACAA,EAAA,GACAI,EAAAD,QAAAH,EAAA,MtP6vkBM,SAASI,EAAQD,EAASH,GuP/vkBhC,GAAAoV,GAAApV,EAAA,IACA2D,EAAA3D,EAAA,IACAI,GAAAD,QAAAH,EAAA,IAAA4/E,YAAA,SAAAhvE,GACA,GAAAypD,GAAA12D,EAAAiN,EACA,sBAAAypD,GAAA,KAAArvD,WAAA4F,EAAA,oBACA,OAAAwE,GAAAilD,EAAA95D,KAAAqQ,MvPswkBM,SAASxQ,EAAQD,EAASH,GwP3wkBhCI,EAAAD,QAAAH,EAAA,MxPixkBM,SAASI,EAAQD,EAASH,GAE/B,YAWA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GATvFI,OAAOK,eAAe1B,EAAS,cAC7B2B,OAAO,IAET3B,EAAQ8J,SAAWzG,MyPxxkBpB,IAAAq8E,GAAA7/E,EAAA,KzP4xkBK8/E,EAAan+E,EAAuBk+E,EAIxC1/E,GyP9xkBQ8J,SzP8xkBW61E,cAId,SAAS1/E,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GARvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIq3D,GAAsBn5D,EAAoB,KAE1Co5D,EAAsBz3D,EAAuBw3D,G0P9ykB5C4mB,EAAsB,eACtBC,cAAoCD,EACpCE,sBAA8CF,EAE9CG,EAAiB,QAAjBA,GAAiBlsD,GACtBA,EAAIzlB,UAAU60B,OAAO48C,GACrBhsD,EAAIlO,WAAWvX,UAAU60B,OAAO68C,GAChCjsD,EAAIjP,oBAAoB,OAAQm7D,IAG3BC,EAAY,SAAAnsD,GACjBA,EAAIzoB,iBAAiB,OAAQ,WAE5BtK,WAAWi/E,EAAe53E,KAAK,KAAM0rB,GAAM,SAG5Clb,QAAA,EAAAsgD,cAAIplC,EAAIsO,aACN1X,QAAQ,SAAAisB,GACJ,mBAAmBvsC,KAAKusC,EAAKpqC,QAChCunB,EAAI7O,aAAa0xB,EAAKpqC,KAAKkT,QAAQ,QAAS,IAAKk3B,EAAK/0C,OACtDkyB,EAAIue,gBAAgBsE,EAAKpqC,UAKvB8sD,EAAuB,SAACC,EAAU1lB,GACvCA,EAAQlpB,QAAQ,SAAAqpB,GACf,GAAMmsC,GAAcnsC,EAAO5/B,MAC3B8rE,GAAUC,GACV5mB,EAASjjB,UAAU6pC,MAIfC,EAAsB,SAAAp3E,EAAe+qB,GAAQ,GAApBwlC,GAAoBvwD,EAApBuwD,QAC1BA,GACHA,EAASpjB,QAAQpiB,GAEjBmsD,EAAUnsD,GAEXA,EAAI7O,aAAa,4BAA6B,I1P2zkB9ChlB,c0PpzkBc,WAA+B,GAAAqsE,GAAA9jE,UAAAC,QAAA,GAAAnF,SAAAkF,UAAA,MAAAA,UAAA,GAAA43E,EAAA9T,EAA5B/tB,OAA4Bj7C,SAAA88E,EAArB/1E,SAAqB+1E,EACvC9mB,EAAW34D,OAAOuzC,qBACvB,GAAIA,sBACH,SAAUN,GACTylB,EAAqBrxD,KAAM4rC,KAG7B,QACDh7B,QAAA,EAAAsgD,cAAI3a,EAAK1+B,iBAAL,IAA0BigE,KAC5B78C,OAAO,SAAAnP,GAAA,OAAQA,EAAI1nB,aAAa,+BAChCse,QAAQy1D,EAAoB/3E,KAAK,MAAQkxD,e1PwzkB3Cp5D,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,G2Pp3kBhCI,EAAAD,QAAAH,EAAA,M3P03kBM,SAASI,EAAQD,GAEtB,Y4Pp0kBD,SAASogF,GAAWr3E,GACnB,MAAOiiB,IACNthB,KAAM,cACNX,MAAOA,I5Pm0kBR1H,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,G4P/3kBT,IAAMqpB,GAAU,SAAAgS,GACf,MAAI,iBAAmBrW,WACfA,UAAUxf,cAAck5E,MAC7Bt2E,KAAK,SAAAu2E,GAAA,MACL,IAAI/1E,SAAQ,SAACC,EAASkkD,GAErB,GAAM6xB,GAAiB,GAAIC,eAE3BD,GAAeE,MAAMC,UAAY,SAAAt1D,GAC5BA,EAAGxK,KAAKrS,MACXmgD,EAAOtjC,EAAGxK,KAAKrS,OAEf/D,EAAQ4gB,EAAGxK,OAIb0/D,EAAaK,OAAO11C,YAAYjO,GAAMujD,EAAeK,YAIjDr2E,QAAQmkD,OAAO,+BAIlBtlD,EAAW,SAAAL,GAChB,MAAI,iBAAmB4d,YAAa5d,EAAMvF,IAAI,iBACzC4G,SAASC,OAAO7B,OAAS,KAC5BmD,QAAQuf,KAAK,sHACN7hB,KAEDsd,UAAUxf,cAAciC,SAAS,yBACtCW,KAAK,SAAAu2E,GAAA,MACLF,GAAU3yE,KAAK8e,MAAM9e,KAAKC,UAAU3E,KAClCgB,KAAK,iBAAMu2E,OAGR/1E,QAAQmkD,OAAO,0DAIlBrlD,EAAa,WAClB,MAAI,iBAAmBsd,WACfA,UAAUxf,cAAc05E,kBAC7B92E,KAAK,SAAAu2E,GAAA,QAAgBA,GAAeA,EAAaj3E,eAE5CkB,QAAQC,SAAQ,GAMzB9J,QAAO0K,iBAAiB,sBAAuB,SAAAggB,GAE9C,MADAA,GAAGq0B,kBACI,I5P44kBPz/C,E4Pl4kBQoJ,W5Pm4kBRpJ,E4Pn4kBkBqJ,a5Po4kBlBrJ,E4Pp4kB8BgrB,U5Pq4kB9BhrB,E4Pr4kBuCogF,a5Py4kBlC,SAASngF,EAAQD,EAASH,G6Px8kBhCI,EAAAD,QAAAH,EAAA,M7P88kBM,SAASI,EAAQD,GAEtB,Y8P98kBDU,QAAOogF,8BAAgC,WAEtC,MADAn1E,SAAQuf,KAAK,qJAGdxqB,OAAOogF,8BAA8B/kE,a9Ps9kB/B,SAAS9b,EAAQD,EAASH,GAE/B,Y+P99kBDI,GAAOD,QAAUH,EAAQ,KACzBI,EAAOD,QAAQ+6D,gBAAiB,G/Po+kB1B,SAAS96D,EAAQD,EAASH,GgQr+kBhCI,EAAAD,QAAAH,EAAA,MhQ2+kBM,SAASI,EAAQD,EAASH,GAE/B,YiQh7kBD,SAASkhF,GAAM7sE,EAAQtI,GACtBvK,OAAOiQ,KAAK1F,GAAS6e,QAAQ,SAAUrpB,GACtC8S,EAAO9S,GAAOwK,EAAQxK,KA/DxB,GAAMorC,GAAW3sC,EAAQ,IAEnBmhF,EAAgB,aAClBl1B,EAAQ,EAGNm1B,GACLC,cAAe,SAAUx0E,GACV,WAAVA,GACH3E,KAAK6uE,UAAUxoE,UAAUC,IAAItG,KAAKo5E,iBAAmB,cACrDp5E,KAAK6uE,UAAUxoE,UAAU60B,OAAOl7B,KAAKo5E,iBAAmB,iBAExDp5E,KAAK6uE,UAAUxoE,UAAU60B,OAAOl7B,KAAKo5E,iBAAmB,cACxDp5E,KAAK6uE,UAAUxoE,UAAUC,IAAItG,KAAKo5E,iBAAmB,iBAGvDC,gBAAiB,WAChB,MAAOr5E,MAAK6uE,UAAUxoE,UAAUgzD,SAASr5D,KAAKo5E,iBAAmB,eAAiBp5E,KAAK6uE,UAAUxoE,UAAUgzD,SAASr5D,KAAKo5E,iBAAmB,gBAE7IE,WAAY,WACX,GAAIC,IAAY,CAchB,OAbkC,gBAAvBv5E,MAAKuF,KAAKi0E,SAChBx5E,KAAKkQ,GAAG2H,iBAAiB7X,KAAKuF,KAAKk0E,eAAeh5E,OAAST,KAAKuF,KAAKi0E,WACxED,GAAY,GAGTv5E,KAAK05E,cACRH,EAAYv5E,KAAK6uE,UAAUjpC,aAAe5lC,KAAK6uE,UAAUvpC,cAEzDtlC,KAAKiqC,WACLsvC,EAAYv5E,KAAK6uE,UAAUjpC,aAAe5lC,KAAK6uE,UAAUvpC,aACzDtlC,KAAK25E,UAGAJ,GAERG,YAAa,WACZ,OAAQ15E,KAAK6uE,UAAUxoE,UAAUgzD,SAASr5D,KAAKo5E,iBAAmB,gBAI9DQ,GACLT,cAAe,SAAUx0E,GACV,WAAVA,EACH3E,KAAK6uE,UAAU5xD,aAAa,cAAe,SAE3Cjd,KAAK6uE,UAAU5xD,aAAa,cAAe,SAG7Co8D,gBAAiB,WAChB,MAAOr5E,MAAK6uE,UAAUzqE,aAAa,gBAEpCk1E,WAAY,WACX,OAAO,GAERI,YAAa,WACZ,MAAsD,SAA/C15E,KAAK6uE,UAAUvqE,aAAa,iBAW/Bu1E,EAAW,SAAU3pE,EAAI3K,GAAM,GAAA3E,GAAAZ,IA0BpC,IAzBAA,KAAKuF,KAAOA,MACZvF,KAAKkQ,GAAKA,EAEVlQ,KAAKkX,UAAYlX,KAAKuF,KAAK2R,WAAa+hE,EACxCj5E,KAAKo5E,iBAAmBp5E,KAAKuF,KAAK6zE,kBAAoBH,EAAgB,YACtEj5E,KAAK85E,gBAAkB95E,KAAKuF,KAAKu0E,iBAAmBb,EAAgB,WAEpEj5E,KAAK3E,UAAU,WAAY,UAC3B2E,KAAK3E,UAAU,gBAAiB,IAAM2E,KAAKo5E,iBAAmB,SAC9Dp5E,KAAK3E,UAAU,qBAA6C,WAAvB2E,KAAKuF,KAAKi0E,SAAwB,OAAgC,WAAvBx5E,KAAKuF,KAAKi0E,SAAwB,OAAS,SAC3Hx5E,KAAK3E,UAAU,sBAA8C,WAAvB2E,KAAKuF,KAAKi0E,SAAwB,OAAS,QACjFx5E,KAAK3E,UAAU,iBAAkB,UAAY2E,KAAK85E,iBAClD95E,KAAK3E,UAAU,cAAe,OAG1B,QAAQ+G,KAAKpC,KAAKuF,KAAKi0E,YAC1Bx5E,KAAKuF,KAAKi0E,UAAYx5E,KAAKuF,KAAKi0E,UAGN,WAAvBx5E,KAAKuF,KAAKi0E,SACbR,EAAMh5E,KAAM45E,GAEZZ,EAAMh5E,KAAMk5E,GAGqB,gBAAvBl5E,MAAKuF,KAAKi0E,WAA0Bx5E,KAAKuF,KAAKk0E,cACxD,KAAM,0FAOP,IAJAz5E,KAAK6uE,UAAY7uE,KAAKkQ,GAAGrK,cAAc,IAAM7F,KAAKo5E,kBAElDp5E,KAAKm4D,WAAa7vD,MAAM+D,MAAMrM,KAAKkQ,GAAG2H,iBAAiB7X,KAAKuF,KAAKw0E,kBAE5D/5E,KAAKm4D,QAAQ13D,OACjB,KAAM,IAAI4gB,OAAM,6DAEjBrhB,MAAKg6E,cAEsB,WAAvBh6E,KAAKuF,KAAKi0E,WACb/0C,EAASP,SAAS,UAClBO,EAASP,SAAS,eAClB7hC,SAAS2W,KAAK3V,iBAAiB,wBAAyB,iBAAMzC,GAAKyL,UACnEhK,SAAS2W,KAAK3V,iBAAiB,mBAAoB,iBAAMzC,GAAKyL,WAG/DrM,KAAKm4D,QAAQz1C,QAAQ,SAAAq1C,GACpBA,EAAO10D,iBAAiB,QAAS,iBAAMzC,GAAKq5E,kBAE7Cj6E,KAAKkQ,GAAG+M,aAAa,qBAAsB,IAC3Cjd,KAAKqM,OAAM,GACXrM,KAAK4kE,KAAK,QAGXiV,GAAStgF,UAAU8B,UAAY,SAAU6+E,EAASC,GACjD,GAAIC,GAAYp6E,KAAKkQ,GAAG5L,aAAa,mBAAqB41E,EAAQziE,QAAQ,SAAU,SAAUwvD,GAC7F,MAAO,IAAMA,EAAGrjD,gBAEQ,oBAAdw2D,IAA2C,OAAdA,IACvCA,EAAYp6E,KAAKuF,KAAK20E,IAEvBl6E,KAAKuF,KAAK20E,GAAkC,mBAAdE,IAA2C,OAAdA,EAAsBA,EAAYD,GAG9FN,EAAStgF,UAAU8S,MAAQ,SAAUguE,GAC/Br6E,KAAKs5E,cAGTt5E,KAAKkQ,GAAG7J,UAAU60B,OAAOl7B,KAAKkX,UAAY,cACR,gBAAvBlX,MAAKuF,KAAKi0E,aACjBlxE,MAAMjQ,KAAK2H,KAAKkQ,GAAG2H,iBAAiB7X,KAAKuF,KAAKk0E,eAAgBz5E,KAAKuF,KAAKi0E,UAEzE92D,QAAQ,SAAAxS,GAAA,MAAMA,GAAG7J,UAAUC,IAAI,kCAE9BtG,KAAKq5E,kBACRr5E,KAAKs6E,aAAaD,GAElBr6E,KAAKiqC,SAASowC,IAXfr6E,KAAKkQ,GAAG7J,UAAUC,IAAItG,KAAKkX,UAAY,eAgBzC2iE,EAAStgF,UAAU6pB,QAAU,WAAY,GAAA/K,GAAArY,IACb,YAAvBA,KAAKuF,KAAKi0E,WACbn3E,SAAS2W,KAAK6D,oBAAoB,wBAAyB,iBAAMxE,GAAKhM,UACtEhK,SAAS2W,KAAK6D,oBAAoB,mBAAoB,iBAAMxE,GAAKhM,WAElErM,KAAKm4D,QAAQz1C,QAAQ,SAAAq1C,GACpBA,EAAOl7C,oBAAoB,QAASxE,EAAK4hE,aACzCliB,EAAO1tB,gBAAgB,iBACvB0tB,EAAO1tB,gBAAgB,mBAExBrqC,KAAK6uE,UAAUxkC,gBAAgB,eAC/BrqC,KAAK6uE,UAAUxoE,UAAU60B,OAAOl7B,KAAKo5E,iBAAmB,cACxDp5E,KAAK6uE,UAAUxoE,UAAU60B,OAAOl7B,KAAKo5E,iBAAmB,eACxDp5E,KAAKkQ,GAAGm6B,gBAAgB,uBAGzBwvC,EAAStgF,UAAUygF,YAAc,WAGhC,GAFAh6E,KAAK7H,GAAK6H,KAAK6uE,UAAU12E,IAEpB6H,KAAK7H,GAAI,CACb,KAAMkK,SAASwD,cAAc,wBAA0Bk+C,IACtDA,GAED/jD,MAAK7H,GAAK6H,KAAK6uE,UAAU12E,GAAK,uBAAyB4rD,EAGxD,GAAM5rD,GAAK6H,KAAK7H,EAChB6H,MAAKm4D,QAAQz1C,QAAQ,SAAAq1C,GAAA,MAAUA,GAAO96C,aAAa,gBAAiB9kB,MAGrE0hF,EAAStgF,UAAU0gF,YAAc,WAChCj6E,KAAK05E,cAAgB15E,KAAK25E,SAAW35E,KAAKiqC,YAG3C4vC,EAAStgF,UAAU+gF,aAAe,SAAUD,GAC3Cr6E,KAAK05E,cAAgB15E,KAAKiqC,SAASowC,GAAYr6E,KAAK25E,OAAOU,IAI5DR,EAAStgF,UAAUogF,OAAS,SAAUU,GACrCr6E,KAAKu6E,eAAe,SAAUF,IAG/BR,EAAStgF,UAAU0wC,SAAW,SAAUowC,GACvCr6E,KAAKu6E,eAAe,WAAYF,IAGjCR,EAAStgF,UAAUqrE,KAAO,SAAUrgE,GACnCvE,KAAKkQ,GAAG/M,cAAc,GAAIC,aAAY,aAAemB,GAAOuU,SAAS,MAGtE+gE,EAAStgF,UAAUghF,eAAiB,SAAU51E,EAAO01E,GAAU,GAAAluC,GAAAnsC,IAC9DA,MAAKm5E,cAAcx0E,GACW,SAA1B3E,KAAKuF,KAAKqiE,aACb5nE,KAAKm4D,QAAQz1C,QAAQ,SAAAq1C,GACU,SAA1B5rB,EAAK5mC,KAAKqiE,cACb7P,EAAOzzC,UAAY6nB,EAAK5mC,KAAe,WAAVZ,EAAqB,qBAAuB,uBAAyB,WAEnGozD,EAAO96C,aAAa,gBAA2B,WAAVtY,EAAqB,OAAS,WAGhE01E,GACJr6E,KAAK4kE,KAAKjgE,GAIZ,IAAM61E,GAAY,SAAUtqE,EAAI3K,GAC/B,MAAO2K,GAAG9L,aAAa,sBAAwB9I,OAAY,GAAIu+E,GAAS3pE,EAAI3K,IAGvEnE,EAAO,SAAS8O,EAAI3K,GAOzB,MANK2K,KACJA,EAAK7N,SAAS2W,MAET9I,YAAcgjD,eACnBhjD,EAAK7N,SAASwD,cAAcqK,IAEzB,iBAAiB9N,KAAK8N,EAAG5L,aAAa,qBAClCk2E,EAAUtqE,EAAI3K,MAEZsR,IAAIxe,KAAK6X,EAAG2H,iBAAiB,oCAAqC,SAAA3H,GAAA,MAAMsqE,GAAUtqE,EAAI3K,MAG3F8wD,EAAe,QAAfA,KACLj1D,IACAiB,SAASwa,oBAAoB,qBAAsBw5C,GAG9B,oBAAX19D,SACV0J,SAASgB,iBAAiB,qBAAsBgzD,GAIjDn+D,EAAOD,SACNmJ,KAAMA,IjQqglBD,SAASlJ,EAAQD,EAASH,GAE/B,YkQpvlBD,SAAS2iF,GAAqBp3C,GAC7BnN,EAAMtd,UAAU,qBAAsBmhC,OAAO1W,IAG9C,QAASq3C,KACR,IAAGC,EAAH,CAIA,GAAInX,GAAiBzkB,EAAMI,kBAC3Bs7B,GAAoBjX,GACpB/+B,EAASP,SAAS,UAClB7hC,SAAS2W,KAAK3V,iBAAiB,mBAAoB,WAClD,GAAIggC,GAAa0b,EAAMI,kBACpB9b,KAAemgC,IACjBiX,EAAoBp3C,GACpBmgC,EAAiBngC,KAGnBs3C,GAAY,GAzBb,GAAM57B,GAAQjnD,EAAQ,KAChB2sC,EAAW3sC,EAAQ,KACnBo+B,EAAQp+B,EAAQ,IAElB6iF,GAAY,CAwBhBziF,GAAOD,QAAU8mD,EACjB7mD,EAAOD,QAAQyiF,2BAA6BA,EAC5CxiF,EAAOD,QAAQ+6D,gBAAiB,GlQgwlB1B,SAAS96D,EAAQD,EAASH,GAE/B,YmQhylBDI,GAAOD,QAAUH,EAAQ,IACzBI,EAAOD,QAAQ+6D,gBAAiB,GnQsylB1B,SAAS96D,EAAQD,EAASH,GoQvylBhCI,EAAAD,QAAAH,EAAA,MpQ6ylBM,SAASI,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GARvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GqQlzlBT,IAAAO,GAAArC,EAAA,KrQuzlBK8iF,EAAUnhF,EAAuBU,GqQrzlBhCk8D,EAAe,QAAfA,KACLukB,aAAMx5E,OACNiB,SAASwa,oBAAoB,qBAAsBw5C,GAGpDh0D,UAASgB,iBAAiB,qBAAsBgzD,GrQ2zlB/Cp+D,aAAkB2iF,aAClB1iF,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YA8BA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GsQh2lBxF,QAAS2hF,GAAcC,EAAOz3D,GAE7B,GAAgB,aAAZA,EAAG1hB,MAAuBm5E,EAAMC,cAAgB,KAAO,EAA3D;AAIA,GAAM9hE,GAAQ,GAAI7V,aAAY,mBAC7B+V,QACCR,OAAQ0K,EAAG1hB,KACXq5E,YAAaF,EAAMv1E,KAAKy1E,YACxB99B,SAAU,QACVyC,UAAWm7B,EAAMv1E,KAAKpN,GACtB8iF,SAAUH,EAAMC,eAEjBjiE,SAAS,GAEVzW,UAAS2W,KAAK7V,cAAc8V,IAG7B,QAASw/C,GAAUqiB,EAAO1lC,GAAQ,GAAAx0C,GAAAZ,IACjCo1C,GAAO1yB,QAAQ,SAAAzJ,GACd6hE,EAAMI,QAAQ73E,iBAAiB4V,EAAO4hE,EAAcz6E,KAAdQ,EAAyBk6E,MAKjE,QAASK,GAAgBC,EAAa59D,GACrC,GAAIlY,qDAAwDooB,mBAAmB0tD,GAA3E,6BAKJ,OAJI59D,KACHlY,4BAAgCkY,GAG1BlY,EAIR,QAAS+1E,GAA6BjhD,GACrC,GAAM70B,KAmBN,OAjBAiM,OAAMjY,UAAUmpB,QAAQrqB,KAAK+hC,EAAY,SAACuU,GACzC,GAA0C,IAAtCA,EAAKpqC,KAAKsf,QAAQ,gBAAuB,CAE5C,GAAMxqB,GAAMs1C,EAAKpqC,KAAKkT,QAAQ,gBAAiB,IAAIA,QAAQ,YAAa,SAACnf,EAAGsd,GAC3E,MAAOA,GAAEuQ,eAGV,KAGC5gB,EAAKlM,GAAOqM,KAAK8e,MAAMmqB,EAAK/0C,MAAM6d,QAAQ,MAAO,MAChD,MAAOnK,GACR/H,EAAKlM,GAAOs1C,EAAK/0C,UAKb2L,EtQ4wlBPjM,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIiF,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,GsQh1lB/Cy8E,EAAAxjF,EAAA,KtQo1lBKyjF,EAAgB9hF,EAAuB6hF,GsQn1lB5CE,EAAA1jF,EAAA,KtQu1lBK2jF,EAAiBhiF,EAAuB+hF,GsQt1lB7CpgF,EAAAtD,EAAA,KtQ01lBK4D,EAAQjC,EAAuB2B,GsQz1lBpCsgF,EAAA5jF,EAAA,KtQ61lBK6jF,EAASliF,EAAuBiiF,GsQ51lBrCE,EAAA9jF,EAAA,KtQg2lBK+jF,EAAapiF,EAAuBmiF,GsQnylBnCE,GACLd,aAAa,EACbe,YAAY,EACZ3kE,WACA4kE,aAAc,KACdC,aAAa,EACbC,iBAAkB,SAClBrjE,KAAM,MAGDsjE,EtQq2lBO,WsQp2lBZ,QAAAA,GAAYjsE,EAAI3K,IAAM,EAAAzG,cAAAkB,KAAAm8E,GACrBn8E,KAAKo8E,YAAclsE,EAEnBlQ,KAAKuF,KAAOjM,OAAOwH,UAAWg7E,EAAav2E,EAAM81E,EAA6Br7E,KAAKo8E,YAAYhiD,aAE9D,gBAAtBp6B,MAAKuF,KAAK6R,UACpBpX,KAAKuF,KAAK6R,QAAUpX,KAAKuF,KAAK6R,QAAQvH,MAAM,MAGzC7P,KAAKuF,KAAK6R,QAAQyM,QAAQ,wBAC7B7jB,KAAKuF,KAAK6R,QAAQ3V,KAAK,kBAGxBzB,KAAK65B,WACJsY,KAAM,eACN4L,SAAU,QACV7hB,MAAO,kBACPmgD,QAASr8E,KAAKuF,KAAKpN,IAGhB6H,KAAKuF,KAAKy1E,cACbh7E,KAAKs8E,SAAW,GAAA5gF,cAAasE,OAG9BA,KAAKo8E,YAAYn/D,aAAa,kBAAmB,IAE7Cjd,KAAKuF,KAAKw2E,cAAe,GAC5B/7E,KAAKoB,OtQiimBN,MAtLA+6E,GAAM5iF,UsQv2lBPgjF,QtQu2lB2B,WsQv2lBjB,GAAAlkE,GAAArY,KACHw8E,EAAcx8E,KAAKuF,KAAKsT,KAC7BrW,QAAQC,QAAQzC,KAAKuF,KAAKsT,OAC1B,EAAA0iE,cAAA,2BAA4Cv7E,KAAKuF,KAAKpN,IACpD6J,KAAK,SAAAi4B,GACL,GAAIA,EAASqgC,GACZ,MAAOrgC,GAASU,MAEhB,MAAMtZ,OAAM,+BAAiC4Y,EAASyiB,OAAS,KAAOziB,EAAS0iB,WAAa,YAActkC,EAAK9S,KAAKpN,KAKxH,OAAOqkF,GAAYx6E,KAAK,SAAA6W,GACvBR,EAAKokE,UAAY5jE,EACjBR,EAAK+iE,YAAcD,EAAgBtiE,EAAK6jE,cAAerkE,EAAK9S,KAAKy2E,cACjE3jE,EAAKskE,WAAY,EAAAlB,cAAa5iE,EAAK+jE,WAAYvkE,EAAK9S,StQy2lBrD42E,EAAM5iF,UsQr2lBPsjF,YtQq2lB+B,WsQp2lB1B78E,KAAK28E,YACJ38E,KAAKuF,KAAK02E,YACbj8E,KAAK88E,iBAEL98E,KAAK+8E,atQ02lBPZ,EAAM5iF,UsQr2lBP6H,KtQq2lBwB,WsQr2lBjB,GAAA+qC,GAAAnsC,IACN,QAAQA,KAAKuF,KAAKy1E,YAAch7E,KAAKs8E,SAASU,iBAAmBx6E,QAAQC,WAAlE,SACC,WAEN0pC,EAAK5mC,KAAKy1E,aAAc,IAExBh5E,KAAK,iBAAMmqC,GAAKowC,YAChBv6E,KAAK,iBAAMmqC,GAAK0wC,iBtQ22lBlBV,EAAM5iF,UsQx2lBPwjF,StQw2lB4B,WsQv2lB3B/8E,KAAKk7E,QAAU74E,SAASqL,cAAc,SACtC1N,KAAKk7E,QAAQ5jB,UAAW,EACxBt3D,KAAKk7E,QAAQhkE,UAAY1F,MAAMc,QAAQtS,KAAKuF,KAAK6R,SAAWpX,KAAKuF,KAAK6R,QAAQ8G,KAAK,KAAOle,KAAKuF,KAAK6R,QACpGpX,KAAKo8E,YAAY/1E,UAAUC,IAAI,mBAE/BtG,KAAKi9E,cAEDj9E,KAAKk9E,gBAAkBl9E,KAAKuF,KAAKy1E,cACpCh7E,KAAKk7E,QAAQiC,SAAWn9E,KAAKk7E,QAAQkC,WAAY,GAGlDp9E,KAAKo8E,YAAYttE,YAAY9O,KAAKk7E,SAElCziB,EAAUz4D,MAAO,OAAQ,UAAW,QAAS,QAAS,aACtDA,KAAKk7E,QAAQ73E,iBAAiB,UAAWrD,KAAKq9E,iBAAiBj9E,KAAKJ,OACpEA,KAAKk7E,QAAQ73E,iBAAiB,UAAWrD,KAAKs9E,sBAAsBl9E,KAAKJ,OACzEA,KAAKk7E,QAAQ73E,iBAAiB,QAASrD,KAAKs9E,sBAAsBl9E,KAAKJ,OAEnEA,KAAKuF,KAAKy1E,aACbh7E,KAAKs8E,SAASiB,YtQ42lBfpB,EAAM5iF,UsQx2lBP0jF,YtQw2lB+B,WsQv2lB9Bj9E,KAAKk7E,QAAQsC,OAASx9E,KAAKo7E,YAC3Bp7E,KAAKk7E,QAAQx0E,IAAM1G,KAAK28E,WAAa38E,KAAK28E,UAAUr3E,KtQ22lBpD62E,EAAM5iF,UsQx2lBPujF,etQw2lBkC,WsQx2lBjB,GAAA7qC,GAAAjyC,IAChBA,MAAKk9E,cAAgB76E,SAASqL,cAAc,OAC5C1N,KAAKk9E,cAAchmE,UAAY,uBAE/BlX,KAAKy9E,mBAAqBp7E,SAASqL,cAAc,OACjD1N,KAAKy9E,mBAAmBvmE,UAAY,6BACpClX,KAAKy9E,mBAAmBxgE,aAAa,OAAQ,gBAC7Cjd,KAAKy9E,mBAAmBxgE,aAAa,MAAO,IAE5Cjd,KAAKk9E,cAAcpuE,YAAY9O,KAAKy9E,oBAGhCz9E,KAAKuF,KAAK22E,gBAAgBz7E,SAC7BT,KAAK09E,UAAY,GAAA/B,cAAc37E,MAIhC,IAAM29E,GAAet7E,SAASqL,cAAc,SAC5CiwE,GAAazmE,UAAY,sBAEzB,IAAM0mE,GAAmBv7E,SAASqL,cAAc,OAChDkwE,GAAiB1mE,UAAY,4BAC7B0mE,EAAiBx5D,YAAc,aAC/Bu5D,EAAa7uE,YAAY8uE,EAEzB,IAAMC,GAAmBx7E,SAASqL,cAAc,IAChDmwE,GAAiB3mE,UAAY,4BAC7BymE,EAAa7uE,YAAY+uE,GAEzB79E,KAAKk9E,cAAcpuE,YAAY6uE,GAE/B39E,KAAKk9E,cAAc75E,iBAAiB,QAAS,WAE5C4uC,EAAK8qC,WACL9qC,EAAKipC,QAAQ1jB,QACbvlB,EAAKipC,QAAQ4C,QAAU7rC,EAAKipC,QAAQ6C,OAEpC9rC,EAAKmqC,YAAYj9D,YAAY8yB,EAAKirC,eAClCjrC,EAAKyrC,WAAazrC,EAAKyrC,UAAUnP,iBAE1Bt8B,GAAKirC,oBACLjrC,GAAKwrC,qBAGbz9E,KAAKg+E,oBAELh+E,KAAKo8E,YAAYttE,YAAY9O,KAAKk9E,gBtQ62lBlCf,EAAM5iF,UsQ12lBPykF,kBtQ02lBqC,WsQz2lBpCh+E,KAAKy9E,mBAAmB/2E,IAAM1G,KAAKo7E,YACnCp7E,KAAK09E,WAAa19E,KAAK09E,UAAUvqB,UtQ62lBjCgpB,EAAM5iF,UsQ12lBP45D,OtQ02lB0B,SsQ12lBnB8qB,GAAS,GAAA7rC,GAAApyC,IAMf,OALAA,MAAKk7E,SAAWl7E,KAAKk7E,QAAQ7yC,QAC7BroC,KAAKs9E,wBAELt9E,KAAKuF,KAAOjM,OAAOwH,OAAOd,KAAKuF,MAAQsT,KAAM,MAAQolE,GAEhDj+E,KAAKk7E,SAAYl7E,KAAKk9E,cAIpBl9E,KAAKu8E,UAAUv6E,KAAK,WACtBowC,EAAK8qC,cACR9qC,EAAK4rC,oBAEL5rC,EAAK6qC,gBAPCj9E,KAAKoB,QtQw3lBb+6E,EAAM5iF,UsQ52lBPwhF,YtQ42lB+B,WsQ32lB9B,MAAO/6E,MAAKk7E,QAAQ/N,SAAWruD,SAAS,IAAM9e,KAAKk7E,QAAQgD,YAAcl+E,KAAKk7E,QAAQ/N,SAAU,IAAM,GtQ+2lBtGgP,EAAM5iF,UsQ52lBP8jF,iBtQ42lBoC,WsQ32lB/Br9E,KAAKm+E,uBAAyBn+E,KAAKm+E,wBAA0Bn+E,KAAKk7E,SACrEl7E,KAAKm+E,sBAAsB91C,QAG5BroC,KAAKm+E,sBAAwBn+E,KAAKk7E,StQ+2lBlCiB,EAAM5iF,UsQ52lBP+jF,sBtQ42lByC,WsQ32lBpCt9E,KAAKm+E,wBAA0Bn+E,KAAKk7E,UACvCl7E,KAAKm+E,sBAAwB,OtQg3lB9BhC,EsQ52lBM/6E,KtQ42lBO,SsQ52lBF2X,EAAQrY,GACnB,GAAM09E,KACDrlE,GAEwB,gBAAXA,KACjBA,EAAS1W,SAASwD,cAAckT,IAFhCA,EAAS1W,SAAS2W,IAOnB,KAAK,GAFCqlE,GAAWtlE,EAAOlB,iBAAiB,wDAEhC/T,EAAI,EAAGA,EAAIu6E,EAAS59E,OAAQqD,IACpCs6E,EAAO38E,KAAK,GAAI06E,GAAMkC,EAASv6E,GAAIpD,GAGpC,OAAO09E,ItQ+2lBAjC,IsQ32lBTA,GAAMmC,SAANzC,atQg3lBC5jF,asQ92lBckkF,EtQ+2lBdjkF,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GuQnpmBhCI,EAAAD,QAAAH,EAAA,MvQypmBM,SAASI,EAAQD,GAEtB,YAEAqB,QAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GwQ9pmBT,IAAM2kF,MAEAC,EAAuB,WAC5B,GAAMzwC,GAAO,gBACP0wC,EAAkB1wC,EAAlB,KAA0BwwC,EAAmB99E,OAAS,EAE5D,OADA89E,GAAmB98E,KAAKg9E,GACjBA,GAGFC,EAAmB,QAAAA,KACxB,GAAMA,GAAoB,mBAAqB,IAAIh/D,gBAAoBra,MAAQs5E,CAC/E,OAAOD,4BAGFC,EAAa,SAACr5E,EAAKC,GACxB,GAAMu2E,IACL7jE,QAAS,IAQV,OANA1S,GAAOA,MACPjM,OAAOiQ,KAAKuyE,GAAap5D,QAAQ,SAAAk8D,GAC3Br5E,EAAK/L,eAAeolF,KACxBr5E,EAAKq5E,GAAkB9C,EAAY8C,MAG9B,GAAIp8E,SAAQ,SAACC,EAASkkD,GAC5B,GAAM83B,GAAeD,IACjBvmE,QACJtf,QAAO2nD,GAAK3nD,OAAO2nD,OACnB3nD,OAAO2nD,GAAGm+B,GAAgB,SAAAxkD,GACzB,GAAMyiB,GAASziB,EAASyiB,OAASziB,EAASyiB,OAAS,GACnDj6C,IACC63D,GAAiC,IAA7B9xD,KAAKC,MAAMi0C,EAAS,KACxBA,OAAQA,EACR/hB,KAAM,iBAAMn4B,SAAQC,QAAQw3B,EAASjhB,MAAQihB,MAE1ChiB,GACHE,aAAaF,GAIf,IAAM4mE,GAAYx8E,SAASqL,cAAc,SACzCmxE,GAAU9xC,OAAQ,EAClB8xC,EAAUn4E,IAAV,GAAmBpB,GAAMA,EAAIue,QAAQ,QAAY,IAAM,KAAvD,eAAyE46D,EACzEp8E,SAAS2W,KAAKlK,YAAY+vE,GAE1B5mE,EAAUlf,WAAW,WACpB4tD,EAAO,GAAItlC,OAAJ,oBAA8B/b,EAA9B,gBACLC,EAAK0S,WxQsqmBThgB,cwQlqmBcymF,ExQmqmBdzmF,EwQlqmBQ0mF,cxQsqmBH,SAASzmF,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GyQpumBxF,QAAS4lF,GAAalC,EAAYr8E,GAEjC,GAAMgF,GAAOhF,MACPid,EAAQjY,EAAKw5E,kBACb/iD,EAAUz2B,EAAKy5E,mBAAoB,EAAAC,gBACrCC,SAEEC,EAAoBvC,EACxB3hD,OAAO,SAAA0hD,GACP,MAAO3gD,GAAQnY,QAAQ84D,EAAUyC,WAAWx7D,oBAE5CkoB,KAAK,SAACuzC,EAAcC,GACpB,MAAOD,GAAaE,WAAaD,EAAaC,YAIhD,OAAK/hE,IAIL2hE,EAAkB5S,KAAK,SAAAoQ,GACtB,MAAIA,GAAU4C,YAAc/hE,IAC3B0hE,EAAuBvC,GAChB,KAKFuC,GAAwBC,EAAkB1hD,OAXzC0hD,EAAkB1hD,MzQ2smB1BnkC,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GyQ/tmBT,IAAA4lF,GAAA1nF,EAAA,KzQoumBKmnF,EAAqBxlF,EAAuB+lF,EAiChDvnF,cyQpumBc6mF,EzQqumBd5mF,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,GAEtB,Y0Q5vmBD,SAAS+mF,KACR,GAAMS,GAASp9E,SAASqL,cAAc,SAChCgyE,IAEN,KACCpmF,OAAOiQ,KAAKyyB,GAASf,OAAO,SAAAyP,GAC3B1O,EAAQ0O,GAAQ6hC,KAAK,SAAA5qE,GAAA,MAAQ89E,GAAOE,YAAYh+E,MAAU+9E,EAAUj+E,KAAKipC,KAEzE,MAAMp9B,IAER,MAAOoyE,G1QovmBPpmF,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,G0Q/wmBT,IAAMoiC,IACL4jD,OACC,iCAEDC,MACC,kCACA,8CAEDC,KACC,8BAEDC,MACC,oC1Q2xmBD9nF,c0Q1wmBc+mF,E1Q2wmBd9mF,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G2QpzmBxF,QAAS8mF,KACR,GAAMC,GAAY59E,SAASqL,cAAc,MAEzC,OADAuyE,GAAU55E,UAAUC,IAAI,oBACjB25E,E3QyymBP3mF,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIiF,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,G2QpzmB3CqhF,GAAkB,EAQhBC,E3Q0zmBU,W2QzzmBf,QAAAA,GAAYrF,IAAO,EAAAh8E,cAAAkB,KAAAmgF,GAClBngF,KAAK86E,MAAQA,EACb96E,KAAKogF,WAAY,EACjBpgF,KAAKqgF,WAAY,EAEZrgF,KAAK86E,MAAMv1E,KAAK02E,cACpBj8E,KAAKigF,UAAYD,IACjBhgF,KAAK86E,MAAMsB,YAAYttE,YAAY9O,KAAKigF,Y3QwinBzC,MAxOAE,GAAS5mF,U2Q5zmBVyjF,e3Q4zmBqC,W2Q3zmBpC,MAAO,IAAIx6E,SAAQ,SAACC,EAASkkD,GAC5B,GAAI25B,GAAkBj+E,SAASwD,cAAc,uDAExCy6E,KACJA,EAAkBj+E,SAASqL,cAAc,UACzC4yE,EAAgBrjE,aAAa,OAAQ,mBACrCqjE,EAAgBrjE,aAAa,MAA7B,gDACAqjE,EAAgBrjE,aAAa,SAAS,GACtCqjE,EAAgBrjE,aAAa,SAAS,GACtC5a,SAASovB,qBAAqB,QAAQ,GAAG3iB,YAAYwxE,IAGlDJ,EACHz9E,KAEA69E,EAAgBj9E,iBAAiB,OAAQ,WACxC68E,GAAkB,EAClBz9E,MAGD69E,EAAgBj9E,iBAAiB,QAAS,SAACiK,GAC1Cq5C,EAAOr5C,S3Qk0mBV6yE,EAAS5mF,U2Q5zmBVgnF,c3Q4zmBoC,W2Q3zmBnC,IAAKvgF,KAAK86E,MAAM2B,YAAcz8E,KAAK86E,MAAM2B,UAAUx3E,MAA6C,IAArCjF,KAAK86E,MAAM2B,UAAUx3E,KAAKxE,OACpF,OAAO,CAEP,IAAI+/E,GAAWxgF,KAAK86E,MAAM2B,UAAUx3E,KAAKg2B,OAAO,SAAAttB,GAAA,MAAOA,GAAIiW,cAAcC,QAAQ,gBACjF,MAAI28D,EAAS//E,OAAS,GASrB,OAAO,CARP,KAEE,MAAO+/E,GAAS/iD,MAAMvM,UAAU,GAElC,MAAO5jB,GACL,OAAO,I3Qq0mBX6yE,EAAS5mF,U2Q7zmBVgkF,S3Q6zmB+B,W2Q5zmB9Bv9E,KAAKygF,cAAgBp+E,SAASqL,cAAc,OAC5C1N,KAAK86E,MAAMsB,YAAYttE,YAAY9O,KAAKygF,eACxCzgF,KAAK0gF,mBAAqB,GAAIC,QAAOC,IAAIC,mBAAmB7gF,KAAKygF,cAAezgF,KAAK86E,MAAMI,SAG3Fl7E,KAAK8gF,UAAY,GAAIH,QAAOC,IAAIG,UAAU/gF,KAAK0gF,oBAG/C1gF,KAAKghF,wBAA0BhhF,KAAKghF,wBAAwB5gF,KAAKJ,MACjEA,KAAKihF,eAAiBjhF,KAAKihF,eAAe7gF,KAAKJ,MAC/CA,KAAKkhF,eAAiBlhF,KAAKkhF,eAAe9gF,KAAKJ,MAC/CA,KAAKmhF,2BAA6BnhF,KAAKmhF,2BAA2B/gF,KAAKJ,MACvEA,KAAKohF,4BAA8BphF,KAAKohF,4BAA4BhhF,KAAKJ,MAGzEA,KAAK8gF,UAAUz9E,iBACds9E,OAAOC,IAAIS,sBAAsBC,KAAKC,mBACtCvhF,KAAKghF,yBACL,GACDhhF,KAAK8gF,UAAUz9E,iBACds9E,OAAOC,IAAIY,aAAaF,KAAKG,SAC7BzhF,KAAKihF,gBACL,GAEDjhF,KAAK0hF,aAEL1hF,KAAK2hF,mBAAqB3hF,KAAK2hF,mBAAmBvhF,KAAKJ,MACnDA,KAAK86E,MAAMv1E,KAAK02E,YACnBj8E,KAAK2hF,qBAEL3hF,KAAKigF,WAAajgF,KAAKigF,UAAU58E,iBAAiB,QAASrD,KAAK2hF,qB3Q2zmBjExB,EAAS5mF,U2QvzmBVmoF,W3QuzmBiC,W2QrzmBhC,GAAME,GAAa,GAAIjB,QAAOC,IAAIiB,WAE9BhoD,SAAmB75B,KAAK86E,MAAMjhD,UAAUkkB,SAAxC,SAAyD/9C,KAAK86E,MAAMjhD,UAAUwiD,QAC5EyF,EAAQ9hF,KAAKugF,eACfuB,KACHjoD,aAAuBioD,EAGxB,IAAIC,8FAA4G/hF,KAAK86E,MAAMjhD,UAAUsY,KAAjI,OAA4InyC,KAAK86E,MAAMjhD,UAAUqC,MAAjK,kCAAwMxO,mBAAmBmM,EAE/N+nD,GAAWI,SAAWD,EAItBH,EAAWK,kBAAoB,IAC/BL,EAAWM,mBAAqB,IAEhCN,EAAWO,qBAAuB,IAClCP,EAAWQ,sBAAwB,IAEnCpiF,KAAK8gF,UAAUY,WAAWE,I3Q0zmB1BzB,EAAS5mF,U2QvzmBVynF,wB3QuzmB8C,S2QvzmBtBqB,GAEvB,GAAMC,GAAuB,GAAI3B,QAAOC,IAAI2B,oBAC5CD,GAAqBE,6CAA8C,EACnExiF,KAAKyiF,WAAaJ,EAAsBK,cAAc1iF,KAAK86E,MAAMI,QAASoH,GAG1EtiF,KAAKyiF,WAAWp/E,iBAAiBs9E,OAAOC,IAAIY,aAAaF,KAAKG,SAAUzhF,KAAKihF,gBAC7EjhF,KAAKyiF,WAAWp/E,iBAAiBs9E,OAAOC,IAAI+B,QAAQrB,KAAKsB,wBAAyB5iF,KAAKmhF,4BACvFnhF,KAAKyiF,WAAWp/E,iBAAiBs9E,OAAOC,IAAI+B,QAAQrB,KAAKuB,yBAA0B7iF,KAAKohF,6BACxFphF,KAAKyiF,WAAWp/E,iBAAiBs9E,OAAOC,IAAI+B,QAAQrB,KAAKwB,kBAAmB9iF,KAAKkhF,gBAGjFlhF,KAAKyiF,WAAWp/E,iBAAiBs9E,OAAOC,IAAI+B,QAAQrB,KAAKyB,OAAQ/iF,KAAKkhF,gBACtElhF,KAAKyiF,WAAWp/E,iBAAiBs9E,OAAOC,IAAI+B,QAAQrB,KAAK0B,QAAShjF,KAAKkhF,gBACvElhF,KAAKyiF,WAAWp/E,iBAAiBs9E,OAAOC,IAAI+B,QAAQrB,KAAK2B,SAAUjjF,KAAKkhF,gBAExElhF,KAAKogF,WAAY,EACjBpgF,KAAKkjF,Y3Q0zmBL/C,EAAS5mF,U2QvzmBV2pF,S3QuzmB+B,W2QjzmB9B,GAAKljF,KAAKmjF,YAAV,CAMA,GAAKnjF,KAAK86E,MAAMv1E,KAAKy1E,aAEd,IAAKh7E,KAAKogF,UAChB,WAFApgF,MAAK86E,MAAMI,QAAQ6C,MAKpB,KAEC/9E,KAAKyiF,WAAWrhF,KAAKpB,KAAK86E,MAAMI,QAAQn1C,YAAa/lC,KAAK86E,MAAMI,QAAQt1C,aAAc+6C,OAAOC,IAAIwC,SAASC,QAG1GrjF,KAAKyiF,WAAW/xD,QACf,MAAO4yD,GAERtjF,KAAK86E,MAAMI,QAAQ6C,U3Q2zmBpBoC,EAAS5mF,U2QvzmBVooF,mB3QuzmByC,W2QvzmBpB,GAAA/gF,GAAAZ,IAEpBA,MAAKygF,cAAcp6E,UAAUC,IAAI,eAEjCtG,KAAK0gF,mBAAmB6C,YAExB,IAAMC,GAAwB,QAAxBA,KACL5iF,EAAKuiF,aAAc,EACnBviF,EAAKsiF,WACLtiF,EAAKk6E,MAAMI,QAAQr+D,oBAAoB,iBAAkB2mE,GAE1DxjF,MAAK86E,MAAMI,QAAQ73E,iBAAiB,iBAAkBmgF,GAGtDxjF,KAAK86E,MAAMI,QAAQj3E,OAEnBjE,KAAKigF,WAAajgF,KAAKigF,UAAUpjE,oBAAoB,QAAS7c,KAAK2hF,oBACnE3hF,KAAKigF,WAAajgF,KAAK86E,MAAMsB,YAAYj9D,YAAYnf,KAAKigF,iBACnDjgF,MAAKigF,W3Q4zmBZE,EAAS5mF,U2QzzmBV2nF,e3QyzmBqC,S2QzzmBtBuC,GAGd,GAAMC,GAAKD,EAAQE,OACnB,QAAQF,EAAQ9hF,MACf,IAAKg/E,QAAOC,IAAI+B,QAAQrB,KAAKyB,OAGvBW,EAAGE,YAGP5jF,KAAK86E,MAAMI,QAAQ6C,MAEpB,MACD,KAAK4C,QAAOC,IAAI+B,QAAQrB,KAAK0B,QAIxBU,EAAGE,UAOP,MACD,KAAKjD,QAAOC,IAAI+B,QAAQrB,KAAK2B,SACxBS,EAAGE,a3Qg0mBTzD,EAAS5mF,U2QzzmBV0nF,e3QyzmBqC,W2QxzmBpCjhF,KAAKyiF,YAAcziF,KAAKyiF,WAAWr/D,UACnCpjB,KAAK86E,MAAMsB,YAAYj9D,YAAYnf,KAAKygF,eACpCzgF,KAAKigF,YACRjgF,KAAKigF,UAAUpjE,oBAAoB,QAAS7c,KAAK2hF,oBACjD3hF,KAAK86E,MAAMsB,YAAYj9D,YAAYnf,KAAKigF,iBACjCjgF,MAAKigF,WAEbjgF,KAAK86E,MAAMoC,eAAiBl9E,KAAK86E,MAAMoC,cAAcrgE,oBAAoB,QAAS7c,KAAK2hF,oBACvF3hF,KAAK86E,MAAMv1E,KAAKy1E,aAAc,EAC9Bh7E,KAAKkjF,Y3Q4zmBL/C,EAAS5mF,U2QzzmBV4nF,2B3QyzmBiD,W2QxzmBhDnhF,KAAK86E,MAAMI,QAAQ7yC,S3Q4zmBnB83C,EAAS5mF,U2QzzmBV6nF,4B3QyzmBkD,W2QxzmBjDphF,KAAK86E,MAAMsB,YAAYj9D,YAAYnf,KAAKygF,eACxCzgF,KAAK86E,MAAMI,QAAQ6C,Q3Q4zmBZoC,IAGRloF,c2Q3zmBckoF,E3Q4zmBdjoF,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,G4Q9knBxF,QAAS2qF,GAAa5+E,GACrB,GAAM2U,GAAQ,UACR9I,EAAM7L,GAAQA,EAAK6uE,KAAK,SAAAhjE,GAAA,MAAO8I,GAAMxX,KAAK0O,IAEhD,OAAOA,IAAOA,EAAI2G,QAAQmC,EAAO,IAGlC,QAASkqE,GAAgBC,GACxB,GAAMC,GAAkBx7E,KAAKD,KAAKw7E,EAAa,KACzCE,EAAU,GAAKz7E,KAAKC,MAAMu7E,EAAkB,IAC5CE,EAAU,GAAMF,EAAkB,EAExC,OAAUC,GAAV,KAAwC,IAAnBC,EAAQzjF,OAAe,IAAMyjF,EAAUA,G5Q0jnB5D5qF,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIiF,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,G4Q7jnBzCslF,E5QklnBW,W4QjlnBhB,QAAAA,GAAarJ,IAAO,EAAAh8E,cAAAkB,KAAAmkF,GACnBnkF,KAAK86E,MAAQA,EAEb96E,KAAKuF,KAAOvF,KAAK86E,MAAMv1E,KAAK22E,gBAAgBz3E,OAAO,SAACoS,EAAKxd,GAExD,MADAwd,GAAIxd,IAAO,EACJwd,OAGR7W,KAAKokF,OAAS/hF,SAASqL,cAAc,OACrC1N,KAAKokF,OAAOltE,UAAY,gBAEpBlX,KAAKuF,KAAKu8E,QACb9hF,KAAKqkF,QAAUhiF,SAASqL,cAAc,QACtC1N,KAAKqkF,QAAQntE,UAAY,sBACzBlX,KAAKokF,OAAOt1E,YAAY9O,KAAKqkF,UAG1BrkF,KAAKuF,KAAK4nE,WACbntE,KAAKskF,WAAajiF,SAASqL,cAAc,QACzC1N,KAAKskF,WAAWptE,UAAY,yBAC5BlX,KAAKokF,OAAOt1E,YAAY9O,KAAKskF,aAG1BtkF,KAAKuF,KAAK+vD,QACbt1D,KAAK4uE,QAAUvsE,SAASqL,cAAc,MACtC1N,KAAK4uE,QAAQ13D,UAAY,sBACzBlX,KAAKokF,OAAOt1E,YAAY9O,KAAK4uE,UAG1B5uE,KAAKuF,KAAKmuB,cACb1zB,KAAKukF,cAAgBliF,SAASqL,cAAc,KAC5C1N,KAAKukF,cAAcrtE,UAAY,4BAC/BlX,KAAKokF,OAAOt1E,YAAY9O,KAAKukF,gBAG9BvkF,KAAKmzD,SAELnzD,KAAK86E,MAAMoC,cAAcpuE,YAAY9O,KAAKokF,Q5QmnnB1C,MA5BAD,GAAU5qF,U4QplnBX45D,O5QolnB8B,W4QnlnBzBnzD,KAAKqkF,UACRrkF,KAAKqkF,QAAQjgE,YAAcy/D,EAAY7jF,KAAK86E,MAAM2B,UAAUx3E,OAGzDjF,KAAKskF,aACRtkF,KAAKskF,WAAWlgE,YAAc0/D,EAAe9jF,KAAK86E,MAAM2B,UAAUh8E,SAG/DT,KAAK4uE,UACR5uE,KAAK4uE,QAAQxqD,YAAcpkB,KAAK86E,MAAM2B,UAAUl4E,MAG7CvE,KAAKukF,gBACRvkF,KAAKukF,cAAcngE,YAAcpkB,KAAK86E,MAAM2B,UAAU+H,mB5QwlnBvDL,EAAU5qF,U4QplnBXg1E,S5QolnBgC,W4QnlnB/BvuE,KAAK86E,MAAMoC,cAAc/9D,YAAYnf,KAAKokF,cAEnCpkF,MAAKokF,aACLpkF,MAAKqkF,cACLrkF,MAAK4uE,cACL5uE,MAAKskF,iBACLtkF,MAAKukF,e5QulnBLJ,IAGRlsF,c4QtlnBcksF,E5QulnBdjsF,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,GAE/B,YAUA,SAAS2B,GAAuBP,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,UAASR,GARvFI,OAAOK,eAAe1B,EAAS,cAC9B2B,OAAO,GAGR,IAAIiF,GAAmB/G,EAAoB,GAEvCgH,EAAmBrF,EAAuBoF,G6Q1rnBzCy/E,E7Q8rnBU,W6Q7rnBf,QAAAA,GAAa/4E,IAAM,EAAAzG,cAAAkB,KAAAs+E,GAClBt+E,KAAKuF,KAAOA,CAGZ,IAAMk/E,GAAYl/E,EAAK6pD,OAAOqtB,UAAYl3E,EAAK6pD,OAAOqtB,UAAUtkF,GAAKoN,EAAK6pD,OAAO7pD,KAAKpN,EACtF6H,MAAK0kF,aAAeD,EAAYl/E,EAAK87B,MAAMxd,QAAQ4gE,EAAU72E,eAE7D5N,KAAK8jD,SAED9jD,KAAKuF,KAAK43E,WACbn9E,KAAKuF,KAAK6pD,OAAOgtB,YAAY/4E,iBAAiB,QAASrD,KAAK8J,KAAK1J,KAAKJ,OAAO,GAExEA,KAAK0kF,mBACT1kF,KAAK8J,Q7Q2unBP,MAtCAw0E,GAAS/kF,U6QhsnBVuQ,K7QgsnB2B,W6Q/rnB1B9J,aAAUA,KAAK0kF,aAAe,I7QmsnB9BpG,EAAS/kF,U6QhsnBV4nC,K7QgsnB2B,W6Q/rnB1BnhC,aAAUA,KAAK0kF,aAAe,I7QmsnB9BpG,EAAS/kF,UAAT+kF,QAA0B,S6QhsnBrB72E,GAAO,GAAA7G,GAAAZ,IACRyH,GAAQ,EACXzH,KAAK0kF,aAAe1kF,KAAKuF,KAAK87B,MAAM5gC,OAAS,EACnCgH,GAASzH,KAAKuF,KAAK87B,MAAM5gC,OACnCT,KAAK0kF,aAAe,EAEpB1kF,KAAK0kF,aAAej9E,CAIrB,IAAMk9E,GAAiB3kF,KAAKuF,KAAK6pD,OAAOqtB,WAAaz8E,KAAKuF,KAAK6pD,OAAOqtB,UAAUtkF,EAE5EwsF,KAAmB3kF,KAAK8jD,MAAM6gC,KACjC3kF,KAAK8jD,MAAM6gC,GAAkB3kF,KAAKuF,KAAK6pD,OAAOqtB,UAG/C,IAAMmI,GAAc5kF,KAAKuF,KAAK87B,MAAMrhC,KAAK0kF,cAEnCG,GACL1sF,GAAIysF,EACJ/rE,KAAM7Y,KAAK8jD,MAAM8gC,GAGlB,OAAO5kF,MAAKuF,KAAK6pD,OAAO+D,OAAO0xB,GAAe7iF,KAAK,WAClDpB,EAAK2E,KAAK6pD,OAAO8rB,SAAWt6E,EAAK2E,KAAK6pD,OAAO8rB,QAAQ6C,U7QssnB/CO,IAGRrmF,c6QpsnBcqmF,E7QqsnBdpmF,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,EAASH,I8QjwnBhC,SAAA+wC,IAAA,SAAA59B,EAAA65E,GACA5sF,EAAAD,QAAA6sF,EAAAhtF,EAAA,KAAAA,EAAA,KAAAA,EAAA,OAGCkI,KAAA,SAAA+kF,EAAAC,EAAAC,GA2ED,QAAAC,GAAAC,EAAAjlC,EAAAn6C,GACA,GAAAo7B,GAAA+e,EAAAklC,qBACAjkD,MAAAvjB,aAAAsiC,IAAA/e,EAAA,KACA,IAAA51B,GAAA05E,EAAA72C,OAAA+2C,EAAAjlC,EAAA/e,EAGA,OAFA+e,GAAAklC,sBAAA75E,EACA,kBAAAxF,QACAwF,KAAA85E,WAGA,QAAAC,GAAA3uD,GACA,GAAA4uD,GAAA5uD,EAAAyuD,qBACA,UAAAG,KAAA3nE,aAAA+Y,KACAsuD,EAAA72C,OAAA62C,EAAA9nE,EAAAqoE,GAAA7uD,EAAA4uD,IACA,GAkCA,QAAAE,GAAA9jF,GACA,MAAA+L,GAAAtN,KAAA,KAAAuB,GAQA,QAAA+L,KACA,GAAAy3E,GAAAF,EAAA9nE,EAAA9Q,MAAA/Q,OAAAkF,UAEA,SAAA2kF,EAAAxhE,WACAwhE,EAAAxhE,SAAAqhE,GAGAU,EAAAP,EAEA,IAAAvlB,GAAAulB,EAAA/qD,YAAA+qD,EAAA/qD,WAAAwlC,GAKA,OAJA+lB,IAAA/lB,GAAA,gBAAAA,KACAulB,EAAA/qD,WAAAwlC,IAAAgmB,EAAAhmB,EAAA+lB,IAGAR,EAGA,QAAAU,GAAA9hE,EAAA+hE,GAGA,OAFA3mD,GAAA8lD,EAAA9nE,EAAA4G,EAAAJ,UAAAI,EAAApiB,KAAAoiB,EAAAqW,YAAArW,EAAA+hE,MAAA/hE,EAAAo7C,UAAAp7C,EAAA+hE,MAAA3mB,UAEA4mB,EAAAvlF,UAAAC,OAAA0+D,EAAA3tD,MAAAu0E,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAwFA,EAAAD,EAAaC,IACrG7mB,EAAA6mB,EAAA,GAAAxlF,UAAAwlF,EAGA,OAAAf,GAAAgB,aACAhB,EAAAgB,aAAA55E,MAAA/Q,QAAA6jC,EAAA2mD,GAAAl1E,OAAAuuD,IAEAzxD,EAAArB,MAAA/Q,QAAA6jC,EAAAxb,SAAA+X,OAAwEyD,EAAA/E,gBAAuB0rD,IAAAl1E,OAAAuuD,EAAA1+D,QAAA0+D,GAAAhgC,EAAAggC,eAG/F,QAAA+mB,GAAAniE,GACA,MAAAA,iBAAAoiE,IAAApiE,EAAAqiE,WAAAC,GAGA,QAAAT,GAAArhF,EAAAgtD,GACA,MAAAA,GAAA+0B,YAAA/hF,KAAAgtD,EAAA+0B,YAAA/hF,GAAA,SAAAgiF,GACAh1B,KAAAi1B,OACAj1B,EAAAi1B,KAAAjiF,GAAAgiF,EACA,OAAAA,UACAh1B,GAAA+0B,YAAA/hF,GACAgtD,EAAA,SAMA,QAAAm0B,GAAA3kF,GACA,GAAAq5B,GAAAr5B,EAAAq5B,UAEA,IAAAA,EAAA,CACA,GAAAqsD,GAAArsD,EAAAljB,WAAAkjB,UACAqsD,KAAArsD,EAAAljB,UAAAuvE,IAGA,QAAA/qD,GAAAqS,EAAA+3C,EAAAvuE,GACA,OAAAle,KAAAysF,GACAvuE,KAAA,SAAAuuE,EAAAzsF,KACA00C,EAAA10C,GAAAysF,EAAAzsF,GAGA,OAAA00C,GAOA,QAAA/iC,MAEA,QAAA07E,GAAAxtF,GACA,QAAAutF,GAAAX,EAAAljE,GACA8Y,EAAA17B,KAAA9G,GACAytF,EAAAtuF,KAAA2H,KAAA8lF,EAAAljE,EAAAgkE,GACAC,EAAA7mF,MACA8mF,EAAAzuF,KAAA2H,KAAA8lF,EAAAljE,GAmBA,MAhBA1pB,GAAA6tF,YACAN,EAAAM,UAAA7tF,EAAA6tF,WAEA7tF,EAAA8tF,eACAP,EAAAO,aAAA9tF,EAAA8tF,cAEA9tF,EAAA+tF,kBACAR,EAAAO,aAAA9tF,EAAA+tF,mBAGAj8E,EAAAzR,UAAAotF,EAAAptF,UACAktF,EAAAltF,UAAA,GAAAyR,GACAy7E,EAAAltF,UAAAyN,YAAAy/E,EAEAA,EAAAS,YAAAhuF,EAAAguF,aAAA,YAEAT,EAGA,QAAAI,GAAA17E,GACA,OAAA7D,KAAA6D,GAAA,CACA,GAAA6R,GAAA7R,EAAA7D,EACA,mBAAA0V,MAAAmqE,SAAAC,EAAA5tF,eAAA8N,MACA6D,EAAA7D,GAAA0V,EAAA5c,KAAA+K,IAAAg8E,SAAA,IAKA,QAAAE,GAAAl8E,EAAA7S,EAAAgd,GAIA,GAHA,gBAAAhd,KACAA,EAAA6S,EAAAnE,YAAAzN,UAAAjB,IAEA,kBAAAA,GACA,MAAAA,GAAA+T,MAAAlB,EAAAmK,GAIA,QAAAgyE,KACA,GAAAC,GAAA/mF,SACA,mBAEA,OADA4xD,GAAA,OACAo1B,EAAA,EAAoBA,EAAAD,EAAA9mF,OAAoB+mF,IAAA,CACxC,GAAAzoE,GAAAsoE,EAAArnF,KAAAunF,EAAAC,GAAAhnF,UACAlF,UAAAyjB,IAAAqzC,EAAArzC,GAEA,MAAAqzC,IAIA,QAAA00B,GAAAhB,EAAAljE,GACA6kE,EAAApvF,KAAA2H,KAAA8lF,EAAAljE,GACA5iB,KAAA0nF,0BAAAJ,EAAAtnF,KAAA0nF,2BAAA,4BAAAD,GACAznF,KAAAouC,OAAAk5C,EAAAK,EAAA3nF,KAAAouC,QAAA,SAAAw5C,GAGA,QAAAH,GAAA3B,GACA,GAAAA,EAAA,CAEA,GAAAvtF,GAAAutF,EAAA3mB,QAUA,IATA5mE,GAAA,IAAAA,EAAAkI,SACAqlF,EAAA3mB,SAAA5mE,EAAA,GAEAutF,EAAA3mB,UAAA,gBAAA2mB,GAAA3mB,WACA2mB,EAAA3mB,SAAA1+D,OAAA,EACAqlF,EAAA3mB,SAAA,GAAA2mB,EAAA3mB,WAIA0oB,EAAA,CACA,GAAAd,GAAA/mF,KAAA+mF,WAAA/mF,KAAAgH,YAAA+/E,SACA,IAAAA,EACA,OAAAp9C,KAAAo9C,GACA,GAAAA,EAAAvtF,eAAAmwC,IAAA,kBAAAo9C,GAAAp9C,GAAA,CACA,GAAAnkC,GAAAuhF,EAAAp9C,GAAAm8C,EAAAn8C,EAAA3pC,KAAAgH,YAAAzC,KAAA,OACA,IAAAiB,EAAA,KAAAA,MAOA,QAAAmiF,KACAhC,EAAA3lF,KAGA,QAAA4nF,KACAjC,IAAA3lF,OACA2lF,EAAA,MAIA,QAAAgB,GAAAb,EAAAljE,EAAArd,GACA0/E,EAAA6C,UAAAzvF,KAAA2H,KAAA8lF,EAAAljE,GACA5iB,KAAAwmF,QACAxmF,KAAAsmF,eACA/gF,IAAAqhF,GACAE,EAAAzuF,KAAA2H,KAAA8lF,EAAAljE,GA9SAmiE,EAAA,WAAAA,KAAA,WAAAA,EACAC,EAAA,WAAAA,KAAA,WAAAA,CAEA,IAAA3gF,GAAA,SAEA0jF,EAAA,guBAAAl4E,MAAA,KAEAw2E,EAAA,kBAAAr1E,sCAAA,wBAEAo2E,GACApgF,YAAA,EACAonC,OAAA,EACA45C,sBAAA,EACAC,0BAAA,EACAC,oBAAA,EACAC,mBAAA,EACAC,mBAAA,EACAC,kBAAA,EACAC,qBAAA,EACAC,oBAAA,GAGA3B,KAEAiB,EAAA,mBAAAh/C,KAAA2/C,SAAA,kBAEAhD,EAAA,WACA,aAGAW,EAAAlB,EAAA9nE,EAAA,IAAAnW,WACAm/E,GAAA5sF,UAAA6sF,SAAAC,EAEA/sF,OAAAK,eAAAwsF,EAAA5sF,UAAA,QACAkC,IAAA,WACA,MAAAuE,MAAA2jB,UAEAhP,IAAA,SAAAqI,GACAhd,KAAA2jB,SAAA3G,KAIA1jB,OAAAK,eAAAwsF,EAAA5sF,UAAA,SACAkC,IAAA,WACA,MAAAuE,MAAAo6B,YAEAzlB,IAAA,SAAAqI,GACAhd,KAAAo6B,WAAApd,IAIA,IAAAyrE,IACAhtF,IAAA,WACA,MAAAuE,MAAAo6B,YAAAp6B,KAAAo6B,WAAA+kC,UAEAxqD,IAAA,SAAAwqD,GACA,GAAAn3D,GAAAhI,KAAAo6B,aAAAp6B,KAAAo6B,cACApyB,GAAAm3D,aAIAupB,EAAAzD,EAAA1kF,QAAA4kF,OAAAK,CACAP,GAAA1kF,QAAA4kF,MAAA,SAAAA,GACA,GAAAn9E,GAAAm9E,EAAA/qD,UACApyB,OAAAm9E,EAAA/qD,eAEA9gC,OAAAkc,eAAAlc,OAAAkc,aAAAxN,KACAA,EAAA0zB,KAAgB1zB,GAAA,IAEhB1O,OAAAK,eAAAqO,EAAA,WAAAygF,GACAC,EAAAvD,GAuDA,QAlCAwD,MAEAC,GACA/xE,IAAA,SAAAsoD,EAAAryD,EAAA3B,GAGA,MAFAg0D,GAAAypB,EAAAC,QAAA1pB,GACAh0D,OAAAg0D,IAAAryD,IAAA1M,KAAA+K,IACAg0D,EAAAtoD,IAAA/J,IAEA4V,QAAA,SAAAy8C,EAAAryD,EAAA3B,GACAg0D,EAAAypB,EAAAC,QAAA1pB,GACAh0D,OAAAg0D,IAAAryD,IAAA1M,KAAA+K,IACAg0D,EAAAz8C,QAAA5V,IAEAi3C,MAAA,SAAAob,GAEA,MADAA,GAAAypB,EAAAC,QAAA1pB,GACAA,EAAA1+D,QAEAqoF,KAAA,SAAA3pB,GAEA,GADAA,EAAAypB,EAAAC,QAAA1pB,GACA,IAAAA,EAAA1+D,OAAA,SAAA4gB,OAAA,0CACA,OAAA89C,GAAA,IAEA0pB,QAAA,SAAA1pB,GACA,MAAA3tD,OAAAc,SAAAd,MAAAc,QAAA6sD,KAAAwpB,EAAA/3E,OAAAuuD,KAIAwmB,EAAA,OAMAoD,KACAjlF,EAAAikF,EAAAtnF,OAA8BqD,KAC9BilF,EAAAhB,EAAAjkF,IAAA2hF,EAAAsC,EAAAjkF,GAkEA,IAAAklF,GAAA,SAAAz3B,GACA,MAAAA,GAAAxjB,MAAAwjB,EAgHAo1B,GAAAptF,UAAA,GAAA0rF,GAAA6C,UACApsD,EAAAirD,EAAAptF,WACAyN,YAAA2/E,EAEAsC,oBAEAC,WAAA,WACA,MAAAlpF,MAAA+tC,MAEAo7C,UAAA,WACA,QAAAnpF,KAAA+tC,OAIA,IAAAtmC,IAAcpD,UAAA0kF,MAAAhE,YAAA6D,WAAAx6C,OAAA82C,EAAAwB,cAAAjB,gBAAA/3E,gBAAAu4E,aAAAJ,EAAAK,iBAAA8C,cAAA1D,yBAAAwC,UAAAnB,EAEd,OAAAl/E,O9QuwnB8BpP,KAAKJ,EAASH,EAAoB,OAI1D,SAASI,EAAQD,G+QvkoBvB,QAAAmxF,KACA,SAAA/nE,OAAA,mCAEA,QAAAgoE,KACA,SAAAhoE,OAAA,qCAsBA,QAAAioE,GAAAC,GACA,GAAAC,IAAAzwF,WAEA,MAAAA,YAAAwwF,EAAA,EAGA,KAAAC,IAAAJ,IAAAI,IAAAzwF,WAEA,MADAywF,GAAAzwF,WACAA,WAAAwwF,EAAA,EAEA,KAEA,MAAAC,GAAAD,EAAA,GACK,MAAAj8E,GACL,IAEA,MAAAk8E,GAAAnxF,KAAA,KAAAkxF,EAAA,GACS,MAAAj8E,GAET,MAAAk8E,GAAAnxF,KAAA2H,KAAAupF,EAAA,KAMA,QAAAE,GAAAC,GACA,GAAAC,IAAAxxE,aAEA,MAAAA,cAAAuxE,EAGA,KAAAC,IAAAN,IAAAM,IAAAxxE,aAEA,MADAwxE,GAAAxxE,aACAA,aAAAuxE,EAEA,KAEA,MAAAC,GAAAD,GACK,MAAAp8E,GACL,IAEA,MAAAq8E,GAAAtxF,KAAA,KAAAqxF,GACS,MAAAp8E,GAGT,MAAAq8E,GAAAtxF,KAAA2H,KAAA0pF,KAYA,QAAAE,KACAC,GAAAC,IAGAD,GAAA,EACAC,EAAArpF,OACA4gC,EAAAyoD,EAAAl5E,OAAAywB,GAEA0oD,KAEA1oD,EAAA5gC,QACAupF,KAIA,QAAAA,KACA,IAAAH,EAAA,CAGA,GAAA5xE,GAAAqxE,EAAAM,EACAC,IAAA,CAGA,KADA,GAAAl9D,GAAA0U,EAAA5gC,OACAksB,GAAA,CAGA,IAFAm9D,EAAAzoD,EACAA,OACA0oD,EAAAp9D,GACAm9D,GACAA,EAAAC,GAAAvgD,KAGAugD,MACAp9D,EAAA0U,EAAA5gC,OAEAqpF,EAAA,KACAD,GAAA,EACAJ,EAAAxxE,IAiBA,QAAAgyE,GAAAV,EAAAW,GACAlqF,KAAAupF,MACAvpF,KAAAkqF,QAYA,QAAAnlE,MAhKA,GAOAykE,GACAG,EARA9gD,EAAA3wC,EAAAD,YAgBA,WACA,IAEAuxF,EADA,kBAAAzwF,YACAA,WAEAqwF,EAEK,MAAA97E,GACLk8E,EAAAJ,EAEA,IAEAO,EADA,kBAAAxxE,cACAA,aAEAkxE,EAEK,MAAA/7E,GACLq8E,EAAAN,KAuDA,IAEAS,GAFAzoD,KACAwoD,GAAA,EAEAE,IAyCAlhD,GAAAshD,SAAA,SAAAZ,GACA,GAAAj0E,GAAA,GAAA9D,OAAAhR,UAAAC,OAAA,EACA,IAAAD,UAAAC,OAAA,EACA,OAAAqD,GAAA,EAAuBA,EAAAtD,UAAAC,OAAsBqD,IAC7CwR,EAAAxR,EAAA,GAAAtD,UAAAsD,EAGAu9B,GAAA5/B,KAAA,GAAAwoF,GAAAV,EAAAj0E,IACA,IAAA+rB,EAAA5gC,QAAAopF,GACAP,EAAAU,IASAC,EAAA1wF,UAAAiwC,IAAA,WACAxpC,KAAAupF,IAAAl9E,MAAA,KAAArM,KAAAkqF,QAEArhD,EAAAysB,MAAA,UACAzsB,EAAAuhD,SAAA,EACAvhD,EAAAwhD,OACAxhD,EAAAyhD,QACAzhD,EAAAxkC,QAAA,GACAwkC,EAAA0hD,YAIA1hD,EAAAjO,GAAA7V,EACA8jB,EAAA2hD,YAAAzlE,EACA8jB,EAAAhG,KAAA9d,EACA8jB,EAAApnB,IAAAsD,EACA8jB,EAAA4hD,eAAA1lE,EACA8jB,EAAA6hD,mBAAA3lE,EACA8jB,EAAA+7B,KAAA7/C,EAEA8jB,EAAA8hD,QAAA,SAAApmF,GACA,SAAA8c,OAAA,qCAGAwnB,EAAA+hD,IAAA,WAA2B,WAC3B/hD,EAAAgiD,MAAA,SAAAvrE,GACA,SAAA+B,OAAA,mCAEAwnB,EAAAiiD,MAAA,WAA4B,W/QyloBtB,SAAS5yF,EAAQD,EAASH,GgR5woBhC,GAAAizF,GAAArlE,EAAAC,GAAA,SAAA1a,EAAA65E,GAEAp/D,GAAAztB,EAAAC,GAAA6yF,EAAA,EAAAplE,EAAA,kBAAAolE,KAAA1+E,MAAApU,EAAAytB,GAAAqlE,IAAAzvF,SAAAqqB,IAAAztB,EAAAD,QAAA0tB,KAUC3lB,KAAA,SAAA/H,EAAAC,GAED,YA0BA,SAAA8yF,GAAAC,GACA,GAAAC,GAAAD,IAAAE,GAAAF,EAAAE,IAAAF,EAAAG,GACA,sBAAAF,GACA,MAAAA,GAyBA,QAAAG,GAAA7lB,GACA,QAAA8lB,GAAAhS,EAAAwM,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GAGA,GAFAD,KAAAE,EACAD,KAAAF,EACA,MAAAzF,EAAAyF,GAAA,CACA,GAAAI,GAAAC,EAAA/lE,EACA,OAAAyzD,GACA,GAAAj4D,OAAA,YAAAsqE,EAAA,KAAAF,EAAA,+BAAAD,EAAA,OAEA,KAEA,MAAAhmB,GAAAsgB,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GAIA,GAAAI,GAAAP,EAAAlrF,KAAA,QAGA,OAFAyrF,GAAAvS,WAAAgS,EAAAlrF,KAAA,SAEAyrF,EAGA,QAAAC,GAAAC,GACA,QAAAvmB,GAAAsgB,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GACA,GAAAO,GAAAlG,EAAAyF,GACAU,EAAAC,EAAAF,EACA,IAAAC,IAAAF,EAAA,CACA,GAAAJ,GAAAC,EAAA/lE,GAEAsmE,EAAAC,EAAAJ,EAEA,WAAA3qE,OAAA,WAAAsqE,EAAA,KAAAF,EAAA,kBAAAU,EAAA,kBAAAX,EAAA,qBAAAO,EAAA,OAEA,YAEA,MAAAV,GAAA7lB,GAGA,QAAA6mB,KACA,MAAAhB,GAAAiB,EAAAC,YAAA,OAGA,QAAAC,GAAAC,GACA,QAAAjnB,GAAAsgB,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GACA,GAAAO,GAAAlG,EAAAyF,EACA,KAAA/5E,MAAAc,QAAA05E,GAAA,CACA,GAAAL,GAAAC,EAAA/lE,GACAomE,EAAAC,EAAAF,EACA,WAAA3qE,OAAA,WAAAsqE,EAAA,KAAAF,EAAA,kBAAAQ,EAAA,kBAAAT,EAAA,0BAEA,OAAA1nF,GAAA,EAAqBA,EAAAkoF,EAAAvrF,OAAsBqD,IAAA,CAC3C,GAAA0C,GAAAimF,EAAAT,EAAAloF,EAAA0nF,EAAA3lE,EAAA4lE,EAAA,IAAA3nF,EAAA,IACA,IAAA0C,YAAA6a,OACA,MAAA7a,GAGA,YAEA,MAAA6kF,GAAA7lB,GAGA,QAAAknB,KACA,QAAAlnB,GAAAsgB,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GACA,IAAAkB,EAAAzG,eAAAJ,EAAAyF,IAAA,CACA,GAAAI,GAAAC,EAAA/lE,EACA,WAAAxE,OAAA,WAAAsqE,EAAA,KAAAF,EAAA,sBAAAD,EAAA,uCAEA,YAEA,MAAAH,GAAA7lB,GAGA,QAAAonB,GAAAC,GACA,QAAArnB,GAAAsgB,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GACA,KAAA3F,EAAAyF,YAAAsB,IAAA,CACA,GAAAlB,GAAAC,EAAA/lE,GACAinE,EAAAD,EAAAtoF,MAAAmnF,EACAqB,EAAAC,EAAAlH,EAAAyF,GACA,WAAAlqE,OAAA,WAAAsqE,EAAA,KAAAF,EAAA,kBAAAsB,EAAA,kBAAAvB,EAAA,iCAAAsB,EAAA,OAEA,YAEA,MAAAzB,GAAA7lB,GAGA,QAAAynB,GAAAC,GAOA,QAAA1nB,GAAAsgB,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GAEA,OADAO,GAAAlG,EAAAyF,GACAznF,EAAA,EAAqBA,EAAAopF,EAAAzsF,OAA2BqD,IAChD,GAAAkoF,IAAAkB,EAAAppF,GACA,WAIA,IAAA6nF,GAAAC,EAAA/lE,GACAsnE,EAAAznF,KAAAC,UAAAunF,EACA,WAAA7rE,OAAA,WAAAsqE,EAAA,KAAAF,EAAA,eAAAO,EAAA,sBAAAR,EAAA,sBAAA2B,EAAA,MAhBA,MAkBA9B,GAlBA75E,MAAAc,QAAA46E,GAkBA1nB,EAjBA,WACA,UAAAnkD,OAAA,wEAmBA,QAAA+rE,GAAAX,GACA,QAAAjnB,GAAAsgB,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GACA,GAAAO,GAAAlG,EAAAyF,GACAU,EAAAC,EAAAF,EACA,eAAAC,EAAA,CACA,GAAAN,GAAAC,EAAA/lE,EACA,WAAAxE,OAAA,WAAAsqE,EAAA,KAAAF,EAAA,kBAAAQ,EAAA,kBAAAT,EAAA,2BAEA,OAAAnyF,KAAA2yF,GACA,GAAAA,EAAAxyF,eAAAH,GAAA,CACA,GAAAmN,GAAAimF,EAAAT,EAAA3yF,EAAAmyF,EAAA3lE,EAAA4lE,EAAA,IAAApyF,EACA,IAAAmN,YAAA6a,OACA,MAAA7a,GAIA,YAEA,MAAA6kF,GAAA7lB,GAGA,QAAA6nB,GAAAC,GAOA,QAAA9nB,GAAAsgB,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GACA,OAAA3nF,GAAA,EAAqBA,EAAAwpF,EAAA7sF,OAAgCqD,IAAA,CACrD,GAAAypF,GAAAD,EAAAxpF,EACA,UAAAypF,EAAAzH,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GACA,YAIA,GAAAE,GAAAC,EAAA/lE,EACA,WAAAxE,OAAA,WAAAsqE,EAAA,KAAAF,EAAA,sBAAAD,EAAA,OAfA,MAiBAH,GAjBA75E,MAAAc,QAAAg7E,GAiBA9nB,EAhBA,WACA,UAAAnkD,OAAA,4EAkBA,QAAAmsE,KACA,QAAAhoB,GAAAsgB,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GACA,IAAAgC,EAAA3H,EAAAyF,IAAA,CACA,GAAAI,GAAAC,EAAA/lE,EACA,WAAAxE,OAAA,WAAAsqE,EAAA,KAAAF,EAAA,sBAAAD,EAAA,6BAEA,YAEA,MAAAH,GAAA7lB,GAGA,QAAAkoB,GAAAC,GACA,QAAAnoB,GAAAsgB,EAAAyF,EAAAC,EAAA3lE,EAAA4lE,GACA,GAAAO,GAAAlG,EAAAyF,GACAU,EAAAC,EAAAF,EACA,eAAAC,EAAA,CACA,GAAAN,GAAAC,EAAA/lE,EACA,WAAAxE,OAAA,WAAAsqE,EAAA,KAAAF,EAAA,cAAAQ,EAAA,sBAAAT,EAAA,0BAEA,OAAAnyF,KAAAs0F,GAAA,CACA,GAAAJ,GAAAI,EAAAt0F,EACA,IAAAk0F,EAAA,CAGA,GAAA/mF,GAAA+mF,EAAAvB,EAAA3yF,EAAAmyF,EAAA3lE,EAAA4lE,EAAA,IAAApyF,EACA,IAAAmN,EACA,MAAAA,IAGA,YAEA,MAAA6kF,GAAA7lB,GAGA,QAAAioB,GAAAzB,GACA,aAAAA,IACA,aACA,aACA,gBACA,QACA,eACA,OAAAA,CACA,cACA,GAAAx6E,MAAAc,QAAA05E,GACA,MAAAA,GAAA4B,MAAAH,EAEA,WAAAzB,GAAAW,EAAAzG,eAAA8F,GACA,QAGA,IAAAd,GAAAF,EAAAgB,EACA,KAAAd,EAoBA,QAnBA,IACAx5E,GADAsC,EAAAk3E,EAAA7yF,KAAA2zF,EAEA,IAAAd,IAAAc,EAAAnhF,SACA,OAAA6G,EAAAsC,EAAAlK,QAAApC,MACA,IAAA+lF,EAAA/7E,EAAA9X,OACA,aAIA,QAAA8X,EAAAsC,EAAAlK,QAAApC,MAAA,CACA,GAAAmmF,GAAAn8E,EAAA9X,KACA,IAAAi0F,IACAJ,EAAAI,EAAA,IACA,SASA,QACA,SACA,UAIA,QAAA3B,GAAAF,GACA,GAAAC,SAAAD,EACA,OAAAx6E,OAAAc,QAAA05E,GACA,QAEAA,YAAAv1E,QACA,SAEAw1E,EAGA,QAAAG,GAAAJ,GACA,GAAAC,GAAAC,EAAAF,EACA,eAAAC,EAAA,CACA,GAAAD,YAAA3tE,MACA,YACO,IAAA2tE,YAAAv1E,QACP,eAGA,MAAAw1E,GAGA,QAAAe,GAAAhB,GACA,MAAAA,GAAAhlF,aAAAglF,EAAAhlF,YAAAzC,KAGAynF,EAAAhlF,YAAAzC,KAFAmnF,EAjTA,GAAArF,GAAA,kBAAAr1E,gBAAA,QAAAA,OAAA,+BAEA27E,IAEAA,GAAAzG,eAAA,SAAAj5E,GACA,sBAAAA,IAAA,OAAAA,KAAAm5E,WAAAC,EAGA,IAAAuF,IACAjiD,KAAA,OACA/mB,QAAA,UACAkrE,aAAA,iBAGAxB,GACAC,YAAA,SAAAtlE,GACA,kBACA,MAAAA,MAKAkkE,EAAA,kBAAAn6E,gBAAAgD,SACAo3E,EAAA,aAQAM,EAAA,gBAEAqC,GACA7D,MAAA4B,EAAA,SACAkC,KAAAlC,EAAA,WACA/zE,KAAA+zE,EAAA,YACAmC,OAAAnC,EAAA,UACA7+E,OAAA6+E,EAAA,UACAhyE,OAAAgyE,EAAA,UAEAoC,IAAA7B,IACA8B,QAAA3B,EACAzoE,QAAA2oE,IACA0B,WAAAxB,EACAztD,KAAAquD,IACAa,SAAAjB,EACAkB,MAAArB,EACAsB,UAAAlB,EACAmB,MAAAd,EAqQAx1F,GAAAD,QAAA81F,KhRqxoBM,SAAS71F,EAAQD,EAASH,IiR3lpBhC,SAAAmT,EAAA65E,GACA5sF,EAAAD,QAAA6sF,EAAAhtF,EAAA,OAGCkI,KAAA,SAAAilF,GAA0B,YA2G3B,SAAAwJ,GAAAv+E,EAAA7W,GACA,GAAAmM,GAAAkpF,EAAAr1F,EACAmM,MAAA,EACAlM,OAAAK,eAAAuW,EAAA7W,EAAAs1F,EAAAt1F,IAEAu1F,EAAA1+E,EAAA7W,GAIA,QAAAu1F,GAAA1+E,EAAA7W,GACA,IACAC,OAAAK,eAAAuW,EAAA7W,EAAAs1F,EAAAt1F,IACAq1F,EAAAr1F,IAAA,EACG,MAAAiU,GACH,IAAAohF,EAAAr1F,GAAA,CACA,GAAAmM,GAAA0K,EAAAyT,SAAA,KAAArW,CACAohF,GAAAr1F,GAAAmM,GACAqpF,GAAA,mBAAAjrF,kBAAAuf,OACA0rE,GAAA,EACAjrF,QAAAuf,KAAA,0CAA6DlD,OAAAyuE,OA2E7D,QAAAI,GAAAv9B,GACA,kBACAA,EAAA42B,qBACA52B,EAAA,MA1MA,GAAAw9B,KAEAA,GAAAC,eAAA,SAAApsF,EAAAC,GACA,KAAAD,YAAAC,IACA,SAAAC,WAAA,sCAIAisF,aAAAz1F,OAAAwH,QAAA,SAAAqL,GACA,OAAArI,GAAA,EAAkBA,EAAAtD,UAAAC,OAAsBqD,IAAA,CACxC,GAAAuH,GAAA7K,UAAAsD,EAEA,QAAAzK,KAAAgS,GACA/R,OAAAC,UAAAC,eAAAnB,KAAAgT,EAAAhS,KACA8S,EAAA9S,GAAAgS,EAAAhS,IAKA,MAAA8S,IAGA4iF,EAAAE,SAAA,SAAAxoB,EAAAC,GACA,qBAAAA,IAAA,OAAAA,EACA,SAAA5jE,WAAA,iEAAA4jE,GAGAD,GAAAltE,UAAAD,OAAA2U,OAAAy4D,KAAAntE,WACAyN,aACApN,MAAA6sE,EACAjrE,YAAA,EACAwS,UAAA,EACAD,cAAA,KAGA24D,IAAAptE,OAAAstE,eAAAttE,OAAAstE,eAAAH,EAAAC,GAAAD,EAAAE,UAAAD,IAGAqoB,EAAAG,wBAAA,SAAAh2F,EAAAqQ,GACA,GAAA4C,KAEA,QAAArI,KAAA5K,GACAqQ,EAAAsa,QAAA/f,IAAA,GACAxK,OAAAC,UAAAC,eAAAnB,KAAAa,EAAA4K,KACAqI,EAAArI,GAAA5K,EAAA4K,GAGA,OAAAqI,IAGA4iF,EAAAI,0BAAA,SAAAziF,EAAArU,GACA,IAAAqU,EACA,SAAA25D,gBAAA,4DAGA,QAAAhuE,GAAA,gBAAAA,IAAA,kBAAAA,GAAAqU,EAAArU,EAKA,IAAA0wF,GAAA,mBAAA1mF,sBAAAqL,cAEA0hF,GAAA,WAEAC,GACAC,MAAA,gCAGAC,EAAA,6BAEAC,GACAt4E,UAAA,SAGAu4E,KAEAC,GAAA,CAEA3G,KACA,WACA,GAAA4G,GAAAttF,SAAAqL,cAAA,OAEAkiF,EAAAvtF,SAAAqL,aACArL,UAAAqL,cAAA,SAAAnJ,GACA,GAAAmrF,GAAA,QAAAnrF,EAAA,CACA,GAAA2L,GAAA7N,SAAAwtF,gBAAA,6BAAAtrF,EAEA2L,GAAA+M,aAAA6yE,EAAA,gBACA5/E,EAAA5L,aAAAwrF,EAAA,gBACA5/E,EAAAm6B,gBAAAylD,EAAA,kBACA,QAAAz2F,KAAA6W,KACAk/E,EAAAvrE,QAAAxqB,QAAAs2F,KAAAH,EAAAh2F,eAAAH,IACAo1F,EAAAv+E,EAAA7W,EAGA,OAAA6W,GAEA,MAAA0/E,GAAAv3F,KAAAgK,SAAAkC,MAKA,IAAAmqF,MACAG,GAAA,EA2BAkB,EAAA,SAAAjjF,GACA,GAAAkjF,GAAAxvF,UAAAC,QAAA,GAAAnF,SAAAkF,UAAA,MAAoEA,UAAA,EACpE,iBAAAsc,GACA,MAAAkzE,GAAAx2F,eAAAsjB,GAAAkzE,EAAAlzE,GAAAkzE,EAAAlzE,GAAAhQ,EAAAgQ,KAIA6xE,EAAAoB,EAAA,SAAApmD,GACA,GAAAgF,GAAAnuC,UAAAC,QAAA,GAAAnF,SAAAkF,UAAA,GAAAgvF,EAAA7lD,MAAAnpC,UAAA,EACA,QACAmU,IAAA,SAAAqI,GACA,OAAAA,GAAA1hB,SAAA0hB,EAAAhd,KAAAqqC,gBAAAsE,GAAkE3uC,KAAAid,aAAA0xB,EAAA3xB,IAElEvhB,IAAA,WACA,MAAAuE,MAAAsE,aAAAqqC,OAKAmhD,EAAAC,EAAA,SAAA77D,GACA,gBAAA3vB,EAAA3K,GACA,GAAAyQ,GAAArK,KAAAgH,YAAAzN,UACAf,EAAA+L,EAAA80B,MAAAk2D,EACA,IAAA/2F,GAAA62F,EAAA71F,eAAAhB,EAAA,KACA+L,IAAAkT,QAAA83E,EAAA,MAAA3rE,aACA,IAAAqsE,GAAAZ,EAAA72F,EAAA,GACA,OAAA6R,GAAA6pB,EAAA,MAAA77B,KAAA2H,KAAAiwF,EAAA1rF,EAAA3K,GAEA,MAAAyQ,GAAA6pB,GAAA77B,KAAA2H,KAAAuE,EAAA3K,MAKAorF,EAAA,SAAAkL,GAGA,QAAAlL,KAEA,MADA+J,GAAAC,eAAAhvF,KAAAglF,GACA+J,EAAAI,0BAAAnvF,KAAAkwF,EAAA7jF,MAAArM,KAAAQ,YA4BA,MAhCAuuF,GAAAE,SAAAjK,EAAAkL,GAOAlL,EAAAzrF,UAAA2uF,oBAAA,WACAwH,GAAA,GAGA1K,EAAAzrF,UAAA4uF,mBAAA,WACAuH,GAAA,GAGA1K,EAAAzrF,UAAA60C,OAAA,SAAArtC,GACA,GAAAo+D,GAAAp+D,EAAAo+D,SACA2mB,EAAAiJ,EAAAG,wBAAAnuF,GAAA,YAQA,OANAf,MAAAmwF,cACAnwF,KAAAmwF,YAAAT,GAAA,EAEA1vF,KAAAowF,SAAAX,EAAAX,EAAA9uF,QAGAilF,EAAA9nE,EACA,MACA4xE,cAA0B1qF,QAAA,MAAAgsF,MAAA,8BAAsDvK,GAChF3mB,IAIA6lB,GACEC,EAAA6C,UASF,OAAA9C,MjRompBM,SAAS9sF,EAAQD,EAASH,IkRxzpBhC,SAAAw4F,IAAA,SAAArlF,EAAA65E,GACA5sF,EAAAD,QAAA6sF,KACC9kF,KAAA,WACD,YACA,SAAAmmF,GAAAxiE,EAAAyW,EAAA+kC,GACAn/D,KAAA2jB,WACA3jB,KAAAo6B,aACAp6B,KAAAm/D,WAEA,QAAAzjC,GAAAxiC,EAAA4sF,GACA,OAAAhiF,KAAAgiF,GAAAtsF,GAAAnB,KAAAytF,EAAAhiF,KAAA5K,EAAA4K,GAAAgiF,EAAAhiF,GACA,OAAA5K,GAEA,QAAA0kC,GAAA1kC,GACA,GAAAqS,KACA,QAAAzH,KAAA5K,GAAAqS,EAAAzH,GAAA5K,EAAA4K,EACA,OAAAyH,GAEA,QAAAwkF,GAAAjjF,EAAAkjF,GAEA,MADAA,SACA,SAAAlzE,GACA,MAAAtjB,IAAAnB,KAAA23F,EAAAlzE,GAAAkzE,EAAAlzE,GAAAkzE,EAAAlzE,GAAAhQ,EAAAgQ,IAGA,QAAAyzE,GAAAr3F,EAAAG,GACA,OAAAb,GAAAa,EAAAwW,MAAA,KAAA/L,EAAA,EAA2CA,EAAAtL,EAAAiI,QAAAvH,EAAqB4K,IAAA5K,IAAAV,EAAAsL,GAChE,OAAA5K,GAEA,QAAA2vF,GAAA3vF,GAEA,IADA,GAAA6zB,MAAAjpB,EAAA5K,EAAAuH,OACcqD,KAAIipB,EAAAjpB,GAAA5K,EAAA4K,EAClB,OAAAipB,GAEA,QAAAyjE,GAAAtoF,GACA,GAAAye,GAAA,EACA,QAAAgjB,KAAAzhC,GAAA,CACA,GAAAyF,GAAAzF,EAAAyhC,EACA8mD,IAAA9iF,KACAgZ,OAAA,KACAA,GAAA+pE,GAAA/mD,GACAhjB,GAAA,KACAA,GAAAhZ,EACA,gBAAAA,IAAAgjF,GAAAhnD,KAAAhjB,GAAA,MACAA,GAAA,KAGA,MAAAA,GAEA,QAAAiqE,GAAAr4F,GACA,GAAAouB,GAAA,EACA,QAAAgjB,KAAApxC,KAAAoxC,KACAhjB,OAAA,KACAA,GAAAgjB,EAEA,OAAAhjB,GAEA,QAAAkqE,GAAA33F,EAAAywC,EAAA78B,GACA,GAAAkQ,GAAA9jB,EAAAywC,EACA3sB,KAAAkK,GAAAlK,KAAA9jB,EAAAywC,GAAA78B,EAAAkQ,IAEA,QAAA8zE,GAAAvsF,EAAAyD,EAAAC,GACA,MAAA8oF,GAAAxwF,GAAAgE,EAAAyD,EAAAC,GAEA,QAAA8oF,GAAA73F,EAAAqL,EAAAyD,EAAAC,EAAA1P,GACA,GAAAW,EAAAqL,GAAA,MAAArL,GAAAqL,GAAAyD,EAAAC,EAAA1P,GAEA,QAAAy4F,GAAA93F,EAAAyI,GACA,EAAAovF,GAAA73F,EAAAyI,SAA2BzI,IAAAmsF,YAE3B,QAAAloE,GAAAwG,EAAAyW,GACA,GAAAzN,GAAAnsB,UAAAC,OAAAwwF,EAAA72D,KAAA+kC,WAAA,OAAApyC,EAAA,OAAAmkE,EAAA,MACA,IAAAD,UACA72D,GAAA+kC,SACA,EAAAxyC,GAAA,MAAAxP,GAAAwG,EAAAyW,EAAA62D,EAEA,QAAAntF,GAAA,EAAuB6oB,EAAA7oB,EAASA,IAAA,CAChC,GAAAqtF,GAAA3wF,UAAAsD,EACA,KAAAstF,GAAAD,GAAA,CACAhyB,UACAgyB,EAAAjzE,KAAA6O,EAAAokE,GACApkE,EAAAskE,GACAtkE,EAAA,GAAAokE,EAEA,QAAA5pE,GAAA,EAA+BA,EAAAwF,EAAAtsB,OAAgB8mB,IAAA,CAC/C,GAAA+pE,GAAAvkE,EAAAxF,GAAAgqE,IAAAH,GAAAE,gBAAAnL,GACAoL,KAAAD,EAAAnqF,OAAAmqF,IACAC,GAAAL,EAAA/xB,IAAA1+D,OAAA,IAAA6wF,EAAqFF,GAAAE,IAAAnyB,EAAA19D,KAAA6vF,GACrFJ,EAAAK,IAIA,GAAA/4F,GAAA,GAAA2tF,GAAAxiE,EAAAyW,GAAA,OAAA+kC,GAAA,OAEA,OADA2xB,GAAA,QAAAt4F,GACAA,EAEA,QAAAg5F,GAAAjgC,EAAAl4D,EAAAo4F,GACA,GAAA3tE,GAAAzqB,EAAAwW,MAAA,KAAA6hF,EAAA5tE,EAAA,GAAA6I,EAAA7I,EAAArjB,MACA,iBAAA6M,GACA,GAAAqkF,GACA3yE,EAAAhf,KAAAkI,EAAAqpD,EAAA5sD,MAAAzL,EAAAgP,EAAA8U,EAAA,OAAAlZ,EAAA,MAMA,IALAojB,GAAAuqE,IACAz0E,EAAAuzE,EAAAjjF,EAAAmkF,GACAhB,GAAAzzE,KAAAgC,IAAAqmE,cAAAroE,EAAAuzE,EAAAvxE,EAAAyyE,KACaz0E,GAAAgC,EAAA2E,SAAA3E,EAAArd,MAAA03B,MAAA,sBAAAra,EAAAm1D,QAAAn1D,EAAAplB,MACbumB,GAAAnD,SAAA3kB,KAAA2mB,IACA2N,EAAA,GACA,IAAA7oB,EAAA,EAA2B6oB,EAAA,EAAA7oB,EAAaA,IAAA5K,IAAA4qB,EAAAhgB,MAAA5K,EAAA4qB,EAAAhgB,OACxC5K,GAAA4qB,EAAAhgB,IAAAkZ,EACAA,EAAA9U,EAAAwpF,GAEAngC,EAAA6+B,UAAAuB,KAAwDA,EAAAD,GAAA10E,EAAA20E,KAGxD,QAAAC,GAAArgC,GACA,IAAA7oB,GAAAjnC,KAAA8vD,KAAAhxD,GAAAsxF,mBAAAvB,IAAAwB;CAEA,QAAAA,KACA,GAAAppD,GAAAjoC,OAAA,CACA,GAAAsxF,GAAArpD,GAAAlwC,EAAA,MAGA,KAFAkwC,GAAAspD,GACAA,GAAAD,EACkBv5F,EAAAu5F,EAAAt0D,OAAuBjlC,EAAAy5F,QAAAC,EAAA15F,IAGzC,QAAA25F,GAAApxF,GACA,GAAA4iB,GAAA5iB,EAAA4iB,QACA,OAAAxD,IAAAwD,QAAApqB,WAAAoqB,EAAApqB,UAAA60C,QAEA,QAAAgkD,GAAAjN,EAAAviE,GACA,MAAAuiE,GAAAxhE,SAAA0uE,EAAAlN,GAAAviE,GAAA6sE,IAAA6C,EAEA,QAAAC,GAAApzD,GACA,MAAAA,GAAAqzD,MAAArzD,EAAAqzD,QAEA,QAAAC,GAAAtzD,GACA,MAAAA,GAAApB,SAEA,QAAA20D,GAAAxyC,EAAAif,GAEA,OADAxyC,GAAAwyC,EAAA1+D,OAAAkyF,EAAAhmE,EAAA,EAAAimE,EAAAD,EAAAtwF,SAAAwwF,yBAAA3yC,EACAp8C,EAAA,EAAuB6oB,EAAA7oB,EAASA,IAAA8uF,EAAA9jF,YAAAqwD,EAAAr7D,GAChC6uF,IAAAzyC,EAAApxC,YAAA8jF,GAEA,QAAAE,GAAA3zD,GACA,GAAA3mC,GAAA2mC,EAAAvhB,UACAplB,MAAA2mB,YAAAggB,GAEA,QAAA4zD,GAAA5zD,EAAA56B,EAAA3K,EAAAkqD,GACA,YAAAv/C,GAAA,UAAAA,OAAA46B,GAAA,MAAAA,GAAA56B,EACA,IAAAmqC,GAAAvP,EAAAqzD,GACA,OAAA1uC,MAAA,GAAApV,GAAAl1C,GAAAnB,KAAAq2C,EAAAnqC,GAAAmqC,EAAAnqC,GACA,UAAAA,EAAA46B,EAAAjoB,UACA,UAAA3S,EAAA46B,EAAAvwB,MAAAyO,QAAwDzjB,EAExD,QAAAo5F,GAAA7zD,EAAA56B,EAAA3K,GACA,UAAA2K,EAAA46B,EAAAjoB,UAAAtd,GAAA,GAA2D,UAAA2K,EAAA46B,EAAAvwB,MAAAyO,QAAAzjB,GAAA,GAA6D,4BAAA2K,EACxH3K,KAAAq5F,SAAA9zD,EAAA7a,UAAA1qB,EAAAq5F,QACS,QAAA1uF,OAAA46B,IAAA,SAAA56B,GACT46B,EAAA56B,GAAA3K,EACAw3F,GAAAx3F,IAAAulC,EAAAkL,gBAAA9lC,IACS2uF,EAAA/zD,EAAA56B,EAAA3K,GACT24F,EAAApzD,GAAA56B,GAAA3K,EAEA,QAAAs5F,GAAA/zD,EAAA56B,EAAA3K,GACA,UAAA2K,EAAA2sB,UAAA,MACA,GAAAvvB,SAAA/H,EACAw3F,IAAAx3F,GAAAulC,EAAAkL,gBAAA9lC,GAA0D,aAAA5C,GAAA,WAAAA,GAAAw9B,EAAAliB,aAAA1Y,EAAA3K,OACjD,CACT,GAAA8qD,GAAAyuC,GAAA5uF,GAAA4D,EAAAg3B,EAAAi0D,aAAAj0D,EAAAi0D,eAA8FtmF,EAAA3E,EAAAu8C,GAAA9qD,EAAA,mBAC9FkT,IAAAqyB,EAAAryB,EAAA,iBAAA43C,EAAA2uC,GACAlrF,EAAAu8C,GAAA9qD,GAGA,QAAAy5F,GAAA/lF,GACA,GAAAR,GAAA9M,KAAAozF,WAAAD,GAAA7lF,EAAA3L,MACA,IAAAmL,EAAA,MAAAA,GAAAzU,KAAA2H,KAAA8wF,EAAA,QAAAxjF,OAEA,QAAAgmF,GAAAn0D,GACA,MAAAA,GAAAqzD,KAAAe,EAAAp0D,IAAAswD,EAEA,QAAA8D,GAAAp0D,GACA,GAAAm+B,GAAAn+B,EAAA/E,UACA,OAAAkjC,MAAAk2B,aAAqDC,EAAAn2B,GAArDA,EAEA,QAAAm2B,GAAAn2B,GAEA,OADA5uB,GAAA,OACA5qC,EAAAw5D,EAAA78D,OAAiCqD,KAAK,CACtC,GAAA8uB,GAAA0qC,EAAAx5D,EACA4qC,WACAA,EAAA9b,EAAAruB,MAAAquB,EAAAh5B,MAEA,MAAA80C,GAEA,QAAAglD,GAAAv0D,EAAAgmD,GACA,GAAAgN,EAAAhN,GAAA,QACA,IAAAxhE,GAAAwhE,EAAAxhE,QACA,OAAAxD,IAAAwD,GAAAwb,EAAAw0D,wBAAAhwE,EACA,IAAA8uE,EAAAtzD,GAAAjY,GAAAi+D,GAA4DvhE,GAAAub,EAAAxb,cAE5D,QAAA0uE,GAAAlN,GACA,GAAAW,GAAAloD,EAAAunD,EAAA/qD,YAAA7hC,EAAA4sF,EAAAhmB,QACA5mE,KAAAutF,EAAA3mB,SAAA5mE,EACA,IAAAyuF,GAAA7B,EAAAxhE,SAAAqjE,YACA,IAAAA,EAAA,OAAAljF,KAAAkjF,IAAAxtF,GAAAnB,KAAA2uF,EAAAljF,QAAAgiF,OAAAhiF,GAAAkjF,EAAAljF,GACA,OAAAgiF,GAEA,QAAA8N,GAAAz0D,GACA00D,EAAA10D,EACA,IAAA56B,GAAAuvF,GAAA30D,EAAAxb,UAAA25C,EAAAy2B,GAAAxvF,EACA+4D,KAAA77D,KAAA09B,GAAkC40D,GAAAxvF,IAAA46B,GAElC,QAAA60D,GAAArwE,GACA,GAAApf,GAAAuvF,GAAAnwE,GAAA25C,EAAAy2B,GAAAxvF,GAAA46B,EAAAm+B,KAAA7/B,OAAAp7B,SAAAqL,cAAAiW,EAEA,OADA4uE,GAAApzD,GACAA,EAEA,QAAA00D,GAAA10D,GACA2zD,EAAA3zD,GACA,IAAAszD,EAAAtzD,KACAA,EAAAqzD,MAAArzD,EAAAqzD,IAAAe,EAAAp0D,IACAA,EAAAkmD,WAAAlmD,EAAAw0D,sBAAA,MAGA,QAAAM,GAAA1hB,EAAA4S,EAAAviE,GAEA,IADA,GAAAsxE,GAAA/O,EAAA/qD,WACc+3D,EAAAhN,IAA6BA,EAAAiN,EAAAjN,EAAAviE,EAC3C,IAAAzC,GAAAglE,EAAAxhE,UAAA,MAAAwwE,GAAA5hB,EAAA4S,EAAAviE,EACA,IAAAsE,GAAAi+D,GAAA,CACA,GAAA5S,EAAA,CACA,GAAA5wE,GAAA8wF,EAAAlgB,EACA,QAAA5wE,EAEA,MADA4wE,GAAA6hB,IAAAjP,EACA5S,CACiB,KAAA5wE,GAAAiyF,EAAArhB,GAEjB,MAAAlwE,UAAA6a,eAAAioE,GAEA,GAAA55E,GAAAgnE,EAAA5uD,EAAAwhE,EAAAxhE,UAAA0wE,EASA,OARA9hB,GAA6C3uD,GAAA2uD,EAAA5uD,gBAC7CpY,EAAAyoF,EAAArwE,GACA+uE,EAAAnnF,EAAAs9E,EAAAtW,EAAA5pB,aACA2rC,EAAA/hB,IAHAhnE,EAAAyoF,EAAArwE,GAKA4wE,EAAAhpF,EAAA45E,EAAAviE,GACA4xE,EAAAjpF,EAAA45E,GACA+O,KAAAt0B,MAAAr0D,EAAAinF,IAAA5yB,IAAAs0B,EAAAt0B,KAAAr0D,GACAA,EAEA,QAAAgpF,GAAAhiB,EAAA4S,EAAAviE,GACA,GAAAu8C,GAAA,OAAAs1B,EAAA,OAAAC,EAAA,EAAA/nE,EAAA4lD,EAAA5pB,WAAAloD,OAAAk0F,EAAA,CACA,IAAAhoE,EAAA,CACAwyC,IACA,QAAAr7D,GAAA,EAA2B6oB,EAAA7oB,EAASA,IAAA,CACpC,GAAAwtF,GAAA/e,EAAA5pB,WAAA7kD,GAAAzK,EAAAi4F,EAAAjM,WAAAiM,EAAAjM,WAAAuP,MAAA7B,EAAAzB,EAAA,MACAb,IAAAp3F,GAIiB8lE,EAAAw1B,KAAArD,GAHjBmD,UACAA,EAAAp7F,GAAAi4F,EACAoD,MAIA,GAAAG,GAAA1P,EAAAhmB,SAAA21B,EAAAD,KAAAp0F,OAAA2P,EAAA,CACA,IAAA0kF,EAAA,OAAAhxF,GAAA,EAAiCgxF,EAAAhxF,EAAUA,IAAA,CAC3C,GAAAixF,GAAAF,EAAA/wF,GAAAwtF,EAAA,MACA,IAAAoD,EAAA,CACA,GAAAhmD,GAAAqmD,EAAA36D,WAAA/gC,EAAAq1C,KAAAr1C,KACAo3F,GAAAp3F,IAAAG,GAAAnB,KAAAo8F,EAAAp7F,KACAi4F,EAAAmD,EAAAp7F,GACAo7F,EAAAp7F,GAAA,KACAq7F,KAGA,IAAApD,GAAAqD,EAAAvkF,EAAA,OAAAmX,GAAAnX,EAA8DukF,EAAAptE,EAAiBA,IAAA,CAC/E,GAAAhvB,GAAA4mE,EAAA53C,EACA,IAAAhvB,GAAAm7F,EAAAn7F,EAAAw8F,GAAA,CACAzD,EAAA/4F,EACA4mE,EAAA53C,GAAA,KACAA,IAAAotE,EAAA,GAAAA,IACAptE,IAAAnX,MACA,QAIA,GADAkhF,EAAA2C,EAAA3C,EAAAyD,EAAAnyE,GACA2vD,EAAA5pB,WAAA7kD,KAAAwtF,EAAA,CACA,GAAA/4F,GAAA+4F,EAAA1zE,aAAA20D,GAAA+e,EAAAjM,WAAAv7E,EAAAyoE,EAAA5pB,WAAA7kD,EAAA,EACAvL,IAAAy4F,EAAAz4F,EAAA,sBACAuR,EAAAyoE,EAAAnzC,aAAAkyD,EAAAxnF,GAAwDyoE,EAAAzjE,YAAAwiF,GACxD/4F,GAAAy4F,EAAAz4F,EAAA,sBAGA,GAAAm8F,EAAA,OAAA5wF,KAAA2wF,GAAAj7F,GAAAnB,KAAAo8F,EAAA3wF,IAAA2wF,EAAA3wF,KAAAq7D,EAAA/uD,EAAAukF,KAAAF,EAAA3wF,GACA6wF,GAAAvkF,GAAA4kF,EAAA71B,GAEA,QAAA61B,GAAA71B,EAAA81B,GACA,OAAAnxF,GAAAq7D,EAAA1+D,OAAqCqD,KAAK,CAC1C,GAAAwtF,GAAAnyB,EAAAr7D,EACAwtF,IAAAgD,EAAAhD,EAAA2D,IAGA,QAAAX,GAAAn1D,EAAA81D,GACA,GAAAvmD,GAAAvP,EAAAqzD,GACA9jD,IAAAqiD,EAAAriD,EAAA,WACA,IAAA6iB,GAAApyB,EAAAkmD,UACA,IAAA9zB,EAAA2jC,EAAA3jC,GAAA0jC,OAAiE,CACjE,IAAAA,EAAA,CACA,OAAAxC,EAAAtzD,GAEA,WADA2zD,GAAA3zD,EAGAy0D,GAAAz0D,GAEA,GAAA5mC,GAAA4mC,EAAAwpB,UACApwD,MAAAkI,QAAAu0F,EAAAz8F,EAAA08F,IAGA,QAAAT,GAAAjiB,EAAA4S,GACA,GAAAgQ,GAAA7B,EAAA/gB,IAAAkd,EAAA/gD,EAAAy2C,EAAA/qD,YAAAq1D,EAAAlrF,EAAA,OAAA3K,EAAA,MACA,KAAA2K,IAAA4wF,GAAA1E,GAAA/hD,EAAAnqC,KAAAyuF,EAAAzgB,EAAAhuE,EAAA,KACA,IAAAmqC,IAAA+gD,EAAA,IAAAlrF,IAAAmqC,GAAAl1C,GAAAnB,KAAAq2C,EAAAnqC,KACA3K,EAAA80C,EAAAnqC,GACAksF,GAAA72F,OAAAm5F,EAAAxgB,EAAAhuE,IAAAyuF,EAAAzgB,EAAAhuE,EAAA3K,IAGA,QAAAw7F,GAAA7jC,GACA,GAAAhtD,GAAAgtD,EAAAvqD,YAAAzC,KAAA+4D,EAAA+3B,GAAA9wF,EACA+4D,KAAA77D,KAAA8vD,GAAuC8jC,GAAA9wF,IAAAgtD,GAEvC,QAAA+jC,GAAAC,EAAAzP,EAAAljE,GAEA,OADA06C,GAAA+3B,GAAAE,EAAAhxF,MAAAooB,EAAA2wC,KAAA78D,OAAAlI,EAAA,OACAuL,EAAA,EAAuB6oB,EAAA7oB,EAASA,IAEhC,GADAvL,EAAA+kE,EAAAx5D,GACAvL,EAAAyO,cAAAuuF,EAAA,CACAj4B,EAAAhvC,OAAAxqB,EAAA,EACA,IAAA0xF,GAAA,GAAAD,GAAAzP,EAAAljE,EAEA,OADA4yE,GAAAC,SAAAl9F,EAAAw1C,KACAynD,EAGA,UAAAD,GAAAzP,EAAAljE,GAEA,QAAA8yE,GAAAnkC,GACAA,EAAA0gC,SACA1gC,EAAA0gC,QAAA,EACAL,EAAArgC,IAGA,QAAAokC,GAAApkC,EAAAu0B,EAAAvgF,EAAAqd,GACA,GAAA1D,GAAAqyC,EAAAqkC,iBACArkC,GAAAskC,MAAA/P,EAAAlmB,IACArO,EAAAqjC,MAAA9O,EAAAzsF,UACAysF,GAAAlmB,UACAkmB,GAAAzsF,IACAk4D,EAAAqkC,mBAAA,EACAhzE,IACA2uC,EAAAukC,cAAAvkC,EAAAukC,YAAAvkC,EAAA3uC,SACA2uC,EAAA3uC,WAEA2uC,EAAAxjB,MAAAgjD,EAAAx/B,EAAA,4BAAAu0B,EAAAv0B,EAAA3uC,SACA2uC,EAAAwkC,YAAAxkC,EAAAwkC,UAAAxkC,EAAAu0B,OACAv0B,EAAAu0B,QACAv0B,EAAAqkC,kBAAA12E,EACA3Z,KAAA6oC,UAAA,IAAA7oC,KAAAywF,YAAAz1F,GAAA01F,wBAAA,EAAA/D,EAAA3gC,GAAwImkC,EAAAnkC,IACxIw/B,EAAAx/B,EAAA,QAAAA,GAEA,QAAA2gC,GAAA3gC,EAAAhsD,GACA,IAAAgsD,EAAAqkC,kBAAA,CACA,GAAAM,GAAA,OAAAC,EAAA,OAAArQ,EAAAv0B,EAAAu0B,MAAAnhF,EAAA4sD,EAAA5sD,MAAAie,EAAA2uC,EAAA3uC,QAAAwzE,EAAA7kC,EAAAwkC,WAAAjQ,EAAAuQ,EAAA9kC,EAAA+kC,WAAA3xF,EAAA4xF,EAAAhlC,EAAAukC,aAAAlzE,EAAA4zE,EAAAjlC,EAAAxjB,KAAA0oD,EAAAD,GAAAjlC,EAAAkkC,QAYA,IAXAe,IACAjlC,EAAAu0B,MAAAsQ,EACA7kC,EAAA5sD,MAAA0xF,EACA9kC,EAAA3uC,QAAA2zE,EACAxF,EAAAx/B,EAAA,wBAAAu0B,EAAAnhF,EAAAie,MAAA,EAAAszE,GAAA,EAAsGnF,EAAAx/B,EAAA,sBAAAu0B,EAAAnhF,EAAAie,GACtG2uC,EAAAu0B,QACAv0B,EAAA5sD,QACA4sD,EAAA3uC,WAEA2uC,EAAAwkC,UAAAxkC,EAAA+kC,UAAA/kC,EAAAukC,YAAAvkC,EAAAkkC,SAAA,KACAlkC,EAAA0gC,QAAA,GACAiE,EAAA,CACAC,EAAApF,EAAAx/B,EAAA,SAAAu0B,EAAAnhF,EAAAie,EACA,IAAA8zE,GAAAP,KAAAxyE,SAAAmqE,EAAAv8B,EAAAolC,gBAAAplC,EAAAolC,kBAAA/zE,EAAAg0E,EAAA,OAAA7oD,EAAA,MACA,IAAA5tB,GAAAu2E,MAAAn9F,UAAA60C,OAAA,CACA,GAAAonD,GAAAjkC,EAAA8zB,UACAmQ,MAAAxuF,cAAA0vF,IACAE,EAAApB,EACAA,EAAA,KAEA,IAAAqB,GAAAxE,EAAA8D,EACAX,GAAAG,EAAAH,EAAAqB,EAAAC,EAAAhJ,IACA0H,EAAAF,EAAAoB,EAAAG,EAAA/I,GACA0H,EAAAuB,iBAAAxlC,EACAA,EAAA8zB,WAAAmQ,EACAgB,GAAAxF,EAAAwE,EAAA,sBACAG,EAAAH,EAAAqB,EAAAG,EAAAlJ,GACAoE,EAAAsD,EAAAyB,GACAT,GAAAxF,EAAAwE,EAAA,sBAEAznD,EAAAynD,EAAAznD,SACiB,CACjB,GAAAmpD,GAAAT,CACAG,GAAArlC,EAAA8zB,WACAuR,IAAAM,EAAA3lC,EAAA8zB,WAAA,OACAoR,GAAAlxF,KAAAysC,SAAAjE,EAAAkmD,EAAAiD,EAAAf,GAAA7D,EAAAxE,IAEA,GAAA2I,GAAA1oD,IAAA0oD,EAAA,CACA,GAAAj+F,GAAAi+F,EAAA74E,UACAplB,IAAAu1C,IAAAv1C,KAAA2+F,aAAAppD,EAAA0oD,GAIA,GAFAG,GAAA1B,EAAA0B,GAAA,GACArlC,EAAAxjB,OACAA,EAAA,CAEA,IADA,GAAAqpD,GAAA7lC,EAAAvyC,EAAAuyC,EAC0BvyC,IAAA+3E,kBAAuBK,EAAAp4E,CACjD+uB,GAAAs3C,WAAA+R,EACArpD,EAAA4lD,sBAAAyD,EAAApwF,YAEAwvF,GAAAzF,EAAAx/B,EAAA,qBAAA6kC,EAAAC,EAAAE,GAEA,GAAA51F,GAAA4wD,EAAA8lC,iBAAAvqF,EAAA,MACA,IAAAnM,EAAA,KAA0BmM,EAAAnM,EAAA88B,OAAc3wB,EAAAzU,KAAAk5D,EACxC,OAAA4kC,IAGA,QAAAhC,GAAA5hB,EAAA4S,EAAAviE,GAGA,IAFA,GAAArqB,GAAAg6E,KAAA8S,WAAAiS,EAAA/kB,EACAglB,EAAAh/F,GAAAg6E,EAAAohB,wBAAAxO,EAAAxhE,SACcprB,IAAAg/F,IAAAh/F,IAAAw+F,mBAA0CQ,EAAAh/F,EAAAyO,cAAAm+E,EAAAxhE,QAexD,OAdA4zE,IACA5B,EAAAp9F,EAAA85F,EAAAlN,GAAA2R,EAAAl0E,GACA2vD,EAAAh6E,EAAAw1C,OAEAx1C,IACA28F,EAAA38F,GAAA,GACAg6E,EAAA+kB,EAAA,MAEA/kB,EAAAilB,EAAArS,EAAA5S,EAAA3vD,GACA00E,GAAA/kB,IAAA+kB,IACAA,EAAAjS,WAAA,KACAiP,EAAAgD,KAGA/kB,EAEA,QAAAilB,GAAArS,EAAA5S,EAAA3vD,GACA,GAAAkjE,GAAAuM,EAAAlN,GACA5zB,EAAA+jC,EAAAnQ,EAAAxhE,SAAAmiE,EAAAljE,EAIA,OAHA2vD,KAAAhhB,EAAAxjB,OAAAwjB,EAAAxjB,KAAAwkC,GACAojB,EAAApkC,EAAAu0B,EAAAkR,EAAAp0E,GACAsvE,EAAA3gC,EAAA0lC,GACA1lC,EAAAxjB,KAEA,QAAAmnD,GAAA3jC,EAAAr2B,GACA61D,EAAAx/B,EAAA,cACAw/B,EAAAx/B,EAAA,uBACA,IAAA5iC,GAAA4iC,EAAA8zB,UACA12D,KACAumE,EAAAvmE,EAAAuM,GACAA,GAAA,EAEA,IAAA6S,GAAAwjB,EAAAxjB,IACAA,KACA7S,KAAA,GAAA43D,EAAA/kD,GACAinD,EAAAjnD,EAAA4a,YAAA,IAEAztB,IACAq2B,EAAAwlC,iBAAA,KACA3B,EAAA7jC,IAEAw/B,EAAAx/B,EAAA,uBAEA,QAAAu2B,GAAAhC,EAAAljE,GACA5iB,KAAAiyF,OAAAjyF,KAAA41F,mBAAA,EACA51F,KAAAs2F,UAAAt2F,KAAA+1F,UAAA/1F,KAAA81F,YAAA91F,KAAA+tC,KAAA/tC,KAAAy1F,SAAAz1F,KAAA+2F,iBAAA/2F,KAAAqlF,WAAArlF,KAAA61F,MAAA71F,KAAA40F,MAAA50F,KAAAy3F,cAAAz3F,KAAAq3F,iBAAA,KACAr3F,KAAA4iB,cACA5iB,KAAA8lF,QACA9lF,KAAA2E,MAAAosF,EAAA/wF,KAAA,uBAEA,QAAAouC,GAAA+2C,EAAAjlC,EAAAkC,GACA,GAAAmjC,GAAAnjC,KAAAijC,YAAAjjC,EAAAuxC,wBAAAxO,EAAAxhE,SAAA+zE,EAAAzD,EAAA7xC,EAAA+iC,GAAA5sF,GAAAgtF,GAAAmS,EAAArS,UAIA,OAHA9sF,IAAAy4F,EAAAz4F,EAAA,sBACAm/F,EAAA95E,aAAAsiC,KAAApxC,YAAA4oF,GACAn/F,GAAAy4F,EAAAz4F,EAAA,qBACAm/F,EAEA,GAAAV,IACA5oD,QAAA,GAEA0oD,GACAd,YAAA,GAEAiB,GACAjlD,OAAA,GAEAy9C,KACA6C,EAAA,GACAqF,GAAA,mBAAAt1F,UACA+xF,IAAAuD,IAAA,eAAAt1F,UAAA,0BACAmwF,GAAA,mBAAAxhF,eAAA,qCACAqjF,GAAA,YACA1D,IACAiH,QAAA,EACAC,aAAA,EACAC,YAAA,EACAC,YAAA,EACAC,KAAA,EACAC,SAAA,EACAC,aAAA,EACAC,WAAA,EACAC,aAAA,EACAC,WAAA,EACAC,UAAA,EACAC,WAAA,EACAC,QAAA,EACAC,MAAA,EACAC,QAAA,EACAC,cAAA,EACAC,OAAA,EACAn6C,OAAA,EACAo6C,KAAA,GAEA14E,GAAA,SAAAjnB,GACA,wBAAAA,IAEAguB,GAAA,SAAAhuB,GACA,sBAAAA,IAEAM,MAA2BA,eAC3Bi3F,GAAA,SAAAryE,GACA,aAAAA,GAEAgzE,GAAA,SAAAx3F,GACA,MAAAA,MAAA,SAAAA,GAEA82F,GAAAX,EAAA,SAAA7nF,GACA,MAAAA,GAAAuP,QAAA,kBAAAmM,gBAEAA,GAAAmsE,EAAA,SAAA7nF,GACA,MAAAA,GAAA0b,gBAEAk1E,GAAA,MACA,KACAA,GAAA,GAAArgB,gBACK,MAAAnrE,KACL,GAAAgjF,IAAAwI,GAAA,SAAA7xF,GACA6xF,GAAApgB,MAAAC,UAAA1xE,EACA6xF,GAAAjgB,MAAA31C,YAAA,KACKnqC,WACLwH,IACA4kF,MAAA,SAAA9lE,GACA,GAAAqvB,GAAArvB,EAAA+a,UACA,IAAAsU,IAAAvuB,GAAAd,EAAAsE,UAAA,CACA,GAAAnrB,GAAAk2C,EAAAx3B,SACA1e,KACAk2C,EAAA,SAAAl2C,QACAk2C,GAAAx3B,WAEAw3B,EAAA,UAAAmiD,EAAAniD,EAAA,QAAAkiD,GACAliD,EAAA9/B,OAAAiiF,EAAAniD,EAAA,QAAA8hD,MAIAa,MACA3oD,MACAspD,MACAmB,GAAApD,EAAA,SAAA/wE,GACA,MAAAA,GAAAvH,QAAA,WAAAmM,gBAEAmwE,MACAD,GAAA/D,EAAA,SAAAxrF,GACA,MAAAA,GAAA4hB,gBAEAkvE,KACA35D,GAAAosD,EAAAvuF,WACAw/F,UAAA,SAAA1/F,EAAAo4F,GACA,GAAAl5F,GAAAyH,KAAAy3F,gBAAAz3F,KAAAy3F,kBAAkEuB,EAAA3/F,EAAA,KAAAo4F,GAAA,GAClE,OAAAl5F,GAAAygG,KAAAzgG,EAAAygG,GAAAxH,EAAAxxF,KAAA3G,EAAAo4F,KAEArB,SAAA,SAAAzrF,EAAAoB,GACA,GAAAmC,GAAAlI,KAAA2E,KACA3E,MAAAs2F,YAAAt2F,KAAAs2F,UAAA14D,EAAA11B,IACAwzB,EAAAxzB,EAAAiY,GAAAxb,KAAAuD,EAAAlI,KAAA8lF,OAAAnhF,GACAoB,IAAA/F,KAAAq3F,iBAAAr3F,KAAAq3F,sBAAA51F,KAAAsE,GACA2vF,EAAA11F,OAEAi5F,YAAA,WACA/G,EAAAlyF,OAEAouC,OAAA,WACA,cAGA,IAAA62C,KACA9nE,IACA2qE,YACA15C,SACA0jD,WACAvxF,WACAgnF,MAAAhnF,GAEA,OAAA0kF,QlR6zpB8B5sF,KAAKJ,EAASH,EAAoB,KAAKw4F,eAI/D,SAASp4F,EAAQD,EAASH,ImRv5qBhC,SAAAw4F,EAAA4I,GAiBA,QAAAC,GAAAhhG,EAAAihG,GACAp5F,KAAAq5F,IAAAlhG,EACA6H,KAAAs5F,SAAAF,EAnBA,GAAAjP,GAAAryF,EAAA,KAAAqyF,SACA99E,EAAAC,SAAA/S,UAAA8S,MACA/D,EAAAkJ,MAAAjY,UAAA+O,MACAixF,KACAC,EAAA,CAIAvhG,GAAAc,WAAA,WACA,UAAAogG,GAAA9sF,EAAAhU,KAAAU,WAAAJ,OAAA6H,WAAA2X,eAEAlgB,EAAAiwC,YAAA,WACA,UAAAixD,GAAA9sF,EAAAhU,KAAA6vC,YAAAvvC,OAAA6H,WAAA+nC,gBAEAtwC,EAAAkgB,aACAlgB,EAAAswC,cAAA,SAAAtwB,GAA2CA,EAAA/I,SAM3CiqF,EAAA5/F,UAAAkgG,MAAAN,EAAA5/F,UAAAqmE,IAAA,aACAu5B,EAAA5/F,UAAA2V,MAAA,WACAlP,KAAAs5F,SAAAjhG,KAAAM,OAAAqH,KAAAq5F,MAIAphG,EAAAyhG,OAAA,SAAA9mE,EAAA+mE,GACAxhF,aAAAya,EAAAgnE,gBACAhnE,EAAAinE,aAAAF,GAGA1hG,EAAA6hG,SAAA,SAAAlnE,GACAza,aAAAya,EAAAgnE,gBACAhnE,EAAAinE,iBAGA5hG,EAAA8hG,aAAA9hG,EAAA2gF,OAAA,SAAAhmD,GACAza,aAAAya,EAAAgnE,eAEA,IAAAD,GAAA/mE,EAAAinE,YACAF,IAAA,IACA/mE,EAAAgnE,eAAA7gG,WAAA,WACA65B,EAAAonE,YACApnE,EAAAonE,cACKL,KAKL1hG,EAAAq4F,aAAA,kBAAAA,KAAA,SAAAxjF,GACA,GAAA3U,GAAAqhG,IACAlkF,IAAA9U,UAAAC,OAAA,IAAA6H,EAAAjQ,KAAAmI,UAAA,EAkBA,OAhBA+4F,GAAAphG,IAAA,EAEAgyF,EAAA,WACAoP,EAAAphG,KAGAmd,EACAxI,EAAAT,MAAA,KAAAiJ,GAEAxI,EAAAzU,KAAA,MAGAJ,EAAAihG,eAAA/gG,MAIAA,GAGAF,EAAAihG,eAAA,kBAAAA,KAAA,SAAA/gG,SACAohG,GAAAphG,MnR25qB8BE,KAAKJ,EAASH,EAAoB,KAAKw4F,aAAcx4F,EAAoB,KAAKohG,mB","file":"./dist/es5-polyfill-io.js","sourcesContent":["var ftNextUi =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/*global ftNextFireCondition*/\n\tvar nUi = __webpack_require__(1);\n\t\n\tnUi.bootstrap(window.ftNextUiConfig || {\n\t\tpreset: 'discrete',\n\t\tpreload: true\n\t});\n\t\n\t// such a hack, but ensures this event fires after the above\n\t// has been assigned to a global variable by webpack\n\tsetTimeout(function () {\n\t\tftNextFireCondition('nUiLoaded');\n\t}, 0);\n\t\n\tmodule.exports = nUi;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports._ReactDom = exports._React = exports._superstoreSync = exports._superstore = exports._ftdomdelegate = exports._image = exports._video = exports._viewport = exports._overlay = exports._grid = exports._expander = exports._notification = exports._utils = exports._myftDigestPromo = exports._myft = exports._footer = exports._messagePrompts = exports._welcomeMessage = exports._cookieMessage = exports._promoMessages = exports._header = exports._date = exports._tracking = exports._ads = exports.configure = exports.bootstrap = undefined;\n\t\n\tvar _jsSetup = __webpack_require__(2);\n\t\n\tObject.defineProperty(exports, 'bootstrap', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _jsSetup.bootstrap;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'configure', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _jsSetup.configure;\n\t  }\n\t});\n\t\n\t__webpack_require__(253);\n\t\n\tvar _ads2 = __webpack_require__(85);\n\t\n\tvar _ads3 = _interopRequireDefault(_ads2);\n\t\n\tvar _tracking2 = __webpack_require__(120);\n\t\n\tvar _tracking3 = _interopRequireDefault(_tracking2);\n\t\n\tvar _date2 = __webpack_require__(166);\n\t\n\tvar _date3 = _interopRequireDefault(_date2);\n\t\n\tvar _header2 = __webpack_require__(169);\n\t\n\tvar _header3 = _interopRequireDefault(_header2);\n\t\n\tvar _promoMessages2 = __webpack_require__(188);\n\t\n\tvar _promoMessages3 = _interopRequireDefault(_promoMessages2);\n\t\n\tvar _cookieMessage2 = __webpack_require__(189);\n\t\n\tvar _cookieMessage3 = _interopRequireDefault(_cookieMessage2);\n\t\n\tvar _welcomeMessage2 = __webpack_require__(190);\n\t\n\tvar _welcomeMessage3 = _interopRequireDefault(_welcomeMessage2);\n\t\n\tvar _messagePrompts2 = __webpack_require__(191);\n\t\n\tvar _messagePrompts3 = _interopRequireDefault(_messagePrompts2);\n\t\n\tvar _footer2 = __webpack_require__(192);\n\t\n\tvar _footer3 = _interopRequireDefault(_footer2);\n\t\n\tvar _myft2 = __webpack_require__(197);\n\t\n\tvar _myft3 = _interopRequireDefault(_myft2);\n\t\n\tvar _myftDigestPromo2 = __webpack_require__(240);\n\t\n\tvar _myftDigestPromo3 = _interopRequireDefault(_myftDigestPromo2);\n\t\n\tvar _utils2 = __webpack_require__(75);\n\t\n\tvar _utils3 = _interopRequireDefault(_utils2);\n\t\n\tvar _notification2 = __webpack_require__(223);\n\t\n\tvar _notification3 = _interopRequireDefault(_notification2);\n\t\n\tvar _expander2 = __webpack_require__(255);\n\t\n\tvar _expander3 = _interopRequireDefault(_expander2);\n\t\n\tvar _grid2 = __webpack_require__(258);\n\t\n\tvar _grid3 = _interopRequireDefault(_grid2);\n\t\n\tvar _overlay2 = __webpack_require__(227);\n\t\n\tvar _overlay3 = _interopRequireDefault(_overlay2);\n\t\n\tvar _viewport2 = __webpack_require__(259);\n\t\n\tvar _viewport3 = _interopRequireDefault(_viewport2);\n\t\n\tvar _oVideo = __webpack_require__(260);\n\t\n\tvar _oVideo2 = _interopRequireDefault(_oVideo);\n\t\n\tvar _nImage = __webpack_require__(248);\n\t\n\tvar image = _interopRequireWildcard(_nImage);\n\t\n\tvar _ftdomdelegate2 = __webpack_require__(110);\n\t\n\tvar _ftdomdelegate3 = _interopRequireDefault(_ftdomdelegate2);\n\t\n\tvar _superstore2 = __webpack_require__(87);\n\t\n\tvar _superstore3 = _interopRequireDefault(_superstore2);\n\t\n\tvar _superstoreSync2 = __webpack_require__(89);\n\t\n\tvar _superstoreSync3 = _interopRequireDefault(_superstoreSync2);\n\t\n\tvar _react = __webpack_require__(270);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(270);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _ads = exports._ads = _ads3.default;\n\t\n\t// Expose entry points to shared bundle\n\tvar _tracking = exports._tracking = _tracking3.default;\n\tvar _date = exports._date = _date3.default;\n\tvar _header = exports._header = _header3.default;\n\tvar _promoMessages = exports._promoMessages = _promoMessages3.default;\n\tvar _cookieMessage = exports._cookieMessage = _cookieMessage3.default;\n\tvar _welcomeMessage = exports._welcomeMessage = _welcomeMessage3.default;\n\tvar _messagePrompts = exports._messagePrompts = _messagePrompts3.default;\n\tvar _footer = exports._footer = _footer3.default;\n\tvar _myft = exports._myft = _myft3.default;\n\tvar _myftDigestPromo = exports._myftDigestPromo = _myftDigestPromo3.default;\n\tvar _utils = exports._utils = _utils3.default;\n\tvar _notification = exports._notification = _notification3.default;\n\tvar _expander = exports._expander = _expander3.default;\n\tvar _grid = exports._grid = _grid3.default;\n\tvar _overlay = exports._overlay = _overlay3.default;\n\tvar _viewport = exports._viewport = _viewport3.default;\n\tvar _video = exports._video = _oVideo2.default;\n\tvar _image = exports._image = image;\n\t\n\t// Export some third party components we're unlikely to remove in a hurry\n\tvar _ftdomdelegate = exports._ftdomdelegate = _ftdomdelegate3.default;\n\tvar _superstore = exports._superstore = _superstore3.default;\n\tvar _superstoreSync = exports._superstoreSync = _superstoreSync3.default;\n\tvar _React = exports._React = _react2.default;\n\tvar _ReactDom = exports._ReactDom = _reactDom2.default;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _componentInitializer = __webpack_require__(3);\n\t\n\texports.default = new _componentInitializer.ComponentInitializer();\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ComponentInitializer = exports.presets = undefined;\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _loader = __webpack_require__(5);\n\t\n\tvar _loader2 = _interopRequireDefault(_loader);\n\t\n\tvar _ads = __webpack_require__(85);\n\t\n\tvar _ads2 = _interopRequireDefault(_ads);\n\t\n\tvar _tracking = __webpack_require__(120);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar _date = __webpack_require__(166);\n\t\n\tvar _date2 = _interopRequireDefault(_date);\n\t\n\tvar _header = __webpack_require__(169);\n\t\n\tvar _header2 = _interopRequireDefault(_header);\n\t\n\tvar _optOut = __webpack_require__(187);\n\t\n\tvar _optOut2 = _interopRequireDefault(_optOut);\n\t\n\tvar _promoMessages = __webpack_require__(188);\n\t\n\tvar _promoMessages2 = _interopRequireDefault(_promoMessages);\n\t\n\tvar _cookieMessage = __webpack_require__(189);\n\t\n\tvar _cookieMessage2 = _interopRequireDefault(_cookieMessage);\n\t\n\tvar _welcomeMessage = __webpack_require__(190);\n\t\n\tvar _welcomeMessage2 = _interopRequireDefault(_welcomeMessage);\n\t\n\tvar _messagePrompts = __webpack_require__(191);\n\t\n\tvar _messagePrompts2 = _interopRequireDefault(_messagePrompts);\n\t\n\tvar _footer = __webpack_require__(192);\n\t\n\tvar _footer2 = _interopRequireDefault(_footer);\n\t\n\tvar _myft = __webpack_require__(197);\n\t\n\tvar _myft2 = _interopRequireDefault(_myft);\n\t\n\tvar _myftDigestPromo = __webpack_require__(240);\n\t\n\tvar _myftDigestPromo2 = _interopRequireDefault(_myftDigestPromo);\n\t\n\tvar _nImage = __webpack_require__(248);\n\t\n\tvar _nServiceWorker = __webpack_require__(251);\n\t\n\tvar serviceWorker = _interopRequireWildcard(_nServiceWorker);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar presets = exports.presets = {\n\t\tdiscrete: {\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdate: true,\n\t\t\twelcomeMessage: true\n\t\t},\n\t\tcomplete: {\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdate: true,\n\t\t\tcookieMessage: true,\n\t\t\twelcomeMessage: true,\n\t\t\tmyft: true,\n\t\t\tmessagePrompts: false,\n\t\t\tpromoMessages: false,\n\t\t\tads: true\n\t\t}\n\t};\n\t\n\tvar ComponentInitializer = exports.ComponentInitializer = function () {\n\t\tfunction ComponentInitializer() {\n\t\t\t(0, _classCallCheck3.default)(this, ComponentInitializer);\n\t\n\t\t\tthis.initializedFeatures = {};\n\t\t\tthis.configuration = {};\n\t\t\tthis.loader = new _loader2.default();\n\t\t\tthis.configure = this.configure.bind(this);\n\t\t\tthis.bootstrap = this.bootstrap.bind(this);\n\t\t}\n\t\n\t\tComponentInitializer.prototype.isInitialized = function isInitialized(feature) {\n\t\t\treturn !!this.initializedFeatures[feature];\n\t\t};\n\t\n\t\tComponentInitializer.prototype.configure = function configure() {\n\t\t\tvar options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t\t\t// NOTE: just store configuration for now, need to wait for polyfill to load before assigning\n\t\t\t// n-ui.configure is deprecated - pass in your config object as a first argument to bootstrap instead\n\t\t\tthis.configuration = options;\n\t\t};\n\t\n\t\tComponentInitializer.prototype.bootstrap = function bootstrap(config, cb) {\n\t\t\tvar _this = this;\n\t\n\t\t\t// backwards compatible with previous signature of bootstrap(cb);\n\t\t\tif (!cb && typeof config === 'function') {\n\t\t\t\tcb = config;\n\t\t\t\tconfig = null;\n\t\t\t}\n\t\n\t\t\tcb = cb || function () {\n\t\t\t\treturn null;\n\t\t\t};\n\t\t\tconfig = config || this.configuration || {};\n\t\n\t\t\t// belt and braces backwards compatibility for old api, which expected a flat config object\n\t\t\tif (!config.features) {\n\t\t\t\tconfig.features = Object.assign({}, config);\n\t\t\t}\n\t\n\t\t\tconfig.features = Object.assign({}, presets[config.preset], config.features);\n\t\n\t\t\treturn this.loader.bootstrap(config, function (_ref) {\n\t\t\t\tvar flags = _ref.flags;\n\t\t\t\tvar mainCss = _ref.mainCss;\n\t\t\t\tvar appInfo = _ref.appInfo;\n\t\t\t\t// eslint-disable-line\n\t\n\t\t\t\tif (!_this.initializedFeatures.tracking) {\n\t\t\t\t\t// FT and next tracking\n\t\t\t\t\t_tracking2.default.init(flags, appInfo);\n\t\t\t\t\t_this.initializedFeatures.tracking = true;\n\t\t\t\t}\n\t\n\t\t\t\tif (flags.get('serviceWorker')) {\n\t\t\t\t\tserviceWorker.register(flags).catch(function () {});\n\t\t\t\t} else {\n\t\t\t\t\tserviceWorker.unregister();\n\t\t\t\t}\n\t\n\t\t\t\tif (flags.get('optInOut')) {\n\t\t\t\t\t_optOut2.default.init();\n\t\t\t\t}\n\t\n\t\t\t\tif (config.features.myft && !_this.initializedFeatures.myftclient) {\n\t\t\t\t\tvar clientOpts = [];\n\t\n\t\t\t\t\tif (flags.get('follow')) {\n\t\t\t\t\t\tclientOpts.push({ relationship: 'followed', type: 'concept' });\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (flags.get('saveForLater')) {\n\t\t\t\t\t\tclientOpts.push({ relationship: 'saved', type: 'content' });\n\t\t\t\t\t}\n\t\t\t\t\t_myft2.default.client.init(clientOpts);\n\t\n\t\t\t\t\tif (flags.get('myFtDigestPromo')) {\n\t\t\t\t\t\t_myftDigestPromo2.default.init();\n\t\t\t\t\t}\n\t\n\t\t\t\t\t_this.initializedFeatures.myftClient = true;\n\t\t\t\t}\n\t\n\t\t\t\tif (config.features.header && !_this.initializedFeatures.header) {\n\t\t\t\t\t_header2.default.init(flags);\n\t\t\t\t\t_this.initializedFeatures.header = true;\n\t\t\t\t}\n\t\n\t\t\t\tif (config.features.date && !_this.initializedFeatures.date) {\n\t\t\t\t\t_date2.default.init();\n\t\t\t\t\t_this.initializedFeatures.date = true;\n\t\t\t\t}\n\t\n\t\t\t\tif (config.features.lazyLoadImages && !_this.initializedFeatures.lazyLoadImages) {\n\t\t\t\t\t(0, _nImage.lazyLoad)();\n\t\t\t\t\t_this.initializedFeatures.lazyLoadImages = true;\n\t\t\t\t}\n\t\n\t\t\t\tmainCss.then(function () {\n\t\n\t\t\t\t\tif (config.features.footer && !_this.initializedFeatures.footer) {\n\t\t\t\t\t\t_footer2.default.init(flags);\n\t\t\t\t\t\t_this.initializedFeatures.footer = true;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (config.features.cookieMessage && !_this.initializedFeatures.cookieMessage) {\n\t\t\t\t\t\t_cookieMessage2.default.init(flags);\n\t\t\t\t\t\t_this.initializedFeatures.cookieMessage = true;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (config.features.welcomeMessage && !_this.initializedFeatures.welcomeMessage) {\n\t\t\t\t\t\tflags.get('welcomePanel') && _welcomeMessage2.default.init();\n\t\t\t\t\t\t_this.initializedFeatures.welcomeMessage = true;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (config.features.messagePrompts && !_this.initializedFeatures.messagePrompts) {\n\t\t\t\t\t\t_messagePrompts2.default.init(flags);\n\t\t\t\t\t\t_this.initializedFeatures.messagePrompts = true;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (config.features.myft && !_this.initializedFeatures.myftUi) {\n\t\t\t\t\t\t_myft2.default.ui.init({\n\t\t\t\t\t\t\tanonymous: !/FTSession=/.test(document.cookie),\n\t\t\t\t\t\t\tflags: flags\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_myft2.default.uiInstant.init({\n\t\t\t\t\t\t\tanonymous: !/FTSession=/.test(document.cookie),\n\t\t\t\t\t\t\tflags: flags\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this.initializedFeatures.myftUi = true;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (config.features.promoMessages && !_this.initializedFeatures.promoMessages) {\n\t\t\t\t\t\t_promoMessages2.default.init(flags);\n\t\t\t\t\t\t_this.initializedFeatures.promoMessages = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\treturn Promise.resolve({ flags: flags, mainCss: mainCss, appInfo: appInfo }).then(cb).then(function () {\n\t\t\t\t\t// TODO - lazy load this\n\t\t\t\t\tif (!_this.initializedFeatures.ads) {\n\t\t\t\t\t\t_ads2.default.init(flags, appInfo);\n\t\t\t\t\t\t_this.initializedFeatures.ads = true;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (!_this.initializedFeatures.lazyTracking) {\n\t\t\t\t\t\t_tracking2.default.lazyInit(flags);\n\t\t\t\t\t\t_this.initializedFeatures.lazyTracking = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn { flags: flags, mainCss: mainCss, appInfo: appInfo };\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\n\t\treturn ComponentInitializer;\n\t}();\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\texports.default = function (instance, Constructor) {\n\t  if (!(instance instanceof Constructor)) {\n\t    throw new TypeError(\"Cannot call a class as a function\");\n\t  }\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _fontLoader = __webpack_require__(74);\n\t\n\tvar _utils = __webpack_require__(75);\n\t\n\tvar _instrumentFetch = __webpack_require__(78);\n\t\n\tvar _instrumentFetch2 = _interopRequireDefault(_instrumentFetch);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// for safety polyfill window.console\n\tif (!window.console) {\n\t\twindow.console = {};\n\t\tvar methods = ['info', 'log', 'warn', 'error'];\n\t\tfor (var i = 0; i < methods.length; i++) {\n\t\t\twindow.console[methods[i]] = function () {};\n\t\t}\n\t}\n\t\n\tvar oErrors = __webpack_require__(79);\n\t\n\t// Dispatch a custom `ftNextLoaded` event after the app executes.\n\tfunction dispatchLoadedEvent() {\n\t\tvar ftNextLoaded = false;\n\t\tvar ftNextLoadedTrigger = function ftNextLoadedTrigger() {\n\t\t\tif (document.readyState === 'complete' && ftNextLoaded === false) {\n\t\t\t\tftNextLoaded = true;\n\t\t\t\twindow.dispatchEvent(new CustomEvent('ftNextLoaded'));\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t\tif (!ftNextLoadedTrigger()) {\n\t\t\twindow.addEventListener('load', ftNextLoadedTrigger);\n\t\t\tdocument.onreadystatechange = ftNextLoadedTrigger;\n\t\t}\n\t}\n\t\n\tvar JsSetup = function () {\n\t\tfunction JsSetup() {\n\t\t\t(0, _classCallCheck3.default)(this, JsSetup);\n\t\t}\n\t\n\t\tJsSetup.prototype.init = function init() {\n\t\n\t\t\t(0, _fontLoader.load)(document.documentElement);\n\t\n\t\t\tthis.appInfo = {\n\t\t\t\tisProduction: document.documentElement.hasAttribute('data-next-is-production'),\n\t\t\t\tversion: document.documentElement.getAttribute('data-next-version'),\n\t\t\t\tname: document.documentElement.getAttribute('data-next-app')\n\t\t\t};\n\t\n\t\t\tvar flags = window.nextFeatureFlags.reduce(function (obj, flag) {\n\t\t\t\tobj[flag.name] = flag.state;\n\t\t\t\treturn obj;\n\t\t\t}, {\n\t\t\t\tget: function get(name) {\n\t\t\t\t\treturn this[name];\n\t\t\t\t},\n\t\t\t\tgetAll: function getAll() {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\toErrors.init({\n\t\t\t\tenabled: flags.get('clientErrorReporting') && this.appInfo.isProduction,\n\t\t\t\tsentryEndpoint: 'https://edb56e86be2446eda092e69732d8654b@app.getsentry.com/32594',\n\t\t\t\tsiteVersion: this.appInfo.version,\n\t\t\t\tlogLevel: flags.get('clientDetailedErrorReporting') ? 'contextonly' : 'off',\n\t\t\t\ttags: { appName: this.appInfo.name },\n\t\t\t\terrorBuffer: window.errorBuffer || []\n\t\t\t});\n\t\n\t\t\t(0, _instrumentFetch2.default)(flags, oErrors);\n\t\n\t\t\tif (flags.get('clientAjaxErrorReporting')) {\n\t\t\t\t(function () {\n\t\n\t\t\t\t\tvar realFetch = window.fetch;\n\t\n\t\t\t\t\twindow.fetch = function (url, opts) {\n\t\t\t\t\t\treturn realFetch.call(this, url, opts).catch(function (err) {\n\t\t\t\t\t\t\toErrors.log(url + (opts ? JSON.stringify(opts) : '') + err);\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t})();\n\t\t\t}\n\t\n\t\t\treturn Promise.resolve({\n\t\t\t\tflags: flags,\n\t\t\t\tappInfo: this.appInfo,\n\t\t\t\tmainCss: new Promise(function (res) {\n\t\t\t\t\t// if this element exists it means the page is setup to deliver critical/main css\n\t\t\t\t\tif (document.querySelector('style.n-layout-head-css')) {\n\t\t\t\t\t\t(0, _utils.waitForCondition)('MainCss', res);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tres();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t});\n\t\t};\n\t\n\t\tJsSetup.prototype.bootstrap = function bootstrap(opts, callback) {\n\t\t\tvar _this = this;\n\t\n\t\t\topts = opts || {};\n\t\t\t(0, _utils.waitForCondition)('Polyfill', function () {\n\t\t\t\t_this.initResult = _this.initResult || _this.init();\n\t\n\t\t\t\t_this.bootstrapResult = _this.initResult.then(function (result) {\n\t\t\t\t\tvar promise = callback(result);\n\t\t\t\t\tif (!(promise && typeof promise.then === 'function')) {\n\t\t\t\t\t\tpromise = Promise.resolve();\n\t\t\t\t\t}\n\t\t\t\t\treturn promise.then(function () {\n\t\t\t\t\t\tif (opts.preload) {\n\t\t\t\t\t\t\t(0, _utils.perfMark)('nUiJsExecuted');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdocument.documentElement.classList.add('js-success');\n\t\t\t\t\t\t\t(0, _utils.perfMark)('appJsExecuted');\n\t\t\t\t\t\t\tdispatchLoadedEvent();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\tif (!_this.appInfo.isProduction) {\n\t\t\t\t\t\tif ((typeof err === 'undefined' ? 'undefined' : (0, _typeof3.default)(err)) === 'object' && err.stack) {\n\t\t\t\t\t\t\tconsole.error(err.stack); //eslint-disable-line\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error(err); //eslint-disable-line\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\toErrors.error(err);\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\n\t\tJsSetup.prototype.loadScript = function loadScript(src) {\n\t\t\treturn (0, _utils.loadScript)(src);\n\t\t};\n\t\n\t\treturn JsSetup;\n\t}();\n\t\n\tmodule.exports = JsSetup;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _iterator = __webpack_require__(7);\n\t\n\tvar _iterator2 = _interopRequireDefault(_iterator);\n\t\n\tvar _symbol = __webpack_require__(58);\n\t\n\tvar _symbol2 = _interopRequireDefault(_symbol);\n\t\n\tvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default ? \"symbol\" : typeof obj; };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n\t  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n\t} : function (obj) {\n\t  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(8), __esModule: true };\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(9);\n\t__webpack_require__(53);\n\tmodule.exports = __webpack_require__(57).f('iterator');\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $at  = __webpack_require__(10)(true);\n\t\n\t// 21.1.3.27 String.prototype[@@iterator]()\n\t__webpack_require__(13)(String, 'String', function(iterated){\n\t  this._t = String(iterated); // target\n\t  this._i = 0;                // next index\n\t// 21.1.5.2.1 %StringIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , index = this._i\n\t    , point;\n\t  if(index >= O.length)return {value: undefined, done: true};\n\t  point = $at(O, index);\n\t  this._i += point.length;\n\t  return {value: point, done: false};\n\t});\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toInteger = __webpack_require__(11)\n\t  , defined   = __webpack_require__(12);\n\t// true  -> String#at\n\t// false -> String#codePointAt\n\tmodule.exports = function(TO_STRING){\n\t  return function(that, pos){\n\t    var s = String(defined(that))\n\t      , i = toInteger(pos)\n\t      , l = s.length\n\t      , a, b;\n\t    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n\t    a = s.charCodeAt(i);\n\t    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n\t      ? TO_STRING ? s.charAt(i) : a\n\t      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n\t  };\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t// 7.1.4 ToInteger\n\tvar ceil  = Math.ceil\n\t  , floor = Math.floor;\n\tmodule.exports = function(it){\n\t  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t// 7.2.1 RequireObjectCoercible(argument)\n\tmodule.exports = function(it){\n\t  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n\t  return it;\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar LIBRARY        = __webpack_require__(14)\n\t  , $export        = __webpack_require__(15)\n\t  , redefine       = __webpack_require__(30)\n\t  , hide           = __webpack_require__(20)\n\t  , has            = __webpack_require__(31)\n\t  , Iterators      = __webpack_require__(32)\n\t  , $iterCreate    = __webpack_require__(33)\n\t  , setToStringTag = __webpack_require__(49)\n\t  , getPrototypeOf = __webpack_require__(51)\n\t  , ITERATOR       = __webpack_require__(50)('iterator')\n\t  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n\t  , FF_ITERATOR    = '@@iterator'\n\t  , KEYS           = 'keys'\n\t  , VALUES         = 'values';\n\t\n\tvar returnThis = function(){ return this; };\n\t\n\tmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n\t  $iterCreate(Constructor, NAME, next);\n\t  var getMethod = function(kind){\n\t    if(!BUGGY && kind in proto)return proto[kind];\n\t    switch(kind){\n\t      case KEYS: return function keys(){ return new Constructor(this, kind); };\n\t      case VALUES: return function values(){ return new Constructor(this, kind); };\n\t    } return function entries(){ return new Constructor(this, kind); };\n\t  };\n\t  var TAG        = NAME + ' Iterator'\n\t    , DEF_VALUES = DEFAULT == VALUES\n\t    , VALUES_BUG = false\n\t    , proto      = Base.prototype\n\t    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n\t    , $default   = $native || getMethod(DEFAULT)\n\t    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n\t    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n\t    , methods, key, IteratorPrototype;\n\t  // Fix native\n\t  if($anyNative){\n\t    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n\t    if(IteratorPrototype !== Object.prototype){\n\t      // Set @@toStringTag to native iterators\n\t      setToStringTag(IteratorPrototype, TAG, true);\n\t      // fix for some old engines\n\t      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n\t    }\n\t  }\n\t  // fix Array#{values, @@iterator}.name in V8 / FF\n\t  if(DEF_VALUES && $native && $native.name !== VALUES){\n\t    VALUES_BUG = true;\n\t    $default = function values(){ return $native.call(this); };\n\t  }\n\t  // Define iterator\n\t  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n\t    hide(proto, ITERATOR, $default);\n\t  }\n\t  // Plug for library\n\t  Iterators[NAME] = $default;\n\t  Iterators[TAG]  = returnThis;\n\t  if(DEFAULT){\n\t    methods = {\n\t      values:  DEF_VALUES ? $default : getMethod(VALUES),\n\t      keys:    IS_SET     ? $default : getMethod(KEYS),\n\t      entries: $entries\n\t    };\n\t    if(FORCED)for(key in methods){\n\t      if(!(key in proto))redefine(proto, key, methods[key]);\n\t    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n\t  }\n\t  return methods;\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tmodule.exports = true;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(16)\n\t  , core      = __webpack_require__(17)\n\t  , ctx       = __webpack_require__(18)\n\t  , hide      = __webpack_require__(20)\n\t  , PROTOTYPE = 'prototype';\n\t\n\tvar $export = function(type, name, source){\n\t  var IS_FORCED = type & $export.F\n\t    , IS_GLOBAL = type & $export.G\n\t    , IS_STATIC = type & $export.S\n\t    , IS_PROTO  = type & $export.P\n\t    , IS_BIND   = type & $export.B\n\t    , IS_WRAP   = type & $export.W\n\t    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n\t    , expProto  = exports[PROTOTYPE]\n\t    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n\t    , key, own, out;\n\t  if(IS_GLOBAL)source = name;\n\t  for(key in source){\n\t    // contains in native\n\t    own = !IS_FORCED && target && target[key] !== undefined;\n\t    if(own && key in exports)continue;\n\t    // export native or passed\n\t    out = own ? target[key] : source[key];\n\t    // prevent global pollution for namespaces\n\t    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n\t    // bind timers to global for call from export context\n\t    : IS_BIND && own ? ctx(out, global)\n\t    // wrap global constructors for prevent change them in library\n\t    : IS_WRAP && target[key] == out ? (function(C){\n\t      var F = function(a, b, c){\n\t        if(this instanceof C){\n\t          switch(arguments.length){\n\t            case 0: return new C;\n\t            case 1: return new C(a);\n\t            case 2: return new C(a, b);\n\t          } return new C(a, b, c);\n\t        } return C.apply(this, arguments);\n\t      };\n\t      F[PROTOTYPE] = C[PROTOTYPE];\n\t      return F;\n\t    // make static versions for prototype methods\n\t    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n\t    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n\t    if(IS_PROTO){\n\t      (exports.virtual || (exports.virtual = {}))[key] = out;\n\t      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n\t      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n\t    }\n\t  }\n\t};\n\t// type bitmap\n\t$export.F = 1;   // forced\n\t$export.G = 2;   // global\n\t$export.S = 4;   // static\n\t$export.P = 8;   // proto\n\t$export.B = 16;  // bind\n\t$export.W = 32;  // wrap\n\t$export.U = 64;  // safe\n\t$export.R = 128; // real proto method for `library` \n\tmodule.exports = $export;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n\tvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n\t  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\tif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tvar core = module.exports = {version: '2.4.0'};\n\tif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// optional / simple context binding\n\tvar aFunction = __webpack_require__(19);\n\tmodule.exports = function(fn, that, length){\n\t  aFunction(fn);\n\t  if(that === undefined)return fn;\n\t  switch(length){\n\t    case 1: return function(a){\n\t      return fn.call(that, a);\n\t    };\n\t    case 2: return function(a, b){\n\t      return fn.call(that, a, b);\n\t    };\n\t    case 3: return function(a, b, c){\n\t      return fn.call(that, a, b, c);\n\t    };\n\t  }\n\t  return function(/* ...args */){\n\t    return fn.apply(that, arguments);\n\t  };\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n\t  return it;\n\t};\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar dP         = __webpack_require__(21)\n\t  , createDesc = __webpack_require__(29);\n\tmodule.exports = __webpack_require__(25) ? function(object, key, value){\n\t  return dP.f(object, key, createDesc(1, value));\n\t} : function(object, key, value){\n\t  object[key] = value;\n\t  return object;\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar anObject       = __webpack_require__(22)\n\t  , IE8_DOM_DEFINE = __webpack_require__(24)\n\t  , toPrimitive    = __webpack_require__(28)\n\t  , dP             = Object.defineProperty;\n\t\n\texports.f = __webpack_require__(25) ? Object.defineProperty : function defineProperty(O, P, Attributes){\n\t  anObject(O);\n\t  P = toPrimitive(P, true);\n\t  anObject(Attributes);\n\t  if(IE8_DOM_DEFINE)try {\n\t    return dP(O, P, Attributes);\n\t  } catch(e){ /* empty */ }\n\t  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n\t  if('value' in Attributes)O[P] = Attributes.value;\n\t  return O;\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(23);\n\tmodule.exports = function(it){\n\t  if(!isObject(it))throw TypeError(it + ' is not an object!');\n\t  return it;\n\t};\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  return typeof it === 'object' ? it !== null : typeof it === 'function';\n\t};\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = !__webpack_require__(25) && !__webpack_require__(26)(function(){\n\t  return Object.defineProperty(__webpack_require__(27)('div'), 'a', {get: function(){ return 7; }}).a != 7;\n\t});\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Thank's IE8 for his funny defineProperty\n\tmodule.exports = !__webpack_require__(26)(function(){\n\t  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n\t});\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(exec){\n\t  try {\n\t    return !!exec();\n\t  } catch(e){\n\t    return true;\n\t  }\n\t};\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(23)\n\t  , document = __webpack_require__(16).document\n\t  // in old IE typeof document.createElement is 'object'\n\t  , is = isObject(document) && isObject(document.createElement);\n\tmodule.exports = function(it){\n\t  return is ? document.createElement(it) : {};\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.1 ToPrimitive(input [, PreferredType])\n\tvar isObject = __webpack_require__(23);\n\t// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n\t// and the second argument - flag - preferred type is a string\n\tmodule.exports = function(it, S){\n\t  if(!isObject(it))return it;\n\t  var fn, val;\n\t  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  throw TypeError(\"Can't convert object to primitive value\");\n\t};\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(bitmap, value){\n\t  return {\n\t    enumerable  : !(bitmap & 1),\n\t    configurable: !(bitmap & 2),\n\t    writable    : !(bitmap & 4),\n\t    value       : value\n\t  };\n\t};\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(20);\n\n/***/ },\n/* 31 */\n/***/ function(module, exports) {\n\n\tvar hasOwnProperty = {}.hasOwnProperty;\n\tmodule.exports = function(it, key){\n\t  return hasOwnProperty.call(it, key);\n\t};\n\n/***/ },\n/* 32 */\n/***/ function(module, exports) {\n\n\tmodule.exports = {};\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar create         = __webpack_require__(34)\n\t  , descriptor     = __webpack_require__(29)\n\t  , setToStringTag = __webpack_require__(49)\n\t  , IteratorPrototype = {};\n\t\n\t// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n\t__webpack_require__(20)(IteratorPrototype, __webpack_require__(50)('iterator'), function(){ return this; });\n\t\n\tmodule.exports = function(Constructor, NAME, next){\n\t  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n\t  setToStringTag(Constructor, NAME + ' Iterator');\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n\tvar anObject    = __webpack_require__(22)\n\t  , dPs         = __webpack_require__(35)\n\t  , enumBugKeys = __webpack_require__(47)\n\t  , IE_PROTO    = __webpack_require__(44)('IE_PROTO')\n\t  , Empty       = function(){ /* empty */ }\n\t  , PROTOTYPE   = 'prototype';\n\t\n\t// Create object with fake `null` prototype: use iframe Object with cleared prototype\n\tvar createDict = function(){\n\t  // Thrash, waste and sodomy: IE GC bug\n\t  var iframe = __webpack_require__(27)('iframe')\n\t    , i      = enumBugKeys.length\n\t    , lt     = '<'\n\t    , gt     = '>'\n\t    , iframeDocument;\n\t  iframe.style.display = 'none';\n\t  __webpack_require__(48).appendChild(iframe);\n\t  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n\t  // createDict = iframe.contentWindow.Object;\n\t  // html.removeChild(iframe);\n\t  iframeDocument = iframe.contentWindow.document;\n\t  iframeDocument.open();\n\t  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n\t  iframeDocument.close();\n\t  createDict = iframeDocument.F;\n\t  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n\t  return createDict();\n\t};\n\t\n\tmodule.exports = Object.create || function create(O, Properties){\n\t  var result;\n\t  if(O !== null){\n\t    Empty[PROTOTYPE] = anObject(O);\n\t    result = new Empty;\n\t    Empty[PROTOTYPE] = null;\n\t    // add \"__proto__\" for Object.getPrototypeOf polyfill\n\t    result[IE_PROTO] = O;\n\t  } else result = createDict();\n\t  return Properties === undefined ? result : dPs(result, Properties);\n\t};\n\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar dP       = __webpack_require__(21)\n\t  , anObject = __webpack_require__(22)\n\t  , getKeys  = __webpack_require__(36);\n\t\n\tmodule.exports = __webpack_require__(25) ? Object.defineProperties : function defineProperties(O, Properties){\n\t  anObject(O);\n\t  var keys   = getKeys(Properties)\n\t    , length = keys.length\n\t    , i = 0\n\t    , P;\n\t  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n\t  return O;\n\t};\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.14 / 15.2.3.14 Object.keys(O)\n\tvar $keys       = __webpack_require__(37)\n\t  , enumBugKeys = __webpack_require__(47);\n\t\n\tmodule.exports = Object.keys || function keys(O){\n\t  return $keys(O, enumBugKeys);\n\t};\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar has          = __webpack_require__(31)\n\t  , toIObject    = __webpack_require__(38)\n\t  , arrayIndexOf = __webpack_require__(41)(false)\n\t  , IE_PROTO     = __webpack_require__(44)('IE_PROTO');\n\t\n\tmodule.exports = function(object, names){\n\t  var O      = toIObject(object)\n\t    , i      = 0\n\t    , result = []\n\t    , key;\n\t  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n\t  // Don't enum bug & hidden keys\n\t  while(names.length > i)if(has(O, key = names[i++])){\n\t    ~arrayIndexOf(result, key) || result.push(key);\n\t  }\n\t  return result;\n\t};\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// to indexed object, toObject with fallback for non-array-like ES3 strings\n\tvar IObject = __webpack_require__(39)\n\t  , defined = __webpack_require__(12);\n\tmodule.exports = function(it){\n\t  return IObject(defined(it));\n\t};\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// fallback for non-array-like ES3 and non-enumerable old V8 strings\n\tvar cof = __webpack_require__(40);\n\tmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n\t  return cof(it) == 'String' ? it.split('') : Object(it);\n\t};\n\n/***/ },\n/* 40 */\n/***/ function(module, exports) {\n\n\tvar toString = {}.toString;\n\t\n\tmodule.exports = function(it){\n\t  return toString.call(it).slice(8, -1);\n\t};\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// false -> Array#indexOf\n\t// true  -> Array#includes\n\tvar toIObject = __webpack_require__(38)\n\t  , toLength  = __webpack_require__(42)\n\t  , toIndex   = __webpack_require__(43);\n\tmodule.exports = function(IS_INCLUDES){\n\t  return function($this, el, fromIndex){\n\t    var O      = toIObject($this)\n\t      , length = toLength(O.length)\n\t      , index  = toIndex(fromIndex, length)\n\t      , value;\n\t    // Array#includes uses SameValueZero equality algorithm\n\t    if(IS_INCLUDES && el != el)while(length > index){\n\t      value = O[index++];\n\t      if(value != value)return true;\n\t    // Array#toIndex ignores holes, Array#includes - not\n\t    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n\t      if(O[index] === el)return IS_INCLUDES || index || 0;\n\t    } return !IS_INCLUDES && -1;\n\t  };\n\t};\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.15 ToLength\n\tvar toInteger = __webpack_require__(11)\n\t  , min       = Math.min;\n\tmodule.exports = function(it){\n\t  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n\t};\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toInteger = __webpack_require__(11)\n\t  , max       = Math.max\n\t  , min       = Math.min;\n\tmodule.exports = function(index, length){\n\t  index = toInteger(index);\n\t  return index < 0 ? max(index + length, 0) : min(index, length);\n\t};\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar shared = __webpack_require__(45)('keys')\n\t  , uid    = __webpack_require__(46);\n\tmodule.exports = function(key){\n\t  return shared[key] || (shared[key] = uid(key));\n\t};\n\n/***/ },\n/* 45 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global = __webpack_require__(16)\n\t  , SHARED = '__core-js_shared__'\n\t  , store  = global[SHARED] || (global[SHARED] = {});\n\tmodule.exports = function(key){\n\t  return store[key] || (store[key] = {});\n\t};\n\n/***/ },\n/* 46 */\n/***/ function(module, exports) {\n\n\tvar id = 0\n\t  , px = Math.random();\n\tmodule.exports = function(key){\n\t  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n\t};\n\n/***/ },\n/* 47 */\n/***/ function(module, exports) {\n\n\t// IE 8- don't enum bug keys\n\tmodule.exports = (\n\t  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n\t).split(',');\n\n/***/ },\n/* 48 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(16).document && document.documentElement;\n\n/***/ },\n/* 49 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar def = __webpack_require__(21).f\n\t  , has = __webpack_require__(31)\n\t  , TAG = __webpack_require__(50)('toStringTag');\n\t\n\tmodule.exports = function(it, tag, stat){\n\t  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n\t};\n\n/***/ },\n/* 50 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar store      = __webpack_require__(45)('wks')\n\t  , uid        = __webpack_require__(46)\n\t  , Symbol     = __webpack_require__(16).Symbol\n\t  , USE_SYMBOL = typeof Symbol == 'function';\n\t\n\tvar $exports = module.exports = function(name){\n\t  return store[name] || (store[name] =\n\t    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n\t};\n\t\n\t$exports.store = store;\n\n/***/ },\n/* 51 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\n\tvar has         = __webpack_require__(31)\n\t  , toObject    = __webpack_require__(52)\n\t  , IE_PROTO    = __webpack_require__(44)('IE_PROTO')\n\t  , ObjectProto = Object.prototype;\n\t\n\tmodule.exports = Object.getPrototypeOf || function(O){\n\t  O = toObject(O);\n\t  if(has(O, IE_PROTO))return O[IE_PROTO];\n\t  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n\t    return O.constructor.prototype;\n\t  } return O instanceof Object ? ObjectProto : null;\n\t};\n\n/***/ },\n/* 52 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.13 ToObject(argument)\n\tvar defined = __webpack_require__(12);\n\tmodule.exports = function(it){\n\t  return Object(defined(it));\n\t};\n\n/***/ },\n/* 53 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(54);\n\tvar global        = __webpack_require__(16)\n\t  , hide          = __webpack_require__(20)\n\t  , Iterators     = __webpack_require__(32)\n\t  , TO_STRING_TAG = __webpack_require__(50)('toStringTag');\n\t\n\tfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n\t  var NAME       = collections[i]\n\t    , Collection = global[NAME]\n\t    , proto      = Collection && Collection.prototype;\n\t  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n\t  Iterators[NAME] = Iterators.Array;\n\t}\n\n/***/ },\n/* 54 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar addToUnscopables = __webpack_require__(55)\n\t  , step             = __webpack_require__(56)\n\t  , Iterators        = __webpack_require__(32)\n\t  , toIObject        = __webpack_require__(38);\n\t\n\t// 22.1.3.4 Array.prototype.entries()\n\t// 22.1.3.13 Array.prototype.keys()\n\t// 22.1.3.29 Array.prototype.values()\n\t// 22.1.3.30 Array.prototype[@@iterator]()\n\tmodule.exports = __webpack_require__(13)(Array, 'Array', function(iterated, kind){\n\t  this._t = toIObject(iterated); // target\n\t  this._i = 0;                   // next index\n\t  this._k = kind;                // kind\n\t// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , kind  = this._k\n\t    , index = this._i++;\n\t  if(!O || index >= O.length){\n\t    this._t = undefined;\n\t    return step(1);\n\t  }\n\t  if(kind == 'keys'  )return step(0, index);\n\t  if(kind == 'values')return step(0, O[index]);\n\t  return step(0, [index, O[index]]);\n\t}, 'values');\n\t\n\t// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\n\tIterators.Arguments = Iterators.Array;\n\t\n\taddToUnscopables('keys');\n\taddToUnscopables('values');\n\taddToUnscopables('entries');\n\n/***/ },\n/* 55 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(){ /* empty */ };\n\n/***/ },\n/* 56 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(done, value){\n\t  return {value: value, done: !!done};\n\t};\n\n/***/ },\n/* 57 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports.f = __webpack_require__(50);\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(59), __esModule: true };\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(60);\n\t__webpack_require__(71);\n\t__webpack_require__(72);\n\t__webpack_require__(73);\n\tmodule.exports = __webpack_require__(17).Symbol;\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t// ECMAScript 6 symbols shim\n\tvar global         = __webpack_require__(16)\n\t  , has            = __webpack_require__(31)\n\t  , DESCRIPTORS    = __webpack_require__(25)\n\t  , $export        = __webpack_require__(15)\n\t  , redefine       = __webpack_require__(30)\n\t  , META           = __webpack_require__(61).KEY\n\t  , $fails         = __webpack_require__(26)\n\t  , shared         = __webpack_require__(45)\n\t  , setToStringTag = __webpack_require__(49)\n\t  , uid            = __webpack_require__(46)\n\t  , wks            = __webpack_require__(50)\n\t  , wksExt         = __webpack_require__(57)\n\t  , wksDefine      = __webpack_require__(62)\n\t  , keyOf          = __webpack_require__(63)\n\t  , enumKeys       = __webpack_require__(64)\n\t  , isArray        = __webpack_require__(67)\n\t  , anObject       = __webpack_require__(22)\n\t  , toIObject      = __webpack_require__(38)\n\t  , toPrimitive    = __webpack_require__(28)\n\t  , createDesc     = __webpack_require__(29)\n\t  , _create        = __webpack_require__(34)\n\t  , gOPNExt        = __webpack_require__(68)\n\t  , $GOPD          = __webpack_require__(70)\n\t  , $DP            = __webpack_require__(21)\n\t  , $keys          = __webpack_require__(36)\n\t  , gOPD           = $GOPD.f\n\t  , dP             = $DP.f\n\t  , gOPN           = gOPNExt.f\n\t  , $Symbol        = global.Symbol\n\t  , $JSON          = global.JSON\n\t  , _stringify     = $JSON && $JSON.stringify\n\t  , PROTOTYPE      = 'prototype'\n\t  , HIDDEN         = wks('_hidden')\n\t  , TO_PRIMITIVE   = wks('toPrimitive')\n\t  , isEnum         = {}.propertyIsEnumerable\n\t  , SymbolRegistry = shared('symbol-registry')\n\t  , AllSymbols     = shared('symbols')\n\t  , OPSymbols      = shared('op-symbols')\n\t  , ObjectProto    = Object[PROTOTYPE]\n\t  , USE_NATIVE     = typeof $Symbol == 'function'\n\t  , QObject        = global.QObject;\n\t// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\n\tvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\t\n\t// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\n\tvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n\t  return _create(dP({}, 'a', {\n\t    get: function(){ return dP(this, 'a', {value: 7}).a; }\n\t  })).a != 7;\n\t}) ? function(it, key, D){\n\t  var protoDesc = gOPD(ObjectProto, key);\n\t  if(protoDesc)delete ObjectProto[key];\n\t  dP(it, key, D);\n\t  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n\t} : dP;\n\t\n\tvar wrap = function(tag){\n\t  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n\t  sym._k = tag;\n\t  return sym;\n\t};\n\t\n\tvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n\t  return typeof it == 'symbol';\n\t} : function(it){\n\t  return it instanceof $Symbol;\n\t};\n\t\n\tvar $defineProperty = function defineProperty(it, key, D){\n\t  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n\t  anObject(it);\n\t  key = toPrimitive(key, true);\n\t  anObject(D);\n\t  if(has(AllSymbols, key)){\n\t    if(!D.enumerable){\n\t      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n\t      it[HIDDEN][key] = true;\n\t    } else {\n\t      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n\t      D = _create(D, {enumerable: createDesc(0, false)});\n\t    } return setSymbolDesc(it, key, D);\n\t  } return dP(it, key, D);\n\t};\n\tvar $defineProperties = function defineProperties(it, P){\n\t  anObject(it);\n\t  var keys = enumKeys(P = toIObject(P))\n\t    , i    = 0\n\t    , l = keys.length\n\t    , key;\n\t  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n\t  return it;\n\t};\n\tvar $create = function create(it, P){\n\t  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n\t};\n\tvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n\t  var E = isEnum.call(this, key = toPrimitive(key, true));\n\t  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n\t  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n\t};\n\tvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n\t  it  = toIObject(it);\n\t  key = toPrimitive(key, true);\n\t  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n\t  var D = gOPD(it, key);\n\t  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n\t  return D;\n\t};\n\tvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n\t  var names  = gOPN(toIObject(it))\n\t    , result = []\n\t    , i      = 0\n\t    , key;\n\t  while(names.length > i){\n\t    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n\t  } return result;\n\t};\n\tvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n\t  var IS_OP  = it === ObjectProto\n\t    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n\t    , result = []\n\t    , i      = 0\n\t    , key;\n\t  while(names.length > i){\n\t    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n\t  } return result;\n\t};\n\t\n\t// 19.4.1.1 Symbol([description])\n\tif(!USE_NATIVE){\n\t  $Symbol = function Symbol(){\n\t    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n\t    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n\t    var $set = function(value){\n\t      if(this === ObjectProto)$set.call(OPSymbols, value);\n\t      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n\t      setSymbolDesc(this, tag, createDesc(1, value));\n\t    };\n\t    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n\t    return wrap(tag);\n\t  };\n\t  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n\t    return this._k;\n\t  });\n\t\n\t  $GOPD.f = $getOwnPropertyDescriptor;\n\t  $DP.f   = $defineProperty;\n\t  __webpack_require__(69).f = gOPNExt.f = $getOwnPropertyNames;\n\t  __webpack_require__(66).f  = $propertyIsEnumerable;\n\t  __webpack_require__(65).f = $getOwnPropertySymbols;\n\t\n\t  if(DESCRIPTORS && !__webpack_require__(14)){\n\t    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n\t  }\n\t\n\t  wksExt.f = function(name){\n\t    return wrap(wks(name));\n\t  }\n\t}\n\t\n\t$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\t\n\tfor(var symbols = (\n\t  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n\t  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n\t).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\t\n\tfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\t\n\t$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n\t  // 19.4.2.1 Symbol.for(key)\n\t  'for': function(key){\n\t    return has(SymbolRegistry, key += '')\n\t      ? SymbolRegistry[key]\n\t      : SymbolRegistry[key] = $Symbol(key);\n\t  },\n\t  // 19.4.2.5 Symbol.keyFor(sym)\n\t  keyFor: function keyFor(key){\n\t    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n\t    throw TypeError(key + ' is not a symbol!');\n\t  },\n\t  useSetter: function(){ setter = true; },\n\t  useSimple: function(){ setter = false; }\n\t});\n\t\n\t$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n\t  // 19.1.2.2 Object.create(O [, Properties])\n\t  create: $create,\n\t  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n\t  defineProperty: $defineProperty,\n\t  // 19.1.2.3 Object.defineProperties(O, Properties)\n\t  defineProperties: $defineProperties,\n\t  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n\t  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n\t  // 19.1.2.7 Object.getOwnPropertyNames(O)\n\t  getOwnPropertyNames: $getOwnPropertyNames,\n\t  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n\t  getOwnPropertySymbols: $getOwnPropertySymbols\n\t});\n\t\n\t// 24.3.2 JSON.stringify(value [, replacer [, space]])\n\t$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n\t  var S = $Symbol();\n\t  // MS Edge converts symbol values to JSON as {}\n\t  // WebKit converts symbol values to JSON as null\n\t  // V8 throws on boxed symbols\n\t  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n\t})), 'JSON', {\n\t  stringify: function stringify(it){\n\t    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n\t    var args = [it]\n\t      , i    = 1\n\t      , replacer, $replacer;\n\t    while(arguments.length > i)args.push(arguments[i++]);\n\t    replacer = args[1];\n\t    if(typeof replacer == 'function')$replacer = replacer;\n\t    if($replacer || !isArray(replacer))replacer = function(key, value){\n\t      if($replacer)value = $replacer.call(this, key, value);\n\t      if(!isSymbol(value))return value;\n\t    };\n\t    args[1] = replacer;\n\t    return _stringify.apply($JSON, args);\n\t  }\n\t});\n\t\n\t// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n\t$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(20)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n\t// 19.4.3.5 Symbol.prototype[@@toStringTag]\n\tsetToStringTag($Symbol, 'Symbol');\n\t// 20.2.1.9 Math[@@toStringTag]\n\tsetToStringTag(Math, 'Math', true);\n\t// 24.3.3 JSON[@@toStringTag]\n\tsetToStringTag(global.JSON, 'JSON', true);\n\n/***/ },\n/* 61 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar META     = __webpack_require__(46)('meta')\n\t  , isObject = __webpack_require__(23)\n\t  , has      = __webpack_require__(31)\n\t  , setDesc  = __webpack_require__(21).f\n\t  , id       = 0;\n\tvar isExtensible = Object.isExtensible || function(){\n\t  return true;\n\t};\n\tvar FREEZE = !__webpack_require__(26)(function(){\n\t  return isExtensible(Object.preventExtensions({}));\n\t});\n\tvar setMeta = function(it){\n\t  setDesc(it, META, {value: {\n\t    i: 'O' + ++id, // object ID\n\t    w: {}          // weak collections IDs\n\t  }});\n\t};\n\tvar fastKey = function(it, create){\n\t  // return primitive with prefix\n\t  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n\t  if(!has(it, META)){\n\t    // can't set metadata to uncaught frozen object\n\t    if(!isExtensible(it))return 'F';\n\t    // not necessary to add metadata\n\t    if(!create)return 'E';\n\t    // add missing metadata\n\t    setMeta(it);\n\t  // return object ID\n\t  } return it[META].i;\n\t};\n\tvar getWeak = function(it, create){\n\t  if(!has(it, META)){\n\t    // can't set metadata to uncaught frozen object\n\t    if(!isExtensible(it))return true;\n\t    // not necessary to add metadata\n\t    if(!create)return false;\n\t    // add missing metadata\n\t    setMeta(it);\n\t  // return hash weak collections IDs\n\t  } return it[META].w;\n\t};\n\t// add metadata on freeze-family methods calling\n\tvar onFreeze = function(it){\n\t  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n\t  return it;\n\t};\n\tvar meta = module.exports = {\n\t  KEY:      META,\n\t  NEED:     false,\n\t  fastKey:  fastKey,\n\t  getWeak:  getWeak,\n\t  onFreeze: onFreeze\n\t};\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global         = __webpack_require__(16)\n\t  , core           = __webpack_require__(17)\n\t  , LIBRARY        = __webpack_require__(14)\n\t  , wksExt         = __webpack_require__(57)\n\t  , defineProperty = __webpack_require__(21).f;\n\tmodule.exports = function(name){\n\t  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n\t  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n\t};\n\n/***/ },\n/* 63 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar getKeys   = __webpack_require__(36)\n\t  , toIObject = __webpack_require__(38);\n\tmodule.exports = function(object, el){\n\t  var O      = toIObject(object)\n\t    , keys   = getKeys(O)\n\t    , length = keys.length\n\t    , index  = 0\n\t    , key;\n\t  while(length > index)if(O[key = keys[index++]] === el)return key;\n\t};\n\n/***/ },\n/* 64 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// all enumerable object keys, includes symbols\n\tvar getKeys = __webpack_require__(36)\n\t  , gOPS    = __webpack_require__(65)\n\t  , pIE     = __webpack_require__(66);\n\tmodule.exports = function(it){\n\t  var result     = getKeys(it)\n\t    , getSymbols = gOPS.f;\n\t  if(getSymbols){\n\t    var symbols = getSymbols(it)\n\t      , isEnum  = pIE.f\n\t      , i       = 0\n\t      , key;\n\t    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n\t  } return result;\n\t};\n\n/***/ },\n/* 65 */\n/***/ function(module, exports) {\n\n\texports.f = Object.getOwnPropertySymbols;\n\n/***/ },\n/* 66 */\n/***/ function(module, exports) {\n\n\texports.f = {}.propertyIsEnumerable;\n\n/***/ },\n/* 67 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.2.2 IsArray(argument)\n\tvar cof = __webpack_require__(40);\n\tmodule.exports = Array.isArray || function isArray(arg){\n\t  return cof(arg) == 'Array';\n\t};\n\n/***/ },\n/* 68 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\n\tvar toIObject = __webpack_require__(38)\n\t  , gOPN      = __webpack_require__(69).f\n\t  , toString  = {}.toString;\n\t\n\tvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n\t  ? Object.getOwnPropertyNames(window) : [];\n\t\n\tvar getWindowNames = function(it){\n\t  try {\n\t    return gOPN(it);\n\t  } catch(e){\n\t    return windowNames.slice();\n\t  }\n\t};\n\t\n\tmodule.exports.f = function getOwnPropertyNames(it){\n\t  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n\t};\n\n\n/***/ },\n/* 69 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\n\tvar $keys      = __webpack_require__(37)\n\t  , hiddenKeys = __webpack_require__(47).concat('length', 'prototype');\n\t\n\texports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n\t  return $keys(O, hiddenKeys);\n\t};\n\n/***/ },\n/* 70 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar pIE            = __webpack_require__(66)\n\t  , createDesc     = __webpack_require__(29)\n\t  , toIObject      = __webpack_require__(38)\n\t  , toPrimitive    = __webpack_require__(28)\n\t  , has            = __webpack_require__(31)\n\t  , IE8_DOM_DEFINE = __webpack_require__(24)\n\t  , gOPD           = Object.getOwnPropertyDescriptor;\n\t\n\texports.f = __webpack_require__(25) ? gOPD : function getOwnPropertyDescriptor(O, P){\n\t  O = toIObject(O);\n\t  P = toPrimitive(P, true);\n\t  if(IE8_DOM_DEFINE)try {\n\t    return gOPD(O, P);\n\t  } catch(e){ /* empty */ }\n\t  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n\t};\n\n/***/ },\n/* 71 */\n/***/ function(module, exports) {\n\n\n\n/***/ },\n/* 72 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(62)('asyncIterator');\n\n/***/ },\n/* 73 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(62)('observable');\n\n/***/ },\n/* 74 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.load = load;\n\t\n\tvar _utils = __webpack_require__(75);\n\t\n\t/* globals FontFaceObserver */\n\t__webpack_require__(77);\n\t\n\tvar fontLoadedPrefix = 'o-typography--loaded-';\n\tvar fontLoadedCookieName = 'next-fonts-loaded';\n\tvar fontConfigs = [{\n\t\tfamily: 'FinancierDisplayWeb',\n\t\tweight: 'normal',\n\t\tlabels: ['serifDisplay']\n\t}, {\n\t\tfamily: 'MetricWeb',\n\t\tweight: 'normal',\n\t\tlabels: ['sans', 'sansData']\n\t}, {\n\t\tfamily: 'MetricWeb',\n\t\tweight: 600,\n\t\tlabels: ['sansBold', 'sansDataBold']\n\t}];\n\t\n\tfunction load(el) {\n\t\tif (new RegExp('(^|\\\\s)' + fontLoadedCookieName + '=1(;|$)').test(document.cookie)) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\tvar fontPromises = fontConfigs.map(function (fontConfig) {\n\t\t\treturn new FontFaceObserver(fontConfig.family, { weight: fontConfig.weight }).load().then(function () {\n\t\t\t\treturn el.className += fontConfig.labels.reduce(function (classes, label) {\n\t\t\t\t\treturn classes += ' ' + fontLoadedPrefix + label;\n\t\t\t\t}, '');\n\t\t\t});\n\t\t});\n\t\n\t\treturn Promise.all(fontPromises).then(function () {\n\t\t\t// set cookie for subsequent visits\n\t\t\tdocument.cookie = fontLoadedCookieName + '=1;domain=.ft.com;path=/;max-age=' + 60 * 60 * 24 * 7;\n\t\t\t// create a performance mark\n\t\t\t(0, _utils.perfMark)('fontsLoaded');\n\t\t}).catch(function () {});\n\t};\n\n/***/ },\n/* 75 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// tricky recursive function, but it works\n\tfunction uuid(a) {\n\t\treturn a ? (a ^ Math.random() * 16 >> a / 4).toString(16) : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n\t}\n\t\n\tmodule.exports = {\n\t\t$: function $(sel, ctx) {\n\t\t\treturn (ctx || document).querySelector(sel);\n\t\t},\n\t\t$$: function $$(sel, ctx) {\n\t\t\treturn [].slice.call((ctx || document).querySelectorAll(sel));\n\t\t},\n\t\tdebounce: function debounce(func, wait) {\n\t\t\tvar timeout = void 0;\n\t\t\treturn function () {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar args = arguments;\n\t\t\t\tvar later = function later() {\n\t\t\t\t\ttimeout = null;\n\t\t\t\t\tfunc.apply(_this, args);\n\t\t\t\t};\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = setTimeout(later, wait);\n\t\t\t};\n\t\t},\n\t\n\t\tthrottle: function throttle(func, wait) {\n\t\t\tvar timeout = void 0;\n\t\t\treturn function () {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tif (timeout) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar args = arguments;\n\t\t\t\tvar later = function later() {\n\t\t\t\t\ttimeout = null;\n\t\t\t\t\tfunc.apply(_this2, args);\n\t\t\t\t};\n\t\n\t\t\t\ttimeout = setTimeout(later, wait);\n\t\t\t};\n\t\t},\n\t\tuuid: uuid,\n\t\tascii: __webpack_require__(76),\n\t\tloadScript: function loadScript(src) {\n\t\t\treturn new Promise(function (res, rej) {\n\t\t\t\tvar script = window.ftNextLoadScript(src);\n\t\t\t\tscript.addEventListener('load', res);\n\t\t\t\tscript.addEventListener('error', rej);\n\t\t\t});\n\t\t},\n\t\twaitForCondition: function waitForCondition(conditionName, action) {\n\t\t\treturn window['ftNext' + conditionName + 'Loaded'] ? action() : document.addEventListener('ftNext' + conditionName + 'Loaded', action);\n\t\t},\n\t\tbroadcast: function broadcast(name, data) {\n\t\t\tvar bubbles = arguments.length <= 2 || arguments[2] === undefined ? true : arguments[2];\n\t\n\t\t\tvar rootEl = document.body;\n\t\t\tvar event = function () {\n\t\t\t\ttry {\n\t\t\t\t\treturn new CustomEvent(name, { bubbles: bubbles, cancelable: true, detail: data });\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn CustomEvent.initCustomEvent(name, true, true, data);\n\t\t\t\t}\n\t\t\t}();\n\t\n\t\t\trootEl.dispatchEvent(event);\n\t\t},\n\t\tperfMark: function perfMark(name) {\n\t\t\tvar performance = window.LUX || window.performance || window.msPerformance || window.webkitPerformance || window.mozPerformance;\n\t\t\tif (performance && performance.mark) {\n\t\t\t\tperformance.mark(name);\n\t\t\t}\n\t\t},\n\t\tgetCookieValue: function getCookieValue(key) {\n\t\t\tvar regex = new RegExp(key + '=([^;]+)', 'i');\n\t\t\tvar a = regex.exec(document.cookie);\n\t\t\treturn a ? a[1] : undefined;\n\t\t}\n\t\n\t};\n\n/***/ },\n/* 76 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar mapASCII = {\n\t\t'à': 'a',\n\t\t'á': 'a',\n\t\t'â': 'a',\n\t\t'ä': 'a',\n\t\t'ã': 'a',\n\t\t'å': 'a',\n\t\t'ā': 'a',\n\t\t'æ': 'ae',\n\t\t'ç': 'c',\n\t\t'č': 'c',\n\t\t'è': 'e',\n\t\t'é': 'e',\n\t\t'ê': 'e',\n\t\t'ë': 'e',\n\t\t'ē': 'e',\n\t\t'ğ': 'g',\n\t\t'î': 'i',\n\t\t'ï': 'i',\n\t\t'í': 'i',\n\t\t'ì': 'i',\n\t\t'ī': 'i',\n\t\t'ł': 'l',\n\t\t'ñ': 'n',\n\t\t'ń': 'n',\n\t\t'ô': 'o',\n\t\t'ö': 'o',\n\t\t'ò': 'o',\n\t\t'ó': 'o',\n\t\t'ø': 'o',\n\t\t'õ': 'o',\n\t\t'ō': 'o',\n\t\t'œ': 'oe',\n\t\t'ş': 's',\n\t\t'ș': 's',\n\t\t'š': 's',\n\t\t'ß': 'ss',\n\t\t'û': 'u',\n\t\t'ü': 'u',\n\t\t'ù': 'u',\n\t\t'ú': 'u',\n\t\t'ū': 'u',\n\t\t'ž': 'z'\n\t};\n\t\n\tvar nonASCII = /[^\\x00-\\x7F]+/;\n\t\n\tfunction toASCII(string) {\n\t\tif (nonASCII.test(string) === false) {\n\t\t\treturn string;\n\t\t}\n\t\n\t\tvar i = string.length;\n\t\n\t\twhile (i > -1) {\n\t\t\tvar ascii = mapASCII[string[i]];\n\t\n\t\t\tif (ascii) {\n\t\t\t\tstring = string.substr(0, i) + ascii + string.substr(i + 1);\n\t\t\t}\n\t\n\t\t\ti--;\n\t\t}\n\t\n\t\treturn string;\n\t}\n\t\n\tmodule.exports = toASCII;\n\n/***/ },\n/* 77 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t(function () {\n\t  function l(a, b) {\n\t    document.addEventListener ? a.addEventListener(\"scroll\", b, !1) : a.attachEvent(\"scroll\", b);\n\t  }function m(a) {\n\t    document.body ? a() : document.addEventListener ? document.addEventListener(\"DOMContentLoaded\", function c() {\n\t      document.removeEventListener(\"DOMContentLoaded\", c);a();\n\t    }) : document.attachEvent(\"onreadystatechange\", function k() {\n\t      if (\"interactive\" == document.readyState || \"complete\" == document.readyState) document.detachEvent(\"onreadystatechange\", k), a();\n\t    });\n\t  };function v(a) {\n\t    this.a = document.createElement(\"div\");this.a.setAttribute(\"aria-hidden\", \"true\");this.a.appendChild(document.createTextNode(a));this.b = document.createElement(\"span\");this.c = document.createElement(\"span\");this.h = document.createElement(\"span\");this.f = document.createElement(\"span\");this.g = -1;this.b.style.cssText = \"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";this.c.style.cssText = \"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";\n\t    this.f.style.cssText = \"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";this.h.style.cssText = \"display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;\";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c);\n\t  }\n\t  function w(a, b) {\n\t    a.a.style.cssText = \"max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:\" + b + \";\";\n\t  }function y(a) {\n\t    var b = a.a.offsetWidth,\n\t        c = b + 100;a.f.style.width = c + \"px\";a.c.scrollLeft = c;a.b.scrollLeft = a.b.scrollWidth + 100;return a.g !== b ? (a.g = b, !0) : !1;\n\t  }function z(a, b) {\n\t    function c() {\n\t      var a = k;y(a) && null !== a.a.parentNode && b(a.g);\n\t    }var k = a;l(a.b, c);l(a.c, c);y(a);\n\t  };function A(a, b) {\n\t    var c = b || {};this.family = a;this.style = c.style || \"normal\";this.weight = c.weight || \"normal\";this.stretch = c.stretch || \"normal\";\n\t  }var B = null,\n\t      C = null,\n\t      G = !!window.FontFace;function H() {\n\t    if (null === C) {\n\t      var a = document.createElement(\"div\");try {\n\t        a.style.font = \"condensed 100px sans-serif\";\n\t      } catch (b) {}C = \"\" !== a.style.font;\n\t    }return C;\n\t  }function I(a, b) {\n\t    return [a.style, a.weight, H() ? a.stretch : \"\", \"100px\", b].join(\" \");\n\t  }\n\t  A.prototype.load = function (a, b) {\n\t    var c = this,\n\t        k = a || \"BESbswy\",\n\t        x = b || 3E3,\n\t        D = new Date().getTime();return new Promise(function (a, b) {\n\t      if (G) {\n\t        var J = new Promise(function (a, b) {\n\t          function e() {\n\t            new Date().getTime() - D >= x ? b() : document.fonts.load(I(c, c.family), k).then(function (c) {\n\t              1 <= c.length ? a() : setTimeout(e, 25);\n\t            }, function () {\n\t              b();\n\t            });\n\t          }e();\n\t        }),\n\t            K = new Promise(function (a, c) {\n\t          setTimeout(c, x);\n\t        });Promise.race([K, J]).then(function () {\n\t          a(c);\n\t        }, function () {\n\t          b(c);\n\t        });\n\t      } else m(function () {\n\t        function q() {\n\t          var b;if (b = -1 != f && -1 != g || -1 != f && -1 != h || -1 != g && -1 != h) (b = f != g && f != h && g != h) || (null === B && (b = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent), B = !!b && (536 > parseInt(b[1], 10) || 536 === parseInt(b[1], 10) && 11 >= parseInt(b[2], 10))), b = B && (f == r && g == r && h == r || f == t && g == t && h == t || f == u && g == u && h == u)), b = !b;b && (null !== d.parentNode && d.parentNode.removeChild(d), clearTimeout(F), a(c));\n\t        }function E() {\n\t          if (new Date().getTime() - D >= x) null !== d.parentNode && d.parentNode.removeChild(d), b(c);else {\n\t            var a = document.hidden;if (!0 === a || void 0 === a) f = e.a.offsetWidth, g = n.a.offsetWidth, h = p.a.offsetWidth, q();F = setTimeout(E, 50);\n\t          }\n\t        }var e = new v(k),\n\t            n = new v(k),\n\t            p = new v(k),\n\t            f = -1,\n\t            g = -1,\n\t            h = -1,\n\t            r = -1,\n\t            t = -1,\n\t            u = -1,\n\t            d = document.createElement(\"div\"),\n\t            F = 0;d.dir = \"ltr\";w(e, I(c, \"sans-serif\"));w(n, I(c, \"serif\"));w(p, I(c, \"monospace\"));d.appendChild(e.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);r = e.a.offsetWidth;t = n.a.offsetWidth;u = p.a.offsetWidth;E();z(e, function (a) {\n\t          f = a;q();\n\t        });w(e, I(c, '\"' + c.family + '\",sans-serif'));z(n, function (a) {\n\t          g = a;q();\n\t        });w(n, I(c, '\"' + c.family + '\",serif'));z(p, function (a) {\n\t          h = a;q();\n\t        });w(p, I(c, '\"' + c.family + '\",monospace'));\n\t      });\n\t    });\n\t  };window.FontFaceObserver = A;window.FontFaceObserver.prototype.check = window.FontFaceObserver.prototype.load = A.prototype.load;\"undefined\" !== typeof module && (module.exports = window.FontFaceObserver);\n\t})();\n\n/***/ },\n/* 78 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (flags, oErrors) {\n\t\ttheFetch = theFetch || window.fetch;\n\t\t// allow use of our proxy for apis when cors not available\n\t\tif (!('withCredentials' in new XMLHttpRequest())) {\n\t\t\t(function () {\n\t\t\t\tvar realFetch = window.fetch;\n\t\n\t\t\t\twindow.fetch = function (url, opts) {\n\t\t\t\t\tif (opts.useCorsProxy) {\n\t\t\t\t\t\tvar urlObj = new URL(url);\n\t\t\t\t\t\topts.headers = opts.headers || {};\n\t\t\t\t\t\topts.headers['api-host'] = urlObj.origin;\n\t\t\t\t\t\turl = url.replace(urlObj.origin, '/__api-proxy');\n\t\t\t\t\t}\n\t\t\t\t\treturn realFetch.call(this, url, opts);\n\t\t\t\t};\n\t\t\t})();\n\t\t}\n\t\n\t\t// turn on more detailed error reporting of ajax calls\n\t\tif (flags.get('clientAjaxErrorReporting')) {\n\t\t\t(function () {\n\t\t\t\tvar realFetch = window.fetch;\n\t\t\t\twindow.fetch = function (url, opts) {\n\t\t\t\t\treturn realFetch.call(this, url, opts).catch(function (err) {\n\t\t\t\t\t\toErrors.log(url + (opts ? JSON.stringify(opts) : '') + err);\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t})();\n\t\t}\n\t};\n\t\n\texports.restore = restore;\n\tvar theFetch = void 0;\n\tfunction restore() {\n\t\tif (theFetch) {\n\t\t\twindow.fetch = theFetch;\n\t\t}\n\t}\n\n/***/ },\n/* 79 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(80);\n\n/***/ },\n/* 80 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * The oErrors error tracking and reporting module.\n\t *\n\t * @module oErrors\n\t * @see Errors\n\t */\n\tvar Errors = __webpack_require__(81);\n\tvar errors = new Errors();\n\t\n\tfunction initialise() {\n\t  errors.init();\n\t  document.removeEventListener('o.DOMContentLoaded', initialise);\n\t}\n\t\n\t// Try and initialise on o.DOMContentLoaded. If it fails, defer to the\n\t// consumer of the library.\n\tdocument.addEventListener('o.DOMContentLoaded', initialise);\n\t\n\t/**\n\t * A constructed object, this module is a Singleton due to the architecture of\n\t * Raven JS. See {@link Errors} for the publicly available interface.\n\t *\n\t * @type {Errors}\n\t */\n\tmodule.exports = errors;\n\n/***/ },\n/* 81 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Logger = __webpack_require__(82);\n\t\n\tfunction isFunction(fn) {\n\t\treturn typeof fn === 'function';\n\t}\n\t\n\tfunction throwLater(error) {\n\t\t// Throw the error on the main event loop rather than in this\n\t\t// context so that the error can be surfaced to the developer\n\t\t// without halting the current context.\n\t\tsetTimeout(function oErrorsError() {\n\t\t\tthrow error;\n\t\t}, 0);\n\t}\n\t\n\t/**\n\t * @class Errors\n\t */\n\tfunction Errors() {\n\t\t// Initialises raven client with noops for consoleonly logging level\n\t\tthis.ravenClient = null;\n\t\n\t\t/**\n\t  * The initialised state of the object.\n\t  * @type {bool}\n\t  */\n\t\tthis.initialised = false;\n\t\n\t\tthis.logger = null;\n\t\tthis._logEventHandler = this.handleLogEvent.bind(this);\n\t\n\t\t// While not initialised, any caught errors are buffered.\n\t\tthis._errorBuffer = [];\n\t\n\t\t// Cache the declarative config String to avoid reading the DOM more than\n\t\t// once, once initialised, the reference to the string is released for GC.\n\t\tthis._declarativeConfigString = false;\n\t\n\t\t// noop operations\n\t\tthis._filterError = function () {\n\t\t\treturn true;\n\t\t};\n\t\tthis._transformError = function (data) {\n\t\t\treturn data;\n\t\t};\n\t}\n\t\n\t/**\n\t * Initialises the Error object with a Raven dependency.\n\t *\n\t * All options are optional, if a configuration option is missing, the module\n\t * will try to initialise using any configuration found in the DOM using the\n\t * script config tag.\n\t *\n\t * @example\n\t * <!-- DOM configuration settings -->\n\t * <script type=\"application/json\" data-o-errors-config>\n\t * {\n\t *   \"sentryEndpoint\": \"https://dsn@app.getsentry.com/123\"\n\t * }\n\t * </script>\n\t *\n\t * @param {Object} options                 - Optional, configuration options object\n\t * @param {string} options.sentryEndpoint  - Optional if configued via the DOM, Required if not, must be a valid {@link https://app.getsentry.com/docs/platforms/|Sentry DSN}.\n\t * @param {string} options.siteVersion     - Optional, optionally the version of the code the page is running. This tags each error with the code version\n\t * @param {string} options.logLevel        - Optional, see {@link Logger.level} for valid names\n\t * @param {boolean} options.disabled       - Optional, If `true`, disable o-errors reporting.\n\t * @param {Array} options.buffer           - Optional, pre-existing buffer of error events to flush.\n\t * @param {Object} raven                   - The Raven JS client object.\n\t * @returns {Errors}  - The Errors instance\n\t */\n\tErrors.prototype.init = function (options, raven) {\n\t\tif (this.initialised) {\n\t\t\treturn this;\n\t\t}\n\t\n\t\tvar hasDeclarativeConfig = this._hasDeclarativeConfig();\n\t\tvar configMissing = !(hasDeclarativeConfig || options);\n\t\n\t\t// In main.js an event listener is bound to 'o.DOMContentLoaded', this\n\t\t// calls 'init' without arguments with the intention of configuring from\n\t\t// the declarative config if it exists.  If the declarative markup doesn't\n\t\t// exist, we do nothing so that the consumer has the option of\n\t\t// configuring imperatively by calling `init` with options themselves.\n\t\tif (configMissing) {\n\t\t\treturn this;\n\t\t}\n\t\n\t\toptions = options || {};\n\t\n\t\tif (hasDeclarativeConfig) {\n\t\t\toptions = this._initialiseDeclaratively(options);\n\t\n\t\t\tif (options.filterError) {\n\t\t\t\toptions.filterError = undefined;\n\t\t\t\tthrowLater(new Error(\"Can not configure 'oErrors' with `filterError` using declarative markup - error filtering will not be enabled\"));\n\t\t\t}\n\t\n\t\t\tif (options.transformError) {\n\t\t\t\toptions.transformError = undefined;\n\t\t\t\tthrowLater(new Error(\"Can not configure 'oErrors' with `transformError` using declarative markup - error transforming will not be enabled\"));\n\t\t\t}\n\t\n\t\t\tif (options.transportFunction) {\n\t\t\t\toptions.transportFunction = undefined;\n\t\t\t\tthrowLater(new Error(\"Can not configure 'oErrors' with `transportFunction` using declarative markup - overriding Sentry's transport function will not be enabled\"));\n\t\t\t}\n\t\t}\n\t\n\t\tif (isFunction(options.transformError)) {\n\t\t\tthis._transformError = options.transformError;\n\t\t}\n\t\n\t\tif (isFunction(options.filterError)) {\n\t\t\tthis._filterError = options.filterError;\n\t\t}\n\t\n\t\tif (Array.isArray(options.errorBuffer) && options.errorBuffer.length > 0) {\n\t\t\tthis._errorBuffer = this._errorBuffer.concat(options.errorBuffer);\n\t\t}\n\t\n\t\t// If errors is configured to be disabled, (options.disabled = true),\n\t\t// then stub this.report, turn off logging (which turns them into noops),\n\t\t// and return 'initialised' before installing raven.\n\t\tvar isErrorsDisabled = options.enabled === undefined ? false : options.enabled === false;\n\t\n\t\tvar logLevel = isErrorsDisabled ? Logger.off : options.logLevel;\n\t\tvar defaultLogLength = 10;\n\t\tthis.logger = new Logger(defaultLogLength, logLevel);\n\t\n\t\tif (isErrorsDisabled) {\n\t\t\tthis.report = function (error) {\n\t\t\t\treturn error;\n\t\t\t};\n\t\t\tthis.wrapWithContext = function (fn) {\n\t\t\t\treturn fn;\n\t\t\t};\n\t\t\tthis.initialised = true;\n\t\t\treturn this;\n\t\t}\n\t\n\t\tif (!options.sentryEndpoint) {\n\t\t\tthrow new Error('Could not initialise o-errors: Sentry endpoint and auth configuration missing.');\n\t\t}\n\t\n\t\t// Only install Raven if not using console only logging level\n\t\tif (Logger.level[logLevel] !== Logger.level.consoleonly) {\n\t\t\tthis._configureAndInstallRaven(options, raven);\n\t\t} else {\n\t\t\tthis.ravenClient = {\n\t\t\t\tcaptureException: function captureException() {},\n\t\t\t\tuninstall: function uninstall() {}\n\t\t\t};\n\t\t}\n\t\n\t\tdocument.addEventListener('oErrors.log', this._logEventHandler);\n\t\n\t\tthis.initialised = true;\n\t\n\t\tthis._flushBufferedErrors();\n\t\treturn this;\n\t};\n\t\n\tErrors.prototype._configureAndInstallRaven = function (options, raven) {\n\t\n\t\t// To control the initialisation of the third party code (Raven)\n\t\t// we include it only at init time see \"http://origami.ft.com/docs/syntax/js/#initialisation\"\n\t\t//\n\t\t// It is optional so that it can be mocked in tests\n\t\tif (!(raven || this.ravenClient)) {\n\t\t\traven = __webpack_require__(83);\n\t\t}\n\t\n\t\tthis.ravenClient = raven;\n\t\n\t\tvar sentryEndpoint = options.sentryEndpoint;\n\t\tvar updatePayloadBeforeSend = this._updatePayloadBeforeSend.bind(this);\n\t\n\t\tvar ravenOptions = {\n\t\t\tdataCallback: updatePayloadBeforeSend\n\t\t};\n\t\n\t\tif (options.siteVersion) {\n\t\t\travenOptions.release = options.siteVersion;\n\t\t}\n\t\n\t\tif (options.tags) {\n\t\t\travenOptions.tags = options.tags;\n\t\t}\n\t\n\t\tif (isFunction(options.transportFunction)) {\n\t\t\travenOptions.transport = options.transportFunction;\n\t\t}\n\t\n\t\tthis.ravenClient.config(sentryEndpoint, ravenOptions);\n\t\tthis.ravenClient.install();\n\t};\n\t\n\t/**\n\t * Flush any errors that are buffered in `this._errorBuffer`.\n\t * @private\n\t *\n\t * @returns {undefined} - undefined\n\t */\n\tErrors.prototype._flushBufferedErrors = function () {\n\t\tif (!this.initialised) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar errors = this;\n\t\tthis._errorBuffer.forEach(function (bufferedError) {\n\t\t\terrors.report(bufferedError.error, bufferedError.context);\n\t\t});\n\t\n\t\t// Clear the buffer, deleting references we hold to any buffered errors\n\t\tthis._errorBuffer = [];\n\t};\n\t\n\t/**\n\t * Report an Error object to the error aggregator.\n\t\n\t * @example\n\t * // Reports a caught Error generated by the Promise\n\t * fetch('example.com').then(doSomething).catch(oErrors.report);\n\t *\n\t * @example\n\t * // Reports and re-throws the caught error\n\t * try {\n\t *   doSomething();\n\t * } catch(e) {\n\t *   throw oErrors.report(e);\n\t * }\n\t *\n\t * @param {Error}  error    - The error object to report.\n\t * @param {Object} context  - Optional context to attach to the Error in the\n\t *                            aggregator\n\t * @return {Error} - The passed in error\n\t */\n\tErrors.prototype.report = function (error, context) {\n\t\tvar _context = context || {};\n\t\tvar reportObject = {\n\t\t\terror: error,\n\t\t\tcontext: {\n\t\t\t\t// The extra key tells Sentry to put this information\n\t\t\t\t// in the Additional Data section, otherwise, it doesn't\n\t\t\t\t// understand the context and ignores it\n\t\t\t\textra: _context\n\t\t\t}\n\t\t};\n\t\n\t\tif (!this.initialised) {\n\t\t\tthis._errorBuffer.push(reportObject);\n\t\t\treturn error;\n\t\t}\n\t\n\t\tvar transformedError = this._transformError(reportObject);\n\t\n\t\t// The _transformError may return a bad value, in order to protect against\n\t\t// this mistake and still report a valid object we test the return value\n\t\t// before continuing to use it\n\t\tif (transformedError && transformedError.error) {\n\t\t\treportObject = transformedError;\n\t\t}\n\t\n\t\tif (!reportObject.context) {\n\t\t\treportObject.context = {};\n\t\t}\n\t\n\t\tif (!this._filterError(reportObject)) {\n\t\t\treturn error;\n\t\t}\n\t\n\t\t// Raven, for some reason completely ignores the contents of\n\t\t// error.message... to get around this, we attach the error message to the\n\t\t// context object.\n\t\tif (reportObject.error.message) {\n\t\t\treportObject.context.errormessage = reportObject.error.message;\n\t\t}\n\t\n\t\tthis.ravenClient.captureException(reportObject.error, reportObject.context);\n\t\treturn error;\n\t};\n\t\n\t/**\n\t * Log an 'ERROR' level log. Intended to have the same semantics as\n\t * console.error.\n\t *\n\t * This.stores the log in memory and will attach the last `n` log lines to the\n\t * context of any reported errors.  See {@link Errors#log} to log a log\n\t * message.\n\t *\n\t *\n\t * @param {String}  message - The message to log\n\t * @returns {undefined} - undefined\n\t */\n\tErrors.prototype.error = function () {\n\t\tthis.logger.error.apply(this.logger, arguments);\n\t};\n\t\n\t/**\n\t * Log a 'WARN' level log.  Intended to have the same semantics as\n\t * console.warn.\n\t * This stores the log in memory and will attach the last `n` log lines to the\n\t * context of the error. See {@link Errors#log} to log a log message.\n\t *\n\t * @param {String} warnMessage  - The message to log.\n\t * @returns {undefined} - undefined\n\t */\n\tErrors.prototype.warn = function () {\n\t\tthis.logger.warn.apply(this.logger, arguments);\n\t};\n\t\n\t/**\n\t * Log a 'LOG' level log.  Intended to have the same semantics as console.log.\n\t * This stores the log in memory and will attach the last `n` log lines to the\n\t * context of the error.  See {@link Errors#warn} to log a warn message.\n\t *\n\t * @param {String} logMessage - The message to log.\n\t * @returns {undefined} - undefined\n\t */\n\tErrors.prototype.log = function () {\n\t\tthis.logger.log.apply(this.logger, arguments);\n\t};\n\t\n\t/**\n\t * Wrap a function so that any uncaught errors are caught and reported to the\n\t * error aggregator.\n\t *\n\t * @example\n\t * // Wraps function, any errors occurring within the function are caught, logged, and rethrown.\n\t * let wrappedFunction = oErrors.wrap(function() {\n\t *   throw new Error(\"My Error\");\n\t * });\n\t *\n\t * If you want to attach additional contextual information to the error, see\n\t * {@link Errors#wrapWithContext}.\n\t -\n\t * @param {Function} fn     - The function to wrap.\n\t * @return {Function} - Wrapped function\n\t */\n\tErrors.prototype.wrap = function (fn) {\n\t\treturn this.wrapWithContext({}, fn);\n\t};\n\t\n\t/**\n\t * Wrap a function so that any uncaught errors are caught and reported to the error\n\t * aggregator.\n\t * This method allows additional context to be attached to the error if it\n\t * occurs.\n\t *\n\t * @example\n\t * // Wrap a function with some additional context to be reported in the event\n\t * // `doSomethingCallback` throws an error.\n\t * setTimeout(oErrors.wrapWithContext({ \"context:url\": \"example.com\" }, doSomethingCallback), 1000);\n\t *\n\t * @param {Object}   context     - Additional context to report along with the error\n\t *                                 if the function `fn` throws an Error.\n\t * @param {Function} fn          - The function to wrap\n\t * @return {Function} - Wrapped function with context\n\t */\n\tErrors.prototype.wrapWithContext = function (context, fn) {\n\t\tvar errors = this;\n\t\treturn function () {\n\t\t\ttry {\n\t\t\t\treturn fn.apply(undefined, arguments);\n\t\t\t} catch (e) {\n\t\t\t\terrors.report(e, context);\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t};\n\t};\n\t\n\t/**\n\t * Remove the `oErrors.log` event listener and clean up as much of the Raven\n\t * client as possible.\n\t *\n\t * Errors is unusable after a call to destroy and calling `init` subsequently\n\t * will fail.\n\t *\n\t * @returns {undefined} - undefined\n\t */\n\tErrors.prototype.destroy = function () {\n\t\tif (!this.initialised) {\n\t\t\treturn;\n\t\t}\n\t\tdocument.removeEventListener('oErrors.log', this._logEventHandler);\n\t\tthis.ravenClient.uninstall();\n\t};\n\t\n\tErrors.prototype.handleLogEvent = function (ev) {\n\t\t// If no event is passed here, return early\n\t\tif (!ev) {\n\t\t\treturn;\n\t\t}\n\t\n\t\t// Tag the context with additional information about the DOM.\n\t\tvar context = {\n\t\t\tinfo: ev.detail.info || {},\n\t\t\textra: {\n\t\t\t\t\"context:dom\": this._getEventPath(ev).reduceRight(function (builder, el) {\n\t\t\t\t\tvar classList = Array.prototype.slice.call(el.classList || []);\n\t\n\t\t\t\t\tif (!el.nodeName) {\n\t\t\t\t\t\treturn builder + \" - \" + el.constructor.name + \"\\n\";\n\t\t\t\t\t}\n\t\n\t\t\t\t\tvar nodeName = el.nodeName.toLowerCase();\n\t\n\t\t\t\t\tif (nodeName.indexOf('#') === 0) {\n\t\t\t\t\t\treturn builder + \"<\" + nodeName + \">\\n\";\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn builder + \"<\" + el.nodeName.toLowerCase() + \" class='\" + classList.join(' ') + \"' id='\" + (el.id || '') + \"'>\\n\";\n\t\t\t\t}, \"\")\n\t\t\t}\n\t\t};\n\t\tthis.report(ev.detail.error, context);\n\t};\n\t\n\t/**\n\t * Given a DOM event, return an ordered array of Elements that the event will propagate\n\t * through.\n\t *\n\t * @private\n\t * @param {Event} event - The event to get the path for.\n\t * @returns {Array} - An array of Elements.\n\t */\n\tErrors.prototype._getEventPath = function (event) {\n\t\tvar path = [];\n\t\n\t\t// IE backwards compatibility (get the actual target). If IE, uses\n\t\t// `window.event.srcElement`\n\t\tvar element = event.target || window.event.srcElement;\n\t\n\t\twhile (element) {\n\t\t\tpath.push(element);\n\t\t\telement = element.parentElement;\n\t\t}\n\t\n\t\treturn path;\n\t};\n\t\n\t/**\n\t * A hook to add additional data to the payload before sending.\n\t *\n\t * @private\n\t * @param {Object} data - The data object from Raven\n\t * @returns {Object} - Updated data\n\t */\n\tErrors.prototype._updatePayloadBeforeSend = function (data) {\n\t\tif (this.logger.enabled) {\n\t\t\tdata.extra[\"context:log\"] = this.logger.logLines();\n\t\t}\n\t\treturn data;\n\t};\n\t\n\t/**\n\t * Get whether declarative configuration exists in the DOM.\n\t *\n\t * @private\n\t * @returns {boolean} - Boolean value indicating if there's declarative config\n\t */\n\tErrors.prototype._hasDeclarativeConfig = function () {\n\t\treturn !!this._getDeclarativeConfig();\n\t};\n\t\n\t/**\n\t * Get the configuration as a String.\n\t *\n\t * @private\n\t * @returns {string} - Stringified configuration\n\t */\n\tErrors.prototype._getDeclarativeConfig = function () {\n\t\tif (!this._declarativeConfigString) {\n\t\t\tvar config = document.querySelector('script[data-o-errors-config]');\n\t\t\tif (config) {\n\t\t\t\tthis._declarativeConfigString = config.textContent || config.innerText || config.innerHTML;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\n\t\treturn this._declarativeConfigString;\n\t};\n\t\n\t/**\n\t * Initialises additional data using the <script type=\"application/json\" data-o-errors-config> element in the DOM.\n\t *\n\t * @private\n\t * @param {Object} options - A partially, or fully filled options object.  If\n\t *                           an option is missing, this method will attempt to\n\t *                           initialise it from the DOM.\n\t * @returns {Object} - The options modified to include the options gathered\n\t *                     from the DOM\n\t */\n\tErrors.prototype._initialiseDeclaratively = function (options) {\n\t\n\t\tif (!this._hasDeclarativeConfig()) {\n\t\t\treturn false;\n\t\t}\n\t\n\t\tvar declarativeOptions = void 0;\n\t\n\t\ttry {\n\t\t\tdeclarativeOptions = JSON.parse(this._getDeclarativeConfig());\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"Invalid JSON configuration syntax, check validity for o-errors configuration: '\" + e.message + \"'\");\n\t\t}\n\t\n\t\tfor (var property in declarativeOptions) {\n\t\t\tif (declarativeOptions.hasOwnProperty(property)) {\n\t\t\t\toptions[property] = options[property] || declarativeOptions[property];\n\t\t\t}\n\t\t}\n\t\n\t\t// Release the reference to the config string\n\t\tthis._declarativeConfigString = false;\n\t\treturn options;\n\t};\n\t\n\tmodule.exports = Errors;\n\n/***/ },\n/* 82 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/* global console */\n\t\n\t/**\n\t * Create a new Logger class. Used internally by {@link Errors}.\n\t *\n\t * @param {Number} logSize - The default, fixed size of the log buffer.\n\t * @param {String} logLevel - The default log level, see the enumeration {@link Logger.level} for valid values, expects a String corresponding to a log level name.\n\t * @class Logger\n\t */\n\tfunction Logger(logSize, logLevel) {\n\t\tthis._logBuffer = new Array(logSize);\n\t\tthis._nextLogIndex = 0;\n\t\n\t\t// const\n\t\tthis._logLevel = Logger.level[logLevel];\n\t\n\t\tthis.enabled = this._logLevel !== Logger.level.off;\n\t\tif (!this.enabled) {\n\t\t\tthis._consoleLog = noop;\n\t\t}\n\t\n\t\tvar out = 'undefined' !== typeof console ? console : { log: noop, warn: noop, error: noop };\n\t\tthis.out = out;\n\t}\n\t\n\tLogger.prototype.error = function () {\n\t\tthis._consoleLog(\"ERROR\", this.out.error, arguments);\n\t};\n\t\n\tLogger.prototype.log = function () {\n\t\tthis._consoleLog(\"LOG\", this.out.log, arguments);\n\t};\n\t\n\tLogger.prototype.warn = function () {\n\t\tthis._consoleLog(\"WARN\", this.out.warn, arguments);\n\t};\n\t\n\tLogger.prototype._consoleLog = function (name, consoleMethod, args) {\n\t\tvar debug = this._logLevel === Logger.level.debug || this._logLevel === Logger.level.consoleonly;\n\t\n\t\t// Because 'arguments' is not a true array we call out to argsAsLogString\n\t\t// to efficiently concatenate the arguments as string types to create the\n\t\t// message.\n\t\tvar message = argsAsLogString(name, args);\n\t\tthis.append(message);\n\t\n\t\tif (debug && consoleMethod) {\n\t\t\tconsoleMethod.apply(this.out, args);\n\t\t}\n\t};\n\t\n\tfunction argsAsLogString(logName, args) {\n\t\tvar string = logName + \":\";\n\t\n\t\t// TODO: Improve the logging of objects.  We could 'require('util')' and\n\t\t// use util.format (provided by browserify), but it adds 8K to the\n\t\t// minified output, it doesn't seem worth it. Kornel suggests\n\t\t// git.svc.ft.com/projects/LOG/repos/js-abbreviate/browse\n\t\tfor (var index = 0; index < args.length; index++) {\n\t\t\tstring += \" \" + args[index];\n\t\t}\n\t\n\t\treturn string;\n\t}\n\t\n\tLogger.prototype.append = function (logLine) {\n\t\tthis._logBuffer[this._nextLogIndex] = logLine;\n\t\n\t\t// Really simple Ring buffer implementation (keep track of next insertion\n\t\t// location)\n\t\tthis._nextLogIndex++;\n\t\tif (this._nextLogIndex === this._logBuffer.length) {\n\t\t\tthis._nextLogIndex = 0;\n\t\t}\n\t};\n\t\n\t/**\n\t * Roll the log buffer into a new line delimited string starting.\n\t * It, creates a chronological log based on the contents of the current\n\t * buffer. Any log entries that are undefined are dropped.\n\t *\n\t * @private\n\t * @returns {String} - Rolled up string\n\t */\n\tLogger.prototype.logLines = function () {\n\t\tvar index = this._nextLogIndex;\n\t\tvar nextLogIndex = this._nextLogIndex;\n\t\tvar rolledUpLogs = [];\n\t\n\t\tdo {\n\t\t\tvar logEntry = this._logBuffer[index];\n\t\n\t\t\tif (logEntry !== undefined) {\n\t\t\t\trolledUpLogs.push(this._logBuffer[index]);\n\t\t\t}\n\t\n\t\t\tindex++;\n\t\n\t\t\tif (index >= this._logBuffer.length) {\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t} while (index !== nextLogIndex);\n\t\n\t\treturn rolledUpLogs.join(\"\\n\");\n\t};\n\t\n\t/**\n\t * Describes the logging levels available\n\t * @enum {Number}\n\t * @public\n\t */\n\tLogger.level = {\n\t\t/**\n\t  * No logging at all occurs, each call to errors.log or errors.log are no-ops\n\t  */\n\t\toff: 0,\n\t\n\t\t/**\n\t  * Logs are stored in a buffer, by default the last 10 lines.  When an\n\t  *  error occurs, these log lines are attached to the error object.\n\t  */\n\t\tcontextonly: 1,\n\t\n\t\t/**\n\t  * Logs are stored in the buffer as with `contextonly` however, they are\n\t  * also passed through to the relevant `console.*` API.\n\t  */\n\t\tdebug: 2, // contextonly & debug\n\t\n\t\t/**\n\t  * Logging only occurs in the console. Raven client is not initialised.\n\t  */\n\t\tconsoleonly: 3\n\t};\n\t\n\tfunction noop() {}\n\t\n\tmodule.exports = Logger;\n\n/***/ },\n/* 83 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(84);\n\n/***/ },\n/* 84 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/*! Raven.js 1.3.0 (768fdca) | github.com/getsentry/raven-js */\n\t\n\t/*\n\t * Includes TraceKit\n\t * https://github.com/getsentry/TraceKit\n\t *\n\t * Copyright 2015 Matt Robenolt and other contributors\n\t * Released under the BSD license\n\t * https://github.com/getsentry/raven-js/blob/master/LICENSE\n\t *\n\t */\n\t;(function (window, undefined) {\n\t    'use strict';\n\t\n\t    /*\n\t     TraceKit - Cross brower stack traces - github.com/occ/TraceKit\n\t     MIT license\n\t    */\n\t\n\t    var TraceKit = {\n\t        remoteFetching: false,\n\t        collectWindowErrors: true,\n\t        // 3 lines before, the offending line, 3 lines after\n\t        linesOfContext: 7,\n\t        debug: false\n\t    };\n\t\n\t    // global reference to slice\n\t    var _slice = [].slice;\n\t    var UNKNOWN_FUNCTION = '?';\n\t\n\t    function getLocationHref() {\n\t        if (typeof document === 'undefined') return '';\n\t\n\t        return document.location.href;\n\t    };\n\t\n\t    /**\n\t     * TraceKit.report: cross-browser processing of unhandled exceptions\n\t     *\n\t     * Syntax:\n\t     *   TraceKit.report.subscribe(function(stackInfo) { ... })\n\t     *   TraceKit.report.unsubscribe(function(stackInfo) { ... })\n\t     *   TraceKit.report(exception)\n\t     *   try { ...code... } catch(ex) { TraceKit.report(ex); }\n\t     *\n\t     * Supports:\n\t     *   - Firefox: full stack trace with line numbers, plus column number\n\t     *              on top frame; column number is not guaranteed\n\t     *   - Opera:   full stack trace with line and column numbers\n\t     *   - Chrome:  full stack trace with line and column numbers\n\t     *   - Safari:  line and column number for the top frame only; some frames\n\t     *              may be missing, and column number is not guaranteed\n\t     *   - IE:      line and column number for the top frame only; some frames\n\t     *              may be missing, and column number is not guaranteed\n\t     *\n\t     * In theory, TraceKit should work on all of the following versions:\n\t     *   - IE5.5+ (only 8.0 tested)\n\t     *   - Firefox 0.9+ (only 3.5+ tested)\n\t     *   - Opera 7+ (only 10.50 tested; versions 9 and earlier may require\n\t     *     Exceptions Have Stacktrace to be enabled in opera:config)\n\t     *   - Safari 3+ (only 4+ tested)\n\t     *   - Chrome 1+ (only 5+ tested)\n\t     *   - Konqueror 3.5+ (untested)\n\t     *\n\t     * Requires TraceKit.computeStackTrace.\n\t     *\n\t     * Tries to catch all unhandled exceptions and report them to the\n\t     * subscribed handlers. Please note that TraceKit.report will rethrow the\n\t     * exception. This is REQUIRED in order to get a useful stack trace in IE.\n\t     * If the exception does not reach the top of the browser, you will only\n\t     * get a stack trace from the point where TraceKit.report was called.\n\t     *\n\t     * Handlers receive a stackInfo object as described in the\n\t     * TraceKit.computeStackTrace docs.\n\t     */\n\t    TraceKit.report = function reportModuleWrapper() {\n\t        var handlers = [],\n\t            lastArgs = null,\n\t            lastException = null,\n\t            lastExceptionStack = null;\n\t\n\t        /**\n\t         * Add a crash handler.\n\t         * @param {Function} handler\n\t         */\n\t        function subscribe(handler) {\n\t            installGlobalHandler();\n\t            handlers.push(handler);\n\t        }\n\t\n\t        /**\n\t         * Remove a crash handler.\n\t         * @param {Function} handler\n\t         */\n\t        function unsubscribe(handler) {\n\t            for (var i = handlers.length - 1; i >= 0; --i) {\n\t                if (handlers[i] === handler) {\n\t                    handlers.splice(i, 1);\n\t                }\n\t            }\n\t        }\n\t\n\t        /**\n\t         * Remove all crash handlers.\n\t         */\n\t        function unsubscribeAll() {\n\t            uninstallGlobalHandler();\n\t            handlers = [];\n\t        }\n\t\n\t        /**\n\t         * Dispatch stack information to all handlers.\n\t         * @param {Object.<string, *>} stack\n\t         */\n\t        function notifyHandlers(stack, isWindowError) {\n\t            var exception = null;\n\t            if (isWindowError && !TraceKit.collectWindowErrors) {\n\t                return;\n\t            }\n\t            for (var i in handlers) {\n\t                if (hasKey(handlers, i)) {\n\t                    try {\n\t                        handlers[i].apply(null, [stack].concat(_slice.call(arguments, 2)));\n\t                    } catch (inner) {\n\t                        exception = inner;\n\t                    }\n\t                }\n\t            }\n\t\n\t            if (exception) {\n\t                throw exception;\n\t            }\n\t        }\n\t\n\t        var _oldOnerrorHandler, _onErrorHandlerInstalled;\n\t\n\t        /**\n\t         * Ensures all global unhandled exceptions are recorded.\n\t         * Supported by Gecko and IE.\n\t         * @param {string} message Error message.\n\t         * @param {string} url URL of script that generated the exception.\n\t         * @param {(number|string)} lineNo The line number at which the error\n\t         * occurred.\n\t         * @param {?(number|string)} colNo The column number at which the error\n\t         * occurred.\n\t         * @param {?Error} ex The actual Error object.\n\t         */\n\t        function traceKitWindowOnError(message, url, lineNo, colNo, ex) {\n\t            var stack = null;\n\t\n\t            if (lastExceptionStack) {\n\t                TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(lastExceptionStack, url, lineNo, message);\n\t                processLastException();\n\t            } else if (ex) {\n\t                // New chrome and blink send along a real error object\n\t                // Let's just report that like a normal error.\n\t                // See: https://mikewest.org/2013/08/debugging-runtime-errors-with-window-onerror\n\t                stack = TraceKit.computeStackTrace(ex);\n\t                notifyHandlers(stack, true);\n\t            } else {\n\t                var location = {\n\t                    'url': url,\n\t                    'line': lineNo,\n\t                    'column': colNo\n\t                };\n\t                location.func = TraceKit.computeStackTrace.guessFunctionName(location.url, location.line);\n\t                location.context = TraceKit.computeStackTrace.gatherContext(location.url, location.line);\n\t                stack = {\n\t                    'message': message,\n\t                    'url': getLocationHref(),\n\t                    'stack': [location]\n\t                };\n\t                notifyHandlers(stack, true);\n\t            }\n\t\n\t            if (_oldOnerrorHandler) {\n\t                return _oldOnerrorHandler.apply(this, arguments);\n\t            }\n\t\n\t            return false;\n\t        }\n\t\n\t        function installGlobalHandler() {\n\t            if (_onErrorHandlerInstalled) {\n\t                return;\n\t            }\n\t            _oldOnerrorHandler = window.onerror;\n\t            window.onerror = traceKitWindowOnError;\n\t            _onErrorHandlerInstalled = true;\n\t        }\n\t\n\t        function uninstallGlobalHandler() {\n\t            if (!_onErrorHandlerInstalled) {\n\t                return;\n\t            }\n\t            window.onerror = _oldOnerrorHandler;\n\t            _onErrorHandlerInstalled = false;\n\t            _oldOnerrorHandler = undefined;\n\t        }\n\t\n\t        function processLastException() {\n\t            var _lastExceptionStack = lastExceptionStack,\n\t                _lastArgs = lastArgs;\n\t            lastArgs = null;\n\t            lastExceptionStack = null;\n\t            lastException = null;\n\t            notifyHandlers.apply(null, [_lastExceptionStack, false].concat(_lastArgs));\n\t        }\n\t\n\t        /**\n\t         * Reports an unhandled Error to TraceKit.\n\t         * @param {Error} ex\n\t         * @param {?boolean} rethrow If false, do not re-throw the exception.\n\t         * Only used for window.onerror to not cause an infinite loop of\n\t         * rethrowing.\n\t         */\n\t        function report(ex, rethrow) {\n\t            var args = _slice.call(arguments, 1);\n\t            if (lastExceptionStack) {\n\t                if (lastException === ex) {\n\t                    return; // already caught by an inner catch block, ignore\n\t                } else {\n\t                    processLastException();\n\t                }\n\t            }\n\t\n\t            var stack = TraceKit.computeStackTrace(ex);\n\t            lastExceptionStack = stack;\n\t            lastException = ex;\n\t            lastArgs = args;\n\t\n\t            // If the stack trace is incomplete, wait for 2 seconds for\n\t            // slow slow IE to see if onerror occurs or not before reporting\n\t            // this exception; otherwise, we will end up with an incomplete\n\t            // stack trace\n\t            window.setTimeout(function () {\n\t                if (lastException === ex) {\n\t                    processLastException();\n\t                }\n\t            }, stack.incomplete ? 2000 : 0);\n\t\n\t            if (rethrow !== false) {\n\t                throw ex; // re-throw to propagate to the top level (and cause window.onerror)\n\t            }\n\t        }\n\t\n\t        report.subscribe = subscribe;\n\t        report.unsubscribe = unsubscribe;\n\t        report.uninstall = unsubscribeAll;\n\t        return report;\n\t    }();\n\t\n\t    /**\n\t     * TraceKit.computeStackTrace: cross-browser stack traces in JavaScript\n\t     *\n\t     * Syntax:\n\t     *   s = TraceKit.computeStackTrace(exception) // consider using TraceKit.report instead (see below)\n\t     * Returns:\n\t     *   s.name              - exception name\n\t     *   s.message           - exception message\n\t     *   s.stack[i].url      - JavaScript or HTML file URL\n\t     *   s.stack[i].func     - function name, or empty for anonymous functions (if guessing did not work)\n\t     *   s.stack[i].args     - arguments passed to the function, if known\n\t     *   s.stack[i].line     - line number, if known\n\t     *   s.stack[i].column   - column number, if known\n\t     *   s.stack[i].context  - an array of source code lines; the middle element corresponds to the correct line#\n\t     *\n\t     * Supports:\n\t     *   - Firefox:  full stack trace with line numbers and unreliable column\n\t     *               number on top frame\n\t     *   - Opera 10: full stack trace with line and column numbers\n\t     *   - Opera 9-: full stack trace with line numbers\n\t     *   - Chrome:   full stack trace with line and column numbers\n\t     *   - Safari:   line and column number for the topmost stacktrace element\n\t     *               only\n\t     *   - IE:       no line numbers whatsoever\n\t     *\n\t     * Tries to guess names of anonymous functions by looking for assignments\n\t     * in the source code. In IE and Safari, we have to guess source file names\n\t     * by searching for function bodies inside all page scripts. This will not\n\t     * work for scripts that are loaded cross-domain.\n\t     * Here be dragons: some function names may be guessed incorrectly, and\n\t     * duplicate functions may be mismatched.\n\t     *\n\t     * TraceKit.computeStackTrace should only be used for tracing purposes.\n\t     * Logging of unhandled exceptions should be done with TraceKit.report,\n\t     * which builds on top of TraceKit.computeStackTrace and provides better\n\t     * IE support by utilizing the window.onerror event to retrieve information\n\t     * about the top of the stack.\n\t     *\n\t     * Note: In IE and Safari, no stack trace is recorded on the Error object,\n\t     * so computeStackTrace instead walks its *own* chain of callers.\n\t     * This means that:\n\t     *  * in Safari, some methods may be missing from the stack trace;\n\t     *  * in IE, the topmost function in the stack trace will always be the\n\t     *    caller of computeStackTrace.\n\t     *\n\t     * This is okay for tracing (because you are likely to be calling\n\t     * computeStackTrace from the function you want to be the topmost element\n\t     * of the stack trace anyway), but not okay for logging unhandled\n\t     * exceptions (because your catch block will likely be far away from the\n\t     * inner function that actually caused the exception).\n\t     *\n\t     */\n\t    TraceKit.computeStackTrace = function computeStackTraceWrapper() {\n\t        var sourceCache = {};\n\t\n\t        /**\n\t         * Attempts to retrieve source code via XMLHttpRequest, which is used\n\t         * to look up anonymous function names.\n\t         * @param {string} url URL of source code.\n\t         * @return {string} Source contents.\n\t         */\n\t        function loadSource(url) {\n\t            if (!TraceKit.remoteFetching) {\n\t                //Only attempt request if remoteFetching is on.\n\t                return '';\n\t            }\n\t            try {\n\t                var getXHR = function getXHR() {\n\t                    try {\n\t                        return new window.XMLHttpRequest();\n\t                    } catch (e) {\n\t                        // explicitly bubble up the exception if not found\n\t                        return new window.ActiveXObject('Microsoft.XMLHTTP');\n\t                    }\n\t                };\n\t\n\t                var request = getXHR();\n\t                request.open('GET', url, false);\n\t                request.send('');\n\t                return request.responseText;\n\t            } catch (e) {\n\t                return '';\n\t            }\n\t        }\n\t\n\t        /**\n\t         * Retrieves source code from the source code cache.\n\t         * @param {string} url URL of source code.\n\t         * @return {Array.<string>} Source contents.\n\t         */\n\t        function getSource(url) {\n\t            if (!isString(url)) return [];\n\t            if (!hasKey(sourceCache, url)) {\n\t                // URL needs to be able to fetched within the acceptable domain.  Otherwise,\n\t                // cross-domain errors will be triggered.\n\t                var source = '';\n\t                var domain = '';\n\t                try {\n\t                    domain = document.domain;\n\t                } catch (e) {}\n\t                if (url.indexOf(domain) !== -1) {\n\t                    source = loadSource(url);\n\t                }\n\t                sourceCache[url] = source ? source.split('\\n') : [];\n\t            }\n\t\n\t            return sourceCache[url];\n\t        }\n\t\n\t        /**\n\t         * Tries to use an externally loaded copy of source code to determine\n\t         * the name of a function by looking at the name of the variable it was\n\t         * assigned to, if any.\n\t         * @param {string} url URL of source code.\n\t         * @param {(string|number)} lineNo Line number in source code.\n\t         * @return {string} The function name, if discoverable.\n\t         */\n\t        function guessFunctionName(url, lineNo) {\n\t            var reFunctionArgNames = /function ([^(]*)\\(([^)]*)\\)/,\n\t                reGuessFunction = /['\"]?([0-9A-Za-z$_]+)['\"]?\\s*[:=]\\s*(function|eval|new Function)/,\n\t                line = '',\n\t                maxLines = 10,\n\t                source = getSource(url),\n\t                m;\n\t\n\t            if (!source.length) {\n\t                return UNKNOWN_FUNCTION;\n\t            }\n\t\n\t            // Walk backwards from the first line in the function until we find the line which\n\t            // matches the pattern above, which is the function definition\n\t            for (var i = 0; i < maxLines; ++i) {\n\t                line = source[lineNo - i] + line;\n\t\n\t                if (!isUndefined(line)) {\n\t                    if (m = reGuessFunction.exec(line)) {\n\t                        return m[1];\n\t                    } else if (m = reFunctionArgNames.exec(line)) {\n\t                        return m[1];\n\t                    }\n\t                }\n\t            }\n\t\n\t            return UNKNOWN_FUNCTION;\n\t        }\n\t\n\t        /**\n\t         * Retrieves the surrounding lines from where an exception occurred.\n\t         * @param {string} url URL of source code.\n\t         * @param {(string|number)} line Line number in source code to centre\n\t         * around for context.\n\t         * @return {?Array.<string>} Lines of source code.\n\t         */\n\t        function gatherContext(url, line) {\n\t            var source = getSource(url);\n\t\n\t            if (!source.length) {\n\t                return null;\n\t            }\n\t\n\t            var context = [],\n\t\n\t            // linesBefore & linesAfter are inclusive with the offending line.\n\t            // if linesOfContext is even, there will be one extra line\n\t            //   *before* the offending line.\n\t            linesBefore = Math.floor(TraceKit.linesOfContext / 2),\n\t\n\t            // Add one extra line if linesOfContext is odd\n\t            linesAfter = linesBefore + TraceKit.linesOfContext % 2,\n\t                start = Math.max(0, line - linesBefore - 1),\n\t                end = Math.min(source.length, line + linesAfter - 1);\n\t\n\t            line -= 1; // convert to 0-based index\n\t\n\t            for (var i = start; i < end; ++i) {\n\t                if (!isUndefined(source[i])) {\n\t                    context.push(source[i]);\n\t                }\n\t            }\n\t\n\t            return context.length > 0 ? context : null;\n\t        }\n\t\n\t        /**\n\t         * Escapes special characters, except for whitespace, in a string to be\n\t         * used inside a regular expression as a string literal.\n\t         * @param {string} text The string.\n\t         * @return {string} The escaped string literal.\n\t         */\n\t        function escapeRegExp(text) {\n\t            return text.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#]/g, '\\\\$&');\n\t        }\n\t\n\t        /**\n\t         * Escapes special characters in a string to be used inside a regular\n\t         * expression as a string literal. Also ensures that HTML entities will\n\t         * be matched the same as their literal friends.\n\t         * @param {string} body The string.\n\t         * @return {string} The escaped string.\n\t         */\n\t        function escapeCodeAsRegExpForMatchingInsideHTML(body) {\n\t            return escapeRegExp(body).replace('<', '(?:<|&lt;)').replace('>', '(?:>|&gt;)').replace('&', '(?:&|&amp;)').replace('\"', '(?:\"|&quot;)').replace(/\\s+/g, '\\\\s+');\n\t        }\n\t\n\t        /**\n\t         * Determines where a code fragment occurs in the source code.\n\t         * @param {RegExp} re The function definition.\n\t         * @param {Array.<string>} urls A list of URLs to search.\n\t         * @return {?Object.<string, (string|number)>} An object containing\n\t         * the url, line, and column number of the defined function.\n\t         */\n\t        function findSourceInUrls(re, urls) {\n\t            var source, m;\n\t            for (var i = 0, j = urls.length; i < j; ++i) {\n\t                // console.log('searching', urls[i]);\n\t                if ((source = getSource(urls[i])).length) {\n\t                    source = source.join('\\n');\n\t                    if (m = re.exec(source)) {\n\t                        // console.log('Found function in ' + urls[i]);\n\t\n\t                        return {\n\t                            'url': urls[i],\n\t                            'line': source.substring(0, m.index).split('\\n').length,\n\t                            'column': m.index - source.lastIndexOf('\\n', m.index) - 1\n\t                        };\n\t                    }\n\t                }\n\t            }\n\t\n\t            // console.log('no match');\n\t\n\t            return null;\n\t        }\n\t\n\t        /**\n\t         * Determines at which column a code fragment occurs on a line of the\n\t         * source code.\n\t         * @param {string} fragment The code fragment.\n\t         * @param {string} url The URL to search.\n\t         * @param {(string|number)} line The line number to examine.\n\t         * @return {?number} The column number.\n\t         */\n\t        function findSourceInLine(fragment, url, line) {\n\t            var source = getSource(url),\n\t                re = new RegExp('\\\\b' + escapeRegExp(fragment) + '\\\\b'),\n\t                m;\n\t\n\t            line -= 1;\n\t\n\t            if (source && source.length > line && (m = re.exec(source[line]))) {\n\t                return m.index;\n\t            }\n\t\n\t            return null;\n\t        }\n\t\n\t        /**\n\t         * Determines where a function was defined within the source code.\n\t         * @param {(Function|string)} func A function reference or serialized\n\t         * function definition.\n\t         * @return {?Object.<string, (string|number)>} An object containing\n\t         * the url, line, and column number of the defined function.\n\t         */\n\t        function findSourceByFunctionBody(func) {\n\t            if (typeof document === 'undefined') return;\n\t\n\t            var urls = [window.location.href],\n\t                scripts = document.getElementsByTagName('script'),\n\t                body,\n\t                code = '' + func,\n\t                codeRE = /^function(?:\\s+([\\w$]+))?\\s*\\(([\\w\\s,]*)\\)\\s*\\{\\s*(\\S[\\s\\S]*\\S)\\s*\\}\\s*$/,\n\t                eventRE = /^function on([\\w$]+)\\s*\\(event\\)\\s*\\{\\s*(\\S[\\s\\S]*\\S)\\s*\\}\\s*$/,\n\t                re,\n\t                parts,\n\t                result;\n\t\n\t            for (var i = 0; i < scripts.length; ++i) {\n\t                var script = scripts[i];\n\t                if (script.src) {\n\t                    urls.push(script.src);\n\t                }\n\t            }\n\t\n\t            if (!(parts = codeRE.exec(code))) {\n\t                re = new RegExp(escapeRegExp(code).replace(/\\s+/g, '\\\\s+'));\n\t            }\n\t\n\t            // not sure if this is really necessary, but I don’t have a test\n\t            // corpus large enough to confirm that and it was in the original.\n\t            else {\n\t                    var name = parts[1] ? '\\\\s+' + parts[1] : '',\n\t                        args = parts[2].split(',').join('\\\\s*,\\\\s*');\n\t\n\t                    body = escapeRegExp(parts[3]).replace(/;$/, ';?'); // semicolon is inserted if the function ends with a comment.replace(/\\s+/g, '\\\\s+');\n\t                    re = new RegExp('function' + name + '\\\\s*\\\\(\\\\s*' + args + '\\\\s*\\\\)\\\\s*{\\\\s*' + body + '\\\\s*}');\n\t                }\n\t\n\t            // look for a normal function definition\n\t            if (result = findSourceInUrls(re, urls)) {\n\t                return result;\n\t            }\n\t\n\t            // look for an old-school event handler function\n\t            if (parts = eventRE.exec(code)) {\n\t                var event = parts[1];\n\t                body = escapeCodeAsRegExpForMatchingInsideHTML(parts[2]);\n\t\n\t                // look for a function defined in HTML as an onXXX handler\n\t                re = new RegExp('on' + event + '=[\\\\\\'\"]\\\\s*' + body + '\\\\s*[\\\\\\'\"]', 'i');\n\t\n\t                if (result = findSourceInUrls(re, urls[0])) {\n\t                    return result;\n\t                }\n\t\n\t                // look for ???\n\t                re = new RegExp(body);\n\t\n\t                if (result = findSourceInUrls(re, urls)) {\n\t                    return result;\n\t                }\n\t            }\n\t\n\t            return null;\n\t        }\n\t\n\t        // Contents of Exception in various browsers.\n\t        //\n\t        // SAFARI:\n\t        // ex.message = Can't find variable: qq\n\t        // ex.line = 59\n\t        // ex.sourceId = 580238192\n\t        // ex.sourceURL = http://...\n\t        // ex.expressionBeginOffset = 96\n\t        // ex.expressionCaretOffset = 98\n\t        // ex.expressionEndOffset = 98\n\t        // ex.name = ReferenceError\n\t        //\n\t        // FIREFOX:\n\t        // ex.message = qq is not defined\n\t        // ex.fileName = http://...\n\t        // ex.lineNumber = 59\n\t        // ex.columnNumber = 69\n\t        // ex.stack = ...stack trace... (see the example below)\n\t        // ex.name = ReferenceError\n\t        //\n\t        // CHROME:\n\t        // ex.message = qq is not defined\n\t        // ex.name = ReferenceError\n\t        // ex.type = not_defined\n\t        // ex.arguments = ['aa']\n\t        // ex.stack = ...stack trace...\n\t        //\n\t        // INTERNET EXPLORER:\n\t        // ex.message = ...\n\t        // ex.name = ReferenceError\n\t        //\n\t        // OPERA:\n\t        // ex.message = ...message... (see the example below)\n\t        // ex.name = ReferenceError\n\t        // ex.opera#sourceloc = 11  (pretty much useless, duplicates the info in ex.message)\n\t        // ex.stacktrace = n/a; see 'opera:config#UserPrefs|Exceptions Have Stacktrace'\n\t\n\t        /**\n\t         * Computes stack trace information from the stack property.\n\t         * Chrome and Gecko use this property.\n\t         * @param {Error} ex\n\t         * @return {?Object.<string, *>} Stack trace information.\n\t         */\n\t        function computeStackTraceFromStackProp(ex) {\n\t            if (isUndefined(ex.stack) || !ex.stack) return;\n\t\n\t            var chrome = /^\\s*at (.*?) ?\\(?((?:(?:file|https?|chrome-extension):.*?)|<anonymous>):(\\d+)(?::(\\d+))?\\)?\\s*$/i,\n\t                gecko = /^\\s*(.*?)(?:\\((.*?)\\))?@((?:file|https?|chrome).*?):(\\d+)(?::(\\d+))?\\s*$/i,\n\t                winjs = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:ms-appx|http|https):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i,\n\t                lines = ex.stack.split('\\n'),\n\t                stack = [],\n\t                parts,\n\t                element,\n\t                reference = /^(.*) is undefined$/.exec(ex.message);\n\t\n\t            for (var i = 0, j = lines.length; i < j; ++i) {\n\t                if (parts = gecko.exec(lines[i])) {\n\t                    element = {\n\t                        'url': parts[3],\n\t                        'func': parts[1] || UNKNOWN_FUNCTION,\n\t                        'args': parts[2] ? parts[2].split(',') : '',\n\t                        'line': +parts[4],\n\t                        'column': parts[5] ? +parts[5] : null\n\t                    };\n\t                } else if (parts = chrome.exec(lines[i])) {\n\t                    element = {\n\t                        'url': parts[2],\n\t                        'func': parts[1] || UNKNOWN_FUNCTION,\n\t                        'line': +parts[3],\n\t                        'column': parts[4] ? +parts[4] : null\n\t                    };\n\t                } else if (parts = winjs.exec(lines[i])) {\n\t                    element = {\n\t                        'url': parts[2],\n\t                        'func': parts[1] || UNKNOWN_FUNCTION,\n\t                        'line': +parts[3],\n\t                        'column': parts[4] ? +parts[4] : null\n\t                    };\n\t                } else {\n\t                    continue;\n\t                }\n\t\n\t                if (!element.func && element.line) {\n\t                    element.func = guessFunctionName(element.url, element.line);\n\t                }\n\t\n\t                if (element.line) {\n\t                    element.context = gatherContext(element.url, element.line);\n\t                }\n\t\n\t                stack.push(element);\n\t            }\n\t\n\t            if (!stack.length) {\n\t                return null;\n\t            }\n\t\n\t            if (stack[0].line && !stack[0].column && reference) {\n\t                stack[0].column = findSourceInLine(reference[1], stack[0].url, stack[0].line);\n\t            } else if (!stack[0].column && !isUndefined(ex.columnNumber)) {\n\t                // FireFox uses this awesome columnNumber property for its top frame\n\t                // Also note, Firefox's column number is 0-based and everything else expects 1-based,\n\t                // so adding 1\n\t                stack[0].column = ex.columnNumber + 1;\n\t            }\n\t\n\t            return {\n\t                'name': ex.name,\n\t                'message': ex.message,\n\t                'url': getLocationHref(),\n\t                'stack': stack\n\t            };\n\t        }\n\t\n\t        /**\n\t         * Computes stack trace information from the stacktrace property.\n\t         * Opera 10 uses this property.\n\t         * @param {Error} ex\n\t         * @return {?Object.<string, *>} Stack trace information.\n\t         */\n\t        function computeStackTraceFromStacktraceProp(ex) {\n\t            // Access and store the stacktrace property before doing ANYTHING\n\t            // else to it because Opera is not very good at providing it\n\t            // reliably in other circumstances.\n\t            var stacktrace = ex.stacktrace;\n\t            if (isUndefined(ex.stacktrace) || !ex.stacktrace) return;\n\t\n\t            var testRE = / line (\\d+), column (\\d+) in (?:<anonymous function: ([^>]+)>|([^\\)]+))\\((.*)\\) in (.*):\\s*$/i,\n\t                lines = stacktrace.split('\\n'),\n\t                stack = [],\n\t                parts;\n\t\n\t            for (var i = 0, j = lines.length; i < j; i += 2) {\n\t                if (parts = testRE.exec(lines[i])) {\n\t                    var element = {\n\t                        'line': +parts[1],\n\t                        'column': +parts[2],\n\t                        'func': parts[3] || parts[4],\n\t                        'args': parts[5] ? parts[5].split(',') : [],\n\t                        'url': parts[6]\n\t                    };\n\t\n\t                    if (!element.func && element.line) {\n\t                        element.func = guessFunctionName(element.url, element.line);\n\t                    }\n\t                    if (element.line) {\n\t                        try {\n\t                            element.context = gatherContext(element.url, element.line);\n\t                        } catch (exc) {}\n\t                    }\n\t\n\t                    if (!element.context) {\n\t                        element.context = [lines[i + 1]];\n\t                    }\n\t\n\t                    stack.push(element);\n\t                }\n\t            }\n\t\n\t            if (!stack.length) {\n\t                return null;\n\t            }\n\t\n\t            return {\n\t                'name': ex.name,\n\t                'message': ex.message,\n\t                'url': getLocationHref(),\n\t                'stack': stack\n\t            };\n\t        }\n\t\n\t        /**\n\t         * NOT TESTED.\n\t         * Computes stack trace information from an error message that includes\n\t         * the stack trace.\n\t         * Opera 9 and earlier use this method if the option to show stack\n\t         * traces is turned on in opera:config.\n\t         * @param {Error} ex\n\t         * @return {?Object.<string, *>} Stack information.\n\t         */\n\t        function computeStackTraceFromOperaMultiLineMessage(ex) {\n\t            // Opera includes a stack trace into the exception message. An example is:\n\t            //\n\t            // Statement on line 3: Undefined variable: undefinedFunc\n\t            // Backtrace:\n\t            //   Line 3 of linked script file://localhost/Users/andreyvit/Projects/TraceKit/javascript-client/sample.js: In function zzz\n\t            //         undefinedFunc(a);\n\t            //   Line 7 of inline#1 script in file://localhost/Users/andreyvit/Projects/TraceKit/javascript-client/sample.html: In function yyy\n\t            //           zzz(x, y, z);\n\t            //   Line 3 of inline#1 script in file://localhost/Users/andreyvit/Projects/TraceKit/javascript-client/sample.html: In function xxx\n\t            //           yyy(a, a, a);\n\t            //   Line 1 of function script\n\t            //     try { xxx('hi'); return false; } catch(ex) { TraceKit.report(ex); }\n\t            //   ...\n\t\n\t            var lines = ex.message.split('\\n');\n\t            if (lines.length < 4) {\n\t                return null;\n\t            }\n\t\n\t            var lineRE1 = /^\\s*Line (\\d+) of linked script ((?:file|https?)\\S+)(?:: in function (\\S+))?\\s*$/i,\n\t                lineRE2 = /^\\s*Line (\\d+) of inline#(\\d+) script in ((?:file|https?)\\S+)(?:: in function (\\S+))?\\s*$/i,\n\t                lineRE3 = /^\\s*Line (\\d+) of function script\\s*$/i,\n\t                stack = [],\n\t                scripts = document.getElementsByTagName('script'),\n\t                inlineScriptBlocks = [],\n\t                parts,\n\t                i,\n\t                len,\n\t                source;\n\t\n\t            for (i in scripts) {\n\t                if (hasKey(scripts, i) && !scripts[i].src) {\n\t                    inlineScriptBlocks.push(scripts[i]);\n\t                }\n\t            }\n\t\n\t            for (i = 2, len = lines.length; i < len; i += 2) {\n\t                var item = null;\n\t                if (parts = lineRE1.exec(lines[i])) {\n\t                    item = {\n\t                        'url': parts[2],\n\t                        'func': parts[3],\n\t                        'line': +parts[1]\n\t                    };\n\t                } else if (parts = lineRE2.exec(lines[i])) {\n\t                    item = {\n\t                        'url': parts[3],\n\t                        'func': parts[4]\n\t                    };\n\t                    var relativeLine = +parts[1]; // relative to the start of the <SCRIPT> block\n\t                    var script = inlineScriptBlocks[parts[2] - 1];\n\t                    if (script) {\n\t                        source = getSource(item.url);\n\t                        if (source) {\n\t                            source = source.join('\\n');\n\t                            var pos = source.indexOf(script.innerText);\n\t                            if (pos >= 0) {\n\t                                item.line = relativeLine + source.substring(0, pos).split('\\n').length;\n\t                            }\n\t                        }\n\t                    }\n\t                } else if (parts = lineRE3.exec(lines[i])) {\n\t                    var url = window.location.href.replace(/#.*$/, ''),\n\t                        line = parts[1];\n\t                    var re = new RegExp(escapeCodeAsRegExpForMatchingInsideHTML(lines[i + 1]));\n\t                    source = findSourceInUrls(re, [url]);\n\t                    item = {\n\t                        'url': url,\n\t                        'line': source ? source.line : line,\n\t                        'func': ''\n\t                    };\n\t                }\n\t\n\t                if (item) {\n\t                    if (!item.func) {\n\t                        item.func = guessFunctionName(item.url, item.line);\n\t                    }\n\t                    var context = gatherContext(item.url, item.line);\n\t                    var midline = context ? context[Math.floor(context.length / 2)] : null;\n\t                    if (context && midline.replace(/^\\s*/, '') === lines[i + 1].replace(/^\\s*/, '')) {\n\t                        item.context = context;\n\t                    } else {\n\t                        // if (context) alert(\"Context mismatch. Correct midline:\\n\" + lines[i+1] + \"\\n\\nMidline:\\n\" + midline + \"\\n\\nContext:\\n\" + context.join(\"\\n\") + \"\\n\\nURL:\\n\" + item.url);\n\t                        item.context = [lines[i + 1]];\n\t                    }\n\t                    stack.push(item);\n\t                }\n\t            }\n\t            if (!stack.length) {\n\t                return null; // could not parse multiline exception message as Opera stack trace\n\t            }\n\t\n\t            return {\n\t                'name': ex.name,\n\t                'message': lines[0],\n\t                'url': getLocationHref(),\n\t                'stack': stack\n\t            };\n\t        }\n\t\n\t        /**\n\t         * Adds information about the first frame to incomplete stack traces.\n\t         * Safari and IE require this to get complete data on the first frame.\n\t         * @param {Object.<string, *>} stackInfo Stack trace information from\n\t         * one of the compute* methods.\n\t         * @param {string} url The URL of the script that caused an error.\n\t         * @param {(number|string)} lineNo The line number of the script that\n\t         * caused an error.\n\t         * @param {string=} message The error generated by the browser, which\n\t         * hopefully contains the name of the object that caused the error.\n\t         * @return {boolean} Whether or not the stack information was\n\t         * augmented.\n\t         */\n\t        function augmentStackTraceWithInitialElement(stackInfo, url, lineNo, message) {\n\t            var initial = {\n\t                'url': url,\n\t                'line': lineNo\n\t            };\n\t\n\t            if (initial.url && initial.line) {\n\t                stackInfo.incomplete = false;\n\t\n\t                if (!initial.func) {\n\t                    initial.func = guessFunctionName(initial.url, initial.line);\n\t                }\n\t\n\t                if (!initial.context) {\n\t                    initial.context = gatherContext(initial.url, initial.line);\n\t                }\n\t\n\t                var reference = / '([^']+)' /.exec(message);\n\t                if (reference) {\n\t                    initial.column = findSourceInLine(reference[1], initial.url, initial.line);\n\t                }\n\t\n\t                if (stackInfo.stack.length > 0) {\n\t                    if (stackInfo.stack[0].url === initial.url) {\n\t                        if (stackInfo.stack[0].line === initial.line) {\n\t                            return false; // already in stack trace\n\t                        } else if (!stackInfo.stack[0].line && stackInfo.stack[0].func === initial.func) {\n\t                            stackInfo.stack[0].line = initial.line;\n\t                            stackInfo.stack[0].context = initial.context;\n\t                            return false;\n\t                        }\n\t                    }\n\t                }\n\t\n\t                stackInfo.stack.unshift(initial);\n\t                stackInfo.partial = true;\n\t                return true;\n\t            } else {\n\t                stackInfo.incomplete = true;\n\t            }\n\t\n\t            return false;\n\t        }\n\t\n\t        /**\n\t         * Computes stack trace information by walking the arguments.caller\n\t         * chain at the time the exception occurred. This will cause earlier\n\t         * frames to be missed but is the only way to get any stack trace in\n\t         * Safari and IE. The top frame is restored by\n\t         * {@link augmentStackTraceWithInitialElement}.\n\t         * @param {Error} ex\n\t         * @return {?Object.<string, *>} Stack trace information.\n\t         */\n\t        function computeStackTraceByWalkingCallerChain(ex, depth) {\n\t            var functionName = /function\\s+([_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*)?\\s*\\(/i,\n\t                stack = [],\n\t                funcs = {},\n\t                recursion = false,\n\t                parts,\n\t                item,\n\t                source;\n\t\n\t            for (var curr = computeStackTraceByWalkingCallerChain.caller; curr && !recursion; curr = curr.caller) {\n\t                if (curr === computeStackTrace || curr === TraceKit.report) {\n\t                    // console.log('skipping internal function');\n\t                    continue;\n\t                }\n\t\n\t                item = {\n\t                    'url': null,\n\t                    'func': UNKNOWN_FUNCTION,\n\t                    'line': null,\n\t                    'column': null\n\t                };\n\t\n\t                if (curr.name) {\n\t                    item.func = curr.name;\n\t                } else if (parts = functionName.exec(curr.toString())) {\n\t                    item.func = parts[1];\n\t                }\n\t\n\t                if (typeof item.func === 'undefined') {\n\t                    try {\n\t                        item.func = parts.input.substring(0, parts.input.indexOf('{'));\n\t                    } catch (e) {}\n\t                }\n\t\n\t                if (source = findSourceByFunctionBody(curr)) {\n\t                    item.url = source.url;\n\t                    item.line = source.line;\n\t\n\t                    if (item.func === UNKNOWN_FUNCTION) {\n\t                        item.func = guessFunctionName(item.url, item.line);\n\t                    }\n\t\n\t                    var reference = / '([^']+)' /.exec(ex.message || ex.description);\n\t                    if (reference) {\n\t                        item.column = findSourceInLine(reference[1], source.url, source.line);\n\t                    }\n\t                }\n\t\n\t                if (funcs['' + curr]) {\n\t                    recursion = true;\n\t                } else {\n\t                    funcs['' + curr] = true;\n\t                }\n\t\n\t                stack.push(item);\n\t            }\n\t\n\t            if (depth) {\n\t                // console.log('depth is ' + depth);\n\t                // console.log('stack is ' + stack.length);\n\t                stack.splice(0, depth);\n\t            }\n\t\n\t            var result = {\n\t                'name': ex.name,\n\t                'message': ex.message,\n\t                'url': getLocationHref(),\n\t                'stack': stack\n\t            };\n\t            augmentStackTraceWithInitialElement(result, ex.sourceURL || ex.fileName, ex.line || ex.lineNumber, ex.message || ex.description);\n\t            return result;\n\t        }\n\t\n\t        /**\n\t         * Computes a stack trace for an exception.\n\t         * @param {Error} ex\n\t         * @param {(string|number)=} depth\n\t         */\n\t        function computeStackTrace(ex, depth) {\n\t            var stack = null;\n\t            depth = depth == null ? 0 : +depth;\n\t\n\t            try {\n\t                // This must be tried first because Opera 10 *destroys*\n\t                // its stacktrace property if you try to access the stack\n\t                // property first!!\n\t                stack = computeStackTraceFromStacktraceProp(ex);\n\t                if (stack) {\n\t                    return stack;\n\t                }\n\t            } catch (e) {\n\t                if (TraceKit.debug) {\n\t                    throw e;\n\t                }\n\t            }\n\t\n\t            try {\n\t                stack = computeStackTraceFromStackProp(ex);\n\t                if (stack) {\n\t                    return stack;\n\t                }\n\t            } catch (e) {\n\t                if (TraceKit.debug) {\n\t                    throw e;\n\t                }\n\t            }\n\t\n\t            try {\n\t                stack = computeStackTraceFromOperaMultiLineMessage(ex);\n\t                if (stack) {\n\t                    return stack;\n\t                }\n\t            } catch (e) {\n\t                if (TraceKit.debug) {\n\t                    throw e;\n\t                }\n\t            }\n\t\n\t            try {\n\t                stack = computeStackTraceByWalkingCallerChain(ex, depth + 1);\n\t                if (stack) {\n\t                    return stack;\n\t                }\n\t            } catch (e) {\n\t                if (TraceKit.debug) {\n\t                    throw e;\n\t                }\n\t            }\n\t\n\t            return {\n\t                'name': ex.name,\n\t                'message': ex.message,\n\t                'url': getLocationHref()\n\t            };\n\t        }\n\t\n\t        computeStackTrace.augmentStackTraceWithInitialElement = augmentStackTraceWithInitialElement;\n\t        computeStackTrace.computeStackTraceFromStackProp = computeStackTraceFromStackProp;\n\t        computeStackTrace.guessFunctionName = guessFunctionName;\n\t        computeStackTrace.gatherContext = gatherContext;\n\t\n\t        return computeStackTrace;\n\t    }();\n\t\n\t    'use strict';\n\t\n\t    // First, check for JSON support\n\t    // If there is no JSON, we no-op the core features of Raven\n\t    // since JSON is required to encode the payload\n\t    var _Raven = window.Raven,\n\t        hasJSON = !!((typeof JSON === 'undefined' ? 'undefined' : (0, _typeof3.default)(JSON)) === 'object' && JSON.stringify),\n\t\n\t    // Raven can run in contexts where there's no document (react-native)\n\t    hasDocument = typeof document !== 'undefined',\n\t        lastCapturedException,\n\t        _lastEventId,\n\t        globalServer,\n\t        globalKey,\n\t        globalProject,\n\t        globalContext = {},\n\t        globalOptions = {\n\t        logger: 'javascript',\n\t        ignoreErrors: [],\n\t        ignoreUrls: [],\n\t        whitelistUrls: [],\n\t        includePaths: [],\n\t        crossOrigin: 'anonymous',\n\t        collectWindowErrors: true,\n\t        maxMessageLength: 100\n\t    },\n\t        isRavenInstalled = false,\n\t        objectPrototype = Object.prototype,\n\t\n\t    // capture references to window.console *and* all its methods first\n\t    // before the console plugin has a chance to monkey patch\n\t    originalConsole = window.console || {},\n\t        originalConsoleMethods = {},\n\t        plugins = [],\n\t        startTime = now();\n\t\n\t    for (var method in originalConsole) {\n\t        originalConsoleMethods[method] = originalConsole[method];\n\t    }\n\t    /*\n\t     * The core Raven singleton\n\t     *\n\t     * @this {Raven}\n\t     */\n\t    var Raven = {\n\t        VERSION: '1.3.0',\n\t\n\t        debug: false,\n\t\n\t        /*\n\t         * Allow multiple versions of Raven to be installed.\n\t         * Strip Raven from the global context and returns the instance.\n\t         *\n\t         * @return {Raven}\n\t         */\n\t        noConflict: function noConflict() {\n\t            window.Raven = _Raven;\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Configure Raven with a DSN and extra options\n\t         *\n\t         * @param {string} dsn The public Sentry DSN\n\t         * @param {object} options Optional set of of global options [optional]\n\t         * @return {Raven}\n\t         */\n\t        config: function config(dsn, options) {\n\t            if (globalServer) {\n\t                logDebug('error', 'Error: Raven has already been configured');\n\t                return Raven;\n\t            }\n\t            if (!dsn) return Raven;\n\t\n\t            var uri = parseDSN(dsn),\n\t                lastSlash = uri.path.lastIndexOf('/'),\n\t                path = uri.path.substr(1, lastSlash);\n\t\n\t            // merge in options\n\t            if (options) {\n\t                each(options, function (key, value) {\n\t                    // tags and extra are special and need to be put into context\n\t                    if (key == 'tags' || key == 'extra') {\n\t                        globalContext[key] = value;\n\t                    } else {\n\t                        globalOptions[key] = value;\n\t                    }\n\t                });\n\t            }\n\t\n\t            // \"Script error.\" is hard coded into browsers for errors that it can't read.\n\t            // this is the result of a script being pulled in from an external domain and CORS.\n\t            globalOptions.ignoreErrors.push(/^Script error\\.?$/);\n\t            globalOptions.ignoreErrors.push(/^Javascript error: Script error\\.? on line 0$/);\n\t\n\t            // join regexp rules into one big rule\n\t            globalOptions.ignoreErrors = joinRegExp(globalOptions.ignoreErrors);\n\t            globalOptions.ignoreUrls = globalOptions.ignoreUrls.length ? joinRegExp(globalOptions.ignoreUrls) : false;\n\t            globalOptions.whitelistUrls = globalOptions.whitelistUrls.length ? joinRegExp(globalOptions.whitelistUrls) : false;\n\t            globalOptions.includePaths = joinRegExp(globalOptions.includePaths);\n\t\n\t            globalKey = uri.user;\n\t            globalProject = uri.path.substr(lastSlash + 1);\n\t\n\t            // assemble the endpoint from the uri pieces\n\t            globalServer = '//' + uri.host + (uri.port ? ':' + uri.port : '') + '/' + path + 'api/' + globalProject + '/store/';\n\t\n\t            if (uri.protocol) {\n\t                globalServer = uri.protocol + ':' + globalServer;\n\t            }\n\t\n\t            if (globalOptions.fetchContext) {\n\t                TraceKit.remoteFetching = true;\n\t            }\n\t\n\t            if (globalOptions.linesOfContext) {\n\t                TraceKit.linesOfContext = globalOptions.linesOfContext;\n\t            }\n\t\n\t            TraceKit.collectWindowErrors = !!globalOptions.collectWindowErrors;\n\t\n\t            // return for chaining\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Installs a global window.onerror error handler\n\t         * to capture and report uncaught exceptions.\n\t         * At this point, install() is required to be called due\n\t         * to the way TraceKit is set up.\n\t         *\n\t         * @return {Raven}\n\t         */\n\t        install: function install() {\n\t            if (_isSetup() && !isRavenInstalled) {\n\t                TraceKit.report.subscribe(handleStackInfo);\n\t\n\t                // Install all of the plugins\n\t                each(plugins, function (_, plugin) {\n\t                    plugin();\n\t                });\n\t\n\t                isRavenInstalled = true;\n\t            }\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Wrap code within a context so Raven can capture errors\n\t         * reliably across domains that is executed immediately.\n\t         *\n\t         * @param {object} options A specific set of options for this context [optional]\n\t         * @param {function} func The callback to be immediately executed within the context\n\t         * @param {array} args An array of arguments to be called with the callback [optional]\n\t         */\n\t        context: function context(options, func, args) {\n\t            if (isFunction(options)) {\n\t                args = func || [];\n\t                func = options;\n\t                options = undefined;\n\t            }\n\t\n\t            return Raven.wrap(options, func).apply(this, args);\n\t        },\n\t\n\t        /*\n\t         * Wrap code within a context and returns back a new function to be executed\n\t         *\n\t         * @param {object} options A specific set of options for this context [optional]\n\t         * @param {function} func The function to be wrapped in a new context\n\t         * @return {function} The newly wrapped functions with a context\n\t         */\n\t        wrap: function wrap(options, func) {\n\t            // 1 argument has been passed, and it's not a function\n\t            // so just return it\n\t            if (isUndefined(func) && !isFunction(options)) {\n\t                return options;\n\t            }\n\t\n\t            // options is optional\n\t            if (isFunction(options)) {\n\t                func = options;\n\t                options = undefined;\n\t            }\n\t\n\t            // At this point, we've passed along 2 arguments, and the second one\n\t            // is not a function either, so we'll just return the second argument.\n\t            if (!isFunction(func)) {\n\t                return func;\n\t            }\n\t\n\t            // We don't wanna wrap it twice!\n\t            if (func.__raven__) {\n\t                return func;\n\t            }\n\t\n\t            function wrapped() {\n\t                var args = [],\n\t                    i = arguments.length,\n\t                    deep = !options || options && options.deep !== false;\n\t                // Recursively wrap all of a function's arguments that are\n\t                // functions themselves.\n\t\n\t                while (i--) {\n\t                    args[i] = deep ? Raven.wrap(options, arguments[i]) : arguments[i];\n\t                }try {\n\t                    /*jshint -W040*/\n\t                    return func.apply(this, args);\n\t                } catch (e) {\n\t                    Raven.captureException(e, options);\n\t                    throw e;\n\t                }\n\t            }\n\t\n\t            // copy over properties of the old function\n\t            for (var property in func) {\n\t                if (hasKey(func, property)) {\n\t                    wrapped[property] = func[property];\n\t                }\n\t            }\n\t            wrapped.prototype = func.prototype;\n\t\n\t            // Signal that this function has been wrapped already\n\t            // for both debugging and to prevent it to being wrapped twice\n\t            wrapped.__raven__ = true;\n\t            wrapped.__inner__ = func;\n\t\n\t            return wrapped;\n\t        },\n\t\n\t        /*\n\t         * Uninstalls the global error handler.\n\t         *\n\t         * @return {Raven}\n\t         */\n\t        uninstall: function uninstall() {\n\t            TraceKit.report.uninstall();\n\t            isRavenInstalled = false;\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Manually capture an exception and send it over to Sentry\n\t         *\n\t         * @param {error} ex An exception to be logged\n\t         * @param {object} options A specific set of options for this error [optional]\n\t         * @return {Raven}\n\t         */\n\t        captureException: function captureException(ex, options) {\n\t            // If not an Error is passed through, recall as a message instead\n\t            if (!isError(ex)) return Raven.captureMessage(ex, options);\n\t\n\t            // Store the raw exception object for potential debugging and introspection\n\t            lastCapturedException = ex;\n\t\n\t            // TraceKit.report will re-raise any exception passed to it,\n\t            // which means you have to wrap it in try/catch. Instead, we\n\t            // can wrap it here and only re-raise if TraceKit.report\n\t            // raises an exception different from the one we asked to\n\t            // report on.\n\t            try {\n\t                var stack = TraceKit.computeStackTrace(ex);\n\t                handleStackInfo(stack, options);\n\t            } catch (ex1) {\n\t                if (ex !== ex1) {\n\t                    throw ex1;\n\t                }\n\t            }\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Manually send a message to Sentry\n\t         *\n\t         * @param {string} msg A plain message to be captured in Sentry\n\t         * @param {object} options A specific set of options for this message [optional]\n\t         * @return {Raven}\n\t         */\n\t        captureMessage: function captureMessage(msg, options) {\n\t            // config() automagically converts ignoreErrors from a list to a RegExp so we need to test for an\n\t            // early call; we'll error on the side of logging anything called before configuration since it's\n\t            // probably something you should see:\n\t            if (!!globalOptions.ignoreErrors.test && globalOptions.ignoreErrors.test(msg)) {\n\t                return;\n\t            }\n\t\n\t            // Fire away!\n\t            send(objectMerge({\n\t                message: msg + '' // Make sure it's actually a string\n\t            }, options));\n\t\n\t            return Raven;\n\t        },\n\t\n\t        addPlugin: function addPlugin(plugin) {\n\t            plugins.push(plugin);\n\t            if (isRavenInstalled) plugin();\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Set/clear a user to be sent along with the payload.\n\t         *\n\t         * @param {object} user An object representing user data [optional]\n\t         * @return {Raven}\n\t         */\n\t        setUserContext: function setUserContext(user) {\n\t            // Intentionally do not merge here since that's an unexpected behavior.\n\t            globalContext.user = user;\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Merge extra attributes to be sent along with the payload.\n\t         *\n\t         * @param {object} extra An object representing extra data [optional]\n\t         * @return {Raven}\n\t         */\n\t        setExtraContext: function setExtraContext(extra) {\n\t            mergeContext('extra', extra);\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Merge tags to be sent along with the payload.\n\t         *\n\t         * @param {object} tags An object representing tags [optional]\n\t         * @return {Raven}\n\t         */\n\t        setTagsContext: function setTagsContext(tags) {\n\t            mergeContext('tags', tags);\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Clear all of the context.\n\t         *\n\t         * @return {Raven}\n\t         */\n\t        clearContext: function clearContext() {\n\t            globalContext = {};\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Get a copy of the current context. This cannot be mutated.\n\t         *\n\t         * @return {object} copy of context\n\t         */\n\t        getContext: function getContext() {\n\t            // lol javascript\n\t            return JSON.parse(JSON.stringify(globalContext));\n\t        },\n\t\n\t        /*\n\t         * Set release version of application\n\t         *\n\t         * @param {string} release Typically something like a git SHA to identify version\n\t         * @return {Raven}\n\t         */\n\t        setRelease: function setRelease(release) {\n\t            globalOptions.release = release;\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Set the dataCallback option\n\t         *\n\t         * @param {function} callback The callback to run which allows the\n\t         *                            data blob to be mutated before sending\n\t         * @return {Raven}\n\t         */\n\t        setDataCallback: function setDataCallback(callback) {\n\t            globalOptions.dataCallback = callback;\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Set the shouldSendCallback option\n\t         *\n\t         * @param {function} callback The callback to run which allows\n\t         *                            introspecting the blob before sending\n\t         * @return {Raven}\n\t         */\n\t        setShouldSendCallback: function setShouldSendCallback(callback) {\n\t            globalOptions.shouldSendCallback = callback;\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /**\n\t         * Override the default HTTP transport mechanism that transmits data\n\t         * to the Sentry server.\n\t         *\n\t         * @param {function} transport Function invoked instead of the default\n\t         *                             `makeRequest` handler.\n\t         *\n\t         * @return {Raven}\n\t         */\n\t        setTransport: function setTransport(transport) {\n\t            globalOptions.transport = transport;\n\t\n\t            return Raven;\n\t        },\n\t\n\t        /*\n\t         * Get the latest raw exception that was captured by Raven.\n\t         *\n\t         * @return {error}\n\t         */\n\t        lastException: function lastException() {\n\t            return lastCapturedException;\n\t        },\n\t\n\t        /*\n\t         * Get the last event id\n\t         *\n\t         * @return {string}\n\t         */\n\t        lastEventId: function lastEventId() {\n\t            return _lastEventId;\n\t        },\n\t\n\t        /*\n\t         * Determine if Raven is setup and ready to go.\n\t         *\n\t         * @return {boolean}\n\t         */\n\t        isSetup: function isSetup() {\n\t            return _isSetup();\n\t        }\n\t    };\n\t\n\t    // Deprecations\n\t    Raven.setUser = Raven.setUserContext;\n\t    Raven.setReleaseContext = Raven.setRelease;\n\t\n\t    function triggerEvent(eventType, options) {\n\t        // NOTE: `event` is a native browser thing, so let's avoid conflicting wiht it\n\t        var evt, key;\n\t\n\t        if (!hasDocument) return;\n\t\n\t        options = options || {};\n\t\n\t        eventType = 'raven' + eventType.substr(0, 1).toUpperCase() + eventType.substr(1);\n\t\n\t        if (document.createEvent) {\n\t            evt = document.createEvent('HTMLEvents');\n\t            evt.initEvent(eventType, true, true);\n\t        } else {\n\t            evt = document.createEventObject();\n\t            evt.eventType = eventType;\n\t        }\n\t\n\t        for (key in options) {\n\t            if (hasKey(options, key)) {\n\t                evt[key] = options[key];\n\t            }\n\t        }if (document.createEvent) {\n\t            // IE9 if standards\n\t            document.dispatchEvent(evt);\n\t        } else {\n\t            // IE8 regardless of Quirks or Standards\n\t            // IE9 if quirks\n\t            try {\n\t                document.fireEvent('on' + evt.eventType.toLowerCase(), evt);\n\t            } catch (e) {}\n\t        }\n\t    }\n\t\n\t    var dsnKeys = 'source protocol user pass host port path'.split(' '),\n\t        dsnPattern = /^(?:(\\w+):)?\\/\\/(?:(\\w+)(:\\w+)?@)?([\\w\\.-]+)(?::(\\d+))?(\\/.*)/;\n\t\n\t    function RavenConfigError(message) {\n\t        this.name = 'RavenConfigError';\n\t        this.message = message;\n\t    }\n\t    RavenConfigError.prototype = new Error();\n\t    RavenConfigError.prototype.constructor = RavenConfigError;\n\t\n\t    /**** Private functions ****/\n\t    function parseDSN(str) {\n\t        var m = dsnPattern.exec(str),\n\t            dsn = {},\n\t            i = 7;\n\t\n\t        try {\n\t            while (i--) {\n\t                dsn[dsnKeys[i]] = m[i] || '';\n\t            }\n\t        } catch (e) {\n\t            throw new RavenConfigError('Invalid DSN: ' + str);\n\t        }\n\t\n\t        if (dsn.pass) throw new RavenConfigError('Do not specify your private key in the DSN!');\n\t\n\t        return dsn;\n\t    }\n\t\n\t    function isUndefined(what) {\n\t        return what === void 0;\n\t    }\n\t\n\t    function isFunction(what) {\n\t        return typeof what === 'function';\n\t    }\n\t\n\t    function isString(what) {\n\t        return objectPrototype.toString.call(what) === '[object String]';\n\t    }\n\t\n\t    function isObject(what) {\n\t        return (typeof what === 'undefined' ? 'undefined' : (0, _typeof3.default)(what)) === 'object' && what !== null;\n\t    }\n\t\n\t    function isEmptyObject(what) {\n\t        for (var k in what) {\n\t            return false;\n\t        }return true;\n\t    }\n\t\n\t    // Sorta yanked from https://github.com/joyent/node/blob/aa3b4b4/lib/util.js#L560\n\t    // with some tiny modifications\n\t    function isError(what) {\n\t        return isObject(what) && objectPrototype.toString.call(what) === '[object Error]' || what instanceof Error;\n\t    }\n\t\n\t    /**\n\t     * hasKey, a better form of hasOwnProperty\n\t     * Example: hasKey(MainHostObject, property) === true/false\n\t     *\n\t     * @param {Object} host object to check property\n\t     * @param {string} key to check\n\t     */\n\t    function hasKey(object, key) {\n\t        return objectPrototype.hasOwnProperty.call(object, key);\n\t    }\n\t\n\t    function each(obj, callback) {\n\t        var i, j;\n\t\n\t        if (isUndefined(obj.length)) {\n\t            for (i in obj) {\n\t                if (hasKey(obj, i)) {\n\t                    callback.call(null, i, obj[i]);\n\t                }\n\t            }\n\t        } else {\n\t            j = obj.length;\n\t            if (j) {\n\t                for (i = 0; i < j; i++) {\n\t                    callback.call(null, i, obj[i]);\n\t                }\n\t            }\n\t        }\n\t    }\n\t\n\t    function handleStackInfo(stackInfo, options) {\n\t        var frames = [];\n\t\n\t        if (stackInfo.stack && stackInfo.stack.length) {\n\t            each(stackInfo.stack, function (i, stack) {\n\t                var frame = normalizeFrame(stack);\n\t                if (frame) {\n\t                    frames.push(frame);\n\t                }\n\t            });\n\t        }\n\t\n\t        triggerEvent('handle', {\n\t            stackInfo: stackInfo,\n\t            options: options\n\t        });\n\t\n\t        processException(stackInfo.name, stackInfo.message, stackInfo.url, stackInfo.lineno, frames, options);\n\t    }\n\t\n\t    function normalizeFrame(frame) {\n\t        if (!frame.url) return;\n\t\n\t        // normalize the frames data\n\t        var normalized = {\n\t            filename: frame.url,\n\t            lineno: frame.line,\n\t            colno: frame.column,\n\t            'function': frame.func || '?'\n\t        },\n\t            context = extractContextFromFrame(frame),\n\t            i;\n\t\n\t        if (context) {\n\t            var keys = ['pre_context', 'context_line', 'post_context'];\n\t            i = 3;\n\t            while (i--) {\n\t                normalized[keys[i]] = context[i];\n\t            }\n\t        }\n\t\n\t        normalized.in_app = !( // determine if an exception came from outside of our app\n\t        // first we check the global includePaths list.\n\t        !!globalOptions.includePaths.test && !globalOptions.includePaths.test(normalized.filename) ||\n\t        // Now we check for fun, if the function name is Raven or TraceKit\n\t        /(Raven|TraceKit)\\./.test(normalized['function']) ||\n\t        // finally, we do a last ditch effort and check for raven.min.js\n\t        /raven\\.(min\\.)?js$/.test(normalized.filename));\n\t\n\t        return normalized;\n\t    }\n\t\n\t    function extractContextFromFrame(frame) {\n\t        // immediately check if we should even attempt to parse a context\n\t        if (!frame.context || !globalOptions.fetchContext) return;\n\t\n\t        var context = frame.context,\n\t            pivot = ~~(context.length / 2),\n\t            i = context.length,\n\t            isMinified = false;\n\t\n\t        while (i--) {\n\t            // We're making a guess to see if the source is minified or not.\n\t            // To do that, we make the assumption if *any* of the lines passed\n\t            // in are greater than 300 characters long, we bail.\n\t            // Sentry will see that there isn't a context\n\t            if (context[i].length > 300) {\n\t                isMinified = true;\n\t                break;\n\t            }\n\t        }\n\t\n\t        if (isMinified) {\n\t            // The source is minified and we don't know which column. Fuck it.\n\t            if (isUndefined(frame.column)) return;\n\t\n\t            // If the source is minified and has a frame column\n\t            // we take a chunk of the offending line to hopefully shed some light\n\t            return [[], // no pre_context\n\t            context[pivot].substr(frame.column, 50), // grab 50 characters, starting at the offending column\n\t            [] // no post_context\n\t            ];\n\t        }\n\t\n\t        return [context.slice(0, pivot), // pre_context\n\t        context[pivot], // context_line\n\t        context.slice(pivot + 1) // post_context\n\t        ];\n\t    }\n\t\n\t    function processException(type, message, fileurl, lineno, frames, options) {\n\t        var stacktrace, i, fullMessage;\n\t\n\t        if (!!globalOptions.ignoreErrors.test && globalOptions.ignoreErrors.test(message)) return;\n\t\n\t        message += '';\n\t        fullMessage = type + ': ' + message;\n\t\n\t        if (frames && frames.length) {\n\t            fileurl = frames[0].filename || fileurl;\n\t            // Sentry expects frames oldest to newest\n\t            // and JS sends them as newest to oldest\n\t            frames.reverse();\n\t            stacktrace = { frames: frames };\n\t        } else if (fileurl) {\n\t            stacktrace = {\n\t                frames: [{\n\t                    filename: fileurl,\n\t                    lineno: lineno,\n\t                    in_app: true\n\t                }]\n\t            };\n\t        }\n\t\n\t        if (!!globalOptions.ignoreUrls.test && globalOptions.ignoreUrls.test(fileurl)) return;\n\t        if (!!globalOptions.whitelistUrls.test && !globalOptions.whitelistUrls.test(fileurl)) return;\n\t\n\t        // Fire away!\n\t        send(objectMerge({\n\t            // sentry.interfaces.Exception\n\t            exception: {\n\t                values: [{\n\t                    type: type,\n\t                    value: message,\n\t                    stacktrace: stacktrace\n\t                }]\n\t            },\n\t            culprit: fileurl,\n\t            message: fullMessage\n\t        }, options));\n\t    }\n\t\n\t    function objectMerge(obj1, obj2) {\n\t        if (!obj2) {\n\t            return obj1;\n\t        }\n\t        each(obj2, function (key, value) {\n\t            obj1[key] = value;\n\t        });\n\t        return obj1;\n\t    }\n\t\n\t    function truncate(str, max) {\n\t        return str.length <= max ? str : str.substr(0, max) + '…';\n\t    }\n\t\n\t    function trimPacket(data) {\n\t        // For now, we only want to truncate the two different messages\n\t        // but this could/should be expanded to just trim everything\n\t        var max = globalOptions.maxMessageLength;\n\t        data.message = truncate(data.message, max);\n\t        if (data.exception) {\n\t            var exception = data.exception.values[0];\n\t            exception.value = truncate(exception.value, max);\n\t        }\n\t\n\t        return data;\n\t    }\n\t\n\t    function now() {\n\t        return +new Date();\n\t    }\n\t\n\t    function getHttpData() {\n\t        if (!hasDocument || !document.location || !document.location.href) {\n\t            return;\n\t        }\n\t\n\t        var httpData = {\n\t            headers: {\n\t                'User-Agent': navigator.userAgent\n\t            }\n\t        };\n\t\n\t        httpData.url = document.location.href;\n\t\n\t        if (document.referrer) {\n\t            httpData.headers.Referer = document.referrer;\n\t        }\n\t\n\t        return httpData;\n\t    }\n\t\n\t    function send(data) {\n\t        var baseData = {\n\t            project: globalProject,\n\t            logger: globalOptions.logger,\n\t            platform: 'javascript'\n\t        },\n\t            httpData = getHttpData();\n\t\n\t        if (httpData) {\n\t            baseData.request = httpData;\n\t        }\n\t\n\t        data = objectMerge(baseData, data);\n\t\n\t        // Merge in the tags and extra separately since objectMerge doesn't handle a deep merge\n\t        data.tags = objectMerge(objectMerge({}, globalContext.tags), data.tags);\n\t        data.extra = objectMerge(objectMerge({}, globalContext.extra), data.extra);\n\t\n\t        // Send along our own collected metadata with extra\n\t        data.extra['session:duration'] = now() - startTime;\n\t\n\t        // If there are no tags/extra, strip the key from the payload alltogther.\n\t        if (isEmptyObject(data.tags)) delete data.tags;\n\t\n\t        if (globalContext.user) {\n\t            // sentry.interfaces.User\n\t            data.user = globalContext.user;\n\t        }\n\t\n\t        // Include the release if it's defined in globalOptions\n\t        if (globalOptions.release) data.release = globalOptions.release;\n\t        // Include server_name if it's defined in globalOptions\n\t        if (globalOptions.serverName) data.server_name = globalOptions.serverName;\n\t\n\t        if (isFunction(globalOptions.dataCallback)) {\n\t            data = globalOptions.dataCallback(data) || data;\n\t        }\n\t\n\t        // Why??????????\n\t        if (!data || isEmptyObject(data)) {\n\t            return;\n\t        }\n\t\n\t        // Check if the request should be filtered or not\n\t        if (isFunction(globalOptions.shouldSendCallback) && !globalOptions.shouldSendCallback(data)) {\n\t            return;\n\t        }\n\t\n\t        // Send along an event_id if not explicitly passed.\n\t        // This event_id can be used to reference the error within Sentry itself.\n\t        // Set lastEventId after we know the error should actually be sent\n\t        _lastEventId = data.event_id || (data.event_id = uuid4());\n\t\n\t        // Try and clean up the packet before sending by truncating long values\n\t        data = trimPacket(data);\n\t\n\t        logDebug('debug', 'Raven about to send:', data);\n\t\n\t        if (!_isSetup()) return;\n\t\n\t        (globalOptions.transport || makeRequest)({\n\t            url: globalServer,\n\t            auth: {\n\t                sentry_version: '7',\n\t                sentry_client: 'raven-js/' + Raven.VERSION,\n\t                sentry_key: globalKey\n\t            },\n\t            data: data,\n\t            options: globalOptions,\n\t            onSuccess: function success() {\n\t                triggerEvent('success', {\n\t                    data: data,\n\t                    src: globalServer\n\t                });\n\t            },\n\t            onError: function failure() {\n\t                triggerEvent('failure', {\n\t                    data: data,\n\t                    src: globalServer\n\t                });\n\t            }\n\t        });\n\t    }\n\t\n\t    function makeRequest(opts) {\n\t        // Tack on sentry_data to auth options, which get urlencoded\n\t        opts.auth.sentry_data = JSON.stringify(opts.data);\n\t\n\t        var img = newImage(),\n\t            src = opts.url + '?' + urlencode(opts.auth),\n\t            crossOrigin = opts.options.crossOrigin;\n\t\n\t        if (crossOrigin || crossOrigin === '') {\n\t            img.crossOrigin = crossOrigin;\n\t        }\n\t        img.onload = opts.onSuccess;\n\t        img.onerror = img.onabort = opts.onError;\n\t        img.src = src;\n\t    }\n\t\n\t    // Note: this is shitty, but I can't figure out how to get\n\t    // sinon to stub document.createElement without breaking everything\n\t    // so this wrapper is just so I can stub it for tests.\n\t    function newImage() {\n\t        return document.createElement('img');\n\t    }\n\t\n\t    var ravenNotConfiguredError;\n\t\n\t    function _isSetup() {\n\t        if (!hasJSON) return false; // needs JSON support\n\t        if (!globalServer) {\n\t            if (!ravenNotConfiguredError) logDebug('error', 'Error: Raven has not been configured.');\n\t            ravenNotConfiguredError = true;\n\t            return false;\n\t        }\n\t        return true;\n\t    }\n\t\n\t    function joinRegExp(patterns) {\n\t        // Combine an array of regular expressions and strings into one large regexp\n\t        // Be mad.\n\t        var sources = [],\n\t            i = 0,\n\t            len = patterns.length,\n\t            pattern;\n\t\n\t        for (; i < len; i++) {\n\t            pattern = patterns[i];\n\t            if (isString(pattern)) {\n\t                // If it's a string, we need to escape it\n\t                // Taken from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\n\t                sources.push(pattern.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\"));\n\t            } else if (pattern && pattern.source) {\n\t                // If it's a regexp already, we want to extract the source\n\t                sources.push(pattern.source);\n\t            }\n\t            // Intentionally skip other cases\n\t        }\n\t        return new RegExp(sources.join('|'), 'i');\n\t    }\n\t\n\t    function uuid4() {\n\t        var crypto = window.crypto || window.msCrypto;\n\t\n\t        if (!isUndefined(crypto) && crypto.getRandomValues) {\n\t            // Use window.crypto API if available\n\t            var arr = new Uint16Array(8);\n\t            crypto.getRandomValues(arr);\n\t\n\t            // set 4 in byte 7\n\t            arr[3] = arr[3] & 0xFFF | 0x4000;\n\t            // set 2 most significant bits of byte 9 to '10'\n\t            arr[4] = arr[4] & 0x3FFF | 0x8000;\n\t\n\t            var pad = function pad(num) {\n\t                var v = num.toString(16);\n\t                while (v.length < 4) {\n\t                    v = '0' + v;\n\t                }\n\t                return v;\n\t            };\n\t\n\t            return pad(arr[0]) + pad(arr[1]) + pad(arr[2]) + pad(arr[3]) + pad(arr[4]) + pad(arr[5]) + pad(arr[6]) + pad(arr[7]);\n\t        } else {\n\t            // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n\t            return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t                var r = Math.random() * 16 | 0,\n\t                    v = c == 'x' ? r : r & 0x3 | 0x8;\n\t                return v.toString(16);\n\t            });\n\t        }\n\t    }\n\t\n\t    function logDebug(level) {\n\t        if (originalConsoleMethods[level] && Raven.debug) {\n\t            // _slice is coming from vendor/TraceKit/tracekit.js\n\t            // so it's accessible globally\n\t            originalConsoleMethods[level].apply(originalConsole, _slice.call(arguments, 1));\n\t        }\n\t    }\n\t\n\t    function afterLoad() {\n\t        // Attempt to initialize Raven on load\n\t        var RavenConfig = window.RavenConfig;\n\t        if (RavenConfig) {\n\t            Raven.config(RavenConfig.dsn, RavenConfig.config).install();\n\t        }\n\t    }\n\t\n\t    function urlencode(o) {\n\t        var pairs = [];\n\t        each(o, function (key, value) {\n\t            pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n\t        });\n\t        return pairs.join('&');\n\t    }\n\t\n\t    function mergeContext(key, context) {\n\t        if (isUndefined(context)) {\n\t            delete globalContext[key];\n\t        } else {\n\t            globalContext[key] = objectMerge(globalContext[key] || {}, context);\n\t        }\n\t    }\n\t\n\t    afterLoad();\n\t\n\t    // This is being exposed no matter what because there are too many weird\n\t    // usecases for how people use Raven. If this is really a problem, I'm sorry.\n\t    window.Raven = Raven;\n\t\n\t    // Expose Raven to the world\n\t    if (true) {\n\t        // AMD\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t            return Raven;\n\t        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    } else if ((typeof module === 'undefined' ? 'undefined' : (0, _typeof3.default)(module)) === 'object') {\n\t        // browserify\n\t        module.exports = Raven;\n\t    } else if ((typeof exports === 'undefined' ? 'undefined' : (0, _typeof3.default)(exports)) === 'object') {\n\t        // CommonJS\n\t        exports = Raven;\n\t    }\n\t})(typeof window !== 'undefined' ? window : undefined);\n\n/***/ },\n/* 85 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(75);\n\t\n\tvar krux = __webpack_require__(86);\n\tvar Ads = window.oAds = __webpack_require__(91);\n\t// TODO move to central shared utils\n\tvar utils = __webpack_require__(114);\n\tvar oAdsConfig = __webpack_require__(115);\n\tvar Reporter = __webpack_require__(117);\n\tvar sendMetrics = __webpack_require__(118);\n\tvar Sticky = __webpack_require__(119);\n\t\n\tvar slotCount = void 0;\n\tvar slotsRendered = 0;\n\tvar onAdsCompleteCallback = void 0;\n\tvar customTimings = {};\n\t\n\tfunction initOAds(flags) {\n\t\tvar initObj = oAdsConfig(flags);\n\t\tvar containers = [].slice.call(document.querySelectorAll('.o-ads'));\n\t\n\t\tutils.log('dfp_targeting', initObj.dfp_targeting);\n\t\tonAdsCompleteCallback = onAdsComplete.bind(this, flags);\n\t\n\t\tdocument.addEventListener('oAds.complete', onAdsCompleteCallback);\n\t\n\t\tslotCount = containers.length;\n\t\n\t\tutils.log.info(slotCount + ' ad slots found on page');\n\t\tvar ads = Ads.init(initObj);\n\t\tads.then(function (res) {\n\t\t\treturn containers.forEach(res.slots.initSlot.bind(res.slots));\n\t\t});\n\t}\n\t\n\tfunction onAdsComplete(flags, event) {\n\t\tvar detail = event.detail;\n\t\t/* istanbul ignore else  */\n\t\tif (detail.type !== 'oop') {\n\t\t\t/* istanbul ignore else  */\n\t\n\t\t\tif (flags && flags.get('brokenAdReporter') && detail.slot && detail.slot.container) {\n\t\t\t\tif (detail.slot.reporter) {\n\t\t\t\t\tdetail.slot.reporter.destroy();\n\t\t\t\t}\n\t\t\t\tdetail.slot.reporter = new Reporter(detail.slot);\n\t\t\t}\n\t\n\t\t\tif (detail.slot.gpt && detail.slot.gpt.isEmpty === false) {\n\t\t\t\tutils.log.info('Ad loaded in slot', event);\n\t\t\t\tif (slotsRendered === 0) {\n\t\t\t\t\t(0, _utils.perfMark)('firstAdLoaded');\n\t\t\t\t\tif (/spoor-id=3/.test(document.cookie)) {\n\t\t\t\t\t\t(function () {\n\t\t\t\t\t\t\tcustomTimings.firstAdLoaded = new Date().getTime();\n\t\t\t\t\t\t\tvar sendTimings = function sendTimings() {\n\t\t\t\t\t\t\t\tcustomTimings.adIframeLoaded = new Date().getTime();\n\t\t\t\t\t\t\t\t(0, _utils.perfMark)('adIframeLoaded');\n\t\t\t\t\t\t\t\tsendMetrics(customTimings, detail.slot);\n\t\t\t\t\t\t\t\tdocument.body.removeEventListener('oAds.adIframeLoaded', sendTimings);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tdocument.body.addEventListener('oAds.adIframeLoaded', sendTimings);\n\t\t\t\t\t\t})();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (detail.slot.gpt && detail.slot.gpt.isEmpty === true) {\n\t\t\t\tutils.log.warn('Failed to load ad, details below');\n\t\t\t\tutils.log(event);\n\t\t\t}\n\t\t\tslotsRendered++;\n\t\t}\n\t\n\t\t/* istanbul ignore else  */\n\t\tif (slotsRendered === slotCount) {\n\t\t\tutils.log('Ads component finished');\n\t\t}\n\t}\n\t\n\tmodule.exports = {\n\t\tinit: function init(flags) {\n\t\t\treturn Promise.resolve().then(function () {\n\t\t\t\tif (flags && flags.get('ads')) {\n\t\t\t\t\tif (/(BlackBerry|BBOS|PlayBook|BB10)/.test(navigator.userAgent)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (flags && flags.get('stickyHeaderAd')) {\n\t\t\t\t\t\tvar stickyAd = new Sticky(document.querySelector('.above-header-advert'), { 'sibling': '.header-ad-placeholder__top',\n\t\t\t\t\t\t\t'stickUntil': '#primary-nav .o-header__top'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tstickyAd.init();\n\t\t\t\t\t}\n\t\t\t\t\tif (flags && flags.get('stickyRightAd')) {\n\t\t\t\t\t\tvar stickyRight = new Sticky(document.querySelector('.sidebar-advert'), { 'topOffset': '70px',\n\t\t\t\t\t\t\t'stickUntil': 'footer'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tstickyRight.init();\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn Promise.resolve().then(function () {\n\t\t\t\t\t\t// slotsRendered = 0; // Note - this is a global var for this module\n\t\t\t\t\t\t// TODO get appName from appInfo\n\t\t\t\t\t\tvar appName = utils.getAppName();\n\t\t\t\t\t\tif (flags && flags.get('ads') && appName) {\n\t\t\t\t\t\t\tinitOAds(flags);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then(function () {\n\t\t\t\t\t\tif (flags && flags.get('krux')) {\n\t\t\t\t\t\t\t//Though krux is activated through nextAdsComponent, we also need to load all the additional user matching scripts\n\t\t\t\t\t\t\t//that would have been loaded via their tag manager\n\t\t\t\t\t\t\tkrux.init(flags);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n/***/ },\n/* 86 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Superstore = __webpack_require__(87);\n\tvar store = new Superstore('session', 'next-krux');\n\tvar oAds = __webpack_require__(91);\n\t\n\tvar addPixel = function addPixel(src) {\n\t\tvar img = new Image();\n\t\timg.src = src;\n\t};\n\t\n\t// None of the Krux scripts need to run all the time since they are just matching users between various systems\n\t// In Supertag they were (mostly) set to cap at 3 times a day. So roughly equating that to 2 times a session.\n\t\n\tvar frequencyCap = function frequencyCap(name, limit, fn) {\n\t\tvar key = 'scriptExecCount_' + name;\n\t\tstore.get(key).then(function (val) {\n\t\t\tval = val || 0;\n\t\t\tif (parseInt(val) < limit) {\n\t\t\t\tfn();\n\t\t\t\tstore.set(key, ++val).catch(function () {});\n\t\t\t}\n\t\t}).catch(function () {});\n\t};\n\t\n\texports.init = function (flags) {\n\t\n\t\tdocument.body.addEventListener('oAds.kruxScriptLoaded', function () {\n\t\t\t//If local/sessionStorage unavailable, don't run any of these scripts.\n\t\t\tif (typeof window.Krux === 'undefined' || !Superstore.isPersisting()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tvar kuid = oAds.krux.retrieve('kuid');\n\t\n\t\t\tif (kuid && typeof kuid !== 'undefined') {\n\t\n\t\t\t\t// Rubicon handles programmatic advertising. This matches up the user ID formats so Krux can send segment populations to them.\n\t\t\t\tif (flags.get('kruxRubiconIntegration')) {\n\t\t\t\t\tfrequencyCap('rubicon', 2, function () {\n\t\t\t\t\t\taddPixel('https://tap.rubiconproject.com/oz/feeds/krux/tokens?afu=' + kuid);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\n\t\t\t\t// DoubleClick handles display advertising. This matches up the user ID formats so Krux can send segment populations to them.\n\t\t\t\tif (flags.get('kruxGoogleIntegration')) {\n\t\t\t\t\tfrequencyCap('doubleclick', 2, function () {\n\t\t\t\t\t\taddPixel('https://apiservices.krxd.net/um?partner=google&r=https://cm.g.doubleclick.net/pixel');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\n\t\t\t\t// The following four scripts are user matching scripts for Kruxdata partners\n\t\t\t\t// They provide 3rd party data on user Demographic (eg:\tMales),\tIntent\t(eg:\tChildren's\tApparel\tBuyers)\n\t\t\t\tif (flags.get('kruxAcxiomIntegration')) {\n\t\t\t\t\tfrequencyCap('acxiom', 2, function () {\n\t\t\t\t\t\taddPixel('https://idsync.rlcdn.com/379708.gif?partner=' + kuid);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\n\t\t\t\tif (flags.get('kruxDataLogixIntegration')) {\n\t\t\t\t\tfrequencyCap('DataLogix', 1, function () {\n\t\t\t\t\t\tvar kurlParams = encodeURIComponent('_kuid=' + kuid + '&_kdpid=2dd640a6-6ebd-4d4f-af30-af8baa441a0d&dlxid=<na_id>&dlxdata=<na_da>');\n\t\t\t\t\t\tvar kurl = 'https://beacon.krxd.net/data.gif?' + kurlParams;\n\t\t\t\t\t\taddPixel('https://r.nexac.com/e/getdata.xgi?dt=br&pkey=gpwn29rvapq62&ru=' + kurl);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\n\t\t\t\tif (flags.get('kruxIXIIntegration')) {\n\t\t\t\t\tfrequencyCap('ixidigital', 2, function () {\n\t\t\t\t\t\taddPixel('https://kr.ixiaa.com/C726AB29-0470-440B-B8D2-D552CED3A3DC/a.gif');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\n\t\t\t\tif (flags.get('kruxExelateIntegration')) {\n\t\t\t\t\tfrequencyCap('exelate', 2, function () {\n\t\t\t\t\t\taddPixel('https://loadm.exelator.com/load?_kdpid=e4942ff0-4070-4896-a7ef-e6a5a30ce9f9&buid=' + kuid + '&p=204&g=270&j=0');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t//AdAdvisor is another Krux data partner with 3rd party data points\n\t\t\tif (flags.get('kruxAdAdvisorIntegration')) {\n\t\t\t\tfrequencyCap('AdAdvisor-S2S', 2, function () {\n\t\t\t\t\taddPixel('https://adadvisor.net/adscores/g.js?sid=9212244187&_kdpid=2111c0af-fc3a-446f-ab07-63aa74fbde8e');\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n/***/ },\n/* 87 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(88);\n\n/***/ },\n/* 88 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t/**\n\t * Superstore\n\t *\n\t * @author Matt Andrews <matthew.andrews@ft.com>\n\t * @copyright The Financial Times [All Rights Reserved]\n\t */\n\tvar sync = __webpack_require__(89);\n\t\n\tvar keys = {};\n\tvar store = {};\n\t\n\tfunction Superstore(type, namespace) {\n\t  if (!namespace) {\n\t    throw \"Namespace required\";\n\t  }\n\t  this.store = sync[type];\n\t  this.namespace = \"_ss.\" + namespace + \".\";\n\t}\n\t\n\tSuperstore.prototype.get = function (key) {\n\t  return new Promise(function (resolve) {\n\t    resolve(this.store.get(this.namespace + key));\n\t  }.bind(this));\n\t};\n\t\n\tSuperstore.prototype.set = function (key, value) {\n\t  return new Promise(function (resolve) {\n\t    resolve(this.store.set(this.namespace + key, value));\n\t  }.bind(this));\n\t};\n\t\n\tSuperstore.prototype.unset = function (key) {\n\t  return new Promise(function (resolve) {\n\t    resolve(this.store.unset(this.namespace + key));\n\t  }.bind(this));\n\t};\n\t\n\t/**\n\t * #clear(true) and #clear() clear cache and persistent layer, #clear(false) only clears cache\n\t *\n\t */\n\tSuperstore.prototype.clear = function () {\n\t  return new Promise(function (resolve) {\n\t    resolve(this.store.clear(this.namespace));\n\t  }.bind(this));\n\t};\n\t\n\tSuperstore.isPersisting = sync.isPersisting;\n\t\n\tmodule.exports = Superstore;\n\n/***/ },\n/* 89 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(90);\n\n/***/ },\n/* 90 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/**\n\t * Superstore synchronous library\n\t *\n\t * @author Matt Andrews <matthew.andrews@ft.com>\n\t * @copyright The Financial Times [All Rights Reserved]\n\t */\n\t\n\tvar escapeRegex = function escapeRegex(str) {\n\t  return String(str).replace(/([.*+?=^!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n\t};\n\t\n\tvar keys = {};\n\tvar store = {};\n\tvar persist = true;\n\t\n\t// Watch for changes from other tabs\n\t\n\t\n\tfunction Superstore(type) {\n\t  this.storage = window[type];\n\t  this.keys = {};\n\t  this.store = {};\n\t  // TODO: check the storageArea so that we only refresh the key when we need to\n\t  window.addEventListener(\"storage\", function (e) {\n\t    if (this.keys[e.key]) {\n\t      this.keys[e.key] = true;\n\t      this.store[e.key] = JSON.parse(e.newValue);\n\t    }\n\t  }.bind(this));\n\t}\n\t\n\t/**\n\t * get localstorage value for key falling back to in memory for iOS private browsing bug\n\t * <http://stackoverflow.com/questions/9077101/iphone-localstorage-quota-exceeded-err-issue>\n\t * @param {String} key\n\t * @return {*} data for supplied key\n\t *\n\t */\n\tSuperstore.prototype.get = function (key) {\n\t  if (arguments.length !== 1) {\n\t    throw Error(\"get expects 1 argument, \" + arguments.length + \" given; \" + key);\n\t  }\n\t  if (!this.keys[key] && persist) {\n\t    var data;\n\t    try {\n\t      data = this.storage[key];\n\t    } catch (e) {\n\t      persist = false; // Safari 8 with Cookies set to 'Never' throws on every read\n\t    }\n\t\n\t    // Slightly weird hack because JSON.parse of an undefined value throws\n\t    // a weird exception \"SyntaxError: Unexpected token u\"\n\t    if (data) data = JSON.parse(data);\n\t    this.store[key] = data;\n\t    this.keys[key] = true;\n\t  }\n\t  return this.store[key];\n\t};\n\t\n\t/**\n\t * set localstorage key,value falling back to in memory for iOS private browsing bug\n\t * <http://stackoverflow.com/questions/9077101/iphone-localstorage-quota-exceeded-err-issue>\n\t * @param {String} key\n\t * @param {*} value which will be passed via JSON.stringify\n\t * @return {*} value\n\t *\n\t */\n\tSuperstore.prototype.set = function (key, value) {\n\t  if (arguments.length !== 2) {\n\t    throw Error(\"set expects 2 arguments, \" + arguments.length + \" given; \" + key);\n\t  }\n\t  if (persist) {\n\t    try {\n\t      this.storage[key] = JSON.stringify(value);\n\t    } catch (err) {\n\t\n\t      // Known iOS Private Browsing Bug - fall back to non-persistent storage\n\t      if (err.code === 22) {\n\t        persist = false;\n\t      } else {\n\t        throw err;\n\t      }\n\t    }\n\t  }\n\t\n\t  this.store[key] = value;\n\t  this.keys[key] = true;\n\t  return value;\n\t};\n\t\n\t/**\n\t * unset value in store for key\n\t * @param {String} key\n\t */\n\tSuperstore.prototype.unset = function (key) {\n\t  delete this.store[key];\n\t  delete this.keys[key];\n\t  this.storage.removeItem(key);\n\t};\n\t\n\t/**\n\t * clear localstorage\n\t * @param clearPrefix will clear keys starting with `clearPrefix`\n\t * #clear(true) and #clear() clear cache and persistent layer, #clear(false) only clears cache\n\t *\n\t */\n\tSuperstore.prototype.clear = function (clearPrefix) {\n\t  if (!clearPrefix) {\n\t    if (persist) {\n\t      this.storage.clear();\n\t    }\n\t    this.store = {};\n\t    this.keys = {};\n\t    return;\n\t  }\n\t\n\t  clearPrefix = escapeRegex(clearPrefix);\n\t  var clearKeyRegex = new RegExp(\"^\" + clearPrefix);\n\t  for (var key in this.keys) {\n\t    if (key.match(clearKeyRegex)) {\n\t      this.unset(key);\n\t    }\n\t  }\n\t};\n\t\n\tmodule.exports.isPersisting = function () {\n\t  return persist;\n\t};\n\t\n\tmodule.exports.local = new Superstore('localStorage');\n\tmodule.exports.session = new Superstore('sessionStorage');\n\n/***/ },\n/* 91 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(92);\n\n/***/ },\n/* 92 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction Ads() {\n\t\taddDOMEventListener();\n\t}\n\t\n\t// bung all our modules on the protoype\n\tAds.prototype.config = __webpack_require__(93);\n\tAds.prototype.slots = __webpack_require__(105);\n\tAds.prototype.gpt = __webpack_require__(107);\n\tAds.prototype.krux = __webpack_require__(109);\n\tAds.prototype.rubicon = __webpack_require__(112);\n\tAds.prototype.admantx = __webpack_require__(113);\n\tAds.prototype.targeting = __webpack_require__(108);\n\tAds.prototype.utils = __webpack_require__(94);\n\t\n\t/**\n\t* Initialises the ads library and all sub modules\n\t* @param config {object} a JSON object containing configuration for the current page\n\t*/\n\t\n\tAds.prototype.init = function (options) {\n\t\tvar _this = this;\n\t\n\t\tthis.config.init();\n\t\tthis.config(options);\n\t\tvar targetingApi = this.config().targetingApi;\n\t\tif (targetingApi) {\n\t\t\treturn Promise.all([fetchData(targetingApi.user), fetchData(targetingApi.page)]).then(function (response) {\n\t\n\t\t\t\tfor (var i = 0; i < response.length; i++) {\n\t\t\t\t\tvar responseObj = response[i];\n\t\t\t\t\tvar keys = ['user', 'page'];\n\t\t\t\t\tvar kruxObj = {};\n\t\n\t\t\t\t\tif (responseObj.krux && responseObj.krux.attributes) {\n\t\t\t\t\t\tkruxObj[keys[i]] = _this.utils.buildObjectFromArray(responseObj.krux.attributes);\n\t\t\t\t\t\t_this.krux.add(kruxObj);\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (responseObj.dfp && responseObj.dfp.targeting) {\n\t\t\t\t\t\t_this.targeting.add(_this.utils.buildObjectFromArray(responseObj.dfp.targeting));\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (targetingApi.usePageZone && responseObj.dfp && responseObj.dfp.adUnit) {\n\t\t\t\t\t\tvar gpt = _this.config('gpt');\n\t\t\t\t\t\t/* istanbul ignore else  */\n\t\t\t\t\t\tif (gpt && gpt.zone) {\n\t\t\t\t\t\t\tgpt.zone = responseObj.dfp.adUnit.join('/');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _this.initLibrary();\n\t\t\t}).catch(this.initLibrary);\n\t\t} else {\n\t\t\treturn Promise.resolve(this.initLibrary());\n\t\t}\n\t};\n\t\n\tvar fetchData = function fetchData(target) {\n\t\tif (!target) {\n\t\t\treturn Promise.resolve({});\n\t\t};\n\t\treturn fetch(target, {\n\t\t\ttimeout: 2000,\n\t\t\t// temporary solution for [next.]ft.com > IE9\n\t\t\tuseCorsProxy: true\n\t\t}).then(function (res) {\n\t\t\treturn res.json();\n\t\t}).catch(function () {});\n\t};\n\t\n\tAds.prototype.initLibrary = function () {\n\t\tthis.slots.init();\n\t\tthis.gpt.init();\n\t\tthis.krux.init();\n\t\tthis.rubicon.init();\n\t\tthis.admantx.init();\n\t\tthis.utils.on('debug', this.debug.bind(this));\n\t\tthis.isInitialised = true;\n\t\tthis.utils.broadcast('initialised', this);\n\t\tremoveDOMEventListener();\n\t\treturn this;\n\t};\n\t\n\tvar initAll = function initAll() {\n\t\tvar metas = Array.from(document.getElementsByTagName('meta'));\n\t\tvar stop = metas.filter(function (meta) {\n\t\t\treturn meta.name === 'o-ads-stop';\n\t\t});\n\t\t/* istanbul ignore else  */\n\t\tif (!stop.length) {\n\t\n\t\t\tads.init().then(function () {\n\t\t\t\tvar slots = Array.from(document.querySelectorAll('.o-ads, [data-o-ads-name]'));\n\t\t\t\tslots.forEach(ads.slots.initSlot.bind(ads.slots));\n\t\t\t});\n\t\t}\n\t};\n\t\n\tAds.prototype.debug = function () {\n\t\tvar remove = true;\n\t\tif (localStorage.getItem('oAds')) {\n\t\t\tremove = false;\n\t\t} else {\n\t\t\tlocalStorage.setItem('oAds', true);\n\t\t}\n\t\tthis.admantx.debug();\n\t\tthis.gpt.debug();\n\t\tthis.krux.debug();\n\t\tthis.slots.debug();\n\t\tthis.targeting.debug();\n\t\n\t\tif (remove) {\n\t\t\tlocalStorage.removeItem('oAds');\n\t\t}\n\t};\n\t\n\tfunction addDOMEventListener() {\n\t\tdocument.addEventListener('o.DOMContentLoaded', initAll);\n\t}\n\tfunction removeDOMEventListener() {\n\t\tdocument.removeEventListener('o.DOMContentLoaded', initAll);\n\t}\n\t\n\tvar ads = new Ads();\n\tmodule.exports = ads;\n\n/***/ },\n/* 93 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t//TODO remove all ft.com specific stuff so we can remove this as a global\n\t// currently all FT specific stuff is wrapped in an if window.FT\n\t\n\t/**\n\t * @fileOverview\n\t * Third party library for use with google publisher tags.\n\t *\n\t * @author Robin Marr, robin.marr@ft.com\n\t */\n\t\n\t/**\n\t * The FT.ads.config object holds the confiuration properties for an FT.ads.gpt instance.\n\t * There are four tiers of configuration; cookie level config, default config (set within the constructor), metatag config and global (env) config.\n\t * Global config, (set in the page FT.env ojbect) takes priority over meta followed by default config with cookie config having the least priority.\n\t * The FT.ads.config() function acts as an accessor method for the config; allowing getting and setting of configuration values.\n\t * Calling config() with no parameters returns the entire configuration object.\n\t * Calling config passing a valid property key will envoke the 'getter' and return the value for that property key.\n\t * Calling config passing a valid property key and a value will envoke the setter and set the value of the key to the new value.\n\t * Calling config passing an object of keys and values will envoke a setter that extends the store with the object provided.\n\t * @name config\n\t * @memberof FT.ads\n\t * @function\n\t*/\n\tvar utils = __webpack_require__(94);\n\t/**\n\t* Default configuration set in the constructor.\n\t*/\n\tvar defaults = {\n\t\tformats: {\n\t\t\tMediumRectangle: { sizes: [300, 250] },\n\t\t\tRectangle: { sizes: [180, 50] },\n\t\t\tWideSkyscraper: { sizes: [160, 600] },\n\t\t\tLeaderboard: { sizes: [728, 90] },\n\t\t\tSuperLeaderboard: { sizes: [[970, 90], [970, 66]] },\n\t\t\tHalfPage: { sizes: [300, 600] },\n\t\t\tBillboard: { sizes: [970, 250] },\n\t\t\tPortrait: { sizes: [300, 1050] },\n\t\t\tAdhesionBanner: { sizes: [320, 50] },\n\t\t\tMicroBar: { sizes: [88, 31] },\n\t\t\tButton2: { sizes: [120, 60] },\n\t\t\tResponsive: { sizes: [2, 2] }\n\t\t},\n\t\tresponsive: {\n\t\t\textra: [1025, 0], //Reasonable width to show a Billboard (desktop)\n\t\t\tlarge: [1000, 0], //reasonable width to show SuperLeaderboard (tablet landscape)\n\t\t\tmedium: [760, 0], //reasonable width to show a leaderboard (tablet portrait)\n\t\t\tsmall: [0, 0] //Mobile\n\t\t},\n\t\tflags: {\n\t\t\trefresh: true,\n\t\t\tinview: true\n\t\t}\n\t};\n\t\n\t/**\n\t* @private\n\t* @function\n\t* fetchMetaConfig pulls out metatag key value pairs into an object returns the object\n\t*/\n\tfunction fetchMetaConfig() {\n\t\tvar results = {};\n\t\tvar metas = Array.from(document.getElementsByTagName('meta'));\n\t\tmetas.forEach(function (meta) {\n\t\t\tif (meta.name) {\n\t\t\t\tif (meta.getAttribute('data-contenttype') === 'json') {\n\t\t\t\t\tresults[meta.name] = window.JSON ? JSON.parse(meta.content) : 'UNSUPPORTED';\n\t\t\t\t} else {\n\t\t\t\t\tresults[meta.name] = meta.content;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\treturn results;\n\t}\n\t\n\tfunction fetchDeclaritiveConfig() {\n\t\tvar results = {};\n\t\tvar scripts = Array.from(document.querySelectorAll('script[data-o-ads-config]'));\n\t\tscripts.forEach(function (script) {\n\t\t\tresults = window.JSON ? utils.extend(results, JSON.parse(script.innerHTML)) : 'UNSUPPORTED';\n\t\t});\n\t\n\t\treturn results;\n\t}\n\t\n\t/**\n\t* @private\n\t* @function\n\t* fetchCanonicalURL Grabs the canonical URL from the page meta if it exists.\n\t*/\n\tfunction fetchCanonicalURL() {\n\t\tvar canonical = void 0;\n\t\tvar canonicalTag = document.querySelector('link[rel=\"canonical\"]');\n\t\tif (canonicalTag) {\n\t\t\tcanonical = canonicalTag.href;\n\t\t}\n\t\n\t\treturn { canonical: canonical };\n\t}\n\t\n\t/**\n\t* Defines a store for configuration information and returns a getter/setter method for access.\n\t* @class\n\t* @constructor\n\t*/\n\tfunction Config() {\n\t\tthis.store = {};\n\t}\n\t\n\tConfig.prototype.access = function (k, v) {\n\t\tvar result = void 0;\n\t\tif (utils.isPlainObject(k)) {\n\t\t\tutils.extend(true, this.store, k);\n\t\t\tresult = this.store;\n\t\t} else if (typeof v === 'undefined') {\n\t\t\tif (typeof k === 'undefined') {\n\t\t\t\tresult = this.store;\n\t\t\t} else {\n\t\t\t\tresult = this.store[k];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.store[k] = v;\n\t\t\tresult = v;\n\t\t}\n\t\n\t\treturn result;\n\t};\n\t\n\tConfig.prototype.clear = function (key) {\n\t\tif (key) {\n\t\t\tdelete this.store[key];\n\t\t} else {\n\t\t\tthis.store = {};\n\t\t}\n\t};\n\t\n\tConfig.prototype.init = function () {\n\t\tthis.store = utils.extend(true, {}, defaults, fetchMetaConfig(), fetchCanonicalURL(), fetchDeclaritiveConfig());\n\t\treturn this.store;\n\t};\n\t\n\tvar config = new Config();\n\tmodule.exports = config.access.bind(config);\n\tmodule.exports.init = config.init.bind(config);\n\tmodule.exports.clear = config.clear.bind(config);\n\n/***/ },\n/* 94 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Utility methods for the advertising library.\n\t * @author Origami Advertising, origami.advertising@ft.com\n\t * @module utils\n\t */\n\tvar hop = Object.prototype.hasOwnProperty;\n\t\n\tvar utils = module.exports;\n\t/**\n\t * Uses object prototype toString method to get at the type of object we are dealing,\n\t * IE returns [object Object] for null and undefined so we need to filter those\n\t * http://es5.github.com/#x15.2.4.2\n\t * @private\n\t * @param {object} Any javascript object\n\t * @returns The type of the object e.g Array, String, Object\n\t */\n\tfunction is(object) {\n\t\tvar type = Object.prototype.toString.call(object).match(/^\\[object\\s(.*)\\]$/)[1];\n\t\n\t\tif (object === null) {\n\t\t\treturn \"Null\";\n\t\t} else if (object === undefined) {\n\t\t\treturn \"Undefined\";\n\t\t} else {\n\t\t\treturn type;\n\t\t}\n\t}\n\t\n\t/**\n\t * Creates a method for testing the type of an Object\n\t * @private\n\t * @param {string} The name of the object type to be tested e.g. Array\n\t * @returns a method that takes any javascript object and tests if it is of\n\t * the supplied className\n\t */\n\tfunction createIsTest(className) {\n\t\treturn function (obj) {\n\t\t\treturn is(obj) === className;\n\t\t};\n\t}\n\t\n\t/**\n\t * Curries some useful is{ClassName} methods into the supplied Object\n\t * @private\n\t * @param {object} The object to add the methods too\n\t * @param {array} A list of types to create methods for defaults to \"Array\", \"Object\", \"String\", \"Function\"\n\t * @returns The object supplied in the first param with is{ClassName} Methods Added\n\t */\n\tfunction curryIsMethods(obj, classNames) {\n\t\tclassNames = classNames || ['Array', 'Object', 'String', 'Function', 'Storage'];\n\t\n\t\twhile (!!classNames.length) {\n\t\t\tvar className = classNames.pop();\n\t\t\tobj[\"is\" + className] = createIsTest(className);\n\t\t}\n\t\n\t\treturn obj;\n\t}\n\t\n\t/**\n\t * Test if an object is the global window object\n\t * @param {object} obj The object to be tested\n\t * @returns {boolean} true if the object is the window obj, otherwise false\n\t */\n\tmodule.exports.isWindow = function (obj) {\n\t\treturn obj && obj !== null && obj === window;\n\t};\n\t\n\t/**\n\t * Test if an object inherits from any other objects, used in extend\n\t * to protect against deep copies running out of memory and constructors\n\t * losing there prototypes when cloned\n\t * @param {object} obj The object to be tested\n\t * @returns {boolean} true if the object is plain false otherwise\n\t */\n\tmodule.exports.isPlainObject = function (obj) {\n\t\tvar hop = Object.prototype.hasOwnProperty;\n\t\n\t\t// Must be an Object.\n\t\t// Because of IE, we also have to check the presence of the constructor property.\n\t\t// Make sure that DOM nodes and window objects don't pass through, as well\n\t\tif (!obj || !utils.isObject(obj) || obj.nodeType || utils.isWindow(obj)) {\n\t\t\treturn false;\n\t\t}\n\t\n\t\ttry {\n\t\t\t// Not own constructor property must be Object\n\t\t\tif (obj.constructor && !hop.call(obj, 'constructor') && !hop.call(obj.constructor.prototype, 'isPrototypeOf')) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t/* istanbul ignore next  */\n\t\t\t// IE8,9 Will throw exceptions on certain host objects\n\t\t\treturn false;\n\t\t}\n\t\n\t\t// Own properties are enumerated firstly, so to speed up,\n\t\t// if last one is own, then all properties are own.\n\t\tvar key = void 0;\n\t\tfor (key in obj) {}\n\t\n\t\treturn key === undefined || hop.call(obj, key);\n\t};\n\t\n\t/**\n\t * Test if an object is a string with a length\n\t * @param {object} str The object to be tested\n\t * @returns {boolean} true if the object is a string with a length greater than 0\n\t */\n\tmodule.exports.isNonEmptyString = function (str) {\n\t\treturn utils.isString(str) && !!str.length;\n\t};\n\t\n\tmodule.exports.isElement = function (element) {\n\t\treturn element && element.nodeType === 1 && element.tagName || false;\n\t};\n\t\n\t/**\n\t * Test if an object is a finite number\n\t * @param {object} The object to be tested\n\t * @returns {boolean} true if the object is a finite number, can be a float or int but not NaN or Infinity\n\t */\n\tmodule.exports.isNumeric = function (num) {\n\t\treturn !isNaN(parseFloat(num)) && isFinite(num);\n\t};\n\t\n\t/**\n\t * Merge or clone objects\n\t * @function\n\t * @param {boolean/object} deep/target If boolean specifies if this should be a deep copy or not, otherwise is the target object for the copy\n\t * @param {object} target If deep copy is true will be the target object of the copy\n\t * @param {object} objects All other params are objects to be merged into the target\n\t * @returns {object} The target object extended with the other params\n\t */\n\tmodule.exports.extend = extend;\n\t\n\tfunction extend() {\n\t\t/* jshint forin: false */\n\t\t/* when doing a deep copy we want to copy prototype properties */\n\t\tvar options = void 0;\n\t\tvar src = void 0;\n\t\tvar copy = void 0;\n\t\tvar copyIsArray = void 0;\n\t\tvar clone = void 0;\n\t\tvar target = arguments[0] || {};\n\t\tvar length = arguments.length;\n\t\tvar deep = false;\n\t\tvar i = 1;\n\t\n\t\t// Handle a deep copy situation\n\t\tif (typeof target === 'boolean') {\n\t\t\tdeep = target;\n\t\t\ttarget = arguments[1] || {};\n\t\n\t\t\t// skip the boolean and the target\n\t\t\ti = 2;\n\t\t}\n\t\n\t\t// Handle case when target is a string or something (possible in deep copy)\n\t\t/* istanbul ignore else  */\n\t\tif ((typeof target === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(target)) !== \"object\" && !utils.isFunction(target)) {\n\t\t\ttarget = {};\n\t\t}\n\t\n\t\t// do nothing if only one argument is passed (or 2 for a deep copy)\n\t\t/* istanbul ignore else  */\n\t\tif (length === i) {\n\t\t\treturn target;\n\t\t}\n\t\n\t\tfor (; i < length; i++) {\n\t\t\t// Only deal with non-null/undefined values\n\t\t\tif ((options = arguments[i]) !== null) {\n\t\t\t\t// Extend the base object\n\t\t\t\tfor (var name in options) {\n\t\t\t\t\t/* istanbul ignore next */\n\t\t\t\t\tif (!options.hasOwnProperty(name)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsrc = target[name];\n\t\t\t\t\tcopy = options[name];\n\t\n\t\t\t\t\t// Prevent never-ending loop\n\t\t\t\t\tif (target === copy) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// Recurse if we're merging arrays\n\t\t\t\t\tif (deep && copy && (utils.isPlainObject(copy) || utils.isArray(copy))) {\n\t\t\t\t\t\tcopyIsArray = utils.isArray(copy);\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && utils.isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && utils.isObject(src) ? src : {};\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\t\n\t\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t// Return the modified object\n\t\treturn target;\n\t}\n\t\n\t/**\n\t * Create an object hash from a delimited string\n\t * Beware all properties on the resulting object will have string values.\n\t * @param {string}        str       The string to transform\n\t * @param {string|regexp} delimiter The character that delimits each name/value pair\n\t * @param {string}        pairing   The character that separates the name from the value\n\t * @return {object}\n\t *\n\t */\n\tmodule.exports.hash = function (str, delimiter, pairing) {\n\t\tvar pair = void 0;\n\t\tvar value = void 0;\n\t\tvar hash = {};\n\t\tif (str && str.split) {\n\t\t\tstr = str.split(delimiter);\n\t\n\t\t\tfor (var idx = 0, l = str.length; idx < l; idx += 1) {\n\t\t\t\tvalue = str[idx];\n\t\t\t\tpair = value.split(pairing);\n\t\t\t\tif (pair.length > 1) {\n\t\t\t\t\thash[pair[0].trim()] = pair.slice(1).join(pairing);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn hash;\n\t};\n\t\n\t/**\n\t* Takes a script URL as a string value, creates a new script element, sets the src and attaches to the page\n\t* The async value of the script can be set by the seccond parameter, which is a boolean\n\t* Note, we should use protocol-relative URL paths to ensure we don't run into http/https issues\n\t* @param {string} scriptUrl The url to the script file to be added\n\t* @param {boolean} async Set the async attribute on the script tag\n\t* @param {function} callback A function to run when the script loads\n\t* @param {function} errorcb A function to run if the script fails to load\n\t* @returns {HTMLElement} the created script tag\n\t*/\n\tmodule.exports.attach = function (scriptUrl, async, callback, errorcb, autoRemove) {\n\t\tvar tag = document.createElement('script');\n\t\tvar node = document.getElementsByTagName('script')[0];\n\t\tvar hasRun = false;\n\t\n\t\tfunction processCallback(callback) {\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (!hasRun) {\n\t\t\t\tcallback.call();\n\t\t\t\thasRun = true;\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (autoRemove) {\n\t\t\t\t\ttag.parentElement.removeChild(tag);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\ttag.setAttribute('src', scriptUrl);\n\t\ttag.setAttribute('o-ads', '');\n\t\t/* istanbul ignore else */\n\t\tif (async) {\n\t\t\ttag.async = 'true';\n\t\t}\n\t\t/* istanbul ignore else  */\n\t\tif (utils.isFunction(callback)) {\n\t\t\t/* istanbul ignore if - legacy IE code, won't test */\n\t\t\tif (hop.call(tag, 'onreadystatechange')) {\n\t\t\t\ttag.onreadystatechange = function () {\n\t\t\t\t\tif (tag.readyState === \"loaded\") {\n\t\t\t\t\t\tprocessCallback(callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\ttag.onload = function () {\n\t\t\t\t\tprocessCallback(callback);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\n\t\t/* istanbul ignore else  */\n\t\tif (utils.isFunction(errorcb)) {\n\t\t\ttag.onerror = function () {\n\t\t\t\tprocessCallback(errorcb);\n\t\t\t};\n\t\t}\n\t\t// Use insert before, append child has issues with script tags in some browsers.\n\t\tnode.parentNode.insertBefore(tag, node);\n\t\treturn tag;\n\t};\n\t\n\t/*\n\t* Test to see if a script file is already referenced from the dom\n\t* @param {string} url The URL to look for\n\t* @return {boolean} true if the file is already referenced else false\n\t*/\n\tmodule.exports.isScriptAlreadyLoaded = function (url) {\n\t\tvar scripts = document.getElementsByTagName('script');\n\t\tfor (var i = scripts.length; i--;) {\n\t\t\tif (scripts[i].src === url) return true;\n\t\t}\n\t\n\t\treturn false;\n\t};\n\t\n\t/*\n\t* Make a cross domain XHR request\n\t* @param {string} The url to request\n\t* @param {string} THe method of the request (GET, POST).\n\t* @param {function} callback A function to run when the request succeeds\n\t* @param {function} A function to run if the request fails\n\t* @returns {HTMLElement} the created XHR object\n\t*/\n\tmodule.exports.createCORSRequest = function (url, method, callback, errorcb, timeout) {\n\t\tvar xhr = new XMLHttpRequest();\n\t\t/* istanbul ignore else - legacy IE code, won't test */\n\t\tif ('withCredentials' in xhr) {\n\t\t\txhr.open(method, url, true);\n\t\t\txhr.responseType = 'json';\n\t\t} else if (typeof XDomainRequest !== \"undefined\") {\n\t\t\txhr = new XDomainRequest();\n\t\t\txhr.open(method, url, true);\n\t\t} else {\n\t\t\txhr = null;\n\t\t\terrorcb();\n\t\t}\n\t\n\t\t/* istanbul ignore else */\n\t\tif (typeof timeout === \"number\") {\n\t\t\txhr.timeout = timeout;\n\t\t}\n\t\n\t\txhr.onload = function (xhrEvent) {\n\t\t\tcallback.call(this, this.response || this.responseText, xhrEvent);\n\t\t};\n\t\n\t\tif (utils.isFunction(errorcb)) {\n\t\t\txhr.onerror = errorcb;\n\t\t\txhr.ontimeout = errorcb;\n\t\t}\n\t\n\t\txhr.send();\n\t\treturn xhr;\n\t};\n\t\n\t/**\n\t* return the current documents referrer or an empty string if non exists\n\t* This method enables us to mock the referrer in our tests reliably and doesn't really serve any other purpose\n\t* @returns {string} document.referrer\n\t*/\n\t/* istanbul ignore next - cannot reliably test value of referer */\n\tmodule.exports.getReferrer = function () {\n\t\treturn document.referrer || '';\n\t};\n\t\n\t/**\n\t* Capitalise a string\n\t* @param {string} string the string to capitalise\n\t* @returns {string}\n\t*/\n\tmodule.exports.capitalise = function (string) {\n\t\treturn string.replace(/(^[a-z])/, function (match, letter) {\n\t\t\treturn letter.toUpperCase();\n\t\t});\n\t};\n\t\n\t/**\n\t* Remove hyphens from a string and upper case the following letter\n\t* @param {string} string the string to parse\n\t* @returns {string}\n\t*/\n\tmodule.exports.dehyphenise = function (string) {\n\t\treturn string.replace(/(-)([a-z])/g, function (match, hyphen, letter) {\n\t\t\treturn letter.toUpperCase();\n\t\t});\n\t};\n\t\n\t/**\n\t* Find uppercase characters in a string, lower case them and add a preceding hyphen\n\t* @param {string} string the string to parse\n\t* @returns {string}\n\t*/\n\tmodule.exports.hyphenise = function (string) {\n\t\treturn string.replace(/([A-Z])/g, function (match, letter) {\n\t\t\treturn \"-\" + letter.toLowerCase();\n\t\t});\n\t};\n\t\n\t/**\n\t* remove prefixes from o-ads data attributes and dehyphenise the name\n\t* @param {string|} name the name of the attribute to parse\n\t* @returns {string}\n\t*/\n\tmodule.exports.parseAttributeName = function (attribute) {\n\t\tvar name = utils.isString(attribute) ? attribute : attribute.name;\n\t\treturn utils.dehyphenise(name.replace(/(data-)?o-ads-/, ''));\n\t};\n\t\n\t/**\n\t* return the current documents url or an empty string if non exists\n\t* This method enables us to mock the document location string in our tests reliably and doesn't really serve any other purpose\n\t* @returns {string}\n\t*/\n\t/* istanbul ignore next - cannot reliably test value of location */\n\tmodule.exports.getLocation = function () {\n\t\treturn document.location.href || '';\n\t};\n\t\n\t/**\n\t* return the current documents search or an empty string if non exists\n\t* also strips the initial ? from the search string for easier parsing\n\t* This method enables us to mock the search string in our tests reliably and doesn't really serve any other purpose\n\t* @returns {string}\n\t*/\n\tmodule.exports.getQueryString = function () {\n\t\treturn document.location.search.substring(1) || '';\n\t};\n\t\n\t/**\n\t* returns a timestamp of the current date/time in the format YYYYMMDDHHMMSS\n\t* @returns {string}\n\t*/\n\tmodule.exports.getTimestamp = function () {\n\t\tvar now = new Date();\n\t\treturn [now.getFullYear(), (\"0\" + (now.getMonth() + 1)).slice(-2), (\"0\" + now.getDate()).slice(-2), (\"0\" + now.getHours()).slice(-2), (\"0\" + now.getMinutes()).slice(-2), (\"0\" + now.getSeconds()).slice(-2)].join(\"\");\n\t};\n\t\n\t// capture all iframes in the page in a live node list\n\tvar iframes = document.getElementsByTagName('iframe');\n\t\n\t/**\n\t* Given the window object of an iframe this method returns the o-ads slot name\n\t* that rendered the iframe, if the iframe was not rendered by o-ads this will\n\t* return false\n\t* @param {window}  a window object\n\t* @returns {String|Boolean}\n\t*/\n\tmodule.exports.iframeToSlotName = function (iframeWindow) {\n\t\tvar slotName = void 0;\n\t\tvar node = void 0;\n\t\tvar i = iframes.length;\n\t\n\t\t// Figure out which iframe DOM node we have the window for\n\t\twhile (i--) {\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (iframes[i].contentWindow === iframeWindow) {\n\t\t\t\tnode = iframes[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t/* istanbul ignore else  */\n\t\tif (node) {\n\t\t\t// find the closest parent with a data-o-ads-name attribute, that's our slot name\n\t\t\twhile (node.parentNode) {\n\t\t\t\tslotName = node.getAttribute('data-o-ads-name');\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (slotName) {\n\t\t\t\t\treturn slotName;\n\t\t\t\t}\n\t\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\t\t}\n\t\n\t\treturn false;\n\t};\n\t\n\tmodule.exports.buildObjectFromArray = function buildObjectFromArray(targetObject) {\n\t\treturn targetObject.reduce(function (prev, data) {\n\t\t\tprev[data.key] = data.value;\n\t\t\treturn prev;\n\t\t}, {});\n\t};\n\t\n\textend(module.exports, __webpack_require__(95));\n\textend(module.exports, __webpack_require__(96));\n\textend(module.exports, __webpack_require__(97));\n\tmodule.exports.responsive = __webpack_require__(98);\n\tmodule.exports.timers = __webpack_require__(102)();\n\tmodule.exports.queue = __webpack_require__(103);\n\tmodule.exports.log = __webpack_require__(104);\n\tcurryIsMethods(module.exports);\n\n/***/ },\n/* 95 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * Utility methods for reading.writing cookie. Inspired by the jQuery Cookie plugin (https://github.com/carhartl/jquery-cookie).\n\t * @author Origami Advertising, origami.advertising@ft.com\n\t * @module utils/cookie\n\t * @see utils\n\t */\n\t\n\tvar utils = __webpack_require__(94);\n\tvar pluses = /\\+/g;\n\tvar today = new Date();\n\t\n\tfunction raw(s) {\n\t\treturn s;\n\t}\n\t\n\tfunction decoded(s) {\n\t\treturn decodeURIComponent(s.replace(pluses, ' '));\n\t}\n\t\n\t/*\n\t*\tRead or write a cookie\n\t* @exports utils/cookie\n\t* @param {string} key the name of the cookie to be read/written\n\t* @param {string} value The value to set to the written cookie (if param is missing the cookie will be read)\n\t* @param {object} options Expires,\n\t*/\n\tvar config = module.exports.cookie = function (key, value, options) {\n\t\t// write\n\t\tif (value !== undefined) {\n\t\t\toptions = utils.extend({}, config.defaults, options);\n\t\n\t\t\tif (value === null) {\n\t\t\t\toptions.expires = -1;\n\t\t\t}\n\t\n\t\t\tif (typeof options.expires === 'number') {\n\t\t\t\tvar days = options.expires;\n\t\t\t\tvar t = options.expires = new Date();\n\t\t\t\tt.setDate(t.getDate() + days);\n\t\t\t}\n\t\n\t\t\tvalue = config.json ? JSON.stringify(value) : String(value);\n\t\t\tvalue = config.raw ? value : encodeURIComponent(value);\n\t\t\tif (!!options.expires && options.expires.valueOf() - today.valueOf() < 0) {\n\t\t\t\tdelete utils.cookies[encodeURIComponent(key)];\n\t\t\t} else {\n\t\t\t\tutils.cookies[encodeURIComponent(key)] = value;\n\t\t\t}\n\t\n\t\t\treturn document.cookie = [encodeURIComponent(key), '=', value, options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n\t\t\toptions.path ? '; path=' + options.path : '', options.domain ? '; domain=' + options.domain : '', options.secure ? '; secure' : ''].join('');\n\t\t}\n\t\n\t\t// read\n\t\tvar decode = config.raw ? raw : decoded;\n\t\tvar cookie = utils.cookies[encodeURIComponent(key)];\n\t\tif (!!cookie || cookie === '') {\n\t\t\treturn config.json ? JSON.parse(decode(cookie)) : decode(cookie);\n\t\t}\n\t\n\t\treturn null;\n\t};\n\t\n\tconfig.defaults = {};\n\t\n\t/*\n\t* Delete a cookie\n\t* @exports utils/cookie/removeCookie\n\t* @param {string} name The cookie's name\n\t* @param {object} options see options above\n\t*/\n\tmodule.exports.removeCookie = function (key, options) {\n\t\tif (module.exports.cookie(key) !== null) {\n\t\t\tmodule.exports.cookie(key, null, options);\n\t\t\treturn true;\n\t\t}\n\t\n\t\treturn false;\n\t};\n\t\n\t/*\n\t* Get the regex required to parse values from a cookie\n\t* @private\n\t* @param {string} name The cookie's name\n\t* @param {string} param The parameter's name\n\t* @return {string|undefined}\n\t*/\n\tfunction getRegExp(name, param) {\n\t\tvar re = void 0;\n\t\n\t\tvar formats = {\n\t\t\t\"AYSC\": \"underscore\",\n\t\t\t\"FT_U\": \"underscoreEquals\",\n\t\t\t\"FT_Remember\": \"colonEquals\",\n\t\t\t\"FT_User\": \"colonEquals\",\n\t\t\t\"FTQA\": \"commaEquals\"\n\t\t};\n\t\n\t\tswitch (formats[name]) {\n\t\t\tcase \"underscore\":\n\t\t\t\tre = '_' + param + '([^_]*)_';\n\t\t\t\tbreak;\n\t\t\tcase \"underscoreEquals\":\n\t\t\t\tre = '_' + param + '=([^_]*)_';\n\t\t\t\tbreak;\n\t\t\tcase \"colonEquals\":\n\t\t\t\tre = ':' + param + '=([^:]*)';\n\t\t\t\tbreak;\n\t\t\tcase \"commaEquals\":\n\t\t\t\tre = param + '=([^,]*)';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tre = /((.|\\n)*)/; // match everything\n\t\t\t\tbreak;\n\t\t}\n\t\treturn new RegExp(re);\n\t}\n\t\n\t/*\n\t* Get a parameter from a named cookie\n\t* @exports utils/cookie/getCookieParam\n\t* @param {string} name The cookie's name\n\t* @param {string} param The parameter's name\n\t* @return {string|undefined}\n\t*/\n\tmodule.exports.getCookieParam = function (name, param) {\n\t\tvar matches = void 0;\n\t\n\t\tvar wholeValue = module.exports.cookie(name) || \"\";\n\t\t/* istanbul ignore else  */\n\t\tif (param) {\n\t\t\tmatches = wholeValue.match(getRegExp(name, param));\n\t\t}\n\t\n\t\treturn matches && matches.length ? matches[1] : undefined;\n\t};\n\t\n\t/*\n\t* Parse document.cookie into an object for easier reading\n\t* @name cookies\n\t* @member cookie\n\t*/\n\tmodule.exports.cookies = utils.hash(document.cookie, ';', '=');\n\n/***/ },\n/* 96 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/**\n\t * Utility methods for o-ads events. Methods defined here are added to the utils object not the utils.event object.\n\t * @author Origami Advertising, origami.advertising@ft.com\n\t * @module utils/events\n\t * @see utils\n\t */\n\t\n\t/**\n\t* Broadscasts an o-ads event\n\t* @param {string} name The name of the cookie to be read/written\n\t* @param {object} data The value to set to the written cookie (if param is missing the cookie will be read)\n\t* @param {HTMLElement} target The element to attach the event listener to\n\t*/\n\tmodule.exports.broadcast = broadcast;\n\tfunction broadcast(name, data, target) {\n\t\t/* istanbul ignore next: ignore the final fallback as hard trigger */\n\t\ttarget = target || document.body || document.documentElement;\n\t\tname = \"oAds.\" + name;\n\t\tvar opts = {\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t\tdetail: data\n\t\t};\n\t\ttarget.dispatchEvent(new CustomEvent(name, opts));\n\t}\n\t\n\t/**\n\t* Sets an event listener for an oAds event\n\t* @param {string} name The name of the cookie to be read/written\n\t* @param {function} callback The value to set to the written cookie (if param is missing the cookie will be read)\n\t* @param {HTMLElement} target The element to attach the event listener to\n\t*/\n\t\n\tmodule.exports.on = on;\n\tfunction on(name, callback, target) {\n\t\tname = \"oAds.\" + name;\n\t\t/* istanbul ignore next: ignore the final fallback as hard trigger */\n\t\ttarget = target || document.body || document.documentElement;\n\t\ttarget.addEventListener(name, callback);\n\t}\n\t\n\t/**\n\t* Sets a one time event listener for an oAds event\n\t* @param {string} name The name of the cookie to be read/written\n\t* @param {function} callback The value to set to the written cookie (if param is missing the cookie will be read)\n\t* @param {HTMLElement} target The element to attach the event listener to\n\t*/\n\tmodule.exports.once = once;\n\tfunction once(name, callback, target) {\n\t\tvar handler = function handler(event) {\n\t\t\t/* istanbul ignore next: ignore the final fallback as hard trigger */\n\t\t\tvar targ = event.target || event.srcElement;\n\t\t\ttarg.removeEventListener(name = \"oAds.\" + name, callback);\n\t\t\tif (callback) {\n\t\t\t\tcallback(event);\n\t\n\t\t\t\t// we set callback to null so if for some reason the listener isn't removed the callback will still only be called once\n\t\t\t\tcallback = null;\n\t\t\t}\n\t\t};\n\t\ton(name, handler, target);\n\t}\n\n/***/ },\n/* 97 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t * Utility methods for postMessage api.\n\t * @author Origami Advertising, origami.advertising@ft.com\n\t * @module utils\n\t */\n\t\n\tmodule.exports.messenger = {\n\t\tpost: function post(message, source) {\n\t\t\tmessage = typeof message === 'string' ? message : JSON.stringify(message);\n\t\t\tsource = arguments[1] || window.top;\n\t\t\tsource.postMessage(message, '*');\n\t\t},\n\t\tparse: function parse(message) {\n\t\n\t\t\t// Check whether the message looks like an object before trying to parse it\n\t\t\tif (typeof message !== 'string' || message[0] !== '{') {\n\t\t\t\treturn message;\n\t\t\t}\n\t\n\t\t\t// try returning the parsed object\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(message);\n\t\t\t}\n\t\t\t// return the original message\n\t\t\tcatch (e) {\n\t\t\t\treturn message;\n\t\t\t}\n\t\t}\n\t};\n\n/***/ },\n/* 98 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar callback = void 0;\n\tvar breakpoints = void 0;\n\tvar current = void 0;\n\tvar utils = __webpack_require__(94);\n\tvar oViewport = __webpack_require__(99);\n\t\n\tfunction getNearestBreakpoint() {\n\t\tvar winner = void 0;\n\t\tvar dims = oViewport.getSize(true);\n\t\tfunction findCurrentBreakpoint(breakpoint) {\n\t\t\tvar breakpointDims = breakpoints[breakpoint];\n\t\t\tif (dims.width >= breakpointDims[0] && dims.height >= breakpointDims[1]) {\n\t\t\t\tif (!winner || breakpointDims[0] >= breakpoints[winner][0]) {\n\t\t\t\t\twinner = breakpoint;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tObject.keys(breakpoints).forEach(findCurrentBreakpoint);\n\t\n\t\treturn winner;\n\t}\n\t\n\tfunction fire() {\n\t\tvar winner = getNearestBreakpoint();\n\t\n\t\tif (current !== winner) {\n\t\t\tsetCurrent(winner);\n\t\t\tcallback(winner);\n\t\t}\n\t}\n\t\n\tfunction setCurrent(name) {\n\t\tcurrent = name;\n\t}\n\t\n\tfunction getCurrent() {\n\t\treturn current;\n\t}\n\t\n\tfunction init(brps, cb) {\n\t\n\t\tif (!utils.isFunction(cb)) {\n\t\t\t// must have a call back function\n\t\t\treturn false;\n\t\t}\n\t\n\t\tbreakpoints = brps;\n\t\tcallback = cb;\n\t\n\t\tsetCurrent(getNearestBreakpoint());\n\t\tdocument.body.addEventListener('oViewport.orientation', fire);\n\t\tdocument.body.addEventListener('oViewport.resize', fire);\n\t\toViewport.listenTo('orientation');\n\t\toViewport.listenTo('resize');\n\t\n\t\treturn getCurrent();\n\t}\n\t\n\tmodule.exports = init;\n\tmodule.exports.getCurrent = getCurrent;\n\tmodule.exports.setThrottleInterval = oViewport.setThrottleInterval;\n\n/***/ },\n/* 99 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(100);\n\n/***/ },\n/* 100 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// let debug;\n\tvar utils = __webpack_require__(101);\n\tvar throttle = utils.throttle;\n\tvar debounce = utils.debounce;\n\t\n\tvar listeners = {};\n\tvar intervals = {\n\t\tresize: 100,\n\t\torientation: 100,\n\t\tvisibility: 100,\n\t\tscroll: 100\n\t};\n\t\n\tfunction setThrottleInterval(eventType, interval) {\n\t\tif (typeof arguments[0] === 'number') {\n\t\t\tsetThrottleInterval('scroll', arguments[0]);\n\t\t\tsetThrottleInterval('resize', arguments[1]);\n\t\t\tsetThrottleInterval('orientation', arguments[2]);\n\t\t\tsetThrottleInterval('visibility', arguments[3]);\n\t\t} else if (interval) {\n\t\t\tintervals[eventType] = interval;\n\t\t}\n\t}\n\t\n\tfunction listenToResize() {\n\t\tif (listeners.resize) {\n\t\t\treturn;\n\t\t}\n\t\tvar eventType = 'resize';\n\t\tvar handler = debounce(function (ev) {\n\t\t\tutils.broadcast('resize', {\n\t\t\t\tviewport: utils.getSize(),\n\t\t\t\toriginalEvent: ev\n\t\t\t});\n\t\t}, intervals.resize);\n\t\n\t\twindow.addEventListener(eventType, handler);\n\t\tlisteners.resize = {\n\t\t\teventType: eventType,\n\t\t\thandler: handler\n\t\t};\n\t}\n\t\n\tfunction listenToOrientation() {\n\t\n\t\tif (listeners.orientation) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar eventType = 'orientationchange';\n\t\tvar handler = debounce(function (ev) {\n\t\t\tutils.broadcast('orientation', {\n\t\t\t\tviewport: utils.getSize(),\n\t\t\t\torientation: utils.getOrientation(),\n\t\t\t\toriginalEvent: ev\n\t\t\t});\n\t\t}, intervals.orientation);\n\t\n\t\twindow.addEventListener(eventType, handler);\n\t\tlisteners.orientation = {\n\t\t\teventType: eventType,\n\t\t\thandler: handler\n\t\t};\n\t}\n\t\n\tfunction listenToVisibility() {\n\t\n\t\tif (listeners.visibility) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar eventType = utils.detectVisiblityAPI().eventType;\n\t\tvar handler = debounce(function (ev) {\n\t\t\tutils.broadcast('visibility', {\n\t\t\t\thidden: utils.getVisibility(),\n\t\t\t\toriginalEvent: ev\n\t\t\t});\n\t\t}, intervals.visibility);\n\t\n\t\twindow.addEventListener(eventType, handler);\n\t\n\t\tlisteners.visibility = {\n\t\t\teventType: eventType,\n\t\t\thandler: handler\n\t\t};\n\t}\n\t\n\tfunction listenToScroll() {\n\t\n\t\tif (listeners.scroll) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar eventType = 'scroll';\n\t\tvar handler = throttle(function (ev) {\n\t\t\tvar scrollPos = utils.getScrollPosition();\n\t\t\tutils.broadcast('scroll', {\n\t\t\t\tviewport: utils.getSize(),\n\t\t\t\tscrollHeight: scrollPos.height,\n\t\t\t\tscrollLeft: scrollPos.left,\n\t\t\t\tscrollTop: scrollPos.top,\n\t\t\t\tscrollWidth: scrollPos.width,\n\t\t\t\toriginalEvent: ev\n\t\t\t});\n\t\t}, intervals.scroll);\n\t\n\t\twindow.addEventListener(eventType, handler);\n\t\tlisteners.scroll = {\n\t\t\teventType: eventType,\n\t\t\thandler: handler\n\t\t};\n\t}\n\t\n\tfunction listenTo(eventType) {\n\t\tif (eventType === 'resize' || eventType === 'all') {\n\t\t\tlistenToResize();\n\t\t}\n\t\n\t\tif (eventType === 'scroll' || eventType === 'all') {\n\t\t\tlistenToScroll();\n\t\t}\n\t\n\t\tif (eventType === 'orientation' || eventType === 'all') {\n\t\t\tlistenToOrientation();\n\t\t}\n\t\n\t\tif (eventType === 'visibility' || eventType === 'all') {\n\t\t\tlistenToVisibility();\n\t\t}\n\t}\n\t\n\tfunction stopListeningTo(eventType) {\n\t\tif (eventType === 'all') {\n\t\t\tObject.keys(listeners).forEach(stopListeningTo);\n\t\t} else if (listeners[eventType]) {\n\t\t\twindow.removeEventListener(listeners[eventType].eventType, listeners[eventType].handler);\n\t\t\tdelete listeners[eventType];\n\t\t}\n\t}\n\t\n\tmodule.exports = {\n\t\tdebug: function debug() {\n\t\t\t// debug = true;\n\t\t\tutils.debug();\n\t\t},\n\t\tlistenTo: listenTo,\n\t\tstopListeningTo: stopListeningTo,\n\t\tsetThrottleInterval: setThrottleInterval,\n\t\tgetOrientation: utils.getOrientation,\n\t\tgetSize: utils.getSize,\n\t\tgetScrollPosition: utils.getScrollPosition\n\t};\n\n/***/ },\n/* 101 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/* jshint devel: true */\n\t\n\tvar _debug = void 0;\n\t\n\tfunction broadcast(eventType, data, target) {\n\t\ttarget = target || document.body;\n\t\n\t\tif (_debug) {\n\t\t\tconsole.log('o-viewport', eventType, data);\n\t\t}\n\t\n\t\ttarget.dispatchEvent(new CustomEvent('oViewport.' + eventType, {\n\t\t\tdetail: data,\n\t\t\tbubbles: true\n\t\t}));\n\t}\n\t\n\tfunction getHeight(ignoreScrollbars) {\n\t\treturn ignoreScrollbars ? document.documentElement.clientHeight : Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\t}\n\t\n\tfunction getWidth(ignoreScrollbars) {\n\t\treturn ignoreScrollbars ? document.documentElement.clientWidth : Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\t}\n\t\n\tfunction getSize(ignoreScrollbars) {\n\t\treturn {\n\t\t\theight: module.exports.getHeight(ignoreScrollbars),\n\t\t\twidth: module.exports.getWidth(ignoreScrollbars)\n\t\t};\n\t}\n\t\n\tfunction getScrollPosition() {\n\t\tvar de = document.documentElement;\n\t\tvar db = document.body;\n\t\n\t\t// adapted from https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY\n\t\tvar isCSS1Compat = (document.compatMode || '') === 'CSS1Compat';\n\t\n\t\tvar ieX = isCSS1Compat ? de.scrollLeft : db.scrollLeft;\n\t\tvar ieY = isCSS1Compat ? de.scrollTop : db.scrollTop;\n\t\treturn {\n\t\t\theight: db.scrollHeight,\n\t\t\twidth: db.scrollWidth,\n\t\t\tleft: window.pageXOffset || window.scrollX || ieX,\n\t\t\ttop: window.pageYOffset || window.scrollY || ieY\n\t\t};\n\t}\n\t\n\tfunction getOrientation() {\n\t\tvar orientation = window.screen.orientation || window.screen.mozOrientation || window.screen.msOrientation || undefined;\n\t\tif (orientation) {\n\t\t\treturn typeof orientation === 'string' ? orientation.split('-')[0] : orientation.type.split('-')[0];\n\t\t} else if (window.matchMedia) {\n\t\t\treturn window.matchMedia('(orientation: portrait)').matches ? 'portrait' : 'landscape';\n\t\t} else {\n\t\t\treturn getHeight() >= getWidth() ? 'portrait' : 'landscape';\n\t\t}\n\t}\n\t\n\tfunction detectVisiblityAPI() {\n\t\tvar hiddenName = void 0;\n\t\tvar eventType = void 0;\n\t\tif (typeof document.hidden !== 'undefined') {\n\t\t\thiddenName = 'hidden';\n\t\t\teventType = 'visibilitychange';\n\t\t} else if (typeof document.mozHidden !== 'undefined') {\n\t\t\thiddenName = 'mozHidden';\n\t\t\teventType = 'mozvisibilitychange';\n\t\t} else if (typeof document.msHidden !== 'undefined') {\n\t\t\thiddenName = 'msHidden';\n\t\t\teventType = 'msvisibilitychange';\n\t\t} else if (typeof document.webkitHidden !== 'undefined') {\n\t\t\thiddenName = 'webkitHidden';\n\t\t\teventType = 'webkitvisibilitychange';\n\t\t}\n\t\n\t\treturn {\n\t\t\thiddenName: hiddenName,\n\t\t\teventType: eventType\n\t\t};\n\t}\n\t\n\tfunction getVisibility() {\n\t\tvar hiddenName = detectVisiblityAPI().hiddenName;\n\t\treturn document[hiddenName];\n\t}\n\t\n\tfunction debounce(func, wait) {\n\t\tvar timeout = void 0;\n\t\treturn function () {\n\t\t\tvar _this = this;\n\t\n\t\t\tvar args = arguments;\n\t\t\tvar later = function later() {\n\t\t\t\ttimeout = null;\n\t\t\t\tfunc.apply(_this, args);\n\t\t\t};\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t};\n\t};\n\t\n\tfunction throttle(func, wait) {\n\t\tvar timeout = void 0;\n\t\treturn function () {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tif (timeout) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar args = arguments;\n\t\t\tvar later = function later() {\n\t\t\t\ttimeout = null;\n\t\t\t\tfunc.apply(_this2, args);\n\t\t\t};\n\t\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t};\n\t};\n\t\n\tmodule.exports = {\n\t\tdebug: function debug() {\n\t\t\t_debug = true;\n\t\t},\n\t\tbroadcast: broadcast,\n\t\tgetWidth: getWidth,\n\t\tgetHeight: getHeight,\n\t\tgetSize: getSize,\n\t\tgetScrollPosition: getScrollPosition,\n\t\tgetVisibility: getVisibility,\n\t\tgetOrientation: getOrientation,\n\t\tdetectVisiblityAPI: detectVisiblityAPI,\n\t\tthrottle: throttle,\n\t\tdebounce: debounce\n\t};\n\n/***/ },\n/* 102 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction now() {\n\t\treturn new Date().valueOf();\n\t}\n\t\n\tfunction Timer(interval, fn, maxTicks, opts) {\n\t\tthis.interval = (parseFloat(interval) || 1) * 1000;\n\t\tthis.maxTicks = parseInt(maxTicks, 10) || 0;\n\t\tthis.fn = fn;\n\t\tthis.ticks = 0;\n\t\tthis.opts = opts || {};\n\t\tthis.start();\n\t\treturn this;\n\t}\n\t\n\tTimer.prototype.tick = function () {\n\t\tvar Timer = this;\n\t\treturn function () {\n\t\t\tTimer.ticks++;\n\t\t\tTimer.fn.apply(Timer);\n\t\t\tTimer.lastTick = now();\n\t\n\t\t\tif (Timer.ticks === Timer.maxTicks) {\n\t\t\t\tTimer.stop();\n\t\t\t}\n\t\t};\n\t};\n\t\n\tTimer.prototype.start = function () {\n\t\tthis.startTime = this.lastTick = now();\n\t\tthis.id = setInterval(this.tick(), this.interval);\n\t\treturn true;\n\t};\n\t\n\tTimer.prototype.resume = function () {\n\t\tif (this.timeLeft) {\n\t\t\tthis.id = setInterval(this.tick(), this.timeLeft);\n\t\t\tdelete this.timeLeft;\n\t\t\treturn true;\n\t\t}\n\t\n\t\treturn false;\n\t};\n\t\n\tTimer.prototype.pause = function () {\n\t\tif (this.id) {\n\t\t\tthis.timeLeft = this.interval - (now() - this.lastTick);\n\t\t\tthis.kill();\n\t\t\treturn true;\n\t\t}\n\t\n\t\treturn false;\n\t};\n\t\n\tTimer.prototype.reset = function () {\n\t\tif (!!this.startTime) {\n\t\t\tthis.startTime = now();\n\t\t\tthis.ticks = 1; // ticks are set to 1 because we're about to execute the first tick again\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\t\n\tTimer.prototype.kill = function () {\n\t\tif (this.id) {\n\t\t\tclearInterval(this.id);\n\t\t\tdelete this.id;\n\t\t\treturn true;\n\t\t}\n\t\n\t\treturn false;\n\t};\n\t\n\tTimer.prototype.stop = function () {\n\t\tif (this.id || this.timeLeft) {\n\t\t\tthis.ticks = 0;\n\t\t\tthis.kill();\n\t\t\tdelete this.timeLeft;\n\t\t\treturn true;\n\t\t}\n\t\n\t\treturn false;\n\t};\n\t\n\tfunction Timers() {\n\t\tif (!(this instanceof Timers)) {\n\t\t\treturn new Timers();\n\t\t}\n\t\n\t\tvar scope = this;\n\t\tthis.timers = [];\n\t\n\t\tfunction all(method) {\n\t\t\treturn function () {\n\t\t\t\tvar j = scope.timers.length;\n\t\n\t\t\t\tfor (var i = 0; i < j; i++) {\n\t\t\t\t\tscope.timers[i][method]();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\n\t\tfunction hasExecutionPaused(fn) {\n\t\t\treturn function () {\n\t\t\t\tvar Timer = this;\n\t\t\t\tvar time = now() - Timer.lastTick - Timer.interval;\n\t\t\t\tvar threshold = Timer.interval * 1.5;\n\t\n\t\t\t\tif (threshold < time) {\n\t\t\t\t\tTimer.reset();\n\t\t\t\t}\n\t\n\t\t\t\tfn.apply(Timer);\n\t\t\t};\n\t\t}\n\t\n\t\tfunction create(interval, fn, maxTicks, opts) {\n\t\t\tif (opts && opts.reset) {\n\t\t\t\tfn = hasExecutionPaused(fn);\n\t\t\t}\n\t\n\t\t\tvar timer = new Timer(interval, fn, maxTicks, opts);\n\t\t\tscope.timers.push(timer);\n\t\t\treturn timer;\n\t\t}\n\t\n\t\treturn {\n\t\t\tcreate: create,\n\t\t\tresumeall: all('resume'),\n\t\t\tpauseall: all('pause'),\n\t\t\tstopall: all('stop')\n\t\t};\n\t}\n\t\n\tmodule.exports = Timers;\n\n/***/ },\n/* 103 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tfunction Queue(processor) {\n\t\tif (!(this instanceof Queue)) {\n\t\t\treturn new Queue(processor);\n\t\t}\n\t\n\t\tthis.items = [];\n\t\tthis.processed = false;\n\t\tthis.processor = processor || function () {};\n\t}\n\t\n\tQueue.prototype.setProcessor = function (processor) {\n\t\tthis.processor = processor;\n\t\treturn this;\n\t};\n\t\n\tQueue.prototype.process = function () {\n\t\tvar _this = this;\n\t\n\t\tthis.processed = true;\n\t\tthis.items.forEach(function (item) {\n\t\t\t_this.processor(item);\n\t\t});\n\t\n\t\treturn this;\n\t};\n\t\n\tQueue.prototype.add = function (item) {\n\t\tif (this.processed === true) {\n\t\t\tthis.processor(item);\n\t\t} else {\n\t\t\tthis.items.push(item);\n\t\t}\n\t\n\t\treturn this;\n\t};\n\t\n\tmodule.exports = Queue;\n\n/***/ },\n/* 104 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * Utility methods for logging.\n\t * @author Origami Advertising, origami.advertising@ft.com\n\t * @module utils/log\n\t * @see utils\n\t */\n\t\n\t/* jshint devel: true */\n\t\n\tmodule.exports = log;\n\t\n\t/**\n\t * Safe logger for the browser\n\t * @exports utils/log\n\t * @param {string} type Sets the type of log message log, warn, error or info, if not set to one of these values log will be used\n\t * @param {any} args the arguments to be passed to console[type]\n\t */\n\tfunction log() {\n\t\tvar type = void 0;\n\t\tvar args = void 0;\n\t\tvar argsIndex = void 0;\n\t\tif ('log warn error info'.indexOf(arguments[0]) === -1) {\n\t\t\ttype = 'log';\n\t\t\targsIndex = 0;\n\t\t} else {\n\t\t\ttype = arguments[0];\n\t\t\targsIndex = 1;\n\t\t}\n\t\n\t\targs = [].slice.call(arguments, argsIndex);\n\t\n\t\tif (log.isOn(type)) {\n\t\t\twindow.console[type].apply(window.console, args);\n\t\t}\n\t}\n\t\n\t/**\n\t * Determine if debug logging is on and if the type if supported\n\t * @param {string} type\n\t */\n\tmodule.exports.isOn = function (type) {\n\t\t/* istanbul ignore else  */\n\t\tvar debug = localStorage.getItem('oAds') || location.search.indexOf('DEBUG=OADS') !== -1;\n\t\treturn debug && window.console && window.console[type];\n\t};\n\t\n\t/**\n\t * Log a warning message\n\t */\n\tmodule.exports.warn = function () {\n\t\tvar args = ['warn'].concat([].slice.call(arguments, 0));\n\t\tlog.apply(null, args);\n\t};\n\t\n\t/**\n\t * Log an error message\n\t */\n\tmodule.exports.error = function () {\n\t\tvar args = ['error'].concat([].slice.call(arguments, 0));\n\t\tlog.apply(null, args);\n\t};\n\t\n\t/**\n\t * Log an info message\n\t */\n\tmodule.exports.info = function () {\n\t\tvar args = ['info'].concat([].slice.call(arguments, 0));\n\t\tlog.apply(null, args);\n\t};\n\t\n\t/**\n\t * Start a collapsed group\n\t * @param {string} group the name of the group, defaults to o-ads\n\t */\n\tmodule.exports.start = function (group) {\n\t\tif (!log.isOn('groupCollapsed')) {\n\t\t\treturn;\n\t\t}\n\t\n\t\twindow.console.groupCollapsed(group || 'o-ads');\n\t};\n\t\n\t/**\n\t * End a collapsed group\n\t */\n\tmodule.exports.end = function () {\n\t\tif (!log.isOn('groupEnd')) {\n\t\t\treturn;\n\t\t}\n\t\n\t\twindow.console.groupEnd();\n\t};\n\t\n\tmodule.exports.table = function (data, columns) {\n\t\tif (log.isOn('log') && window.console) {\n\t\t\tif (console.table) {\n\t\t\t\tconsole.table(data, columns);\n\t\t\t} else {\n\t\t\t\tconsole.log(data);\n\t\t\t}\n\t\t}\n\t};\n\t\n\tmodule.exports.attributeTable = function (object, columns) {\n\t\tvar utils = __webpack_require__(94);\n\t\tif (log.isOn('log') && window.console) {\n\t\t\tif (object && console.table) {\n\t\t\t\tvar data = Object.keys(object).map(function (item) {\n\t\t\t\t\tvar val = void 0;\n\t\t\t\t\tif (utils.isArray(object[item]) || utils.isObject(object[item])) {\n\t\t\t\t\t\tval = JSON.stringify(object[item]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tval = object[item];\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkey: item,\n\t\t\t\t\t\tvalue: val\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tconsole.table(data, columns);\n\t\t\t} else {\n\t\t\t\tconsole.log(object);\n\t\t\t}\n\t\t}\n\t};\n\n/***/ },\n/* 105 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar utils = __webpack_require__(94);\n\tvar config = __webpack_require__(93);\n\tvar Slot = __webpack_require__(106);\n\t\n\tvar screensize = null;\n\t\n\t/**\n\t* The Slots instance tracks all ad slots on the page\n\t* configures global page events used by a slot and\n\t* provides utlity methods that act on all slots\n\t* @constructor\n\t*/\n\tfunction Slots() {}\n\t\n\tfunction invokeMethodOnSlots(names, method, callback) {\n\t\tvar slots = [];\n\t\tnames = names || Object.keys(this);\n\t\n\t\t/* istanbul ignore else\t*/\n\t\tif (utils.isNonEmptyString(names)) {\n\t\t\tslots.push(names);\n\t\t} else if (utils.isArray(names)) {\n\t\t\tslots = names;\n\t\t}\n\t\n\t\tslots.forEach(run.bind(null, this, method));\n\t\n\t\tif (utils.isFunction(callback)) {\n\t\t\tcallback.call(this, slots);\n\t\t}\n\t\n\t\treturn this;\n\t}\n\t\n\t/*\n\t* Either run a method or fire an event on the named slot.\n\t* @private\n\t* @param slots the slots object\n\t*/\n\tfunction run(slots, action, name) {\n\t\tvar slot = slots[name];\n\t\tif (slot) {\n\t\t\tif (utils.isFunction(slot[action])) {\n\t\t\t\tslot[action]();\n\t\t\t} else {\n\t\t\t\tif (utils.isFunction(slot.fire)) {\n\t\t\t\t\tslot.fire(action);\n\t\t\t\t} else {\n\t\t\t\t\tutils.log.warn('Attempted to %s on a non-slot %s', action, name);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tutils.log.warn('Attempted to %s non-existant slot %s', action, name);\n\t\t}\n\t}\n\t\n\tfunction findFormatBySize(size) {\n\t\tif (!size) {\n\t\t\treturn false;\n\t\t}\n\t\tvar formats = config('formats');\n\t\tfor (var prop in formats) {\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tif (formats.hasOwnProperty(prop)) {\n\t\n\t\t\t\tvar sizes = formats[prop].sizes;\n\t\t\t\tsizes = utils.isArray(sizes[0]) ? sizes : [sizes];\n\t\t\t\tvar match = sizes.filter(function (s) {\n\t\t\t\t\treturn s[0] === parseInt(size[0]) && s[1] === parseInt(size[1]);\n\t\t\t\t});\n\t\t\t\tif (match.length) {\n\t\t\t\t\treturn prop;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t* Given a slot name or an array of slot names will collapse the slots using the collapse method on the slot\n\t*/\n\tSlots.prototype.collapse = function (names) {\n\t\treturn invokeMethodOnSlots.call(this, names, 'collapse');\n\t};\n\t\n\t/**\n\t* Given a slot name or an array of slot names will uncollapse the slots using the uncollapse method on the slot\n\t*/\n\tSlots.prototype.uncollapse = function (names) {\n\t\treturn invokeMethodOnSlots.call(this, names, 'uncollapse');\n\t};\n\t\n\t/**\n\t* Given a slot name or an array of slot names of slotnames will refresh the slots using the refresh method on the slot\n\t*/\n\tSlots.prototype.refresh = function (names) {\n\t\treturn invokeMethodOnSlots.call(this, names, 'refresh');\n\t};\n\t\n\t/**\n\t* Given a slot name or an array of slot names will clear the slots using the clear method on the slot\n\t*/\n\tSlots.prototype.clear = function (names) {\n\t\treturn invokeMethodOnSlots.call(this, names, 'clear');\n\t};\n\t\n\t/**\n\t* Given a slot name or an array of slot names will clear the slots using the clear method on the slot and remove the reference to the slot\n\t*/\n\tSlots.prototype.destroy = function (names) {\n\t\treturn invokeMethodOnSlots.call(this, names, 'clear', function (names) {\n\t\t\tvar _this = this;\n\t\n\t\t\tnames.forEach(function (name) {\n\t\t\t\t_this[name] = null;\n\t\t\t\tdelete _this[name];\n\t\t\t});\n\t\t});\n\t};\n\t\n\t/**\n\t* Given a slot name will submit a delayed impression for the slot\n\t*/\n\tSlots.prototype.submitImpression = function (name) {\n\t\treturn invokeMethodOnSlots.call(this, name, 'submitImpression');\n\t};\n\t\n\t/**\n\t* Confirms a container in the page exists and creates a Slot object\n\t*/\n\tSlots.prototype.initSlot = function (container) {\n\t\t// if container is a string this is a legacy implementation using ids\n\t\t// find the element and remove the ID in favour of a data attribute\n\t\tif (utils.isString(container)) {\n\t\t\tcontainer = document.getElementById(container) || document.querySelector('[data-o-ads-name=\"' + container + '\"]');\n\t\t\tif (container && container.id) {\n\t\t\t\tcontainer.setAttribute('data-o-ads-name', container.id);\n\t\t\t\tcontainer.removeAttribute('id');\n\t\t\t}\n\t\t}\n\t\n\t\t// if not an element or we can't find it in the DOM exit\n\t\tif (!utils.isElement(container)) {\n\t\t\tutils.log.error('slot container must be an element!', container);\n\t\t\treturn false;\n\t\t}\n\t\n\t\t// add the aria hidden attribute\n\t\tcontainer.setAttribute('aria-hidden', 'true');\n\t\t// pass the method to retrieve or create the single IntersectionObserver instance\n\t\tvar slot = new Slot(container, screensize, this.initLazyLoading.bind(this));\n\t\t/* istanbul ignore else\t*/\n\t\tif (slot && !this[slot.name]) {\n\t\t\tthis[slot.name] = slot;\n\t\t\tslot.fire('ready');\n\t\t} else if (this[slot.name]) {\n\t\t\tutils.log.error('slot %s is already defined!', slot.name);\n\t\t}\n\t\n\t\treturn slot;\n\t};\n\t\n\tSlots.prototype.initRefresh = function () {\n\t\tif (config('flags').refresh && config('refresh')) {\n\t\t\tvar data = config('refresh');\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tif (data.time && !data.inview) {\n\t\t\t\tthis.timers.refresh = utils.timers.create(data.time, this.refresh.bind(this), data.max || 0);\n\t\t\t}\n\t\t}\n\t\n\t\treturn this;\n\t};\n\t\n\t/*\n\t*\tlistens for the rendered event from a slot and fires the complete event,\n\t* after extending the slot with information from the server.\n\t*/\n\tSlots.prototype.initRendered = function () {\n\t\tutils.on('rendered', function (slots, event) {\n\t\t\tvar slot = slots[event.detail.name];\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tif (slot) {\n\t\t\t\tutils.extend(slot[slot.server], event.detail[slot.server]);\n\t\t\t\tvar size = event.detail.gpt.size;\n\t\t\t\tvar format = findFormatBySize(size);\n\t\t\t\tslot.setFormatLoaded(format);\n\t\t\t\tslot.maximise(size);\n\t\t\t\tslot.fire('complete', event.detail);\n\t\t\t}\n\t\t}.bind(null, this));\n\t\treturn this;\n\t};\n\t\n\t/*\n\t* if responsive configuration exists listen for breakpoint changes\n\t*/\n\tSlots.prototype.initResponsive = function () {\n\t\tvar breakpoints = config('responsive');\n\t\t/* istanbul ignore else\t*/\n\t\tif (utils.isObject(breakpoints)) {\n\t\t\tscreensize = utils.responsive(breakpoints, onBreakpointChange.bind(null, this));\n\t\t}\n\t\n\t\treturn this;\n\t};\n\t\n\t/*\n\t* called when a responsive breakpoint is crossed though window resizing or orientation change.\n\t*/\n\tfunction onBreakpointChange(slots, screensize) {\n\t\tslots.forEach(function (slot) {\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tif (slot) {\n\t\t\t\t// ADS-766 if format name is Responsive then we have requested a responsive creative and do not want to request new ads at different breakpoints\n\t\t\t\t/* istanbul ignore else\t*/\n\t\t\t\tvar isCurrentlyResponsive = slot.container && slot.container.getAttribute('data-o-ads-loaded') === 'Responsive';\n\t\t\t\tvar stillWantsResponsive = slot.sizes[screensize] && slot.sizes[screensize].filter(function (size) {\n\t\t\t\t\treturn findFormatBySize(size) === 'Responsive';\n\t\t\t\t}).length > 0;\n\t\n\t\t\t\tif (isCurrentlyResponsive && stillWantsResponsive) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tslot.screensize = screensize;\n\t\t\t\tslot.fire('breakpoint', { screensize: screensize });\n\t\t\t}\n\t\t});\n\t}\n\t\n\t/*\n\t* Initialise the postMessage API\n\t*/\n\tSlots.prototype.initPostMessage = function () {\n\t\t// Listen for messages coming from ads\n\t\twindow.addEventListener('message', pmHandler.bind(null, this), false);\n\t\n\t\tfunction pmHandler(slots, event) {\n\t\t\tvar data = utils.messenger.parse(event.data);\n\t\t\t/* istanbul ignore else\tdon't process messages with a non oAds type*/\n\t\t\tif (data.type && (/^oAds\\./.test(data.type) || /^touch/.test(data.type))) {\n\t\t\t\tvar _ret = function () {\n\t\t\t\t\tvar type = data.type.replace('oAds\\.', '');\n\t\t\t\t\tvar slot = data.name ? slots[data.name] : false;\n\t\t\t\t\tif (type === 'whoami' && event.source) {\n\t\n\t\t\t\t\t\tdocument.body.dispatchEvent(new CustomEvent('oAds.adIframeLoaded'));\n\t\n\t\t\t\t\t\tvar messageToSend = { type: 'oAds.youare' };\n\t\t\t\t\t\tvar slotName = utils.iframeToSlotName(event.source.window);\n\t\t\t\t\t\tslot = slots[slotName] || false;\n\t\n\t\t\t\t\t\tif (slot) {\n\t\t\t\t\t\t\tif (data.collapse) {\n\t\t\t\t\t\t\t\tslot.collapse();\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\tif (data.mastercompanion) {\n\t\t\t\t\t\t\t\t(function () {\n\t\t\t\t\t\t\t\t\tvar size = slot.gpt.size;\n\t\t\t\t\t\t\t\t\tvar format = findFormatBySize(size);\n\t\t\t\t\t\t\t\t\tslots.forEach(function (s) {\n\t\t\t\t\t\t\t\t\t\tif (s.companion && s.name !== slot.name) {\n\t\t\t\t\t\t\t\t\t\t\ts.fire('masterLoaded', slot);\n\t\t\t\t\t\t\t\t\t\t\ts.container.setAttribute('data-o-ads-master-loaded', format);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.customMessages && (0, _typeof3.default)(data.customMessages) === \"object\") {\n\t\t\t\t\t\t\t\tslot.fire('customMessages', data.customMessages);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (slot.disableSwipeDefault) {\n\t\t\t\t\t\t\t\tmessageToSend.disableDefaultSwipeHandler = true;\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\tmessageToSend.name = slotName;\n\t\t\t\t\t\t\tmessageToSend.sizes = slot.sizes;\n\t\n\t\t\t\t\t\t\tutils.messenger.post(messageToSend, event.source);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tutils.log.error('Message received from unidentified slot');\n\t\t\t\t\t\t\tutils.messenger.post(messageToSend, event.source);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!slot) {\n\t\t\t\t\t\t\tutils.log.error('Message received from unidentified slot');\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tv: void 0\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif (type === 'responsive') {\n\t\t\t\t\t\t\tslot.setResponsiveCreative(true);\n\t\t\t\t\t\t} else if (utils.isFunction(slot[type])) {\n\t\t\t\t\t\t\tslot[type]();\n\t\t\t\t\t\t} else if (/^touch/.test(data.type)) {\n\t\t\t\t\t\t\tslot.fire('touch', data);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdelete data.type;\n\t\t\t\t\t\t\tdelete data.name;\n\t\t\t\t\t\t\tslot.fire(type, data);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}();\n\t\n\t\t\t\tif ((typeof _ret === 'undefined' ? 'undefined' : (0, _typeof3.default)(_ret)) === \"object\") return _ret.v;\n\t\t\t}\n\t\t}\n\t};\n\t\n\tSlots.prototype.initLazyLoading = function (slotConfig) {\n\t\tvar lazyLoadingConfig = config('lazyLoad') || slotConfig;\n\t\t// If we don't already have an instance of the observer, and it is enabled globally or on a slot (force), then create one.\n\t\t/* istanbul ignore else\t*/\n\t\tif ('IntersectionObserver' in window && !this.lazyLoadObserver && !!lazyLoadingConfig) {\n\t\t\tvar onChange = function onChange(changes) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\t//Execute the changes in the order they appear on the page. This is because the top slot often determines what the lower slots display.\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tchanges.filter(function (a) {\n\t\t\t\t\treturn a.intersectionRect.height || a.intersectionRect.width || a.intersectionRect.top || a.intersectionRect.left;\n\t\t\t\t}).sort(function (a, b) {\n\t\t\t\t\treturn a.intersectionRect.top - b.intersectionRect.top;\n\t\t\t\t}).forEach(function (change) {\n\t\t\t\t\tvar slotName = change.target.getAttribute('data-o-ads-name');\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif (slotName) {\n\t\t\t\t\t\tinvokeMethodOnSlots.call(_this2, slotName, 'render');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\t/* istanbul ignore else\t*/\n\t\n\t\n\t\t\tvar options = {};\n\t\n\t\t\tif ((typeof lazyLoadingConfig === 'undefined' ? 'undefined' : (0, _typeof3.default)(lazyLoadingConfig)) === 'object') {\n\t\t\t\t/* istanbul ignore else\t*/\n\t\t\t\tif (lazyLoadingConfig.viewportMargin) {\n\t\t\t\t\toptions.rootMargin = lazyLoadingConfig.viewportMargin;\n\t\t\t\t}\n\t\t\t\t/* istanbul ignore else\t*/\n\t\t\t\tif (lazyLoadingConfig.threshold) {\n\t\t\t\t\toptions.threshold = lazyLoadingConfig.threshold;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.lazyLoadObserver = new IntersectionObserver(onChange.bind(this), options);\n\t\t}\n\t\n\t\treturn this.lazyLoadObserver;\n\t};\n\t\n\tSlots.prototype.forEach = function (fn) {\n\t\tvar _this3 = this;\n\t\n\t\tObject.keys(this).forEach(function (name) {\n\t\t\tvar slot = _this3[name];\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tif (slot instanceof Slot) {\n\t\t\t\tfn.call(_this3, slot);\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t};\n\t\n\t/*\n\t* Initialise slots\n\t*/\n\tSlots.prototype.init = function () {\n\t\tthis.initRefresh();\n\t\tthis.initRendered();\n\t\tthis.initResponsive();\n\t\tthis.initPostMessage();\n\t\tthis.initLazyLoading();\n\t};\n\t\n\tSlots.prototype.timers = {};\n\t\n\tSlots.prototype.debug = function () {\n\t\tvar log = utils.log;\n\t\tvar data = [];\n\t\n\t\tthis.forEach(function (slot) {\n\t\t\tvar row = {\n\t\t\t\tname: slot.name,\n\t\t\t\t'unit name': slot.gpt.unitName,\n\t\t\t\t'creative id': slot.gpt.creativeId || 'N/A',\n\t\t\t\t'line item id': slot.gpt.lineItemId || 'N/A',\n\t\t\t\tsize: utils.isArray(slot.gpt.size) && slot.gpt.size.join('×') || slot.gpt.isEmpty && 'empty' || 'N/A',\n\t\t\t\tsizes: utils.isArray(slot.sizes) && slot.sizes.map(function (item) {\n\t\t\t\t\treturn item.join('×');\n\t\t\t\t}).join(', ') || 'responsive slot',\n\t\t\t\ttargeting: Object.keys(slot.targeting).map(function (param) {\n\t\t\t\t\treturn param + '=' + slot.targeting[param];\n\t\t\t\t}).join(', ')\n\t\t\t};\n\t\t\tdata.push(row);\n\t\t});\n\t\n\t\tlog.start('Creatives');\n\t\tlog.table(data);\n\t\tlog.end();\n\t};\n\t\n\tmodule.exports = new Slots();\n\n/***/ },\n/* 106 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(94);\n\tvar config = __webpack_require__(93);\n\t\n\tvar VALID_SIZE_STRINGS = ['fluid'];\n\t\n\tvar attributeParsers = {\n\t\tsizes: function sizes(value, _sizes) {\n\t\t\tif (value === false || value === 'false') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t/* istanbul ignore else  */\n\t\t\telse if (utils.isArray(_sizes)) {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tvar regex = /(\\d+)x(\\d+)/;\n\t\t\t\t\t\tvalue.split(',').filter(function (size) {\n\t\t\t\t\t\t\treturn size.length;\n\t\t\t\t\t\t}).forEach(function (size) {\n\t\t\t\t\t\t\tif (regex.test(size)) {\n\t\t\t\t\t\t\t\tsize.replace(regex, function (match, width, height) {\n\t\t\t\t\t\t\t\t\t_sizes.push([parseInt(width, 10), parseInt(height, 10)]);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (VALID_SIZE_STRINGS.indexOf(size) >= 0) {\n\t\t\t\t\t\t\t\t_sizes.push(size);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\treturn _sizes;\n\t\t},\n\t\n\t\tformats: function formats(value, sizes) {\n\t\t\tif (value === false || value === 'false') {\n\t\t\t\tsizes = false;\n\t\t\t} else {\n\t\t\t\t(function () {\n\t\t\t\t\tvar mapping = config().formats;\n\t\t\t\t\tvar formats = utils.isArray(value) ? value : value.split(',');\n\t\t\t\t\tformats.forEach(function (format) {\n\t\t\t\t\t\tif (mapping && mapping[format]) {\n\t\t\t\t\t\t\tformat = mapping[format];\n\t\t\t\t\t\t\tif (utils.isArray(format.sizes[0]) || VALID_SIZE_STRINGS.indexOf(format.sizes[0]) >= 0) {\n\t\t\t\t\t\t\t\tformat.sizes.forEach(function (size) {\n\t\t\t\t\t\t\t\t\tsizes.push(size);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsizes.push(format.sizes);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tutils.log.error('Slot configured with unknown format ' + format);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})();\n\t\t\t}\n\t\n\t\t\treturn sizes;\n\t\t},\n\t\n\t\tresponsiveSizes: function responsiveSizes(name, value, sizes) {\n\t\t\tvar screenName = name.replace(/^sizes/, '').toLowerCase();\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tif (!utils.isPlainObject(sizes)) {\n\t\t\t\tsizes = {};\n\t\t\t}\n\t\n\t\t\tsizes[screenName] = attributeParsers.sizes(value, sizes[screenName] || []);\n\t\t\treturn sizes;\n\t\t},\n\t\n\t\tresponsiveFormats: function responsiveFormats(name, value, sizes) {\n\t\t\tvar screenName = name.replace(/^formats/, '').toLowerCase();\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tif (!utils.isPlainObject(sizes)) {\n\t\t\t\tsizes = {};\n\t\t\t}\n\t\n\t\t\tsizes[screenName] = attributeParsers.formats(value, []);\n\t\t\treturn sizes;\n\t\t},\n\t\n\t\tlazyLoadThreshold: function lazyLoadThreshold(value) {\n\t\t\treturn value.split(',').map(Number);\n\t\t},\n\t\n\t\ttargeting: function targeting(value, _targeting) {\n\t\t\tvalue = utils.hash(value, ';', '=');\n\t\t\tutils.extend(_targeting, value);\n\t\t\treturn _targeting;\n\t\t},\n\t\n\t\tbase: function base(value) {\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tif (value === '' || value === 'true') {\n\t\t\t\tvalue = true;\n\t\t\t} else if (value === 'false') {\n\t\t\t\tvalue = false;\n\t\t\t}\n\t\n\t\t\treturn value;\n\t\t}\n\t};\n\t\n\tvar convertLazyLoadBooleanToObject = function convertLazyLoadBooleanToObject(obj) {\n\t\tif (obj.lazyLoad === true) {\n\t\t\tobj.lazyLoad = {};\n\t\t}\n\t};\n\t\n\t/**\n\t * The Slot class.\n\t * @class\n\t * @constructor\n\t */\n\tfunction Slot(container, screensize, initLazyLoading) {\n\t\tvar _this = this;\n\t\n\t\tvar slotConfig = config('slots') || {};\n\t\tvar disableSwipeDefault = config('disableSwipeDefault') || false;\n\t\n\t\t// store the container\n\t\tthis.container = container;\n\t\t// the current responsive screensize\n\t\n\t\t/* istanbul ignore else\t*/\n\t\tif (screensize) {\n\t\t\tthis.screensize = screensize;\n\t\t}\n\t\n\t\t// init slot dom structure\n\t\tthis.outer = this.addContainer(container, {\n\t\t\t'class': 'o-ads__outer'\n\t\t});\n\t\tthis.inner = this.addContainer(this.outer, {\n\t\t\t'class': 'o-ads__inner'\n\t\t});\n\t\n\t\t// make sure the slot has a name\n\t\tthis.setName();\n\t\tthis.setResponsiveCreative(false);\n\t\tslotConfig = slotConfig[this.name] || {};\n\t\n\t\t// default configuration properties\n\t\tthis.server = 'gpt';\n\t\tthis.defer = false;\n\t\n\t\t// global slots configuration\n\t\tthis.targeting = slotConfig.targeting || {};\n\t\tthis.sizes = slotConfig.sizes || [];\n\t\tthis.center = slotConfig.center || false;\n\t\tthis.label = slotConfig.label || false;\n\t\tthis.outOfPage = slotConfig.outOfPage || false;\n\t\n\t\tthis.disableSwipeDefault = slotConfig.disableSwipeDefault || disableSwipeDefault;\n\t\tthis.companion = slotConfig.companion === false ? false : true;\n\t\tthis.collapseEmpty = slotConfig.collapseEmpty;\n\t\t/* istanbul ignore else */\n\t\tif (utils.isArray(slotConfig.formats)) {\n\t\t\tattributeParsers.formats(slotConfig.formats, this.sizes);\n\t\t} else if (utils.isPlainObject(slotConfig.formats)) {\n\t\t\tthis.sizes = {};\n\t\t\tObject.keys(slotConfig.formats).forEach(function (screenName) {\n\t\t\t\t_this.sizes[screenName] = attributeParsers.formats(slotConfig.formats[screenName], []);\n\t\t\t});\n\t\t}\n\t\n\t\tif (typeof slotConfig.lazyLoad !== 'undefined') {\n\t\t\tthis.lazyLoad = slotConfig.lazyLoad;\n\t\t} else {\n\t\t\tthis.lazyLoad = config('lazyLoad') || false;\n\t\t}\n\t\n\t\t// extend with imperative configuration options\n\t\tthis.parseAttributeConfig();\n\t\t/* istanbul ignore else\t*/\n\t\tif (!this.sizes.length && !utils.isPlainObject(this.sizes)) {\n\t\t\tutils.log.error('slot %s has no configured sizes!', this.name);\n\t\t\treturn false;\n\t\t}\n\t\n\t\t// Either retrieve the existing IntersectionObserver, or tell slots.js to create a new one.\n\t\tthis.lazyLoadObserver = initLazyLoading(this.lazyLoad);\n\t\tthis.initLazyLoad();\n\t\n\t\tthis.centerContainer();\n\t\tthis.labelContainer();\n\t\n\t\tthis.initResponsive();\n\t}\n\t\n\t/**\n\t * parse slot attribute config\n\t */\n\tSlot.prototype.parseAttributeConfig = function () {\n\t\tvar _this2 = this;\n\t\n\t\tArray.from(this.container.attributes).forEach(function (attribute) {\n\t\t\tvar name = utils.parseAttributeName(attribute.name);\n\t\t\tvar value = attribute.value;\n\t\t\tif (name === 'formats') {\n\t\t\t\t_this2[name] = attributeParsers[name](value, _this2.sizes);\n\t\t\t} else if (name === 'lazyLoadThreshold' && _this2.lazyLoad) {\n\t\t\t\tconvertLazyLoadBooleanToObject(_this2);\n\t\t\t\t_this2.lazyLoad.threshold = attributeParsers.lazyLoadThreshold(value);\n\t\t\t} else if (name === 'lazyLoadViewportMargin' && _this2.lazyLoad) {\n\t\t\t\tconvertLazyLoadBooleanToObject(_this2);\n\t\t\t\t_this2.lazyLoad.viewportMargin = attributeParsers.base(value);\n\t\t\t} else if (attributeParsers[name]) {\n\t\t\t\t_this2[name] = attributeParsers[name](value, _this2[name]);\n\t\t\t} else if (/^formats\\w*/.test(name)) {\n\t\t\t\t_this2.sizes = attributeParsers.responsiveFormats(name, value, _this2.sizes);\n\t\t\t} else if (/^sizes\\w*/.test(name)) {\n\t\t\t\t_this2.sizes = attributeParsers.responsiveSizes(name, value, _this2.sizes);\n\t\t\t} else if (_this2.hasOwnProperty(name)) {\n\t\t\t\t_this2[name] = attributeParsers.base(value);\n\t\t\t}\n\t\t});\n\t};\n\t\n\tSlot.prototype.getAttributes = function () {\n\t\tvar attributes = {};\n\t\tArray.from(this.container.attributes).forEach(function (attribute) {\n\t\t\tattributes[utils.parseAttributeName(attribute)] = attribute.value;\n\t\t});\n\t\tthis.attributes = attributes;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t *\tLoad a slot when it appears in the viewport\n\t */\n\tSlot.prototype.initLazyLoad = function () {\n\t\tvar _this3 = this;\n\t\n\t\t/* istanbul ignore else  */\n\t\tif (this.lazyLoadObserver && this.lazyLoad) {\n\t\t\tthis.defer = true;\n\t\t\tthis.lazyLoadObserver.observe(this.container);\n\t\n\t\t\t//Master/Companion ads don't work with lazy loading, so if a master ad loads trigger\n\t\t\t/* istanbul ignore else */\n\t\t\tif (this.companion) {\n\t\t\t\tutils.once('masterLoaded', function () {\n\t\t\t\t\tif (_this3.hasValidSize()) {\n\t\t\t\t\t\t_this3.render();\n\t\t\t\t\t}\n\t\t\t\t}, this.container);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t};\n\t\n\tSlot.prototype.render = function () {\n\t\tthis.fire('render');\n\t\t/* istanbul ignore else  */\n\t\tif (this.lazyLoadObserver) {\n\t\t\tthis.lazyLoadObserver.unobserve(this.container);\n\t\t}\n\t};\n\t\n\t/**\n\t *\tListen to responsive breakpoints and collapse slots\n\t * where the configured size is set to false\n\t */\n\tSlot.prototype.initResponsive = function () {\n\t\t/* istanbul ignore else */\n\t\tif (utils.isPlainObject(this.sizes)) {\n\t\t\t/* istanbul ignore else */\n\t\t\tif (!this.hasValidSize()) {\n\t\t\t\tthis.collapse();\n\t\t\t}\n\t\n\t\t\tutils.on('breakpoint', function (event) {\n\t\t\t\tvar slot = event.detail.slot;\n\t\t\t\tslot.screensize = event.detail.screensize;\n\t\n\t\t\t\tif (slot.hasValidSize()) {\n\t\t\t\t\tslot.uncollapse();\n\t\t\t\t} else {\n\t\t\t\t\tslot.collapse();\n\t\t\t\t\tslot.clear();\n\t\t\t\t}\n\t\t\t}, this.container);\n\t\t}\n\t\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Maximise the slot when size is 100x100\n\t */\n\tSlot.prototype.maximise = function (size) {\n\t\tif (size && +size[0] === 100 && +size[1] === 100) {\n\t\t\tthis.fire('resize', {\n\t\t\t\tsize: ['100%', '100%']\n\t\t\t});\n\t\t}\n\t};\n\t\n\t/**\n\t *\tIf the slot doesn't have a name give it one\n\t */\n\tSlot.prototype.setName = function () {\n\t\tthis.name = this.container.getAttribute('data-o-ads-name') || this.container.getAttribute('o-ads-name');\n\t\tif (!this.name) {\n\t\t\tthis.name = 'o-ads-slot-' + Math.floor(Math.random() * 10000);\n\t\t\tthis.container.setAttribute('data-o-ads-name', this.name);\n\t\t}\n\t\treturn this;\n\t};\n\t\n\t/**\n\t *\tIf the slot doesn't have a name give it one\n\t */\n\tSlot.prototype.setResponsiveCreative = function (value) {\n\t\tthis.responsiveCreative = value;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * add the empty class to the slot\n\t */\n\tSlot.prototype.collapse = function () {\n\t\tthis.container.classList.add('o-ads--empty');\n\t\tthis.setFormatLoaded(false);\n\t\tdocument.body.classList.add('o-ads-no-' + this.name);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * sets a classname of the format\n\t */\n\tSlot.prototype.setFormatLoaded = function (format) {\n\t\tthis.container.setAttribute('data-o-ads-loaded', format);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * remove the empty class from the slot\n\t */\n\tSlot.prototype.uncollapse = function () {\n\t\tthis.container.classList.remove('o-ads--empty');\n\t\tdocument.body.classList.remove('o-ads-no-' + this.name);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * call the ad server clear method on the slot if one exists\n\t */\n\tSlot.prototype.clear = function () {\n\t\t/* istanbul ignore else  */\n\t\tif (utils.isFunction(this['clearSlot'])) {\n\t\t\tthis.clearSlot();\n\t\t}\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * call the ad server impression URL for an out of page slot if it has been configured correctly for delayed impressions\n\t */\n\tSlot.prototype.submitImpression = function () {\n\t\t/* istanbul ignore else  */\n\t\tif (utils.isFunction(this['submitGptImpression'])) {\n\t\t\tthis.submitGptImpression();\n\t\t}\n\t\treturn this;\n\t};\n\t\n\t/**\n\t *\tfire an event on the slot\n\t */\n\tSlot.prototype.fire = function (name, data) {\n\t\tvar details = {\n\t\t\tname: this.name,\n\t\t\tslot: this\n\t\t};\n\t\n\t\tif (utils.isPlainObject(data)) {\n\t\t\tutils.extend(details, data);\n\t\t}\n\t\n\t\tutils.broadcast(name, details, this.container);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t *\tadd a div tag into the current slot container\n\t **/\n\tSlot.prototype.addContainer = function (node, attrs) {\n\t\tvar container = '<div ';\n\t\t/* istanbul ignore else  */\n\t\tif (attrs) {\n\t\t\tObject.keys(attrs).forEach(function (attr) {\n\t\t\t\tvar value = attrs[attr];\n\t\t\t\tcontainer += attr + '=' + value + ' ';\n\t\t\t});\n\t\t}\n\t\tcontainer += '></div>';\n\t\tnode.insertAdjacentHTML('beforeend', container);\n\t\treturn node.lastChild;\n\t};\n\t\n\tSlot.prototype.hasValidSize = function (screensize) {\n\t\tscreensize = screensize || this.screensize;\n\t\tif (screensize && utils.isPlainObject(this.sizes)) {\n\t\t\treturn this.sizes[screensize] !== false;\n\t\t}\n\t\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * Add a center class to the main container\n\t */\n\tSlot.prototype.centerContainer = function () {\n\t\tif (this.center) {\n\t\t\tthis.container.classList.add('o-ads--center');\n\t\t}\n\t\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Add a label class to the main container\n\t */\n\tSlot.prototype.labelContainer = function () {\n\t\tvar className = void 0;\n\t\tif (this.label === true || this.label === 'left') {\n\t\t\tclassName = 'label-left';\n\t\t} else if (this.label === 'right') {\n\t\t\tclassName = 'label-right';\n\t\t}\n\t\n\t\tif (className) {\n\t\t\tthis.container.classList.add('o-ads--' + className);\n\t\t}\n\t\treturn this;\n\t};\n\t\n\tmodule.exports = Slot;\n\n/***/ },\n/* 107 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/*globals googletag: true */\n\t\n\t/**\n\t* @fileOverview\n\t* ad server modukes for o-ads implementing Google publisher tags ad requests.\n\t*\n\t* @author Robin Marr, robin.marr@ft.com\n\t*/\n\t\n\tvar config = __webpack_require__(93);\n\tvar utils = __webpack_require__(94);\n\tvar targeting = __webpack_require__(108);\n\tvar breakpoints = false;\n\t/*\n\t//###########################\n\t// Initialisation handlers ##\n\t//###########################\n\t*/\n\t\n\t/*\n\t* Initialise Google publisher tags functionality\n\t*/\n\tfunction init() {\n\t\tvar gptConfig = config('gpt') || {};\n\t\tbreakpoints = config('responsive');\n\t\tinitGoogleTag();\n\t\tutils.on('ready', onReady.bind(null, slotMethods));\n\t\tutils.on('render', onRender);\n\t\tutils.on('refresh', onRefresh);\n\t\tutils.on('resize', onResize);\n\t\tgoogletag.cmd.push(setup.bind(null, gptConfig));\n\t}\n\t\n\t/*\n\t* initalise the googletag global namespace and add the google publish tags library to the page\n\t*/\n\tfunction initGoogleTag() {\n\t\tif (!window.googletag) {\n\t\t\t// set up a place holder for the gpt code downloaded from google\n\t\t\twindow.googletag = {};\n\t\n\t\t\t// this is a command queue used by GPT any methods added to it will be\n\t\t\t// executed when GPT code is available, if GPT is already available they\n\t\t\t// will be executed immediately\n\t\t\twindow.googletag.cmd = [];\n\t\t}\n\t\n\t\tutils.attach('//www.googletagservices.com/tag/js/gpt.js', true, null, function (err) {\n\t\t\tutils.broadcast('adServerLoadError', err);\n\t\t});\n\t}\n\t\n\t/*\n\t//#################################\n\t// Global configuration handlers ##\n\t//#################################\n\t*/\n\t\n\t/*\n\t* Configure the GPT library for the current page\n\t* this method is pushed onto the googletag command queue and run\n\t* when the library is available\n\t*/\n\tfunction setup(gptConfig) {\n\t\tgoogletag.pubads().addEventListener('slotRenderEnded', onRenderEnded);\n\t\tenableCompanions(gptConfig);\n\t\tsetRenderingMode(gptConfig);\n\t\tsetPageTargeting(targeting.get());\n\t\tsetPageCollapseEmpty(gptConfig);\n\t\tgoogletag.enableServices();\n\t\treturn true;\n\t}\n\t\n\t/*\n\t* set the gpt rendering mode to either sync or async\n\t* default is async\n\t*/\n\t\n\tfunction setRenderingMode(gptConfig) {\n\t\tvar rendering = gptConfig.rendering;\n\t\tif (rendering === 'sync') {\n\t\t\tgoogletag.pubads().enableSyncRendering();\n\t\t} else if (rendering === 'sra') {\n\t\t\tgoogletag.pubads().enableSingleRequest();\n\t\t} else {\n\t\t\tgoogletag.pubads().enableAsyncRendering();\n\t\t}\n\t}\n\t\n\t/**\n\t* Adds page targeting to GPT ad calls\n\t* @name setPageTargeting\n\t* @memberof GPT\n\t* @lends GPT\n\t*/\n\tfunction setPageTargeting(targeting) {\n\t\n\t\tfunction setTargeting(key, value) {\n\t\t\tgoogletag.pubads().setTargeting(key, value);\n\t\t}\n\t\n\t\tif (utils.isPlainObject(targeting)) {\n\t\t\tObject.keys(targeting).forEach(function (param) {\n\t\t\t\tgoogletag.cmd.push(setTargeting.bind(null, param, targeting[param]));\n\t\t\t});\n\t\t} else {\n\t\t\tutils.log.warn('invalid targeting object passed', targeting);\n\t\t}\n\t\n\t\treturn targeting;\n\t}\n\t\n\t/**\n\t* Sets behaviour of empty slots can be 'after', 'before' or 'never'\n\t* * after collapse slots that return an empty ad\n\t* * before collapses all slots and only displays them on\n\t* true is synonymous with before\n\t* false is synonymous with never\n\t*/\n\tfunction setPageCollapseEmpty(gptConfig) {\n\t\tvar mode = gptConfig.collapseEmpty;\n\t\n\t\tif (mode === 'before' || mode === true) {\n\t\t\tgoogletag.pubads().collapseEmptyDivs(true, true);\n\t\t} else if (mode === 'never' || mode === false) {\n\t\t\tgoogletag.pubads().collapseEmptyDivs(false);\n\t\t} else {\n\t\t\t//default is after\n\t\t\tgoogletag.pubads().collapseEmptyDivs(true);\n\t\t}\n\t}\n\t\n\t/**\n\t* When companions are enabled we delay the rendering of ad slots until\n\t* either a master is returned or all slots are returned without a master\n\t*/\n\tfunction enableCompanions(gptConfig) {\n\t\tif (gptConfig.companions) {\n\t\t\tgoogletag.pubads().disableInitialLoad();\n\t\t\tgoogletag.companionAds().setRefreshUnfilledSlots(true);\n\t\t}\n\t}\n\t\n\t/*\n\t//##################\n\t// Event handlers ##\n\t//##################\n\t*/\n\t\n\t/*\n\t* Event handler for when a slot is ready for an ad to rendered\n\t*/\n\tfunction onReady(slotMethods, event) {\n\t\tvar slot = event.detail.slot;\n\t\t/* istanbul ignore else  */\n\t\tif (slot.server === 'gpt') {\n\t\t\tslot.gpt = {};\n\t\n\t\t\t// extend the slot with gpt methods\n\t\t\tutils.extend(slot, slotMethods);\n\t\n\t\t\t// setup the gpt configuration the ad\n\t\t\tgoogletag.cmd.push(function () {\n\t\t\t\tslot.defineSlot().addServices().setCollapseEmpty().setTargeting().setURL();\n\t\n\t\t\t\tif (!slot.defer && slot.hasValidSize()) {\n\t\t\t\t\tslot.display();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t/*\n\t* Render is called when a slot is not rendered when the ready event fires\n\t*/\n\tfunction onRender(event) {\n\t\tvar slot = event.detail.slot;\n\t\t/* istanbul ignore else  */\n\t\tif (utils.isFunction(slot.display)) {\n\t\t\tslot.display();\n\t\t}\n\t}\n\t\n\t/*\n\t* refresh is called when a slot requests the ad be flipped\n\t*/\n\tfunction onRefresh(event) {\n\t\twindow.googletag.cmd.push(function () {\n\t\t\tvar targeting = event.detail.targeting;\n\t\t\tif (utils.isPlainObject(targeting)) {\n\t\t\t\tObject.keys(targeting).forEach(function (name) {\n\t\t\t\t\tevent.detail.slot.gpt.slot.setTargeting(name, targeting[name]);\n\t\t\t\t});\n\t\t\t}\n\t\t\tgoogletag.pubads().refresh([event.detail.slot.gpt.slot]);\n\t\t});\n\t\treturn this;\n\t}\n\t\n\tfunction onResize(event) {\n\t\tvar iframe = event.detail.slot.gpt.iframe;\n\t\tvar size = event.detail.size;\n\t\tiframe.width = size[0];\n\t\tiframe.height = size[1];\n\t}\n\t\n\t/*\n\t* function passed to the gpt library that is run when an ad completes rendering\n\t*/\n\tfunction onRenderEnded(event) {\n\t\tvar data = {\n\t\t\tgpt: {}\n\t\t};\n\t\n\t\tvar gptSlotId = event.slot.getSlotId();\n\t\tvar domId = gptSlotId.getDomId().split('-');\n\t\tvar iframeId = 'google_ads_iframe_' + gptSlotId.getId();\n\t\tdata.type = domId.pop();\n\t\tdata.name = domId.join('-');\n\t\tvar detail = data.gpt;\n\t\tdetail.isEmpty = event.isEmpty;\n\t\tdetail.size = event.size;\n\t\tdetail.creativeId = event.creativeId;\n\t\tdetail.lineItemId = event.lineItemId;\n\t\tdetail.serviceName = event.serviceName;\n\t\tdetail.iframe = document.getElementById(iframeId);\n\t\tutils.broadcast('rendered', data);\n\t}\n\t\n\t/*\n\t//################\n\t// Slot methods ##\n\t//################\n\t* Set of methods extended on to the slot constructor for GPT served slots\n\t*/\n\tvar slotMethods = {\n\t\t/**\n\t * define a GPT slot\n\t */\n\t\tdefineSlot: function defineSlot() {\n\t\t\tvar _this = this;\n\t\n\t\t\twindow.googletag.cmd.push(function () {\n\t\t\t\t_this.gpt.id = _this.name + '-gpt';\n\t\t\t\t_this.inner.setAttribute('id', _this.gpt.id);\n\t\t\t\t_this.setUnitName();\n\t\t\t\tif (!_this.outOfPage) {\n\t\t\t\t\tif (breakpoints && utils.isObject(_this.sizes)) {\n\t\t\t\t\t\t_this.initResponsive();\n\t\t\t\t\t\t_this.gpt.slot = googletag.defineSlot(_this.gpt.unitName, [], _this.gpt.id).defineSizeMapping(_this.gpt.sizes);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.gpt.slot = googletag.defineSlot(_this.gpt.unitName, _this.sizes, _this.gpt.id);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_this.gpt.slot = googletag.defineOutOfPageSlot(_this.gpt.unitName, _this.gpt.id);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\tclearSlot: function clearSlot(gptSlot) {\n\t\t\tif (window.googletag.pubadsReady && window.googletag.pubads) {\n\t\t\t\tgptSlot = gptSlot || this.gpt.slot;\n\t\t\t\treturn googletag.pubads().clear([gptSlot]);\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tinitResponsive: function initResponsive() {\n\t\t\tvar _this2 = this;\n\t\n\t\t\twindow.googletag.cmd.push(function () {\n\t\t\t\tutils.on('breakpoint', function (event) {\n\t\t\t\t\tvar slot = event.detail.slot;\n\t\t\t\t\tvar screensize = event.detail.screensize;\n\t\n\t\t\t\t\tupdatePageTargeting({ res: screensize });\n\t\n\t\t\t\t\tif (slot.hasValidSize(screensize) && !slot.responsiveCreative) {\n\t\t\t\t\t\t/* istanbul ignore else  */\n\t\t\t\t\t\tif (slot.gpt.iframe) {\n\t\t\t\t\t\t\tslot.fire('refresh');\n\t\t\t\t\t\t} else if (!_this2.defer) {\n\t\t\t\t\t\t\tslot.display();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, _this2.container);\n\t\n\t\t\t\tvar mapping = googletag.sizeMapping();\n\t\t\t\tObject.keys(breakpoints).forEach(function (breakpoint) {\n\t\t\t\t\tif (_this2.sizes[breakpoint]) {\n\t\t\t\t\t\tmapping.addSize(breakpoints[breakpoint], _this2.sizes[breakpoint]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\t_this2.gpt.sizes = mapping.build();\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\t/*\n\t *\tTell gpt to request an ad\n\t */\n\t\tdisplay: function display() {\n\t\t\tvar _this3 = this;\n\t\n\t\t\twindow.googletag.cmd.push(function () {\n\t\t\t\tgoogletag.display(_this3.gpt.id);\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t * Set the DFP unit name for the slot.\n\t */\n\t\tsetUnitName: function setUnitName() {\n\t\t\tvar _this4 = this;\n\t\n\t\t\twindow.googletag.cmd.push(function () {\n\t\t\t\tvar unitName = void 0;\n\t\t\t\tvar gpt = config('gpt') || {};\n\t\t\t\tvar attr = _this4.container.getAttribute('data-o-ads-gpt-unit-name');\n\t\n\t\t\t\tif (utils.isNonEmptyString(attr)) {\n\t\t\t\t\tunitName = attr;\n\t\t\t\t} else if (utils.isNonEmptyString(gpt.unitName)) {\n\t\t\t\t\tunitName = gpt.unitName;\n\t\t\t\t} else {\n\t\t\t\t\tvar network = gpt.network;\n\t\t\t\t\tvar site = gpt.site;\n\t\t\t\t\tvar zone = gpt.zone;\n\t\t\t\t\tunitName = '/' + network;\n\t\t\t\t\tunitName += utils.isNonEmptyString(site) ? '/' + site : '';\n\t\t\t\t\tunitName += utils.isNonEmptyString(zone) ? '/' + zone : '';\n\t\t\t\t}\n\t\t\t\t_this4.gpt.unitName = unitName;\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t * Add the slot to the pub ads service and add a companion service if configured\n\t */\n\t\taddServices: function addServices(gptSlot) {\n\t\t\tvar _this5 = this;\n\t\n\t\t\twindow.googletag.cmd.push(function () {\n\t\t\t\tvar gpt = config('gpt') || {};\n\t\t\t\tgptSlot = gptSlot || _this5.gpt.slot;\n\t\t\t\tgptSlot.addService(googletag.pubads());\n\t\t\t\tif (gpt.companions && _this5.companion !== false) {\n\t\t\t\t\tgptSlot.addService(googletag.companionAds());\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\n\t\t/**\n\t * Sets the GPT collapse empty mode for a given slot\n\t * values can be 'after', 'before', 'never'\n\t * after as in after ads have rendered is the default\n\t * true is synonymous with before\n\t * false is synonymous with never\n\t */\n\t\tsetCollapseEmpty: function setCollapseEmpty() {\n\t\t\tvar _this6 = this;\n\t\n\t\t\twindow.googletag.cmd.push(function () {\n\t\t\t\tvar mode = _this6.collapseEmpty || config('collapseEmpty');\n\t\n\t\t\t\tif (mode === true || mode === 'after') {\n\t\t\t\t\t_this6.gpt.slot.setCollapseEmptyDiv(true);\n\t\t\t\t} else if (mode === 'before') {\n\t\t\t\t\t_this6.gpt.slot.setCollapseEmptyDiv(true, true);\n\t\t\t\t} else if (mode === false || mode === 'never') {\n\t\t\t\t\t_this6.gpt.slot.setCollapseEmptyDiv(false);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\tsubmitGptImpression: function submitGptImpression() {\n\t\t\tif (this.outOfPage && this.gpt.iframe) {\n\t\t\t\tvar getImpressionURL = function getImpressionURL(iframe) {\n\t\t\t\t\tvar trackingUrlElement = iframe.contentWindow.document.querySelector('[data-o-ads-impression-url]');\n\t\t\t\t\tif (trackingUrlElement) {\n\t\t\t\t\t\treturn trackingUrlElement.dataset.oAdsImpressionUrl;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tutils.log.warn('Impression URL not found, this is set via a creative template.');\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\t;\n\t\t\t\tvar impressionURL = getImpressionURL(this.gpt.iframe);\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (impressionURL) {\n\t\t\t\t\tutils.attach(impressionURL, true, function () {\n\t\t\t\t\t\tutils.log.info('Impression Url requested');\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tutils.log.info('CORS request to submit an impression failed');\n\t\t\t\t\t}, true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tutils.log.warn('Attempting to call submitImpression on a non-oop slot');\n\t\t\t}\n\t\t},\n\t\t/**\n\t * Sets page url to be sent to google\n\t * prevents later url changes via javascript from breaking the ads\n\t */\n\t\tsetURL: function setURL(gptSlot) {\n\t\t\tvar _this7 = this;\n\t\n\t\t\twindow.googletag.cmd.push(function () {\n\t\t\t\tgptSlot = gptSlot || _this7.gpt.slot;\n\t\t\t\tvar canonical = config('canonical');\n\t\t\t\tgptSlot.set('page_url', canonical ? canonical : utils.getLocation());\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\n\t\t/**\n\t * Adds key values from a given object to the slot targeting\n\t */\n\t\tsetTargeting: function setTargeting(gptSlot) {\n\t\t\tvar _this8 = this;\n\t\n\t\t\twindow.googletag.cmd.push(function () {\n\t\t\t\tgptSlot = gptSlot || _this8.gpt.slot;\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (utils.isPlainObject(_this8.targeting)) {\n\t\t\t\t\tObject.keys(_this8.targeting).forEach(function (param) {\n\t\t\t\t\t\tgptSlot.setTargeting(param, _this8.targeting[param]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\t};\n\t\n\t/*\n\t//####################\n\t// External methods ##\n\t//####################\n\t*/\n\t\n\t/**\n\t* The correlator is a random number added to ad calls.\n\t* It is used by the ad server to determine which impressions where served to the same page\n\t* Updating is used to tell the ad server to treat subsequent ad calls as being on a new page\n\t*/\n\tfunction updateCorrelator() {\n\t\tgoogletag.cmd.push(function () {\n\t\t\tgoogletag.pubads().updateCorrelator();\n\t\t});\n\t}\n\t\n\tfunction updatePageTargeting(override) {\n\t\tif (window.googletag) {\n\t\t\tvar params = utils.isPlainObject(override) ? override : targeting.get();\n\t\t\tsetPageTargeting(params);\n\t\t} else {\n\t\t\tutils.log.warn('Attempting to set page targeting before the GPT library has initialized');\n\t\t}\n\t}\n\t\n\tmodule.exports.init = init;\n\tmodule.exports.updateCorrelator = updateCorrelator;\n\tmodule.exports.updatePageTargeting = updatePageTargeting;\n\t\n\tmodule.exports.debug = function () {\n\t\tvar log = utils.log;\n\t\tvar conf = config('gpt');\n\t\tif (!conf) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tlog.start('gpt');\n\t\tlog.attributeTable(conf);\n\t\tlog.end();\n\t};\n\n/***/ },\n/* 108 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar config = __webpack_require__(93);\n\tvar utils = __webpack_require__(94);\n\tvar parameters = {};\n\t\n\tfunction Targeting() {}\n\t\n\tTargeting.prototype.get = function () {\n\t\tvar methods = {\n\t\t\tsocialReferrer: this.getSocialReferrer,\n\t\t\tpageReferrer: this.getPageReferrer,\n\t\t\ttimestamp: this.timestamp,\n\t\t\tresponsive: this.responsive\n\t\t};\n\t\n\t\tutils.extend(parameters, this.getFromConfig(), this.searchTerm());\n\t\n\t\tfor (var item in methods) {\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (methods.hasOwnProperty(item)) {\n\t\t\t\tutils.extend(parameters, methods[item]());\n\t\t\t}\n\t\t}\n\t\n\t\treturn parameters;\n\t};\n\t\n\tTargeting.prototype.add = function (obj) {\n\t\t/* istanbul ignore else  */\n\t\tif (utils.isPlainObject(obj)) {\n\t\t\tutils.extend(parameters, obj);\n\t\t}\n\t};\n\t\n\tTargeting.prototype.clear = function () {\n\t\tparameters = {};\n\t};\n\t\n\t/**\n\t* getFromConfig returns an object containing all the key values pairs specified in the dfp_targeting\n\t* config.\n\t*/\n\tTargeting.prototype.getFromConfig = function () {\n\t\tvar targeting = config('dfp_targeting') || {};\n\t\tif (!utils.isPlainObject(targeting)) {\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (utils.isString(targeting)) {\n\t\t\t\ttargeting = utils.hash(targeting, ';', '=');\n\t\t\t}\n\t\t}\n\t\n\t\treturn targeting;\n\t};\n\t\n\tTargeting.prototype.getPageReferrer = function () {\n\t\tvar hostRegex = void 0;\n\t\tvar match = null;\n\t\tvar referrer = utils.getReferrer();\n\t\n\t\t//referrer is not article\n\t\tif (referrer !== '') {\n\t\t\thostRegex = /^.*?:\\/\\/.*?(\\/.*)$/;\n\t\n\t\t\t//remove hostname from results\n\t\t\tmatch = hostRegex.exec(referrer)[1];\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (match !== null) {\n\t\t\t\tmatch.substring(1);\n\t\t\t}\n\t\t}\n\t\n\t\treturn match && { rf: match.substring(1) } || {};\n\t};\n\t\n\tTargeting.prototype.getSocialReferrer = function () {\n\t\tvar codedValue = void 0;\n\t\tvar refUrl = void 0;\n\t\tvar referrer = utils.getReferrer();\n\t\tvar refererRegexTemplate = '^http(|s)://(www.)*(SUBSTITUTION)/|_i_referer=http(|s)(:|%3A)(\\/|%2F){2}(www.)*(SUBSTITUTION)(\\/|%2F)';\n\t\tvar lookup = {\n\t\t\t't.co': 'twi',\n\t\t\t'facebook.com': 'fac',\n\t\t\t'linkedin.com': 'lin',\n\t\t\t'drudgereport.com': 'dru'\n\t\t};\n\t\n\t\t/* istanbul ignore else  */\n\t\tif (utils.isString(referrer)) {\n\t\t\tfor (refUrl in lookup) {\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (lookup.hasOwnProperty(refUrl)) {\n\t\t\t\t\tvar refererRegex = new RegExp(refererRegexTemplate.replace(/SUBSTITUTION/g, refUrl));\n\t\t\t\t\t/* istanbul ignore else  */\n\t\t\t\t\tif (refUrl !== undefined && refererRegex.test(referrer)) {\n\t\t\t\t\t\tcodedValue = lookup[refUrl];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn codedValue && { socref: codedValue } || {};\n\t};\n\t\n\tTargeting.prototype.searchTerm = function () {\n\t\tvar qs = utils.hash(utils.getQueryString(), /\\&|\\;/, '=');\n\t\tvar keywords = qs.q || qs.s || qs.query || qs.queryText || qs.searchField || undefined;\n\t\n\t\t/* istanbul ignore else\t*/\n\t\tif (keywords && keywords !== '') {\n\t\t\tkeywords = unescape(keywords).toLowerCase().replace(/[';\\^\\+]/g, ' ').replace(/\\s+/g, ' ').trim();\n\t\t}\n\t\n\t\treturn { kw: keywords };\n\t};\n\t\n\tTargeting.prototype.timestamp = function () {\n\t\treturn { ts: utils.getTimestamp() };\n\t};\n\t\n\tTargeting.prototype.responsive = function () {\n\t\treturn config('responsive') ? { res: utils.responsive.getCurrent() } : {};\n\t};\n\t\n\tTargeting.prototype.debug = function () {\n\t\tvar log = utils.log;\n\t\tvar parameters = this.get();\n\t\t/* istanbul ignore else  */\n\t\tif (Object.keys(parameters).length !== 0) {\n\t\t\tlog.start('Targeting');\n\t\t\tlog.attributeTable(this.get());\n\t\t\tlog.end();\n\t\t}\n\t};\n\t\n\tmodule.exports = new Targeting();\n\n/***/ },\n/* 109 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(94);\n\tvar config = __webpack_require__(93);\n\tvar Delegate = __webpack_require__(110);\n\tvar targeting = __webpack_require__(108);\n\t\n\t/**\n\t * The Krux class defines an FT.ads.krux instance\n\t * @class\n\t * @constructor\n\t*/\n\tfunction Krux() {\n\t\tthis.customAttributes = {};\n\t}\n\t\n\tKrux.prototype.add = function (target) {\n\t\tutils.extend(true, this.customAttributes, target);\n\t};\n\t\n\tKrux.prototype.init = function () {\n\t\tvar _this = this;\n\t\n\t\tthis.config = config('krux');\n\t\tif (this.config && this.config.id) {\n\t\t\t(function () {\n\t\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (!window.Krux) {\n\t\t\t\t\t(window.Krux = function () {\n\t\t\t\t\t\twindow.Krux.q.push(arguments);\n\t\t\t\t\t}).q = [];\n\t\t\t\t}\n\t\n\t\t\t\t_this.api = window.Krux;\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (_this.config.attributes) {\n\t\t\t\t\t_this.add(_this.config.attributes);\n\t\t\t\t\t_this.setAttributes('page_attr_', _this.customAttributes.page || {});\n\t\t\t\t\t_this.setAttributes('user_attr_', _this.customAttributes.user || {});\n\t\t\t\t\t_this.setAttributes('', _this.customAttributes.custom || {});\n\t\t\t\t}\n\t\n\t\t\t\tvar src = void 0;\n\t\t\t\tvar m = utils.getLocation().match(/\\bkxsrc=([^&]+)/);\n\t\t\t\tif (m) {\n\t\t\t\t\tsrc = decodeURIComponent(m[1]);\n\t\t\t\t}\n\t\n\t\t\t\tvar finalSrc = /^https?:\\/\\/([^\\/]+\\.)?krxd\\.net(:\\d{1,5})?\\//i.test(src) ? src : src === \"disable\" ? \"\" : '//cdn.krxd.net/controltag/' + _this.config.id + '.js';\n\t\n\t\t\t\tvar loadKruxScript = function loadKruxScript() {\n\t\t\t\t\tutils.attach(finalSrc, true, function () {\n\t\t\t\t\t\tutils.broadcast('kruxScriptLoaded');\n\t\t\t\t\t});\n\t\t\t\t\t_this.events.init();\n\t\t\t\t};\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tif ('requestIdleCallback' in window) {\n\t\t\t\t\t\trequestIdleCallback(loadKruxScript);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tloadKruxScript();\n\t\t\t\t\t}\n\t\t\t\t}, 1000);\n\t\n\t\t\t\ttargeting.add(_this.targeting());\n\t\t\t})();\n\t\t} else {\n\t\t\t// can't initialize Krux because no Krux ID is configured, please add it as key id in krux config.\n\t\t}\n\t};\n\t\n\t/**\n\t* retrieve Krux values from localstorage or cookies in older browsers.\n\t* @name retrieve\n\t* @memberof Krux\n\t* @lends Krux\n\t*/\n\tKrux.prototype.retrieve = function (name) {\n\t\tvar value = void 0;\n\t\tname = 'kx' + name;\n\t\t/* istanbul ignore else  */\n\t\tif (window.localStorage && localStorage.getItem(name)) {\n\t\t\tvalue = localStorage.getItem(name);\n\t\t} else if (utils.cookie(name)) {\n\t\t\tvalue = utils.cookie(name);\n\t\t}\n\t\n\t\treturn value;\n\t};\n\t\n\t/**\n\t* retrieve Krux segments\n\t* @name segments\n\t* @memberof Krux\n\t* @lends Krux\n\t*/\n\tKrux.prototype.segments = function () {\n\t\treturn this.retrieve('segs');\n\t};\n\t\n\t/**\n\t* Retrieve all Krux values used in targeting and return them in an object\n\t* Also limit the number of segments going into the ad calls via krux.limit config\n\t* @name targeting\n\t* @memberof Krux\n\t* @lends Krux\n\t*/\n\tKrux.prototype.targeting = function () {\n\t\tvar segs = this.segments();\n\t\t/* istanbul ignore else  */\n\t\tif (segs) {\n\t\t\tsegs = segs.split(',');\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (config('krux').limit) {\n\t\t\t\tsegs = segs.slice(0, config('krux').limit);\n\t\t\t}\n\t\t}\n\t\n\t\treturn {\n\t\t\t\"kuid\": this.retrieve('user'),\n\t\t\t\"ksg\": segs,\n\t\t\t\"khost\": encodeURIComponent(location.hostname),\n\t\t\t\"bht\": segs && segs.length > 0 ? 'true' : 'false'\n\t\t};\n\t};\n\t\n\t/**\n\t* An object holding methods used by krux event pixels\n\t* @name events\n\t* @memberof Krux\n\t* @lends Krux\n\t*/\n\tKrux.prototype.events = {\n\t\tdwell_time: function dwell_time(config) {\n\t\t\tvar _this2 = this;\n\t\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (config) {\n\t\t\t\t(function () {\n\t\t\t\t\tvar fire = _this2.fire;\n\t\t\t\t\tvar interval = config.interval || 5;\n\t\t\t\t\tvar max = config.total / interval || 120;\n\t\t\t\t\tvar uid = config.id;\n\t\t\t\t\tutils.timers.create(interval, function () {\n\t\t\t\t\t\treturn function () {\n\t\t\t\t\t\t\tfire(uid, { dwell_time: this.interval * this.ticks / 1000 });\n\t\t\t\t\t\t};\n\t\t\t\t\t}(), max, { reset: true });\n\t\t\t\t})();\n\t\t\t}\n\t\t},\n\t\tdelegated: function delegated(config) {\n\t\t\tvar _this3 = this;\n\t\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (window.addEventListener) {\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (config) {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tvar fire = _this3.fire;\n\t\t\t\t\t\tvar eventScope = function eventScope(kEvnt) {\n\t\t\t\t\t\t\treturn function () {\n\t\t\t\t\t\t\t\tfire(config[kEvnt].id);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\n\t\t\t\t\t\twindow.addEventListener('load', function () {\n\t\t\t\t\t\t\tvar delEvnt = new Delegate(document.body);\n\t\t\t\t\t\t\tfor (var kEvnt in config) {\n\t\t\t\t\t\t\t\t/* istanbul ignore else  */\n\t\t\t\t\t\t\t\tif (config.hasOwnProperty(kEvnt)) {\n\t\t\t\t\t\t\t\t\tdelEvnt.on(config[kEvnt].eType, config[kEvnt].selector, eventScope(kEvnt));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, false);\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\tKrux.prototype.events.fire = function (id, attrs) {\n\t\t/* istanbul ignore else  */\n\t\tif (id) {\n\t\t\tattrs = utils.isPlainObject(attrs) ? attrs : {};\n\t\t\treturn window.Krux('admEvent', id, attrs); // eslint-disable-line new-cap\n\t\t}\n\t\n\t\treturn false;\n\t};\n\t\n\tKrux.prototype.events.init = function () {\n\t\tvar event = void 0;\n\t\tvar configured = config('krux') && config('krux').events;\n\t\t/* istanbul ignore else  */\n\t\tif (utils.isPlainObject(configured)) {\n\t\t\tfor (event in configured) {\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (utils.isFunction(this[event])) {\n\t\t\t\t\tthis[event](configured[event]);\n\t\t\t\t} else if (utils.isFunction(configured[event].fn)) {\n\t\t\t\t\tconfigured[event].fn(configured[event]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\tKrux.prototype.setAttributes = function (prefix, attributes) {\n\t\tvar _this4 = this;\n\t\n\t\t/* istanbul ignore else  */\n\t\tif (attributes) {\n\t\t\tObject.keys(attributes).forEach(function (item) {\n\t\t\t\t_this4.api('set', prefix + item, attributes[item]);\n\t\t\t});\n\t\t}\n\t};\n\t\n\tKrux.prototype.debug = function () {\n\t\tvar log = utils.log;\n\t\tif (!this.config) {\n\t\t\treturn;\n\t\t}\n\t\tlog.start('Krux©');\n\t\tlog('%c id:', 'font-weight: bold', this.config.id);\n\t\n\t\tif (this.config.limit) {\n\t\t\tlog('%c segment limit:', 'font-weight: bold', this.config.limit);\n\t\t}\n\t\n\t\tif (this.config.attributes) {\n\t\t\tvar attributes = this.config.attributes;\n\t\t\tlog.start('Attributes');\n\t\t\tlog.start('Page');\n\t\t\tlog.attributeTable(attributes.page);\n\t\t\tlog.end();\n\t\n\t\t\tlog.start('User');\n\t\t\tlog.attributeTable(attributes.user);\n\t\t\tlog.end();\n\t\n\t\t\tlog.start('Custom');\n\t\t\tlog.attributeTable(attributes.custom);\n\t\t\tlog.end();\n\t\t\tlog.end();\n\t\t}\n\t\tif (this.config.events) {\n\t\t\tvar events = this.config.events;\n\t\t\tlog.start('Events');\n\t\t\tif (events.dwell_time) {\n\t\t\t\tlog.start('Dwell Time');\n\t\t\t\tlog('%c interval:', 'font-weight: bold', events.dwell_time.interval);\n\t\t\t\tlog('%c id:', 'font-weight: bold', events.dwell_time.id);\n\t\t\t\tlog('%c total:', 'font-weight: bold', events.dwell_time.total);\n\t\t\t\tlog.end();\n\t\t\t}\n\t\t\tlog.start('Delegated');\n\t\t\tlog.table(events.delegated);\n\t\t\tlog.end();\n\t\t\tlog.end();\n\t\t}\n\t\n\t\tvar targeting = this.targeting();\n\t\tlog.start('Targeting');\n\t\tlog.attributeTable(targeting);\n\t\tlog.end();\n\t\n\t\tvar tags = Array.from(document.querySelectorAll(\".kxinvisible\"));\n\t\tif (tags.length) {\n\t\t\tlog.start(tags.length + ' Supertag© scripts');\n\t\t\ttags.forEach(function (tag) {\n\t\t\t\tlog(tag.dataset.alias, tag.querySelector(\"script\"));\n\t\t\t});\n\t\t\tlog.end();\n\t\t}\n\t\tlog.end();\n\t};\n\t\n\tmodule.exports = new Krux();\n\n/***/ },\n/* 110 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(111);\n\n/***/ },\n/* 111 */\n/***/ function(module, exports) {\n\n\t/*jshint browser:true, node:true*/\n\t\n\t'use strict';\n\t\n\tmodule.exports = Delegate;\n\t\n\t/**\n\t * DOM event delegator\n\t *\n\t * The delegator will listen\n\t * for events that bubble up\n\t * to the root node.\n\t *\n\t * @constructor\n\t * @param {Node|string} [root] The root node or a selector string matching the root node\n\t */\n\tfunction Delegate(root) {\n\t\n\t  /**\n\t   * Maintain a map of listener\n\t   * lists, keyed by event name.\n\t   *\n\t   * @type Object\n\t   */\n\t  this.listenerMap = [{}, {}];\n\t  if (root) {\n\t    this.root(root);\n\t  }\n\t\n\t  /** @type function() */\n\t  this.handle = Delegate.prototype.handle.bind(this);\n\t}\n\t\n\t/**\n\t * Start listening for events\n\t * on the provided DOM element\n\t *\n\t * @param  {Node|string} [root] The root node or a selector string matching the root node\n\t * @returns {Delegate} This method is chainable\n\t */\n\tDelegate.prototype.root = function (root) {\n\t  var listenerMap = this.listenerMap;\n\t  var eventType;\n\t\n\t  // Remove master event listeners\n\t  if (this.rootElement) {\n\t    for (eventType in listenerMap[1]) {\n\t      if (listenerMap[1].hasOwnProperty(eventType)) {\n\t        this.rootElement.removeEventListener(eventType, this.handle, true);\n\t      }\n\t    }\n\t    for (eventType in listenerMap[0]) {\n\t      if (listenerMap[0].hasOwnProperty(eventType)) {\n\t        this.rootElement.removeEventListener(eventType, this.handle, false);\n\t      }\n\t    }\n\t  }\n\t\n\t  // If no root or root is not\n\t  // a dom node, then remove internal\n\t  // root reference and exit here\n\t  if (!root || !root.addEventListener) {\n\t    if (this.rootElement) {\n\t      delete this.rootElement;\n\t    }\n\t    return this;\n\t  }\n\t\n\t  /**\n\t   * The root node at which\n\t   * listeners are attached.\n\t   *\n\t   * @type Node\n\t   */\n\t  this.rootElement = root;\n\t\n\t  // Set up master event listeners\n\t  for (eventType in listenerMap[1]) {\n\t    if (listenerMap[1].hasOwnProperty(eventType)) {\n\t      this.rootElement.addEventListener(eventType, this.handle, true);\n\t    }\n\t  }\n\t  for (eventType in listenerMap[0]) {\n\t    if (listenerMap[0].hasOwnProperty(eventType)) {\n\t      this.rootElement.addEventListener(eventType, this.handle, false);\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * @param {string} eventType\n\t * @returns boolean\n\t */\n\tDelegate.prototype.captureForType = function (eventType) {\n\t  return ['blur', 'error', 'focus', 'load', 'resize', 'scroll'].indexOf(eventType) !== -1;\n\t};\n\t\n\t/**\n\t * Attach a handler to one\n\t * event for all elements\n\t * that match the selector,\n\t * now or in the future\n\t *\n\t * The handler function receives\n\t * three arguments: the DOM event\n\t * object, the node that matched\n\t * the selector while the event\n\t * was bubbling and a reference\n\t * to itself. Within the handler,\n\t * 'this' is equal to the second\n\t * argument.\n\t *\n\t * The node that actually received\n\t * the event can be accessed via\n\t * 'event.target'.\n\t *\n\t * @param {string} eventType Listen for these events\n\t * @param {string|undefined} selector Only handle events on elements matching this selector, if undefined match root element\n\t * @param {function()} handler Handler function - event data passed here will be in event.data\n\t * @param {Object} [eventData] Data to pass in event.data\n\t * @returns {Delegate} This method is chainable\n\t */\n\tDelegate.prototype.on = function (eventType, selector, handler, useCapture) {\n\t  var root, listenerMap, matcher, matcherParam;\n\t\n\t  if (!eventType) {\n\t    throw new TypeError('Invalid event type: ' + eventType);\n\t  }\n\t\n\t  // handler can be passed as\n\t  // the second or third argument\n\t  if (typeof selector === 'function') {\n\t    useCapture = handler;\n\t    handler = selector;\n\t    selector = null;\n\t  }\n\t\n\t  // Fallback to sensible defaults\n\t  // if useCapture not set\n\t  if (useCapture === undefined) {\n\t    useCapture = this.captureForType(eventType);\n\t  }\n\t\n\t  if (typeof handler !== 'function') {\n\t    throw new TypeError('Handler must be a type of Function');\n\t  }\n\t\n\t  root = this.rootElement;\n\t  listenerMap = this.listenerMap[useCapture ? 1 : 0];\n\t\n\t  // Add master handler for type if not created yet\n\t  if (!listenerMap[eventType]) {\n\t    if (root) {\n\t      root.addEventListener(eventType, this.handle, useCapture);\n\t    }\n\t    listenerMap[eventType] = [];\n\t  }\n\t\n\t  if (!selector) {\n\t    matcherParam = null;\n\t\n\t    // COMPLEX - matchesRoot needs to have access to\n\t    // this.rootElement, so bind the function to this.\n\t    matcher = matchesRoot.bind(this);\n\t\n\t    // Compile a matcher for the given selector\n\t  } else if (/^[a-z]+$/i.test(selector)) {\n\t    matcherParam = selector;\n\t    matcher = matchesTag;\n\t  } else if (/^#[a-z0-9\\-_]+$/i.test(selector)) {\n\t    matcherParam = selector.slice(1);\n\t    matcher = matchesId;\n\t  } else {\n\t    matcherParam = selector;\n\t    matcher = matches;\n\t  }\n\t\n\t  // Add to the list of listeners\n\t  listenerMap[eventType].push({\n\t    selector: selector,\n\t    handler: handler,\n\t    matcher: matcher,\n\t    matcherParam: matcherParam\n\t  });\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * Remove an event handler\n\t * for elements that match\n\t * the selector, forever\n\t *\n\t * @param {string} [eventType] Remove handlers for events matching this type, considering the other parameters\n\t * @param {string} [selector] If this parameter is omitted, only handlers which match the other two will be removed\n\t * @param {function()} [handler] If this parameter is omitted, only handlers which match the previous two will be removed\n\t * @returns {Delegate} This method is chainable\n\t */\n\tDelegate.prototype.off = function (eventType, selector, handler, useCapture) {\n\t  var i, listener, listenerMap, listenerList, singleEventType;\n\t\n\t  // Handler can be passed as\n\t  // the second or third argument\n\t  if (typeof selector === 'function') {\n\t    useCapture = handler;\n\t    handler = selector;\n\t    selector = null;\n\t  }\n\t\n\t  // If useCapture not set, remove\n\t  // all event listeners\n\t  if (useCapture === undefined) {\n\t    this.off(eventType, selector, handler, true);\n\t    this.off(eventType, selector, handler, false);\n\t    return this;\n\t  }\n\t\n\t  listenerMap = this.listenerMap[useCapture ? 1 : 0];\n\t  if (!eventType) {\n\t    for (singleEventType in listenerMap) {\n\t      if (listenerMap.hasOwnProperty(singleEventType)) {\n\t        this.off(singleEventType, selector, handler);\n\t      }\n\t    }\n\t\n\t    return this;\n\t  }\n\t\n\t  listenerList = listenerMap[eventType];\n\t  if (!listenerList || !listenerList.length) {\n\t    return this;\n\t  }\n\t\n\t  // Remove only parameter matches\n\t  // if specified\n\t  for (i = listenerList.length - 1; i >= 0; i--) {\n\t    listener = listenerList[i];\n\t\n\t    if ((!selector || selector === listener.selector) && (!handler || handler === listener.handler)) {\n\t      listenerList.splice(i, 1);\n\t    }\n\t  }\n\t\n\t  // All listeners removed\n\t  if (!listenerList.length) {\n\t    delete listenerMap[eventType];\n\t\n\t    // Remove the main handler\n\t    if (this.rootElement) {\n\t      this.rootElement.removeEventListener(eventType, this.handle, useCapture);\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * Handle an arbitrary event.\n\t *\n\t * @param {Event} event\n\t */\n\tDelegate.prototype.handle = function (event) {\n\t  var i,\n\t      l,\n\t      type = event.type,\n\t      root,\n\t      phase,\n\t      listener,\n\t      returned,\n\t      listenerList = [],\n\t      target,\n\t      /** @const */EVENTIGNORE = 'ftLabsDelegateIgnore';\n\t\n\t  if (event[EVENTIGNORE] === true) {\n\t    return;\n\t  }\n\t\n\t  target = event.target;\n\t\n\t  // Hardcode value of Node.TEXT_NODE\n\t  // as not defined in IE8\n\t  if (target.nodeType === 3) {\n\t    target = target.parentNode;\n\t  }\n\t\n\t  root = this.rootElement;\n\t\n\t  phase = event.eventPhase || (event.target !== event.currentTarget ? 3 : 2);\n\t\n\t  switch (phase) {\n\t    case 1:\n\t      //Event.CAPTURING_PHASE:\n\t      listenerList = this.listenerMap[1][type];\n\t      break;\n\t    case 2:\n\t      //Event.AT_TARGET:\n\t      if (this.listenerMap[0] && this.listenerMap[0][type]) listenerList = listenerList.concat(this.listenerMap[0][type]);\n\t      if (this.listenerMap[1] && this.listenerMap[1][type]) listenerList = listenerList.concat(this.listenerMap[1][type]);\n\t      break;\n\t    case 3:\n\t      //Event.BUBBLING_PHASE:\n\t      listenerList = this.listenerMap[0][type];\n\t      break;\n\t  }\n\t\n\t  // Need to continuously check\n\t  // that the specific list is\n\t  // still populated in case one\n\t  // of the callbacks actually\n\t  // causes the list to be destroyed.\n\t  l = listenerList.length;\n\t  while (target && l) {\n\t    for (i = 0; i < l; i++) {\n\t      listener = listenerList[i];\n\t\n\t      // Bail from this loop if\n\t      // the length changed and\n\t      // no more listeners are\n\t      // defined between i and l.\n\t      if (!listener) {\n\t        break;\n\t      }\n\t\n\t      // Check for match and fire\n\t      // the event if there's one\n\t      //\n\t      // TODO:MCG:20120117: Need a way\n\t      // to check if event#stopImmediatePropagation\n\t      // was called. If so, break both loops.\n\t      if (listener.matcher.call(target, listener.matcherParam, target)) {\n\t        returned = this.fire(event, target, listener);\n\t      }\n\t\n\t      // Stop propagation to subsequent\n\t      // callbacks if the callback returned\n\t      // false\n\t      if (returned === false) {\n\t        event[EVENTIGNORE] = true;\n\t        event.preventDefault();\n\t        return;\n\t      }\n\t    }\n\t\n\t    // TODO:MCG:20120117: Need a way to\n\t    // check if event#stopPropagation\n\t    // was called. If so, break looping\n\t    // through the DOM. Stop if the\n\t    // delegation root has been reached\n\t    if (target === root) {\n\t      break;\n\t    }\n\t\n\t    l = listenerList.length;\n\t    target = target.parentElement;\n\t  }\n\t};\n\t\n\t/**\n\t * Fire a listener on a target.\n\t *\n\t * @param {Event} event\n\t * @param {Node} target\n\t * @param {Object} listener\n\t * @returns {boolean}\n\t */\n\tDelegate.prototype.fire = function (event, target, listener) {\n\t  return listener.handler.call(target, event, target);\n\t};\n\t\n\t/**\n\t * Check whether an element\n\t * matches a generic selector.\n\t *\n\t * @type function()\n\t * @param {string} selector A CSS selector\n\t */\n\tvar matches = function (el) {\n\t  if (!el) return;\n\t  var p = el.prototype;\n\t  return p.matches || p.matchesSelector || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector || p.oMatchesSelector;\n\t}(Element);\n\t\n\t/**\n\t * Check whether an element\n\t * matches a tag selector.\n\t *\n\t * Tags are NOT case-sensitive,\n\t * except in XML (and XML-based\n\t * languages such as XHTML).\n\t *\n\t * @param {string} tagName The tag name to test against\n\t * @param {Element} element The element to test with\n\t * @returns boolean\n\t */\n\tfunction matchesTag(tagName, element) {\n\t  return tagName.toLowerCase() === element.tagName.toLowerCase();\n\t}\n\t\n\t/**\n\t * Check whether an element\n\t * matches the root.\n\t *\n\t * @param {?String} selector In this case this is always passed through as null and not used\n\t * @param {Element} element The element to test with\n\t * @returns boolean\n\t */\n\tfunction matchesRoot(selector, element) {\n\t  /*jshint validthis:true*/\n\t  if (this.rootElement === window) return element === document;\n\t  return this.rootElement === element;\n\t}\n\t\n\t/**\n\t * Check whether the ID of\n\t * the element in 'this'\n\t * matches the given ID.\n\t *\n\t * IDs are case-sensitive.\n\t *\n\t * @param {string} id The ID to test against\n\t * @param {Element} element The element to test with\n\t * @returns boolean\n\t */\n\tfunction matchesId(id, element) {\n\t  return id === element.id;\n\t}\n\t\n\t/**\n\t * Short hand for off()\n\t * and root(), ie both\n\t * with no parameters\n\t *\n\t * @return void\n\t */\n\tDelegate.prototype.destroy = function () {\n\t  this.off();\n\t  this.root();\n\t};\n\n/***/ },\n/* 112 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * @fileOverview\n\t * Third party library for use with google publisher tags.\n\t *\n\t * @author Robin Marr, robin.marr@com\n\t */\n\t/**\n\t * ads.rubicon provides rubicon real time pricing integration for the FT advertising library\n\t * @name targeting\n\t * @memberof ads\n\t*/\n\tvar utils = __webpack_require__(94);\n\tvar config = __webpack_require__(93);\n\t\n\tfunction Rubicon() {}\n\t\n\tRubicon.prototype.init = function () {\n\t\tvar _this = this;\n\t\n\t\tthis.queue = utils.queue(this.initValuation.bind(this));\n\t\tthis.config = config('rubicon') || {};\n\t\tif (this.config.id && this.config.site) {\n\t\t\tvar api = this.config.api || '//tap-cdn.rubiconproject.com/partner/scripts/rubicon/dorothy.js?pc=';\n\t\t\tapi += this.config.id + '/' + this.config.site;\n\t\t\tutils.attach(api, true, function () {\n\t\t\t\t_this.queue.process();\n\t\t\t}, function () {\n\t\t\t\t_this.queue.setProcessor(function (slot) {\n\t\t\t\t\tutils.log.error('%s rtp valuation call failed', slot.name);\n\t\t\t\t}).process();\n\t\t\t});\n\t\n\t\t\tutils.on('ready', function (event) {\n\t\t\t\t_this.queue.add(event.detail.slot);\n\t\t\t});\n\t\t}\n\t};\n\t\n\t/**\n\t * initialise rubicon valuation for a slot\n\t * @name initValuation\n\t * @memberof Rubicon\n\t * @lends Rubicon\n\t*/\n\tRubicon.prototype.initValuation = function (slot) {\n\t\tvar config = this.config;\n\t\tvar zone = config.zones ? config.zones[slot.name] : false;\n\t\tvar size = config.formats ? config.formats[slot.name] : false;\n\t\n\t\tif (zone && size) {\n\t\t\t// rubicon loves globals\n\t\t\twindow.oz_api = 'valuation';\n\t\t\twindow.oz_callback = this.valuationCallbackFactory.bind(null, slot, config.target);\n\t\t\twindow.oz_ad_server = 'gpt';\n\t\t\twindow.oz_async = true;\n\t\t\twindow.oz_cached_only = config.cached || true;\n\t\t\twindow.oz_site = config.id + '/' + config.site;\n\t\t\twindow.oz_ad_slot_size = size;\n\t\t\twindow.oz_zone = zone;\n\t\t\twindow.oz_insight();\n\t\t}\n\t};\n\t\n\t/**\n\t * Valuation request callback factory\n\t * This generates the callback that receives the data from a valution request, it keeps the slotname in a closure.\n\t * @name init\n\t * @memberof Rubicon\n\t * @lends Rubicon\n\t*/\n\tRubicon.prototype.valuationCallbackFactory = function (slot, target, results) {\n\t\tslot.container.setAttribute('data-o-ads-rtp', results.estimate.tier);\n\t\tif (target) {\n\t\t\tslot.targeting.rtp = results.estimate.tier;\n\t\t}\n\t};\n\t\n\tmodule.exports = new Rubicon();\n\n/***/ },\n/* 113 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(94);\n\tvar config = __webpack_require__(93);\n\tvar targeting = __webpack_require__(108);\n\t\n\tfunction Admantx() {}\n\t\n\tAdmantx.prototype.init = function () {\n\t\tthis.config = config('admantx') || {};\n\t\tif (this.config.id) {\n\t\t\tthis.collections = this.config.collections || { admants: true };\n\t\t\tthis.api = this.config.url || 'http://usasync01.admantx.com/admantx/service?request=';\n\t\t\tthis.makeAPIRequest();\n\t\t}\n\t};\n\t\n\tAdmantx.prototype.makeAPIRequest = function () {\n\t\tvar requestData = {\n\t\t\t\"key\": this.config.id,\n\t\t\t\"method\": \"descriptor\",\n\t\t\t\"mode\": \"async\",\n\t\t\t\"decorator\": \"template.ft\",\n\t\t\t\"filter\": [\"default\"],\n\t\t\t\"type\": \"URL\",\n\t\t\t\"body\": encodeURIComponent(utils.getLocation())\n\t\t};\n\t\tvar url = this.api + encodeURIComponent(JSON.stringify(requestData));\n\t\tthis.xhr = utils.createCORSRequest(url, 'GET', this.resolve.bind(this), this.resolve.bind(this));\n\t};\n\t\n\tAdmantx.prototype.processCollection = function (collection, max) {\n\t\tvar names = [];\n\t\tvar j = utils.isNumeric(max) ? Math.min(max, collection.length) : collection.length;\n\t\tfor (var i = 0; i < j; i++) {\n\t\t\tnames.push(collection[i].name || collection[i]);\n\t\t}\n\t\n\t\treturn names;\n\t};\n\t\n\tAdmantx.prototype.resolve = function (response) {\n\t\tvar collections = this.collections;\n\t\tvar targetingObj = {};\n\t\tvar collection = void 0;\n\t\tvar shortName = void 0;\n\t\t/* istanbul ignore else  */\n\t\tif (utils.isString(response)) {\n\t\t\ttry {\n\t\t\t\tresponse = JSON.parse(response);\n\t\t\t} catch (e) {\n\t\t\t\t/* istanbul ignore next  */\n\t\t\t\t// if the response is not valid JSON;\n\t\t\t\tresponse = false;\n\t\t\t}\n\t\t}\n\t\n\t\t//parse required targetting data from the response\n\t\t/* istanbul ignore else  */\n\t\tif (response) {\n\t\t\tfor (collection in collections) {\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (collections.hasOwnProperty(collection) && collections[collection] && response[collection]) {\n\t\t\t\t\tshortName = collection.substr(0, 2);\n\t\t\t\t\ttargetingObj[shortName] = this.processCollection(response[collection], collections[collection]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\ttargeting.add(targetingObj);\n\t\t}\n\t};\n\t\n\tAdmantx.prototype.debug = function () {\n\t\tvar log = utils.log;\n\t\n\t\tif (!this.config) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tlog.start('Admantx');\n\t\tlog('%c id:', 'font-weight: bold', this.config.id);\n\t\tlog('%c api:', 'font-weight: bold', this.api);\n\t\n\t\tif (this.config.collections) {\n\t\t\tlog.start('Collections');\n\t\t\tlog('%c admants:', 'font-weight: bold', this.config.collections.admants);\n\t\t\tlog('%c categories:', 'font-weight: bold', this.config.collections.categories);\n\t\t\tlog.end();\n\t\t}\n\t\n\t\tif (this.xhr && this.xhr.response) {\n\t\t\tlog.start('Response');\n\t\t\tlog.start('Admants');\n\t\t\tlog.attributeTable(this.xhr.response.admants, ['value']);\n\t\t\tlog.end();\n\t\t\tlog.start('Categories');\n\t\t\tlog.attributeTable(this.xhr.response.categories, ['value']);\n\t\t\tlog.end();\n\t\t\tlog.end();\n\t\t}\n\t\tlog.end();\n\t};\n\t\n\tmodule.exports = new Admantx();\n\n/***/ },\n/* 114 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/*istanbul ignore next*/\n\tfunction debounce(func, wait, immediate) {\n\t\tvar timeout = void 0;\n\t\treturn function () {\n\t\t\tvar context = this;\n\t\t\tvar args = arguments;\n\t\t\tvar later = function later() {\n\t\t\t\ttimeout = null;\n\t\t\t\tif (!immediate) func.apply(context, args);\n\t\t\t};\n\t\t\tvar callNow = immediate && !timeout;\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t\tif (callNow) {\n\t\t\t\tfunc.apply(context, args);\n\t\t\t}\n\t\t};\n\t};\n\t\n\tfunction getAppName() {\n\t\tvar element = document.querySelector('[data-next-app]');\n\t\tif (element) {\n\t\t\treturn element.getAttribute('data-next-app');\n\t\t}\n\t\treturn 'unknown';\n\t}\n\t\n\tfunction getLayoutName() {\n\t\tvar layout = 'default';\n\t\tvar abStateEl = document.querySelector('[data-ab-state]');\n\t\tif (window.location.search.indexOf('adsLayout') === 1) {\n\t\t\tvar regex = new RegExp('(adsLayout=([^&#]*)|&|#|$)');\n\t\t\tlayout = regex.exec(window.location.search.substring(1))[2];\n\t\t} else if (document.querySelector('[data-ads-layout]')) {\n\t\t\tlayout = document.querySelector('[data-ads-layout]').getAttribute('data-ads-layout');\n\t\t}\n\t\tif (abStateEl) {\n\t\t\tvar abState = abStateEl.getAttribute('data-ab-state');\n\t\t\tvar adsLayoutAB = abState && abState.match(/adsLazyLoadPosition:(control|50pc|100pc|onload)/);\n\t\t\tif (adsLayoutAB && adsLayoutAB.length > 1) {\n\t\t\t\tlayout = 'lazyload-' + adsLayoutAB[1];\n\t\t\t}\n\t\t}\n\t\n\t\treturn layout;\n\t}\n\t\n\tfunction getMetaData(name) {\n\t\tvar meta = document.querySelector('meta[name=\"' + name + '\"]');\n\t\tif (meta) {\n\t\t\treturn meta.getAttribute('content');\n\t\t}\n\t\treturn false;\n\t}\n\t\n\tfunction keyValueString(obj) {\n\t\treturn Object.keys(obj).map(function (key) {\n\t\t\treturn key + '=' + obj[key];\n\t\t}).join(';');\n\t}\n\t\n\tfunction getReferrer() {\n\t\treturn document.referrer;\n\t}\n\t\n\tfunction isEmpty(htmlNode) {\n\t\treturn htmlNode.firstChild === null || htmlNode.firstChild.nodeType !== 1 || htmlNode.firstChild.style.display === 'none';\n\t}\n\t\n\tfunction log() {\n\t\tvar type = void 0;\n\t\tvar args = void 0;\n\t\tvar argsIndex = void 0;\n\t\tif ('log warn error info'.indexOf(arguments[0]) === -1) {\n\t\t\ttype = 'log';\n\t\t\targsIndex = 0;\n\t\t} else {\n\t\t\ttype = arguments[0];\n\t\t\targsIndex = 1;\n\t\t}\n\t\n\t\targs = [].slice.call(arguments, argsIndex);\n\t\n\t\tif (!log.isOn() || !window.console || !window.console[type]) {\n\t\t\treturn;\n\t\t}\n\t\n\t\twindow.console[type].apply(window.console, args);\n\t}\n\t\n\tlog.warn = function () {\n\t\tvar args = ['warn'].concat([].slice.call(arguments, 0));\n\t\tlog.apply(null, args);\n\t};\n\t\n\tlog.error = function () {\n\t\tvar args = ['error'].concat([].slice.call(arguments, 0));\n\t\tlog.apply(null, args);\n\t};\n\t\n\tlog.info = function () {\n\t\tvar args = ['info'].concat([].slice.call(arguments, 0));\n\t\tlog.apply(null, args);\n\t};\n\t\n\tlog.start = function () {\n\t\tif (!log.isOn() || !window.console || !window.console.groupCollapsed) {\n\t\t\treturn;\n\t\t}\n\t\n\t\twindow.console.groupCollapsed('next-ads-component');\n\t};\n\t\n\tlog.end = function () {\n\t\tif (!log.isOn() || !window.console || !window.console.groupEnd) {\n\t\t\treturn;\n\t\t}\n\t\n\t\twindow.console.groupEnd();\n\t};\n\t\n\tlog.isOn = function () {\n\t\treturn location.search.indexOf('DEBUG=ADS') > -1;\n\t};\n\t\n\tmodule.exports = {\n\t\tdebounce: debounce,\n\t\tgetAppName: getAppName,\n\t\tgetLayoutName: getLayoutName,\n\t\tgetMetaData: getMetaData,\n\t\tgetReferrer: getReferrer,\n\t\tkeyValueString: keyValueString,\n\t\tisEmpty: isEmpty,\n\t\tlog: log\n\t};\n\n/***/ },\n/* 115 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(114);\n\tvar sandbox = __webpack_require__(116);\n\tvar extend = __webpack_require__(91).utils.extend;\n\tvar apiUrlRoot = 'https://ads-api.ft.com/v1/';\n\t\n\tfunction getLazyLoadConfig(flags) {\n\t\tswitch (flags.adsLazyLoadPosition) {\n\t\t\tcase 'onload':\n\t\t\t\treturn false;\n\t\t\tcase '50pc':\n\t\t\t\treturn { viewportMargin: '50% 0%' };\n\t\t\tcase '100pc':\n\t\t\t\treturn { viewportMargin: '100% 0%' };\n\t\t\tdefault:\n\t\t\t\treturn { viewportMargin: '0%' };\n\t\t}\n\t}\n\t\n\tmodule.exports = function (flags) {\n\t\tvar pageType = utils.getAppName();\n\t\tvar eidMatch = document.cookie.match(/EID=(\\d+)/);\n\t\n\t\t//Temporarily get EID from FT_U cookie until all ad systems stop using it\n\t\tvar userCookieMetadata = {\n\t\t\teid: eidMatch && eidMatch.length > 1 ? eidMatch[1] : null\n\t\t};\n\t\n\t\tvar targeting = extend({\n\t\t\tpt: pageType.toLowerCase().substr(0, 3),\n\t\t\tnlayout: utils.getLayoutName()\n\t\t}, userCookieMetadata);\n\t\n\t\tvar kruxConfig = flags.get('krux') && {\n\t\t\tid: 'KHUSeE3x',\n\t\t\tattributes: {\n\t\t\t\tuser: userCookieMetadata,\n\t\t\t\tpage: {}\n\t\t\t}\n\t\t};\n\t\n\t\tfunction getContextualTargeting(appName) {\n\t\t\tvar uuid = void 0;\n\t\t\tvar url = void 0;\n\t\t\tvar apiUrlRoot = 'https://ads-api.ft.com/v1/';\n\t\t\tif (appName === 'article') {\n\t\t\t\tuuid = document.querySelector('[data-content-id]').getAttribute('data-content-id');\n\t\n\t\t\t\tvar referrer = utils.getReferrer();\n\t\t\t\turl = apiUrlRoot + 'content/' + uuid;\n\t\t\t\tif (referrer) {\n\t\t\t\t\turl += '?referrer=' + encodeURIComponent(referrer.split(/[?#]/)[0]);\n\t\t\t\t}\n\t\t\t} else if (appName === 'stream-page') {\n\t\t\t\tuuid = document.querySelector('[data-concept-id]').getAttribute('data-concept-id');\n\t\t\t\turl = apiUrlRoot + 'concept/' + uuid;\n\t\t\t}\n\t\n\t\t\treturn url;\n\t\t};\n\t\n\t\tfunction getZone() {\n\t\t\tvar zone = [utils.getMetaData('dfp_site'), utils.getMetaData('dfp_zone')].filter(function (a) {\n\t\t\t\treturn a;\n\t\t\t});\n\t\t\tif (!zone.length) {\n\t\t\t\tzone = ['unclassified'];\n\t\t\t}\n\t\t\treturn zone.join('/');\n\t\t}\n\t\n\t\treturn {\n\t\t\tgpt: {\n\t\t\t\tnetwork: '5887',\n\t\t\t\tsite: sandbox.isActive() ? 'sandbox.next.ft' : 'ft.com',\n\t\t\t\tzone: getZone()\n\t\t\t},\n\t\t\tformats: {\n\t\t\t\tPaidPost: {\n\t\t\t\t\tsizes: 'fluid'\n\t\t\t\t}\n\t\t\t},\n\t\t\tkrux: kruxConfig,\n\t\t\tcollapseEmpty: 'before',\n\t\t\tdfp_targeting: utils.keyValueString(targeting),\n\t\t\tlazyLoad: getLazyLoadConfig(flags),\n\t\t\ttargetingApi: {\n\t\t\t\tuser: apiUrlRoot + 'user',\n\t\t\t\tpage: getContextualTargeting(pageType),\n\t\t\t\tusePageZone: true\n\t\t\t}\n\t\t};\n\t};\n\n/***/ },\n/* 116 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction sandbox() {\n\t\treturn location.hash.indexOf('adsandbox') > -1;\n\t}\n\t\n\tmodule.exports.isActive = sandbox;\n\n/***/ },\n/* 117 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t* The Reporter instance adds a \"Report broken Ad\"\n\t* link to a container (Slot) and provides methods\n\t* to report the loaded advert to a given endpoint\n\t* @constructor\n\t*/\n\tfunction Reporter(slot) {\n\t\tthis.config = {\n\t\t\tendpoint: '/broken-ad-reporter/report/', // endpoint that handles POST report\n\t\t\tslackChannel: 'https://financialtimes.slack.com/messages/advertising-dev', // slack channel for reporting broken ads\n\t\t\tdefaultText: 'Report broken Ad', // default text on the link\n\t\t\tcssClass: 'advert__report-link' // link css class\n\t\t};\n\t\n\t\tthis.adData = {\n\t\t\tgpt: {\n\t\t\t\tcreativeId: slot.gpt.creativeId,\n\t\t\t\tlineItemId: slot.gpt.lineItemId,\n\t\t\t\tsize: slot.gpt.size,\n\t\t\t\tserviceName: slot.gpt.serviceName,\n\t\t\t\tunitName: slot.gpt.unitName\n\t\t\t},\n\t\t\ttargeting: slot.targeting\n\t\t};\n\t\tthis.container = slot.container; // store ref to container\n\t\tthis.link = this.addLinkToContainer(); // add link and store ref\n\t\tthis.onClickHandler = this.addEvent('click', this.onClick, this); // store ref to handler for use within promise\n\t\tthis.hasReported = false;\n\t}\n\t\n\t/**\n\t* Given an event type, a handler and a caller, will addEventListener on link\n\t* done in this way so we store a reference to the handler for later use (i.e removal)\n\t* @returns event handler\n\t*/\n\tReporter.prototype.addEvent = function (event, handler, caller) {\n\t\tvar _handler = void 0;\n\t\tthis.link.addEventListener(event, _handler = function _handler(e) {\n\t\t\thandler.call(caller, e);\n\t\t});\n\t\treturn _handler;\n\t};\n\t\n\t/**\n\t* Given an event type and a ref to the handler function to remove, will removeEventListener on link\n\t*/\n\tReporter.prototype.removeEvent = function (event, handler) {\n\t\tthis.link.removeEventListener(event, handler);\n\t};\n\t\n\tReporter.prototype.destroy = function () {\n\t\tthis.removeEvent('click', this.onClickHandler);\n\t\tif (this.link) {\n\t\t\tthis.link.parentElement.removeChild(this.link);\n\t\t}\n\t};\n\t\n\t/**\n\t* Adds the link to the container\n\t* by default it simply links to the config.slack_channel\n\t* @returns link\n\t*/\n\tReporter.prototype.addLinkToContainer = function () {\n\t\tvar btn = document.createElement('button');\n\t\tbtn.classList.add(this.config.cssClass);\n\t\tbtn.innerHTML = this.config.defaultText;\n\t\t// attatch the link\n\t\tthis.container.appendChild(btn);\n\t\treturn this.container.lastChild;\n\t};\n\t\n\t/**\n\t* Changes the innerHTML of the link\n\t* @returns this\n\t*/\n\tReporter.prototype.updateLink = function (html) {\n\t\tthis.link.innerHTML = html;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t* Click event handler for the link\n\t* will replace the default href behaviour (going to config.slack_channel)\n\t*/\n\tReporter.prototype.onClick = function (e) {\n\t\te.preventDefault();\n\t\tif (this.hasReported) {\n\t\t\twindow.open(this.config.slackChannel, '_blank');\n\t\t} else {\n\t\t\tthis.dispatch(this.adData);\n\t\t}\n\t};\n\t\n\t/**\n\t* Given data, POST to config.next_ads_reporter_url and handle response\n\t*/\n\tReporter.prototype.dispatch = function (data) {\n\t\tvar _this = this;\n\t\n\t\t// remove the event listener, we dont want to trigger dispatch again\n\t\t// will revert to href link whether success or fail\n\t\tthis.hasReported = true;\n\t\n\t\tif (!this.adData) {\n\t\t\tthis.updateLink('Insufficient Ad data, try #slack');\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar opts = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tcredentials: 'include',\n\t\t\tbody: JSON.stringify(data)\n\t\t};\n\t\n\t\tfetch(this.config.endpoint, opts).then(function (response) {\n\t\t\tif (response.status !== 200) {\n\t\t\t\tthrow Error(response.statusText || response.status);\n\t\t\t}\n\t\t\treturn response.text(); // read and pass on the response.text()\n\t\t}).then(function (response) {\n\t\t\t_this.updateLink('&#10004; ' + response + ', follow up on #slack');\n\t\t}).catch(function (err) {\n\t\t\t_this.updateLink('&#10008; Failed to report Ad, try #slack');\n\t\t\treturn console.error('Failed to report Ad: ' + err); //eslint-disable-line\n\t\t});\n\t};\n\t\n\tmodule.exports = Reporter;\n\n/***/ },\n/* 118 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(75);\n\t\n\tmodule.exports = function (timingsObject, slotDetails) {\n\t\tvar performance = window.performance || window.msPerformance || window.webkitPerformance || window.mozPerformance;\n\t\tif (performance && performance.mark && timingsObject) {\n\t\t\tvar offsets = _calculateOffsets(performance, timingsObject);\n\t\t\tvar marks = _calculateMarks(performance, timingsObject);\n\t\n\t\t\t(0, _utils.broadcast)('oTracking.event', {\n\t\t\t\tcategory: 'ads',\n\t\t\t\taction: 'first-load',\n\t\t\t\ttimings: { offsets: offsets, marks: marks },\n\t\t\t\tcreative: {\n\t\t\t\t\tid: slotDetails.gpt.creativeId,\n\t\t\t\t\tserviceName: slotDetails.gpt.serviceName,\n\t\t\t\t\tsize: slotDetails.container.getAttribute('data-o-ads-loaded')\n\t\t\t\t}\n\t\n\t\t\t});\n\t\t}\n\t};\n\t\n\tvar _calculateOffsets = function _calculateOffsets(performance, timings) {\n\t\tvar offsets = {};\n\t\tObject.keys(timings).forEach(function (timingName) {\n\t\t\toffsets[timingName] = {\n\t\t\t\tdomContentLoadedEventEnd: timings[timingName] - performance.timing['domContentLoadedEventEnd'],\n\t\t\t\tloadEventEnd: timings[timingName] - performance.timing['loadEventEnd'],\n\t\t\t\tdomInteractive: timings[timingName] - performance.timing['domInteractive']\n\t\t\t};\n\t\t});\n\t\treturn offsets;\n\t};\n\t\n\tvar _calculateMarks = function _calculateMarks(performance, timings) {\n\t\tvar marks = {};\n\t\tif (performance.getEntriesByName) {\n\t\t\tObject.keys(timings).forEach(function (timingName) {\n\t\t\t\tperformance.getEntriesByName(timingName).forEach(function (mark) {\n\t\t\t\t\tmarks[mark.name] = Math.round(mark.startTime);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn marks;\n\t};\n\n/***/ },\n/* 119 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar debounce = __webpack_require__(114).debounce;\n\t\n\tfunction Sticky(el, opts) {\n\t\tthis.el = el;\n\t\tthis.opts = opts || {};\n\t\tthis.sibling = opts.sibling ? document.querySelector(opts.sibling) : null;\n\t\tthis.stickUntil = opts.stickUntil ? document.querySelector(opts.stickUntil) : null;\n\t\tif (typeof el === 'undefined') return;\n\t\tthis.opts.stickAfter = this.el.getBoundingClientRect().top;\n\t}\n\t\n\tSticky.prototype.stick = function () {\n\t\tthis.el.style.position = 'fixed';\n\t\tthis.el.style.top = this.opts.topOffset || '0';\n\t\tif (this.sibling) {\n\t\t\tthis.sibling.style.marginTop = this.el.offsetHeight + 'px';\n\t\t}\n\t};\n\t\n\tSticky.prototype.onScroll = function () {\n\t\tif (this.stickyUntilPoint > window.pageYOffset && window.pageYOffset > this.opts.stickAfter) {\n\t\t\trequestAnimationFrame(this.stick.bind(this));\n\t\t} else if (this.stickyUntilPoint < window.pageYOffset) {\n\t\t\trequestAnimationFrame(this.unstick.bind(this));\n\t\t} else if (window.pageYOffset < this.opts.stickAfter) {\n\t\t\tthis.el.style.position = 'static';\n\t\t}\n\t};\n\t\n\tSticky.prototype.bindScroll = function () {\n\t\tthis.onScrollListener = debounce(this.onScroll).bind(this);\n\t\twindow.addEventListener('scroll', this.onScrollListener);\n\t};\n\t\n\tSticky.prototype.unstick = function () {\n\t\n\t\tthis.el.style.position = 'absolute';\n\t\tthis.el.style.top = this.stickyUntilPoint - this.el.offsetHeight + 'px';\n\t\t//this.sibling.style.marginTop = this.el.offsetHeight + 'px';\n\t};\n\t\n\tSticky.prototype.init = function () {\n\t\tif (!this.el || window.pageYOffset > 0) {\n\t\t\treturn;\n\t\t};\n\t\tthis.stickyUntilPoint = this.stickUntil.offsetTop + this.stickUntil.offsetHeight - this.el.offsetHeight;\n\t\tthis.el.style.zIndex = '23';\n\t\tthis.bindScroll();\n\t};\n\t\n\tmodule.exports = Sticky;\n\n/***/ },\n/* 120 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\tinit: function init(flags, appInfo) {\n\t\t\t__webpack_require__(121).init(flags, appInfo);\n\t\t},\n\t\tlazyInit: function lazyInit(flags) {\n\t\t\twindow.addEventListener('ftNextLoaded', function () {\n\t\t\t\t__webpack_require__(151)(flags);\n\t\t\t\t__webpack_require__(152)(flags);\n\t\t\t\t__webpack_require__(153)(flags);\n\t\t\t\t__webpack_require__(154)(flags);\n\t\t\t});\n\t\t},\n\t\tscrollDepthComponents: __webpack_require__(155)\n\t\n\t};\n\n/***/ },\n/* 121 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(75);\n\t\n\tvar oTracking = __webpack_require__(122);\n\tvar oGrid = __webpack_require__(140);\n\tvar oViewport = __webpack_require__(99);\n\tvar nextEvents = __webpack_require__(142);\n\t\n\tfunction nodesToArray(nodelist) {\n\t\treturn [].slice.call(nodelist);\n\t}\n\t\n\tfunction getRootData(name) {\n\t\treturn document.documentElement.getAttribute('data-' + name);\n\t}\n\t\n\tvar oTrackingWrapper = {\n\t\tinit: function init(flags, appInfo) {\n\t\n\t\t\tif (!flags || !flags.get('oTracking')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\t// oTracking sometimes errors - this makes sure that if it does it won't bring the whole bootstrap process down with it\n\t\t\ttry {\n\t\t\t\tvar userData = {\n\t\t\t\t\tlayout: oGrid.getCurrentLayout(),\n\t\t\t\t\torientation: oViewport.getOrientation()\n\t\t\t\t};\n\t\n\t\t\t\tvar connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\n\t\n\t\t\t\tif (connection && connection.type) {\n\t\t\t\t\tuserData.connectionType = connection.type;\n\t\t\t\t}\n\t\n\t\t\t\tvar context = {\n\t\t\t\t\tproduct: 'next',\n\t\t\t\t\tapp: appInfo && appInfo.name,\n\t\t\t\t\tappVersion: appInfo && appInfo.version\n\t\t\t\t};\n\t\n\t\t\t\tvar contentId = getRootData('content-id');\n\t\t\t\tif (contentId) {\n\t\t\t\t\tcontext.rootContentId = contentId;\n\t\t\t\t}\n\t\n\t\t\t\tvar conceptId = getRootData('concept-id');\n\t\t\t\tif (conceptId) {\n\t\t\t\t\tcontext.rootConceptId = conceptId;\n\t\t\t\t\tcontext.rootTaxonomy = getRootData('taxonomy');\n\t\t\t\t}\n\t\n\t\t\t\tvar errorStatus = (/nextErrorStatus=(\\d{3})/.exec(window.location.search) || [])[1];\n\t\t\t\tvar pageViewConf = { context: {} };\n\t\n\t\t\t\tif (errorStatus) {\n\t\t\t\t\t// TODO after https://github.com/Financial-Times/o-tracking/issues/122#issuecomment-194970465\n\t\t\t\t\t// this should be redundant as context woudl propagate down to each event in its entirety\n\t\t\t\t\tcontext.url = pageViewConf.context.url = window.parent.location.toString();\n\t\t\t\t\tcontext.referrer = pageViewConf.context.referrer = window.parent.document.referrer;\n\t\t\t\t\tcontext.errorStatus = pageViewConf.context.errorStatus = errorStatus;\n\t\t\t\t}\n\t\n\t\t\t\tvar edition = document.querySelector('[data-next-edition]') ? document.querySelector('[data-next-edition]').getAttribute('data-next-edition') : null;\n\t\t\t\tcontext.edition = edition;\n\t\t\t\tvar segmentId = String(window.location.search).match(/[?&]segmentId=([^?&])/) || [];\n\t\t\t\tif (segmentId[1]) {\n\t\t\t\t\tcontext['marketing_segment_id'] = segmentId[1];\n\t\t\t\t}\n\t\t\t\tvar pageMeta = window.FT && window.FT.pageMeta;\n\t\t\t\tif (pageMeta && pageMeta === Object(pageMeta)) {\n\t\t\t\t\tfor (var key in pageMeta) {\n\t\t\t\t\t\tif (pageMeta.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tcontext[key] = pageMeta[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\toTracking.init({\n\t\t\t\t\tserver: 'https://spoor-api.ft.com/ingest',\n\t\t\t\t\tcontext: context,\n\t\t\t\t\tuser: userData,\n\t\t\t\t\tuseSendBeacon: flags.get('sendBeacon')\n\t\t\t\t});\n\t\n\t\t\t\t// barriers\n\t\t\t\tvar barrierType = document.querySelector('[data-barrier]');\n\t\t\t\tvar productSelectorFlag = document.querySelector('[data-barrier-is-product-selector]');\n\t\n\t\t\t\tif (barrierType) {\n\t\t\t\t\tpageViewConf.context.barrier = true;\n\t\t\t\t\tpageViewConf.context.barrierType = barrierType.getAttribute('data-barrier');\n\t\t\t\t};\n\t\n\t\t\t\t// FIXME - should not fire on barriers, but needs to be around for a while data analytics fix their SQL\n\t\t\t\toTracking.page(pageViewConf.context);\n\t\n\t\t\t\tif (barrierType) {\n\t\n\t\t\t\t\tvar isProductSelector = productSelectorFlag ? productSelectorFlag.getAttribute('data-barrier-is-product-selector') === 'true' : false;\n\t\n\t\t\t\t\t// https://docs.google.com/document/d/18_yV2s813XCrBF7w6196FLhLJzWXK4hXT2sIpDZVvhQ/edit?ts=575e9368#\n\t\t\t\t\tvar opportunity = {\n\t\t\t\t\t\ttype: isProductSelector ? 'products' : 'barrier',\n\t\t\t\t\t\tsubtype: barrierType.getAttribute('data-barrier')\n\t\t\t\t\t};\n\t\n\t\t\t\t\tvar offers = document.querySelectorAll('[data-offer-id]');\n\t\t\t\t\tvar acquisitionContext = document.querySelectorAll('[data-acquisition-context]');\n\t\n\t\t\t\t\t(0, _utils.broadcast)('oTracking.event', Object.assign({\n\t\t\t\t\t\tcategory: 'barrier',\n\t\t\t\t\t\taction: 'view',\n\t\t\t\t\t\topportunity: opportunity,\n\t\t\t\t\t\ttype: barrierType.getAttribute('data-barrier'),\n\t\t\t\t\t\tacquisitionContext: nodesToArray(acquisitionContext).map(function (e) {\n\t\t\t\t\t\t\treturn e.getAttribute('data-acquisition-context');\n\t\t\t\t\t\t}),\n\t\t\t\t\t\toffers: nodesToArray(offers).map(function (e) {\n\t\t\t\t\t\t\treturn e.getAttribute('data-offer-id');\n\t\t\t\t\t\t})\n\t\t\t\t\t}, context));\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t(0, _utils.broadcast)('oErrors.log', {\n\t\t\t\t\terror: err,\n\t\t\t\t\tinfo: {\n\t\t\t\t\t\tmessage: 'Failed to init o-tracking'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tnextEvents.init();\n\t\t}\n\t};\n\t\n\tmodule.exports = oTrackingWrapper;\n\n/***/ },\n/* 122 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(123);\n\n/***/ },\n/* 123 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global require, module */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\tvar settings = __webpack_require__(124);\n\tvar user = __webpack_require__(125);\n\tvar session = __webpack_require__(129);\n\tvar send = __webpack_require__(130);\n\t\n\t/**\n\t * The version of the tracking module.\n\t * @type {string}\n\t */\n\tvar version = '1.1.11';\n\t/**\n\t * The source of this event.\n\t * @type {string}\n\t */\n\tvar source = 'o-tracking';\n\t/**\n\t * The API key.\n\t * @type {string}\n\t */\n\tvar api_key = 'qUb9maKfKbtpRsdp0p2J7uWxRPGJEP';\n\t\n\t/**\n\t * @class Tracking\n\t */\n\tfunction Tracking() {\n\t\tthis.version = version;\n\t\tthis.source = source;\n\t\tthis.api_key = api_key;\n\t\n\t\t/**\n\t  * The initialised state of the object.\n\t  * @type {boolean}\n\t  */\n\t\tthis.initialised = false;\n\t}\n\t\n\t/**\n\t * Turn on/off developer mode. (Can also be activated on init.)\n\t * @param {boolean} level - Turn on or off, defaults to false if omitted.\n\t * @return {undefined}\n\t */\n\tTracking.prototype.developer = function (level) {\n\t\tif (level) {\n\t\t\tsettings.set('developer', true);\n\t\t} else {\n\t\t\tsettings.destroy('developer', null);\n\t\t\tsettings.destroy('no_send', null);\n\t\t}\n\t};\n\t\n\t/**\n\t * Clean up the tracking module.\n\t * @return {undefined}\n\t */\n\tTracking.prototype.destroy = function () {\n\t\tthis.developer(false);\n\t\tthis.initialised = false;\n\t\n\t\tsettings.destroy('config');\n\t\tsettings.destroy('page_sent');\n\t};\n\t\n\t/**\n\t * Overload toString method to show the version.\n\t * @return {string} The module's version.\n\t */\n\tTracking.prototype.toString = function () {\n\t\treturn 'oTracking version ' + version;\n\t};\n\t\n\tTracking.prototype.page = __webpack_require__(136);\n\t\n\tTracking.prototype.event = __webpack_require__(138);\n\t\n\tTracking.prototype.link = __webpack_require__(139);\n\t\n\tTracking.prototype.utils = __webpack_require__(126);\n\t\n\t/**\n\t * Initialises the Tracking object.\n\t *\n\t * All options are optional, if a configuration option is missing, the module\n\t * will try to initialise using any configuration found in the DOM using the\n\t * script config tag.\n\t *\n\t * @example\n\t * <!-- DOM configuration settings -->\n\t * <script type='application/json' data-o-tracking-config>\n\t * page: {\n\t * \t product: 'desktop'\n\t * },\n\t * user: {\n\t *   user_id: '023ur9jfokwenvcklwnfiwhfoi324'\n\t * }\n\t * </script>\n\t *\n\t * @param {Object} config \t\t\t\t\t- See {@link Tracking} for the configuration options.\n\t * @param {boolean} config.developer        - Optional, if `true`, logs certain actions.\n\t * @param {boolean} config.noSend           - Optional, if `true`, won't send events.\n\t * @param {string} config.configId          - Optional\n\t * @param {string} config.session           - Optional\n\t *\n\t * @return {Tracking} - Returns the tracking object\n\t */\n\tTracking.prototype.init = function (config) {\n\t\tif (this.initialised) {\n\t\t\treturn this;\n\t\t}\n\t\n\t\tvar hasDeclarativeConfig = !!this._getDeclarativeConfigElement();\n\t\n\t\tif (!(hasDeclarativeConfig || config)) {\n\t\t\treturn this;\n\t\t}\n\t\n\t\tconfig = config || {};\n\t\tif (hasDeclarativeConfig) {\n\t\t\tconfig = this._getDeclarativeConfig(config);\n\t\t}\n\t\n\t\tsettings.set('config', config);\n\t\tsettings.set('version', this.version);\n\t\tsettings.set('source', this.source);\n\t\tsettings.set('api_key', this.api_key);\n\t\n\t\tsettings.set('page_sent', false);\n\t\n\t\t// Developer mode\n\t\tif (config.developer) {\n\t\t\tthis.developer(config.developer);\n\t\n\t\t\tif (config.noSend) {\n\t\t\t\tsettings.set('no_send', true);\n\t\t\t}\n\t\t}\n\t\n\t\t// User identifier\n\t\tuser.init(config.user ? config.user.user_id : null);\n\t\n\t\t// Session\n\t\tsession.init(config.session);\n\t\n\t\t// Initialize the sending queue.\n\t\tsend.init();\n\t\n\t\tthis.event.init();\n\t\tthis.page.init();\n\t\tthis.initialised = true;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Checks if the <script type='application/json' data-o-tracking-config> element is in the DOM\n\t * @private\n\t * @return {HTMLElement} - Returns the <script> element if found\n\t */\n\tTracking.prototype._getDeclarativeConfigElement = function () {\n\t\treturn document.querySelector('script[data-o-tracking-config]');\n\t};\n\t\n\t/**\n\t * Initialises additional data using the <script type='application/json' data-o-tracking-config> element in the DOM.\n\t * @private\n\t * @param {Object} options - A partially, or fully filled options object.  If\n\t *                           an option is missing, this method will attempt to\n\t *                           initialise it from the DOM.\n\t * @return {Object} - The options modified to include the options gathered from the DOM\n\t */\n\tTracking.prototype._getDeclarativeConfig = function (options) {\n\t\tvar configEl = this._getDeclarativeConfigElement();\n\t\tvar declarativeConfigString = void 0;\n\t\tif (configEl) {\n\t\t\tdeclarativeConfigString = configEl.textContent || configEl.innerText || configEl.innerHTML;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t\n\t\tvar declarativeOptions = void 0;\n\t\n\t\ttry {\n\t\t\tdeclarativeOptions = JSON.parse(declarativeConfigString);\n\t\t} catch (e) {\n\t\t\tvar configError = new Error('Invalid JSON configuration syntax, check validity for o-tracking configuration: \"' + e.message + '\"');\n\t\t\tthis.utils.broadcast('oErrors', 'log', {\n\t\t\t\terror: configError.message,\n\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t});\n\t\t\tthrow configError;\n\t\t}\n\t\n\t\tfor (var property in declarativeOptions) {\n\t\t\tif (declarativeOptions.hasOwnProperty(property)) {\n\t\t\t\toptions[property] = options[property] || declarativeOptions[property];\n\t\t\t}\n\t\t}\n\t\n\t\treturn options;\n\t};\n\t\n\tvar tracking = new Tracking();\n\t\n\tfunction initialise() {\n\t\ttracking.init();\n\t\tdocument.removeEventListener('o.DOMContentLoaded', initialise);\n\t}\n\t\n\t// Try and initialise on o.DOMContentLoaded. If it fails, defer to the\n\t// consumer of the library.\n\tdocument.addEventListener('o.DOMContentLoaded', initialise);\n\t\n\t/**\n\t * A constructed object, this module is a Singleton as we only want one\n\t * instance sending events. See {@link Tracking} for the publicly available\n\t * interface.\n\t * @type {Tracking}\n\t */\n\tmodule.exports = tracking;\n\n/***/ },\n/* 124 */\n/***/ function(module, exports) {\n\n\t/*global module */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\tvar settings = {};\n\t\n\t/**\n\t * Very basic implementation of deep clone, and only supports simple POJO objects and\n\t * native arrays.\n\t * @param  {*} value Any value\n\t * @return {*}       Copy of value\n\t * @private\n\t */\n\tfunction clone(value) {\n\t  if (value === undefined) {\n\t    return value;\n\t  }\n\t  switch (Object.prototype.toString.call(value)) {\n\t    case '[object Object]':\n\t      return JSON.parse(JSON.stringify(value));\n\t    case '[object Array]':\n\t      return [].slice.call(value);\n\t    default:\n\t      return value;\n\t  }\n\t}\n\t\n\t/**\n\t * Saves a value. Stores a copy rather than a reference, to avoid mutations leaking.\n\t *\n\t * @param {string} key - The key to use to store the object\n\t * @param {*} value - The value\n\t * @return {undefined}\n\t */\n\tfunction setValue(key, value) {\n\t  settings[key] = clone(value);\n\t}\n\t\n\t/**\n\t * Retrieves a value from the settings object. Returns a copy rather than reference, to\n\t * avoid mutations leaking.\n\t *\n\t * @param {string} key - The key to get\n\t * @return {*} - The setting.\n\t */\n\tfunction getValue(key) {\n\t  return clone(settings[key]);\n\t}\n\t\n\t/**\n\t * Deletes a value\n\t *\n\t * @param  {string} key - The key to delete\n\t * @return {undefined}\n\t */\n\tfunction destroy(key) {\n\t  delete settings[key];\n\t}\n\t\n\tmodule.exports = {\n\t  'set': setValue,\n\t  'get': getValue,\n\t  'destroy': destroy\n\t};\n\n/***/ },\n/* 125 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global module, require */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\tvar _userID = void 0;\n\tvar store = void 0;\n\tvar defaultUserConfig = {\n\t\tstorage: 'cookie',\n\t\tname: 'spoor-id',\n\t\tvalue: null,\n\t\tdomain: document.URL.match(/^https?\\:\\/\\/([^\\/?#]+)(?:[\\/?#]|$)/i)[1].indexOf('ft.com') > -1 ? 'ft.com' : null\n\t};\n\t\n\tvar utils = __webpack_require__(126);\n\tvar Store = __webpack_require__(128);\n\t\n\t/**\n\t * migrate_across_domains\n\t * Clean up after forgetting to write cookies to the 'root' ft.com domain.\n\t * - Check local storage for the 'proper' value.\n\t * - If it exists, use it.\n\t * - If not, set current user id as the 'proper' value.\n\t * - If this value and the cookie match, then we've already fixed it.\n\t * - If not, drop the cookie and it will be reset it on the root domain.\n\t *\n\t * @param {Store} store - The storage instance used for storing the ID.\n\t * @param {String} user_id - The user ID to check against storage.\n\t * @return {String} - The real user ID.\n\t */\n\tfunction migrate_across_domains(store, user_id) {\n\t\tvar ls_name = 'o-tracking-proper-id';\n\t\tvar proper_id = void 0;\n\t\n\t\ttry {\n\t\t\t// This isn't consistent in at least Firefox, maybe more, localstorage seems secured at subdomian level.\n\t\t\tproper_id = utils.getValueFromCookie(ls_name + '=([^;]+)');\n\t\n\t\t\tif (!proper_id) {\n\t\t\t\tvar d = new Date();\n\t\t\t\td.setTime(d.getTime() + 10 * 365 * 24 * 60 * 60 * 1000);\n\t\t\t\tvar expires = 'expires=' + d.toGMTString() + ';';\n\t\n\t\t\t\twindow.document.cookie = ls_name + '=' + utils.encode(user_id) + ';' + expires + 'path=/;domain=.' + defaultUserConfig.domain + ';';\n\t\t\t\tproper_id = user_id;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\terror: error.message,\n\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t});\n\t\t\tproper_id = user_id;\n\t\t}\n\t\n\t\t// Expire the cookie on the (sub)domain\n\t\twindow.document.cookie = 'spoor-id=0;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;';\n\t\t// Re-set the cookie on the  root domain\n\t\tstore.write(proper_id);\n\t\n\t\treturn proper_id;\n\t}\n\t\n\t/**\n\t * Init\n\t *\n\t * @param {String|Object} value The value of a userID to use or configuration object.\n\t * @return {String} - The user ID.\n\t */\n\tfunction init(value) {\n\t\tvar config = utils.merge(defaultUserConfig, { value: value });\n\t\n\t\t// config.name is important here, means the user has specifically asked for a cookie name.\n\t\tif (config.storage === 'cookie' && config.name) {\n\t\t\tconfig.nameOverride = config.name;\n\t\t}\n\t\n\t\tstore = new Store(config.name, config);\n\t\n\t\t_userID = store.read();\n\t\n\t\tif (_userID) {\n\t\t\t_userID = migrate_across_domains(store, _userID);\n\t\t}\n\t\n\t\tif (!_userID) {\n\t\t\t_userID = config.value;\n\t\t}\n\t\n\t\tif (!_userID) {\n\t\t\t_userID = utils.guid();\n\t\t}\n\t\n\t\tstore.write(_userID); // Refreshes the cookie...\n\t\n\t\treturn _userID;\n\t}\n\t\n\tfunction destroy() {\n\t\tstore.destroy();\n\t}\n\t\n\tmodule.exports = {\n\t\tinit: init,\n\t\tuserID: function userID() {\n\t\t\treturn _userID;\n\t\t},\n\t\tdestroy: destroy\n\t};\n\n/***/ },\n/* 126 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global module, require, window */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\t/**\n\t * Shared 'internal' scope.\n\t * @private\n\t */\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar settings = __webpack_require__(124);\n\t\n\t/**\n\t * CUID Generator\n\t */\n\tvar cuid = __webpack_require__(127);\n\t\n\t/**\n\t * Record of callbacks to call when a page is tracked.\n\t */\n\tvar page_callbacks = [];\n\t\n\t/**\n\t * Log messages to the browser console. Requires 'log' to be set on init.\n\t *\n\t * @param {*} List of objects to log\n\t * @return {undefined}\n\t */\n\tfunction log() {\n\t\tif (settings.get('developer') && window.console) {\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\twindow.console.log(arguments[i]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\t * Tests if variable is a certain type. Defaults to check for undefined if no type specified.\n\t *\n\t * @param {*} variable - The variable to check.\n\t * @param {string} type - The type to test for. Defaults to undefined.\n\t *\n\t * @return {boolean} - The answer for if the variable is of type.\n\t */\n\tfunction is(variable, type) {\n\t\tif (!type) {\n\t\t\ttype = 'undefined';\n\t\t}\n\t\treturn (typeof variable === 'undefined' ? 'undefined' : (0, _typeof3.default)(variable)) === type;\n\t}\n\t\n\t/**\n\t * Merge objects together. Will remove 'falsy' values.\n\t *\n\t * @param {Object} target - The original object to merge in to.\n\t * @param {Object} options - The object to merge into the target. If omitted, will merge target into a new empty Object.\n\t *\n\t * @return {Object} The merged object.\n\t */\n\tfunction merge(target, options) {\n\t\tif (!options) {\n\t\t\toptions = target;\n\t\t\ttarget = {};\n\t\t}\n\t\n\t\tvar name = void 0;\n\t\tvar src = void 0;\n\t\tvar copy = void 0;\n\t\n\t\t/* jshint -W089 */\n\t\t/* eslint guard-for-in: 0 */\n\t\tfor (name in options) {\n\t\t\tsrc = target[name];\n\t\t\tcopy = options[name];\n\t\n\t\t\t// Prevent never-ending loop\n\t\t\tif (target === copy) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\n\t\t\t// Gets rid of missing values too\n\t\t\tif (typeof copy !== 'undefined' && copy !== null) {\n\t\t\t\ttarget[name] = src === Object(src) && !is(src, 'function') ? merge(src, copy) : copy;\n\t\t\t}\n\t\t}\n\t\t/* jshint +W089 */\n\t\t/* jslint forin:true */\n\t\n\t\treturn target;\n\t}\n\t\n\t/**\n\t * URL encode a string.\n\t * @param {string} str - The string to be encoded.\n\t *\n\t * @return {string} The encoded string.\n\t */\n\tfunction encode(str) {\n\t\tif (window.encodeURIComponent) {\n\t\t\treturn window.encodeURIComponent(str);\n\t\t} else {\n\t\t\treturn window.escape(str);\n\t\t}\n\t}\n\t\n\t/**\n\t * URL decode a string.\n\t * @param {string} str - The string to be decoded.\n\t *\n\t * @return {string} The decoded string.\n\t */\n\tfunction decode(str) {\n\t\tif (window.decodeURIComponent) {\n\t\t\treturn window.decodeURIComponent(str);\n\t\t} else {\n\t\t\treturn window.unescape(str);\n\t\t}\n\t}\n\t\n\t/*\n\t * Utility to add event listeners.\n\t *\n\t * @param {Element} element\n\t * @param {string} event\n\t * @param {Function} listener\n\t */\n\tfunction addEvent(element, event, listener) {\n\t\tif (element.addEventListener) {\n\t\t\telement.addEventListener(event, listener, false);\n\t\t} else {\n\t\t\telement.attachEvent('on' + event, listener);\n\t\t}\n\t}\n\t\n\t/*\n\t * Utility for dispatching custom events from window\n\t *\n\t * @param {string} namespace\n\t * @param {string} eventType\n\t * @param {Object} detail\n\t */\n\tfunction broadcast(namespace, eventType, detail) {\n\t\tdetail = detail || {};\n\t\ttry {\n\t\t\twindow.dispatchEvent(new CustomEvent(namespace + '.' + eventType, {\n\t\t\t\tdetail: detail,\n\t\t\t\tbubbles: true\n\t\t\t}));\n\t\t} catch (error) {}\n\t}\n\t\n\t/**\n\t * Listen for page tracking requests.\n\t *\n\t * @param {Function} cb - The callback to be called whenever a page is tracked.\n\t * @return {undefined}\n\t */\n\tfunction onPage(cb) {\n\t\tif (is(cb, 'function')) {\n\t\t\tpage_callbacks.push(cb);\n\t\t}\n\t}\n\t\n\t/**\n\t * Trigger the 'page' listeners.\n\t * @return {undefined}\n\t */\n\tfunction triggerPage() {\n\t\tfor (var i = 0; i < page_callbacks.length; i++) {\n\t\t\tpage_callbacks[i]();\n\t\t}\n\t}\n\t\n\t/**\n\t * Get a value from document.cookie matching the first match of the regexp you supply\n\t * @param {RegExp} matcher - The Regex to match with\n\t * @return {String} - The vale from the cookie\n\t */\n\tfunction getValueFromCookie(matcher) {\n\t\treturn document.cookie.match(matcher) && RegExp.$1 !== '' && RegExp.$1 !== 'null' ? RegExp.$1 : null;\n\t}\n\t\n\t/**\n\t * Get a value from the url, used for uuid or querystring parameters\n\t * @param {RegExp} matcher - The Regex to match with\n\t * @return {String} - The value from the URL\n\t */\n\tfunction getValueFromUrl(matcher) {\n\t\treturn document.location.href.match(matcher) && RegExp.$1 !== '' ? RegExp.$1 : null;\n\t}\n\t\n\t/**\n\t * Get a value from a specified JavaScript variable.\n\t * @param {String} str - The name of variable, in dot syntax.\n\t * @return {String} The value from the JS variable.\n\t */\n\tfunction getValueFromJsVariable(str) {\n\t\tif (typeof str !== 'string') {\n\t\t\treturn null;\n\t\t}\n\t\n\t\tvar i = void 0;\n\t\tvar namespaces = str.split('.');\n\t\tvar test = window;\n\t\n\t\tfor (i = 0; i < namespaces.length; i = i + 1) {\n\t\t\tif (typeof test[namespaces[i]] === 'undefined') {\n\t\t\t\treturn null;\n\t\t\t}\n\t\n\t\t\ttest = test[namespaces[i]];\n\t\t}\n\t\n\t\treturn test !== '' ? test : null;\n\t}\n\t\n\tmodule.exports = {\n\t\tlog: log,\n\t\tis: is,\n\t\tisUndefined: is,\n\t\tmerge: merge,\n\t\tencode: encode,\n\t\tdecode: decode,\n\t\tguid: cuid,\n\t\taddEvent: addEvent,\n\t\tbroadcast: broadcast,\n\t\tonPage: onPage,\n\t\ttriggerPage: triggerPage,\n\t\tgetValueFromCookie: getValueFromCookie,\n\t\tgetValueFromUrl: getValueFromUrl,\n\t\tgetValueFromJsVariable: getValueFromJsVariable\n\t};\n\n/***/ },\n/* 127 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/*eslint-disable*/\n\t/**\n\t * cuid.js\n\t * Collision-resistant UID generator for browsers and node.\n\t * Sequential for fast db lookups and recency sorting.\n\t * Safe for element IDs and server-side lookups.\n\t *\n\t * Extracted from CLCTR\n\t *\n\t * Copyright (c) Eric Elliott 2012\n\t * MIT License\n\t */\n\t\n\t/*global window, navigator, document, require, process, module */\n\t(function (app) {\n\t  'use strict';\n\t\n\t  var namespace = 'cuid',\n\t      c = 0,\n\t      blockSize = 4,\n\t      base = 36,\n\t      discreteValues = Math.pow(base, blockSize),\n\t      pad = function pad(num, size) {\n\t    var s = \"000000000\" + num;\n\t    return s.substr(s.length - size);\n\t  },\n\t      randomBlock = function randomBlock() {\n\t    return pad((Math.random() * discreteValues << 0).toString(base), blockSize);\n\t  },\n\t      safeCounter = function safeCounter() {\n\t    c = c < discreteValues ? c : 0;\n\t    c++; // this is not subliminal\n\t    return c - 1;\n\t  },\n\t      api = function cuid() {\n\t    // Starting with a lowercase letter makes\n\t    // it HTML element ID friendly.\n\t    var letter = 'c',\n\t        // hard-coded allows for sequential access\n\t\n\t    // timestamp\n\t    // warning: this exposes the exact date and time\n\t    // that the uid was created.\n\t    timestamp = new Date().getTime().toString(base),\n\t\n\t\n\t    // Prevent same-machine collisions.\n\t    counter,\n\t\n\t\n\t    // A few chars to generate distinct ids for different\n\t    // clients (so different computers are far less\n\t    // likely to generate the same id)\n\t    fingerprint = api.fingerprint(),\n\t\n\t\n\t    // Grab some more chars from Math.random()\n\t    random = randomBlock() + randomBlock();\n\t\n\t    counter = pad(safeCounter().toString(base), blockSize);\n\t\n\t    return letter + timestamp + counter + fingerprint + random;\n\t  };\n\t\n\t  api.slug = function slug() {\n\t    var date = new Date().getTime().toString(36),\n\t        counter,\n\t        print = api.fingerprint().slice(0, 1) + api.fingerprint().slice(-1),\n\t        random = randomBlock().slice(-2);\n\t\n\t    counter = safeCounter().toString(36).slice(-4);\n\t\n\t    return date.slice(-2) + counter + print + random;\n\t  };\n\t\n\t  api.globalCount = function globalCount() {\n\t    // We want to cache the results of this\n\t    var cache = function calc() {\n\t      var i,\n\t          count = 0;\n\t\n\t      for (i in window) {\n\t        count++;\n\t      }\n\t\n\t      return count;\n\t    }();\n\t\n\t    api.globalCount = function () {\n\t      return cache;\n\t    };\n\t    return cache;\n\t  };\n\t\n\t  api.fingerprint = function browserPrint() {\n\t    return pad((navigator.mimeTypes.length + navigator.userAgent.length).toString(36) + api.globalCount().toString(36), 4);\n\t  };\n\t\n\t  // don't change anything from here down.\n\t  if (true) {\n\t    module.exports = api;\n\t  } else {\n\t    app[namespace] = api;\n\t  }\n\t})(undefined);\n\t/*eslint-enable */\n\n/***/ },\n/* 128 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global module, require, window */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\t/**\n\t * Class for storing data\n\t * Will choose the 'best' storage method available. Can also specify a type of storage.\n\t *\n\t * @class  Store\n\t * @param {string} name - The name of the store\n\t * @param {Object} config - Optional, config object for extra configuration\n\t */\n\t\n\tvar Store = function Store(name, config) {\n\t\n\t\t/**\n\t  * Internal Storage key prefix.\n\t  */\n\t\tvar keyPrefix = 'o-tracking';\n\t\n\t\t/**\n\t  * Temporary var containing data from a previously saved store.\n\t  * @property loadStore\n\t  */\n\t\tvar loadStore = void 0;\n\t\tvar utils = __webpack_require__(126);\n\t\n\t\tif (utils.isUndefined(name)) {\n\t\t\tvar undefinedName = new Error('You must specify a name for the store.');\n\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\terror: undefinedName.message,\n\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t});\n\t\t\tthrow undefinedName;\n\t\t}\n\t\n\t\tthis.config = utils.merge({ storage: 'best', expires: 10 * 365 * 24 * 60 * 60 * 1000 }, config);\n\t\n\t\t/**\n\t  * Store data.\n\t  */\n\t\tthis.data = null;\n\t\n\t\t/**\n\t  * The key/name of this store.\n\t  */\n\t\tthis.storageKey = this.config.hasOwnProperty('nameOverride') ? this.config.nameOverride : [keyPrefix, name].join('_');\n\t\n\t\t/**\n\t  * The storage method to use. Determines best storage method.\n\t  *\n\t  * @type {Object}\n\t  */\n\t\tthis.storage = function (config, window) {\n\t\t\tvar test_key = keyPrefix + '_InternalTest';\n\t\n\t\t\t// If cookie has been manually specified, don't bother with local storage.\n\t\t\tif (config.storage !== 'cookie') {\n\t\t\t\ttry {\n\t\t\t\t\tif (window.localStorage) {\n\t\t\t\t\t\twindow.localStorage.setItem(test_key, 'TEST');\n\t\n\t\t\t\t\t\tif (window.localStorage.getItem(test_key) === 'TEST') {\n\t\t\t\t\t\t\twindow.localStorage.removeItem(test_key);\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t_type: 'localStorage',\n\t\t\t\t\t\t\t\tload: function load(name) {\n\t\t\t\t\t\t\t\t\treturn window.localStorage.getItem.call(window.localStorage, name);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsave: function save(name, value) {\n\t\t\t\t\t\t\t\t\treturn window.localStorage.setItem.call(window.localStorage, name, value);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tremove: function remove(name) {\n\t\t\t\t\t\t\t\t\treturn window.localStorage.removeItem.call(window.localStorage, name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\t\t\terror: error.message,\n\t\t\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction cookieLoad(name) {\n\t\t\t\tname = name + '=';\n\t\n\t\t\t\tvar cookies = window.document.cookie.split(';');\n\t\t\t\tvar i = void 0;\n\t\t\t\tvar cookie = void 0;\n\t\n\t\t\t\tfor (i = 0; i < cookies.length; i = i + 1) {\n\t\t\t\t\tcookie = cookies[i].replace(/^\\s+|\\s+$/g, '');\n\t\t\t\t\tif (cookie.indexOf(name) === 0) {\n\t\t\t\t\t\treturn utils.decode(cookie.substring(name.length, cookie.length));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\treturn null;\n\t\t\t}\n\t\n\t\t\tfunction cookieSave(name, value, expiry) {\n\t\t\t\tvar d = void 0;\n\t\t\t\tvar expires = '';\n\t\t\t\tvar cookie = void 0;\n\t\n\t\t\t\tif (utils.is(expiry, 'number')) {\n\t\t\t\t\td = new Date();\n\t\t\t\t\td.setTime(d.getTime() + expiry);\n\t\t\t\t\texpires = 'expires=' + d.toGMTString() + ';';\n\t\t\t\t}\n\t\n\t\t\t\tcookie = utils.encode(name) + '=' + utils.encode(value) + ';' + expires + 'path=/;' + (config.domain ? 'domain=.' + config.domain + ';' : '');\n\t\t\t\twindow.document.cookie = cookie;\n\t\t\t}\n\t\n\t\t\tfunction cookieRemove(name) {\n\t\t\t\tcookieSave(name, '', -1);\n\t\t\t}\n\t\n\t\t\tcookieSave(test_key, 'TEST');\n\t\n\t\t\tif (cookieLoad(test_key) === 'TEST') {\n\t\t\t\tcookieRemove(test_key);\n\t\n\t\t\t\treturn {\n\t\t\t\t\t_type: 'cookie',\n\t\t\t\t\tload: cookieLoad,\n\t\t\t\t\tsave: cookieSave,\n\t\t\t\t\tremove: cookieRemove\n\t\t\t\t};\n\t\t\t}\n\t\n\t\t\treturn {\n\t\t\t\t_type: 'none',\n\t\t\t\tload: function load() {},\n\t\t\t\tsave: function save() {},\n\t\t\t\tremove: function remove() {}\n\t\t\t};\n\t\t}(this.config, window);\n\t\n\t\t// Retrieve any previous store with the same name.\n\t\tloadStore = this.storage.load(this.storageKey);\n\t\tif (loadStore) {\n\t\t\ttry {\n\t\t\t\tthis.data = JSON.parse(loadStore);\n\t\t\t} catch (error) {\n\t\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\t\terror: error.message,\n\t\t\t\t\tmodule: 'o-tracking'\n\t\t\t\t});\n\t\t\t\tthis.data = loadStore;\n\t\t\t}\n\t\t}\n\t\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Get/Read the current data.\n\t *\n\t * @return {Object} Returns the data from the store.\n\t */\n\tStore.prototype.read = function () {\n\t\treturn this.data;\n\t};\n\t\n\t/**\n\t * Write the supplied data to the store.\n\t *\n\t * @param {String} data - The data to write.\n\t * @return {Store} - The instance of the store\n\t */\n\tStore.prototype.write = function (data) {\n\t\t// Set this.data, in-case we're on a file:// domain and can't set cookies.\n\t\tthis.data = data;\n\t\tthis.storage.save(this.storageKey, typeof this.data === 'string' ? this.data : JSON.stringify(this.data), this.config.expires);\n\t\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Delete the current data.\n\t * @return {Store} - The instance of the store\n\t */\n\tStore.prototype.destroy = function () {\n\t\tthis.data = null;\n\t\tthis.storage.remove(this.storageKey);\n\t\treturn this;\n\t};\n\t\n\tmodule.exports = Store;\n\n/***/ },\n/* 129 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global module, require */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\tvar store = void 0;\n\tvar defaultSessionConfig = {\n\t\tstorage: 'best',\n\t\tname: 'session',\n\t\texpires: 30 * 60 * 1000 // 30 minutes\n\t};\n\t\n\tvar utils = __webpack_require__(126);\n\tvar Store = __webpack_require__(128);\n\t\n\t/**\n\t * Set the session in the store.\n\t *\n\t * @param {String} session - The session to be stored.\n\t * @return {undefined}\n\t */\n\tfunction setSession(session) {\n\t\tvar d = new Date();\n\t\td.setTime(d.getTime() + store.config.expires);\n\t\n\t\tstore.write({\n\t\t\tvalue: session,\n\t\t\texpiry: d.valueOf()\n\t\t});\n\t}\n\t\n\t/**\n\t * Get the session from the store. Expiry and gen of a new session are handled here.\n\t *\n\t * @return {Object} the current session\n\t */\n\tfunction getSession() {\n\t\tvar s = store.read();\n\t\tvar session = void 0;\n\t\tvar isNew = false;\n\t\n\t\tif (s) {\n\t\t\tvar d = new Date().valueOf();\n\t\t\tvar exp = parseInt(s.expiry);\n\t\n\t\t\t// If current session is active.\n\t\t\tif (exp >= d) {\n\t\t\t\tsession = s.value;\n\t\t\t}\n\t\t}\n\t\n\t\t// No active session, gen a new one.\n\t\tif (!session) {\n\t\t\tsession = utils.guid();\n\t\t\tisNew = true;\n\t\t}\n\t\n\t\t// Refreshes the cookie...\n\t\tsetSession(session);\n\t\n\t\treturn {\n\t\t\tid: session,\n\t\t\tisNew: isNew\n\t\t};\n\t}\n\t\n\t/**\n\t * Init\n\t *\n\t * @param {String|Object} config The name used to store the session or configuration object.\n\t * @return {Session} - The session\n\t */\n\tfunction init(config) {\n\t\tif (utils.is(config, 'string')) {\n\t\t\tconfig = { name: config };\n\t\t}\n\t\n\t\tif (utils.isUndefined(config)) {\n\t\t\tconfig = {};\n\t\t}\n\t\n\t\tvar c = utils.merge(defaultSessionConfig, config);\n\t\n\t\t// config.name is important here, means the user has specifically asked for a cookie name.\n\t\tif (c.storage === 'cookie' && config.name) {\n\t\t\tc.nameOverride = c.name;\n\t\t}\n\t\n\t\tstore = new Store(c.name, c);\n\t\n\t\treturn getSession();\n\t}\n\t\n\tmodule.exports = {\n\t\tinit: init,\n\t\tsession: getSession\n\t};\n\n/***/ },\n/* 130 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global module, require, window */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\tvar settings = __webpack_require__(124);\n\tvar utils = __webpack_require__(126);\n\tvar Queue = __webpack_require__(131);\n\tvar transports = __webpack_require__(132);\n\t/**\n\t * Default collection server.\n\t */\n\tvar domain = 'http://test.spoor-api.ft.com';\n\t\n\t/**\n\t * Queue queue.\n\t *\n\t * @type {Queue}\n\t */\n\tvar queue = void 0;\n\t\n\t/**\n\t * Consistent check to see if we should use sendBeacon or not.\n\t *\n\t * @return {boolean} Should we use sendBeacon?\n\t */\n\tfunction should_use_sendBeacon() {\n\t\treturn navigator.sendBeacon && Promise && (settings.get('config') || {}).useSendBeacon;\n\t}\n\t\n\t/**\n\t * Attempts to send a tracking request.\n\t *\n\t * @param {Object} request The request to be sent.\n\t * @param {Function} callback Callback to fire the next item in the queue.\n\t * @return {undefined}\n\t */\n\tfunction sendRequest(request, callback) {\n\t\tvar queueTime = request.queueTime;\n\t\tvar offlineLag = new Date().getTime() - queueTime;\n\t\tvar path = void 0;\n\t\tvar transport = should_use_sendBeacon() ? transports.get('sendBeacon')() : window.XMLHttpRequest && 'withCredentials' in new window.XMLHttpRequest() ? transports.get('xhr')() : transports.get('image')();\n\t\tvar user_callback = request.callback;\n\t\n\t\tvar core_system = settings.get('config') && settings.get('config').system || {};\n\t\tvar system = utils.merge(core_system, {\n\t\t\tapi_key: settings.get('api_key'), // String - API key - Make sure the request is from a valid client (idea nicked from Keen.io) useful if a page gets copied onto a Russian website and creates noise\n\t\t\tversion: settings.get('version'), // Version of the tracking client e.g. '1.2'\n\t\t\tsource: settings.get('source') });\n\t\n\t\trequest = utils.merge({ system: system }, request);\n\t\n\t\t// Only bothered about offlineLag if it's longer than a second, but less than 12 months. (Especially as Date can be dodgy)\n\t\tif (offlineLag > 1000 && offlineLag < 12 * 30 * 24 * 60 * 60 * 1000) {\n\t\t\trequest.time = request.time || {};\n\t\t\trequest.time.offset = offlineLag;\n\t\t}\n\t\tdelete request.callback;\n\t\tdelete request.async;\n\t\tdelete request.type;\n\t\tdelete request.queueTime;\n\t\n\t\tutils.log('user_callback', user_callback);\n\t\tutils.log('PreSend', request);\n\t\n\t\tpath = JSON.stringify(request);\n\t\n\t\tutils.log('path', path);\n\t\n\t\ttransport.complete(function (error) {\n\t\t\tif (utils.is(user_callback, 'function')) {\n\t\t\t\tuser_callback.call(request);\n\t\t\t\tutils.log('calling user_callback');\n\t\t\t}\n\t\n\t\t\tif (error) {\n\t\t\t\t// Re-add to the queue if it failed.\n\t\t\t\t// Re-apply queueTime here\n\t\t\t\trequest.queueTime = queueTime;\n\t\t\t\tqueue.add(request).save();\n\t\n\t\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\t\terror: error.message,\n\t\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t});\n\t\n\t\t// Both developer and noSend flags have to be set to stop the request sending.\n\t\tif (!(settings.get('developer') && settings.get('no_send'))) {\n\t\t\ttransport.send(domain, path);\n\t\t}\n\t}\n\t\n\t/**\n\t * Adds a new request to the list of pending requests\n\t *\n\t * @param {Tracking} request The request to queue\n\t * @return {undefined}\n\t */\n\tfunction add(request) {\n\t\trequest.queueTime = new Date().getTime();\n\t\tif (should_use_sendBeacon()) {\n\t\t\tsendRequest(request);\n\t\t} else {\n\t\t\tqueue.add(request).save();\n\t\t}\n\t\tutils.log('AddedToQueue', queue);\n\t}\n\t\n\t/**\n\t * If there are any requests queued, attempts to send the next one\n\t * Otherwise, does nothing\n\t * @param {Function} callback - Optional callback\n\t * @return {undefined}\n\t */\n\tfunction run(callback) {\n\t\tif (utils.isUndefined(callback)) {\n\t\t\tcallback = function callback() {};\n\t\t}\n\t\n\t\t// Investigate queue lengths bug\n\t\t// https://jira.ft.com/browse/DTP-330\n\t\tvar all_events = queue.all();\n\t\n\t\tif (all_events.length > 200) {\n\t\t\t(function () {\n\t\t\t\tvar counts = {};\n\t\n\t\t\t\tall_events.forEach(function (event) {\n\t\t\t\t\tvar label = [event.category, event.action].join(':');\n\t\n\t\t\t\t\tif (!counts.hasOwnProperty(label)) {\n\t\t\t\t\t\tcounts[label] = 0;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tcounts[label] += 1;\n\t\t\t\t});\n\t\n\t\t\t\tqueue.replace([]);\n\t\n\t\t\t\tqueue.add({\n\t\t\t\t\tcategory: 'o-tracking',\n\t\t\t\t\taction: 'queue-bug',\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\turl: document.url,\n\t\t\t\t\t\tqueue_length: all_events.length,\n\t\t\t\t\t\tcounts: counts,\n\t\t\t\t\t\tstorage: queue.storage.storage._type\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})();\n\t\t}\n\t\n\t\tvar next = function next() {\n\t\t\trun();\n\t\t\tcallback();\n\t\t};\n\t\tvar nextRequest = queue.shift();\n\t\n\t\t// Cancel if we've run out of requests.\n\t\tif (!nextRequest) {\n\t\t\treturn callback();\n\t\t}\n\t\n\t\t// Send this request, then try run again.\n\t\treturn sendRequest(nextRequest, next);\n\t}\n\t\n\t/**\n\t * Convenience function to add and run a request all in one go.\n\t *\n\t * @param {Object} request The request to queue and run.\n\t * @return {undefined}\n\t */\n\tfunction addAndRun(request) {\n\t\tadd(request);\n\t\trun();\n\t}\n\t\n\t/**\n\t * Init the queue and send any leftover events.\n\t * @return {undefined}\n\t */\n\tfunction init() {\n\t\tqueue = new Queue('requests');\n\t\n\t\tif (settings.get('config') && settings.get('config').server) {\n\t\t\tdomain = settings.get('config').server;\n\t\t}\n\t\n\t\t// If any tracking calls are made whilst offline, try sending them the next time the device comes online\n\t\tutils.addEvent(window, 'online', run);\n\t\n\t\t// On startup, try sending any requests queued from a previous session.\n\t\trun();\n\t\n\t\treturn queue;\n\t}\n\t\n\tmodule.exports = {\n\t\tinit: init,\n\t\tadd: add,\n\t\trun: run,\n\t\taddAndRun: addAndRun\n\t};\n\n/***/ },\n/* 131 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global module, require */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\tvar utils = __webpack_require__(126);\n\tvar Store = __webpack_require__(128);\n\t\n\t/**\n\t * Class for handling a queue backed up by a store.\n\t * @class Queue\n\t *\n\t * @param {String} name - The name of the queue.\n\t * @return {Queue} - Returns the instance of the queue.\n\t */\n\tvar Queue = function Queue(name) {\n\t\tif (utils.isUndefined(name)) {\n\t\t\tvar undefinedName = new Error('You must specify a name for the queue.');\n\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\terror: undefinedName.message,\n\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t});\n\t\t\tthrow undefinedName;\n\t\t}\n\t\n\t\t/**\n\t  * Queue data.\n\t  * @type {Array}\n\t  */\n\t\tthis.queue = [];\n\t\n\t\t/**\n\t  * The storage method to use. Determines best storage method.\n\t  * @type {Object}\n\t  */\n\t\tthis.storage = new Store(name);\n\t\n\t\t// Retrieve any previous store with the same name.\n\t\tif (this.storage.read()) {\n\t\t\tthis.queue = this.storage.read();\n\t\t}\n\t\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Gets the contents of the store.\n\t *\n\t * @return {Array} The array of items.\n\t */\n\tQueue.prototype.all = function () {\n\t\tif (this.queue.length === 0) {\n\t\t\treturn [];\n\t\t}\n\t\n\t\tvar items = [];\n\t\n\t\tfor (var i = 0; i < this.queue.length; i = i + 1) {\n\t\t\titems.push(this.queue[i].item);\n\t\t}\n\t\n\t\treturn items;\n\t};\n\t\n\t/**\n\t * Gets the first item in the store.\n\t *\n\t * @return {Object} Returns the item.\n\t */\n\tQueue.prototype.first = function () {\n\t\tif (this.queue.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\n\t\treturn this.queue[0].item;\n\t};\n\t\n\t/**\n\t * Gets the last item in the store.\n\t *\n\t * @return {Object} Returns the item.\n\t */\n\tQueue.prototype.last = function () {\n\t\tif (this.queue.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\n\t\treturn this.queue.slice(-1)[0].item;\n\t};\n\t\n\t/**\n\t * Add data to the store.\n\t *\n\t * @param {Object} item - An item or an array of items.\n\t *\n\t * @return {Queue} - Returns the instance of the queue.\n\t */\n\tQueue.prototype.add = function (item) {\n\t\t// I was trying to turn this whole add function into a little module, to stop doAdd function being created everytime, but couldn't work out how to get to 'this' from within the module.\n\t\n\t\tvar self = this;\n\t\tvar i = void 0;\n\t\n\t\tfunction doAdd(item) {\n\t\t\tself.queue.push({\n\t\t\t\tcreated_at: new Date().valueOf(),\n\t\t\t\titem: item\n\t\t\t});\n\t\t}\n\t\n\t\tif (utils.is(item, 'object') && item.constructor.toString().match(/array/i)) {\n\t\t\tfor (i = 0; i < item.length; i = i + 1) {\n\t\t\t\tdoAdd(item[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tdoAdd(item);\n\t\t}\n\t\n\t\treturn self;\n\t};\n\t\n\t/**\n\t * Overwrite the store with something completely new.\n\t *\n\t * @param {Array} items The new array of data.\n\t *\n\t * @return {Queue} - Returns the instance of the queue.\n\t */\n\tQueue.prototype.replace = function (items) {\n\t\tif (utils.is(items, 'object') && items.constructor.toString().match(/array/i)) {\n\t\t\tthis.queue = [];\n\t\t\tthis.add(items).save();\n\t\n\t\t\treturn this;\n\t\t}\n\t\n\t\tvar invalidArg = new Error('Argument invalid, must be an array.');\n\t\tutils.broadcast('oErrors', 'log', {\n\t\t\terror: invalidArg.message,\n\t\t\tinfo: { module: 'o-tracking' }\n\t\t});\n\t\tthrow invalidArg;\n\t};\n\t\n\t/**\n\t * Pop the first item from the queue.\n\t *\n\t * @return {Object} The item.\n\t */\n\tQueue.prototype.shift = function () {\n\t\tif (this.queue.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\n\t\tvar item = this.queue.shift().item;\n\t\n\t\tthis.save();\n\t\n\t\treturn item;\n\t};\n\t\n\t/**\n\t * Save the current store to localStorage so that old requests can still be sent after a page refresh.\n\t *\n\t * @return {Queue} - Returns the instance of the queue.\n\t */\n\tQueue.prototype.save = function () {\n\t\tthis.storage.write(this.queue);\n\t\n\t\treturn this;\n\t};\n\t\n\tmodule.exports = Queue;\n\n/***/ },\n/* 132 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\txhr: __webpack_require__(133),\n\t\tsendBeacon: __webpack_require__(134),\n\t\timage: __webpack_require__(135),\n\t\tget: function get(name) {\n\t\t\treturn this.mock || this[name];\n\t\t}\n\t};\n\n/***/ },\n/* 133 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function () {\n\t\tvar xhr = new window.XMLHttpRequest();\n\t\n\t\treturn {\n\t\t\tsend: function send(url, data) {\n\t\t\t\txhr.open('POST', url, true);\n\t\t\t\txhr.withCredentials = true;\n\t\t\t\txhr.setRequestHeader('Content-type', 'application/json');\n\t\t\t\txhr.send(data);\n\t\t\t},\n\t\t\tcomplete: function complete(callback) {\n\t\t\t\txhr.onerror = function () {\n\t\t\t\t\tcallback(this);\n\t\t\t\t};\n\t\t\t\txhr.onload = function () {\n\t\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback('Incorrect response: ' + xhr.status);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t};\n\n/***/ },\n/* 134 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function () {\n\t    var resolver = void 0;\n\t    var rejecter = void 0;\n\t    var p = new Promise(function (resolve, reject) {\n\t        resolver = resolve;\n\t        rejecter = reject;\n\t    });\n\t    return {\n\t        send: function send(url, data) {\n\t            if (navigator.sendBeacon(url, data)) {\n\t                resolver();\n\t            } else {\n\t                rejecter(new Error('Failed to send beacon event: ' + data.toString()));\n\t            }\n\t        },\n\t        complete: function complete(callback) {\n\t            callback && p.then(callback, callback);\n\t        }\n\t    };\n\t};\n\n/***/ },\n/* 135 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(126);\n\t\n\tmodule.exports = function () {\n\t\tvar image = new Image(1, 1);\n\t\n\t\treturn {\n\t\t\tsend: function send(url, data) {\n\t\t\t\timage.src = url + '?data=' + utils.encode(data);\n\t\t\t},\n\t\t\tcomplete: function complete(callback) {\n\t\t\t\tif (image.addEventListener) {\n\t\t\t\t\timage.addEventListener('error', callback);\n\t\t\t\t\timage.addEventListener('load', function () {\n\t\t\t\t\t\treturn callback();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// it's IE!\n\t\t\t\t\timage.attachEvent('onerror', callback);\n\t\t\t\t\timage.attachEvent('onload', function () {\n\t\t\t\t\t\treturn callback();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\n/***/ },\n/* 136 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global module, require */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\tvar Core = __webpack_require__(137);\n\tvar utils = __webpack_require__(126);\n\t\n\t/**\n\t * Default properties for page tracking requests.\n\t *\n\t * @return {Object} - The default properties for pages.\n\t */\n\tvar defaultPageConfig = function defaultPageConfig() {\n\t\treturn {\n\t\t\tcategory: 'page',\n\t\t\taction: 'view',\n\t\t\tcontext: {\n\t\t\t\turl: document.URL,\n\t\t\t\treferrer: document.referrer\n\t\t\t},\n\t\n\t\t\tasync: true // Send this event asyncronously - as sync doesn't work in FF, as it doesn't send cookies. https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#withCredentials\n\t\t};\n\t};\n\t\n\t/**\n\t * Make the page tracking request.\n\t *\n\t * @param {Object} config - Configuration object. If omitted, will use the defaults.\n\t * @param {Function} callback - Callback function. Called when request completed.\n\t * @return {undefined}\n\t */\n\tfunction page(config, callback) {\n\t\tconfig = utils.merge(defaultPageConfig(), {\n\t\t\tcontext: config\n\t\t});\n\t\n\t\t// New PageID for a new Page.\n\t\tCore.setRootID();\n\t\tCore.track(config, callback);\n\t\n\t\t// Alert internally that a new page has been tracked - for single page apps for example.\n\t\tutils.triggerPage();\n\t}\n\t\n\t/**\n\t * Listener for pages.\n\t *\n\t * @param {CustomEvent} e - The CustomEvent\n\t * @private\n\t * @return {undefined}\n\t */\n\tfunction listener(e) {\n\t\tpage(e.detail);\n\t}\n\t\n\tmodule.exports = page;\n\tmodule.exports.init = function () {\n\t\tutils.addEvent(window, 'oTracking.page', listener);\n\t};\n\n/***/ },\n/* 137 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global module, require */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\tvar Send = __webpack_require__(130);\n\tvar User = __webpack_require__(125);\n\tvar Session = __webpack_require__(129);\n\t\n\t/**\n\t * Shared 'internal' scope.\n\t * @type {Object}\n\t */\n\tvar settings = __webpack_require__(124);\n\tvar utils = __webpack_require__(126);\n\t\n\t/**\n\t * Default properties for sending a tracking request.\n\t * @type {Object}\n\t * @return {Object} - The default settings for the component.\n\t */\n\tvar defaultConfig = function defaultConfig() {\n\t\treturn {\n\t\t\tasync: true,\n\t\t\tcallback: function callback() {},\n\t\t\tsystem: {},\n\t\t\tcontext: {},\n\t\t\tuser: {\n\t\t\t\tpassport_id: utils.getValueFromCookie(/USERID=([0-9]+):/) || utils.getValueFromCookie(/PID=([0-9]+)\\_/),\n\t\t\t\tft_session: utils.getValueFromCookie(/FTSession=([^;]+)/)\n\t\t\t}\n\t\t};\n\t};\n\t\n\t/**\n\t * Generate and store a new rootID.\n\t * @param {string} new_id - Optional rootID, if you want to use your own. Otherwise we'll create one for you.\n\t * @return {string|*} The rootID.\n\t */\n\tfunction setRootID(new_id) {\n\t\tsettings.set('root_id', requestID(new_id));\n\t\treturn settings.get('root_id');\n\t}\n\t\n\t/**\n\t * Get rootID.\n\t * @return {string|*} The rootID.\n\t */\n\tfunction getRootID() {\n\t\tvar root_id = settings.get('root_id');\n\t\n\t\tif (utils.isUndefined(root_id)) {\n\t\t\troot_id = setRootID();\n\t\t}\n\t\n\t\treturn root_id;\n\t}\n\t\n\t/**\n\t * Create a requestID (unique identifier) for the page impression.\n\t *\n\t * @param {string} request_id - Optional RequestID, if you want to use your own. Otherwise will create one for you.\n\t *\n\t * @return {string|*} The RequestID.\n\t */\n\tfunction requestID(request_id) {\n\t\tif (utils.isUndefined(request_id)) {\n\t\t\trequest_id = utils.guid();\n\t\t}\n\t\n\t\treturn request_id;\n\t}\n\t\n\t/**\n\t * Make a tracking request.\n\t *\n\t * @param {Object} config - Should be passed an object containing a format and the values for that format\n\t * @param {function} callback - Fired when the request has been made.\n\t *\n\t * @return {Object} request\n\t */\n\tfunction track(config, callback) {\n\t\tif (utils.isUndefined(callback)) {\n\t\t\tcallback = function callback() {};\n\t\t}\n\t\n\t\tvar coreContext = settings.get('config') && settings.get('config').context || {};\n\t\tconfig.context = utils.merge(coreContext, config.context);\n\t\n\t\tvar request = utils.merge(defaultConfig(), utils.merge(config, { callback: callback }));\n\t\n\t\tvar session = Session.session();\n\t\n\t\t/* Values here are kinda the mandatory ones, so we want to make sure they're possible. */\n\t\trequest = utils.merge({\n\t\t\tcontext: {\n\t\t\t\tid: requestID(request.id), // Keep an ID if it's been set elsewhere.\n\t\t\t\troot_id: getRootID()\n\t\t\t},\n\t\n\t\t\tuser: settings.get('config') ? settings.get('config').user : {},\n\t\n\t\t\tdevice: {\n\t\t\t\tspoor_session: session.id,\n\t\t\t\tspoor_session_is_new: session.isNew,\n\t\t\t\tspoor_id: User.userID()\n\t\t\t}\n\t\t}, request);\n\t\n\t\tutils.log('Core.Track', request);\n\t\t// Send it.\n\t\tSend.addAndRun(request);\n\t\n\t\treturn request;\n\t}\n\t\n\tmodule.exports = {\n\t\tsetRootID: setRootID,\n\t\tgetRootID: getRootID,\n\t\ttrack: track\n\t};\n\n/***/ },\n/* 138 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global module, require */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\tvar Core = __webpack_require__(137);\n\tvar utils = __webpack_require__(126);\n\t\n\t/**\n\t * Default properties for events.\n\t *\n\t * @type {Object}\n\t * @return {Object} - Default configuration for events\n\t */\n\tvar defaultEventConfig = function defaultEventConfig() {\n\t\treturn {\n\t\t\tcategory: 'event',\n\t\t\taction: 'generic',\n\t\t\tcontext: {}\n\t\t};\n\t};\n\t\n\t/**\n\t * Track an event.\n\t *\n\t * @param {Event} trackingEvent - The event, which could the following properties in its 'detail' key:\n\t *   [category] - The category, for example: video\n\t *   [action] - The action performed, for example: play\n\t *   [component_id] - Optional. The ID for the component instance.\n\t *\n\t * @param {Function} callback - Optional, Callback function. Called when request completed.\n\t * @return {undefined}\n\t */\n\tfunction event(trackingEvent, callback) {\n\t\tif (utils.is(trackingEvent.detail.category) || utils.is(trackingEvent.detail.action)) {\n\t\t\tvar noCategoryActionVals = 'Missing category or action values';\n\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\terror: noCategoryActionVals,\n\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t});\n\t\t\tthrow noCategoryActionVals;\n\t\t}\n\t\n\t\tvar config = utils.merge(defaultEventConfig(), {\n\t\t\tcategory: trackingEvent.detail.category,\n\t\t\taction: trackingEvent.detail.action,\n\t\t\tcontext: trackingEvent.detail\n\t\t});\n\t\n\t\tdelete config.context.category;\n\t\tdelete config.context.action;\n\t\n\t\tvar origamiElement = getOrigamiEventTarget(trackingEvent);\n\t\tif (origamiElement) {\n\t\t\tconfig.context.component_name = origamiElement.getAttribute('data-o-component');\n\t\t\tconfig.context.component_id = config.context.component_id || getComponentId(origamiElement);\n\t\t} else {\n\t\t\tconfig.context.component_name = config.context.component_name;\n\t\t\tconfig.context.component_id = config.context.component_id;\n\t\t}\n\t\n\t\tCore.track(config, callback);\n\t}\n\t\n\t/**\n\t * Helper function that gets the target of an event if it's an Origami component\n\t * @param  {Event} event - The event triggered.\n\t * @return {HTMLElement|undefined} - Returns the HTML element if an Origami component, else undefined.\n\t */\n\tfunction getOrigamiEventTarget(event) {\n\t\t// IE backwards compatibility (get the actual target). If not IE, uses\n\t\t// `event.target`\n\t\tvar element = event.target || event.srcElement;\n\t\n\t\tif (element && element.getAttribute('data-o-component')) {\n\t\t\treturn element;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n\t\n\t/**\n\t * Helper function that generates a component id based on its xpath\n\t *\n\t * @param {HTMLElement} element - The HTML Element to gen an ID for.\n\t *\n\t * @return {string} hash\n\t */\n\tfunction getComponentId(element) {\n\t\tvar path = _getElementPath(element);\n\t\n\t\tif (typeof path === 'undefined') {\n\t\t\treturn;\n\t\t}\n\t\n\t\t// Select the source element (first item in the ordered sequence `path`)\n\t\tvar srcElement = path[0];\n\t\n\t\t// Because, you could have two identical elements in the DOM as siblings,\n\t\t// we need to determine the 'sibling index': the order they're sitting within a DOM node.\n\t\t// Although in reality this is unlikely to always be the same, it's just a\n\t\t// best guess - unless child elements are always appended to an element rather than added as the first child.\n\t\tvar siblingIndex = function getSiblingIndex(element) {\n\t\t\tvar srcParent = element.parentElement;\n\t\t\tif (srcParent) {\n\t\t\t\tfor (var i = 0; i < srcParent.childNodes.length; i++) {\n\t\t\t\t\tif (srcParent.childNodes[i] === srcElement) {\n\t\t\t\t\t\treturn i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn -1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}(srcElement);\n\t\n\t\t// Generate a normalised string (normalising browser quirks) from the sequence of elements\n\t\tvar normalisedStringPath = path.reduceRight(function (builder, el) {\n\t\t\tif (!el.nodeName) {\n\t\t\t\treturn builder + ' - ' + el.constructor.name + '\\n';\n\t\t\t}\n\t\n\t\t\tvar nodeName = el.nodeName.toLowerCase();\n\t\n\t\t\t// In some browsers, document is prepended with a '#'\n\t\t\tif (nodeName.indexOf('#') === 0) {\n\t\t\t\treturn builder + '<' + nodeName + '>';\n\t\t\t}\n\t\n\t\t\t// Replace this stuff with stuff that makes each node unique - without including styling detail (as this may change depending on animation state etc, position)\n\t\t\treturn builder + '<' + nodeName + ' id=\"' + (el.id || '') + '\">';\n\t\t}, '');\n\t\n\t\t// Append a sibling index to the string and use some simple, off the shelf string hashing algorithm.\n\t\treturn _generateHash(normalisedStringPath + '_siblingIndex=' + siblingIndex);\n\t}\n\t\n\t/**\n\t * Gets the xpath for an element\n\t *\n\t * @param  {HTMLElement} element - The element to get a path for.\n\t *\n\t * @private\n\t *\n\t * @return {array} The xpath\n\t */\n\tfunction _getElementPath(element) {\n\t\tvar path = [];\n\t\n\t\twhile (element) {\n\t\t\tpath.push(element);\n\t\t\telement = element.parentElement;\n\t\t}\n\t\n\t\treturn path;\n\t}\n\t\n\t/**\n\t * JS Implementation of MurmurHash2\n\t *\n\t * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n\t * @see http://github.com/garycourt/murmurhash-js\n\t * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>\n\t * @see http://sites.google.com/site/murmurhash/\n\t * Copyright (c) 2011 Gary Court\n\t *\n\t * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\t *\n\t * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\t *\n\t * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t *\n\t * @param {string} str  - The string to hash, ASCII only.\n\t *\n\t * @return {number} 32-bit positive integer hash\n\t *\n\t * @private\n\t */\n\tfunction _generateHash(str) {\n\t\tvar l = str.length;\n\t\tvar h = 1 ^ l;\n\t\tvar i = 0;\n\t\tvar k = void 0;\n\t\n\t\twhile (l >= 4) {\n\t\t\tk = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n\t\n\t\t\tk = (k & 0xffff) * 0x5bd1e995 + (((k >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n\t\t\tk ^= k >>> 24;\n\t\t\tk = (k & 0xffff) * 0x5bd1e995 + (((k >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n\t\n\t\t\th = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16) ^ k;\n\t\n\t\t\tl -= 4;\n\t\t\t++i;\n\t\t}\n\t\n\t\tswitch (l) {\n\t\t\tcase 3:\n\t\t\t\th ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\th ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\th ^= str.charCodeAt(i) & 0xff;\n\t\t\t\th = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n\t\t}\n\t\n\t\th ^= h >>> 13;\n\t\th = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n\t\th ^= h >>> 15;\n\t\n\t\treturn h >>> 0;\n\t}\n\t\n\tmodule.exports = event;\n\tmodule.exports.init = function () {\n\t\tutils.addEvent(window, 'oTracking.event', event);\n\t};\n\n/***/ },\n/* 139 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global module, require, window */\n\t/*eslint-disable*/\n\t'use strict';\n\t/*eslint-enable*/\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Queue = __webpack_require__(131);\n\tvar Core = __webpack_require__(137);\n\tvar utils = __webpack_require__(126);\n\tvar internalQueue = void 0;\n\t\n\t/**\n\t * Default properties for events.\n\t *\n\t * @type {Object}\n\t * @return {Object} The default link configuration.\n\t */\n\tvar defaultLinkConfig = function defaultLinkConfig() {\n\t\treturn {\n\t\t\tcategory: 'link',\n\t\t\taction: 'click',\n\t\t\tcontext: {}\n\t\t};\n\t};\n\t\n\tvar callback = function callback() {};\n\t\n\t/**\n\t * Check if a URL is going to the same site (internal)\n\t *\n\t * @param {string} url - The url to check.\n\t *\n\t * @return {boolean} - Result of internal url.\n\t * @private\n\t */\n\tfunction isInternal(url) {\n\t\treturn url.indexOf(window.document.location.hostname) > -1;\n\t}\n\t\n\t/**\n\t * Check if a URL is going to an external site.\n\t *\n\t * @param {string} url - The url to check.\n\t *\n\t * @return {boolean} - The result of external url.\n\t * @private\n\t */\n\tfunction isExternal(url) {\n\t\treturn !isInternal(url);\n\t}\n\t\n\t/**\n\t * Checks if a URL is pointing at a file.\n\t * NOTE: Don't want to maintain a list of file extensions, so try best guess.\n\t *\n\t * @param {string} url - The url to check.\n\t *\n\t * @return {boolean} - The result if a url is a file location.\n\t * @private\n\t */\n\tfunction isFile(url) {\n\t\tvar path = url.replace(/^\\w+:\\/\\//, '').replace(/(#|\\?).+/g, '').replace(/\\/$/, '');\n\t\n\t\t// It must have a slash to have a file path\n\t\tif (path.indexOf('/') === -1) {\n\t\t\treturn false;\n\t\t}\n\t\n\t\t// No extension\n\t\tif (!path.match(/\\.(\\w{2,4})$/)) {\n\t\t\treturn false;\n\t\t}\n\t\n\t\t// Obviously a web page.\n\t\tif (['html', 'htm', 'php'].indexOf(RegExp.$1) > -1) {\n\t\t\treturn false;\n\t\t}\n\t\n\t\treturn true;\n\t}\n\t\n\t/**\n\t * Calculates the parents of a HTML element.\n\t *\n\t * @param {Element} element - The starting element.\n\t *\n\t * @return {array} The tree of parent elements.\n\t * @private\n\t */\n\tfunction parentTree(element) {\n\t\tif (!element) {\n\t\t\treturn [];\n\t\t}\n\t\n\t\tvar tree = [element];\n\t\n\t\tif (element.nodeName === 'BODY') {\n\t\t\treturn tree;\n\t\t}\n\t\n\t\treturn tree.concat(parentTree(element.parentElement));\n\t}\n\t\n\t/**\n\t * Create the identifier of the link. TODO: https://rally1.rallydev.com/#/16966478977d/detail/defect/17919485944\n\t *\n\t * @param {Element} link - The link element.\n\t *\n\t * @return {string} The ID for the link.\n\t * @private\n\t */\n\tfunction createLinkID(link) {\n\t\tvar parents = parentTree(link);\n\t\t/*\n\t let name = link.href || link.text || link.name || link.id;\n\t \tname = name.replace(/^http:\\/\\/[\\w\\.\\:]+/, '') // Remove http://[something].\n\t \t.replace(/^\\//, '') // Remove slash at beginning\n\t \t.replace(/(\\?|#).*$/, '') // Remove query string and page anchor (#)\n\t \t.replace(/\\/$/, '') // Remove trailing slash\n\t \t.replace(/\\.[a-z]{3,4}$/, ''); // Remove final '.com' or similar\n\t \t// If it's an external URL\n\t if (name === '') {\n\t \tname = link.href.replace(/^http:\\/\\//, '').split('?')[0].replace(/\\/$/, '');\n\t }\n\t \t// Last 2 items of URL\n\t name = name.split('/').slice(-2).filter(function (obj) { return (obj); });\n\t \t// If uuid then take final value only\n\t if (name.slice(-1)[0].match(/[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}/)) {\n\t \tname = name.slice(-1);\n\t }\n\t \t// Remove slashes as final outcome is slash delimited\n\t name = (name.length > 1 ? name.slice(0, 2).join('-') : name[0]).toLowerCase();\n\t */\n\t\treturn parents.map(function (p) {\n\t\t\treturn p.getAttribute('data-position') || p.getAttribute('data-trackable') || p.tagName.toLowerCase() + ((p.id ? '#' + p.id : '') || (p.className ? '.' + p.className.split(' ')[0] : ''));\n\t\t}).filter(function (e, i, arr) {\n\t\t\treturn arr.lastIndexOf(e) === i;\n\t\t}).reverse();\n\t}\n\t\n\t/**\n\t * Track the link.\n\t *\n\t * @param {Element} element - The element being tracked.\n\t * @param {Object} click_config - Supplementary config.\n\t *\n\t * @return {Object|boolean} - If synscronous, returns when the tracking event is sent, if async, returns true immediately.\n\t */\n\tfunction track(element, click_config) {\n\t\tif (utils.isUndefined(click_config)) {\n\t\t\tclick_config = {};\n\t\t}\n\t\n\t\tvar identifier = createLinkID(element);\n\t\n\t\tvar config = utils.merge(defaultLinkConfig(), {\n\t\t\tcategory: ['BUTTON', 'INPUT', 'SELECT'].indexOf(element.tagName) > -1 ? element.tagName.toLowerCase() : 'link',\n\t\t\tcontext: {\n\t\t\t\tlink: utils.merge({\n\t\t\t\t\tdom_path: identifier.join(' | '),\n\t\t\t\t\tdom_path_tokens: identifier,\n\t\t\t\t\tnode_name: element.tagName,\n\t\t\t\t\tsource_id: Core.getRootID(),\n\t\t\t\t\tdestination: element.href,\n\t\t\t\t\ttext: (['INPUT', 'SELECT'].indexOf(element.tagName) > -1 ? element.name : element.text).toString().trim(),\n\t\t\t\t\tis_internal: isInternal(element.href)\n\t\t\t\t}, click_config)\n\t\t\t}\n\t\t});\n\t\n\t\tif (isExternal(element.href) || isFile(element.href)) {\n\t\t\t// Send now\n\t\t\tconfig.async = false;\n\t\t\treturn Core.track(config, callback);\n\t\t}\n\t\n\t\tif (isInternal(element.href)) {\n\t\t\t// Queue and send on next page.\n\t\t\tinternalQueue.add(config).save();\n\t\t}\n\t\n\t\treturn true;\n\t}\n\t\n\t/**\n\t * Handle a click event.\n\t *\n\t * @param {Event} event - The event.\n\t *\n\t * @return {boolean} - Returns the result of the tracking request\n\t * @private\n\t */\n\tfunction clickEvent(event) {\n\t\treturn track(event.target);\n\t}\n\t\n\t/**\n\t * Set the callback called on every link tracking event.\n\t *\n\t * @param {Function} cb - The callback.\n\t * @return {undefined}\n\t */\n\tfunction onClick(cb) {\n\t\tcallback = cb;\n\t}\n\t\n\t/**\n\t * If there are any requests queued, attempts to send the next one\n\t * Otherwise, does nothing\n\t * @return {undefined}\n\t */\n\tfunction runQueue() {\n\t\tvar next = function next() {\n\t\t\trunQueue();callback();\n\t\t};\n\t\tvar nextLink = internalQueue.shift();\n\t\tif (nextLink) {\n\t\t\tCore.track(nextLink, next);\n\t\t}\n\t}\n\t\n\t/**\n\t * Listener for links.\n\t *\n\t * @param {CustomEvent} e - The CustomEvent\n\t * @private\n\t * @return {undefined}\n\t */\n\tfunction listener(e) {\n\t\ttrack(e.detail);\n\t}\n\t\n\t/**\n\t * Setup and initialise link tracking.\n\t *\n\t * @param {Object}  config - Initial configuration\n\t * @param {Element} config.root - Optional. The root element to search for links. Defaults to window.document - useful if trying to track links from an iframe.\n\t * @param {string}  config.selector - Optional. The selector to use to search for links. Defaults to 'a'.\n\t * @param {string}  config.event - Optional. The event to listen on. Defaults to 'click'.\n\t * @param {array}   config.links - Optional. If you've already worked out the links to track, then this is used to pass them over. Must be an array with elements that accept events.\n\t *\n\t * @return {array} The links setup in this init.\n\t */\n\tfunction init(config) {\n\t\tvar links = void 0;\n\t\tvar i = void 0;\n\t\n\t\tinternalQueue = new Queue('links');\n\t\n\t\trunQueue();\n\t\n\t\t// Listen for page requests. If this is a single page app, we can send link requests now.\n\t\tutils.onPage(runQueue);\n\t\n\t\tif (utils.isUndefined(config)) {\n\t\t\tconfig = {};\n\t\t}\n\t\tconfig = utils.merge({\n\t\t\troot: window.document,\n\t\t\tselector: 'a',\n\t\t\tevent: 'click',\n\t\t\tlinks: null\n\t\t}, config);\n\t\n\t\tif (config.hasOwnProperty('callback')) {\n\t\t\tcallback = config.callback;\n\t\t}\n\t\n\t\tif (config.links && utils.is(config.links, 'object') && config.links.constructor.toString().match(/array/i)) {\n\t\t\tlinks = config.links;\n\t\n\t\t\tfor (i = 0; i < links.length; i = i + 1) {\n\t\t\t\tutils.addEvent(links[i], config.event, clickEvent);\n\t\t\t}\n\t\t} else {\n\t\t\tif ((0, _typeof3.default)(config.root) !== 'object' || typeof config.selector !== 'string') {\n\t\t\t\tvar configException = 'If supplying a config it must have a valid root element and a selector string';\n\t\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\t\terror: configException,\n\t\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t\t});\n\t\t\t\tthrow configException;\n\t\t\t}\n\t\n\t\t\tutils.addEvent(config.root, config.event, function (event) {\n\t\t\t\tif (event.target.tagName === config.selector.toUpperCase()) {\n\t\t\t\t\tclickEvent.call(event.target, event);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\n\t\tutils.addEvent(window, 'oTracking.link', listener);\n\t}\n\t\n\tmodule.exports = {\n\t\tinit: init,\n\t\tonClick: onClick,\n\t\ttrack: track\n\t};\n\n/***/ },\n/* 140 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(141);\n\n/***/ },\n/* 141 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t/*global module*/\n\t\n\t/**\n\t * Detect IE 8 through injected conditional comments:\n\t * no UA detection, no need for conditional compilation or JS check\n\t * @return {Bool} true if the browser is IE 8\n\t */\n\tvar isIE8 = function () {\n\t\tvar b = document.createElement('B');\n\t\tvar docElem = document.documentElement;\n\t\tvar isIE = void 0;\n\t\n\t\tb.innerHTML = '<!--[if IE 8]><b id=\"ie8test\"></b><![endif]-->';\n\t\tdocElem.appendChild(b);\n\t\tisIE = !!document.getElementById('ie8test');\n\t\tdocElem.removeChild(b);\n\t\treturn isIE;\n\t}();\n\t\n\t/**\n\t * Grab grid properties surfaced in html:after's content\n\t * @return {Object} layout names and gutter widths\n\t */\n\tfunction getGridProperties() {\n\t\t// Contained in a try/catch as it should not error if o-grid styles are not (deliberately or accidentally) loaded\n\t\t// e.g. o-tracking will always try to read this property, but the page is not obliged to use o-grid for layout\n\t\ttry {\n\t\t\tvar gridProperties = window.getComputedStyle(document.documentElement, ':after').getPropertyValue('content');\n\t\t\t// Firefox computes: \"{\\\"foo\\\": \\\"bar\\\"}\"\n\t\t\t// We want readable JSON: {\"foo\": \"bar\"}\n\t\t\tgridProperties = gridProperties.replace(/'/g, '').replace(/\\\\/g, '').replace(/^\"/, '').replace(/\"$/, '');\n\t\t\treturn JSON.parse(gridProperties);\n\t\t} catch (e) {\n\t\t\treturn {};\n\t\t}\n\t}\n\t\n\t/**\n\t * Grab the current layout\n\t * @return {String} Layout name\n\t */\n\tfunction getCurrentLayout() {\n\t\tif (isIE8) {\n\t\t\treturn 'L';\n\t\t}\n\t\n\t\treturn getGridProperties().layout;\n\t}\n\t\n\t/**\n\t * Grab the current space between columns\n\t * @return {String} Gutter width in pixels\n\t */\n\tfunction getCurrentGutter() {\n\t\tif (isIE8) {\n\t\t\treturn '20px';\n\t\t}\n\t\n\t\treturn getGridProperties().gutter;\n\t}\n\t\n\texports.default = {\n\t\tgetCurrentLayout: getCurrentLayout,\n\t\tgetCurrentGutter: getCurrentGutter\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 142 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Timing = __webpack_require__(143);\n\tvar Cta = __webpack_require__(144);\n\tvar Copy = __webpack_require__(148);\n\tvar Attention = __webpack_require__(149);\n\tvar Positional = __webpack_require__(150);\n\t\n\tvar NextEvents = function NextEvents() {};\n\t\n\tNextEvents.prototype.init = function () {\n\t\n\t\t// Initialise any call-to-action tracking code\n\t\tthis.cta = new Cta();\n\t\tthis.cta.track(document.body);\n\t\n\t\t// text copy -> clipboard tracking\n\t\tthis.copy = new Copy(document.body);\n\t\tthis.copy.track();\n\t\tthis.attention = new Attention();\n\t\tthis.attention.init();\n\t\n\t\tthis.positional = new Positional();\n\t\tthis.positional.init(document);\n\t\n\t\t// Nav timing - https://developer.mozilla.org/en-US/docs/Navigation_timing\n\t\tnew Timing().track();\n\t};\n\t\n\tNextEvents.prototype.destroy = function () {\n\t\tthis.cta.destroy();\n\t};\n\t\n\tmodule.exports = new NextEvents();\n\n/***/ },\n/* 143 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar broadcast = __webpack_require__(75).broadcast;\n\t\n\t// ordered performance timing events that are fired\n\tvar timingEvents = ['navigationStart', 'unloadEventStart', 'unloadEventEnd', 'redirectStart', 'redirectEnd', 'fetchStart', 'domainLookupStart', 'domainLookupEnd', 'connectStart', 'connectEnd', 'secureConnectionStart', 'requestStart', 'responseStart', 'responseEnd', 'domLoading', 'domInteractive', 'domContentLoadedEventStart', 'domContentLoadedEventEnd', 'domComplete', 'loadEventStart', 'loadEventEnd'];\n\t\n\tvar getOffsets = function getOffsets(performance) {\n\t\tvar timing = performance.timing;\n\t\treturn ['navigationStart', 'domLoading'].reduce(function (offsets, offsetEvent) {\n\t\t\tvar offsetTime = timing[offsetEvent];\n\t\t\toffsets[offsetEvent] = timingEvents.slice(timingEvents.indexOf(offsetEvent) + 1).reduce(function (events, event) {\n\t\t\t\tvar eventTime = timing[event];\n\t\t\t\tif (eventTime) {\n\t\t\t\t\tevents[event] = eventTime - offsetTime;\n\t\t\t\t}\n\t\t\t\treturn events;\n\t\t\t}, {});\n\t\t\treturn offsets;\n\t\t}, {});\n\t};\n\t\n\tvar getMarks = function getMarks(performance) {\n\t\treturn performance.getEntriesByType ? performance.getEntriesByType('mark').reduce(function (marks, mark) {\n\t\t\tmarks[mark.name] = Math.round(mark.startTime);\n\t\t\treturn marks;\n\t\t}, {}) : {};\n\t};\n\t\n\tvar getCustom = function getCustom(window, performance) {\n\t\tvar custom = {};\n\t\t// first paint metric, cribbed from https://github.com/addyosmani/timing.js/blob/master/timing.js\n\t\tvar chromeObj = window.chrome;\n\t\tif (chromeObj && chromeObj.loadTimes) {\n\t\t\tvar chromeLoadTimes = chromeObj.loadTimes();\n\t\t\tcustom.firstPaint = Math.round(chromeLoadTimes.firstPaintTime * 1000 - chromeLoadTimes.startLoadTime * 1000);\n\t\t} else if (typeof performance.timing.msFirstPaint === 'number') {\n\t\t\tcustom.firstPaint = performance.timing.msFirstPaint - performance.timing.navigationStart;\n\t\t}\n\t\n\t\treturn custom;\n\t};\n\t\n\tvar NavigationTiming = function NavigationTiming() {};\n\t\n\tNavigationTiming.prototype.track = function () {\n\t\twindow.addEventListener('load', function () {\n\t\t\tvar performance = window.performance || window.webkitPerformance || window.msPerformance || window.mozPerformance;\n\t\t\tif (!performance || !('timing' in performance) || !/spoor-id=0/.test(document.cookie)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\tsetTimeout(function () {\n\t\t\t\tvar offsets = getOffsets(performance);\n\t\t\t\tvar marks = getMarks(performance);\n\t\t\t\tvar custom = getCustom(window, performance);\n\t\n\t\t\t\tbroadcast('oTracking.event', {\n\t\t\t\t\tcategory: 'page-load',\n\t\t\t\t\taction: 'timing',\n\t\t\t\t\ttimings: { offsets: offsets, marks: marks, custom: custom }\n\t\t\t\t});\n\t\t\t}, 0);\n\t\t});\n\t};\n\t\n\tmodule.exports = NavigationTiming;\n\n/***/ },\n/* 144 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar getDomPath = __webpack_require__(145);\n\tvar getDomPathString = __webpack_require__(146);\n\tvar getHref = __webpack_require__(147);\n\tvar Delegate = __webpack_require__(110);\n\t\n\tvar broadcast = __webpack_require__(75).broadcast;\n\t\n\tvar CTA = function CTA() {\n\t\tthis.allowedElementsSelector = 'a, button, input[type=\"checkbox\"]';\n\t\tthis.delegate = new Delegate();\n\t};\n\t\n\t// Event delegate for all clicks on the document. Rebroadcasts them as\n\t// 'trackable' events if the approriate data attribute is found.\n\tCTA.prototype.track = function (root) {\n\t\tthis.delegate.root(root);\n\t\tthis.clickHandler = function (e, element) {\n\t\t\tvar nodeName = element.nodeName.toLowerCase();\n\t\t\tvar isTrackable = element.hasAttribute('data-trackable');\n\t\n\t\t\tif (!isTrackable) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\n\t\t\tvar ariaPressed = element.getAttribute('aria-pressed');\n\t\t\tvar href = getHref(element);\n\t\n\t\t\tvar meta = element.getAttribute('data-trackable-meta');\n\t\t\tmeta = meta ? JSON.parse(meta) : {};\n\t\n\t\t\tmeta.nodeName = nodeName;\n\t\t\tmeta.domPath = getDomPathString(element);\n\t\t\tmeta.textContent = element.textContent;\n\t\n\t\t\tif (href) {\n\t\t\t\tmeta.destination = getHref(href);\n\t\t\t}\n\t\n\t\t\t// Reflect ARIA state so people can track open/close actions\n\t\t\tmeta.aria = {\n\t\t\t\tpressed: ariaPressed === 'true',\n\t\t\t\texpanded: element.getAttribute('aria-expanded') === 'true',\n\t\t\t\trole: element.getAttribute('role')\n\t\t\t};\n\t\n\t\t\t// FIXME - DEPRECATED in favour of `meta.aria` remove this hack once\n\t\t\t// everyone's updated their markup and js '' is for backwards\n\t\t\t// compatibility with the oft used but mistaken\n\t\t\t// practice of using the existence of aria-pressed as the flag, rather\n\t\t\t// than its value\n\t\t\tmeta.domPressed = ariaPressed === 'true' || ariaPressed === '';\n\t\n\t\t\tmeta.domPathTokens = getDomPath(element, []).reverse();\n\t\t\tmeta.target = element.getAttribute('data-trackable');\n\t\t\tmeta.conceptId = element.getAttribute('data-concept-id');\n\t\t\tmeta.contentId = element.getAttribute('data-content-id');\n\t\n\t\t\tvar position = element.getAttribute('data-position');\n\t\t\tvar siblings = element.getAttribute('data-siblings');\n\t\t\tvar destination = element.getAttribute('href');\n\t\n\t\t\tif (position) {\n\t\t\t\tmeta.position = parseInt(position);\n\t\t\t}\n\t\n\t\t\tif (siblings) {\n\t\t\t\tmeta.siblings = parseInt(siblings);\n\t\t\t}\n\t\n\t\t\tif (destination) {\n\t\t\t\tmeta.destination = destination;\n\t\t\t}\n\t\n\t\t\tmeta.category = 'click';\n\t\t\tmeta.action = 'cta';\n\t\t\tmeta.referrer = document.referrer;\n\t\t\tmeta.url = document.location.href;\n\t\t\tbroadcast('oTracking.event', meta);\n\t\t}.bind(this);\n\t\n\t\t// Event capture avoids missing events that has been prevented from bubbling\n\t\tthis.delegate.on('click', this.allowedElementsSelector, this.clickHandler, true);\n\t};\n\t\n\tCTA.prototype.destroy = function () {\n\t\tthis.delegate.destroy();\n\t};\n\t\n\tmodule.exports = CTA;\n\n/***/ },\n/* 145 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/*\n\t\n\tGiven an element this will return the _trackable path_ by traversing the DOM\n\tancestors.\n\t\n\tAny ancestor with a `data-trackable` attribute will be added to the _path_.\n\t\n\tEg,\n\t\n\t\t<div data-trackable=\"foo\">\n\t\t\t<ul>\n\t\t\t\t<li data-trackable=\"item 1\">\n\t\t\t\t\t<button data-trackable=\"hello\">hello</button>\n\t\t\t\t<li data-trackable=\"item 2\" data-trackable-once> // handler removed after first interactiton\n\t\t\t\t\t..\n\t\t\t\t<li data-trackable=\"item 3\">\n\t\t\t\t\t<span></span>\n\t\t</div>\n\t\n\tSo, given the BUTTON element, `getDomPath` will return `['hello', 'item 1', 'foo']`.\n\t\n\tGiven SPAN `getDomPath` will return `['item 3 | foo']`.\n\t\n\t*/\n\tvar getDomPath = function getDomPath(el, path, depth) {\n\t\n\t\tdepth = depth || 0;\n\t\n\t\tif (!el.parentNode) {\n\t\t\treturn path;\n\t\t}\n\t\n\t\t// Transponse the parent node where the target element is a text node\n\t\tif (path.length === 0 && el.nodeType === Node.TEXT_NODE) {\n\t\t\tel = el.parentNode;\n\t\t}\n\t\n\t\tvar trackable = el.getAttribute('data-trackable');\n\t\n\t\tif (trackable) {\n\t\t\tpath.push(trackable);\n\t\t}\n\t\n\t\tvar trackableOnce = el.hasAttribute('data-trackable-once');\n\t\n\t\t// Only track some elements once per page\n\t\tif (trackableOnce && depth === 0) {\n\t\t\tel.removeAttribute('data-trackable');\n\t\t}\n\t\n\t\t// Terminate the path traversal\n\t\tif (el.hasAttribute('data-trackable-terminate')) {\n\t\t\treturn path;\n\t\t}\n\t\n\t\treturn getDomPath(el.parentNode, path, depth + 1);\n\t};\n\t\n\tmodule.exports = getDomPath;\n\n/***/ },\n/* 146 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar getDomPath = __webpack_require__(145);\n\t\n\tvar getDomPathString = function getDomPathString(element) {\n\t\treturn getDomPath(element, []).reverse().join(' | ');\n\t};\n\t\n\tmodule.exports = getDomPathString;\n\n/***/ },\n/* 147 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar getHref = function getHref(el, path) {\n\t\n\t\tif (!el.parentNode) {\n\t\t\treturn path;\n\t\t}\n\t\n\t\tvar href = el.getAttribute('href');\n\t\n\t\tif (href) {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.href = href;\n\t\t\treturn a.protocol + '//' + a.hostname + a.pathname;\n\t\t}\n\t\n\t\treturn getHref(el.parentNode, path);\n\t};\n\t\n\tmodule.exports = getHref;\n\n/***/ },\n/* 148 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar broadcast = __webpack_require__(75).broadcast;\n\t\n\tvar Copy = function Copy(root) {\n\t\tthis.root = root || document;\n\t};\n\t\n\tCopy.prototype.track = function () {\n\t\n\t\tthis.root.addEventListener('copy', function (e) {\n\t\n\t\t\tvar element = e.target;\n\t\t\tvar data = {\n\t\t\t\taction: 'copy',\n\t\t\t\tcategory: 'text',\n\t\t\t\tcontext: {\n\t\t\t\t\tnodeName: element.nodeName.toLowerCase(),\n\t\t\t\t\tproduct: 'next'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tif (window.getSelection) {\n\t\t\t\tvar selection = window.getSelection().toString();\n\t\t\t\tdata.context.characters = selection.length;\n\t\t\t\tdata.context.words = Math.ceil(selection.split(/\\b/).length / 2);\n\t\t\t\tif (selection.length > 100) {\n\t\t\t\t\tdata.selection = selection.substr(0, 47) + ' ... ' + selection.substr(-47);\n\t\t\t\t} else {\n\t\t\t\t\tdata.selection = selection;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbroadcast('oTracking.event', data);\n\t\t});\n\t};\n\t\n\tmodule.exports = Copy;\n\n/***/ },\n/* 149 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar oViewport = __webpack_require__(99);\n\tvar broadcast = __webpack_require__(75).broadcast;\n\tvar ATTENTION_INTERVAL = 5000;\n\tvar ATTENTION_EVENTS = ['load', 'click', 'focus', 'scroll', 'mousemove', 'touchstart', 'touchend', 'touchcancel', 'touchleave'];\n\tvar UNATTENTION_EVENTS = ['blur'];\n\tvar eventToSend = 'onbeforeunload' in window ? 'beforeunload' : 'unload';\n\t\n\tvar Attention = function () {\n\t\tfunction Attention() {\n\t\t\t(0, _classCallCheck3.default)(this, Attention);\n\t\n\t\t\tthis.totalAttentionTime = 0;\n\t\t\tthis.startAttentionTime;\n\t\t\tthis.endAttentionTime;\n\t\t}\n\t\n\t\tAttention.prototype.init = function init() {\n\t\t\tvar _this = this;\n\t\n\t\t\t//Add events for all the other Attention events\n\t\t\tfor (var i = 0; i < ATTENTION_EVENTS.length; i++) {\n\t\t\t\twindow.addEventListener(ATTENTION_EVENTS[i], function (ev) {\n\t\t\t\t\treturn _this.startAttention(ev);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tfor (var _i = 0; _i < UNATTENTION_EVENTS.length; _i++) {\n\t\t\t\twindow.addEventListener(UNATTENTION_EVENTS[_i], function (ev) {\n\t\t\t\t\treturn _this.endAttention(ev);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\toViewport.listenTo('visibility');\n\t\t\tdocument.body.addEventListener('oViewport.visibility', function (ev) {\n\t\t\t\treturn _this.handleVisibilityChange(ev);\n\t\t\t}, false);\n\t\n\t\t\tthis.addVideoEvents();\n\t\n\t\t\t// Add event to send data on unload\n\t\t\twindow.addEventListener(eventToSend, function () {\n\t\t\t\t_this.endAttention();\n\t\t\t\tbroadcast('oTracking.event', {\n\t\t\t\t\tcategory: 'page',\n\t\t\t\t\taction: 'interaction',\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\tattention: {\n\t\t\t\t\t\t\ttotal: _this.totalAttentionTime\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\n\t\tAttention.prototype.startAttention = function startAttention() {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tclearTimeout(this.attentionTimeout);\n\t\t\tif (!this.startAttentionTime) {\n\t\t\t\tthis.startAttentionTime = new Date().getTime();\n\t\t\t}\n\t\t\tthis.attentionTimeout = setTimeout(function () {\n\t\t\t\treturn _this2.endAttention();\n\t\t\t}, ATTENTION_INTERVAL);\n\t\t};\n\t\n\t\tAttention.prototype.startConstantAttention = function startConstantAttention() {\n\t\t\tvar _this3 = this;\n\t\n\t\t\tthis.constantAttentionInterval = setInterval(function () {\n\t\t\t\treturn _this3.startAttention();\n\t\t\t}, ATTENTION_INTERVAL);\n\t\t};\n\t\n\t\tAttention.prototype.endConstantAttention = function endConstantAttention() {\n\t\t\tthis.endAttention();\n\t\t\tclearInterval(this.constantAttentionInterval);\n\t\t};\n\t\n\t\tAttention.prototype.endAttention = function endAttention() {\n\t\t\tif (this.startAttentionTime) {\n\t\t\t\tthis.endAttentionTime = new Date().getTime();\n\t\t\t\tthis.totalAttentionTime += Math.round((this.endAttentionTime - this.startAttentionTime) / 1000);\n\t\t\t\tclearTimeout(this.attentionTimeout);\n\t\t\t\tthis.startAttentionTime = null;\n\t\t\t}\n\t\t};\n\t\n\t\tAttention.prototype.addVideoEvents = function addVideoEvents() {\n\t\t\tvar _this5 = this;\n\t\n\t\t\tthis.videoPlayers;\n\t\t\tif (window.FTVideo) {\n\t\t\t\tthis.videoPlayers = document.getElementsByClassName('BrightcoveExperience');\n\t\t\t\tfor (var i = 0; i < this.videoPlayers.length; i++) {\n\t\t\t\t\twindow.FTVideo.createPlayerAsync(this.videoPlayers[i].id, function (player) {\n\t\t\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\t\t\tplayer.on(player.MEDIA_PLAY_EVENT, function (ev) {\n\t\t\t\t\t\t\treturn _this4.startConstantAttention(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.on(player.MEDIA_STOP_EVENT, function (ev) {\n\t\t\t\t\t\t\treturn _this4.endConstantAttention(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.videoPlayers = document.getElementsByTagName('video');\n\t\t\t\tfor (var _i2 = 0; _i2 < this.videoPlayers.length; _i2++) {\n\t\t\t\t\tthis.videoPlayers[_i2].addEventListener('playing', function (ev) {\n\t\t\t\t\t\treturn _this5.startConstantAttention(ev);\n\t\t\t\t\t});\n\t\t\t\t\tthis.videoPlayers[_i2].addEventListener('pause', function (ev) {\n\t\t\t\t\t\treturn _this5.endConstantAttention(ev);\n\t\t\t\t\t});\n\t\t\t\t\tthis.videoPlayers[_i2].addEventListener('ended', function (ev) {\n\t\t\t\t\t\treturn _this5.endConstantAttention(ev);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tAttention.prototype.handleVisibilityChange = function handleVisibilityChange(ev) {\n\t\t\tif (ev.detail.hidden) {\n\t\t\t\tthis.endAttention();\n\t\t\t} else {\n\t\t\t\tthis.startAttention();\n\t\t\t}\n\t\t};\n\t\n\t\treturn Attention;\n\t}();\n\t\n\tmodule.exports = Attention;\n\n/***/ },\n/* 150 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Delegate = __webpack_require__(110);\n\t\n\tvar $ = function $(q) {\n\t\treturn [].slice.call(q);\n\t};\n\t\n\tvar Positional = function () {\n\t\tfunction Positional() {\n\t\t\t(0, _classCallCheck3.default)(this, Positional);\n\t\n\t\t\tthis.delegate = new Delegate();\n\t\t}\n\t\n\t\tPositional.prototype.init = function init(el) {\n\t\t\t$(el.querySelectorAll('[role=main] section')).forEach(function (section) {\n\t\t\t\t$(section.querySelectorAll('article')).forEach(function (article, index, articles) {\n\t\t\t\t\t$(article.querySelectorAll('a')).forEach(function (link) {\n\t\t\t\t\t\tlink.setAttribute('data-position', index + 1);\n\t\t\t\t\t\tlink.setAttribute('data-siblings', articles.length);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\n\t\tPositional.prototype.destroy = function destroy() {\n\t\t\tthis.delegate.destroy();\n\t\t};\n\t\n\t\treturn Positional;\n\t}();\n\t\n\tmodule.exports = Positional;\n\n/***/ },\n/* 151 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t// Loads Google Floodlight\n\tmodule.exports = function (flags) {\n\t\n\t\tvar isAnonymous = !/FTSession/.test(document.cookie);\n\t\tvar spoorId = /spoor-id=([^;]+)/.exec(document.cookie);\n\t\tvar host = 'https://4235225.fls.doubleclick.net/activityi;src=4235225';\n\t\n\t\t// sign-up attributes\n\t\tvar c = document.querySelector(['data-signup-country']);\n\t\tvar t = document.querySelector(['data-signup-term']);\n\t\tvar o = document.querySelector(['data-signup-offer']);\n\t\n\t\tvar country = c ? c.getAttribute('data-signup-country') : undefined;\n\t\tvar term = t ? c.getAttribute('data-signup-term') : undefined;\n\t\tvar offer = o ? c.getAttribute('data-signup-offer') : undefined;\n\t\n\t\t// sign-up funnel flags\n\t\tvar isSignUpForm = /^\\/signup/.test(location.pathname);\n\t\tvar isSubscriptionConfirmation = /^\\/thank-you/.test(location.pathname);\n\t\tvar isTrialConfirmation = /(4998d861-8960-a8d1-3738-eae97bcd07a2|41218b9e-c8ae-c934-43ad-71b13fcb4465)/.test(offer);\n\t\n\t\tvar spoor = spoorId ? spoorId[1] : '';\n\t\n\t\tif (flags && flags.get('floodlight') && isAnonymous && spoorId) {\n\t\n\t\t\tvar i = new Image();\n\t\n\t\t\tif (isSignUpForm) {\n\t\t\t\ti.src = host + ';type=signu107;cat=ft-ne00;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=1';\n\t\t\t} else if (isSubscriptionConfirmation) {\n\t\t\t\ti.src = host + ';type=trans658;cat=ft-ne0;qty=1;u5=' + offer + ';u7=' + country + ';u8=' + term + ';u10=' + spoor + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;';\n\t\t\t} else if (isTrialConfirmation) {\n\t\t\t\ti.src = host + ';type=trans658;cat=ft-ne00;qty=1;u5=' + offer + ';u7=' + country + ';u8=' + term + ';u10=' + spoor + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;';\n\t\t\t} else {\n\t\t\t\ti.src = host + ';type=homeo886;cat=ft-ne000;u10=' + spoor + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=1;num=1';\n\t\t\t}\n\t\t}\n\t};\n\n/***/ },\n/* 152 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(75);\n\t\n\tvar enableChartbeat = function enableChartbeat() {\n\t\twindow._sf_async_config = {\n\t\t\tuid: 14181,\n\t\t\tdomain: 'next.ft.com', // Leave this as next.ft.com, even after it changes to ft.com\n\t\t\tuseCanonical: true\n\t\t};\n\t\n\t\t// HACK: If the user is on the front page override the path so that it is different depending on the edition.\n\t\t// Use a path that looks like the old-style FT.com front pages so that they still sort of make sense.\n\t\tif (location.pathname === '/' && document.querySelector('[data-next-edition]')) {\n\t\t\twindow._sf_async_config.path = '/home/' + (document.querySelector('[data-next-edition]').getAttribute('data-next-edition') || '');\n\t\t}\n\t\t(0, _utils.loadScript)('//static.chartbeat.com/js/chartbeat.js');\n\t};\n\t\n\t// The chartbeat Heads-Up-Display (HUD) requires the chartbeat script to be loaded.\n\t// Editorial users who wish to use the HUD will need to toggle \"chartbeatHud\" on.\n\t// For non-HUD uses, load chartbeat for a random 20% of device IDs (i.e. users).\n\t/*\n\tChartbeat (https://chartbeat.com) is a tracking service.\n\tOriginally for advertising, they've moved their suite towards editorial applications.\n\tIn this case we are only interested in the editorial; specifically the HUD (heads up display).\n\tEventually this will be replaced by FT's in-house \"lantern\" application, utilising our own data.\n\t*/\n\t\n\tmodule.exports = function (flags) {\n\t\tif (flags.get('chartbeatHud')) {\n\t\t\tenableChartbeat();\n\t\t} else if (flags.get('chartbeat')) {\n\t\t\tvar spoorId = (0, _utils.getCookieValue)('spoor-id');\n\t\t\tvar spoorNumber = spoorId.replace(/-/g, '');\n\t\t\tvar spoorNumberTrim = spoorNumber.substring(spoorNumber.length - 12, spoorNumber.length); // Don't overflow the int\n\t\t\tvar spoorNumberDec = parseInt(spoorNumberTrim, 16);\n\t\t\tif (spoorNumberDec % 100 < 20) {\n\t\t\t\t// 20%\n\t\t\t\tenableChartbeat();\n\t\t\t}\n\t\t}\n\t};\n\n/***/ },\n/* 153 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(75);\n\t\n\tfunction enableMouseflow() {\n\t\twindow._mfq = window._mfq || [];\n\t\twindow._mfq.push(['setVariable', 'spoorId', (0, _utils.getCookieValue)('spoor-id')]);\n\t\t(0, _utils.loadScript)('https://cdn.mouseflow.com/projects/3d6fc486-2914-4efc-a5ae-35a5eac972f2.js');\n\t}\n\t\n\t// Loads mouseflow tracking code\n\tmodule.exports = function (flags) {\n\t\n\t\tvar isAutomatedTest = window.location.href.indexOf('backend') !== -1;\n\t\tvar isSignUpApp = !!document.querySelector('html[data-next-app=signup]') && !isAutomatedTest;\n\t\tvar hasLightSignup = !!document.querySelector('.o-email-only-signup');\n\t\n\t\tif (flags.get('mouseflowForce')) {\n\t\t\tenableMouseflow();\n\t\t} else if (flags.get('mouseflow')) {\n\t\n\t\t\tif (isSignUpApp) {\n\t\t\t\tenableMouseflow();\n\t\t\t}\n\t\t\tif (hasLightSignup && Math.random() <= 0.01) {\n\t\t\t\tenableMouseflow();\n\t\t\t} else {\n\t\t\t\tvar spoorId = (0, _utils.getCookieValue)('spoor-id');\n\t\t\t\tvar spoorNumber = spoorId.replace(/-/g, '');\n\t\t\t\tvar spoorNumberTrim = spoorNumber.substring(spoorNumber.length - 12, spoorNumber.length); // Don't overflow the int\n\t\t\t\tvar spoorNumberDec = parseInt(spoorNumberTrim, 16);\n\t\n\t\t\t\tif (spoorNumberDec % 100 === 0) {\n\t\t\t\t\tenableMouseflow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n/***/ },\n/* 154 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(75);\n\t\n\tvar isAllocated = function isAllocated() {\n\t\treturn (/spoor-id=0/.test(document.cookie)\n\t\t);\n\t};\n\t\n\t// Loads Sourcepoint\n\tmodule.exports = function (flags) {\n\t\tif (flags && flags.get('sourcepoint') && isAllocated()) {\n\t\n\t\t\tdocument.addEventListener('sp.blocking', function () {\n\t\t\t\t(0, _utils.broadcast)('oTracking.event', {\n\t\t\t\t\tcategory: 'ads',\n\t\t\t\t\taction: 'blocked',\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\tprovider: 'sourcepoint'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\n\t\t\tvar sp = document.createElement('script');\n\t\t\tsp.async = sp.defer = true;\n\t\t\tsp.src = 'https://h2.ft.com/static-files/sp/prod/long/sp/sp-2.js';\n\t\t\tsp.setAttribute('data-client-id', 'pHQAcgfacNTVtzm');\n\t\t\tdocument.body.appendChild(sp);\n\t\t}\n\t};\n\n/***/ },\n/* 155 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _toConsumableArray2 = __webpack_require__(156);\n\t\n\tvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar broadcast = __webpack_require__(75).broadcast;\n\t\n\tvar track = function track(componentId, componentPos) {\n\t\treturn broadcast('oTracking.event', { category: 'page', action: 'scrolldepth', componentId: componentId, componentPos: componentPos });\n\t};\n\t\n\tvar intersectionCallback = function intersectionCallback(observer, changes) {\n\t\treturn changes.forEach(function (change) {\n\t\t\tvar component = change.target;\n\t\t\tvar componentId = component.id;\n\t\t\t// get the component's position\n\t\t\tvar componentPos = [].concat((0, _toConsumableArray3.default)(document.querySelectorAll('.js-track-scroll-event'))).findIndex(function (component) {\n\t\t\t\treturn component.id === componentId;\n\t\t\t});\n\t\t\ttrack(componentId, componentPos + 1);\n\t\t\tobserver.unobserve(component);\n\t\t});\n\t};\n\t\n\tvar init = function init() {\n\t\tif (!/spoor-id=0/.test(document.cookie) || !window.IntersectionObserver) {\n\t\t\treturn false;\n\t\t}\n\t\tvar observer = new IntersectionObserver(function (changes) {\n\t\t\tintersectionCallback(this, changes);\n\t\t});\n\t\t[].concat((0, _toConsumableArray3.default)(document.querySelectorAll('.js-track-scroll-event'))).forEach(function (component) {\n\t\t\tobserver.observe(component);\n\t\t});\n\t};\n\t\n\texports.default = { init: init };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 156 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _from = __webpack_require__(157);\n\t\n\tvar _from2 = _interopRequireDefault(_from);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function (arr) {\n\t  if (Array.isArray(arr)) {\n\t    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n\t      arr2[i] = arr[i];\n\t    }\n\t\n\t    return arr2;\n\t  } else {\n\t    return (0, _from2.default)(arr);\n\t  }\n\t};\n\n/***/ },\n/* 157 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(158), __esModule: true };\n\n/***/ },\n/* 158 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(9);\n\t__webpack_require__(159);\n\tmodule.exports = __webpack_require__(17).Array.from;\n\n/***/ },\n/* 159 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar ctx            = __webpack_require__(18)\n\t  , $export        = __webpack_require__(15)\n\t  , toObject       = __webpack_require__(52)\n\t  , call           = __webpack_require__(160)\n\t  , isArrayIter    = __webpack_require__(161)\n\t  , toLength       = __webpack_require__(42)\n\t  , createProperty = __webpack_require__(162)\n\t  , getIterFn      = __webpack_require__(163);\n\t\n\t$export($export.S + $export.F * !__webpack_require__(165)(function(iter){ Array.from(iter); }), 'Array', {\n\t  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n\t  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n\t    var O       = toObject(arrayLike)\n\t      , C       = typeof this == 'function' ? this : Array\n\t      , aLen    = arguments.length\n\t      , mapfn   = aLen > 1 ? arguments[1] : undefined\n\t      , mapping = mapfn !== undefined\n\t      , index   = 0\n\t      , iterFn  = getIterFn(O)\n\t      , length, result, step, iterator;\n\t    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n\t    // if object isn't iterable or it's array with default iterator - use simple case\n\t    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n\t      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n\t        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n\t      }\n\t    } else {\n\t      length = toLength(O.length);\n\t      for(result = new C(length); length > index; index++){\n\t        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n\t      }\n\t    }\n\t    result.length = index;\n\t    return result;\n\t  }\n\t});\n\n\n/***/ },\n/* 160 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// call something on iterator step with safe closing on error\n\tvar anObject = __webpack_require__(22);\n\tmodule.exports = function(iterator, fn, value, entries){\n\t  try {\n\t    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n\t  // 7.4.6 IteratorClose(iterator, completion)\n\t  } catch(e){\n\t    var ret = iterator['return'];\n\t    if(ret !== undefined)anObject(ret.call(iterator));\n\t    throw e;\n\t  }\n\t};\n\n/***/ },\n/* 161 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// check on default Array iterator\n\tvar Iterators  = __webpack_require__(32)\n\t  , ITERATOR   = __webpack_require__(50)('iterator')\n\t  , ArrayProto = Array.prototype;\n\t\n\tmodule.exports = function(it){\n\t  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n\t};\n\n/***/ },\n/* 162 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $defineProperty = __webpack_require__(21)\n\t  , createDesc      = __webpack_require__(29);\n\t\n\tmodule.exports = function(object, index, value){\n\t  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\n\t  else object[index] = value;\n\t};\n\n/***/ },\n/* 163 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar classof   = __webpack_require__(164)\n\t  , ITERATOR  = __webpack_require__(50)('iterator')\n\t  , Iterators = __webpack_require__(32);\n\tmodule.exports = __webpack_require__(17).getIteratorMethod = function(it){\n\t  if(it != undefined)return it[ITERATOR]\n\t    || it['@@iterator']\n\t    || Iterators[classof(it)];\n\t};\n\n/***/ },\n/* 164 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// getting tag from 19.1.3.6 Object.prototype.toString()\n\tvar cof = __webpack_require__(40)\n\t  , TAG = __webpack_require__(50)('toStringTag')\n\t  // ES3 wrong here\n\t  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\t\n\t// fallback for IE11 Script Access Denied error\n\tvar tryGet = function(it, key){\n\t  try {\n\t    return it[key];\n\t  } catch(e){ /* empty */ }\n\t};\n\t\n\tmodule.exports = function(it){\n\t  var O, T, B;\n\t  return it === undefined ? 'Undefined' : it === null ? 'Null'\n\t    // @@toStringTag case\n\t    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n\t    // builtinTag case\n\t    : ARG ? cof(O)\n\t    // ES3 arguments fallback\n\t    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n\t};\n\n/***/ },\n/* 165 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ITERATOR     = __webpack_require__(50)('iterator')\n\t  , SAFE_CLOSING = false;\n\t\n\ttry {\n\t  var riter = [7][ITERATOR]();\n\t  riter['return'] = function(){ SAFE_CLOSING = true; };\n\t  Array.from(riter, function(){ throw 2; });\n\t} catch(e){ /* empty */ }\n\t\n\tmodule.exports = function(exec, skipClosing){\n\t  if(!skipClosing && !SAFE_CLOSING)return false;\n\t  var safe = false;\n\t  try {\n\t    var arr  = [7]\n\t      , iter = arr[ITERATOR]();\n\t    iter.next = function(){ return {done: safe = true}; };\n\t    arr[ITERATOR] = function(){ return iter; };\n\t    exec(arr);\n\t  } catch(e){ /* empty */ }\n\t  return safe;\n\t};\n\n/***/ },\n/* 166 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(167);\n\tmodule.exports.__wrapsOrigami = true;\n\n/***/ },\n/* 167 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(168);\n\n/***/ },\n/* 168 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/*global module*/\n\t\n\tvar months = '[\"' + 'January,February,March,April,May,June,July,August,September,October,November,December'.split(',').join('\",\"') + '\"]';\n\tvar days = '[\"' + 'Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(',').join('\",\"') + '\"]';\n\tvar formats = {\n\t\tdatetime: 'MMMM d, yyyy h:mm a',\n\t\tdate: 'MMMM d, yyyy'\n\t};\n\t\n\tvar compiledTemplates = {};\n\t\n\t/**\n\t * See http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html for formatting conventions used\n\t *\n\t *Comments indicate the value returned for 3.05 pm on Tuesday 4th February 2014\n\t*/\n\tvar formatReplacementsMap = {\n\t\tMMMM: 'months[date.getMonth()]', // e.g. February\n\t\tMMM: 'months[date.getMonth()].substr(0,3)', // Feb\n\t\tMM: 'pad2(date.getMonth() + 1, 2)', // 02\n\t\tM: '(date.getMonth() + 1)', // 2\n\t\tyyyy: 'date.getFullYear()', // 2014\n\t\tyy: '(\"\"+date.getFullYear()).substr(-2, 2)', // 14\n\t\tEEEE: 'days[date.getDay()]', // Tuesday\n\t\tEEE: 'days[date.getDay()].substr(0,3)', // Tue\n\t\td: 'date.getDate()', // 4\n\t\tdd: 'pad2(date.getDate())', // 04\n\t\tm: 'date.getMinutes()', // 5\n\t\tmm: 'pad2(date.getMinutes())', // 05\n\t\th: '(((date.getHours() + 11) % 12) + 1)', // 3\n\t\thh: 'pad2(((date.getHours() + 11) % 12) + 1)', // 03\n\t\tH: 'date.getHours()', // 15\n\t\tHH: 'pad2(date.getHours())', // 15\n\t\ta: '(date.getHours() >= 12 ? \"pm\" : \"am\")' // pm\n\t};\n\t\n\tvar inSeconds = {\n\t\tminute: 60,\n\t\thour: 60 * 60,\n\t\tday: 24 * 60 * 60,\n\t\tweek: 7 * 24 * 60 * 60,\n\t\tmonth: 60 * 60 * 24 * 30,\n\t\tyear: 365 * 24 * 60 * 60\n\t};\n\t\n\tvar interval = void 0;\n\t\n\tfunction ODate(rootEl) {\n\t\tvar _this = this;\n\t\n\t\tif (!rootEl) {\n\t\t\trootEl = document.body;\n\t\t} else if (!(rootEl instanceof HTMLElement)) {\n\t\t\trootEl = document.querySelector(rootEl);\n\t\t}\n\t\n\t\tif (rootEl.getAttribute('data-o-component') === \"o-date\") {\n\t\t\tthis.el = rootEl;\n\t\t} else {\n\t\t\tthis.el = rootEl.querySelector('[data-o-component~=\"o-date\"]');\n\t\t}\n\t\n\t\tif (this.el !== undefined) {\n\t\t\tdocument.body.addEventListener('oDate.update', function () {\n\t\t\t\t_this.update();\n\t\t\t});\n\t\n\t\t\tthis.update();\n\t\t}\n\t\n\t\tif (!interval) {\n\t\t\tinterval = setInterval(function () {\n\t\t\t\tdocument.body.dispatchEvent(new CustomEvent('oDate.update'));\n\t\t\t}, 60000);\n\t\t}\n\t}\n\t\n\tODate.prototype.update = function () {\n\t\tvar el = this.el;\n\t\n\t\tvar date = el.getAttribute('datetime');\n\t\tvar format = el.getAttribute('data-o-date-format');\n\t\n\t\tvar printer = el.querySelector('.o-date__printer') || el;\n\t\tvar hasTextNode = printer.firstChild && printer.firstChild.nodeType === 3;\n\t\n\t\tif (date) {\n\t\t\tdate = ODate.toDate(date);\n\t\t} else if (hasTextNode) {\n\t\t\t// Only define new date if printer is empty\n\t\t\tdate = new Date();\n\t\t}\n\t\n\t\tif (!date) return;\n\t\n\t\tvar dateString = void 0;\n\t\n\t\tif (format === 'today-or-yesterday-or-nothing') {\n\t\t\tdateString = ODate.asTodayOrYesterdayOrNothing(date);\n\t\t} else if (format === 'date-only') {\n\t\t\tdateString = ODate.format(date, 'date');\n\t\t} else if (format === 'time-ago-limit-4-hours') {\n\t\t\tdateString = ODate.timeAgo(date, { limit: 4 * inSeconds.hour });\n\t\t} else {\n\t\t\tdateString = ODate.ftTime(date);\n\t\t}\n\t\n\t\t// To avoid triggering a parent live region unnecessarily\n\t\t// <https://github.com/Financial-Times/o-date/pull/43>\n\t\tif (hasTextNode) {\n\t\t\tprinter.firstChild.nodeValue = dateString;\n\t\t} else {\n\t\t\tprinter.innerHTML = dateString;\n\t\t}\n\t\n\t\tel.title = ODate.format(date, 'datetime');\n\t\tel.setAttribute('data-o-date-js', '');\n\t\tel.setAttribute('aria-label', dateString);\n\t};\n\t\n\tfunction compile(format) {\n\t\tvar tpl = formats[format] || format;\n\t\n\t\tvar funcString = 'var months= ' + months + ', days= ' + days + ';';\n\t\tfuncString += 'function pad2 (number) {return (\"0\" + number).slice(-2)}';\n\t\tfuncString += 'return \"' + tpl.replace(/\\\\?[a-z]+/ig, function (match) {\n\t\t\tif (match.charAt(0) === '\\\\') {\n\t\t\t\treturn match.substr(1);\n\t\t\t}\n\t\t\tvar replacer = formatReplacementsMap[match];\n\t\n\t\t\treturn replacer ? '\" + ' + replacer + ' + \"' : match;\n\t\t}) + '\"';\n\t\n\t\treturn compiledTemplates[format] = new Function('date', funcString); // jshint ignore:line\n\t}\n\t\n\tODate.toDate = function (date) {\n\t\tdate = date instanceof Date ? date : new Date(date);\n\t\tif (date.toString() !== 'Invalid Date') {\n\t\t\treturn date;\n\t\t}\n\t};\n\t\n\tODate.format = function (date, dateFormat) {\n\t\tdateFormat = dateFormat || 'datetime';\n\t\tvar tpl = compiledTemplates[dateFormat] || compile(dateFormat);\n\t\tdate = ODate.toDate(date);\n\t\treturn date && tpl(date);\n\t};\n\t\n\tODate.getSecondsBetween = function (time, otherTime) {\n\t\treturn Math.round((time - otherTime) / 1000);\n\t};\n\t\n\tODate.ftTime = function (dateObj) {\n\t\tvar now = new Date();\n\t\tvar interval = ODate.getSecondsBetween(now, dateObj);\n\t\tvar dateString = void 0;\n\t\n\t\t// If the date will occur in the next 5 minutes. This check is to allow for\n\t\t// reasonably differences in machine clocks.\n\t\tif (ODate.isNearFuture(interval)) {\n\t\t\tdateString = 'just now';\n\t\n\t\t\t// If it's beyond 5 minutes, fall back to printing the whole date, the machine\n\t\t\t// clock could be way out.\n\t\t} else if (ODate.isFarFuture(interval)) {\n\t\t\tdateString = ODate.format(dateObj, 'date');\n\t\n\t\t\t// Relative times for today or within the last 4 hours\n\t\t} else if (ODate.isToday(dateObj, now, interval) || interval < 4 * inSeconds.hour) {\n\t\t\tdateString = ODate.timeAgo(dateObj, interval);\n\t\n\t\t\t// 'Yesterday' for dates that occurred yesterday\n\t\t} else if (ODate.isYesterday(dateObj, now, interval)) {\n\t\t\tdateString = 'yesterday';\n\t\n\t\t\t// Else print the date\n\t\t} else {\n\t\t\tdateString = ODate.format(dateObj, 'date');\n\t\t}\n\t\n\t\treturn dateString;\n\t};\n\t\n\tODate.isNearFuture = function (interval) {\n\t\t// If the interval within the next 5 minutes\n\t\treturn interval < 0 && interval > -(5 * inSeconds.minute);\n\t};\n\t\n\tODate.isFarFuture = function (interval) {\n\t\t// If the interval is further in the future than 5 minutes\n\t\treturn interval < -(5 * inSeconds.minute);\n\t};\n\t\n\tODate.isToday = function (date, now, interval) {\n\t\tvar within24Hours = interval < inSeconds.day;\n\t\tvar sameDayOfWeek = now.getDay() === date.getDay();\n\t\treturn within24Hours && sameDayOfWeek;\n\t};\n\t\n\tODate.isYesterday = function (date, now, interval) {\n\t\tvar within48Hours = interval < 2 * inSeconds.day;\n\t\tvar consecutiveDaysOfTheWeek = now.getDay() === date.getDay() + 1;\n\t\treturn within48Hours && consecutiveDaysOfTheWeek;\n\t};\n\t\n\tODate.timeAgo = function (date, interval, options) {\n\t\n\t\tdate = ODate.toDate(date);\n\t\tif (!date) return;\n\t\n\t\t// Accept an interval argument for backwards compatibility\n\t\tif (arguments.length === 2 && (typeof interval === 'undefined' ? 'undefined' : (0, _typeof3.default)(interval)) === 'object') {\n\t\t\toptions = interval;\n\t\t\tinterval = options.interval;\n\t\t}\n\t\n\t\t// Default the interval option to the time since the given date\n\t\tif (!interval) {\n\t\t\tinterval = ODate.getSecondsBetween(new Date(), date);\n\t\t}\n\t\n\t\t// If a limit has been supplied and the interval is longer ago than that limit\n\t\tif (options && options.limit > 0 && (!interval || interval > options.limit)) {\n\t\t\treturn '';\n\t\t}\n\t\n\t\tif (interval < inSeconds.minute) {\n\t\t\treturn interval + ' seconds ago';\n\t\t} else if (interval < 1.5 * inSeconds.minute) {\n\t\t\treturn 'a minute ago';\n\t\t} else if (interval < 59 * inSeconds.minute) {\n\t\t\treturn Math.round(interval / inSeconds.minute) + ' minutes ago';\n\t\t} else if (interval < 1.5 * inSeconds.hour) {\n\t\t\treturn 'an hour ago';\n\t\t} else if (interval < 22 * inSeconds.hour) {\n\t\t\treturn Math.round(interval / inSeconds.hour) + ' hours ago';\n\t\t} else if (interval < 1.5 * inSeconds.day) {\n\t\t\treturn 'a day ago';\n\t\t} else if (interval < 25 * inSeconds.day) {\n\t\t\treturn Math.round(interval / inSeconds.day) + ' days ago';\n\t\t} else if (interval < 45 * inSeconds.day) {\n\t\t\treturn 'a month ago';\n\t\t} else if (interval < 345 * inSeconds.day) {\n\t\t\treturn Math.round(interval / inSeconds.month) + ' months ago';\n\t\t} else if (interval < 547 * inSeconds.day) {\n\t\t\treturn 'a year ago';\n\t\t} else {\n\t\t\treturn Math.max(2, Math.floor(interval / inSeconds.year)) + ' years ago';\n\t\t}\n\t};\n\t\n\tODate.asTodayOrYesterdayOrNothing = function (date) {\n\t\n\t\tif (!date) return;\n\t\n\t\tvar now = new Date();\n\t\tvar interval = ODate.getSecondsBetween(now, date);\n\t\n\t\tvar dateString = void 0;\n\t\n\t\t// If this was less than a day ago\n\t\tif (ODate.isToday(date, now, interval)) {\n\t\t\tdateString = 'today';\n\t\t} else if (ODate.isYesterday(date, now, interval)) {\n\t\t\tdateString = 'yesterday';\n\t\t} else {\n\t\t\tdateString = '';\n\t\t}\n\t\n\t\treturn dateString;\n\t};\n\t\n\tODate.init = function (el) {\n\t\tif (!el) {\n\t\t\tel = document.body;\n\t\t}\n\t\tif (!(el instanceof HTMLElement)) {\n\t\t\tel = document.querySelector(el);\n\t\t}\n\t\t/* If el's data-o-component has \\bo-date\\b in it, ie it is itself a date,\n\t  return a new o-date */\n\t\tif (/\\bo-date\\b/.test(el.getAttribute('data-o-component'))) {\n\t\t\treturn new ODate(el);\n\t\t}\n\t\n\t\t// If el contains date components, return o-dates\n\t\tvar dateEls = el.querySelectorAll('[data-o-component~=\"o-date\"]');\n\t\treturn [].map.call(dateEls, function (el) {\n\t\t\treturn new ODate(el);\n\t\t});\n\t};\n\t\n\tvar constructAll = function constructAll() {\n\t\tODate.init();\n\t\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n\t};\n\t\n\tif (typeof window !== 'undefined') {\n\t\tdocument.addEventListener('o.DOMContentLoaded', constructAll);\n\t}\n\t\n\tmodule.exports = ODate;\n\n/***/ },\n/* 169 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar OHeader = __webpack_require__(170);\n\tvar Typeahead = __webpack_require__(182);\n\tvar promoHandler = __webpack_require__(186);\n\t\n\tfunction init(flags) {\n\t\tpromoHandler.init(flags);\n\t\n\t\tnew OHeader();\n\t\n\t\t// initialise separate sticky header\n\t\tnew OHeader(document.querySelector('[data-o-header--sticky]'));\n\t\n\t\tvar typeaheadElements = document.querySelectorAll('[data-typeahead]');\n\t\tif (flags.get('typeahead') && typeaheadElements.length) {\n\t\t\tfor (var i = 0; i < typeaheadElements.length; i++) {\n\t\t\t\tvar element = typeaheadElements[i];\n\t\t\t\tnew Typeahead(element, '//' + window.location.host + '/search-suggestions?q=');\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmodule.exports = { init: init };\n\n/***/ },\n/* 170 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(171);\n\n/***/ },\n/* 171 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _header = __webpack_require__(172);\n\t\n\tvar _header2 = _interopRequireDefault(_header);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar constructAll = function constructAll() {\n\t\t_header2.default.init();\n\t\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n\t};\n\t\n\tdocument.addEventListener('o.DOMContentLoaded', constructAll);\n\t\n\texports.default = _header2.default;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 172 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _search = __webpack_require__(173);\n\t\n\tvar _search2 = _interopRequireDefault(_search);\n\t\n\tvar _mega = __webpack_require__(176);\n\t\n\tvar _mega2 = _interopRequireDefault(_mega);\n\t\n\tvar _drawer = __webpack_require__(177);\n\t\n\tvar _drawer2 = _interopRequireDefault(_drawer);\n\t\n\tvar _subnav = __webpack_require__(178);\n\t\n\tvar _subnav2 = _interopRequireDefault(_subnav);\n\t\n\tvar _sticky = __webpack_require__(181);\n\t\n\tvar _sticky2 = _interopRequireDefault(_sticky);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Header = function () {\n\t\tfunction Header(headerEl) {\n\t\t\t(0, _classCallCheck3.default)(this, Header);\n\t\n\t\t\tif (!headerEl) {\n\t\t\t\theaderEl = document.querySelector('[data-o-component=\"o-header\"]');\n\t\t\t} else if (typeof headerEl === 'string') {\n\t\t\t\theaderEl = document.querySelector(headerEl);\n\t\t\t}\n\t\n\t\t\tif (headerEl.hasAttribute('data-o-header--js')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tthis.headerEl = headerEl;\n\t\n\t\t\t_search2.default.init(this.headerEl);\n\t\t\t_mega2.default.init(this.headerEl);\n\t\t\t_drawer2.default.init(this.headerEl);\n\t\t\t_subnav2.default.init(this.headerEl);\n\t\t\t_sticky2.default.init(this.headerEl);\n\t\n\t\t\tthis.headerEl.removeAttribute('data-o-header--no-js');\n\t\t\tthis.headerEl.setAttribute('data-o-header--js', '');\n\t\t}\n\t\n\t\tHeader.init = function init(rootEl) {\n\t\t\tif (!rootEl) {\n\t\t\t\trootEl = document.body;\n\t\t\t}\n\t\t\tif (!(rootEl instanceof HTMLElement)) {\n\t\t\t\trootEl = document.querySelector(rootEl);\n\t\t\t}\n\t\t\tif (/\\bo-header\\b/.test(rootEl.getAttribute('data-o-component'))) {\n\t\t\t\treturn new Header(rootEl);\n\t\t\t}\n\t\n\t\t\treturn [].map.call(rootEl.querySelectorAll('[data-o-component=\"o-header\"]'), function (el) {\n\t\t\t\tif (!el.hasAttribute('data-o-header--js')) {\n\t\t\t\t\treturn new Header(el);\n\t\t\t\t}\n\t\t\t}).filter(function (header) {\n\t\t\t\treturn header !== undefined;\n\t\t\t});\n\t\t};\n\t\n\t\treturn Header;\n\t}();\n\t\n\texports.default = Header;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 173 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _oToggle = __webpack_require__(174);\n\t\n\tvar _oToggle2 = _interopRequireDefault(_oToggle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction init(headerEl) {\n\t\tvar target = headerEl.querySelector('[data-o-header-search]');\n\t\tvar controls = target && headerEl.querySelectorAll('[aria-controls=\"' + target.id + '\"]');\n\t\n\t\tif (controls === null || controls.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar opening = [];\n\t\n\t\tvar callback = function callback(state, e) {\n\t\t\tif (state === 'open') {\n\t\t\t\t// record the opening control\n\t\t\t\topening.push(e.currentTarget);\n\t\t\t\ttarget.querySelector('[name=\"q\"]').focus();\n\t\t\t} else {\n\t\t\t\t// re-focus opening control\n\t\t\t\topening.length && opening.pop().focus();\n\t\t\t}\n\t\t};\n\t\n\t\tfor (var i = 0, len = controls.length; i < len; i++) {\n\t\t\tnew _oToggle2.default(controls[i], { target: target, callback: callback });\n\t\t}\n\t}\n\t\n\texports.default = { init: init };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 174 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(175);\n\n/***/ },\n/* 175 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Toggle = function () {\n\t\tfunction Toggle(toggleEl, config) {\n\t\t\t(0, _classCallCheck3.default)(this, Toggle);\n\t\n\t\t\tif (!toggleEl) {\n\t\t\t\treturn;\n\t\t\t} else if (!(toggleEl instanceof HTMLElement)) {\n\t\t\t\ttoggleEl = document.querySelector(toggleEl);\n\t\t\t}\n\t\n\t\t\tif (toggleEl.hasAttribute('data-o-toggle--js')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tif (!config) {\n\t\t\t\tconfig = {};\n\t\t\t\t// Try to get config set declaratively on the element\n\t\t\t\tArray.prototype.forEach.call(toggleEl.attributes, function (attr) {\n\t\t\t\t\tif (attr.name.indexOf('data-o-toggle') === 0) {\n\t\t\t\t\t\t// Remove the prefix part of the data attribute name\n\t\t\t\t\t\tvar key = attr.name.replace('data-o-toggle-', '');\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// If it's a JSON, a boolean or a number, we want it stored like that, and not as a string\n\t\t\t\t\t\t\t// We also replace all ' with \" so JSON strings are parsed correctly\n\t\t\t\t\t\t\tconfig[key] = JSON.parse(attr.value.replace(/\\'/g, '\"'));\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconfig[key] = attr.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tthis.callback = config.callback;\n\t\t\tif (typeof this.callback === 'string') {\n\t\t\t\tthis.callback = new Function(this.callback);\n\t\t\t}\n\t\n\t\t\tthis.targetEl = config.target;\n\t\t\tif (!(this.targetEl instanceof HTMLElement)) {\n\t\t\t\tthis.targetEl = document.querySelector(this.targetEl);\n\t\t\t}\n\t\n\t\t\tthis.toggleEl = toggleEl;\n\t\n\t\t\tif (typeof Toggle._toggles.get(this.targetEl) === 'undefined') {\n\t\t\t\tToggle._toggles.set(this.targetEl, [this]);\n\t\t\t} else {\n\t\t\t\tToggle._toggles.get(this.targetEl).push(this);\n\t\t\t}\n\t\n\t\t\tif (this.toggleEl.nodeName === 'A') {\n\t\t\t\tthis.toggleEl.setAttribute('role', 'button');\n\t\t\t}\n\t\n\t\t\tthis.toggleEl.setAttribute('aria-expanded', 'false');\n\t\t\tthis.toggle = this.toggle.bind(this);\n\t\t\tthis.toggleEl.addEventListener('click', this.toggle);\n\t\n\t\t\tthis.targetEl.setAttribute('aria-hidden', 'true');\n\t\t\tthis.toggleEl.setAttribute('data-o-toggle--js', 'true');\n\t\t}\n\t\n\t\tToggle.prototype.toggle = function toggle(e) {\n\t\t\t// Toggle returns true if class is not present and needs to be added\n\t\t\tvar state = this.targetEl.classList.toggle('o-toggle--active');\n\t\n\t\t\tToggle._toggles.get(this.targetEl).forEach(function (toggle) {\n\t\t\t\ttoggle.toggleEl.setAttribute('aria-expanded', state);\n\t\t\t});\n\t\n\t\t\tthis.targetEl.setAttribute('aria-hidden', !state);\n\t\n\t\t\te && e.preventDefault();\n\t\t\tthis.callback && this.callback(state ? 'open' : 'close', e);\n\t\t};\n\t\n\t\tToggle.prototype.destroy = function destroy() {\n\t\t\tthis.toggleEl.removeEventListener('click', this.toggle);\n\t\t\tthis.toggleEl.removeAttribute('aria-expanded');\n\t\t\tthis.toggleEl.removeAttribute('role');\n\t\t\tthis.toggleEl.removeAttribute('data-o-toggle--js');\n\t\t\tthis.targetEl.removeAttribute('aria-hidden');\n\t\n\t\t\tvar targetArray = Toggle._toggles.get(this.targetEl);\n\t\t\tvar togglePosition = targetArray.indexOf(this);\n\t\t\t// Generates a new array removing the current toggle from the list\n\t\t\tToggle._toggles.set(this.targetEl, targetArray.slice(0, togglePosition).join(targetArray.slice(togglePosition + 1)));\n\t\n\t\t\tthis.targetEl = undefined;\n\t\t\tthis.toggleEl = undefined;\n\t\t\tthis.callback = undefined;\n\t\t};\n\t\n\t\tToggle.init = function init(el, config) {\n\t\t\tif (!el) {\n\t\t\t\tel = document.body;\n\t\t\t} else if (!(el instanceof HTMLElement)) {\n\t\t\t\tel = document.querySelector(el);\n\t\t\t}\n\t\t\tvar toggleEls = el.querySelectorAll('[data-o-component=\"o-toggle\"]');\n\t\t\tvar toggles = [];\n\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\tvar _didIteratorError = false;\n\t\t\tvar _iteratorError = undefined;\n\t\n\t\t\ttry {\n\t\t\t\tfor (var _iterator = toggleEls[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\tvar toggleEl = _step.value;\n\t\n\t\t\t\t\tif (!toggleEl.hasAttribute('data-o-toggle--js')) {\n\t\t\t\t\t\ttoggles.push(new Toggle(toggleEl, config));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError = true;\n\t\t\t\t_iteratorError = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn toggles;\n\t\t};\n\t\n\t\treturn Toggle;\n\t}();\n\t\n\t;\n\t\n\tToggle._toggles = new Map();\n\t\n\tvar constructAll = function constructAll() {\n\t\tToggle.init();\n\t\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n\t};\n\t\n\tdocument.addEventListener('o.DOMContentLoaded', constructAll);\n\t\n\texports.default = Toggle;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 176 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\tvar INTENT_ENTER = 300;\n\tvar INTENT_LEAVE = 400;\n\t\n\tvar expanded = [];\n\t\n\tfunction addEvents(parent, menu) {\n\t\tvar timeout = void 0;\n\t\n\t\tparent.addEventListener('mouseenter', function () {\n\t\t\tclearTimeout(timeout);\n\t\n\t\t\tif (isOpen(menu)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\ttimeout = setTimeout(function () {\n\t\t\t\tif (expanded.length) {\n\t\t\t\t\thide(expanded[0]);\n\t\t\t\t\tshow(menu, false);\n\t\t\t\t} else {\n\t\t\t\t\tshow(menu, true);\n\t\t\t\t}\n\t\t\t}, INTENT_ENTER);\n\t\t});\n\t\n\t\tparent.addEventListener('mouseleave', function () {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(function () {\n\t\t\t\treturn isOpen(menu) && hide(menu);\n\t\t\t}, INTENT_LEAVE);\n\t\t});\n\t}\n\t\n\tfunction isOpen(menu) {\n\t\treturn expanded.indexOf(menu) !== -1;\n\t}\n\t\n\tfunction show(menu, animate) {\n\t\tif (animate) {\n\t\t\tmenu.classList.add('o-header__mega--animation');\n\t\t}\n\t\n\t\tmenu.setAttribute('aria-hidden', 'false');\n\t\tmenu.setAttribute('aria-expanded', 'true');\n\t\n\t\tmenu.dispatchEvent(new CustomEvent('oHeader.MegaMenuShow', { bubbles: true }));\n\t\n\t\texpanded.push(menu);\n\t}\n\t\n\tfunction hide(menu) {\n\t\tmenu.classList.remove('o-header__mega--animation');\n\t\tmenu.setAttribute('aria-hidden', 'true');\n\t\tmenu.setAttribute('aria-expanded', 'false');\n\t\n\t\tmenu.dispatchEvent(new CustomEvent('oHeader.MegaMenuHide', { bubbles: true }));\n\t\n\t\texpanded.splice(expanded.indexOf(menu), 1);\n\t}\n\t\n\tfunction init(headerEl) {\n\t\tvar menus = Array.from(headerEl.querySelectorAll('[data-o-header-mega]'));\n\t\tvar parents = menus.map(function (menu) {\n\t\t\treturn menu.parentNode;\n\t\t});\n\t\n\t\tmenus.forEach(function (menu) {\n\t\t\tmenu.setAttribute('aria-hidden', 'true');\n\t\t\tmenu.setAttribute('aria-expanded', 'false');\n\t\t});\n\t\n\t\tparents.forEach(function (parent, i) {\n\t\t\treturn addEvents(parent, menus[i]);\n\t\t});\n\t}\n\t\n\texports.default = { init: init, show: show, hide: hide };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 177 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _toConsumableArray2 = __webpack_require__(156);\n\t\n\tvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\t\n\tvar _oToggle = __webpack_require__(174);\n\t\n\tvar _oToggle2 = _interopRequireDefault(_oToggle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar LISTEN_DELAY = 300;\n\tvar INTENT_DELAY = 1000;\n\t\n\tfunction handleCloseEvents(scope, callback) {\n\t\tvar timeout = void 0;\n\t\n\t\tvar handleKeydown = function handleKeydown(e) {\n\t\t\tif (e.keyCode === 27) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\t\n\t\tvar handleClick = function handleClick(e) {\n\t\t\tif (!scope.contains(e.target)) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\t\n\t\tvar handleMouseenter = function handleMouseenter() {\n\t\t\tclearTimeout(timeout);\n\t\t};\n\t\n\t\tvar handleMouseleave = function handleMouseleave() {\n\t\t\ttimeout = setTimeout(callback, INTENT_DELAY);\n\t\t};\n\t\n\t\tvar removeEvents = function removeEvents() {\n\t\t\tclearTimeout(timeout);\n\t\n\t\t\tscope.removeEventListener('mouseenter', handleMouseenter);\n\t\t\tscope.removeEventListener('mouseleave', handleMouseleave);\n\t\t\tdocument.removeEventListener('click', handleClick);\n\t\t\tdocument.removeEventListener('touchstart', handleClick);\n\t\t\tdocument.removeEventListener('keydown', handleKeydown);\n\t\t};\n\t\n\t\tvar addEvents = function addEvents() {\n\t\t\tscope.addEventListener('mouseenter', handleMouseenter);\n\t\t\tscope.addEventListener('mouseleave', handleMouseleave);\n\t\t\tdocument.addEventListener('click', handleClick);\n\t\t\tdocument.addEventListener('touchstart', handleClick);\n\t\t\tdocument.addEventListener('keydown', handleKeydown);\n\t\t};\n\t\n\t\treturn { addEvents: addEvents, removeEvents: removeEvents };\n\t}\n\t\n\tfunction addDrawerToggles(drawerEl) {\n\t\tvar controls = [].concat((0, _toConsumableArray3.default)(document.body.querySelectorAll('[aria-controls=\"' + drawerEl.id + '\"]')));\n\t\n\t\tvar handleClose = void 0;\n\t\tfunction toggleCallback(state) {\n\t\t\tif (state === 'close') {\n\t\t\t\thandleClose.removeEvents();\n\t\t\t} else {\n\t\t\t\t// don't capture the initial click or accidental double taps etc.\n\t\t\t\t// we could use transitionend but scoping is tricky and it needs prefixing and...\n\t\t\t\tsetTimeout(handleClose.addEvents, LISTEN_DELAY);\n\t\t\t}\n\t\n\t\t\tdrawerEl.classList.toggle('o-header__drawer--closing', state === 'close');\n\t\t\tdrawerEl.classList.toggle('o-header__drawer--opening', state === 'open');\n\t\t}\n\t\n\t\tcontrols.forEach(function (control) {\n\t\t\tvar drawerToggle = new _oToggle2.default(control, {\n\t\t\t\ttarget: drawerEl,\n\t\t\t\tcallback: toggleCallback\n\t\t\t});\n\t\n\t\t\t// Both toggles have the same target, so the toggle function will be the same\n\t\t\t// If there's a separate handleClose instance for each toggle, removeEvents doesn't work\n\t\t\t// when the close toggle is clicked\n\t\t\tif (!handleClose) {\n\t\t\t\thandleClose = handleCloseEvents(drawerEl, drawerToggle.toggle);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tfunction addSubmenuToggles(drawerEl) {\n\t\tvar submenus = drawerEl.querySelectorAll('[id^=\"o-header-drawer-child-\"]');\n\t\n\t\tArray.from(submenus).forEach(function (submenu) {\n\t\t\tvar button = drawerEl.querySelector('[aria-controls=\"' + submenu.id + '\"]');\n\t\n\t\t\tsubmenu.setAttribute('aria-hidden', 'true');\n\t\n\t\t\tnew _oToggle2.default(button, {\n\t\t\t\ttarget: submenu,\n\t\t\t\tcallback: function callback(state) {\n\t\t\t\t\tbutton.textContent = button.textContent.replace(/fewer|more/, state === 'open' ? 'fewer' : 'more');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t\n\tfunction appendUserDetail(target) {\n\t\treturn fetch('https://session-next.ft.com/', {\n\t\t\tcredentials: 'include'\n\t\t}).then(function (response) {\n\t\t\tif (response.ok) {\n\t\t\t\treturn response.json();\n\t\t\t} else {\n\t\t\t\treturn response.text().then(function (err) {\n\t\t\t\t\tthrow new Error(err);\n\t\t\t\t});\n\t\t\t}\n\t\t}).then(function (data) {\n\t\t\ttarget.innerText = data.emailAddress;\n\t\t});\n\t}\n\t\n\tfunction init() {\n\t\tvar drawerEl = document.body.querySelector('[data-o-header-drawer]');\n\t\tif (!drawerEl) {\n\t\t\treturn;\n\t\t}\n\t\taddSubmenuToggles(drawerEl);\n\t\taddDrawerToggles(drawerEl);\n\t\n\t\tvar emailEl = drawerEl.querySelector('[data-o-header-drawer-user-email]');\n\t\n\t\t// if the browser doesn't support CORS then bail\n\t\tif (emailEl && 'withCredentials' in new XMLHttpRequest()) {\n\t\t\tappendUserDetail(emailEl);\n\t\t}\n\t\n\t\tdrawerEl.removeAttribute('data-o-header-drawer--no-js');\n\t\tdrawerEl.setAttribute('data-o-header-drawer--js', 'true');\n\t}\n\t\n\texports.default = { init: init };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 178 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _oUtils = __webpack_require__(179);\n\t\n\tvar oUtils = _interopRequireWildcard(_oUtils);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction init(headerEl) {\n\t\tvar subnav = headerEl.querySelector('[data-o-header-subnav]');\n\t\n\t\tif (subnav === null) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar wrapper = subnav.querySelector('[data-o-header-subnav-wrapper]');\n\t\tvar buttons = Array.from(subnav.getElementsByTagName('button'));\n\t\n\t\tvar scrollWidth = void 0;\n\t\tvar clientWidth = void 0;\n\t\n\t\tfunction direction(button) {\n\t\t\treturn button.className.match(/left|right/).pop();\n\t\t}\n\t\n\t\tfunction scrollable() {\n\t\t\tscrollWidth = wrapper.scrollWidth;\n\t\t\tclientWidth = wrapper.clientWidth;\n\t\n\t\t\tbuttons.forEach(function (button) {\n\t\t\t\tif (direction(button) === 'left') {\n\t\t\t\t\tbutton.disabled = wrapper.scrollLeft === 0;\n\t\t\t\t} else {\n\t\t\t\t\tvar remaining = scrollWidth - clientWidth - wrapper.scrollLeft;\n\t\t\t\t\t// Allow a little difference as scrollWidth is fast, not accurate.\n\t\t\t\t\tbutton.disabled = remaining <= 1;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\n\t\tfunction scroll(e) {\n\t\t\tvar distance = 100;\n\t\n\t\t\tif (direction(e.currentTarget) === 'left') {\n\t\t\t\tdistance = (wrapper.scrollLeft > distance ? distance : wrapper.scrollLeft) * -1;\n\t\t\t} else {\n\t\t\t\tvar remaining = scrollWidth - clientWidth - wrapper.scrollLeft;\n\t\t\t\tdistance = remaining > distance ? distance : remaining;\n\t\t\t}\n\t\n\t\t\twrapper.scrollLeft = wrapper.scrollLeft + distance;\n\t\n\t\t\tscrollable();\n\t\t}\n\t\n\t\twrapper.addEventListener('scroll', oUtils.throttle(scrollable, 100));\n\t\twindow.addEventListener('oViewport.resize', scrollable);\n\t\n\t\tbuttons.forEach(function (button) {\n\t\t\tbutton.onclick = scroll;\n\t\t});\n\t\n\t\tscrollable();\n\t}\n\t\n\tmodule.exports = { init: init };\n\n/***/ },\n/* 179 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(180);\n\n/***/ },\n/* 180 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t/**\n\t*\n\t* Debounces function so it is only called after n milliseconds\n\t* without it not being called\n\t*\n\t* @example\n\t* Utils.debounce(myFunction() {}, 100);\n\t*\n\t* @param {Function} func - Function to be debounced\n\t* @param {number} wait - Time in miliseconds\n\t*\n\t* @returns {Function} - Debounced function\n\t*/\n\tfunction debounce(func, wait) {\n\t\tvar timeout = void 0;\n\t\treturn function () {\n\t\t\tvar _this = this;\n\t\n\t\t\tvar args = arguments;\n\t\t\tvar later = function later() {\n\t\t\t\ttimeout = null;\n\t\t\t\tfunc.apply(_this, args);\n\t\t\t};\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t};\n\t};\n\t\n\t/**\n\t*\n\t* Throttle function so it is only called once every n milliseconds\n\t*\n\t* @example\n\t* Utils.throttle(myFunction() {}, 100);\n\t*\n\t* @param {Function} func - Function to be throttled\n\t* @param {number} wait - Time in miliseconds\n\t*\n\t* @returns {Function} - Throttled function\n\t*/\n\tfunction throttle(func, wait) {\n\t\tvar timeout = void 0;\n\t\treturn function () {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tif (timeout) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar args = arguments;\n\t\t\tvar later = function later() {\n\t\t\t\ttimeout = null;\n\t\t\t\tfunc.apply(_this2, args);\n\t\t\t};\n\t\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t};\n\t};\n\t\n\texports.debounce = debounce;\n\texports.throttle = throttle;\n\n/***/ },\n/* 181 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _oUtils = __webpack_require__(179);\n\t\n\tfunction init(headerEl) {\n\t\tif (!headerEl.hasAttribute('data-o-header--sticky')) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar viewportOffset = void 0;\n\t\tvar lastScrollDepth = void 0;\n\t\tvar lastAnimationFrame = void 0;\n\t\n\t\tfunction handleFrame() {\n\t\t\t// sticky el will appear when scrolled down from page top to\n\t\t\t// (arbitrarily) > half the viewport height\n\t\t\tvar scrollDepth = window.pageYOffset || window.scrollY;\n\t\t\tvar isActive = scrollDepth > viewportOffset;\n\t\n\t\t\theaderEl.classList.toggle('o-header--sticky-active', isActive);\n\t\n\t\t\t// allow a little wiggling room so we don't get too hasty toggling up/down state\n\t\t\tif (Math.abs(scrollDepth - lastScrollDepth) > 20) {\n\t\t\t\tvar isScrollingDown = lastScrollDepth < scrollDepth;\n\t\t\t\theaderEl.classList.toggle('o-header--sticky-scroll-down', isActive && isScrollingDown);\n\t\t\t\theaderEl.classList.toggle('o-header--sticky-scroll-up', isActive && !isScrollingDown);\n\t\t\t}\n\t\n\t\t\tlastScrollDepth = scrollDepth;\n\t\t}\n\t\n\t\tfunction startLoop() {\n\t\t\tviewportOffset = window.innerHeight / 2;\n\t\n\t\t\tlastAnimationFrame = window.requestAnimationFrame(function () {\n\t\t\t\thandleFrame();\n\t\t\t\tstartLoop();\n\t\t\t});\n\t\t}\n\t\n\t\tfunction stopLoop() {\n\t\t\tlastAnimationFrame && window.cancelAnimationFrame(lastAnimationFrame);\n\t\t}\n\t\n\t\tfunction scrollStart() {\n\t\t\twindow.removeEventListener('scroll', scrollStart);\n\t\t\twindow.addEventListener('scroll', debouncedScrollEnd);\n\t\t\tstartLoop();\n\t\t}\n\t\n\t\tfunction scrollEnd() {\n\t\t\tstopLoop();\n\t\t\twindow.removeEventListener('scroll', debouncedScrollEnd);\n\t\t\twindow.addEventListener('scroll', scrollStart);\n\t\t}\n\t\n\t\tvar debouncedScrollEnd = (0, _oUtils.debounce)(scrollEnd, 300);\n\t\n\t\twindow.addEventListener('scroll', scrollStart);\n\t\n\t\thandleFrame();\n\t};\n\t\n\texports.default = { init: init };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 182 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/*global fetch*/\n\tvar Awesomplete = __webpack_require__(183);\n\tvar utils = __webpack_require__(75);\n\t\n\tvar MIN_LENGTH = 2;\n\tvar DISPLAY_ITEMS = 6;\n\t\n\tvar Typeahead = function () {\n\t\tfunction Typeahead(target, dataUrl) {\n\t\t\t(0, _classCallCheck3.default)(this, Typeahead);\n\t\n\t\t\tthis.target = target;\n\t\t\tthis.input = target.querySelector('input');\n\t\t\tthis.context = getParentElDataTrackableValue(target);\n\t\t\tthis.dataUrl = dataUrl;\n\t\n\t\t\tthis.searchTerm = '';\n\t\n\t\t\tthis.awesomplete = new Awesomplete(this.input, {\n\t\t\t\tmaxItems: DISPLAY_ITEMS,\n\t\t\t\tfilter: function filter(text, input) {\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\treturn Awesomplete.FILTER_CONTAINS(utils.ascii(text.label), utils.ascii(input));\n\t\t\t\t},\n\t\t\t\titem: function item(text, input) {\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\treturn Awesomplete.ITEM(utils.ascii(text.label), utils.ascii(input));\n\t\t\t\t},\n\t\t\t\tsort: new Function()\n\t\t\t});\n\t\n\t\t\tthis.target.addEventListener('submit', this.handleSubmit.bind(this));\n\t\t\tthis.input.addEventListener('keyup', utils.debounce(this.handleType.bind(this), 300));\n\t\t\tthis.input.addEventListener('awesomplete-select', this.handleSelect.bind(this));\n\t\t\tthis.input.addEventListener('focus', this.handleFocus.bind(this));\n\t\t}\n\t\n\t\tTypeahead.prototype.handleType = function handleType() {\n\t\t\tvar latestTerm = this.input.value.trim();\n\t\n\t\t\tif (this.searchTerm !== latestTerm) {\n\t\t\t\tthis.searchTerm = latestTerm;\n\t\n\t\t\t\tif (this.searchTerm.length >= MIN_LENGTH) {\n\t\t\t\t\tthis.getSuggestions(this.searchTerm);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tTypeahead.prototype.handleSelect = function handleSelect(ev) {\n\t\t\ttrackSearchEvent(this.context);\n\t\t\tev.preventDefault();\n\t\t\twindow.location.href = ev.text.value;\n\t\t};\n\t\n\t\tTypeahead.prototype.handleSubmit = function handleSubmit() {\n\t\t\ttrackSearchEvent(this.context);\n\t\t};\n\t\n\t\tTypeahead.prototype.handleFocus = function handleFocus() {\n\t\t\tif (this.searchTerm.length >= MIN_LENGTH) {\n\t\t\t\tthis.awesomplete.open();\n\t\t\t}\n\t\t};\n\t\n\t\tTypeahead.prototype.getSuggestions = function getSuggestions(value) {\n\t\t\tvar _this = this;\n\t\n\t\t\treturn fetch(this.dataUrl + encodeURIComponent(value)).then(function (response) {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(response.statusText);\n\t\t\t\t}\n\t\n\t\t\t\treturn response.json();\n\t\t\t}).then(function (suggestions) {\n\t\t\t\t_this.setSuggestions(suggestions);\n\t\t\t});\n\t\t};\n\t\n\t\tTypeahead.prototype.setSuggestions = function setSuggestions(suggestions) {\n\t\t\tthis.awesomplete.list = suggestions.map(makeAwesompleteReadable);\n\t\t};\n\t\n\t\treturn Typeahead;\n\t}();\n\t\n\tfunction getParentElDataTrackableValue(el) {\n\t\tif (el.hasAttribute('data-trackable-terminate')) {\n\t\t\treturn '';\n\t\t} else if (el.parentNode && el.parentNode.getAttribute('data-trackable')) {\n\t\t\treturn '-' + el.parentNode.getAttribute('data-trackable');\n\t\t} else {\n\t\t\treturn getParentElDataTrackableValue(el.parentNode);\n\t\t};\n\t}\n\t\n\tfunction makeAwesompleteReadable(suggestion) {\n\t\treturn [suggestion.name, suggestion.url || '/stream/' + suggestion.taxonomy + 'Id/' + suggestion.id];\n\t}\n\t\n\tfunction trackSearchEvent(context) {\n\t\tvar tracking = new CustomEvent('oTracking.event', {\n\t\t\tdetail: {\n\t\t\t\tcategory: 'page',\n\t\t\t\taction: 'search-submit' + context\n\t\t\t},\n\t\t\tbubbles: true\n\t\t});\n\t\n\t\tdocument.body.dispatchEvent(tracking);\n\t}\n\t\n\texports.default = Typeahead;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 183 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(184);\n\n/***/ },\n/* 184 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(module) {\"use strict\";\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Simple, lightweight, usable local autocomplete library for modern browsers\n\t * Because there weren’t enough autocomplete scripts in the world? Because I’m completely insane and have NIH syndrome? Probably both. :P\n\t * @author Lea Verou http://leaverou.github.io/awesomplete\n\t * MIT license\n\t */\n\t\n\t(function () {\n\t\n\t\tvar _ = function _(input, o) {\n\t\t\tvar me = this;\n\t\n\t\t\t// Setup\n\t\n\t\t\tthis.input = $(input);\n\t\t\tthis.input.setAttribute(\"autocomplete\", \"off\");\n\t\t\tthis.input.setAttribute(\"aria-autocomplete\", \"list\");\n\t\n\t\t\to = o || {};\n\t\n\t\t\tconfigure(this, {\n\t\t\t\tminChars: 2,\n\t\t\t\tmaxItems: 10,\n\t\t\t\tautoFirst: false,\n\t\t\t\tdata: _.DATA,\n\t\t\t\tfilter: _.FILTER_CONTAINS,\n\t\t\t\tsort: _.SORT_BYLENGTH,\n\t\t\t\titem: _.ITEM,\n\t\t\t\treplace: _.REPLACE\n\t\t\t}, o);\n\t\n\t\t\tthis.index = -1;\n\t\n\t\t\t// Create necessary elements\n\t\n\t\t\tthis.container = $.create(\"div\", {\n\t\t\t\tclassName: \"awesomplete\",\n\t\t\t\taround: input\n\t\t\t});\n\t\n\t\t\tthis.ul = $.create(\"ul\", {\n\t\t\t\thidden: \"hidden\",\n\t\t\t\tinside: this.container\n\t\t\t});\n\t\n\t\t\tthis.status = $.create(\"span\", {\n\t\t\t\tclassName: \"visually-hidden\",\n\t\t\t\trole: \"status\",\n\t\t\t\t\"aria-live\": \"assertive\",\n\t\t\t\t\"aria-relevant\": \"additions\",\n\t\t\t\tinside: this.container\n\t\t\t});\n\t\n\t\t\t// Bind events\n\t\n\t\t\t$.bind(this.input, {\n\t\t\t\t\"input\": this.evaluate.bind(this),\n\t\t\t\t\"blur\": this.close.bind(this, { reason: \"blur\" }),\n\t\t\t\t\"keydown\": function keydown(evt) {\n\t\t\t\t\tvar c = evt.keyCode;\n\t\n\t\t\t\t\t// If the dropdown `ul` is in view, then act on keydown for the following keys:\n\t\t\t\t\t// Enter / Esc / Up / Down\n\t\t\t\t\tif (me.opened) {\n\t\t\t\t\t\tif (c === 13 && me.selected) {\n\t\t\t\t\t\t\t// Enter\n\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\tme.select();\n\t\t\t\t\t\t} else if (c === 27) {\n\t\t\t\t\t\t\t// Esc\n\t\t\t\t\t\t\tme.close({ reason: \"esc\" });\n\t\t\t\t\t\t} else if (c === 38 || c === 40) {\n\t\t\t\t\t\t\t// Down/Up arrow\n\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\tme[c === 38 ? \"previous\" : \"next\"]();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\t$.bind(this.input.form, { \"submit\": this.close.bind(this, { reason: \"submit\" }) });\n\t\n\t\t\t$.bind(this.ul, { \"mousedown\": function mousedown(evt) {\n\t\t\t\t\tvar li = evt.target;\n\t\n\t\t\t\t\tif (li !== this) {\n\t\n\t\t\t\t\t\twhile (li && !/li/i.test(li.nodeName)) {\n\t\t\t\t\t\t\tli = li.parentNode;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif (li && evt.button === 0) {\n\t\t\t\t\t\t\t// Only select on left click\n\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\tme.select(li, evt.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} });\n\t\n\t\t\tif (this.input.hasAttribute(\"list\")) {\n\t\t\t\tthis.list = \"#\" + this.input.getAttribute(\"list\");\n\t\t\t\tthis.input.removeAttribute(\"list\");\n\t\t\t} else {\n\t\t\t\tthis.list = this.input.getAttribute(\"data-list\") || o.list || [];\n\t\t\t}\n\t\n\t\t\t_.all.push(this);\n\t\t};\n\t\n\t\t_.prototype = {\n\t\t\tset list(list) {\n\t\t\t\tif (Array.isArray(list)) {\n\t\t\t\t\tthis._list = list;\n\t\t\t\t} else if (typeof list === \"string\" && list.indexOf(\",\") > -1) {\n\t\t\t\t\tthis._list = list.split(/\\s*,\\s*/);\n\t\t\t\t} else {\n\t\t\t\t\t// Element or CSS selector\n\t\t\t\t\tlist = $(list);\n\t\n\t\t\t\t\tif (list && list.children) {\n\t\t\t\t\t\tvar items = [];\n\t\t\t\t\t\tslice.apply(list.children).forEach(function (el) {\n\t\t\t\t\t\t\tif (!el.disabled) {\n\t\t\t\t\t\t\t\tvar text = el.textContent.trim();\n\t\t\t\t\t\t\t\tvar value = el.value || text;\n\t\t\t\t\t\t\t\tvar label = el.label || text;\n\t\t\t\t\t\t\t\tif (value !== \"\") {\n\t\t\t\t\t\t\t\t\titems.push({ label: label, value: value });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis._list = items;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (document.activeElement === this.input) {\n\t\t\t\t\tthis.evaluate();\n\t\t\t\t}\n\t\t\t},\n\t\n\t\t\tget selected() {\n\t\t\t\treturn this.index > -1;\n\t\t\t},\n\t\n\t\t\tget opened() {\n\t\t\t\treturn !this.ul.hasAttribute(\"hidden\");\n\t\t\t},\n\t\n\t\t\tclose: function close(o) {\n\t\t\t\tif (!this.opened) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tthis.ul.setAttribute(\"hidden\", \"\");\n\t\t\t\tthis.index = -1;\n\t\n\t\t\t\t$.fire(this.input, \"awesomplete-close\", o || {});\n\t\t\t},\n\t\n\t\t\topen: function open() {\n\t\t\t\tthis.ul.removeAttribute(\"hidden\");\n\t\n\t\t\t\tif (this.autoFirst && this.index === -1) {\n\t\t\t\t\tthis.goto(0);\n\t\t\t\t}\n\t\n\t\t\t\t$.fire(this.input, \"awesomplete-open\");\n\t\t\t},\n\t\n\t\t\tnext: function next() {\n\t\t\t\tvar count = this.ul.children.length;\n\t\n\t\t\t\tthis.goto(this.index < count - 1 ? this.index + 1 : -1);\n\t\t\t},\n\t\n\t\t\tprevious: function previous() {\n\t\t\t\tvar count = this.ul.children.length;\n\t\n\t\t\t\tthis.goto(this.selected ? this.index - 1 : count - 1);\n\t\t\t},\n\t\n\t\t\t// Should not be used, highlights specific item without any checks!\n\t\t\tgoto: function goto(i) {\n\t\t\t\tvar lis = this.ul.children;\n\t\n\t\t\t\tif (this.selected) {\n\t\t\t\t\tlis[this.index].setAttribute(\"aria-selected\", \"false\");\n\t\t\t\t}\n\t\n\t\t\t\tthis.index = i;\n\t\n\t\t\t\tif (i > -1 && lis.length > 0) {\n\t\t\t\t\tlis[i].setAttribute(\"aria-selected\", \"true\");\n\t\t\t\t\tthis.status.textContent = lis[i].textContent;\n\t\n\t\t\t\t\t$.fire(this.input, \"awesomplete-highlight\", {\n\t\t\t\t\t\ttext: this.suggestions[this.index]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\n\t\t\tselect: function select(selected, origin) {\n\t\t\t\tif (selected) {\n\t\t\t\t\tthis.index = $.siblingIndex(selected);\n\t\t\t\t} else {\n\t\t\t\t\tselected = this.ul.children[this.index];\n\t\t\t\t}\n\t\n\t\t\t\tif (selected) {\n\t\t\t\t\tvar suggestion = this.suggestions[this.index];\n\t\n\t\t\t\t\tvar allowed = $.fire(this.input, \"awesomplete-select\", {\n\t\t\t\t\t\ttext: suggestion,\n\t\t\t\t\t\torigin: origin || selected\n\t\t\t\t\t});\n\t\n\t\t\t\t\tif (allowed) {\n\t\t\t\t\t\tthis.replace(suggestion);\n\t\t\t\t\t\tthis.close({ reason: \"select\" });\n\t\t\t\t\t\t$.fire(this.input, \"awesomplete-selectcomplete\", {\n\t\t\t\t\t\t\ttext: suggestion\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\n\t\t\tevaluate: function evaluate() {\n\t\t\t\tvar me = this;\n\t\t\t\tvar value = this.input.value;\n\t\n\t\t\t\tif (value.length >= this.minChars && this._list.length > 0) {\n\t\t\t\t\tthis.index = -1;\n\t\t\t\t\t// Populate list with options that match\n\t\t\t\t\tthis.ul.innerHTML = \"\";\n\t\n\t\t\t\t\tthis.suggestions = this._list.map(function (item) {\n\t\t\t\t\t\treturn new Suggestion(me.data(item, value));\n\t\t\t\t\t}).filter(function (item) {\n\t\t\t\t\t\treturn me.filter(item, value);\n\t\t\t\t\t}).sort(this.sort).slice(0, this.maxItems);\n\t\n\t\t\t\t\tthis.suggestions.forEach(function (text) {\n\t\t\t\t\t\tme.ul.appendChild(me.item(text, value));\n\t\t\t\t\t});\n\t\n\t\t\t\t\tif (this.ul.children.length === 0) {\n\t\t\t\t\t\tthis.close({ reason: \"nomatches\" });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.open();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.close({ reason: \"nomatches\" });\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\t// Static methods/properties\n\t\n\t\t_.all = [];\n\t\n\t\t_.FILTER_CONTAINS = function (text, input) {\n\t\t\treturn RegExp($.regExpEscape(input.trim()), \"i\").test(text);\n\t\t};\n\t\n\t\t_.FILTER_STARTSWITH = function (text, input) {\n\t\t\treturn RegExp(\"^\" + $.regExpEscape(input.trim()), \"i\").test(text);\n\t\t};\n\t\n\t\t_.SORT_BYLENGTH = function (a, b) {\n\t\t\tif (a.length !== b.length) {\n\t\t\t\treturn a.length - b.length;\n\t\t\t}\n\t\n\t\t\treturn a < b ? -1 : 1;\n\t\t};\n\t\n\t\t_.ITEM = function (text, input) {\n\t\t\tvar html = input === '' ? text : text.replace(RegExp($.regExpEscape(input.trim()), \"gi\"), \"<mark>$&</mark>\");\n\t\t\treturn $.create(\"li\", {\n\t\t\t\tinnerHTML: html,\n\t\t\t\t\"aria-selected\": \"false\"\n\t\t\t});\n\t\t};\n\t\n\t\t_.REPLACE = function (text) {\n\t\t\tthis.input.value = text.value;\n\t\t};\n\t\n\t\t_.DATA = function (item /*, input*/) {\n\t\t\treturn item;\n\t\t};\n\t\n\t\t// Private functions\n\t\n\t\tfunction Suggestion(data) {\n\t\t\tvar o = Array.isArray(data) ? { label: data[0], value: data[1] } : (typeof data === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(data)) === \"object\" && \"label\" in data && \"value\" in data ? data : { label: data, value: data };\n\t\n\t\t\tthis.label = o.label || o.value;\n\t\t\tthis.value = o.value;\n\t\t}\n\t\tObject.defineProperty(Suggestion.prototype = Object.create(String.prototype), \"length\", {\n\t\t\tget: function get() {\n\t\t\t\treturn this.label.length;\n\t\t\t}\n\t\t});\n\t\tSuggestion.prototype.toString = Suggestion.prototype.valueOf = function () {\n\t\t\treturn \"\" + this.label;\n\t\t};\n\t\n\t\tfunction configure(instance, properties, o) {\n\t\t\tfor (var i in properties) {\n\t\t\t\tvar initial = properties[i],\n\t\t\t\t    attrValue = instance.input.getAttribute(\"data-\" + i.toLowerCase());\n\t\n\t\t\t\tif (typeof initial === \"number\") {\n\t\t\t\t\tinstance[i] = parseInt(attrValue);\n\t\t\t\t} else if (initial === false) {\n\t\t\t\t\t// Boolean options must be false by default anyway\n\t\t\t\t\tinstance[i] = attrValue !== null;\n\t\t\t\t} else if (initial instanceof Function) {\n\t\t\t\t\tinstance[i] = null;\n\t\t\t\t} else {\n\t\t\t\t\tinstance[i] = attrValue;\n\t\t\t\t}\n\t\n\t\t\t\tif (!instance[i] && instance[i] !== 0) {\n\t\t\t\t\tinstance[i] = i in o ? o[i] : initial;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t// Helpers\n\t\n\t\tvar slice = Array.prototype.slice;\n\t\n\t\tfunction $(expr, con) {\n\t\t\treturn typeof expr === \"string\" ? (con || document).querySelector(expr) : expr || null;\n\t\t}\n\t\n\t\tfunction $$(expr, con) {\n\t\t\treturn slice.call((con || document).querySelectorAll(expr));\n\t\t}\n\t\n\t\t$.create = function (tag, o) {\n\t\t\tvar element = document.createElement(tag);\n\t\n\t\t\tfor (var i in o) {\n\t\t\t\tvar val = o[i];\n\t\n\t\t\t\tif (i === \"inside\") {\n\t\t\t\t\t$(val).appendChild(element);\n\t\t\t\t} else if (i === \"around\") {\n\t\t\t\t\tvar ref = $(val);\n\t\t\t\t\tref.parentNode.insertBefore(element, ref);\n\t\t\t\t\telement.appendChild(ref);\n\t\t\t\t} else if (i in element) {\n\t\t\t\t\telement[i] = val;\n\t\t\t\t} else {\n\t\t\t\t\telement.setAttribute(i, val);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn element;\n\t\t};\n\t\n\t\t$.bind = function (element, o) {\n\t\t\tif (element) {\n\t\t\t\tfor (var event in o) {\n\t\t\t\t\tvar callback = o[event];\n\t\n\t\t\t\t\tevent.split(/\\s+/).forEach(function (event) {\n\t\t\t\t\t\telement.addEventListener(event, callback);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\t$.fire = function (target, type, properties) {\n\t\t\tvar evt = document.createEvent(\"HTMLEvents\");\n\t\n\t\t\tevt.initEvent(type, true, true);\n\t\n\t\t\tfor (var j in properties) {\n\t\t\t\tevt[j] = properties[j];\n\t\t\t}\n\t\n\t\t\treturn target.dispatchEvent(evt);\n\t\t};\n\t\n\t\t$.regExpEscape = function (s) {\n\t\t\treturn s.replace(/[-\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n\t\t};\n\t\n\t\t$.siblingIndex = function (el) {\n\t\t\t/* eslint-disable no-cond-assign */\n\t\t\tfor (var i = 0; el = el.previousElementSibling; i++) {}\n\t\t\treturn i;\n\t\t};\n\t\n\t\t// Initialization\n\t\n\t\tfunction init() {\n\t\t\t$$(\"input.awesomplete\").forEach(function (input) {\n\t\t\t\tnew _(input);\n\t\t\t});\n\t\t}\n\t\n\t\t// Are we in a browser? Check for Document constructor\n\t\tif (typeof Document !== \"undefined\") {\n\t\t\t// DOM already loaded?\n\t\t\tif (document.readyState !== \"loading\") {\n\t\t\t\tinit();\n\t\t\t} else {\n\t\t\t\t// Wait for it\n\t\t\t\tdocument.addEventListener(\"DOMContentLoaded\", init);\n\t\t\t}\n\t\t}\n\t\n\t\t_.$ = $;\n\t\t_.$$ = $$;\n\t\n\t\t// Make sure to export Awesomplete on self when in a browser\n\t\tif (typeof self !== \"undefined\") {\n\t\t\tself.Awesomplete = _;\n\t\t}\n\t\n\t\t// Expose Awesomplete as a CJS module\n\t\tif (( false ? \"undefined\" : (0, _typeof3.default)(module)) === \"object\" && module.exports) {\n\t\t\tmodule.exports = _;\n\t\t}\n\t\n\t\treturn _;\n\t})();\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(185)(module)))\n\n/***/ },\n/* 185 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 186 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.init = init;\n\t// MAKE ANY DISCOUNT CHANGES HERE\n\t// Update flags and next-product selector accordingly\n\tvar discount = {\n\t\tL: 50,\n\t\tS: 25,\n\t\tS_5: 25\n\t};\n\t\n\tfunction fetchSession() {\n\t\treturn fetch('https://session-next.ft.com/', {\n\t\t\ttimeout: 2000,\n\t\t\tcredentials: 'include'\n\t\t});\n\t}\n\t\n\tfunction extractResult(response) {\n\t\tswitch (response.status) {\n\t\t\tcase 404:\n\t\t\t\treturn {};\n\t\t\tcase 200:\n\t\t\t\treturn response.json();\n\t\t\tdefault:\n\t\t\t\tthrow new Error(response.status + ' - ' + response.statusTest);\n\t\t}\n\t}\n\t\n\tfunction supportsCors() {\n\t\treturn 'withCredentials' in new XMLHttpRequest();\n\t}\n\t\n\tfunction decorateTheSession(session) {\n\t\tsession.isForRegisteredUser = sessionIsForRegisteredUser(session);\n\t\tsession.isForWeekendUser = sessionIsForWeekendUser(session);\n\t\tsession.isForAnonymousUser = !session.products;\n\t\treturn session;\n\t}\n\t\n\tfunction isSignupForm() {\n\t\treturn window.location.pathname === '/signup' || window.location.pathname === '/thank-you';\n\t}\n\t\n\tfunction isBarrier() {\n\t\treturn !!document.querySelector('.barrier');\n\t}\n\t\n\tfunction showPromo(flags) {\n\t\tvar promo = document.querySelector('.n-header__marketing-promo');\n\t\n\t\tif (promo) {\n\t\t\tvar discountSpan = document.querySelector('#discountPercent');\n\t\n\t\t\tif (discountSpan) {\n\t\t\t\tdiscountSpan.innerText = discount[flags.barrierDiscountByCohort] + '%';\n\t\t\t}\n\t\t\tpromo.classList.add('visible');\n\t\t}\n\t}\n\t\n\tfunction checkAnonWithoutSession() {\n\t\treturn document.cookie.indexOf('USERNAME');\n\t}\n\t\n\tfunction sessionIsForRegisteredUser(session) {\n\t\treturn session.products && session.products.indexOf('P0') > -1 && session.products.indexOf('P1') === -1 && session.products.indexOf('P2') === -1;\n\t}\n\t\n\tfunction sessionIsForWeekendUser(session) {\n\t\treturn session.products && session.products.indexOf('P6') > -1 && session.products.indexOf('P1') === -1 && session.products.indexOf('P2') === -1;\n\t}\n\t\n\t/**\n\t * We want to show the marketing promo to:\n\t * - Anonymous users\n\t * - Weekend users\n\t * - Registered users\n\t *\n\t * We want to hide the marketing promo from:\n\t * - Signup form\n\t * - Barriers\n\t */\n\tfunction init(flags) {\n\t\n\t\t// If it's the signup form or a barrier, just stop\n\t\tif (!isSignupForm() && !isBarrier()) {\n\t\n\t\t\t// If it's a CORS-compatible browser, fetch the session\n\t\t\tif (supportsCors()) {\n\t\t\t\tfetchSession().then(extractResult).then(decorateTheSession).then(function (session) {\n\t\t\t\t\tif (session.isForAnonymousUser || session.isForRegisteredUser || session.isForWeekendUser) {\n\t\t\t\t\t\tshowPromo(flags);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (checkAnonWithoutSession()) {\n\t\t\t\t// If can't do cors but anonymous, just show the promo\n\t\t\t\t// Pending cors solution\n\t\t\t\tshowPromo(flags);\n\t\t\t}\n\t\t}\n\t}\n\n/***/ },\n/* 187 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(75);\n\t\n\tvar IOS_DEVICE_REGEX = /OS (7|8|9|10).* like Mac OS X.*/i;\n\tvar ANDROID_DEVICE_REGEX = /Android (4\\.[3-9]|[5-9])/i;\n\t\n\tfunction isWebAppCapableDevice(userAgent) {\n\t\treturn IOS_DEVICE_REGEX.test(userAgent);\n\t}\n\t\n\tfunction isModernAndroidDevice(userAgent) {\n\t\treturn ANDROID_DEVICE_REGEX.test(userAgent);\n\t}\n\t\n\tfunction showWebAppLink() {\n\t\t(0, _utils.$$)('.js-webapp-link').forEach(function (a) {\n\t\t\ta.pathname = location.pathname;\n\t\t\ta.search = location.search;\n\t\t\ta.hidden = false;\n\t\t});\n\t}\n\t\n\tfunction showAndroidLink() {\n\t\t(0, _utils.$$)('.js-android-link').forEach(function (a) {\n\t\t\tvar param = 'location=' + encodeURIComponent(location.pathname + location.search);\n\t\t\ta.search = a.search + (a.search.length ? '&' : '?') + param;\n\t\t\ta.hidden = false;\n\t\t});\n\t}\n\t\n\tfunction init() {\n\t\tif (isWebAppCapableDevice(navigator.userAgent)) {\n\t\t\tshowWebAppLink();\n\t\t} else if (isModernAndroidDevice(navigator.userAgent)) {\n\t\t\tshowAndroidLink();\n\t\t}\n\t}\n\t\n\tmodule.exports = {\n\t\tinit: init,\n\t\tisWebAppCapableDevice: isWebAppCapableDevice,\n\t\tisModernAndroidDevice: isModernAndroidDevice\n\t};\n\n/***/ },\n/* 188 */\n/***/ function(module, exports) {\n\n\t//module.exports = require('n-messages'); // FIXME: Commenting this out for now to fix preact issue as it is not currently being used\n\t\"use strict\";\n\n/***/ },\n/* 189 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _superstoreSync = __webpack_require__(89);\n\t\n\tvar _superstoreSync2 = _interopRequireDefault(_superstoreSync);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar FLAG_NOT_ON = 'Flag not on';\n\tvar EXIT_PAGE = 'Exit page';\n\tvar COOKIE_CONSENT = 'n-cookie-message:consented';\n\t\n\tvar CookieMessage = function () {\n\t\tfunction CookieMessage() {\n\t\t\t(0, _classCallCheck3.default)(this, CookieMessage);\n\t\t}\n\t\n\t\tCookieMessage.init = function init(flags) {\n\t\t\treturn CookieMessage.ensureMessageIsRequired(flags).then(CookieMessage.setupView);\n\t\t};\n\t\n\t\tCookieMessage.ensureMessageIsRequired = function ensureMessageIsRequired(flags) {\n\t\t\tif (!flags.get('cookieMessage')) {\n\t\t\t\treturn Promise.reject(FLAG_NOT_ON);\n\t\t\t}\n\t\t\tif (/^\\/(errors|opt-out-confirm)/.test(location.pathname)) {\n\t\t\t\treturn Promise.reject(EXIT_PAGE);\n\t\t\t}\n\t\t\treturn Promise.resolve();\n\t\t};\n\t\n\t\tCookieMessage.setupView = function setupView() {\n\t\n\t\t\tif (userHasConsentedToCookies()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tvar message = document.createElement('div');\n\t\n\t\t\tinsertMessage();\n\t\n\t\t\tfunction insertMessage() {\n\t\t\t\tmessage.innerHTML = CookieMessage.template();\n\t\t\t\tmessage.querySelector('.cookie-message__close-btn').addEventListener('click', flagUserAsConsentingToCookies);\n\t\t\t\tdocument.body.insertBefore(message, document.body.firstChild);\n\t\t\t}\n\t\n\t\t\tfunction hideMessage() {\n\t\t\t\tmessage.classList.add('cookie-message--hidden');\n\t\t\t}\n\t\n\t\t\tfunction flagUserAsConsentingToCookies() {\n\t\t\t\t_superstoreSync2.default.local.set(COOKIE_CONSENT, 1);\n\t\t\t\thideMessage();\n\t\t\t}\n\t\n\t\t\tfunction userHasConsentedToCookies() {\n\t\t\t\tif (_superstoreSync2.default.local.get(COOKIE_CONSENT) === 1) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\n\t\t\t\t// HACK: Whilst FT.com is still around auto-opt user in if they have accepted over there.\n\t\t\t\tif (/\\bcookieconsent=accepted(?:;|$)/.test(document.cookie)) {\n\t\t\t\t\tflagUserAsConsentingToCookies();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\t\n\t\tCookieMessage.template = function template() {\n\t\t\treturn '\\n\\t\\t\\t<div class=\"cookie-message cookie-message--banner-centric\"\\n\\t\\t\\t\\tdata-trackable=\"cookie-message\"\\n\\t\\t\\t\\ttransition=\"t-cookie-message\">\\n\\n\\t\\t\\t\\t<div class=\"cookie-message__container\">\\n\\t\\t\\t\\t\\t<p class=\"cookie-message__description\">\\n\\t\\t\\t\\t\\t\\tBy continuing to use this site you consent to the use of cookies.\\n\\t\\t\\t\\t\\t\\t<a class=\"cookie-message__link\"\\n\\t\\t\\t\\t\\t\\t\\tdata-trackable=\"more-info\"\\n\\t\\t\\t\\t\\t\\t\\thref=\"http://help.ft.com/tools-services/how-the-ft-manages-cookies-on-its-websites/\">\\n\\t\\t\\t\\t\\t\\t\\tFind out more\\n\\t\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t<div class=\"cookie-message__close-btn-container\">\\n\\t\\t\\t\\t\\t\\t<button class=\"cookie-message__close-btn\" data-trackable=\"close\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"cookie-message__close-btn-label n-util-visually-hidden\">Close</span>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t';\n\t\t};\n\t\n\t\treturn CookieMessage;\n\t}();\n\t\n\texports.default = CookieMessage;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 190 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(75);\n\t\n\tvar superstore = __webpack_require__(89);\n\t\n\tvar STORAGE_KEY = 'n-welcome-message-seen';\n\tvar TEST_KEY = 'n-welcome-message-test';\n\tvar TEST_VAL = 'can-store';\n\t\n\tfunction hasLocalStorage() {\n\t\tsuperstore.local.set(TEST_KEY, TEST_VAL);\n\t\tvar retrieved = superstore.local.get(TEST_KEY);\n\t\tsuperstore.local.unset(TEST_KEY);\n\t\treturn TEST_VAL === retrieved && superstore.isPersisting();\n\t}\n\t\n\tfunction init() {\n\t\tvar fixedEl = (0, _utils.$)('.n-welcome-message--fixed');\n\t\tvar staticEl = (0, _utils.$)('.n-welcome-message--static');\n\t\n\t\tvar segmentId = String(window.location.search).match(/[?&]segmentId=([^?&])/);\n\t\tif (segmentId) {\n\t\t\tif (hasLocalStorage()) {\n\t\t\t\tsuperstore.local.set(STORAGE_KEY, 1);\n\t\t\t}\n\t\t\tfixedEl.hidden = true;\n\t\t\tstaticEl.hidden = true;\n\t\t}\n\t\n\t\tif (Boolean(superstore.local.get(STORAGE_KEY)) === false && hasLocalStorage()) {\n\t\t\tvar closeButton = (0, _utils.$)('button', fixedEl);\n\t\n\t\t\tcloseButton.onclick = function () {\n\t\t\t\tfixedEl.hidden = true;\n\t\t\t};\n\t\n\t\t\tfixedEl.hidden = false;\n\t\t\tstaticEl.hidden = true;\n\t\n\t\t\t// only display the bar the first time\n\t\t\tsuperstore.local.set(STORAGE_KEY, 1);\n\t\t}\n\t};\n\t\n\tmodule.exports = { init: init };\n\n/***/ },\n/* 191 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t// deprecated\n\tmodule.exports = {}; //require('n-message-prompts');\n\n/***/ },\n/* 192 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction init() {\n\t\t__webpack_require__(193).init();\n\t}\n\t\n\tmodule.exports = { init: init };\n\n/***/ },\n/* 193 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(194);\n\n/***/ },\n/* 194 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _footer = __webpack_require__(195);\n\t\n\tvar _footer2 = _interopRequireDefault(_footer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar constructAll = function constructAll() {\n\t\t_footer2.default.init();\n\t\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n\t};\n\t\n\tdocument.addEventListener('o.DOMContentLoaded', constructAll);\n\t\n\texports.default = _footer2.default;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 195 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _oToggle = __webpack_require__(174);\n\t\n\tvar _oToggle2 = _interopRequireDefault(_oToggle);\n\t\n\tvar _layout = __webpack_require__(196);\n\t\n\tvar _layout2 = _interopRequireDefault(_layout);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar COLLAPSIBLE_BREAKPOINTS = ['default', 'XS', 'S'];\n\t\n\tvar Footer = function () {\n\t\tfunction Footer(footerEl) {\n\t\t\tvar _this = this;\n\t\n\t\t\t(0, _classCallCheck3.default)(this, Footer);\n\t\n\t\t\tif (!footerEl) {\n\t\t\t\tfooterEl = document.querySelector('[data-o-component=\"o-footer\"]');\n\t\t\t} else if (typeof footerEl === 'string') {\n\t\t\t\tfooterEl = document.querySelector(footerEl);\n\t\t\t}\n\t\n\t\t\tthis.footerEl = footerEl;\n\t\n\t\t\t(0, _layout2.default)(function (breakpoint) {\n\t\t\t\tif (COLLAPSIBLE_BREAKPOINTS.indexOf(breakpoint) !== -1 && !_this._toggles) {\n\t\t\t\t\treturn _this.setup();\n\t\t\t\t}\n\t\n\t\t\t\tif (COLLAPSIBLE_BREAKPOINTS.indexOf(breakpoint) === -1 && _this._toggles) {\n\t\t\t\t\treturn _this.destroy();\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\tthis.footerEl.removeAttribute('data-o-footer--no-js');\n\t\t\tthis.footerEl.setAttribute('data-o-footer--js', '');\n\t\t}\n\t\n\t\tFooter.prototype.setup = function setup() {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tthis._toggles = [];\n\t\n\t\t\tvar toggleEls = this.footerEl.querySelectorAll('[aria-controls]');\n\t\n\t\t\tArray.prototype.forEach.call(toggleEls, function (toggleEl) {\n\t\t\t\tvar target = document.getElementById(toggleEl.getAttribute('aria-controls'));\n\t\t\t\ttoggleEl.setAttribute('role', 'button');\n\t\t\t\t_this2._toggles.push(new _oToggle2.default(toggleEl, { target: target }));\n\t\t\t});\n\t\t};\n\t\n\t\tFooter.prototype.destroy = function destroy() {\n\t\t\tthis._toggles.forEach(function (toggle) {\n\t\t\t\treturn toggle.destroy();\n\t\t\t});\n\t\t\tthis._toggles = null;\n\t\t};\n\t\n\t\tFooter.init = function init(rootEl) {\n\t\t\tif (!rootEl) {\n\t\t\t\trootEl = document.body;\n\t\t\t} else if (typeof rootEl === 'string') {\n\t\t\t\trootEl = document.querySelector(rootEl);\n\t\t\t}\n\t\n\t\t\tvar footerEl = rootEl.querySelector('[data-o-component=\"o-footer\"]');\n\t\t\treturn new Footer(footerEl);\n\t\t};\n\t\n\t\treturn Footer;\n\t}();\n\t\n\texports.default = Footer;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 196 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = init;\n\t\n\tvar _oGrid = __webpack_require__(140);\n\t\n\tvar _oGrid2 = _interopRequireDefault(_oGrid);\n\t\n\tvar _oViewport = __webpack_require__(99);\n\t\n\tvar _oViewport2 = _interopRequireDefault(_oViewport);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction init(callback) {\n\t\t_oViewport2.default.listenTo('resize');\n\t\n\t\tvar lastBreakpoint = _oGrid2.default.getCurrentLayout();\n\t\n\t\tdocument.body.addEventListener('oViewport.resize', function () {\n\t\t\tvar breakpoint = _oGrid2.default.getCurrentLayout();\n\t\n\t\t\tif (breakpoint !== lastBreakpoint) {\n\t\t\t\tcallback(breakpoint);\n\t\t\t\tlastBreakpoint = breakpoint;\n\t\t\t}\n\t\t});\n\t\n\t\tcallback(lastBreakpoint);\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 197 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\tclient: __webpack_require__(198),\n\t\tui: __webpack_require__(221),\n\t\tuiInstant: __webpack_require__(239)\n\t};\n\n/***/ },\n/* 198 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(199);\n\n/***/ },\n/* 199 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _myftClient = __webpack_require__(200);\n\t\n\tvar _myftClient2 = _interopRequireDefault(_myftClient);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = new _myftClient2.default({\n\t\tapiRoot: '/__myft/api/onsite/'\n\t});\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 200 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar session = __webpack_require__(201);\n\tvar fetchres = __webpack_require__(205);\n\t\n\tvar lib = {\n\t\tpersonaliseUrl: __webpack_require__(216)\n\t};\n\t\n\tvar emptyResponse = {\n\t\ttotal: 0,\n\t\titems: [],\n\t\tcount: 0\n\t};\n\t\n\tvar MyFtClient = function () {\n\t\tfunction MyFtClient() {\n\t\t\tvar _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t\t\tvar apiRoot = _ref.apiRoot;\n\t\t\t(0, _classCallCheck3.default)(this, MyFtClient);\n\t\n\t\t\tif (!apiRoot) {\n\t\t\t\tthrow 'User prefs must be constructed with an api root';\n\t\t\t}\n\t\t\tthis.apiRoot = apiRoot;\n\t\t\tthis.loaded = {};\n\t\t}\n\t\n\t\t/**\n\t * loads user's preferred, enabled and created relationships, as well as requested additional relationships\n\t * @param additionalRelationships\n\t * @returns {*}\n\t */\n\t\n\t\n\t\tMyFtClient.prototype.init = function init() {\n\t\t\tvar _this = this;\n\t\n\t\t\tvar additionalRelationships = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\t\n\t\n\t\t\tif (this.initialised) {\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\t\t\tthis.initialised = true;\n\t\t\tthis.setPerfMark();\n\t\t\treturn session.uuid().then(function (_ref2) {\n\t\t\t\tvar uuid = _ref2.uuid;\n\t\n\t\n\t\t\t\tif (!uuid) {\n\t\t\t\t\treturn Promise.reject('Session service returned undefined.');\n\t\t\t\t}\n\t\n\t\t\t\t_this.userId = uuid;\n\t\n\t\t\t\t_this.headers = {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-FT-Session-Token': session.cookie()\n\t\t\t\t};\n\t\n\t\t\t\tvar relationships = new Set([{ relationship: 'preferred', type: 'preference' }, { relationship: 'enabled', type: 'endpoint' }, { relationship: 'created', type: 'list' }]);\n\t\n\t\t\t\tadditionalRelationships.forEach(function (rel) {\n\t\t\t\t\tif (!relationships.has(rel)) {\n\t\t\t\t\t\trelationships.add(rel);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\trelationships.forEach(function (relationship) {\n\t\t\t\t\treturn _this.load(relationship);\n\t\t\t\t});\n\t\t\t}).catch(function (e) {\n\t\t\t\t// Keeps console clean for anonymous users\n\t\t\t\tif (e.message === 'No session cookie found') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthrow e;\n\t\t\t});\n\t\t};\n\t\n\t\tMyFtClient.prototype.setPerfMark = function setPerfMark() {\n\t\t\tvar p = window.performance || window.msPerformance || window.webkitPerformance || window.mozPerformance;\n\t\t\tif (!p || !p.mark) return;\n\t\t\tPromise.all([new Promise(function (res) {\n\t\t\t\tdocument.addEventListener('myft.user.followed.concept.load', res);\n\t\t\t}), new Promise(function (res) {\n\t\t\t\tdocument.addEventListener('myft.user.saved.content.load', res);\n\t\t\t})]).then(function () {\n\t\t\t\treturn p.mark('myftLoaded');\n\t\t\t});\n\t\t};\n\t\n\t\tMyFtClient.prototype.emit = function emit(name, data) {\n\t\t\tdocument.body.dispatchEvent(new CustomEvent('myft.' + name, {\n\t\t\t\tdetail: data,\n\t\t\t\tbubbles: true\n\t\t\t}));\n\t\t};\n\t\n\t\tMyFtClient.prototype.fetchJson = function fetchJson(method, endpoint, data) {\n\t\t\tvar options = {\n\t\t\t\tmethod: method,\n\t\t\t\theaders: this.headers,\n\t\t\t\tcredentials: 'include'\n\t\t\t};\n\t\n\t\t\tif (method !== 'GET') {\n\t\t\t\toptions.body = JSON.stringify(data || {});\n\t\t\t}\n\t\t\treturn fetch(this.apiRoot + endpoint, options).then(fetchres.json);\n\t\t};\n\t\n\t\tMyFtClient.prototype.load = function load(relationship) {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tvar key = relationship.relationship + '.' + relationship.type;\n\t\n\t\t\tthis.fetchJson('GET', this.userId + '/' + relationship.relationship + '/' + relationship.type).then(function (results) {\n\t\t\t\tif (!results) {\n\t\t\t\t\tresults = emptyResponse;\n\t\t\t\t}\n\t\t\t\t_this2.loaded[key] = results;\n\t\t\t\t_this2.emit('user.' + key + '.load', results);\n\t\t\t}).catch(function (err) {\n\t\t\t\tif (err.message === 'No user data exists') {\n\t\t\t\t\t_this2.loaded[key] = emptyResponse;\n\t\t\t\t\t_this2.emit('user.' + key + '.load', emptyResponse);\n\t\t\t\t} else {\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\n\t\tMyFtClient.prototype.add = function add(actor, actorId, relationship, type, subject, data) {\n\t\t\tvar _this3 = this;\n\t\n\t\t\tactorId = this.getFallbackActorIdIfNecessary(actor, actorId);\n\t\t\treturn this.fetchJson('PUT', actor + '/' + actorId + '/' + relationship + '/' + type + '/' + subject, data).then(function (results) {\n\t\t\t\tvar details = { actorId: actorId, results: results, subject: subject, data: data };\n\t\t\t\t_this3.emit(actor + '.' + relationship + '.' + type + '.add', details);\n\t\t\t\treturn details;\n\t\t\t});\n\t\t};\n\t\n\t\tMyFtClient.prototype.remove = function remove(actor, actorId, relationship, type, subject, data) {\n\t\t\tvar _this4 = this;\n\t\n\t\t\tactorId = this.getFallbackActorIdIfNecessary(actor, actorId);\n\t\t\treturn this.fetchJson('DELETE', actor + '/' + actorId + '/' + relationship + '/' + type + '/' + subject).then(function () {\n\t\t\t\tvar details = { actorId: actorId, subject: subject, data: data };\n\t\t\t\t_this4.emit(actor + '.' + relationship + '.' + type + '.remove', details);\n\t\t\t\treturn details;\n\t\t\t});\n\t\t};\n\t\n\t\tMyFtClient.prototype.updateRelationship = function updateRelationship(actor, actorId, relationship, type, subject, data) {\n\t\t\tvar _this5 = this;\n\t\n\t\t\tactorId = this.getFallbackActorIdIfNecessary(actor, actorId);\n\t\t\treturn this.fetchJson('PUT', actor + '/' + actorId + '/' + relationship + '/' + type + '/' + subject, data).then(function (results) {\n\t\t\t\tvar details = { actorId: actorId, results: results, subject: subject, data: data };\n\t\t\t\t_this5.emit(actor + '.' + relationship + '.' + type + '.update', details);\n\t\t\t\treturn details;\n\t\t\t});\n\t\t};\n\t\n\t\tMyFtClient.prototype.get = function get(relationship, type, subject) {\n\t\t\tvar _this6 = this;\n\t\n\t\t\treturn this.getAll(relationship, type).then(function (items) {\n\t\t\t\treturn items.filter(function (item) {\n\t\t\t\t\treturn _this6.getUuid(item).indexOf(subject) > -1;\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\n\t\tMyFtClient.prototype.getAll = function getAll(relationship, type) {\n\t\t\tvar _this7 = this;\n\t\n\t\t\treturn new Promise(function (resolve) {\n\t\t\t\tif (_this7.loaded[relationship + '.' + type]) {\n\t\t\t\t\tresolve(_this7.getItems(relationship, type));\n\t\t\t\t} else {\n\t\t\t\t\tdocument.body.addEventListener('myft.user.' + relationship + '.' + type + '.load', function () {\n\t\t\t\t\t\tresolve(_this7.getItems(relationship, type));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\n\t\tMyFtClient.prototype.has = function has(relationship, type, subject) {\n\t\t\treturn this.get(relationship, type, subject).then(function (items) {\n\t\t\t\treturn items.length > 0;\n\t\t\t});\n\t\t};\n\t\n\t\tMyFtClient.prototype.getUuid = function getUuid(topic) {\n\t\t\treturn topic.uuid;\n\t\t};\n\t\n\t\tMyFtClient.prototype.getItems = function getItems(relationship, type) {\n\t\t\treturn this.loaded[relationship + '.' + type].items || [];\n\t\t};\n\t\n\t\tMyFtClient.prototype.personaliseUrl = function personaliseUrl(url) {\n\t\t\treturn session.uuid().then(function (_ref3) {\n\t\t\t\tvar uuid = _ref3.uuid;\n\t\n\t\t\t\treturn lib.personaliseUrl(url, uuid);\n\t\t\t});\n\t\t};\n\t\n\t\t//private\n\t\n\t\n\t\tMyFtClient.prototype.getFallbackActorIdIfNecessary = function getFallbackActorIdIfNecessary(actor, actorId) {\n\t\t\tif (!actorId) {\n\t\t\t\tif (actor === 'user') {\n\t\t\t\t\treturn this.userId;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('no actorId specified');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn actorId;\n\t\t\t}\n\t\t};\n\t\n\t\treturn MyFtClient;\n\t}();\n\t\n\texports.default = MyFtClient;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 201 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(202);\n\n/***/ },\n/* 202 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar request = __webpack_require__(203);\n\tvar cache = __webpack_require__(204);\n\tvar promises = {};\n\t\n\tfunction uuid() {\n\t\tvar uuid = cache('uuid');\n\t\n\t\tif (uuid) {\n\t\t\treturn Promise.resolve({\n\t\t\t\tuuid: uuid\n\t\t\t});\n\t\t}\n\t\tif (!promises.uuid) {\n\t\t\tpromises.uuid = request('/uuid').then(function (response) {\n\t\t\t\tcache('uuid', response.uuid);\n\t\t\t\treturn response;\n\t\t\t});\n\t\t}\n\t\n\t\treturn promises.uuid;\n\t}\n\t\n\tfunction validate() {\n\t\treturn request('/validate');\n\t}\n\t\n\tmodule.exports = {\n\t\tuuid: uuid,\n\t\tvalidate: validate,\n\t\tcache: cache,\n\t\tcookie: function cookie() {\n\t\t\treturn (/FTSession=([^;]+)/.exec(document.cookie) || [null, ''])[1];\n\t\t}\n\t};\n\n/***/ },\n/* 203 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction request(url) {\n\t\t// if we don't have a session token cookie, don't bother..\n\t\tif (document.cookie.indexOf('FTSession=') === -1) {\n\t\t\treturn Promise.reject(new Error('No session cookie found'));\n\t\t}\n\t\n\t\treturn fetch('https://session-next.ft.com' + url, {\n\t\t\tcredentials: 'include',\n\t\t\tuseCorsProxy: true\n\t\t}).then(function (response) {\n\t\t\tif (response.ok) {\n\t\t\t\treturn url === '/validate' ? Promise.resolve(true) : response.json();\n\t\t\t} else {\n\t\t\t\treturn url === '/validate' ? Promise.resolve(false) : Promise.reject(response.status);\n\t\t\t}\n\t\t}).catch(function (e) {\n\t\t\tvar message = e.message || \"\";\n\t\t\tif (message.indexOf('timed out') > -1 || message.indexOf('Network request failed') > -1 || message.indexOf('Not Found') > -1) {\n\t\t\t\t// HTTP timeouts and invalid sessions are a fact of life on the internet.\n\t\t\t\t// We don't want to report this to Sentry.\n\t\t\t} else {\n\t\t\t\tdocument.body.dispatchEvent(new CustomEvent('oErrors.log', {\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\terror: e,\n\t\t\t\t\t\tinfo: {\n\t\t\t\t\t\t\tcomponent: 'next-session-client'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t});\n\t}\n\t\n\tmodule.exports = request;\n\n/***/ },\n/* 204 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar detailsCache = {};\n\t\n\tfunction cache(name, value) {\n\t\tif ((typeof name === 'undefined' ? 'undefined' : (0, _typeof3.default)(name)) === 'object') {\n\t\t\tdetailsCache = name;\n\t\t\treturn;\n\t\t}\n\t\n\t\tif (typeof name === 'string' && typeof value === 'string') {\n\t\t\tdetailsCache[name] = value;\n\t\t\treturn;\n\t\t}\n\t\n\t\tif (typeof name === 'string' && typeof value === 'undefined') {\n\t\t\treturn detailsCache[name] || null;\n\t\t}\n\t\n\t\tif (typeof name === 'undefined' && typeof value === 'undefined') {\n\t\t\treturn detailsCache;\n\t\t}\n\t\n\t\tthrow new Error('Invalid arguments');\n\t}\n\t\n\tcache.clear = function () {\n\t\tdetailsCache = {};\n\t};\n\t\n\tmodule.exports = cache;\n\n/***/ },\n/* 205 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(206);\n\n/***/ },\n/* 206 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ReadTimeoutError = exports.InvalidJsonError = exports.BadServerResponseError = undefined;\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(207);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(208);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\texports.json = json;\n\texports.text = text;\n\texports.originatedError = originatedError;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction json(response) {\n\t\tif (Array.isArray(response)) {\n\t\t\treturn Promise.all(response.map(json));\n\t\t}\n\t\tif (!response.ok) {\n\t\t\tthrow new BadServerResponseError(response.status);\n\t\t}\n\t\n\t\tif (response.status === 204) {\n\t\t\treturn undefined;\n\t\t}\n\t\n\t\treturn response.json().catch(function (err) {\n\t\t\tif (err.message.indexOf('timeout') > -1) {\n\t\t\t\tthrow new ReadTimeoutError(err.message);\n\t\t\t}\n\t\t\t// probably invalid json\n\t\t\tthrow new InvalidJsonError(err.message);\n\t\t});\n\t}\n\t\n\tfunction text(response) {\n\t\tif (Array.isArray(response)) {\n\t\t\treturn Promise.all(response.map(text));\n\t\t}\n\t\n\t\tif (!response.ok) {\n\t\t\tthrow new BadServerResponseError(response.status);\n\t\t}\n\t\n\t\tif (response.status === 204) {\n\t\t\treturn undefined;\n\t\t}\n\t\n\t\treturn response.text();\n\t}\n\t\n\tvar BadServerResponseError = exports.BadServerResponseError = function (_Error) {\n\t\t(0, _inherits3.default)(BadServerResponseError, _Error);\n\t\n\t\t// es6 smells\n\t\t// https://twitter.com/andrewsmatt/status/554792707139584001\n\t\tfunction BadServerResponseError(options) {\n\t\t\t(0, _classCallCheck3.default)(this, BadServerResponseError);\n\t\n\t\t\tvar _this = (0, _possibleConstructorReturn3.default)(this, _Error.call(this));\n\t\n\t\t\t_this.message = options;\n\t\t\t_this.name = 'BadServerResponseError';\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn BadServerResponseError;\n\t}(Error);\n\t\n\tvar InvalidJsonError = exports.InvalidJsonError = function (_Error2) {\n\t\t(0, _inherits3.default)(InvalidJsonError, _Error2);\n\t\n\t\tfunction InvalidJsonError(options) {\n\t\t\t(0, _classCallCheck3.default)(this, InvalidJsonError);\n\t\n\t\t\tvar _this2 = (0, _possibleConstructorReturn3.default)(this, _Error2.call(this));\n\t\n\t\t\t_this2.message = options;\n\t\t\t_this2.name = 'InvalidJsonError';\n\t\t\treturn _this2;\n\t\t}\n\t\n\t\treturn InvalidJsonError;\n\t}(Error);\n\t\n\tvar ReadTimeoutError = exports.ReadTimeoutError = function (_Error3) {\n\t\t(0, _inherits3.default)(ReadTimeoutError, _Error3);\n\t\n\t\tfunction ReadTimeoutError(options) {\n\t\t\t(0, _classCallCheck3.default)(this, ReadTimeoutError);\n\t\n\t\t\tvar _this3 = (0, _possibleConstructorReturn3.default)(this, _Error3.call(this));\n\t\n\t\t\t_this3.message = options;\n\t\t\t_this3.name = 'ReadTimeoutError';\n\t\t\treturn _this3;\n\t\t}\n\t\n\t\treturn ReadTimeoutError;\n\t}(Error);\n\t\n\tfunction originatedError(err) {\n\t\tif (err.name === BadServerResponseError.name || err.name === InvalidJsonError.name || err.name === ReadTimeoutError.name) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n/***/ },\n/* 207 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function (self, call) {\n\t  if (!self) {\n\t    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\t  }\n\t\n\t  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n\t};\n\n/***/ },\n/* 208 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _setPrototypeOf = __webpack_require__(209);\n\t\n\tvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\t\n\tvar _create = __webpack_require__(213);\n\t\n\tvar _create2 = _interopRequireDefault(_create);\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function (subClass, superClass) {\n\t  if (typeof superClass !== \"function\" && superClass !== null) {\n\t    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n\t  }\n\t\n\t  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n\t    constructor: {\n\t      value: subClass,\n\t      enumerable: false,\n\t      writable: true,\n\t      configurable: true\n\t    }\n\t  });\n\t  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n\t};\n\n/***/ },\n/* 209 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(210), __esModule: true };\n\n/***/ },\n/* 210 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(211);\n\tmodule.exports = __webpack_require__(17).Object.setPrototypeOf;\n\n/***/ },\n/* 211 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.3.19 Object.setPrototypeOf(O, proto)\n\tvar $export = __webpack_require__(15);\n\t$export($export.S, 'Object', {setPrototypeOf: __webpack_require__(212).set});\n\n/***/ },\n/* 212 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Works with __proto__ only. Old v8 can't work with null proto objects.\n\t/* eslint-disable no-proto */\n\tvar isObject = __webpack_require__(23)\n\t  , anObject = __webpack_require__(22);\n\tvar check = function(O, proto){\n\t  anObject(O);\n\t  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n\t};\n\tmodule.exports = {\n\t  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n\t    function(test, buggy, set){\n\t      try {\n\t        set = __webpack_require__(18)(Function.call, __webpack_require__(70).f(Object.prototype, '__proto__').set, 2);\n\t        set(test, []);\n\t        buggy = !(test instanceof Array);\n\t      } catch(e){ buggy = true; }\n\t      return function setPrototypeOf(O, proto){\n\t        check(O, proto);\n\t        if(buggy)O.__proto__ = proto;\n\t        else set(O, proto);\n\t        return O;\n\t      };\n\t    }({}, false) : undefined),\n\t  check: check\n\t};\n\n/***/ },\n/* 213 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(214), __esModule: true };\n\n/***/ },\n/* 214 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(215);\n\tvar $Object = __webpack_require__(17).Object;\n\tmodule.exports = function create(P, D){\n\t  return $Object.create(P, D);\n\t};\n\n/***/ },\n/* 215 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $export = __webpack_require__(15)\n\t// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n\t$export($export.S, 'Object', {create: __webpack_require__(34)});\n\n/***/ },\n/* 216 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar isImmutableUrl = __webpack_require__(217);\n\tvar isValidUuid = __webpack_require__(220);\n\t\n\tmodule.exports = function (url, userId) {\n\t\tif (isImmutableUrl(url)) {\n\t\t\treturn url;\n\t\t}\n\t\n\t\tif (!userId || !userId.length || !isValidUuid(userId)) {\n\t\t\tthrow new Error('Invalid user uuid: ' + userId);\n\t\t}\n\t\n\t\treturn url.replace(/myft(?:\\/([a-zA-z\\-]*))?(\\/.[^$\\/])?\\/?/, function ($0, $1, $2) {\n\t\t\treturn 'myft/' + ($1 ? $1 + '/' : '') + userId + ($2 || '');\n\t\t});\n\t};\n\n/***/ },\n/* 217 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar isPersonalisedUrl = __webpack_require__(218);\n\tvar isLegacyUrl = __webpack_require__(219);\n\t\n\tmodule.exports = function (url) {\n\t\treturn (/^\\/(__)?myft\\/api\\//.test(url) || /^\\/(__)?myft\\/product-tour/.test(url) || /^\\/(__)?myft\\/list/.test(url) || isLegacyUrl(url) || isPersonalisedUrl(url)\n\t\t);\n\t};\n\n/***/ },\n/* 218 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function (path) {\n\t\treturn (/\\/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/.test(path)\n\t\t);\n\t};\n\n/***/ },\n/* 219 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (path) {\n\t  return (/^\\/myft\\/(my-news|my-topics|preferences)/.test(path)\n\t  );\n\t};\n\n/***/ },\n/* 220 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function (str) {\n\t  return (/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(str)\n\t  );\n\t};\n\n/***/ },\n/* 221 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _toConsumableArray2 = __webpack_require__(156);\n\t\n\tvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\texports.init = init;\n\texports.updateUi = updateUi;\n\texports.personaliseLinks = personaliseLinks;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t//TODO: refactor the massive out of this\n\t\n\tvar nextButtons = __webpack_require__(222);\n\tvar nNotification = __webpack_require__(223);\n\tvar Overlay = __webpack_require__(227);\n\tvar myftClient = __webpack_require__(198);\n\tvar Delegate = __webpack_require__(110);\n\t\n\tvar delegate = new Delegate(document.body);\n\tvar grabUrlHashWithPrefix = __webpack_require__(236);\n\tvar followEmail = __webpack_require__(237);\n\tvar uuid = __webpack_require__(75).uuid;\n\tvar $$ = __webpack_require__(75).$$;\n\t\n\tvar subscribeUrl = '/products?segID=400863&segmentID=190b4443-dc03-bd53-e79b-b4b6fbd04e64';\n\tvar signInLink = '/login';\n\t\n\tvar flags = void 0;\n\tvar results = {};\n\tvar initialised = void 0;\n\tvar collectionPending = false;\n\t\n\tvar types = {\n\t\tsaved: 'content',\n\t\tfollowed: 'concept',\n\t\tpreferred: 'preference',\n\t\tcontained: 'content'\n\t};\n\t\n\tvar actors = {\n\t\tsaved: 'user',\n\t\tfollowed: 'user',\n\t\tpreferred: 'user',\n\t\tcontained: 'list'\n\t};\n\t\n\tvar uiSelectors = {\n\t\tsaved: '[data-myft-ui=\"saved\"]',\n\t\tfollowed: '[data-myft-ui=\"follow\"]',\n\t\tpreferred: '[data-myft-ui=\"prefer\"]',\n\t\tcontained: '[data-myft-ui=\"contained\"]'\n\t};\n\t\n\tvar idProperties = {\n\t\tsaved: 'data-content-id',\n\t\tfollowed: 'data-concept-id',\n\t\tpreferred: 'data-preference-name',\n\t\tcontained: 'data-content-id'\n\t};\n\t\n\tvar nNotificationMsgs = {\n\t\tfollowAnon: 'Please <a href=\"' + subscribeUrl + '\" data-trackable=\"Subscribe\">subscribe</a> or <a href=\"' + signInLink + '\" data-trackable=\"Sign In\">sign in</a> to follow this topic.',\n\t\tsaveAnon: 'Please <a href=\"' + subscribeUrl + '\" data-trackable=\"Subscribe\">subscribe</a> or <a href=\"' + signInLink + '\" data-trackable=\"Sign In\">sign in</a> to save this article.',\n\t\topted: 'You‘ve opted into our new site. You can return to FT.com at any time.'\n\t};\n\t\n\tfunction myFtFeatureFromEvent(ev) {\n\t\treturn ev.type.replace('myft.', '').split('.')[1];\n\t}\n\t\n\tfunction actionFromEvent(ev) {\n\t\tvar eventType = ev.type.split('.');\n\t\treturn eventType[eventType.length - 1];\n\t}\n\t\n\tfunction getUuid(item) {\n\t\treturn item.UUID || item.uuid;\n\t}\n\t\n\tfunction toggleButton(buttonEl, state) {\n\t\tvar isPressed = buttonEl.getAttribute('aria-pressed') === 'true';\n\t\n\t\tif (state !== isPressed) {\n\t\t\tnextButtons.toggleState(buttonEl);\n\t\t}\n\t\tbuttonEl.removeAttribute('disabled');\n\t}\n\t\n\tfunction updateUiForFeature(opts) {\n\t\tif (!uiSelectors[opts.myftFeature]) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar featureForms = $$(uiSelectors[opts.myftFeature], opts.context);\n\t\tvar idProperty = idProperties[opts.myftFeature];\n\t\tvar uuids = opts.subjects.map(getUuid);\n\t\n\t\t// if there are multiple buttons, use the button with the same value as the rel property\n\t\t// if there are no multiple buttons, use opts.state\n\t\tfeatureForms.forEach(function (form) {\n\t\t\tvar index = uuids.indexOf(form.getAttribute(idProperty));\n\t\t\tif (index > -1) {\n\t\t\t\tvar _ret = function () {\n\t\t\t\t\tvar relBtns = form.querySelectorAll('button[name^=\"_rel.\"]');\n\t\t\t\t\tvar hasRelBtns = relBtns.length > 0;\n\t\t\t\t\tvar activeMultiButton = void 0;\n\t\n\t\t\t\t\t// if the form has _rel.foo buttons, but there is no _rel.foo in the subject object nor an 'off' ('delete') button, then go to next iteration\n\t\t\t\t\t// this is for when 1 item is changed on a page with > 1 form, and the returned rel object only has a property for the changed item\n\t\t\t\t\tif (hasRelBtns) {\n\t\t\t\t\t\tactiveMultiButton = getActiveMultiButton(relBtns, form, opts.subjects[index]);\n\t\t\t\t\t\tif (!activeMultiButton) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tv: void 0\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\t$$('button', form).forEach(function (button) {\n\t\t\t\t\t\tvar newButtonState = hasRelBtns ? button === activeMultiButton : opts.state;\n\t\t\t\t\t\ttoggleButton(button, newButtonState);\n\t\t\t\t\t});\n\t\n\t\t\t\t\t// add a BEM modifier for on/off-only styling of the form (e.g. show RSS link if RSS pref is on)\n\t\t\t\t\tform.classList.toggle('myft-ui--' + opts.myftFeature + '-on', !!opts.state);\n\t\t\t\t}();\n\t\n\t\t\t\tif ((typeof _ret === 'undefined' ? 'undefined' : (0, _typeof3.default)(_ret)) === \"object\") return _ret.v;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tfunction getActiveMultiButton(relBtns, form, subject) {\n\t\tvar relName = relBtns[0].getAttribute('name').replace('_rel.', '');\n\t\tvar relValue = subject._rel && subject._rel[relName];\n\t\t// can remove delete button part once old myft alerts page is retired\n\t\tvar activeButton = form.querySelector('button[value=\"' + (relValue || 'delete') + '\"]');\n\t\treturn activeButton;\n\t}\n\t\n\tfunction openOverlay(html, _ref) {\n\t\tvar _ref$name = _ref.name;\n\t\tvar name = _ref$name === undefined ? 'myft-ui' : _ref$name;\n\t\tvar _ref$title = _ref.title;\n\t\tvar title = _ref$title === undefined ? '&nbsp;' : _ref$title;\n\t\tvar _ref$shaded = _ref.shaded;\n\t\tvar shaded = _ref$shaded === undefined ? true : _ref$shaded;\n\t\n\t\tvar overlay = new Overlay(name, {\n\t\t\theading: { title: title, shaded: shaded },\n\t\t\thtml: html\n\t\t});\n\t\n\t\toverlay.open();\n\t\n\t\treturn new Promise(function (resolve) {\n\t\t\tdocument.body.addEventListener('oOverlay.ready', function () {\n\t\t\t\treturn resolve(overlay);\n\t\t\t});\n\t\t});\n\t}\n\t\n\tfunction setUpSaveToExistingListListeners(overlay, contentId) {\n\t\n\t\tvar saveToExistingListButton = overlay.content.querySelector('.js-save-to-existing-list');\n\t\tvar listSelect = overlay.content.querySelector('.js-list-select');\n\t\n\t\tif (saveToExistingListButton) {\n\t\t\tsaveToExistingListButton.addEventListener('click', function (ev) {\n\t\t\t\tev.preventDefault();\n\t\n\t\t\t\tif (!listSelect.value) {\n\t\t\t\t\tvar nameFormGroup = overlay.content.querySelector('.js-uuid-group');\n\t\t\t\t\tnameFormGroup.className += ' o-forms--error n-myft-ui__error--no-name';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar listId = listSelect.options[listSelect.selectedIndex].value;\n\t\t\t\tmyftClient.add('list', listId, 'contained', 'content', contentId).then(function (detail) {\n\t\t\t\t\tupdateAfterIO('contained', detail);\n\t\t\t\t\toverlay.close();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\t\n\tfunction setUpNewListListeners(overlay, contentId) {\n\t\n\t\tvar createListButton = overlay.content.querySelector('.js-create-list');\n\t\tvar nameInput = overlay.content.querySelector('.js-name');\n\t\tvar descriptionInput = overlay.content.querySelector('.js-description');\n\t\n\t\tcreateListButton.addEventListener('click', function (ev) {\n\t\t\tev.preventDefault();\n\t\n\t\t\tif (!nameInput.value) {\n\t\t\t\tvar nameFormGroup = overlay.content.querySelector('.js-name-group');\n\t\t\t\tnameFormGroup.className += ' o-forms--error n-myft-ui__error--no-name';\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tvar createListData = {\n\t\t\t\tname: nameInput.value,\n\t\t\t\tdescription: descriptionInput.value\n\t\t\t};\n\t\n\t\t\tmyftClient.add('user', null, 'created', 'list', uuid(), createListData).then(function (detail) {\n\t\t\t\tif (contentId) {\n\t\t\t\t\treturn myftClient.add('list', detail.subject, 'contained', 'content', contentId);\n\t\t\t\t} else {\n\t\t\t\t\treturn detail;\n\t\t\t\t}\n\t\t\t}).then(function (detail) {\n\t\t\t\tif (contentId) {\n\t\t\t\t\tupdateAfterIO('contained', detail);\n\t\t\t\t}\n\t\t\t\toverlay.close();\n\t\t\t}).catch(function (err) {\n\t\n\t\t\t\t// TODO: this should use some formalised system for handling generic errors (context: https://github.com/Financial-Times/next-myft-ui/pull/65)\n\t\t\t\tnNotification.show({\n\t\t\t\t\tcontent: contentId ? 'Error adding article to new list' : 'Error creating new list',\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\tthrow err;\n\t\t\t});\n\t\t});\n\t}\n\t\n\tfunction showListsOverlay(overlayTitle, formHtmlUrl, contentId) {\n\t\n\t\tmyftClient.personaliseUrl(formHtmlUrl).then(function (url) {\n\t\t\treturn fetch(url, {\n\t\t\t\tcredentials: 'same-origin'\n\t\t\t});\n\t\t}).then(function (res) {\n\t\t\treturn res.text();\n\t\t}).then(function (html) {\n\t\t\treturn openOverlay(html, { title: overlayTitle });\n\t\t}).then(function (overlay) {\n\t\t\tsetUpSaveToExistingListListeners(overlay, contentId);\n\t\t\tsetUpNewListListeners(overlay, contentId);\n\t\t});\n\t}\n\t\n\tfunction showCopyToListOverlay(contentId, excludeList) {\n\t\tshowListsOverlay('Copy to list', '/myft/list?fragment=true&copy=true&contentId=' + contentId + '&excludeList=' + excludeList, contentId);\n\t}\n\t\n\tfunction showArticleSavedOverlay(contentId, fromClippings) {\n\t\tshowListsOverlay('Article saved', '/myft/list?fragment=true&fromArticleSaved=true&contentId=' + contentId + (fromClippings && '&fromClippings=true'), contentId);\n\t}\n\t\n\tfunction showCreateListOverlay() {\n\t\tshowListsOverlay('Create list', '/myft/list?fragment=true');\n\t}\n\t\n\tfunction getMessage(relationship, detail, href) {\n\t\tdetail.data = detail.data || {};\n\t\n\t\tvar messages = {\n\t\t\tfollowed: '<a href=\"/myft\" class=\"myft-ui__logo\" data-trackable=\"myft-logo\"><abbr title=\"myFT\" class=\"myft-ui__icon\"></abbr></a>\\n\\t\\t\\t' + (detail.results ? 'You are following' : 'You unfollowed') + ' <b>' + detail.data.name + '</b>.\\n\\t\\t\\t<a href=\"' + href + '\" data-trackable=\"alerts\">Manage topics</a>',\n\t\t\tsaved: '<a href=\"/myft\" class=\"myft-ui__logo\" data-trackable=\"myft-logo\"><abbr title=\"myFT\" class=\"myft-ui__icon\"></abbr></a>\\n\\t\\t\\t' + (detail.results ? 'Article added to your' : 'Article removed from your') + '\\n\\t\\t\\t<a href=\"' + href + '\" data-trackable=\"saved-cta\">saved articles</a>',\n\t\t\tcontained: '<a href=\"/myft\" class=\"myft-ui__logo\" data-trackable=\"myft-logo\"><abbr title=\"myFT\" class=\"myft-ui__icon\"></abbr></a>\\n\\t\\t\\t' + (detail.results ? 'Article added to your list.\\n\\t\\t\\t<a href=\"' + href + '\" data-trackable=\"alerts\">View list</a>' : 'Article removed from your list')\n\t\t};\n\t\n\t\treturn messages.hasOwnProperty(relationship) ? messages[relationship] : '';\n\t}\n\t\n\tfunction getPersonaliseUrlPromise(page, relationship, detail) {\n\t\treturn myftClient.personaliseUrl('/myft/' + page).then(function (personalisedUrl) {\n\t\t\treturn {\n\t\t\t\ttype: 'default',\n\t\t\t\tmessage: getMessage(relationship, detail, personalisedUrl)\n\t\t\t};\n\t\t});\n\t}\n\t\n\tfunction updateAfterIO(myftFeature, detail, action) {\n\t\n\t\tupdateUiForFeature({\n\t\t\tmyftFeature: myftFeature,\n\t\t\tsubjects: [{ uuid: detail.subject, '_rel': detail.data && detail.data._rel }],\n\t\t\tstate: !!detail.results\n\t\t});\n\t\n\t\tvar messagePromise = Promise.resolve({});\n\t\n\t\tswitch (myftFeature) {\n\t\t\tcase 'followed':\n\t\t\t\tif (flags.get('myFtFollowEmail') && detail.results && !collectionPending && action !== 'update') {\n\t\n\t\t\t\t\tif (!followEmail.prefs.subscribedToDigest && !followEmail.prefs.userDismissed && detail.data.name) {\n\t\n\t\t\t\t\t\treturn myftClient.personaliseUrl('/myft/api/onsite/follow-email/form?fragment=true&name=' + encodeURIComponent(detail.data.name)).then(function (url) {\n\t\t\t\t\t\t\treturn fetch(url, { credentials: 'same-origin' });\n\t\t\t\t\t\t}).then(function (res) {\n\t\t\t\t\t\t\treturn res.text();\n\t\t\t\t\t\t}).then(function (html) {\n\t\t\t\t\t\t\treturn openOverlay(html, {\n\t\t\t\t\t\t\t\tname: 'myft-follow',\n\t\t\t\t\t\t\t\tshaded: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).then(function (overlay) {\n\t\t\t\t\t\t\treturn followEmail.setUpOverlayListeners(overlay);\n\t\t\t\t\t\t}).catch(function () {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'saved':\n\t\t\t\tif (flags.get('myftLists') && detail.results) {\n\t\t\t\t\tmessagePromise = myftClient.getAll('created', 'list').then(function (createdLists) {\n\t\t\t\t\t\treturn createdLists.filter(function (list) {\n\t\t\t\t\t\t\treturn !list.isRedirect;\n\t\t\t\t\t\t});\n\t\t\t\t\t}).then(function (createdLists) {\n\t\t\t\t\t\tif (createdLists.length) {\n\t\t\t\t\t\t\tshowArticleSavedOverlay(detail.subject);\n\t\t\t\t\t\t\treturn { message: null };\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {};\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'contained':\n\t\t\t\tmessagePromise = getPersonaliseUrlPromise('list/' + detail.actorId, 'contained', detail);\n\t\t\t\tbreak;\n\t\t\tcase 'preferred':\n\t\t\t\t//FIXME: remove this and make myFtClient.loaded update after client-side changes\n\t\t\t\tif (detail.subject === 'email-digest') {\n\t\t\t\t\tfollowEmail.prefs.subscribedToDigest = true;\n\t\t\t\t} else if (detail.subject === 'follow-email-dismissed') {\n\t\t\t\t\tfollowEmail.prefs.userDismissed = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\n\t\tmessagePromise.then(function (_ref2) {\n\t\t\tvar _ref2$message = _ref2.message;\n\t\t\tvar message = _ref2$message === undefined ? null : _ref2$message;\n\t\t\tvar _ref2$type = _ref2.type;\n\t\t\tvar type = _ref2$type === undefined ? null : _ref2$type;\n\t\n\t\t\tif (!message) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnNotification.show({\n\t\t\t\tcontent: message,\n\t\t\t\ttype: type,\n\t\t\t\ttrackable: 'myft-feedback-notification'\n\t\t\t});\n\t\t});\n\t}\n\t\n\tfunction onLoad(ev) {\n\t\tvar myftFeature = myFtFeatureFromEvent(ev);\n\t\tresults[myftFeature] = ev.detail.Items || ev.detail.items || [];\n\t\n\t\t//FIXME: remove this and make myFtClient.loaded update after client-side changes\n\t\tif (myftFeature === 'preferred') {\n\t\t\tfollowEmail.setInitialPrefs();\n\t\t}\n\t\n\t\tupdateUiForFeature({\n\t\t\tmyftFeature: myftFeature,\n\t\t\tsubjects: results[myftFeature],\n\t\t\tstate: true\n\t\t});\n\t}\n\t\n\t// extract properties with _rel. prefix into nested object, as expected by the API for relationship props\n\tfunction extractMetaData(inputs) {\n\t\tvar meta = {};\n\t\n\t\tinputs.forEach(function (input) {\n\t\t\tif (input.name.startsWith('_rel.')) {\n\t\t\t\tvar key = input.name.slice('_rel.'.length);\n\t\t\t\tmeta._rel = meta._rel || {};\n\t\t\t\tmeta._rel[key] = input.value;\n\t\t\t} else if (input.type === 'hidden') {\n\t\t\t\tmeta[input.name] = input.value;\n\t\t\t}\n\t\t});\n\t\n\t\treturn meta;\n\t}\n\t\n\tfunction getInteractionHandler(myftFeature) {\n\t\treturn function (ev, el) {\n\t\t\tev.preventDefault();\n\t\n\t\t\tvar buttonWithValTriggered = !!(el.tagName.toLowerCase() === 'button' && el.name && el.value);\n\t\t\tvar activeButton = buttonWithValTriggered ? el : el.querySelector('button');\n\t\t\tvar form = buttonWithValTriggered ? el.closest('form') : el;\n\t\t\tvar formButtons = buttonWithValTriggered ? $$('button', form) : [activeButton];\n\t\n\t\t\tif (formButtons.some(function (button) {\n\t\t\t\treturn button.hasAttribute('disabled');\n\t\t\t})) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tformButtons.forEach(function (button) {\n\t\t\t\treturn button.setAttribute('disabled', '');\n\t\t\t});\n\t\n\t\t\tvar isPressed = activeButton.getAttribute('aria-pressed') === 'true';\n\t\n\t\t\tvar action = void 0;\n\t\t\tif (buttonWithValTriggered) {\n\t\t\t\taction = activeButton.value === 'delete' ? 'remove' : 'add';\n\t\t\t} else {\n\t\t\t\taction = isPressed ? 'remove' : 'add';\n\t\t\t}\n\t\n\t\t\tvar id = form.getAttribute(idProperties[myftFeature]);\n\t\t\tvar type = types[myftFeature];\n\t\t\tvar hiddenFields = $$('input[type=\"hidden\"]', form);\n\t\t\tvar metaFields = buttonWithValTriggered ? [activeButton].concat((0, _toConsumableArray3.default)(hiddenFields)) : hiddenFields;\n\t\n\t\t\tvar meta = extractMetaData(metaFields);\n\t\n\t\t\tif (~['add', 'remove'].indexOf(action)) {\n\t\t\t\t(function () {\n\t\t\t\t\tvar actorId = form.getAttribute('data-actor-id');\n\t\n\t\t\t\t\tif (type === 'concept') {\n\t\t\t\t\t\t(function () {\n\t\t\t\t\t\t\tvar conceptIds = id.split(',');\n\t\t\t\t\t\t\tvar taxonomies = meta.taxonomy.split(',');\n\t\t\t\t\t\t\tvar names = meta.name.split(',');\n\t\n\t\t\t\t\t\t\t// Prevents the email overlay from triggering if there are bulk follow actions\n\t\t\t\t\t\t\tif (conceptIds.length > 1) {\n\t\t\t\t\t\t\t\tcollectionPending = true;\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\tvar followPromises = conceptIds.map(function (conceptId, i) {\n\t\t\t\t\t\t\t\tvar singleMeta = Object.assign({}, meta, {\n\t\t\t\t\t\t\t\t\tname: names[i],\n\t\t\t\t\t\t\t\t\ttaxonomy: taxonomies[i]\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn myftClient[action](actors[myftFeature], actorId, myftFeature, type, conceptId, singleMeta);\n\t\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\t\tPromise.all(followPromises).then(function () {\n\t\t\t\t\t\t\t\treturn toggleButton(activeButton, action === 'add');\n\t\t\t\t\t\t\t}).catch(function () {}).then(function () {\n\t\t\t\t\t\t\t\treturn collectionPending = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmyftClient[action](actors[myftFeature], actorId, myftFeature, type, id, meta);\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t} else {\n\t\t\t\tmyftClient[action](myftFeature, type, id, meta);\n\t\t\t}\n\t\t};\n\t}\n\t\n\tfunction init(opts) {\n\t\tif (initialised) {\n\t\t\treturn;\n\t\t}\n\t\tinitialised = true;\n\t\tflags = opts.flags;\n\t\n\t\tgrabUrlHashWithPrefix('myft:notification:').then(function (messageKey) {\n\t\t\tif (!messageKey || !nNotificationMsgs.hasOwnProperty(messageKey)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnNotification.show({\n\t\t\t\tcontent: nNotificationMsgs[messageKey],\n\t\t\t\ttype: 'clippings',\n\t\t\t\tduration: 0\n\t\t\t});\n\t\t});\n\t\n\t\tgrabUrlHashWithPrefix('myft:list-overlay:').then(function (messageKey) {\n\t\t\tif (messageKey === 'clippings') {\n\t\t\t\tvar matches = window.location.pathname.match(/^\\/content\\/([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/);\n\t\t\t\tif (matches && matches.length) {\n\t\t\t\t\tshowArticleSavedOverlay(matches[1], true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\tif (opts && opts.anonymous) {\n\t\t\t['follow', 'save'].forEach(function (action) {\n\t\t\t\tdelegate.on('submit', '.n-myft-ui--' + action, function (ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tnNotification.show({\n\t\t\t\t\t\tcontent: nNotificationMsgs[action + 'Anon'],\n\t\t\t\t\t\ttrackable: 'myft-anon'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tpersonaliseLinks();\n\t\n\t\t\tObject.keys(uiSelectors).forEach(function (myftFeature) {\n\t\t\t\tif (myftClient.loaded['myftFeature.' + types[myftFeature]]) {\n\t\t\t\t\tresults[myftFeature] = myftClient.loaded['myftFeature.' + types[myftFeature]];\n\t\n\t\t\t\t\tupdateUiForFeature({\n\t\t\t\t\t\tmyftFeature: myftFeature,\n\t\t\t\t\t\tsubjects: results[myftFeature],\n\t\t\t\t\t\tstate: true\n\t\t\t\t\t});\n\t\n\t\t\t\t\t//FIXME: remove this and make myFtClient.loaded update after client-side changes\n\t\t\t\t\tif (myftFeature === 'preferred') {\n\t\t\t\t\t\tfollowEmail.setInitialPrefs();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdocument.body.addEventListener('myft.user.' + myftFeature + '.' + types[myftFeature] + '.load', onLoad);\n\t\t\t\t}\n\t\n\t\t\t\tdocument.body.addEventListener('myft.' + actors[myftFeature] + '.' + myftFeature + '.' + types[myftFeature] + '.add', function (ev) {\n\t\t\t\t\treturn updateAfterIO(myFtFeatureFromEvent(ev), ev.detail, actionFromEvent(ev));\n\t\t\t\t});\n\t\t\t\tdocument.body.addEventListener('myft.' + actors[myftFeature] + '.' + myftFeature + '.' + types[myftFeature] + '.remove', function (ev) {\n\t\t\t\t\treturn updateAfterIO(myFtFeatureFromEvent(ev), ev.detail, actionFromEvent(ev));\n\t\t\t\t});\n\t\t\t\tdocument.body.addEventListener('myft.' + actors[myftFeature] + '.' + myftFeature + '.' + types[myftFeature] + '.update', function (ev) {\n\t\t\t\t\treturn updateAfterIO(myFtFeatureFromEvent(ev), ev.detail, actionFromEvent(ev));\n\t\t\t\t});\n\t\n\t\t\t\tdelegate.on('submit', uiSelectors[myftFeature], getInteractionHandler(myftFeature));\n\t\t\t});\n\t\n\t\t\tdelegate.on('click', '.n-myft-ui--prefer-group button', getInteractionHandler('preferred'));\n\t\n\t\t\t//copy from list to list\n\t\t\tdelegate.on('click', '[data-myft-ui=\"copy-to-list\"]', function (ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tshowCopyToListOverlay(ev.target.getAttribute('data-content-id'), ev.target.getAttribute('data-actor-id'));\n\t\t\t});\n\t\n\t\t\tdelegate.on('click', '[data-myft-ui=\"create-list\"]', function (ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tshowCreateListOverlay();\n\t\t\t});\n\t\t}\n\t}\n\t\n\tfunction updateUi(el, ignoreLinks) {\n\t\tif (!ignoreLinks) {\n\t\t\tpersonaliseLinks(el);\n\t\t}\n\t\n\t\tObject.keys(uiSelectors).forEach(function (myftFeature) {\n\t\t\tif (!results[myftFeature]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tupdateUiForFeature({\n\t\t\t\tmyftFeature: myftFeature,\n\t\t\t\tsubjects: results[myftFeature],\n\t\t\t\tstate: true,\n\t\t\t\tcontext: el\n\t\t\t});\n\t\t});\n\t}\n\t\n\tfunction personaliseLinks(el) {\n\t\tvar links = el && el.nodeName === 'A' ? [el] : $$('a[href^=\"/myft\"]', el);\n\t\tlinks.forEach(function (link) {\n\t\t\tmyftClient.personaliseUrl(link.getAttribute('href')).then(function (personalisedUrl) {\n\t\t\t\treturn link.setAttribute('href', personalisedUrl);\n\t\t\t});\n\t\t});\n\t}\n\n/***/ },\n/* 222 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\ttoggleState: function toggleState(btn, alreadyToggled) {\n\t\n\t\t\tvar ariaLabel = btn.getAttribute('aria-label');\n\t\t\tvar alternateAriaLabel = btn.getAttribute('data-alternate-label');\n\t\n\t\t\tif (ariaLabel) {\n\t\t\t\tbtn.setAttribute('aria-label', alternateAriaLabel);\n\t\t\t\tbtn.setAttribute('title', alternateAriaLabel);\n\t\t\t\tbtn.setAttribute('data-alternate-label', ariaLabel);\n\t\t\t}\n\t\t\tvar text = btn.textContent || btn.innerText;\n\t\n\t\t\tif (text) {\n\t\t\t\tvar alternateText = btn.getAttribute('data-alternate-text') || alternateAriaLabel;\n\t\t\t\tbtn.textContent = alternateText;\n\t\t\t\tbtn.setAttribute('data-alternate-text', text);\n\t\t\t}\n\t\n\t\t\tvar isPressed = btn.getAttribute('aria-pressed') === 'true';\n\t\n\t\t\tif (!alreadyToggled) {\n\t\t\t\tbtn.setAttribute('aria-pressed', !isPressed);\n\t\t\t}\n\t\n\t\t\tbtn.dispatchEvent(new CustomEvent('nButtons.stateChange', {\n\t\t\t\tdetail: {\n\t\t\t\t\tstate: isPressed\n\t\t\t\t},\n\t\t\t\tbubbles: true\n\t\t\t}));\n\t\n\t\t\treturn btn;\n\t\t}\n\t};\n\n/***/ },\n/* 223 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(224);\n\n/***/ },\n/* 224 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(225);\n\n/***/ },\n/* 225 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar template = __webpack_require__(226);\n\tvar timeoutDuration = 5000;\n\t\n\tvar stack = [];\n\tvar eventShow = function eventShow(e) {\n\t\treturn show(e.detail);\n\t};\n\tvar isInstantiated = false;\n\tvar container = void 0;\n\t\n\tvar Notice = function () {\n\t\tfunction Notice(options) {\n\t\t\t(0, _classCallCheck3.default)(this, Notice);\n\t\n\t\n\t\t\toptions.trackable = options.trackable || 'notification-' + options.type;\n\t\n\t\t\tthis.notice = document.createElement('div');\n\t\t\tthis.notice.appendChild(template(options));\n\t\t\tthis.notice.querySelector('button').onclick = this.hide.bind(this);\n\t\n\t\t\tvar firstChild = container.firstChild;\n\t\t\tcontainer.insertBefore(this.notice, firstChild);\n\t\n\t\t\tif (options.duration !== 0) {\n\t\t\t\tthis.timeout = setTimeout(this.hide.bind(this), options.duration || timeoutDuration);\n\t\t\t}\n\t\n\t\t\tthis.optionsContent = options.content;\n\t\t}\n\t\n\t\tNotice.prototype.hide = function hide() {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.notice.parentNode.removeChild(this.notice);\n\t\t\tvar index = stack.indexOf(this);\n\t\t\tif (index > -1) {\n\t\t\t\tstack.splice(index, 1);\n\t\t\t}\n\t\t\tthis.dispatchNotificationCloseEvent();\n\t\t};\n\t\n\t\tNotice.prototype.dispatchNotificationCloseEvent = function dispatchNotificationCloseEvent() {\n\t\t\tdocument.dispatchEvent(new CustomEvent('nNotification.close'));\n\t\t};\n\t\n\t\treturn Notice;\n\t}();\n\t\n\tfunction show(options) {\n\t\tif (!isInstantiated) {\n\t\t\tinit();\n\t\t}\n\t\tif (stack.length > 0 && stack[stack.length - 1].optionsContent === options.content) {\n\t\t\tvar lastNotice = stack[stack.length - 1];\n\t\t\tclearTimeout(lastNotice.timeout);\n\t\t\tlastNotice.timeout = setTimeout(lastNotice.hide.bind(lastNotice), timeoutDuration);\n\t\t} else {\n\t\t\tstack.push(new Notice(options));\n\t\t}\n\t}\n\t\n\tfunction init() {\n\t\tif (isInstantiated) return;\n\t\n\t\tcontainer = document.createElement('div');\n\t\tcontainer.className = 'n-notification';\n\t\tdocument.body.appendChild(container);\n\t\tdocument.addEventListener(\"nNotification.show\", eventShow, false);\n\t\tisInstantiated = true;\n\t}\n\t\n\tfunction teardown() {\n\t\tstack.forEach(function (item) {\n\t\t\treturn item.hide();\n\t\t});\n\t\tstack.length = 0;\n\t\tcontainer.parentNode.removeChild(container);\n\t\tdocument.removeEventListener(\"nNotification.show\", eventShow, false);\n\t\tisInstantiated = false;\n\t}\n\t\n\tmodule.exports = {\n\t\tinit: init,\n\t\tshow: show,\n\t\tteardown: teardown\n\t};\n\n/***/ },\n/* 226 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function (options) {\n\t\n\t\tvar noticeEl = document.createElement('div');\n\t\tnoticeEl.className = 'n-notification__item n-notification--' + (options.type ? options.type : 'default');\n\t\tnoticeEl.setAttribute(\"role\", \"alert\");\n\t\tnoticeEl.setAttribute(\"data-trackable\", options.trackable);\n\t\n\t\tvar contentWrapperEl = document.createElement('div');\n\t\tcontentWrapperEl.className = \"n-notification__content-wrapper\";\n\t\n\t\tif (options.title) {\n\t\t\tvar titleEl = document.createElement('h3');\n\t\t\ttitleEl.className = \"n-notification__title\";\n\t\t\ttitleEl.innerHTML = options.title;\n\t\t\tcontentWrapperEl.appendChild(titleEl);\n\t\t}\n\t\n\t\tif (options.content) {\n\t\t\tvar contentEl = document.createElement('div');\n\t\t\tcontentEl.className = \"n-notification__content\";\n\t\t\tcontentEl.innerHTML = options.content;\n\t\t\tcontentWrapperEl.appendChild(contentEl);\n\t\t}\n\t\n\t\tvar buttonEl = document.createElement('button');\n\t\tbuttonEl.className = \"n-notification__close\";\n\t\tbuttonEl.setAttribute(\"data-trackable\", \"close\");\n\t\tbuttonEl.innerHTML = \"Close\";\n\t\n\t\tnoticeEl.appendChild(contentWrapperEl);\n\t\tnoticeEl.appendChild(buttonEl);\n\t\n\t\treturn noticeEl;\n\t};\n\n/***/ },\n/* 227 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(228);\n\tmodule.exports.__wrapsOrigami = true;\n\n/***/ },\n/* 228 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(229);\n\n/***/ },\n/* 229 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar oOverlay = __webpack_require__(230);\n\tvar constructAll = function constructAll() {\n\t\toOverlay.init();\n\t\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n\t};\n\t\n\tdocument.addEventListener('o.DOMContentLoaded', constructAll);\n\tmodule.exports = oOverlay;\n\n/***/ },\n/* 230 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Delegate = __webpack_require__(110);\n\tvar viewport = __webpack_require__(99);\n\tvar oLayers = __webpack_require__(231);\n\tvar utils = __webpack_require__(235);\n\tvar overlays = {};\n\t\n\tvar checkOptions = function checkOptions(opts) {\n\t\tif (opts.trigger && !(opts.trigger instanceof HTMLElement)) {\n\t\t\topts.trigger = document.querySelector(opts.trigger);\n\t\t}\n\t\n\t\t// There can't be a heading with an empty title\n\t\tif (opts.heading && (!opts.heading.title || !opts.heading.title.trim())) {\n\t\t\tthrow new Error('\"o-overlay error\": To have a heading, a non-empty title needs to be set');\n\t\t}\n\t\n\t\t// Overlays that don't point at anything should be modal by default\n\t\tif (!opts.arrow && typeof opts.modal === 'undefined') {\n\t\t\topts.modal = true;\n\t\t}\n\t\n\t\tif (opts.compact && opts.heading && opts.heading.shaded) {\n\t\t\tthrow new Error('\"o-overlay error\": Compact overlays can\\'t have a shaded header');\n\t\t}\n\t\n\t\tif (opts.arrow) {\n\t\t\t// Default arrow position is 'left'\n\t\t\tif (!opts.arrow.position) {\n\t\t\t\topts.arrow.position = 'left';\n\t\t\t}\n\t\n\t\t\t// Overlays with arrows can not be modal\n\t\t\tif (opts.modal) {\n\t\t\t\topts.modal = false;\n\t\t\t}\n\t\n\t\t\tif (opts.arrow.position !== 'left' && opts.arrow.position !== 'right' && opts.arrow.position !== 'top' && opts.arrow.position !== 'bottom') {\n\t\t\t\tthrow new Error('\"o-overlay error\": The position of the arrow has to be either \"top\", \"bottom\", \"left\" or \"right\".');\n\t\t\t}\n\t\n\t\t\t// If the position of the arrow is 'top' or 'bottom', the heading can't be shaded\n\t\t\tif ((opts.arrow.position === 'top' || opts.arrow.position === 'bottom') && opts.heading && opts.heading.shaded) {\n\t\t\t\tthrow new Error('\"o-overlay error\": The position of the arrow can\\'t be set to \"top\" or \"bottom\" when the shaded heading option is set to true.');\n\t\t\t}\n\t\n\t\t\t// Default target for the arrow will be the trigger\n\t\t\tif (!opts.arrow.target) {\n\t\t\t\tif (opts.trigger) {\n\t\t\t\t\topts.arrow.target = opts.trigger;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('\"o-overlay error\": For overlays with arrows, if you don\\'t set a trigger, you do need to set a target for the overlay.');\n\t\t\t\t}\n\t\t\t} else if (!(opts.arrow.target instanceof HTMLElement)) {\n\t\t\t\topts.arrow.target = document.querySelector(opts.arrow.target);\n\t\t\t}\n\t\t}\n\t\n\t\treturn opts;\n\t};\n\t\n\tvar getOptionsFromTrigger = function getOptionsFromTrigger(trigger) {\n\t\tvar opts = {};\n\t\t// Get config from data attributes set in the trigger if they haven't been passed via JS\n\t\tif (trigger instanceof HTMLElement) {\n\t\t\tArray.prototype.forEach.call(trigger.attributes, function (attr) {\n\t\t\t\tif (attr.name.indexOf('data-o-overlay') === 0) {\n\t\t\t\t\t// Remove the unnecessary part of the string the first time this is run for each attribute\n\t\t\t\t\tvar key = attr.name.replace('data-o-overlay-', '');\n\t\t\t\t\topts = utils.optionsFromKey(key, attr.value, opts);\n\t\t\t\t}\n\t\t\t});\n\t\t\topts.trigger = trigger;\n\t\t}\n\t\treturn opts;\n\t};\n\t\n\tvar triggerClickHandler = function triggerClickHandler(id, ev) {\n\t\tev.stopPropagation();\n\t\tvar overlay = overlays[id];\n\t\tif (overlay) {\n\t\t\tif (overlay.visible === true) {\n\t\t\t\toverlay.close();\n\t\t\t} else {\n\t\t\t\toverlay.open();\n\t\t\t}\n\t\t}\n\t};\n\t\n\tvar Overlay = function Overlay(id, opts) {\n\t\tviewport.listenTo('resize');\n\t\tthis.visible = false;\n\t\tthis.id = id;\n\t\n\t\ttry {\n\t\t\tthis.opts = checkOptions(opts);\n\t\t} catch (e) {\n\t\t\tthis.broadcast('log', 'oErrors', {\n\t\t\t\terror: e\n\t\t\t});\n\t\t\tthrow e;\n\t\t}\n\t\n\t\tif (!this.opts) {\n\t\t\tvar noOptError = new Error('\"o-overlay error\": Required options have not been set');\n\t\t\tthis.broadcast('log', 'oErrors', {\n\t\t\t\terror: noOptError\n\t\t\t});\n\t\t\tthrow noOptError;\n\t\t}\n\t\tif (this.opts.trigger) {\n\t\t\tthis.opts.trigger.addEventListener('click', triggerClickHandler.bind(this.opts.trigger, id), false);\n\t\t\tthis.context = this.opts.arrow ? oLayers.getLayerContext(this.opts.arrow.target) : oLayers.getLayerContext(this.opts.trigger);\n\t\t} else {\n\t\t\tthis.context = this.opts.arrow ? oLayers.getLayerContext(this.opts.arrow.target) : document.body;\n\t\t}\n\t\n\t\tthis.delegates = {\n\t\t\tdoc: new Delegate(),\n\t\t\twrap: new Delegate(),\n\t\t\tcontext: new Delegate()\n\t\t};\n\t\n\t\t// Add this overlay to the overlays hashmap\n\t\toverlays[id] = this;\n\t};\n\t\n\tOverlay.prototype.open = function () {\n\t\tvar _this = this;\n\t\n\t\tif (this.opts.trigger) {\n\t\t\tthis.opts.trigger.setAttribute('aria-pressed', 'true');\n\t\t}\n\t\n\t\tif (!this.content) {\n\t\t\t(function () {\n\t\t\t\tvar overlay = _this;\n\t\t\t\t_this.loadContent(function (html) {\n\t\t\t\t\toverlay.opts.html = html;\n\t\t\t\t\tif (!overlay.opts.html) {\n\t\t\t\t\t\tthrow new Error('\"o-overlay error\": Content for the overlay needs to be set via the \"html\" or the \"src\" option.');\n\t\t\t\t\t}\n\t\t\t\t\toverlay.render();\n\t\t\t\t});\n\t\t\t})();\n\t\t} else {\n\t\t\tthis.show();\n\t\t}\n\t};\n\t\n\tOverlay.prototype.loadContent = function (callback) {\n\t\tif (!this.opts.html && this.opts.src) {\n\t\t\tif (/^(https?\\:\\/)?\\//.test(this.opts.src)) {\n\t\t\t\tutils.copyContentFromUrl(this.opts.src, function (html) {\n\t\t\t\t\tcallback(html);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tutils.copyContentFromElement(document.querySelector(this.opts.src), function (html) {\n\t\t\t\t\tcallback(html);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tcallback(this.opts.html);\n\t\t}\n\t};\n\t\n\tOverlay.prototype.render = function () {\n\t\tvar wrapperEl = document.createElement('div');\n\t\twrapperEl.className = 'o-overlay';\n\t\twrapperEl.classList.add('o-overlay--' + this.id.replace(' ', '-'));\n\t\twrapperEl.setAttribute('role', 'dialog');\n\t\tif (this.opts.zindex) {\n\t\t\twrapperEl.style.zIndex = this.opts.zindex;\n\t\t}\n\t\tthis.wrapper = wrapperEl;\n\t\n\t\tif (this.opts.heading) {\n\t\t\tvar heading = document.createElement('header');\n\t\t\tvar headingId = this.opts.heading.title.replace(' ', '-').toLowerCase();\n\t\t\theading.classList.add('o-overlay__heading');\n\t\t\theading.setAttribute('id', headingId);\n\t\t\twrapperEl.setAttribute('aria-labelledby', headingId);\n\t\n\t\t\tif (this.opts.heading.shaded) {\n\t\t\t\theading.classList.add('o-overlay__heading--shaded');\n\t\t\t}\n\t\n\t\t\tvar button = document.createElement('a');\n\t\t\tbutton.className = 'o-overlay__close';\n\t\t\tbutton.setAttribute('role', 'button');\n\t\t\tbutton.setAttribute('tabindex', '0');\n\t\t\tbutton.setAttribute('href', '#void');\n\t\t\tbutton.setAttribute('aria-label', 'Close');\n\t\t\tbutton.setAttribute('title', 'Close');\n\t\n\t\t\tvar title = document.createElement('span');\n\t\t\ttitle.setAttribute('role', 'heading');\n\t\t\ttitle.className = 'o-overlay__title';\n\t\t\ttitle.innerHTML = this.opts.heading.title;\n\t\n\t\t\theading.appendChild(button);\n\t\t\theading.appendChild(title);\n\t\t\twrapperEl.appendChild(heading);\n\t\t}\n\t\n\t\tvar content = document.createElement('section');\n\t\tcontent.className = 'o-overlay__content';\n\t\twrapperEl.appendChild(content);\n\t\n\t\tthis.content = content;\n\t\n\t\tif (this.opts.compact) {\n\t\t\twrapperEl.classList.add('o-overlay--compact');\n\t\t}\n\t\n\t\tthis.show();\n\t};\n\t\n\tOverlay.prototype.show = function () {\n\t\tif (this.opts.modal) {\n\t\t\tthis.wrapper.classList.add('o-overlay--modal');\n\t\t\tvar shadow = document.createElement('div');\n\t\t\tshadow.className = 'o-overlay-shadow';\n\t\t\tthis.shadow = shadow;\n\t\t\tdocument.body.appendChild(shadow);\n\t\t}\n\t\n\t\tthis.delegates.doc.root(document.body);\n\t\tthis.delegates.wrap.root(this.wrapper);\n\t\tthis.delegates.context.root(this.context);\n\t\n\t\tthis.closeHandler = this.close.bind(this);\n\t\tthis.resizeListenerHandler = this.resizeListener.bind(this);\n\t\tthis.delegates.doc.on('oViewport.resize', 'body', this.resizeListenerHandler);\n\t\tthis.closeOnNewLayerHandler = this.closeOnNewLayer.bind(this);\n\t\tthis.delegates.context.on('oLayers.new', this.closeOnNewLayerHandler);\n\t\n\t\tif (this.opts.heading) {\n\t\t\tthis.delegates.wrap.on('click', '.o-overlay__close', this.closeHandler);\n\t\t\tthis.delegates.wrap.on('touchend', '.o-overlay__close', this.closeHandler);\n\t\t}\n\t\n\t\tthis.closeOnExternalClickHandler = this.closeOnExternalClick.bind(this);\n\t\tthis.delegates.doc.on('click', 'body', this.closeOnExternalClickHandler);\n\t\tthis.delegates.doc.on('touchend', 'body', this.closeOnExternalClickHandler);\n\t\n\t\tthis.closeOnEscapePressHandler = this.closeOnEscapePress.bind(this);\n\t\tthis.delegates.doc.on('keyup', this.closeOnEscapePressHandler);\n\t\n\t\tthis.broadcast('new', 'oLayers');\n\t\tthis.context.appendChild(this.wrapper);\n\t\n\t\t// Give the overlay focus\n\t\tthis.wrapper.setAttribute('tabindex', '0');\n\t\tthis.wrapper.style.outline = 0;\n\t\n\t\t// Renders content after overlay has been added so css is applied before that\n\t\t// Thay way if an element has autofocus, the window won't scroll to the bottom\n\t\t// in Safari as the overlay is already in position\n\t\tvar overlay = this;\n\t\twindow.requestAnimationFrame(function () {\n\t\t\tif (!overlay.content.innerHTML) {\n\t\t\t\t// overlay.respondToWindow(viewport.getSize());\n\t\t\t\tif (typeof overlay.opts.html === 'string') {\n\t\t\t\t\toverlay.content.innerHTML = overlay.opts.html;\n\t\t\t\t} else {\n\t\t\t\t\toverlay.content.appendChild(overlay.opts.html);\n\t\t\t\t}\n\t\t\t}\n\t\t\toverlay.width = overlay.getWidth();\n\t\t\toverlay.height = overlay.getHeight();\n\t\t\toverlay.respondToWindow(viewport.getSize());\n\t\t\toverlay.visible = true;\n\t\t\toverlay.wrapper.focus();\n\t\t\toverlay.broadcast('ready');\n\t\n\t\t\t// Add o-tracking integration\n\t\t\toverlay.broadcast('event', 'oTracking', {\n\t\t\t\tcategory: 'overlay',\n\t\t\t\taction: 'show',\n\t\t\t\toverlay_id: overlay.id\n\t\t\t});\n\t\t});\n\t};\n\t\n\tOverlay.prototype.close = function () {\n\t\tthis.delegates.doc.destroy();\n\t\tthis.delegates.wrap.destroy();\n\t\tthis.delegates.context.destroy();\n\t\n\t\tviewport.stopListeningTo('resize');\n\t\n\t\tthis.broadcast('destroy');\n\t\tthis.broadcast('event', 'oTracking', {\n\t\t\tcategory: 'overlay',\n\t\t\taction: 'close',\n\t\t\toverlay_id: this.id\n\t\t});\n\t\n\t\tthis.context.removeChild(this.wrapper);\n\t\tif (this.opts.modal) {\n\t\t\tthis.shadow.parentNode.removeChild(this.shadow);\n\t\t}\n\t\n\t\t// Put focus back on the triggering element\n\t\tif (this.opts.trigger) {\n\t\t\tthis.opts.trigger.focus();\n\t\t\tthis.opts.trigger.setAttribute('aria-pressed', 'false');\n\t\t}\n\t\tthis.visible = false;\n\t\tthis.broadcast('close', 'oLayers');\n\t\treturn false;\n\t};\n\t\n\tOverlay.prototype.closeOnExternalClick = function (ev) {\n\t\tif (!this.wrapper.contains(ev.target) && !this.opts.modal && this.opts.trigger && !this.opts.trigger.contains(ev.target)) {\n\t\t\tthis.close();\n\t\t}\n\t};\n\t\n\tOverlay.prototype.closeOnEscapePress = function (ev) {\n\t\tif (ev.keyCode === 27) {\n\t\t\tthis.close();\n\t\t}\n\t};\n\t\n\tOverlay.prototype.closeOnNewLayer = function (ev) {\n\t\tif (!ev.detail || ev.detail.el !== this) {\n\t\t\tthis.close();\n\t\t}\n\t};\n\t\n\tOverlay.prototype.resizeListener = function (ev) {\n\t\tif (!this.wrapper.contains(ev.target)) {\n\t\t\tthis.respondToWindow(ev.detail.viewport);\n\t\t}\n\t};\n\t\n\tOverlay.prototype.broadcast = function (eventType, namespace, detail) {\n\t\tnamespace = namespace || 'oOverlay';\n\t\tvar target = namespace === 'oLayers' ? this.context : this.wrapper || document.body;\n\t\n\t\tdetail = detail || {};\n\t\n\t\tif (namespace !== 'oTracking') {\n\t\t\tdetail.el = this;\n\t\t}\n\t\n\t\ttarget.dispatchEvent(new CustomEvent(namespace + '.' + eventType, {\n\t\t\tdetail: detail,\n\t\t\t// Don't bubble above the overlay's layer context otherwise we risk triggering a listener on a parent context\n\t\t\tbubbles: namespace !== 'oLayers' ? true : false\n\t\t}));\n\t};\n\t\n\tOverlay.prototype.realign = function (dimension, size) {\n\t\tvar edge = dimension === 'width' ? 'left' : 'top';\n\t\n\t\tif (size <= this[dimension]) {\n\t\t\tthis.wrapper.classList.add('o-overlay--full-' + dimension);\n\t\t\tthis.wrapper.style[edge] = '0';\n\t\t\tthis.wrapper.style['margin' + utils.capitalise(edge)] = 0;\n\t\t\tif (dimension === 'height') {\n\t\t\t\t// Set the exact height that the content of the overlay will have which is the total\n\t\t\t\t// height of the overlay minus the heading if there is one. If height = 100%, the\n\t\t\t\t// heading is part of that 100%, so some content is truncated.\n\t\t\t\tvar borderHeight = this.wrapper.offsetHeight - this.wrapper.clientHeight;\n\t\t\t\tthis.content.style.height = this.wrapper.offsetHeight - (this.opts.heading ? this.wrapper.querySelector('header').offsetHeight : 0) - borderHeight + 'px';\n\t\t\t}\n\t\t} else {\n\t\t\tif (dimension === 'height') {\n\t\t\t\t// Remove the property and let the overlay extend to its content\n\t\t\t\tthis.content.style.height = null;\n\t\t\t}\n\t\t\tthis.wrapper.classList.remove('o-overlay--full-' + dimension);\n\t\t\tif (!this.opts.arrow) {\n\t\t\t\tthis.wrapper.style['margin' + utils.capitalise(edge)] = -(this.wrapper['offset' + utils.capitalise(dimension)] / 2) + 'px';\n\t\t\t}\n\t\t\t// Set alignment in JavaScript (not via CSS) after all other styles have been applied\n\t\t\t// so that browsers compute it properly. If it's applied earlier, when the negative\n\t\t\t// margin is calculated, the overlay might not fit, so it shrinks and the negative\n\t\t\t// margin would be incorrect\n\t\t\tthis.wrapper.style[edge] = '50%';\n\t\t}\n\t};\n\t\n\tOverlay.prototype.respondToWindow = function (size) {\n\t\tthis.realign('width', size.width);\n\t\tthis.realign('height', size.height);\n\t\n\t\tthis.wrapper.classList.remove('o-overlay__arrow-top');\n\t\tthis.wrapper.classList.remove('o-overlay__arrow-bottom');\n\t\tthis.wrapper.classList.remove('o-overlay__arrow-left');\n\t\tthis.wrapper.classList.remove('o-overlay__arrow-right');\n\t\n\t\tif (this.opts.arrow && !this.fills()) {\n\t\t\tthis.opts.arrow.currentposition = this.getCurrentArrowPosition(this.opts.arrow.position);\n\t\t\tthis.wrapper.classList.add('o-overlay__arrow-' + this.opts.arrow.currentposition);\n\t\n\t\t\tvar edge = this.opts.arrow.currentposition === 'left' || this.opts.arrow.currentposition === 'right' ? 'left' : 'top';\n\t\t\tvar oppositeEdge = this.opts.arrow.currentposition === 'left' || this.opts.arrow.currentposition === 'right' ? 'top' : 'left';\n\t\t\tvar dimension = this.opts.arrow.currentposition === 'left' || this.opts.arrow.currentposition === 'right' ? 'height' : 'width';\n\t\n\t\t\tvar offset = 0;\n\t\t\t// Protrusion distance for the arrow. It's 13 due to the border around it\n\t\t\tvar arrowSize = 13;\n\t\t\tvar targetClientRect = utils.getOffsetRect(this.opts.arrow.target);\n\t\t\tvar dimensionValue = targetClientRect[dimension];\n\t\t\tswitch (this.opts.arrow.currentposition) {\n\t\t\t\tcase 'left':\n\t\t\t\t\toffset = targetClientRect.left + targetClientRect.width + arrowSize;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\toffset = targetClientRect.left - this.width - arrowSize;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top':\n\t\t\t\t\toffset = targetClientRect.top + targetClientRect.height + arrowSize;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom':\n\t\t\t\t\toffset = targetClientRect.top - this.height - arrowSize;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\n\t\t\tthis.wrapper.style[edge] = offset + 'px';\n\t\t\t// 1. Get where the element is positioned\n\t\t\t// 2. Add its width or height divided by two to get its center\n\t\t\t// 3. Substract the width or height divided by two of the overlay so the arrow, which is in the center, points to the center of the side of the target\n\t\t\tthis.wrapper.style[oppositeEdge] = targetClientRect[oppositeEdge] + dimensionValue / 2 - this[dimension] / 2 + 'px';\n\t\t}\n\t};\n\t\n\tOverlay.prototype.getCurrentArrowPosition = function (position) {\n\t\tvar targetClientRect = this.opts.arrow.target.getBoundingClientRect();\n\t\t// Protrusion distance for the arrow. It's 13 due to the border around it\n\t\tvar arrowSize = 13;\n\t\tvar wrapperWidth = this.wrapper.getBoundingClientRect().width + arrowSize;\n\t\tvar wrapperHeight = this.wrapper.getBoundingClientRect().height + arrowSize;\n\t\t// Check if the overlay won't fit on the side set in the options and that it will on the opposite side.\n\t\t// In that case, use the opposite side\n\t\tswitch (this.opts.arrow.position) {\n\t\t\tcase 'left':\n\t\t\t\tif (targetClientRect.right + wrapperWidth >= window.innerWidth && targetClientRect.left - wrapperWidth > 0) {\n\t\n\t\t\t\t\tposition = 'right';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tif (targetClientRect.left - wrapperWidth <= 0 && targetClientRect.right + wrapperWidth < window.innerWidth) {\n\t\n\t\t\t\t\tposition = 'left';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'top':\n\t\t\t\tif (targetClientRect.bottom + wrapperHeight >= window.innerHeight && targetClientRect.top - wrapperHeight + arrowSize > 0) {\n\t\n\t\t\t\t\tposition = 'bottom';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'bottom':\n\t\t\t\tif (targetClientRect.top - wrapperHeight <= 0 && targetClientRect.bottom + wrapperHeight < window.innerHeight) {\n\t\n\t\t\t\t\tposition = 'top';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn position;\n\t};\n\t\n\tOverlay.prototype.fills = function (dimension) {\n\t\treturn this.wrapper.classList.contains('o-overlay--full-' + dimension);\n\t};\n\t\n\tOverlay.prototype.destroy = function () {\n\t\tif (this.visible === true) {\n\t\t\tthis.close();\n\t\t}\n\t\tif (this.opts.trigger) {\n\t\t\tthis.opts.trigger.removeEventListener('click', triggerClickHandler);\n\t\t}\n\t\tdelete overlays[this.id];\n\t};\n\t\n\tOverlay.prototype.getHeight = function () {\n\t\tvar borderHeight = this.wrapper.offsetHeight - this.wrapper.clientHeight;\n\t\treturn this.content.scrollHeight + (this.opts.heading ? this.wrapper.querySelector('header').offsetHeight : 0) + borderHeight;\n\t};\n\t\n\tOverlay.prototype.getWidth = function () {\n\t\tvar borderWidth = this.wrapper.offsetWidth - this.wrapper.clientWidth;\n\t\treturn this.content.scrollWidth + borderWidth;\n\t};\n\t\n\tOverlay.init = function (el) {\n\t\tif (!el) {\n\t\t\tel = document.body;\n\t\t}\n\t\tif (!(el instanceof HTMLElement)) {\n\t\t\tel = document.querySelector(el);\n\t\t}\n\t\tvar triggers = el.querySelectorAll('.o-overlay-trigger');\n\t\tvar overlaysArray = [];\n\t\tfor (var t = 0; t < triggers.length; t++) {\n\t\t\t// There can only be one overlay per trigger when set declaratively, so the first trigger found for a given overlay will be the one used to create the overlay\n\t\t\tif (!overlays[triggers[t].getAttribute('data-o-overlay-id')]) {\n\t\t\t\toverlaysArray.push(new Overlay(triggers[t].getAttribute('data-o-overlay-id'), getOptionsFromTrigger(triggers[t])));\n\t\t\t}\n\t\t}\n\t\n\t\treturn overlaysArray;\n\t};\n\t\n\tOverlay.destroy = function () {\n\t\tvar overlayIds = Object.keys(overlays);\n\t\toverlayIds.forEach(function (id) {\n\t\t\toverlays[id].destroy();\n\t\t});\n\t};\n\t\n\tOverlay.getOverlays = function () {\n\t\treturn overlays;\n\t};\n\t\n\tmodule.exports = Overlay;\n\n/***/ },\n/* 231 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(232);\n\n/***/ },\n/* 232 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar dom = __webpack_require__(233);\n\t\n\tmodule.exports = {\n\t\tgetLayerContext: function getLayerContext(el) {\n\t\t\treturn dom.getClosestMatch(el, '.o-layers__context') || document.body;\n\t\t}\n\t};\n\n/***/ },\n/* 233 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(234);\n\n/***/ },\n/* 234 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global exports*/\n\t'use strict';\n\t\n\tvar _typeof2 = __webpack_require__(6);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getClosestMatch(el, selector) {\n\t\twhile (el) {\n\t\t\tif (el.matches(selector)) {\n\t\t\t\treturn el;\n\t\t\t} else {\n\t\t\t\tel = el.parentElement;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\t\n\tfunction getIndex(el) {\n\t\tvar i = 0;\n\t\tif (el && (typeof el === 'undefined' ? 'undefined' : (0, _typeof3.default)(el)) === 'object' && el.nodeType === 1) {\n\t\t\twhile (el.previousSibling) {\n\t\t\t\tel = el.previousSibling;\n\t\t\t\tif (el.nodeType === 1) {\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn i;\n\t\t}\n\t}\n\t\n\texports.getClosestMatch = getClosestMatch;\n\texports.getIndex = getIndex;\n\n/***/ },\n/* 235 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\tunCapitalise: function unCapitalise(str) {\n\t\t\treturn str.charAt(0).toLowerCase() + str.substr(1);\n\t\t},\n\t\n\t\tcapitalise: function capitalise(str) {\n\t\t\treturn str.charAt(0).toUpperCase() + str.substr(1);\n\t\t},\n\t\n\t\tcopyContentFromElement: function copyContentFromElement(content, callback) {\n\t\t\tvar html = content.nodeName === 'SCRIPT' ? content.innerHTML : content.outerHTML;\n\t\t\tcallback(html);\n\t\t},\n\t\n\t\tcopyContentFromUrl: function copyContentFromUrl(url, callback) {\n\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\txhr.open('GET', url, true);\n\t\t\txhr.onload = function () {\n\t\t\t\t// eslint complains of e not being used\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\t\tcallback(xhr.responseText);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback('Content failed to load correctly');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr.onerror = function (e) {\n\t\t\t\tthrow new Error('\"o-overlay error\": Fetching content from ' + url + ' failed with errror ' + e);\n\t\t\t};\n\t\n\t\t\txhr.send(null);\n\t\t},\n\t\n\t\toptionsFromKey: function optionsFromKey(key, value, opts) {\n\t\t\tvar dashIndex = key.indexOf('-');\n\t\t\tif (dashIndex === -1) {\n\t\t\t\ttry {\n\t\t\t\t\t// If it's a JSON, a boolean or a number, we want it stored like that, and not as a string\n\t\t\t\t\t// We also replace all ' with \" so JSON strings are parsed correctly\n\t\t\t\t\topts[key] = JSON.parse(value.replace(/\\'/g, '\"'));\n\t\t\t\t} catch (e) {\n\t\t\t\t\topts[key] = value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Key that holds an object instead of a value\n\t\t\t\tvar subKey = key.substr(0, dashIndex);\n\t\n\t\t\t\t// If sub-object doesn't exist already, create it\n\t\t\t\tif (!opts[subKey]) {\n\t\t\t\t\topts[subKey] = {};\n\t\t\t\t}\n\t\n\t\t\t\t// Run function again starting with the rest of the key\n\t\t\t\topts[subKey] = this.optionsFromKey(key.substr(dashIndex + 1), value, opts[subKey]);\n\t\t\t}\n\t\n\t\t\treturn opts;\n\t\t},\n\t\n\t\t// Code based on this article to get coordinates independent of scroll: http://javascript.info/tutorial/coordinates\n\t\tgetOffsetRect: function getOffsetRect(e) {\n\t\t\tvar eClientRect = e.getBoundingClientRect();\n\t\n\t\t\tvar body = document.body;\n\t\t\tvar docElem = document.documentElement;\n\t\n\t\t\t// docElem.scrollTop/Left for IE, use body as a last resort\n\t\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n\t\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\t\n\t\t\t// IE sometimes shifts the upper left corner\n\t\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\n\t\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\t\n\t\t\treturn {\n\t\t\t\t// IE8 doesn't support getBoundingClientRect().height and .weight\n\t\t\t\twidth: eClientRect.width || eClientRect.right - eClientRect.left,\n\t\t\t\theight: eClientRect.height || eClientRect.bottom - eClientRect.top,\n\t\t\t\ttop: eClientRect.top + scrollTop - clientTop,\n\t\t\t\tleft: eClientRect.left + scrollLeft - clientLeft\n\t\t\t};\n\t\t}\n\t};\n\n/***/ },\n/* 236 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar initialized = false;\n\tvar supportsHistory = void 0;\n\t\n\tfunction removeHash() {\n\t\tvar loc = window.location;\n\t\tvar body = document.body;\n\t\tvar scrollV = void 0;\n\t\tvar scrollH = void 0;\n\t\n\t\tif (supportsHistory) history.replaceState('', document.title, loc.pathname + loc.search);else {\n\t\t\t// flicker-free solution for <=IE9\n\t\t\tscrollV = body.scrollTop;\n\t\t\tscrollH = body.scrollLeft;\n\t\t\tloc.hash = '';\n\t\t\tbody.scrollTop = scrollV;\n\t\t\tbody.scrollLeft = scrollH;\n\t\t}\n\t}\n\t\n\tmodule.exports = function (hashPrefix) {\n\t\tif (!initialized) {\n\t\t\tsupportsHistory = window.history && 'replaceState' in history;\n\t\t}\n\t\tinitialized = true;\n\t\n\t\tvar hash = location.hash.substring(1);\n\t\tvar startsWithPrefix = hash && hash.indexOf(hashPrefix) === 0;\n\t\tvar messageKey = hash.substring(hashPrefix.length);\n\t\n\t\tif (startsWithPrefix) {\n\t\t\tremoveHash();\n\t\t\treturn Promise.resolve(messageKey);\n\t\t} else {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t};\n\n/***/ },\n/* 237 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar require;'use strict';\n\t\n\tvar _toConsumableArray2 = __webpack_require__(156);\n\t\n\tvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/*** IMPORTS FROM imports-loader ***/\n\tvar requireText = require;\n\t\n\tvar _myFtClient = __webpack_require__(198);\n\tvar _setFollowPreferences = __webpack_require__(238);\n\t\n\t//TODO: clean up on overlay close\n\t\n\tvar _overlayForm = void 0;\n\t\n\t//FIXME: remove this and make myFtClient.loaded update after client-side changes\n\tvar prefs = {\n\t\tsubscribedToDigest: null,\n\t\tuserDismissed: null\n\t};\n\t\n\tfunction setInitialPrefs() {\n\t\tvar allLoadedPrefs = _myFtClient.loaded['preferred.preference'].items;\n\t\n\t\tprefs.subscribedToDigest = allLoadedPrefs.find(function (pref) {\n\t\t\treturn pref.uuid === 'email-digest';\n\t\t});\n\t\tprefs.userDismissed = allLoadedPrefs.find(function (pref) {\n\t\t\treturn pref.uuid === 'follow-email-dismissed';\n\t\t});\n\t}\n\t\n\tfunction _overlayFormHandler(ev, overlay) {\n\t\tev.preventDefault();\n\t\t// Default for users who hit enter\n\t\tvar method = 'put';\n\t\n\t\tif (ev.currentTarget.tagName.toLowerCase() === 'button') {\n\t\t\tmethod = ev.currentTarget.value;\n\t\t}\n\t\n\t\t_setFollowPreferences(_myFtClient.userId, method, _overlayForm['follow-email-dismissed'].checked).catch(function () {\n\t\t\treturn null;\n\t\t}).then(function () {\n\t\t\treturn overlay.close();\n\t\t});\n\t}\n\t\n\tfunction setUpOverlayListeners(overlay) {\n\t\t_overlayForm = overlay ? overlay.content.querySelector('.js-follow-email-form') : null;\n\t\n\t\tif (!_overlayForm) {\n\t\t\treturn;\n\t\t}\n\t\n\t\t_overlayForm.addEventListener('submit', function (ev) {\n\t\t\t_overlayFormHandler(ev, overlay);\n\t\t});\n\t\n\t\t[].concat((0, _toConsumableArray3.default)(_overlayForm.querySelectorAll('button'))).forEach(function (el) {\n\t\t\treturn el.addEventListener('click', function (ev) {\n\t\t\t\t_overlayFormHandler(ev, overlay);\n\t\t\t});\n\t\t});\n\t}\n\t\n\tmodule.exports = {\n\t\tprefs: prefs,\n\t\tsetInitialPrefs: setInitialPrefs,\n\t\tsetUpOverlayListeners: setUpOverlayListeners\n\t};\n\n/***/ },\n/* 238 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar myFtApi = __webpack_require__(198);\n\tvar relData = {\n\t\ttimezone: 'Europe/London',\n\t\ttype: 'daily'\n\t};\n\t\n\tfunction addPref(uuid, userId, rel) {\n\t\tvar data = {};\n\t\n\t\tif (rel) {\n\t\t\tdata._rel = rel;\n\t\t}\n\t\n\t\t//TODO: align client/server-side methods in client\n\t\tif (typeof myFtApi.addRelationship === 'function') {\n\t\t\treturn myFtApi.addRelationship('user', userId, 'preferred', 'preference', Object.assign({}, data, { uuid: uuid }));\n\t\t} else {\n\t\t\treturn myFtApi.add('user', userId, 'preferred', 'preference', uuid, data);\n\t\t}\n\t}\n\t\n\tmodule.exports = function (userId, method, userDismissed) {\n\t\tvar emailPrefPromise = Promise.resolve();\n\t\tvar dismissPrefPromise = Promise.resolve();\n\t\n\t\tif (method === 'put') {\n\t\t\temailPrefPromise = addPref('email-digest', userId, relData);\n\t\t}\n\t\n\t\tif (userDismissed) {\n\t\t\tdismissPrefPromise = addPref('follow-email-dismissed', userId);\n\t\t}\n\t\n\t\treturn Promise.all([emailPrefPromise, dismissPrefPromise]);\n\t};\n\n/***/ },\n/* 239 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.init = init;\n\t/*\n\t* ui for instant alerts buttons\n\t* ui.js has become so complex that we are splitting instant alerts into its own file until it gets refactored\n\t*/\n\t\n\tvar nextButtons = __webpack_require__(222);\n\tvar nNotification = __webpack_require__(223);\n\tvar Delegate = __webpack_require__(110);\n\tvar myftClient = __webpack_require__(198);\n\t\n\tvar delegate = new Delegate(document.body);\n\tvar $ = __webpack_require__(75).$;\n\tvar $$ = __webpack_require__(75).$$;\n\tvar subscribeUrl = '/products?segID=400863&segmentID=190b4443-dc03-bd53-e79b-b4b6fbd04e64';\n\tvar signInLink = '/login';\n\t\n\tvar UI_HOOK = '[data-myft-ui=\"instant\"]';\n\tvar config = void 0;\n\t\n\t// until API is updated to return modelled response data from create calls, fallback to old raw format\n\tfunction apiBackwardsCompatibility(response) {\n\t\treturn response._rel ? response._rel.instant : response.results[0].rel.properties.instant;\n\t}\n\t\n\tfunction updateConceptData(subjectId, data) {\n\t\tmyftClient.updateRelationship('user', null, 'followed', 'concept', subjectId, data);\n\t}\n\t\n\tfunction toggleButton(buttonEl, state) {\n\t\tvar isPressed = buttonEl.getAttribute('aria-pressed') === 'true';\n\t\n\t\tif (state !== isPressed) {\n\t\t\tnextButtons.toggleState(buttonEl);\n\t\t}\n\t\tbuttonEl.removeAttribute('disabled');\n\t\tbuttonEl.setAttribute('value', !state);\n\t}\n\t\n\tfunction updateButtons(subjectId, newState) {\n\t\tvar affectedButtons = $$(UI_HOOK + '[data-concept-id=\"' + subjectId + '\"] button');\n\t\taffectedButtons.forEach(function (button) {\n\t\t\ttoggleButton(button, newState);\n\t\t});\n\t}\n\t\n\tfunction conceptRemoved(conceptData) {\n\t\tupdateButtons(conceptData.subject, false);\n\t}\n\t\n\tfunction conceptUpdated(conceptData) {\n\t\tvar newState = apiBackwardsCompatibility(conceptData);\n\t\tupdateButtons(conceptData.subject, newState);\n\t}\n\t\n\tfunction showAnonNotification() {\n\t\tnNotification.show({\n\t\t\tcontent: 'Please <a href=\"' + subscribeUrl + '\" data-trackable=\"Subscribe\">subscribe</a> or <a href=\"' + signInLink + '\" data-trackable=\"Sign In\">sign in</a> to receive instant alerts.',\n\t\t\ttrackable: 'myft-anon'\n\t\t});\n\t}\n\t\n\tfunction extractMetaData(inputs) {\n\t\tvar meta = {};\n\t\n\t\tinputs.forEach(function (input) {\n\t\t\tif (input.name.startsWith('_rel.')) {\n\t\t\t\tvar key = input.name.slice('_rel.'.length);\n\t\t\t\tmeta._rel = meta._rel || {};\n\t\t\t\tmeta._rel[key] = input.value;\n\t\t\t} else if (input.type === 'hidden') {\n\t\t\t\tmeta[input.name] = input.value;\n\t\t\t}\n\t\t});\n\t\n\t\treturn meta;\n\t}\n\t\n\tfunction formSubmitted(event, element) {\n\t\tevent.preventDefault();\n\t\tif (config && config.anonymous) {\n\t\t\tshowAnonNotification();\n\t\t} else {\n\t\t\tvar subjectId = element.getAttribute('data-concept-id');\n\t\t\tvar submitEl = $('button', element);\n\t\t\tvar inputs = $$('input', element);\n\t\t\tinputs.push(submitEl);\n\t\t\tupdateConceptData(subjectId, extractMetaData(inputs));\n\t\t}\n\t}\n\t\n\t// update UI to show real state of instant alerts\n\t// until we have ESI, we cannot do this server-side as it could cache the wrong state\n\tfunction applyModel() {\n\t\tif (myftClient.loaded && myftClient.loaded['followed.concept']) {\n\t\t\tmyftClient.loaded['followed.concept'].items.forEach(function (item) {\n\t\t\t\tif (item._rel.instant) {\n\t\t\t\t\tupdateButtons(item.uuid, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tfunction eventListeners() {\n\t\tdocument.body.addEventListener('myft.user.followed.concept.load', applyModel);\n\t\tdocument.body.addEventListener('myft.user.followed.concept.remove', function (ev) {\n\t\t\treturn conceptRemoved(ev.detail);\n\t\t});\n\t\tdocument.body.addEventListener('myft.user.followed.concept.update', function (ev) {\n\t\t\treturn conceptUpdated(ev.detail);\n\t\t});\n\t\tdelegate.on('submit', '' + UI_HOOK, formSubmitted);\n\t}\n\t\n\t// delegate is listening to the whole body therefore events look for forms across the whole page rather than setting up instances\n\t// if we used instances we could reduce the amount of DOM queries that we do\n\tfunction init(opts) {\n\t\tvar instantAlertForms = $$(UI_HOOK);\n\t\tconfig = opts;\n\t\tif (instantAlertForms.length > 0) {\n\t\t\tapplyModel();\n\t\t\teventListeners();\n\t\t}\n\t}\n\n/***/ },\n/* 240 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _slicedToArray2 = __webpack_require__(241);\n\t\n\tvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar myFtClient = __webpack_require__(198);\n\tvar buttons = __webpack_require__(222);\n\tvar superstore = __webpack_require__(89);\n\tvar STORAGE_KEY = 'n-myft-digest-promo-seen';\n\t\n\tvar CLASSES = {\n\t\tctaBtn: '.n-myft-digest-promo__cta-btn',\n\t\tdismissBtn: '.n-myft-digest-promo__dismiss-btn',\n\t\tpromoComponent: '.n-myft-digest-promo',\n\t\tpromoEnabled: 'n-myft-digest-promo--enabled'\n\t};\n\t\n\tvar btn = void 0;\n\tvar element = void 0;\n\tvar conceptId = void 0;\n\t\n\tfunction bindListeners() {\n\t\tvar btn = document.querySelector(CLASSES.ctaBtn);\n\t\tvar dismissBtn = document.querySelector(CLASSES.dismissBtn);\n\t\n\t\tbtn.addEventListener('click', addToDigest, false);\n\t\tdismissBtn.addEventListener('click', function () {\n\t\t\thidePromo();\n\t\t\tsetDismissState();\n\t\t}, false);\n\t}\n\t\n\tfunction shouldShowPromo(conceptId) {\n\t\treturn Promise.all([myFtClient.get('followed', 'concept', conceptId), myFtClient.get('preferred', 'preference', 'email-digest')]).then(function (_ref) {\n\t\t\tvar _ref2 = (0, _slicedToArray3.default)(_ref, 2);\n\t\n\t\t\tvar follows = _ref2[0];\n\t\t\tvar prefers = _ref2[1];\n\t\n\t\t\treturn follows.length === 0 && prefers.length === 0 && !getDismissState();\n\t\t});\n\t}\n\t\n\tfunction showPromo() {\n\t\telement = document.querySelector(CLASSES.promoComponent);\n\t\telement.classList.add(CLASSES.promoEnabled);\n\t}\n\t\n\tfunction hidePromo() {\n\t\telement = document.querySelector(CLASSES.promoComponent);\n\t\telement.classList.remove(CLASSES.promoEnabled);\n\t}\n\t\n\tfunction getDismissState() {\n\t\treturn superstore.session.get(STORAGE_KEY);\n\t}\n\t\n\tfunction setDismissState() {\n\t\tsuperstore.session.set(STORAGE_KEY, 1);\n\t}\n\t\n\tfunction addToDigest() {\n\t\tvar metaConcept = {\n\t\t\tname: btn.getAttribute('data-title'),\n\t\t\ttaxonomy: btn.getAttribute('data-taxonomy')\n\t\t};\n\t\tvar metaEmail = {\n\t\t\t_rel: {\n\t\t\t\ttype: 'daily',\n\t\t\t\ttimezone: 'Europe/London'\n\t\t\t}\n\t\t};\n\t\n\t\treturn Promise.all([myFtClient.add('user', null, 'followed', 'concept', conceptId, metaConcept), myFtClient.add('user', null, 'preferred', 'preference', 'email-digest', metaEmail)]).then(function () {\n\t\t\tbuttons.toggleState(btn, true);\n\t\t\tbtn.setAttribute('disabled', true);\n\t\t});\n\t}\n\t\n\tfunction init() {\n\t\telement = document.querySelector(CLASSES.promoComponent);\n\t\tif (!superstore.isPersisting() || !element) {\n\t\t\treturn;\n\t\t}\n\t\tbtn = document.querySelector(CLASSES.ctaBtn);\n\t\tconceptId = btn.getAttribute('data-concept-id');\n\t\tshouldShowPromo(conceptId).then(function (shouldShow) {\n\t\t\tif (shouldShow) {\n\t\t\t\tshowPromo();\n\t\t\t\tbindListeners();\n\t\t\t}\n\t\t});\n\t};\n\t\n\tmodule.exports = { init: init };\n\n/***/ },\n/* 241 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _isIterable2 = __webpack_require__(242);\n\t\n\tvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\t\n\tvar _getIterator2 = __webpack_require__(245);\n\t\n\tvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function () {\n\t  function sliceIterator(arr, i) {\n\t    var _arr = [];\n\t    var _n = true;\n\t    var _d = false;\n\t    var _e = undefined;\n\t\n\t    try {\n\t      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t        _arr.push(_s.value);\n\t\n\t        if (i && _arr.length === i) break;\n\t      }\n\t    } catch (err) {\n\t      _d = true;\n\t      _e = err;\n\t    } finally {\n\t      try {\n\t        if (!_n && _i[\"return\"]) _i[\"return\"]();\n\t      } finally {\n\t        if (_d) throw _e;\n\t      }\n\t    }\n\t\n\t    return _arr;\n\t  }\n\t\n\t  return function (arr, i) {\n\t    if (Array.isArray(arr)) {\n\t      return arr;\n\t    } else if ((0, _isIterable3.default)(Object(arr))) {\n\t      return sliceIterator(arr, i);\n\t    } else {\n\t      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n\t    }\n\t  };\n\t}();\n\n/***/ },\n/* 242 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(243), __esModule: true };\n\n/***/ },\n/* 243 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(53);\n\t__webpack_require__(9);\n\tmodule.exports = __webpack_require__(244);\n\n/***/ },\n/* 244 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar classof   = __webpack_require__(164)\n\t  , ITERATOR  = __webpack_require__(50)('iterator')\n\t  , Iterators = __webpack_require__(32);\n\tmodule.exports = __webpack_require__(17).isIterable = function(it){\n\t  var O = Object(it);\n\t  return O[ITERATOR] !== undefined\n\t    || '@@iterator' in O\n\t    || Iterators.hasOwnProperty(classof(O));\n\t};\n\n/***/ },\n/* 245 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(246), __esModule: true };\n\n/***/ },\n/* 246 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(53);\n\t__webpack_require__(9);\n\tmodule.exports = __webpack_require__(247);\n\n/***/ },\n/* 247 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar anObject = __webpack_require__(22)\n\t  , get      = __webpack_require__(163);\n\tmodule.exports = __webpack_require__(17).getIterator = function(it){\n\t  var iterFn = get(it);\n\t  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n\t  return anObject(iterFn.call(it));\n\t};\n\n/***/ },\n/* 248 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(249);\n\n/***/ },\n/* 249 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.lazyLoad = undefined;\n\t\n\tvar _lazyLoad = __webpack_require__(250);\n\t\n\tvar _lazyLoad2 = _interopRequireDefault(_lazyLoad);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.lazyLoad = _lazyLoad2.default;\n\n/***/ },\n/* 250 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _toConsumableArray2 = __webpack_require__(156);\n\t\n\tvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar lazyLoadingModifier = 'lazy-loading';\n\tvar lazyLoadingImageClass = 'n-image--' + lazyLoadingModifier;\n\tvar lazyLoadingWrapperClass = 'n-image-wrapper--' + lazyLoadingModifier;\n\t\n\tvar imageHasLoaded = function imageHasLoaded(img) {\n\t\timg.classList.remove(lazyLoadingImageClass);\n\t\timg.parentNode.classList.remove(lazyLoadingWrapperClass);\n\t\timg.removeEventListener('load', imageHasLoaded);\n\t};\n\t\n\tvar loadImage = function loadImage(img) {\n\t\timg.addEventListener('load', function () {\n\t\t\t// NOTE: rather arbitrary, needed to get the fading to always work (possibly classes being removed to quickly)\n\t\t\tsetTimeout(imageHasLoaded.bind(null, img), 13);\n\t\t});\n\t\t// add the src/srcset attribtues back in\n\t\t[].concat((0, _toConsumableArray3.default)(img.attributes)).forEach(function (attr) {\n\t\t\tif (/^data-src(set)?$/.test(attr.name)) {\n\t\t\t\timg.setAttribute(attr.name.replace('data-', ''), attr.value);\n\t\t\t\timg.removeAttribute(attr.name);\n\t\t\t}\n\t\t});\n\t};\n\t\n\tvar intersectionCallback = function intersectionCallback(observer, changes) {\n\t\tchanges.forEach(function (change) {\n\t\t\tvar observedImg = change.target;\n\t\t\tloadImage(observedImg);\n\t\t\tobserver.unobserve(observedImg);\n\t\t});\n\t};\n\t\n\tvar observeIntersection = function observeIntersection(_ref, img) {\n\t\tvar observer = _ref.observer;\n\t\n\t\tif (observer) {\n\t\t\tobserver.observe(img);\n\t\t} else {\n\t\t\tloadImage(img);\n\t\t}\n\t\timg.setAttribute('data-n-image-lazy-load-js', '');\n\t};\n\t\n\t/**\n\t * @param {Object} [opts = {}]\n\t * @param {Element} [opts.root = document] - Where in the DOM to search for images\n\t */\n\t\n\texports.default = function () {\n\t\tvar _ref2 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t\tvar _ref2$root = _ref2.root;\n\t\tvar root = _ref2$root === undefined ? document : _ref2$root;\n\t\n\t\tvar observer = window.IntersectionObserver ? new IntersectionObserver(function (changes) {\n\t\t\tintersectionCallback(this, changes);\n\t\t}) : null;\n\t\t[].concat((0, _toConsumableArray3.default)(root.querySelectorAll('.' + lazyLoadingImageClass))).filter(function (img) {\n\t\t\treturn !img.hasAttribute('data-n-image-lazy-load-js');\n\t\t}).forEach(observeIntersection.bind(null, { observer: observer }));\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 251 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(252);\n\n/***/ },\n/* 252 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\tvar message = function message(msg) {\n\t\tif ('serviceWorker' in navigator) {\n\t\t\treturn navigator.serviceWorker.ready.then(function (registration) {\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t// Create a Message Channel\n\t\t\t\t\tvar messageChannel = new MessageChannel();\n\t\t\t\t\t// Handler for recieving message reply from service worker\n\t\t\t\t\tmessageChannel.port1.onmessage = function (ev) {\n\t\t\t\t\t\tif (ev.data.error) {\n\t\t\t\t\t\t\treject(ev.data.error);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(ev.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t// Send message to service worker along with port for reply\n\t\t\t\t\tregistration.active.postMessage(msg, [messageChannel.port2]);\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.reject('Service Worker unavailable');\n\t\t}\n\t};\n\t\n\tvar register = function register(flags) {\n\t\tif ('serviceWorker' in navigator && flags.get('serviceWorker')) {\n\t\t\tif (document.cookie.length > 4000) {\n\t\t\t\tconsole.warn('Cookie is greater than 4000 characters - unregistering service worker due to potential failure to retrieve updates');\n\t\t\t\treturn unregister();\n\t\t\t}\n\t\t\treturn navigator.serviceWorker.register('/__sw.js?cache-bust=1').then(function (registration) {\n\t\t\t\treturn passFlags(JSON.parse(JSON.stringify(flags))) // to avoid error caused by the getters\n\t\t\t\t.then(function () {\n\t\t\t\t\treturn registration;\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.reject('Service Worker unavailable, or serviceWorker flag off');\n\t\t}\n\t};\n\t\n\tvar unregister = function unregister() {\n\t\tif ('serviceWorker' in navigator) {\n\t\t\treturn navigator.serviceWorker.getRegistration().then(function (registration) {\n\t\t\t\treturn registration ? registration.unregister() : false;\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.resolve(false);\n\t\t}\n\t};\n\t\n\t// Make sure install barrier never gets shown\n\t// (at least while we consider the web app's role)\n\twindow.addEventListener('beforeinstallprompt', function (ev) {\n\t\tev.preventDefault();\n\t\treturn false;\n\t});\n\t\n\tfunction passFlags(flags) {\n\t\treturn message({\n\t\t\ttype: 'flagsUpdate',\n\t\t\tflags: flags\n\t\t});\n\t}\n\t\n\texports.register = register;\n\texports.unregister = unregister;\n\texports.message = message;\n\texports.passFlags = passFlags;\n\n/***/ },\n/* 253 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(254);\n\n/***/ },\n/* 254 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t// Dummy Symbol implementations purely to avoid babelified code\n\t// that expects these to be defined erroring\n\twindow.__BabelPolyfillSilencerSymbol = function () {\n\t\tconsole.warn('Symbol is not available in this browser yet. You may have a race condition with code reliant on Symbol executing before a polyfill has loaded');\n\t\treturn {};\n\t};\n\twindow.__BabelPolyfillSilencerSymbol.iterator = {};\n\n/***/ },\n/* 255 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(256);\n\tmodule.exports.__wrapsOrigami = true;\n\n/***/ },\n/* 256 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(257);\n\n/***/ },\n/* 257 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar viewport = __webpack_require__(99);\n\t\n\tvar rootClassName = 'o-expander';\n\tvar count = 0;\n\t\n\tvar expandMethods = {\n\t\ttoggleContent: function toggleContent(state) {\n\t\t\tif (state === 'expand') {\n\t\t\t\tthis.contentEl.classList.add(this.contentClassName + '--expanded');\n\t\t\t\tthis.contentEl.classList.remove(this.contentClassName + '--collapsed');\n\t\t\t} else {\n\t\t\t\tthis.contentEl.classList.remove(this.contentClassName + '--expanded');\n\t\t\t\tthis.contentEl.classList.add(this.contentClassName + '--collapsed');\n\t\t\t}\n\t\t},\n\t\thasStateDefined: function hasStateDefined() {\n\t\t\treturn this.contentEl.classList.contains(this.contentClassName + '--expanded') || this.contentEl.classList.contains(this.contentClassName + '--collapsed');\n\t\t},\n\t\tisRequired: function isRequired() {\n\t\t\tvar overflows = false;\n\t\t\tif (typeof this.opts.shrinkTo === 'number') {\n\t\t\t\tif (this.el.querySelectorAll(this.opts.countSelector).length > this.opts.shrinkTo) {\n\t\t\t\t\toverflows = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.isCollapsed()) {\n\t\t\t\t\toverflows = this.contentEl.clientHeight < this.contentEl.scrollHeight;\n\t\t\t\t} else {\n\t\t\t\t\tthis.collapse();\n\t\t\t\t\toverflows = this.contentEl.clientHeight < this.contentEl.scrollHeight;\n\t\t\t\t\tthis.expand();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn overflows;\n\t\t},\n\t\tisCollapsed: function isCollapsed() {\n\t\t\treturn !this.contentEl.classList.contains(this.contentClassName + '--expanded');\n\t\t}\n\t};\n\t\n\tvar hiderMethods = {\n\t\ttoggleContent: function toggleContent(state) {\n\t\t\tif (state === 'expand') {\n\t\t\t\tthis.contentEl.setAttribute('aria-hidden', 'false');\n\t\t\t} else {\n\t\t\t\tthis.contentEl.setAttribute('aria-hidden', 'true');\n\t\t\t}\n\t\t},\n\t\thasStateDefined: function hasStateDefined() {\n\t\t\treturn this.contentEl.hasAttribute('aria-hidden');\n\t\t},\n\t\tisRequired: function isRequired() {\n\t\t\treturn true;\n\t\t},\n\t\tisCollapsed: function isCollapsed() {\n\t\t\treturn this.contentEl.getAttribute('aria-hidden') === 'true';\n\t\t}\n\t};\n\t\n\tfunction mixin(target, methods) {\n\t\tObject.keys(methods).forEach(function (key) {\n\t\t\ttarget[key] = methods[key];\n\t\t});\n\t}\n\t\n\tvar Expander = function Expander(el, opts) {\n\t\tvar _this = this;\n\t\n\t\tthis.opts = opts || {};\n\t\tthis.el = el;\n\t\n\t\tthis.className = this.opts.className || rootClassName;\n\t\tthis.contentClassName = this.opts.contentClassName || rootClassName + '__content';\n\t\tthis.toggleClassName = this.opts.toggleClassName || rootClassName + '__toggle';\n\t\n\t\tthis.configure('shrinkTo', 'height');\n\t\tthis.configure('countSelector', '.' + this.contentClassName + ' > li');\n\t\tthis.configure('expandedToggleText', this.opts.shrinkTo === 'hidden' ? 'hide' : this.opts.shrinkTo === 'height' ? 'less' : 'fewer');\n\t\tthis.configure('collapsedToggleText', this.opts.shrinkTo === 'hidden' ? 'show' : 'more');\n\t\tthis.configure('toggleSelector', 'button.' + this.toggleClassName);\n\t\tthis.configure('toggleState', 'all');\n\t\n\t\tif (/^\\d+$/.test(this.opts.shrinkTo)) {\n\t\t\tthis.opts.shrinkTo = +this.opts.shrinkTo;\n\t\t}\n\t\n\t\tif (this.opts.shrinkTo === 'hidden') {\n\t\t\tmixin(this, hiderMethods);\n\t\t} else {\n\t\t\tmixin(this, expandMethods);\n\t\t}\n\t\n\t\tif (typeof this.opts.shrinkTo === 'number' && !this.opts.countSelector) {\n\t\t\tthrow 'when collapsing to a number of items specify a selector to identify how many items exist';\n\t\t}\n\t\n\t\tthis.contentEl = this.el.querySelector('.' + this.contentClassName);\n\t\n\t\tthis.toggles = [].slice.apply(this.el.querySelectorAll(this.opts.toggleSelector));\n\t\n\t\tif (!this.toggles.length) {\n\t\t\tthrow new Error('o-expander needs a toggle button (use a button not a link)');\n\t\t}\n\t\tthis.ariaToggles();\n\t\n\t\tif (this.opts.shrinkTo === 'height') {\n\t\t\tviewport.listenTo('resize');\n\t\t\tviewport.listenTo('orientation');\n\t\t\tdocument.body.addEventListener('oViewport.orientation', function () {\n\t\t\t\treturn _this.apply();\n\t\t\t});\n\t\t\tdocument.body.addEventListener('oViewport.resize', function () {\n\t\t\t\treturn _this.apply();\n\t\t\t});\n\t\t}\n\t\n\t\tthis.toggles.forEach(function (toggle) {\n\t\t\ttoggle.addEventListener('click', function () {\n\t\t\t\treturn _this.invertState();\n\t\t\t});\n\t\t});\n\t\tthis.el.setAttribute('data-o-expander-js', '');\n\t\tthis.apply(true);\n\t\tthis.emit('init');\n\t};\n\t\n\tExpander.prototype.configure = function (setting, defaultVal) {\n\t\tvar candidate = this.el.getAttribute('data-o-expander-' + setting.replace(/[A-Z]/g, function ($0) {\n\t\t\treturn '-' + $0.toLowerCase();\n\t\t}));\n\t\tif (typeof candidate === 'undefined' || candidate === null) {\n\t\t\tcandidate = this.opts[setting];\n\t\t}\n\t\tthis.opts[setting] = !(typeof candidate === 'undefined' || candidate === null) ? candidate : defaultVal;\n\t};\n\t\n\tExpander.prototype.apply = function (isSilent) {\n\t\tif (!this.isRequired()) {\n\t\t\tthis.el.classList.add(this.className + '--inactive');\n\t\t} else {\n\t\t\tthis.el.classList.remove(this.className + '--inactive');\n\t\t\tif (typeof this.opts.shrinkTo === 'number') {\n\t\t\t\t[].slice.call(this.el.querySelectorAll(this.opts.countSelector), this.opts.shrinkTo)\n\t\t\t\t// The class is added via JS, so it can use the default name\n\t\t\t\t.forEach(function (el) {\n\t\t\t\t\treturn el.classList.add('o-expander__collapsible-item');\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.hasStateDefined()) {\n\t\t\t\tthis.displayState(isSilent);\n\t\t\t} else {\n\t\t\t\tthis.collapse(isSilent);\n\t\t\t}\n\t\t}\n\t};\n\t\n\tExpander.prototype.destroy = function () {\n\t\tvar _this2 = this;\n\t\n\t\tif (this.opts.shrinkTo === 'height') {\n\t\t\tdocument.body.removeEventListener('oViewport.orientation', function () {\n\t\t\t\treturn _this2.apply();\n\t\t\t});\n\t\t\tdocument.body.removeEventListener('oViewport.resize', function () {\n\t\t\t\treturn _this2.apply();\n\t\t\t});\n\t\t}\n\t\tthis.toggles.forEach(function (toggle) {\n\t\t\ttoggle.removeEventListener('click', _this2.invertState);\n\t\t\ttoggle.removeAttribute('aria-controls');\n\t\t\ttoggle.removeAttribute('aria-expanded');\n\t\t});\n\t\tthis.contentEl.removeAttribute('aria-hidden');\n\t\tthis.contentEl.classList.remove(this.contentClassName + '--expanded');\n\t\tthis.contentEl.classList.remove(this.contentClassName + '--collapsed');\n\t\tthis.el.removeAttribute('data-o-expander-js');\n\t};\n\t\n\tExpander.prototype.ariaToggles = function () {\n\t\tthis.id = this.contentEl.id;\n\t\n\t\tif (!this.id) {\n\t\t\twhile (document.querySelector('#o-expander__toggle--' + count)) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t\tthis.id = this.contentEl.id = 'o-expander__toggle--' + count;\n\t\t}\n\t\n\t\tvar id = this.id;\n\t\tthis.toggles.forEach(function (toggle) {\n\t\t\treturn toggle.setAttribute('aria-controls', id);\n\t\t});\n\t};\n\t\n\tExpander.prototype.invertState = function () {\n\t\tthis.isCollapsed() ? this.expand() : this.collapse();\n\t};\n\t\n\tExpander.prototype.displayState = function (isSilent) {\n\t\tthis.isCollapsed() ? this.collapse(isSilent) : this.expand(isSilent);\n\t};\n\t\n\tExpander.prototype.expand = function (isSilent) {\n\t\tthis.toggleExpander('expand', isSilent);\n\t};\n\t\n\tExpander.prototype.collapse = function (isSilent) {\n\t\tthis.toggleExpander('collapse', isSilent);\n\t};\n\t\n\tExpander.prototype.emit = function (name) {\n\t\tthis.el.dispatchEvent(new CustomEvent('oExpander.' + name, { bubbles: true }));\n\t};\n\t\n\tExpander.prototype.toggleExpander = function (state, isSilent) {\n\t\tvar _this3 = this;\n\t\n\t\tthis.toggleContent(state);\n\t\tif (this.opts.toggleState !== 'none') {\n\t\t\tthis.toggles.forEach(function (toggle) {\n\t\t\t\tif (_this3.opts.toggleState !== 'aria') {\n\t\t\t\t\ttoggle.innerHTML = _this3.opts[state === 'expand' ? 'expandedToggleText' : 'collapsedToggleText'] + '<i></i>';\n\t\t\t\t}\n\t\t\t\ttoggle.setAttribute('aria-expanded', state === 'expand' ? 'true' : 'false');\n\t\t\t});\n\t\t}\n\t\tif (!isSilent) {\n\t\t\tthis.emit(state);\n\t\t}\n\t};\n\t\n\tvar construct = function construct(el, opts) {\n\t\treturn el.hasAttribute('data-o-expander-js') ? undefined : new Expander(el, opts);\n\t};\n\t\n\tvar init = function init(el, opts) {\n\t\tif (!el) {\n\t\t\tel = document.body;\n\t\t}\n\t\tif (!(el instanceof HTMLElement)) {\n\t\t\tel = document.querySelector(el);\n\t\t}\n\t\tif (/\\bo-expander\\b/.test(el.getAttribute('data-o-component'))) {\n\t\t\treturn construct(el, opts);\n\t\t}\n\t\treturn [].map.call(el.querySelectorAll('[data-o-component~=\"o-expander\"]'), function (el) {\n\t\t\treturn construct(el, opts);\n\t\t});\n\t};\n\t\n\tvar constructAll = function constructAll() {\n\t\tinit();\n\t\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n\t};\n\t\n\tif (typeof window !== 'undefined') {\n\t\tdocument.addEventListener('o.DOMContentLoaded', constructAll);\n\t}\n\t\n\tmodule.exports = {\n\t\tinit: init\n\t};\n\n/***/ },\n/* 258 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar oGrid = __webpack_require__(140);\n\tvar viewport = __webpack_require__(259);\n\tvar utils = __webpack_require__(75);\n\t\n\tvar listening = false;\n\t\n\tfunction fireBreakpointEvent(breakpoint) {\n\t\tutils.broadcast('grid.layoutChange', { layout: breakpoint });\n\t}\n\t\n\tfunction listenForBreakpointChanges() {\n\t\tif (listening) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar lastBreakpoint = oGrid.getCurrentLayout();\n\t\tfireBreakpointEvent(lastBreakpoint);\n\t\tviewport.listenTo('resize');\n\t\tdocument.body.addEventListener('oViewport.resize', function () {\n\t\t\tvar breakpoint = oGrid.getCurrentLayout();\n\t\t\tif (breakpoint !== lastBreakpoint) {\n\t\t\t\tfireBreakpointEvent(breakpoint);\n\t\t\t\tlastBreakpoint = breakpoint;\n\t\t\t}\n\t\t});\n\t\tlistening = true;\n\t}\n\t\n\tmodule.exports = oGrid;\n\tmodule.exports.listenForBreakpointChanges = listenForBreakpointChanges;\n\tmodule.exports.__wrapsOrigami = true;\n\n/***/ },\n/* 259 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(99);\n\tmodule.exports.__wrapsOrigami = true;\n\n/***/ },\n/* 260 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(261);\n\n/***/ },\n/* 261 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _video = __webpack_require__(262);\n\t\n\tvar _video2 = _interopRequireDefault(_video);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar constructAll = function constructAll() {\n\t\t_video2.default.init();\n\t\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n\t};\n\t\n\tdocument.addEventListener('o.DOMContentLoaded', constructAll);\n\t\n\texports.default = _video2.default;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 262 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _oFetchJsonp = __webpack_require__(263);\n\t\n\tvar _oFetchJsonp2 = _interopRequireDefault(_oFetchJsonp);\n\t\n\tvar _getRendition = __webpack_require__(265);\n\t\n\tvar _getRendition2 = _interopRequireDefault(_getRendition);\n\t\n\tvar _ads = __webpack_require__(267);\n\t\n\tvar _ads2 = _interopRequireDefault(_ads);\n\t\n\tvar _info = __webpack_require__(268);\n\t\n\tvar _info2 = _interopRequireDefault(_info);\n\t\n\tvar _playlist = __webpack_require__(269);\n\t\n\tvar _playlist2 = _interopRequireDefault(_playlist);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction eventListener(video, ev) {\n\t\t// Dispatch progress event at start, 25%, 50%, 75% and 100%\n\t\tif (ev.type === 'progress' && video.getProgress() % 25 !== 0) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar event = new CustomEvent('oTracking.event', {\n\t\t\tdetail: {\n\t\t\t\taction: ev.type,\n\t\t\t\tadvertising: video.opts.advertising,\n\t\t\t\tcategory: 'video',\n\t\t\t\tcontentId: video.opts.id,\n\t\t\t\tprogress: video.getProgress()\n\t\t\t},\n\t\t\tbubbles: true\n\t\t});\n\t\tdocument.body.dispatchEvent(event);\n\t} /* global fetch */\n\t\n\t\n\tfunction addEvents(video, events) {\n\t\tvar _this = this;\n\t\n\t\tevents.forEach(function (event) {\n\t\t\tvideo.videoEl.addEventListener(event, eventListener.bind(_this, video));\n\t\t});\n\t}\n\t\n\t// use the image resizing service, if width supplied\n\tfunction updatePosterUrl(posterImage, width) {\n\t\tvar url = 'https://image.webservices.ft.com/v1/images/raw/' + encodeURIComponent(posterImage) + '?source=o-video&quality=low';\n\t\tif (width) {\n\t\t\turl += '&fit=scale-down&width=' + width;\n\t\t}\n\t\n\t\treturn url;\n\t}\n\t\n\t// converts data-o-video attributes to an options object\n\tfunction getOptionsFromDataAttributes(attributes) {\n\t\tvar opts = {};\n\t\t// Try to get config set declaratively on the element\n\t\tArray.prototype.forEach.call(attributes, function (attr) {\n\t\t\tif (attr.name.indexOf('data-o-video') === 0) {\n\t\t\t\t// Remove the prefix part of the data attribute name and hyphen-case to camelCase\n\t\t\t\tvar key = attr.name.replace('data-o-video-', '').replace(/-([a-z])/g, function (m, w) {\n\t\t\t\t\treturn w.toUpperCase();\n\t\t\t\t});\n\t\n\t\t\t\ttry {\n\t\t\t\t\t// If it's a JSON, a boolean or a number, we want it stored like that, and not as a string\n\t\t\t\t\t// We also replace all ' with \" so JSON strings are parsed correctly\n\t\t\t\t\topts[key] = JSON.parse(attr.value.replace(/\\'/g, '\"'));\n\t\t\t\t} catch (e) {\n\t\t\t\t\topts[key] = attr.value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\treturn opts;\n\t}\n\t\n\tvar defaultOpts = {\n\t\tadvertising: false,\n\t\tautorender: true,\n\t\tclasses: [],\n\t\toptimumwidth: null,\n\t\tplaceholder: false,\n\t\tplaceholderInfo: ['title'],\n\t\tdata: null\n\t};\n\t\n\tvar Video = function () {\n\t\tfunction Video(el, opts) {\n\t\t\t(0, _classCallCheck3.default)(this, Video);\n\t\n\t\t\tthis.containerEl = el;\n\t\n\t\t\tthis.opts = Object.assign({}, defaultOpts, opts, getOptionsFromDataAttributes(this.containerEl.attributes));\n\t\n\t\t\tif (typeof this.opts.classes === 'string') {\n\t\t\t\tthis.opts.classes = this.opts.classes.split(' ');\n\t\t\t}\n\t\n\t\t\tif (this.opts.classes.indexOf('o-video__video') === -1) {\n\t\t\t\tthis.opts.classes.push('o-video__video');\n\t\t\t}\n\t\n\t\t\tthis.targeting = {\n\t\t\t\tsite: '/5887/ft.com',\n\t\t\t\tposition: 'video',\n\t\t\t\tsizes: '592x333|400x225',\n\t\t\t\tvideoId: this.opts.id\n\t\t\t};\n\t\n\t\t\tif (this.opts.advertising) {\n\t\t\t\tthis.videoAds = new _ads2.default(this);\n\t\t\t}\n\t\n\t\t\tthis.containerEl.setAttribute('data-o-video-js', '');\n\t\n\t\t\tif (this.opts.autorender === true) {\n\t\t\t\tthis.init();\n\t\t\t}\n\t\t}\n\t\n\t\tVideo.prototype.getData = function getData() {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tvar dataPromise = this.opts.data ? Promise.resolve(this.opts.data) : (0, _oFetchJsonp2.default)('//next-video.ft.com/api/' + this.opts.id).then(function (response) {\n\t\t\t\tif (response.ok) {\n\t\t\t\t\treturn response.json();\n\t\t\t\t} else {\n\t\t\t\t\tthrow Error('Brightcove responded with a ' + response.status + ' (' + response.statusText + ') for id ' + _this2.opts.id);\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\treturn dataPromise.then(function (data) {\n\t\t\t\t_this2.videoData = data;\n\t\t\t\t_this2.posterImage = updatePosterUrl(data.videoStillURL, _this2.opts.optimumwidth);\n\t\t\t\t_this2.rendition = (0, _getRendition2.default)(data.renditions, _this2.opts);\n\t\t\t});\n\t\t};\n\t\n\t\tVideo.prototype.renderVideo = function renderVideo() {\n\t\t\tif (this.rendition) {\n\t\t\t\tif (this.opts.placeholder) {\n\t\t\t\t\tthis.addPlaceholder();\n\t\t\t\t} else {\n\t\t\t\t\tthis.addVideo();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tVideo.prototype.init = function init() {\n\t\t\tvar _this3 = this;\n\t\n\t\t\treturn (this.opts.advertising ? this.videoAds.loadAdsLibrary() : Promise.resolve()).catch(function () {\n\t\t\t\t// If ad doesn't load for some reason, load video as normal\n\t\t\t\t_this3.opts.advertising = false;\n\t\t\t}).then(function () {\n\t\t\t\treturn _this3.getData();\n\t\t\t}).then(function () {\n\t\t\t\treturn _this3.renderVideo();\n\t\t\t});\n\t\t};\n\t\n\t\tVideo.prototype.addVideo = function addVideo() {\n\t\t\tthis.videoEl = document.createElement('video');\n\t\t\tthis.videoEl.controls = true;\n\t\t\tthis.videoEl.className = Array.isArray(this.opts.classes) ? this.opts.classes.join(' ') : this.opts.classes;\n\t\t\tthis.containerEl.classList.add('o-video--player');\n\t\n\t\t\tthis.updateVideo();\n\t\n\t\t\tif (this.placeholderEl && !this.opts.advertising) {\n\t\t\t\tthis.videoEl.autoplay = this.videoEl.autostart = true;\n\t\t\t}\n\t\n\t\t\tthis.containerEl.appendChild(this.videoEl);\n\t\n\t\t\taddEvents(this, ['play', 'playing', 'pause', 'ended', 'progress']);\n\t\t\tthis.videoEl.addEventListener('playing', this.pauseOtherVideos.bind(this));\n\t\t\tthis.videoEl.addEventListener('suspend', this.clearCurrentlyPlaying.bind(this));\n\t\t\tthis.videoEl.addEventListener('ended', this.clearCurrentlyPlaying.bind(this));\n\t\n\t\t\tif (this.opts.advertising) {\n\t\t\t\tthis.videoAds.setUpAds();\n\t\t\t}\n\t\t};\n\t\n\t\tVideo.prototype.updateVideo = function updateVideo() {\n\t\t\tthis.videoEl.poster = this.posterImage;\n\t\t\tthis.videoEl.src = this.rendition && this.rendition.url;\n\t\t};\n\t\n\t\tVideo.prototype.addPlaceholder = function addPlaceholder() {\n\t\t\tvar _this4 = this;\n\t\n\t\t\tthis.placeholderEl = document.createElement('div');\n\t\t\tthis.placeholderEl.className = 'o-video__placeholder';\n\t\n\t\t\tthis.placeholderImageEl = document.createElement('img');\n\t\t\tthis.placeholderImageEl.className = 'o-video__placeholder-image';\n\t\t\tthis.placeholderImageEl.setAttribute('role', 'presentation');\n\t\t\tthis.placeholderImageEl.setAttribute('alt', '');\n\t\n\t\t\tthis.placeholderEl.appendChild(this.placeholderImageEl);\n\t\n\t\t\t// info panel\n\t\t\tif (this.opts.placeholderInfo.length) {\n\t\t\t\tthis.infoPanel = new _info2.default(this);\n\t\t\t}\n\t\n\t\t\t// play button\n\t\t\tvar playButtonEl = document.createElement('button');\n\t\t\tplayButtonEl.className = 'o-video__play-button';\n\t\n\t\t\tvar playButtonTextEl = document.createElement('span');\n\t\t\tplayButtonTextEl.className = 'o-video__play-button-text';\n\t\t\tplayButtonTextEl.textContent = 'Play video';\n\t\t\tplayButtonEl.appendChild(playButtonTextEl);\n\t\n\t\t\tvar playButtonIconEl = document.createElement('i');\n\t\t\tplayButtonIconEl.className = 'o-video__play-button-icon';\n\t\t\tplayButtonEl.appendChild(playButtonIconEl);\n\t\n\t\t\tthis.placeholderEl.appendChild(playButtonEl);\n\t\n\t\t\tthis.placeholderEl.addEventListener('click', function () {\n\t\t\t\t// Adds video soon so ads can start loading\n\t\t\t\t_this4.addVideo();\n\t\t\t\t_this4.videoEl.focus();\n\t\t\t\t_this4.videoEl.paused && _this4.videoEl.play();\n\t\n\t\t\t\t_this4.containerEl.removeChild(_this4.placeholderEl);\n\t\t\t\t_this4.infoPanel && _this4.infoPanel.teardown();\n\t\n\t\t\t\tdelete _this4.placeholderEl;\n\t\t\t\tdelete _this4.placeholderImageEl;\n\t\t\t});\n\t\n\t\t\tthis.updatePlaceholder();\n\t\n\t\t\tthis.containerEl.appendChild(this.placeholderEl);\n\t\t};\n\t\n\t\tVideo.prototype.updatePlaceholder = function updatePlaceholder() {\n\t\t\tthis.placeholderImageEl.src = this.posterImage;\n\t\t\tthis.infoPanel && this.infoPanel.update();\n\t\t};\n\t\n\t\tVideo.prototype.update = function update(newOpts) {\n\t\t\tvar _this5 = this;\n\t\n\t\t\tthis.videoEl && this.videoEl.pause();\n\t\t\tthis.clearCurrentlyPlaying();\n\t\n\t\t\tthis.opts = Object.assign(this.opts, { data: null }, newOpts);\n\t\n\t\t\tif (!this.videoEl && !this.placeholderEl) {\n\t\t\t\treturn this.init();\n\t\t\t}\n\t\n\t\t\treturn this.getData().then(function () {\n\t\t\t\tif (_this5.placeholderEl) {\n\t\t\t\t\t_this5.updatePlaceholder();\n\t\t\t\t} else {\n\t\t\t\t\t_this5.updateVideo();\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\n\t\tVideo.prototype.getProgress = function getProgress() {\n\t\t\treturn this.videoEl.duration ? parseInt(100 * this.videoEl.currentTime / this.videoEl.duration, 10) : 0;\n\t\t};\n\t\n\t\tVideo.prototype.pauseOtherVideos = function pauseOtherVideos() {\n\t\t\tif (this.currentlyPlayingVideo && this.currentlyPlayingVideo !== this.videoEl) {\n\t\t\t\tthis.currentlyPlayingVideo.pause();\n\t\t\t}\n\t\n\t\t\tthis.currentlyPlayingVideo = this.videoEl;\n\t\t};\n\t\n\t\tVideo.prototype.clearCurrentlyPlaying = function clearCurrentlyPlaying() {\n\t\t\tif (this.currentlyPlayingVideo !== this.videoEl) {\n\t\t\t\tthis.currentlyPlayingVideo = null;\n\t\t\t}\n\t\t};\n\t\n\t\tVideo.init = function init(rootEl, config) {\n\t\t\tvar videos = [];\n\t\t\tif (!rootEl) {\n\t\t\t\trootEl = document.body;\n\t\t\t} else if (typeof rootEl === 'string') {\n\t\t\t\trootEl = document.querySelector(rootEl);\n\t\t\t}\n\t\n\t\t\tvar videoEls = rootEl.querySelectorAll(':not([data-o-video-js])[data-o-component~=\"o-video\"]');\n\t\n\t\t\tfor (var i = 0; i < videoEls.length; i++) {\n\t\t\t\tvideos.push(new Video(videoEls[i], config));\n\t\t\t}\n\t\n\t\t\treturn videos;\n\t\t};\n\t\n\t\treturn Video;\n\t}();\n\t\n\tVideo.Playlist = _playlist2.default;\n\t\n\texports.default = Video;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 263 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(264);\n\n/***/ },\n/* 264 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\tvar jsonpCallbackNames = [];\n\t\n\tvar generateCallbackName = function generateCallbackName() {\n\t\tvar base = 'jsonpCallback';\n\t\tvar callbackName = base + '_' + (jsonpCallbackNames.length + 1);\n\t\tjsonpCallbackNames.push(callbackName);\n\t\treturn callbackName;\n\t};\n\t\n\tvar crossDomainFetch = function crossDomainFetch() {\n\t\tvar crossDomainFetch = 'withCredentials' in new XMLHttpRequest() ? fetch : jsonpFetch;\n\t\treturn crossDomainFetch.apply(undefined, arguments);\n\t};\n\t\n\tvar jsonpFetch = function jsonpFetch(url, opts) {\n\t\tvar defaultOpts = {\n\t\t\ttimeout: 2000\n\t\t};\n\t\topts = opts || {};\n\t\tObject.keys(defaultOpts).forEach(function (defaultOptsKey) {\n\t\t\tif (!opts.hasOwnProperty(defaultOptsKey)) {\n\t\t\t\topts[defaultOptsKey] = defaultOpts[defaultOptsKey];\n\t\t\t}\n\t\t});\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar callbackName = generateCallbackName();\n\t\t\tvar timeout = void 0;\n\t\t\twindow.FT = window.FT || {};\n\t\t\twindow.FT[callbackName] = function (response) {\n\t\t\t\tvar status = response.status ? response.status : 200;\n\t\t\t\tresolve({\n\t\t\t\t\tok: Math.floor(status / 100) === 2,\n\t\t\t\t\tstatus: status,\n\t\t\t\t\tjson: function json() {\n\t\t\t\t\t\treturn Promise.resolve(response.body || response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (timeout) {\n\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tvar scriptTag = document.createElement('script');\n\t\t\tscriptTag.defer = true;\n\t\t\tscriptTag.src = '' + url + (url.indexOf('?') > -1 ? '&' : '?') + 'callback=FT.' + callbackName;\n\t\t\tdocument.body.appendChild(scriptTag);\n\t\n\t\t\ttimeout = setTimeout(function () {\n\t\t\t\treject(new Error('JSONP request to ' + url + ' timed out'));\n\t\t\t}, opts.timeout);\n\t\t});\n\t};\n\t\n\texports.default = crossDomainFetch;\n\texports.jsonpFetch = jsonpFetch;\n\n/***/ },\n/* 265 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _supportedFormats = __webpack_require__(266);\n\t\n\tvar _supportedFormats2 = _interopRequireDefault(_supportedFormats);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getRendition(renditions, options) {\n\t\t// allow mocking of supported formats module\n\t\tvar opts = options || {};\n\t\tvar width = opts.optimumvideowidth;\n\t\tvar formats = opts.supportedFormats || (0, _supportedFormats2.default)();\n\t\tvar appropriateRendition = void 0;\n\t\t// order smallest to largest\n\t\tvar orderedRenditions = renditions.filter(function (rendition) {\n\t\t\treturn formats.indexOf(rendition.videoCodec.toLowerCase()) > -1;\n\t\t}).sort(function (renditionOne, renditionTwo) {\n\t\t\treturn renditionOne.frameWidth - renditionTwo.frameWidth;\n\t\t});\n\t\n\t\t// if no width supplied, get largest\n\t\tif (!width) {\n\t\t\treturn orderedRenditions.pop();\n\t\t}\n\t\t// NOTE: rather use find...\n\t\torderedRenditions.some(function (rendition) {\n\t\t\tif (rendition.frameWidth >= width) {\n\t\t\t\tappropriateRendition = rendition;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\n\t\treturn appropriateRendition || orderedRenditions.pop();\n\t};\n\t\n\texports.default = getRendition;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 266 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\tvar formats = {\n\t\tmpeg4: ['video/mp4; codecs=\"mp4v.20.8\"'],\n\t\th264: ['video/mp4; codecs=\"avc1.42E01E\"', 'video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"'],\n\t\togg: ['video/ogg; codecs=\"theora\"'],\n\t\twebm: ['video/webm; codecs=\"vp8, vorbis\"']\n\t};\n\t\n\tfunction supportedFormats() {\n\t\tvar testEl = document.createElement('video');\n\t\tvar supported = [];\n\t\n\t\ttry {\n\t\t\tObject.keys(formats).filter(function (format) {\n\t\t\t\tformats[format].some(function (type) {\n\t\t\t\t\treturn testEl.canPlayType(type);\n\t\t\t\t}) && supported.push(format);\n\t\t\t});\n\t\t} catch (e) {}\n\t\n\t\treturn supported;\n\t}\n\t\n\texports.default = supportedFormats;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 267 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/* global google */\n\t\n\tvar sdkScriptLoaded = false;\n\t\n\tfunction createVideoOverlayElement() {\n\t\tvar overlayEl = document.createElement('div');\n\t\toverlayEl.classList.add('o-video__overlay');\n\t\treturn overlayEl;\n\t}\n\t\n\tvar VideoAds = function () {\n\t\tfunction VideoAds(video) {\n\t\t\t(0, _classCallCheck3.default)(this, VideoAds);\n\t\n\t\t\tthis.video = video;\n\t\t\tthis.adsLoaded = false;\n\t\t\tthis.videoLoad = false;\n\t\n\t\t\tif (!this.video.opts.placeholder) {\n\t\t\t\tthis.overlayEl = createVideoOverlayElement();\n\t\t\t\tthis.video.containerEl.appendChild(this.overlayEl);\n\t\t\t}\n\t\t}\n\t\n\t\tVideoAds.prototype.loadAdsLibrary = function loadAdsLibrary() {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar googleSdkScript = document.querySelector('[src=\"//imasdk.googleapis.com/js/sdkloader/ima3.js\"]');\n\t\n\t\t\t\tif (!googleSdkScript) {\n\t\t\t\t\tgoogleSdkScript = document.createElement('script');\n\t\t\t\t\tgoogleSdkScript.setAttribute('type', 'text/javascript');\n\t\t\t\t\tgoogleSdkScript.setAttribute('src', '//imasdk.googleapis.com/js/sdkloader/ima3.js');\n\t\t\t\t\tgoogleSdkScript.setAttribute('async', true);\n\t\t\t\t\tgoogleSdkScript.setAttribute('defer', true);\n\t\t\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(googleSdkScript);\n\t\t\t\t}\n\t\n\t\t\t\tif (sdkScriptLoaded) {\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\tgoogleSdkScript.addEventListener('load', function () {\n\t\t\t\t\t\tsdkScriptLoaded = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\n\t\t\t\t\tgoogleSdkScript.addEventListener('error', function (e) {\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\n\t\tVideoAds.prototype.getVideoBrand = function getVideoBrand() {\n\t\t\tif (!this.video.videoData || !this.video.videoData.tags || this.video.videoData.tags.length === 0) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tvar filtered = this.video.videoData.tags.filter(function (val) {\n\t\t\t\t\treturn val.toLowerCase().indexOf('brand:') !== -1;\n\t\t\t\t});\n\t\t\t\tif (filtered.length > 0) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// when we target the value in the ad server, we only want to target actual brand name, so we strip out \"brand:\" part of the string\n\t\t\t\t\t\treturn filtered.pop().substring(6);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tVideoAds.prototype.setUpAds = function setUpAds() {\n\t\t\tthis.adContainerEl = document.createElement('div');\n\t\t\tthis.video.containerEl.appendChild(this.adContainerEl);\n\t\t\tthis.adDisplayContainer = new google.ima.AdDisplayContainer(this.adContainerEl, this.video.videoEl);\n\t\n\t\t\t// Create ads loader.\n\t\t\tthis.adsLoader = new google.ima.AdsLoader(this.adDisplayContainer);\n\t\n\t\t\t// Sets up bindings for all Ad related handlers\n\t\t\tthis.adsManagerLoadedHandler = this.adsManagerLoadedHandler.bind(this);\n\t\t\tthis.adErrorHandler = this.adErrorHandler.bind(this);\n\t\t\tthis.adEventHandler = this.adEventHandler.bind(this);\n\t\t\tthis.contentPauseRequestHandler = this.contentPauseRequestHandler.bind(this);\n\t\t\tthis.contentResumeRequestHandler = this.contentResumeRequestHandler.bind(this);\n\t\n\t\t\t// Listen and respond to ads loaded and error events.\n\t\t\tthis.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, this.adsManagerLoadedHandler, false);\n\t\t\tthis.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this.adErrorHandler, false);\n\t\n\t\t\tthis.requestAds();\n\t\n\t\t\tthis.playAdEventHandler = this.playAdEventHandler.bind(this);\n\t\t\tif (this.video.opts.placeholder) {\n\t\t\t\tthis.playAdEventHandler();\n\t\t\t} else {\n\t\t\t\tthis.overlayEl && this.overlayEl.addEventListener('click', this.playAdEventHandler);\n\t\t\t}\n\t\t};\n\t\n\t\tVideoAds.prototype.requestAds = function requestAds() {\n\t\t\t// Request video ads.\n\t\t\tvar adsRequest = new google.ima.AdsRequest();\n\t\n\t\t\tvar targeting = 'pos=' + this.video.targeting.position + '&ttid=' + this.video.targeting.videoId;\n\t\t\tvar brand = this.getVideoBrand();\n\t\t\tif (brand) {\n\t\t\t\ttargeting += '&brand=' + brand;\n\t\t\t}\n\t\n\t\t\tvar advertisingUrl = 'http://pubads.g.doubleclick.net/gampad/ads?env=vp&gdfp_req=1&impl=s&output=xml_vast2&iu=' + this.video.targeting.site + '&sz=' + this.video.targeting.sizes + '&unviewed_position_start=1&scp=' + encodeURIComponent(targeting);\n\t\n\t\t\tadsRequest.adTagUrl = advertisingUrl;\n\t\n\t\t\t// Specify the linear and nonlinear slot sizes. This helps the SDK\n\t\t\t// select the correct creative if multiple are returned.\n\t\t\tadsRequest.linearAdSlotWidth = 592;\n\t\t\tadsRequest.linearAdSlotHeight = 333;\n\t\n\t\t\tadsRequest.nonLinearAdSlotWidth = 592;\n\t\t\tadsRequest.nonLinearAdSlotHeight = 150;\n\t\n\t\t\tthis.adsLoader.requestAds(adsRequest);\n\t\t};\n\t\n\t\tVideoAds.prototype.adsManagerLoadedHandler = function adsManagerLoadedHandler(adsManagerLoadedEvent) {\n\t\t\t// Get the ads manager.\n\t\t\tvar adsRenderingSettings = new google.ima.AdsRenderingSettings();\n\t\t\tadsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete = true;\n\t\t\tthis.adsManager = adsManagerLoadedEvent.getAdsManager(this.video.videoEl, adsRenderingSettings);\n\t\n\t\t\t// Add listeners to the required events.\n\t\t\tthis.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this.adErrorHandler);\n\t\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, this.contentPauseRequestHandler);\n\t\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, this.contentResumeRequestHandler);\n\t\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED, this.adEventHandler);\n\t\n\t\t\t// Listen to any additional events, if necessary.\n\t\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED, this.adEventHandler);\n\t\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED, this.adEventHandler);\n\t\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE, this.adEventHandler);\n\t\n\t\t\tthis.adsLoaded = true;\n\t\t\tthis.startAds();\n\t\t};\n\t\n\t\tVideoAds.prototype.startAds = function startAds() {\n\t\n\t\t\t// For ads to play correctly both the video and the advert video need to be ready to\n\t\t\t// play; this function needs to be called after the two flags in adsManagerLoadedHandler()\n\t\t\t// and playAdEventHandler() have been set.\n\t\t\t// So if the video hasn't loaded yet, wait until it has.\n\t\t\tif (!this.videoLoaded) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\t// If ads have failed to load, which resets the advertising support flag, play the video\n\t\t\t// instead; otherwise, wait until the ads have loaded.\n\t\t\tif (!this.video.opts.advertising) {\n\t\t\t\tthis.video.videoEl.play();\n\t\t\t} else if (!this.adsLoaded) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\ttry {\n\t\t\t\t// Initialize the ads manager. Ad rules playlist will start at this time.\n\t\t\t\tthis.adsManager.init(this.video.videoEl.clientWidth, this.video.videoEl.clientHeight, google.ima.ViewMode.NORMAL);\n\t\t\t\t// Call play to start showing the ad. Single video and overlay ads will\n\t\t\t\t// start at this time; the call will be ignored for ad rules.\n\t\t\t\tthis.adsManager.start();\n\t\t\t} catch (adError) {\n\t\t\t\t// An error may be thrown if there was a problem with the VAST response.\n\t\t\t\tthis.video.videoEl.play();\n\t\t\t}\n\t\t};\n\t\n\t\tVideoAds.prototype.playAdEventHandler = function playAdEventHandler() {\n\t\t\tvar _this = this;\n\t\n\t\t\t// Sets the styling now so the ad occupies the space of the video\n\t\t\tthis.adContainerEl.classList.add('o-video__ad');\n\t\n\t\t\tthis.adDisplayContainer.initialize();\n\t\n\t\t\tvar loadedmetadataHandler = function loadedmetadataHandler() {\n\t\t\t\t_this.videoLoaded = true;\n\t\t\t\t_this.startAds();\n\t\t\t\t_this.video.videoEl.removeEventListener('loadedmetadata', loadedmetadataHandler);\n\t\t\t};\n\t\t\tthis.video.videoEl.addEventListener('loadedmetadata', loadedmetadataHandler);\n\t\n\t\t\t// Initialize the video. Must be done via a user action on mobile devices.\n\t\t\tthis.video.videoEl.load();\n\t\n\t\t\tthis.overlayEl && this.overlayEl.removeEventListener('click', this.playAdEventHandler);\n\t\t\tthis.overlayEl && this.video.containerEl.removeChild(this.overlayEl);\n\t\t\tdelete this.overlayEl;\n\t\t};\n\t\n\t\tVideoAds.prototype.adEventHandler = function adEventHandler(adEvent) {\n\t\t\t// Retrieve the ad from the event. Some events (e.g. ALL_ADS_COMPLETED)\n\t\t\t// don't have ad object associated.\n\t\t\tvar ad = adEvent.getAd();\n\t\t\tswitch (adEvent.type) {\n\t\t\t\tcase google.ima.AdEvent.Type.LOADED:\n\t\t\t\t\t// This is the first event sent for an ad - it is possible to\n\t\t\t\t\t// determine whether the ad is a video ad or an overlay.\n\t\t\t\t\tif (!ad.isLinear()) {\n\t\t\t\t\t\t// Position AdDisplayContainer correctly for overlay.\n\t\t\t\t\t\t// Use ad.width and ad.height.\n\t\t\t\t\t\tthis.video.videoEl.play();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase google.ima.AdEvent.Type.STARTED:\n\t\t\t\t\t// This event indicates the ad has started - the video player\n\t\t\t\t\t// can adjust the UI, for example display a pause button and\n\t\t\t\t\t// remaining time.\n\t\t\t\t\tif (ad.isLinear()) {\n\t\t\t\t\t\t// For a linear ad, a timer can be started to poll for\n\t\t\t\t\t\t// the remaining time.\n\t\t\t\t\t\t// TODO: We could use this to add a skip ad button\n\t\t\t\t\t\t// Currently not used, could be used in an interval\n\t\t\t\t\t\t// const remainingTime = this.adsManager.getRemainingTime();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase google.ima.AdEvent.Type.COMPLETE:\n\t\t\t\t\tif (ad.isLinear()) {\n\t\t\t\t\t\t// Would be used to clear the interval\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\t\n\t\tVideoAds.prototype.adErrorHandler = function adErrorHandler() {\n\t\t\tthis.adsManager && this.adsManager.destroy();\n\t\t\tthis.video.containerEl.removeChild(this.adContainerEl);\n\t\t\tif (this.overlayEl) {\n\t\t\t\tthis.overlayEl.removeEventListener('click', this.playAdEventHandler);\n\t\t\t\tthis.video.containerEl.removeChild(this.overlayEl);\n\t\t\t\tdelete this.overlayEl;\n\t\t\t}\n\t\t\tthis.video.placeholderEl && this.video.placeholderEl.removeEventListener('click', this.playAdEventHandler);\n\t\t\tthis.video.opts.advertising = false;\n\t\t\tthis.startAds();\n\t\t};\n\t\n\t\tVideoAds.prototype.contentPauseRequestHandler = function contentPauseRequestHandler() {\n\t\t\tthis.video.videoEl.pause();\n\t\t};\n\t\n\t\tVideoAds.prototype.contentResumeRequestHandler = function contentResumeRequestHandler() {\n\t\t\tthis.video.containerEl.removeChild(this.adContainerEl);\n\t\t\tthis.video.videoEl.play();\n\t\t};\n\t\n\t\treturn VideoAds;\n\t}();\n\t\n\texports.default = VideoAds;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 268 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction formatBrand(tags) {\n\t\tvar regex = /brand:/i;\n\t\tvar tag = tags && tags.find(function (tag) {\n\t\t\treturn regex.test(tag);\n\t\t});\n\t\n\t\treturn tag && tag.replace(regex, '');\n\t}\n\t\n\tfunction formatDuration(lengthInMs) {\n\t\tvar lengthInSeconds = Math.ceil(lengthInMs / 1000);\n\t\tvar minutes = '' + Math.floor(lengthInSeconds / 60);\n\t\tvar seconds = '' + lengthInSeconds % 60;\n\t\n\t\treturn minutes + ':' + (seconds.length === 1 ? '0' + seconds : seconds);\n\t}\n\t\n\tvar VideoInfo = function () {\n\t\tfunction VideoInfo(video) {\n\t\t\t(0, _classCallCheck3.default)(this, VideoInfo);\n\t\n\t\t\tthis.video = video;\n\t\n\t\t\tthis.opts = this.video.opts.placeholderInfo.reduce(function (map, key) {\n\t\t\t\tmap[key] = true;\n\t\t\t\treturn map;\n\t\t\t}, {});\n\t\n\t\t\tthis.infoEl = document.createElement('div');\n\t\t\tthis.infoEl.className = 'o-video__info';\n\t\n\t\t\tif (this.opts.brand) {\n\t\t\t\tthis.brandEl = document.createElement('span');\n\t\t\t\tthis.brandEl.className = 'o-video__info-brand';\n\t\t\t\tthis.infoEl.appendChild(this.brandEl);\n\t\t\t}\n\t\n\t\t\tif (this.opts.duration) {\n\t\t\t\tthis.durationEl = document.createElement('span');\n\t\t\t\tthis.durationEl.className = 'o-video__info-duration';\n\t\t\t\tthis.infoEl.appendChild(this.durationEl);\n\t\t\t}\n\t\n\t\t\tif (this.opts.title) {\n\t\t\t\tthis.titleEl = document.createElement('h4');\n\t\t\t\tthis.titleEl.className = 'o-video__info-title';\n\t\t\t\tthis.infoEl.appendChild(this.titleEl);\n\t\t\t}\n\t\n\t\t\tif (this.opts.description) {\n\t\t\t\tthis.descriptionEl = document.createElement('p');\n\t\t\t\tthis.descriptionEl.className = 'o-video__info-description';\n\t\t\t\tthis.infoEl.appendChild(this.descriptionEl);\n\t\t\t}\n\t\n\t\t\tthis.update();\n\t\n\t\t\tthis.video.placeholderEl.appendChild(this.infoEl);\n\t\t}\n\t\n\t\tVideoInfo.prototype.update = function update() {\n\t\t\tif (this.brandEl) {\n\t\t\t\tthis.brandEl.textContent = formatBrand(this.video.videoData.tags);\n\t\t\t}\n\t\n\t\t\tif (this.durationEl) {\n\t\t\t\tthis.durationEl.textContent = formatDuration(this.video.videoData.length);\n\t\t\t}\n\t\n\t\t\tif (this.titleEl) {\n\t\t\t\tthis.titleEl.textContent = this.video.videoData.name;\n\t\t\t}\n\t\n\t\t\tif (this.descriptionEl) {\n\t\t\t\tthis.descriptionEl.textContent = this.video.videoData.shortDescription;\n\t\t\t}\n\t\t};\n\t\n\t\tVideoInfo.prototype.teardown = function teardown() {\n\t\t\tthis.video.placeholderEl.removeChild(this.infoEl);\n\t\n\t\t\tdelete this.infoEl;\n\t\t\tdelete this.brandEl;\n\t\t\tdelete this.titleEl;\n\t\t\tdelete this.durationEl;\n\t\t\tdelete this.descriptionEl;\n\t\t};\n\t\n\t\treturn VideoInfo;\n\t}();\n\t\n\texports.default = VideoInfo;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 269 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Playlist = function () {\n\t\tfunction Playlist(opts) {\n\t\t\t(0, _classCallCheck3.default)(this, Playlist);\n\t\n\t\t\tthis.opts = opts;\n\t\n\t\t\t// find the currently playing video, always deal with strings\n\t\t\tvar currentId = opts.player.videoData ? opts.player.videoData.id : opts.player.opts.id;\n\t\t\tthis.currentIndex = currentId ? opts.queue.indexOf(currentId.toString()) : -1;\n\t\n\t\t\tthis.cache = {};\n\t\n\t\t\tif (this.opts.autoplay) {\n\t\t\t\tthis.opts.player.containerEl.addEventListener('ended', this.next.bind(this), true);\n\t\n\t\t\t\tif (this.currentIndex === -1) {\n\t\t\t\t\tthis.next();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tPlaylist.prototype.next = function next() {\n\t\t\tthis.goto(this.currentIndex + 1);\n\t\t};\n\t\n\t\tPlaylist.prototype.prev = function prev() {\n\t\t\tthis.goto(this.currentIndex - 1);\n\t\t};\n\t\n\t\tPlaylist.prototype.goto = function goto(index) {\n\t\t\tvar _this = this;\n\t\n\t\t\tif (index < 0) {\n\t\t\t\tthis.currentIndex = this.opts.queue.length - 1;\n\t\t\t} else if (index >= this.opts.queue.length) {\n\t\t\t\tthis.currentIndex = 0;\n\t\t\t} else {\n\t\t\t\tthis.currentIndex = index;\n\t\t\t}\n\t\n\t\t\t// store the current data for quick access later\n\t\t\tvar currentVideoId = this.opts.player.videoData && this.opts.player.videoData.id;\n\t\n\t\t\tif (currentVideoId && !this.cache[currentVideoId]) {\n\t\t\t\tthis.cache[currentVideoId] = this.opts.player.videoData;\n\t\t\t}\n\t\n\t\t\tvar nextVideoId = this.opts.queue[this.currentIndex];\n\t\n\t\t\tvar nextVideoOpts = {\n\t\t\t\tid: nextVideoId,\n\t\t\t\tdata: this.cache[nextVideoId]\n\t\t\t};\n\t\n\t\t\treturn this.opts.player.update(nextVideoOpts).then(function () {\n\t\t\t\t_this.opts.player.videoEl && _this.opts.player.videoEl.play();\n\t\t\t});\n\t\t};\n\t\n\t\treturn Playlist;\n\t}();\n\t\n\texports.default = Playlist;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 270 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {(function (global, factory) {\n\t\t true ? module.exports = factory(__webpack_require__(272), __webpack_require__(273), __webpack_require__(274)) :\n\t\ttypeof define === 'function' && define.amd ? define(['proptypes', 'preact-svg', 'preact'], factory) :\n\t\t(global.preactCompat = factory(global.PropTypes,global.preactSvg,global.preact));\n\t}(this, function (PropTypes,SVG,preact) {\n\t\n\t\tPropTypes = 'default' in PropTypes ? PropTypes['default'] : PropTypes;\n\t\tSVG = 'default' in SVG ? SVG['default'] : SVG;\n\t\n\t\tvar version = '15.1.0';\n\t\n\t\tvar ELEMENTS = 'a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan'.split(' ');\n\t\n\t\tvar REACT_ELEMENT_TYPE = typeof Symbol === 'function' && Symbol.for && Symbol.for('react.element') || 0xeac7;\n\t\n\t\tvar AUTOBIND_BLACKLIST = {\n\t\t\tconstructor: 1,\n\t\t\trender: 1,\n\t\t\tshouldComponentUpdate: 1,\n\t\t\tcomponentWillRecieveProps: 1,\n\t\t\tcomponentWillUpdate: 1,\n\t\t\tcomponentDidUpdate: 1,\n\t\t\tcomponentWillMount: 1,\n\t\t\tcomponentDidMount: 1,\n\t\t\tcomponentWillUnmount: 1,\n\t\t\tcomponentDidUnmount: 1\n\t\t};\n\t\n\t\tvar BYPASS_HOOK = {};\n\t\n\t\tvar DEV = typeof process !== 'undefined' && ({\"NODE_ENV\":\"production\"}) && (\"production\") !== 'production';\n\t\n\t\tvar EmptyComponent = function () {\n\t\t\treturn null;\n\t\t};\n\t\n\t\tvar VNode = preact.h('').constructor;\n\t\tVNode.prototype.$$typeof = REACT_ELEMENT_TYPE;\n\t\n\t\tObject.defineProperty(VNode.prototype, 'type', {\n\t\t\tget: function () {\n\t\t\t\treturn this.nodeName;\n\t\t\t},\n\t\t\tset: function (v) {\n\t\t\t\tthis.nodeName = v;\n\t\t\t}\n\t\t});\n\t\n\t\tObject.defineProperty(VNode.prototype, 'props', {\n\t\t\tget: function () {\n\t\t\t\treturn this.attributes;\n\t\t\t},\n\t\t\tset: function (v) {\n\t\t\t\tthis.attributes = v;\n\t\t\t}\n\t\t});\n\t\n\t\tvar childrenPropertyAlias = {\n\t\t\tget: function () {\n\t\t\t\treturn this.attributes && this.attributes.children;\n\t\t\t},\n\t\t\tset: function (children) {\n\t\t\t\tvar a = this.attributes || (this.attributes = {});\n\t\t\t\ta.children = children;\n\t\t\t}\n\t\t};\n\t\n\t\tvar oldVnodeHook = preact.options.vnode || EmptyComponent;\n\t\tpreact.options.vnode = function (vnode) {\n\t\t\tvar a = vnode.attributes;\n\t\t\tif (!a) a = vnode.attributes = {};\n\t\n\t\t\tif (Object.isExtensible && !Object.isExtensible(a)) {\n\t\t\t\ta = extend({}, a, true);\n\t\t\t}\n\t\t\tObject.defineProperty(a, 'children', childrenPropertyAlias);\n\t\t\toldVnodeHook(vnode);\n\t\t};\n\t\n\t\tfunction render$1(vnode, parent, callback) {\n\t\t\tvar prev = parent._preactCompatRendered;\n\t\t\tif (prev && prev.parentNode !== parent) prev = null;\n\t\t\tvar out = preact.render(vnode, parent, prev);\n\t\t\tparent._preactCompatRendered = out;\n\t\t\tif (typeof callback === 'function') callback();\n\t\t\treturn out && out._component;\n\t\t}\n\t\n\t\tfunction unmountComponentAtNode(container) {\n\t\t\tvar existing = container._preactCompatRendered;\n\t\t\tif (existing && existing.parentNode === container) {\n\t\t\t\tpreact.render(preact.h(EmptyComponent), container, existing);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\n\t\tvar ARR = [];\n\t\n\t\tvar Children = {\n\t\t\tmap: function (children, fn, ctx) {\n\t\t\t\tchildren = Children.toArray(children);\n\t\t\t\tif (ctx && ctx !== children) fn = fn.bind(ctx);\n\t\t\t\treturn children.map(fn);\n\t\t\t},\n\t\t\tforEach: function (children, fn, ctx) {\n\t\t\t\tchildren = Children.toArray(children);\n\t\t\t\tif (ctx && ctx !== children) fn = fn.bind(ctx);\n\t\t\t\tchildren.forEach(fn);\n\t\t\t},\n\t\t\tcount: function (children) {\n\t\t\t\tchildren = Children.toArray(children);\n\t\t\t\treturn children.length;\n\t\t\t},\n\t\t\tonly: function (children) {\n\t\t\t\tchildren = Children.toArray(children);\n\t\t\t\tif (children.length !== 1) throw new Error('Children.only() expects only one child.');\n\t\t\t\treturn children[0];\n\t\t\t},\n\t\t\ttoArray: function (children) {\n\t\t\t\treturn Array.isArray && Array.isArray(children) ? children : ARR.concat(children);\n\t\t\t}\n\t\t};\n\t\n\t\tvar currentComponent = void 0;\n\t\n\t\tfunction createFactory(type) {\n\t\t\treturn createElement.bind(null, type);\n\t\t}\n\t\n\t\tvar DOM = {};\n\t\tfor (var i = ELEMENTS.length; i--;) {\n\t\t\tDOM[ELEMENTS[i]] = createFactory(ELEMENTS[i]);\n\t\t}\n\t\n\t\tfunction createElement() {\n\t\t\tvar vnode = preact.h.apply(undefined, arguments);\n\t\n\t\t\tif (vnode.nodeName === 'svg') {\n\t\t\t\tvnode.nodeName = SVG;\n\t\t\t}\n\t\n\t\t\tapplyClassName(vnode);\n\t\n\t\t\tvar ref = vnode.attributes && vnode.attributes.ref;\n\t\t\tif (currentComponent && ref && typeof ref === 'string') {\n\t\t\t\tvnode.attributes.ref = createStringRefProxy(ref, currentComponent);\n\t\t\t}\n\t\n\t\t\treturn vnode;\n\t\t}\n\t\n\t\tfunction cloneElement$1(element, props) {\n\t\t\tvar node = preact.h(element.nodeName || element.type, element.attributes || element.props, element.children || element.props.children);\n\t\n\t\t\tfor (var _len = arguments.length, children = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n\t\t\t\tchildren[_key - 2] = arguments[_key];\n\t\t\t}\n\t\n\t\t\tif (preact.cloneElement) {\n\t\t\t\treturn preact.cloneElement.apply(undefined, [node, props].concat(children));\n\t\t\t}\n\t\t\treturn createElement.apply(undefined, [node.nodeName, extend(extend({}, node.attributes || {}), props)].concat(children.length && children || node.children || []));\n\t\t}\n\t\n\t\tfunction isValidElement(element) {\n\t\t\treturn element && (element instanceof VNode || element.$$typeof === REACT_ELEMENT_TYPE);\n\t\t}\n\t\n\t\tfunction createStringRefProxy(name, component) {\n\t\t\treturn component._refProxies[name] || (component._refProxies[name] = function (resolved) {\n\t\t\t\tif (component && component.refs) {\n\t\t\t\t\tcomponent.refs[name] = resolved;\n\t\t\t\t\tif (resolved === null) {\n\t\t\t\t\t\tdelete component._refProxies[name];\n\t\t\t\t\t\tcomponent = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\n\t\tfunction applyClassName(_ref) {\n\t\t\tvar attributes = _ref.attributes;\n\t\n\t\t\tif (!attributes) return;\n\t\t\tvar cl = attributes.className || attributes.class;\n\t\t\tif (cl) attributes.className = cl;\n\t\t}\n\t\n\t\tfunction extend(base, props, all) {\n\t\t\tfor (var key in props) {\n\t\t\t\tif (all === true || props[key] != null) {\n\t\t\t\t\tbase[key] = props[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn base;\n\t\t}\n\t\n\t\tvar findDOMNode = function (component) {\n\t\t\treturn component.base || component;\n\t\t};\n\t\n\t\tfunction F() {}\n\t\n\t\tfunction createClass(obj) {\n\t\t\tfunction cl(props, context) {\n\t\t\t\textend(this, obj);\n\t\t\t\tComponent$1.call(this, props, context, BYPASS_HOOK);\n\t\t\t\tbindAll(this);\n\t\t\t\tnewComponentHook.call(this, props, context);\n\t\t\t}\n\t\n\t\t\tif (obj.propTypes) {\n\t\t\t\tcl.propTypes = obj.propTypes;\n\t\t\t}\n\t\t\tif (obj.defaultProps) {\n\t\t\t\tcl.defaultProps = obj.defaultProps;\n\t\t\t}\n\t\t\tif (obj.getDefaultProps) {\n\t\t\t\tcl.defaultProps = obj.getDefaultProps();\n\t\t\t}\n\t\n\t\t\tF.prototype = Component$1.prototype;\n\t\t\tcl.prototype = new F();\n\t\t\tcl.prototype.constructor = cl;\n\t\n\t\t\tcl.displayName = obj.displayName || 'Component';\n\t\n\t\t\treturn cl;\n\t\t}\n\t\n\t\tfunction bindAll(ctx) {\n\t\t\tfor (var _i in ctx) {\n\t\t\t\tvar v = ctx[_i];\n\t\t\t\tif (typeof v === 'function' && !v.__bound && !AUTOBIND_BLACKLIST.hasOwnProperty(_i)) {\n\t\t\t\t\t(ctx[_i] = v.bind(ctx)).__bound = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction callMethod(ctx, m, args) {\n\t\t\tif (typeof m === 'string') {\n\t\t\t\tm = ctx.constructor.prototype[m];\n\t\t\t}\n\t\t\tif (typeof m === 'function') {\n\t\t\t\treturn m.apply(ctx, args);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction multihook() {\n\t\t\tvar hooks = arguments;\n\t\t\treturn function () {\n\t\t\t\tvar ret = void 0;\n\t\t\t\tfor (var _i2 = 0; _i2 < hooks.length; _i2++) {\n\t\t\t\t\tvar r = callMethod(this, hooks[_i2], arguments);\n\t\t\t\t\tif (r !== undefined) ret = r;\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t};\n\t\t}\n\t\n\t\tfunction newComponentHook(props, context) {\n\t\t\tpropsHook.call(this, props, context);\n\t\t\tthis.componentWillReceiveProps = multihook(this.componentWillReceiveProps || 'componentWillReceiveProps', propsHook);\n\t\t\tthis.render = multihook(beforeRender, this.render || 'render', afterRender);\n\t\t}\n\t\n\t\tfunction propsHook(props) {\n\t\t\tif (!props) return;\n\t\n\t\t\tvar c = props.children;\n\t\t\tif (c && c.length === 1) {\n\t\t\t\tprops.children = c[0];\n\t\n\t\t\t\tif (props.children && typeof props.children === 'object') {\n\t\t\t\t\tprops.children.length = 1;\n\t\t\t\t\tprops.children[0] = props.children;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (DEV) {\n\t\t\t\tvar propTypes = this.propTypes || this.constructor.propTypes;\n\t\t\t\tif (propTypes) {\n\t\t\t\t\tfor (var prop in propTypes) {\n\t\t\t\t\t\tif (propTypes.hasOwnProperty(prop) && typeof propTypes[prop] === 'function') {\n\t\t\t\t\t\t\tvar err = propTypes[prop](props, prop, this.constructor.name, 'prop');\n\t\t\t\t\t\t\tif (err) throw err;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction beforeRender() {\n\t\t\tcurrentComponent = this;\n\t\t}\n\t\n\t\tfunction afterRender() {\n\t\t\tif (currentComponent === this) {\n\t\t\t\tcurrentComponent = null;\n\t\t\t}\n\t\t}\n\t\n\t\tfunction Component$1(props, context, opts) {\n\t\t\tpreact.Component.call(this, props, context);\n\t\t\tthis.refs = {};\n\t\t\tthis._refProxies = {};\n\t\t\tif (opts !== BYPASS_HOOK) {\n\t\t\t\tnewComponentHook.call(this, props, context);\n\t\t\t}\n\t\t}\n\t\tComponent$1.prototype = new preact.Component();\n\t\textend(Component$1.prototype, {\n\t\t\tconstructor: Component$1,\n\t\n\t\t\tisReactComponent: {},\n\t\n\t\t\tgetDOMNode: function () {\n\t\t\t\treturn this.base;\n\t\t\t},\n\t\t\tisMounted: function () {\n\t\t\t\treturn !!this.base;\n\t\t\t}\n\t\t});\n\t\n\t\tvar index = { version: version, DOM: DOM, PropTypes: PropTypes, Children: Children, render: render$1, createClass: createClass, createFactory: createFactory, createElement: createElement, cloneElement: cloneElement$1, isValidElement: isValidElement, findDOMNode: findDOMNode, unmountComponentAtNode: unmountComponentAtNode, Component: Component$1 };\n\t\n\t\treturn index;\n\t\n\t}));\n\t//# sourceMappingURL=preact-compat.js.map\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(271)))\n\n/***/ },\n/* 271 */\n/***/ function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ },\n/* 272 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, module], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n\t    factory(exports, module);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports, mod);\n\t    global.PropTypes = mod.exports;\n\t  }\n\t})(this, function (exports, module) {\n\t\n\t  'use strict';\n\t\n\t  var REACT_ELEMENT_TYPE = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 0xeac7;\n\t\n\t  var ReactElement = {};\n\t\n\t  ReactElement.isValidElement = function (object) {\n\t    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n\t  };\n\t\n\t  var ReactPropTypeLocationNames = {\n\t    prop: 'prop',\n\t    context: 'context',\n\t    childContext: 'child context'\n\t  };\n\t\n\t  var emptyFunction = {\n\t    thatReturns: function thatReturns(what) {\n\t      return function () {\n\t        return what;\n\t      };\n\t    }\n\t  };\n\t\n\t  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n\t  var FAUX_ITERATOR_SYMBOL = '@@iterator';\n\t  function getIteratorFn(maybeIterable) {\n\t    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n\t    if (typeof iteratorFn === 'function') {\n\t      return iteratorFn;\n\t    }\n\t  }\n\t\n\t  var ANONYMOUS = '<<anonymous>>';\n\t\n\t  var ReactPropTypes = {\n\t    array: createPrimitiveTypeChecker('array'),\n\t    bool: createPrimitiveTypeChecker('boolean'),\n\t    func: createPrimitiveTypeChecker('function'),\n\t    number: createPrimitiveTypeChecker('number'),\n\t    object: createPrimitiveTypeChecker('object'),\n\t    string: createPrimitiveTypeChecker('string'),\n\t\n\t    any: createAnyTypeChecker(),\n\t    arrayOf: createArrayOfTypeChecker,\n\t    element: createElementTypeChecker(),\n\t    instanceOf: createInstanceTypeChecker,\n\t    node: createNodeChecker(),\n\t    objectOf: createObjectOfTypeChecker,\n\t    oneOf: createEnumTypeChecker,\n\t    oneOfType: createUnionTypeChecker,\n\t    shape: createShapeTypeChecker\n\t  };\n\t\n\t  function createChainableTypeChecker(validate) {\n\t    function checkType(isRequired, props, propName, componentName, location, propFullName) {\n\t      componentName = componentName || ANONYMOUS;\n\t      propFullName = propFullName || propName;\n\t      if (props[propName] == null) {\n\t        var locationName = ReactPropTypeLocationNames[location];\n\t        if (isRequired) {\n\t          return new Error('Required ' + locationName + ' `' + propFullName + '` was not specified in ' + ('`' + componentName + '`.'));\n\t        }\n\t        return null;\n\t      } else {\n\t        return validate(props, propName, componentName, location, propFullName);\n\t      }\n\t    }\n\t\n\t    var chainedCheckType = checkType.bind(null, false);\n\t    chainedCheckType.isRequired = checkType.bind(null, true);\n\t\n\t    return chainedCheckType;\n\t  }\n\t\n\t  function createPrimitiveTypeChecker(expectedType) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== expectedType) {\n\t        var locationName = ReactPropTypeLocationNames[location];\n\t\n\t        var preciseType = getPreciseType(propValue);\n\t\n\t        return new Error('Invalid ' + locationName + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createAnyTypeChecker() {\n\t    return createChainableTypeChecker(emptyFunction.thatReturns(null));\n\t  }\n\t\n\t  function createArrayOfTypeChecker(typeChecker) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      if (!Array.isArray(propValue)) {\n\t        var locationName = ReactPropTypeLocationNames[location];\n\t        var propType = getPropType(propValue);\n\t        return new Error('Invalid ' + locationName + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n\t      }\n\t      for (var i = 0; i < propValue.length; i++) {\n\t        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']');\n\t        if (error instanceof Error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createElementTypeChecker() {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (!ReactElement.isValidElement(props[propName])) {\n\t        var locationName = ReactPropTypeLocationNames[location];\n\t        return new Error('Invalid ' + locationName + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a single ReactElement.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createInstanceTypeChecker(expectedClass) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (!(props[propName] instanceof expectedClass)) {\n\t        var locationName = ReactPropTypeLocationNames[location];\n\t        var expectedClassName = expectedClass.name || ANONYMOUS;\n\t        var actualClassName = getClassName(props[propName]);\n\t        return new Error('Invalid ' + locationName + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createEnumTypeChecker(expectedValues) {\n\t    if (!Array.isArray(expectedValues)) {\n\t      return createChainableTypeChecker(function () {\n\t        return new Error('Invalid argument supplied to oneOf, expected an instance of array.');\n\t      });\n\t    }\n\t\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      for (var i = 0; i < expectedValues.length; i++) {\n\t        if (propValue === expectedValues[i]) {\n\t          return null;\n\t        }\n\t      }\n\t\n\t      var locationName = ReactPropTypeLocationNames[location];\n\t      var valuesString = JSON.stringify(expectedValues);\n\t      return new Error('Invalid ' + locationName + ' `' + propFullName + '` of value `' + propValue + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createObjectOfTypeChecker(typeChecker) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        var locationName = ReactPropTypeLocationNames[location];\n\t        return new Error('Invalid ' + locationName + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n\t      }\n\t      for (var key in propValue) {\n\t        if (propValue.hasOwnProperty(key)) {\n\t          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key);\n\t          if (error instanceof Error) {\n\t            return error;\n\t          }\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createUnionTypeChecker(arrayOfTypeCheckers) {\n\t    if (!Array.isArray(arrayOfTypeCheckers)) {\n\t      return createChainableTypeChecker(function () {\n\t        return new Error('Invalid argument supplied to oneOfType, expected an instance of array.');\n\t      });\n\t    }\n\t\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n\t        var checker = arrayOfTypeCheckers[i];\n\t        if (checker(props, propName, componentName, location, propFullName) == null) {\n\t          return null;\n\t        }\n\t      }\n\t\n\t      var locationName = ReactPropTypeLocationNames[location];\n\t      return new Error('Invalid ' + locationName + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createNodeChecker() {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (!isNode(props[propName])) {\n\t        var locationName = ReactPropTypeLocationNames[location];\n\t        return new Error('Invalid ' + locationName + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createShapeTypeChecker(shapeTypes) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        var locationName = ReactPropTypeLocationNames[location];\n\t        return new Error('Invalid ' + locationName + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n\t      }\n\t      for (var key in shapeTypes) {\n\t        var checker = shapeTypes[key];\n\t        if (!checker) {\n\t          continue;\n\t        }\n\t        var error = checker(propValue, key, componentName, location, propFullName + '.' + key);\n\t        if (error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function isNode(propValue) {\n\t    switch (typeof propValue) {\n\t      case 'number':\n\t      case 'string':\n\t      case 'undefined':\n\t        return true;\n\t      case 'boolean':\n\t        return !propValue;\n\t      case 'object':\n\t        if (Array.isArray(propValue)) {\n\t          return propValue.every(isNode);\n\t        }\n\t        if (propValue === null || ReactElement.isValidElement(propValue)) {\n\t          return true;\n\t        }\n\t\n\t        var iteratorFn = getIteratorFn(propValue);\n\t        if (iteratorFn) {\n\t          var iterator = iteratorFn.call(propValue);\n\t          var step;\n\t          if (iteratorFn !== propValue.entries) {\n\t            while (!(step = iterator.next()).done) {\n\t              if (!isNode(step.value)) {\n\t                return false;\n\t              }\n\t            }\n\t          } else {\n\t            while (!(step = iterator.next()).done) {\n\t              var entry = step.value;\n\t              if (entry) {\n\t                if (!isNode(entry[1])) {\n\t                  return false;\n\t                }\n\t              }\n\t            }\n\t          }\n\t        } else {\n\t          return false;\n\t        }\n\t\n\t        return true;\n\t      default:\n\t        return false;\n\t    }\n\t  }\n\t\n\t  function getPropType(propValue) {\n\t    var propType = typeof propValue;\n\t    if (Array.isArray(propValue)) {\n\t      return 'array';\n\t    }\n\t    if (propValue instanceof RegExp) {\n\t      return 'object';\n\t    }\n\t    return propType;\n\t  }\n\t\n\t  function getPreciseType(propValue) {\n\t    var propType = getPropType(propValue);\n\t    if (propType === 'object') {\n\t      if (propValue instanceof Date) {\n\t        return 'date';\n\t      } else if (propValue instanceof RegExp) {\n\t        return 'regexp';\n\t      }\n\t    }\n\t    return propType;\n\t  }\n\t\n\t  function getClassName(propValue) {\n\t    if (!propValue.constructor || !propValue.constructor.name) {\n\t      return ANONYMOUS;\n\t    }\n\t    return propValue.constructor.name;\n\t  }\n\t\n\t  module.exports = ReactPropTypes;\n\t});\n\t\n\t//# sourceMappingURL=index.js.map\n\n/***/ },\n/* 273 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t(function (global, factory) {\n\t\t true ? module.exports = factory(__webpack_require__(274)) :\n\t\ttypeof define === 'function' && define.amd ? define(['preact'], factory) :\n\t\t(global.preactSvg = factory(global.preact));\n\t}(this, function (preact) { 'use strict';\n\t\n\t\tvar babelHelpers = {};\n\t\n\t\tbabelHelpers.classCallCheck = function (instance, Constructor) {\n\t\t  if (!(instance instanceof Constructor)) {\n\t\t    throw new TypeError(\"Cannot call a class as a function\");\n\t\t  }\n\t\t};\n\t\n\t\tbabelHelpers.extends = Object.assign || function (target) {\n\t\t  for (var i = 1; i < arguments.length; i++) {\n\t\t    var source = arguments[i];\n\t\n\t\t    for (var key in source) {\n\t\t      if (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t        target[key] = source[key];\n\t\t      }\n\t\t    }\n\t\t  }\n\t\n\t\t  return target;\n\t\t};\n\t\n\t\tbabelHelpers.inherits = function (subClass, superClass) {\n\t\t  if (typeof superClass !== \"function\" && superClass !== null) {\n\t\t    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n\t\t  }\n\t\n\t\t  subClass.prototype = Object.create(superClass && superClass.prototype, {\n\t\t    constructor: {\n\t\t      value: subClass,\n\t\t      enumerable: false,\n\t\t      writable: true,\n\t\t      configurable: true\n\t\t    }\n\t\t  });\n\t\t  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n\t\t};\n\t\n\t\tbabelHelpers.objectWithoutProperties = function (obj, keys) {\n\t\t  var target = {};\n\t\n\t\t  for (var i in obj) {\n\t\t    if (keys.indexOf(i) >= 0) continue;\n\t\t    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n\t\t    target[i] = obj[i];\n\t\t  }\n\t\n\t\t  return target;\n\t\t};\n\t\n\t\tbabelHelpers.possibleConstructorReturn = function (self, call) {\n\t\t  if (!self) {\n\t\t    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\t\t  }\n\t\n\t\t  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n\t\t};\n\t\n\t\tbabelHelpers;\n\t\n\t\tvar DOM = typeof document !== 'undefined' && !!document.createElement;\n\t\n\t\tvar SVG_ATTRS = ['viewBox'];\n\t\n\t\tvar NS = {\n\t\t\txlink: 'http://www.w3.org/1999/xlink'\n\t\t};\n\t\n\t\tvar NS_ATTR = /^([a-zA-Z]+)(?:\\:|([A-Z]))/;\n\t\n\t\tvar PROP_TO_ATTR_MAP = {\n\t\t\t'className': 'class'\n\t\t};\n\t\n\t\tvar EMPTY = {};\n\t\n\t\tvar updateMode = false;\n\t\n\t\tif (DOM) {\n\t\t\t(function () {\n\t\t\t\tvar div = document.createElement('div');\n\t\n\t\t\t\tvar oldCreate = document.createElement;\n\t\t\t\tdocument.createElement = function (name) {\n\t\t\t\t\tif (updateMode || name === 'svg') {\n\t\t\t\t\t\tvar el = document.createElementNS('http://www.w3.org/2000/svg', name);\n\t\n\t\t\t\t\t\tel.setAttribute = createAttributeShim('setAttribute');\n\t\t\t\t\t\tel.getAttribute = createAttributeShim('getAttribute');\n\t\t\t\t\t\tel.removeAttribute = createAttributeShim('removeAttribute');\n\t\t\t\t\t\tfor (var key in el) {\n\t\t\t\t\t\t\tif (~SVG_ATTRS.indexOf(key) || !(key in div) || PROP_TO_ATTR_MAP.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\toverwriteProperty(el, key);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn el;\n\t\t\t\t\t}\n\t\t\t\t\treturn oldCreate.call(document, name);\n\t\t\t\t};\n\t\t\t})();\n\t\t}\n\t\n\t\tvar PROPERTY_ERRORS = {};\n\t\tvar hasPropertyErrors = false;\n\t\n\t\tfunction overwriteProperty(el, key) {\n\t\t\tvar err = PROPERTY_ERRORS[key];\n\t\t\tif (err === false) {\n\t\t\t\tObject.defineProperty(el, key, contentPropertyDef(key));\n\t\t\t} else {\n\t\t\t\tattemptOverwriteProperty(el, key);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction attemptOverwriteProperty(el, key) {\n\t\t\ttry {\n\t\t\t\tObject.defineProperty(el, key, contentPropertyDef(key));\n\t\t\t\tPROPERTY_ERRORS[key] = false;\n\t\t\t} catch (e) {\n\t\t\t\tif (!PROPERTY_ERRORS[key]) {\n\t\t\t\t\tvar err = el.nodeName + ': ' + e;\n\t\t\t\t\tPROPERTY_ERRORS[key] = err;\n\t\t\t\t\tif (!hasPropertyErrors && 'undefined' !== typeof console && console.warn) {\n\t\t\t\t\t\thasPropertyErrors = true;\n\t\t\t\t\t\tconsole.warn('Error overwriting some SVG properties.', { errors: PROPERTY_ERRORS });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tvar memoize = function (fn) {\n\t\t\tvar mem = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\treturn function (k) {\n\t\t\t\treturn mem.hasOwnProperty(k) ? mem[k] : mem[k] = fn(k);\n\t\t\t};\n\t\t};\n\t\n\t\tvar contentPropertyDef = memoize(function (prop) {\n\t\t\tvar attr = arguments.length <= 1 || arguments[1] === undefined ? PROP_TO_ATTR_MAP[prop] || prop : arguments[1];\n\t\t\treturn {\n\t\t\t\tset: function (v) {\n\t\t\t\t\tif (v === null || v === undefined) this.removeAttribute(attr);else this.setAttribute(attr, v);\n\t\t\t\t},\n\t\t\t\tget: function () {\n\t\t\t\t\treturn this.getAttribute(attr);\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t\n\t\tvar createAttributeShim = memoize(function (method) {\n\t\t\treturn function (name, value) {\n\t\t\t\tvar proto = this.constructor.prototype,\n\t\t\t\t    p = name.match(NS_ATTR);\n\t\t\t\tif (p && NS.hasOwnProperty(p[1])) {\n\t\t\t\t\tname = name.replace(NS_ATTR, '$2').toLowerCase();\n\t\t\t\t\tvar ns = NS[p[1]];\n\t\t\t\t\treturn proto[method + 'NS'].call(this, ns, name, value);\n\t\t\t\t} else {\n\t\t\t\t\treturn proto[method].call(this, name, value);\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t\n\t\tvar SVG = function (_Component) {\n\t\t\tbabelHelpers.inherits(SVG, _Component);\n\t\n\t\t\tfunction SVG() {\n\t\t\t\tbabelHelpers.classCallCheck(this, SVG);\n\t\t\t\treturn babelHelpers.possibleConstructorReturn(this, _Component.apply(this, arguments));\n\t\t\t}\n\t\n\t\t\tSVG.prototype.componentWillUpdate = function componentWillUpdate() {\n\t\t\t\tupdateMode = true;\n\t\t\t};\n\t\n\t\t\tSVG.prototype.componentDidUpdate = function componentDidUpdate() {\n\t\t\t\tupdateMode = false;\n\t\t\t};\n\t\n\t\t\tSVG.prototype.render = function render(_ref) {\n\t\t\t\tvar children = _ref.children;\n\t\t\t\tvar props = babelHelpers.objectWithoutProperties(_ref, ['children']);\n\t\n\t\t\t\tif (!this.hasRendered) {\n\t\t\t\t\tthis.hasRendered = updateMode = true;\n\t\n\t\t\t\t\tthis.setState(EMPTY, setStateUpdateProxy(this));\n\t\t\t\t}\n\t\n\t\t\t\treturn preact.h(\n\t\t\t\t\t'svg',\n\t\t\t\t\tbabelHelpers.extends({ version: '1.1', xmlns: 'http://www.w3.org/2000/svg' }, props),\n\t\t\t\t\tchildren\n\t\t\t\t);\n\t\t\t};\n\t\n\t\t\treturn SVG;\n\t\t}(preact.Component);\n\t\n\t\tfunction setStateUpdateProxy(component) {\n\t\t\treturn function () {\n\t\t\t\tcomponent.componentDidUpdate();\n\t\t\t\tcomponent = null;\n\t\t\t};\n\t\t}\n\t\n\t\treturn SVG;\n\t\n\t}));\n\t//# sourceMappingURL=preact-svg.js.map\n\n/***/ },\n/* 274 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate) {!function(global, factory) {\n\t     true ? module.exports = factory() : 'function' == typeof define && define.amd ? define(factory) : global.preact = factory();\n\t}(this, function() {\n\t    'use strict';\n\t    function VNode(nodeName, attributes, children) {\n\t        this.nodeName = nodeName;\n\t        this.attributes = attributes;\n\t        this.children = children;\n\t    }\n\t    function extend(obj, props) {\n\t        for (var i in props) if (hasOwnProperty.call(props, i)) obj[i] = props[i];\n\t        return obj;\n\t    }\n\t    function clone(obj) {\n\t        var out = {};\n\t        for (var i in obj) out[i] = obj[i];\n\t        return out;\n\t    }\n\t    function memoize(fn, mem) {\n\t        mem = mem || {};\n\t        return function(k) {\n\t            return hasOwnProperty.call(mem, k) ? mem[k] : mem[k] = fn(k);\n\t        };\n\t    }\n\t    function delve(obj, key) {\n\t        for (var p = key.split('.'), i = 0; i < p.length && obj; i++) obj = obj[p[i]];\n\t        return obj;\n\t    }\n\t    function toArray(obj) {\n\t        var arr = [], i = obj.length;\n\t        for (;i--; ) arr[i] = obj[i];\n\t        return arr;\n\t    }\n\t    function styleObjToCss(s) {\n\t        var str = '';\n\t        for (var prop in s) {\n\t            var val = s[prop];\n\t            if (!empty(val)) {\n\t                if (str) str += ' ';\n\t                str += jsToCss(prop);\n\t                str += ': ';\n\t                str += val;\n\t                if ('number' == typeof val && !NON_DIMENSION_PROPS[prop]) str += 'px';\n\t                str += ';';\n\t            }\n\t        }\n\t        return str;\n\t    }\n\t    function hashToClassName(c) {\n\t        var str = '';\n\t        for (var prop in c) if (c[prop]) {\n\t            if (str) str += ' ';\n\t            str += prop;\n\t        }\n\t        return str;\n\t    }\n\t    function normalize(obj, prop, fn) {\n\t        var v = obj[prop];\n\t        if (v && !isString(v)) obj[prop] = fn(v);\n\t    }\n\t    function optionsHook(name, a, b) {\n\t        return hook(options, name, a, b);\n\t    }\n\t    function hook(obj, name, a, b, c) {\n\t        if (obj[name]) return obj[name](a, b, c); else ;\n\t    }\n\t    function deepHook(obj, type) {\n\t        do hook(obj, type); while (obj = obj._component);\n\t    }\n\t    function h(nodeName, attributes) {\n\t        var len = arguments.length, attributeChildren = attributes && attributes.children, children = void 0, arr = void 0, lastSimple = void 0;\n\t        if (attributeChildren) {\n\t            delete attributes.children;\n\t            if (3 > len) return h(nodeName, attributes, attributeChildren);\n\t        }\n\t        for (var i = 2; len > i; i++) {\n\t            var _p = arguments[i];\n\t            if (!falsey(_p)) {\n\t                if (!children) children = [];\n\t                if (_p.join) arr = _p; else {\n\t                    arr = SHARED_TEMP_ARRAY;\n\t                    arr[0] = _p;\n\t                }\n\t                for (var j = 0; j < arr.length; j++) {\n\t                    var child = arr[j], simple = !(falsey(child) || child instanceof VNode);\n\t                    if (simple) child = String(child);\n\t                    if (simple && lastSimple) children[children.length - 1] += child; else if (!falsey(child)) children.push(child);\n\t                    lastSimple = simple;\n\t                }\n\t            } else ;\n\t        }\n\t        var p = new VNode(nodeName, attributes || void 0, children || void 0);\n\t        optionsHook('vnode', p);\n\t        return p;\n\t    }\n\t    function createLinkedState(component, key, eventPath) {\n\t        var path = key.split('.'), p0 = path[0], len = path.length;\n\t        return function(e) {\n\t            var _component$setState;\n\t            var t = this, s = component.state, obj = s, v = void 0, i = void 0;\n\t            if (isString(eventPath)) {\n\t                v = delve(e, eventPath);\n\t                if (empty(v) && (t = t._component)) v = delve(t, eventPath);\n\t            } else v = (t.nodeName + t.type).match(/^input(check|rad)/i) ? t.checked : t.value;\n\t            if (isFunction(v)) v = v.call(t);\n\t            if (len > 1) {\n\t                for (i = 0; len - 1 > i; i++) obj = obj[path[i]] || (obj[path[i]] = {});\n\t                obj[path[i]] = v;\n\t                v = s[p0];\n\t            }\n\t            component.setState((_component$setState = {}, _component$setState[p0] = v, _component$setState));\n\t        };\n\t    }\n\t    function enqueueRender(component) {\n\t        if (1 === items.push(component)) (options.debounceRendering || setImmediate)(rerender);\n\t    }\n\t    function rerender() {\n\t        if (items.length) {\n\t            var currentItems = items, p = void 0;\n\t            items = itemsOffline;\n\t            itemsOffline = currentItems;\n\t            for (;p = currentItems.pop(); ) if (p._dirty) renderComponent(p);\n\t        }\n\t    }\n\t    function isFunctionalComponent(_ref) {\n\t        var nodeName = _ref.nodeName;\n\t        return isFunction(nodeName) && !(nodeName.prototype && nodeName.prototype.render);\n\t    }\n\t    function buildFunctionalComponent(vnode, context) {\n\t        return vnode.nodeName(getNodeProps(vnode), context || EMPTY) || EMPTY_BASE;\n\t    }\n\t    function ensureNodeData(node) {\n\t        return node[ATTR_KEY] || (node[ATTR_KEY] = {});\n\t    }\n\t    function getNodeType(node) {\n\t        return node.nodeType;\n\t    }\n\t    function appendChildren(parent, children) {\n\t        var len = children.length, many = len > 2, into = many ? document.createDocumentFragment() : parent;\n\t        for (var i = 0; len > i; i++) into.appendChild(children[i]);\n\t        if (many) parent.appendChild(into);\n\t    }\n\t    function removeNode(node) {\n\t        var p = node.parentNode;\n\t        if (p) p.removeChild(node);\n\t    }\n\t    function getAccessor(node, name, value, cache) {\n\t        if ('type' !== name && 'style' !== name && name in node) return node[name];\n\t        var attrs = node[ATTR_KEY];\n\t        if (cache !== !1 && attrs && hasOwnProperty.call(attrs, name)) return attrs[name];\n\t        if ('class' === name) return node.className;\n\t        if ('style' === name) return node.style.cssText; else return value;\n\t    }\n\t    function setAccessor(node, name, value) {\n\t        if ('class' === name) node.className = value || ''; else if ('style' === name) node.style.cssText = value || ''; else if ('dangerouslySetInnerHTML' === name) {\n\t            if (value && value.__html) node.innerHTML = value.__html;\n\t        } else if ('key' === name || name in node && 'type' !== name) {\n\t            node[name] = value;\n\t            if (falsey(value)) node.removeAttribute(name);\n\t        } else setComplexAccessor(node, name, value);\n\t        ensureNodeData(node)[name] = value;\n\t    }\n\t    function setComplexAccessor(node, name, value) {\n\t        if ('on' !== name.substring(0, 2)) {\n\t            var type = typeof value;\n\t            if (falsey(value)) node.removeAttribute(name); else if ('function' !== type && 'object' !== type) node.setAttribute(name, value);\n\t        } else {\n\t            var _type = normalizeEventName(name), l = node._listeners || (node._listeners = {}), fn = !l[_type] ? 'add' : !value ? 'remove' : null;\n\t            if (fn) node[fn + 'EventListener'](_type, eventProxy);\n\t            l[_type] = value;\n\t        }\n\t    }\n\t    function eventProxy(e) {\n\t        var fn = this._listeners[normalizeEventName(e.type)];\n\t        if (fn) return fn.call(this, optionsHook('event', e) || e); else ;\n\t    }\n\t    function getNodeAttributes(node) {\n\t        return node[ATTR_KEY] || getRawNodeAttributes(node) || EMPTY;\n\t    }\n\t    function getRawNodeAttributes(node) {\n\t        var list = node.attributes;\n\t        if (!list || !list.getNamedItem) return list; else return getAttributesAsObject(list);\n\t    }\n\t    function getAttributesAsObject(list) {\n\t        var attrs = void 0;\n\t        for (var i = list.length; i--; ) {\n\t            var item = list[i];\n\t            if (!attrs) attrs = {};\n\t            attrs[item.name] = item.value;\n\t        }\n\t        return attrs;\n\t    }\n\t    function isSameNodeType(node, vnode) {\n\t        if (isFunctionalComponent(vnode)) return !0;\n\t        var nodeName = vnode.nodeName;\n\t        if (isFunction(nodeName)) return node._componentConstructor === nodeName;\n\t        if (3 === getNodeType(node)) return isString(vnode); else return toLowerCase(node.nodeName) === nodeName;\n\t    }\n\t    function getNodeProps(vnode) {\n\t        var props = clone(vnode.attributes), c = vnode.children;\n\t        if (c) props.children = c;\n\t        var defaultProps = vnode.nodeName.defaultProps;\n\t        if (defaultProps) for (var i in defaultProps) if (hasOwnProperty.call(defaultProps, i) && !(i in props)) props[i] = defaultProps[i];\n\t        return props;\n\t    }\n\t    function collectNode(node) {\n\t        cleanNode(node);\n\t        var name = normalizeName(node.nodeName), list = nodes[name];\n\t        if (list) list.push(node); else nodes[name] = [ node ];\n\t    }\n\t    function createNode(nodeName) {\n\t        var name = normalizeName(nodeName), list = nodes[name], node = list && list.pop() || document.createElement(nodeName);\n\t        ensureNodeData(node);\n\t        return node;\n\t    }\n\t    function cleanNode(node) {\n\t        removeNode(node);\n\t        if (3 !== getNodeType(node)) {\n\t            if (!node[ATTR_KEY]) node[ATTR_KEY] = getRawNodeAttributes(node);\n\t            node._component = node._componentConstructor = null;\n\t        }\n\t    }\n\t    function diff(dom, vnode, context) {\n\t        var originalAttributes = vnode.attributes;\n\t        for (;isFunctionalComponent(vnode); ) vnode = buildFunctionalComponent(vnode, context);\n\t        if (isFunction(vnode.nodeName)) return buildComponentFromVNode(dom, vnode, context);\n\t        if (isString(vnode)) {\n\t            if (dom) {\n\t                var type = getNodeType(dom);\n\t                if (3 === type) {\n\t                    dom[TEXT_CONTENT] = vnode;\n\t                    return dom;\n\t                } else if (1 === type) collectNode(dom);\n\t            }\n\t            return document.createTextNode(vnode);\n\t        }\n\t        var out = dom, nodeName = vnode.nodeName || UNDEFINED_ELEMENT;\n\t        if (!dom) out = createNode(nodeName); else if (toLowerCase(dom.nodeName) !== nodeName) {\n\t            out = createNode(nodeName);\n\t            appendChildren(out, toArray(dom.childNodes));\n\t            recollectNodeTree(dom);\n\t        }\n\t        innerDiffNode(out, vnode, context);\n\t        diffAttributes(out, vnode);\n\t        if (originalAttributes && originalAttributes.ref) (out[ATTR_KEY].ref = originalAttributes.ref)(out);\n\t        return out;\n\t    }\n\t    function innerDiffNode(dom, vnode, context) {\n\t        var children = void 0, keyed = void 0, keyedLen = 0, len = dom.childNodes.length, childrenLen = 0;\n\t        if (len) {\n\t            children = [];\n\t            for (var i = 0; len > i; i++) {\n\t                var child = dom.childNodes[i], key = child._component ? child._component.__key : getAccessor(child, 'key');\n\t                if (!empty(key)) {\n\t                    if (!keyed) keyed = {};\n\t                    keyed[key] = child;\n\t                    keyedLen++;\n\t                } else children[childrenLen++] = child;\n\t            }\n\t        }\n\t        var vchildren = vnode.children, vlen = vchildren && vchildren.length, min = 0;\n\t        if (vlen) for (var i = 0; vlen > i; i++) {\n\t            var vchild = vchildren[i], child = void 0;\n\t            if (keyedLen) {\n\t                var attrs = vchild.attributes, key = attrs && attrs.key;\n\t                if (!empty(key) && hasOwnProperty.call(keyed, key)) {\n\t                    child = keyed[key];\n\t                    keyed[key] = null;\n\t                    keyedLen--;\n\t                }\n\t            }\n\t            if (!child && childrenLen > min) for (var j = min; childrenLen > j; j++) {\n\t                var c = children[j];\n\t                if (c && isSameNodeType(c, vchild)) {\n\t                    child = c;\n\t                    children[j] = null;\n\t                    if (j === childrenLen - 1) childrenLen--;\n\t                    if (j === min) min++;\n\t                    break;\n\t                }\n\t            }\n\t            child = diff(child, vchild, context);\n\t            if (dom.childNodes[i] !== child) {\n\t                var c = child.parentNode !== dom && child._component, next = dom.childNodes[i + 1];\n\t                if (c) deepHook(c, 'componentWillMount');\n\t                if (next) dom.insertBefore(child, next); else dom.appendChild(child);\n\t                if (c) deepHook(c, 'componentDidMount');\n\t            }\n\t        }\n\t        if (keyedLen) for (var i in keyed) if (hasOwnProperty.call(keyed, i) && keyed[i]) children[min = childrenLen++] = keyed[i];\n\t        if (childrenLen > min) removeOrphanedChildren(children);\n\t    }\n\t    function removeOrphanedChildren(children, unmountOnly) {\n\t        for (var i = children.length; i--; ) {\n\t            var child = children[i];\n\t            if (child) recollectNodeTree(child, unmountOnly);\n\t        }\n\t    }\n\t    function recollectNodeTree(node, unmountOnly) {\n\t        var attrs = node[ATTR_KEY];\n\t        if (attrs) hook(attrs, 'ref', null);\n\t        var component = node._component;\n\t        if (component) unmountComponent(component, !unmountOnly); else {\n\t            if (!unmountOnly) {\n\t                if (1 !== getNodeType(node)) {\n\t                    removeNode(node);\n\t                    return;\n\t                }\n\t                collectNode(node);\n\t            }\n\t            var c = node.childNodes;\n\t            if (c && c.length) removeOrphanedChildren(c, unmountOnly);\n\t        }\n\t    }\n\t    function diffAttributes(dom, vnode) {\n\t        var old = getNodeAttributes(dom) || EMPTY, attrs = vnode.attributes || EMPTY, name = void 0, value = void 0;\n\t        for (name in old) if (empty(attrs[name])) setAccessor(dom, name, null);\n\t        if (attrs !== EMPTY) for (name in attrs) if (hasOwnProperty.call(attrs, name)) {\n\t            value = attrs[name];\n\t            if (!empty(value) && value != getAccessor(dom, name)) setAccessor(dom, name, value);\n\t        }\n\t    }\n\t    function collectComponent(component) {\n\t        var name = component.constructor.name, list = components[name];\n\t        if (list) list.push(component); else components[name] = [ component ];\n\t    }\n\t    function createComponent(Ctor, props, context) {\n\t        var list = components[Ctor.name], len = list && list.length, c = void 0;\n\t        for (var i = 0; len > i; i++) {\n\t            c = list[i];\n\t            if (c.constructor === Ctor) {\n\t                list.splice(i, 1);\n\t                var inst = new Ctor(props, context);\n\t                inst.nextBase = c.base;\n\t                return inst;\n\t            }\n\t        }\n\t        return new Ctor(props, context);\n\t    }\n\t    function triggerComponentRender(component) {\n\t        if (!component._dirty) {\n\t            component._dirty = !0;\n\t            enqueueRender(component);\n\t        }\n\t    }\n\t    function setComponentProps(component, props, opts, context) {\n\t        var d = component._disableRendering;\n\t        component.__ref = props.ref;\n\t        component.__key = props.key;\n\t        delete props.ref;\n\t        delete props.key;\n\t        component._disableRendering = !0;\n\t        if (context) {\n\t            if (!component.prevContext) component.prevContext = component.context;\n\t            component.context = context;\n\t        }\n\t        if (component.base) hook(component, 'componentWillReceiveProps', props, component.context);\n\t        if (!component.prevProps) component.prevProps = component.props;\n\t        component.props = props;\n\t        component._disableRendering = d;\n\t        if (!opts || opts.render !== !1) if (opts && opts.renderSync || options.syncComponentUpdates !== !1) renderComponent(component); else triggerComponentRender(component);\n\t        hook(component, '__ref', component);\n\t    }\n\t    function renderComponent(component, opts) {\n\t        if (!component._disableRendering) {\n\t            var skip = void 0, rendered = void 0, props = component.props, state = component.state, context = component.context, previousProps = component.prevProps || props, previousState = component.prevState || state, previousContext = component.prevContext || context, isUpdate = component.base, initialBase = isUpdate || component.nextBase;\n\t            if (isUpdate) {\n\t                component.props = previousProps;\n\t                component.state = previousState;\n\t                component.context = previousContext;\n\t                if (hook(component, 'shouldComponentUpdate', props, state, context) === !1) skip = !0; else hook(component, 'componentWillUpdate', props, state, context);\n\t                component.props = props;\n\t                component.state = state;\n\t                component.context = context;\n\t            }\n\t            component.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n\t            component._dirty = !1;\n\t            if (!skip) {\n\t                rendered = hook(component, 'render', props, state, context);\n\t                var childComponent = rendered && rendered.nodeName, childContext = component.getChildContext ? component.getChildContext() : context, toUnmount = void 0, base = void 0;\n\t                if (isFunction(childComponent) && childComponent.prototype.render) {\n\t                    var inst = component._component;\n\t                    if (inst && inst.constructor !== childComponent) {\n\t                        toUnmount = inst;\n\t                        inst = null;\n\t                    }\n\t                    var childProps = getNodeProps(rendered);\n\t                    if (inst) setComponentProps(inst, childProps, SYNC_RENDER, childContext); else {\n\t                        inst = createComponent(childComponent, childProps, childContext);\n\t                        inst._parentComponent = component;\n\t                        component._component = inst;\n\t                        if (isUpdate) deepHook(inst, 'componentWillMount');\n\t                        setComponentProps(inst, childProps, NO_RENDER, childContext);\n\t                        renderComponent(inst, DOM_RENDER);\n\t                        if (isUpdate) deepHook(inst, 'componentDidMount');\n\t                    }\n\t                    base = inst.base;\n\t                } else {\n\t                    var cbase = initialBase;\n\t                    toUnmount = component._component;\n\t                    if (toUnmount) cbase = component._component = null;\n\t                    if (initialBase || opts && opts.build) base = diff(cbase, rendered || EMPTY_BASE, childContext);\n\t                }\n\t                if (initialBase && base !== initialBase) {\n\t                    var p = initialBase.parentNode;\n\t                    if (p && base !== p) p.replaceChild(base, initialBase);\n\t                }\n\t                if (toUnmount) unmountComponent(toUnmount, !0);\n\t                component.base = base;\n\t                if (base) {\n\t                    var componentRef = component, t = component;\n\t                    for (;t = t._parentComponent; ) componentRef = t;\n\t                    base._component = componentRef;\n\t                    base._componentConstructor = componentRef.constructor;\n\t                }\n\t                if (isUpdate) hook(component, 'componentDidUpdate', previousProps, previousState, previousContext);\n\t            }\n\t            var cb = component._renderCallbacks, fn = void 0;\n\t            if (cb) for (;fn = cb.pop(); ) fn.call(component);\n\t            return rendered;\n\t        }\n\t    }\n\t    function buildComponentFromVNode(dom, vnode, context) {\n\t        var c = dom && dom._component, oldDom = dom;\n\t        var isOwner = c && dom._componentConstructor === vnode.nodeName;\n\t        for (;c && !isOwner && (c = c._parentComponent); ) isOwner = c.constructor === vnode.nodeName;\n\t        if (isOwner) {\n\t            setComponentProps(c, getNodeProps(vnode), SYNC_RENDER, context);\n\t            dom = c.base;\n\t        } else {\n\t            if (c) {\n\t                unmountComponent(c, !0);\n\t                dom = oldDom = null;\n\t            }\n\t            dom = createComponentFromVNode(vnode, dom, context);\n\t            if (oldDom && dom !== oldDom) {\n\t                oldDom._component = null;\n\t                recollectNodeTree(oldDom);\n\t            }\n\t        }\n\t        return dom;\n\t    }\n\t    function createComponentFromVNode(vnode, dom, context) {\n\t        var props = getNodeProps(vnode);\n\t        var component = createComponent(vnode.nodeName, props, context);\n\t        if (dom && !component.base) component.base = dom;\n\t        setComponentProps(component, props, NO_RENDER, context);\n\t        renderComponent(component, DOM_RENDER);\n\t        return component.base;\n\t    }\n\t    function unmountComponent(component, remove) {\n\t        hook(component, '__ref', null);\n\t        hook(component, 'componentWillUnmount');\n\t        var inner = component._component;\n\t        if (inner) {\n\t            unmountComponent(inner, remove);\n\t            remove = !1;\n\t        }\n\t        var base = component.base;\n\t        if (base) {\n\t            if (remove !== !1) removeNode(base);\n\t            removeOrphanedChildren(base.childNodes, !0);\n\t        }\n\t        if (remove) {\n\t            component._parentComponent = null;\n\t            collectComponent(component);\n\t        }\n\t        hook(component, 'componentDidUnmount');\n\t    }\n\t    function Component(props, context) {\n\t        this._dirty = this._disableRendering = !1;\n\t        this.prevState = this.prevProps = this.prevContext = this.base = this.nextBase = this._parentComponent = this._component = this.__ref = this.__key = this._linkedStates = this._renderCallbacks = null;\n\t        this.context = context || {};\n\t        this.props = props;\n\t        this.state = hook(this, 'getInitialState') || {};\n\t    }\n\t    function render(vnode, parent, merge) {\n\t        var existing = merge && merge._component && merge._componentConstructor === vnode.nodeName, built = diff(merge, vnode), c = !existing && built._component;\n\t        if (c) deepHook(c, 'componentWillMount');\n\t        if (built.parentNode !== parent) parent.appendChild(built);\n\t        if (c) deepHook(c, 'componentDidMount');\n\t        return built;\n\t    }\n\t    var NO_RENDER = {\n\t        render: !1\n\t    };\n\t    var SYNC_RENDER = {\n\t        renderSync: !0\n\t    };\n\t    var DOM_RENDER = {\n\t        build: !0\n\t    };\n\t    var EMPTY = {};\n\t    var EMPTY_BASE = '';\n\t    var HAS_DOM = 'undefined' != typeof document;\n\t    var TEXT_CONTENT = !HAS_DOM || 'textContent' in document ? 'textContent' : 'nodeValue';\n\t    var ATTR_KEY = 'undefined' != typeof Symbol ? Symbol['for']('preactattr') : '__preactattr_';\n\t    var UNDEFINED_ELEMENT = 'undefined';\n\t    var NON_DIMENSION_PROPS = {\n\t        boxFlex: 1,\n\t        boxFlexGroup: 1,\n\t        columnCount: 1,\n\t        fillOpacity: 1,\n\t        flex: 1,\n\t        flexGrow: 1,\n\t        flexPositive: 1,\n\t        flexShrink: 1,\n\t        flexNegative: 1,\n\t        fontWeight: 1,\n\t        lineClamp: 1,\n\t        lineHeight: 1,\n\t        opacity: 1,\n\t        order: 1,\n\t        orphans: 1,\n\t        strokeOpacity: 1,\n\t        widows: 1,\n\t        zIndex: 1,\n\t        zoom: 1\n\t    };\n\t    var isFunction = function(obj) {\n\t        return 'function' == typeof obj;\n\t    };\n\t    var isString = function(obj) {\n\t        return 'string' == typeof obj;\n\t    };\n\t    var hasOwnProperty = {}.hasOwnProperty;\n\t    var empty = function(x) {\n\t        return null == x;\n\t    };\n\t    var falsey = function(value) {\n\t        return value === !1 || null == value;\n\t    };\n\t    var jsToCss = memoize(function(s) {\n\t        return s.replace(/([A-Z])/g, '-$1').toLowerCase();\n\t    });\n\t    var toLowerCase = memoize(function(s) {\n\t        return s.toLowerCase();\n\t    });\n\t    var ch = void 0;\n\t    try {\n\t        ch = new MessageChannel();\n\t    } catch (e) {}\n\t    var setImmediate = ch ? function(f) {\n\t        ch.port1.onmessage = f;\n\t        ch.port2.postMessage('');\n\t    } : setTimeout;\n\t    var options = {\n\t        vnode: function(n) {\n\t            var attrs = n.attributes;\n\t            if (attrs && !isFunction(n.nodeName)) {\n\t                var p = attrs.className;\n\t                if (p) {\n\t                    attrs['class'] = p;\n\t                    delete attrs.className;\n\t                }\n\t                if (attrs['class']) normalize(attrs, 'class', hashToClassName);\n\t                if (attrs.style) normalize(attrs, 'style', styleObjToCss);\n\t            }\n\t        }\n\t    };\n\t    var SHARED_TEMP_ARRAY = [];\n\t    var items = [];\n\t    var itemsOffline = [];\n\t    var normalizeEventName = memoize(function(t) {\n\t        return t.replace(/^on/i, '').toLowerCase();\n\t    });\n\t    var nodes = {};\n\t    var normalizeName = memoize(function(name) {\n\t        return name.toUpperCase();\n\t    });\n\t    var components = {};\n\t    extend(Component.prototype, {\n\t        linkState: function(key, eventPath) {\n\t            var c = this._linkedStates || (this._linkedStates = {}), cacheKey = key + '|' + (eventPath || '');\n\t            return c[cacheKey] || (c[cacheKey] = createLinkedState(this, key, eventPath));\n\t        },\n\t        setState: function(state, callback) {\n\t            var s = this.state;\n\t            if (!this.prevState) this.prevState = clone(s);\n\t            extend(s, isFunction(state) ? state(s, this.props) : state);\n\t            if (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n\t            triggerComponentRender(this);\n\t        },\n\t        forceUpdate: function() {\n\t            renderComponent(this);\n\t        },\n\t        render: function() {\n\t            return null;\n\t        }\n\t    });\n\t    var preact = {\n\t        h: h,\n\t        Component: Component,\n\t        render: render,\n\t        rerender: rerender,\n\t        options: options,\n\t        hooks: options\n\t    };\n\t    return preact;\n\t});\n\t//# sourceMappingURL=preact.js.map\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(275).setImmediate))\n\n/***/ },\n/* 275 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate, clearImmediate) {var nextTick = __webpack_require__(271).nextTick;\n\tvar apply = Function.prototype.apply;\n\tvar slice = Array.prototype.slice;\n\tvar immediateIds = {};\n\tvar nextImmediateId = 0;\n\t\n\t// DOM APIs, for completeness\n\t\n\texports.setTimeout = function() {\n\t  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n\t};\n\texports.setInterval = function() {\n\t  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n\t};\n\texports.clearTimeout =\n\texports.clearInterval = function(timeout) { timeout.close(); };\n\t\n\tfunction Timeout(id, clearFn) {\n\t  this._id = id;\n\t  this._clearFn = clearFn;\n\t}\n\tTimeout.prototype.unref = Timeout.prototype.ref = function() {};\n\tTimeout.prototype.close = function() {\n\t  this._clearFn.call(window, this._id);\n\t};\n\t\n\t// Does not start the time, just sets up the members needed.\n\texports.enroll = function(item, msecs) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = msecs;\n\t};\n\t\n\texports.unenroll = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = -1;\n\t};\n\t\n\texports._unrefActive = exports.active = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t\n\t  var msecs = item._idleTimeout;\n\t  if (msecs >= 0) {\n\t    item._idleTimeoutId = setTimeout(function onTimeout() {\n\t      if (item._onTimeout)\n\t        item._onTimeout();\n\t    }, msecs);\n\t  }\n\t};\n\t\n\t// That's not how node.js implements it but the exposed api is the same.\n\texports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n\t  var id = nextImmediateId++;\n\t  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\t\n\t  immediateIds[id] = true;\n\t\n\t  nextTick(function onNextTick() {\n\t    if (immediateIds[id]) {\n\t      // fn.call() is faster so we optimize for the common use-case\n\t      // @see http://jsperf.com/call-apply-segu\n\t      if (args) {\n\t        fn.apply(null, args);\n\t      } else {\n\t        fn.call(null);\n\t      }\n\t      // Prevent ids from leaking\n\t      exports.clearImmediate(id);\n\t    }\n\t  });\n\t\n\t  return id;\n\t};\n\t\n\texports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n\t  delete immediateIds[id];\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(275).setImmediate, __webpack_require__(275).clearImmediate))\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** dist/es5-polyfill-io.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6746277060a128e699c8\n **/","/*global ftNextFireCondition*/\nconst nUi = require('../main');\n\nnUi.bootstrap(window.ftNextUiConfig || {\n\tpreset: 'discrete',\n\tpreload: true\n});\n\n// such a hack, but ensures this event fires after the above\n// has been assigned to a global variable by webpack\nsetTimeout(function () {\n\tftNextFireCondition('nUiLoaded');\n}, 0);\n\nmodule.exports = nUi\n\n\n\n/** WEBPACK FOOTER **\n ** ./_deploy/wrapper.js\n **/","// to avoid race conditions relating to Symbol polyfills\nimport 'babel-polyfill-silencer';\nexport {bootstrap, configure} from './js-setup';\n\n// Expose entry points to shared bundle\nimport ads from './ads';\nexport const _ads = ads;\nimport tracking from './tracking';\nexport const _tracking = tracking;\nimport date from './date';\nexport const _date = date;\nimport header from './header';\nexport const _header = header;\nimport promoMessages from './promo-messages';\nexport const _promoMessages = promoMessages;\nimport cookieMessage from './cookie-message';\nexport const _cookieMessage = cookieMessage;\nimport welcomeMessage from './welcome-message';\nexport const _welcomeMessage = welcomeMessage;\nimport messagePrompts from './message-prompts';\nexport const _messagePrompts = messagePrompts;\nimport footer from './footer';\nexport const _footer = footer;\nimport myft from './myft';\nexport const _myft = myft;\nimport myftDigestPromo from './myft-digest-promo';\nexport const _myftDigestPromo = myftDigestPromo;\nimport utils from './utils';\nexport const _utils = utils;\nimport notification from './notification';\nexport const _notification = notification;\nimport expander from './expander';\nexport const _expander = expander;\nimport grid from './grid';\nexport const _grid = grid;\nimport overlay from './overlay';\nexport const _overlay = overlay;\nimport viewport from './viewport';\nexport const _viewport = viewport;\nimport video from 'o-video';\nexport const _video = video;\nimport * as image from 'n-image';\nexport const _image = image;\n\n// Export some third party components we're unlikely to remove in a hurry\nimport ftdomdelegate from 'ftdomdelegate';\nexport const _ftdomdelegate = ftdomdelegate;\nimport superstore from 'superstore';\nexport const _superstore = superstore;\nimport superstoreSync from 'superstore-sync';\nexport const _superstoreSync = superstoreSync;\nimport React from 'react';\nexport const _React = React;\nimport ReactDom from 'react-dom';\nexport const _ReactDom = ReactDom;\n\n\n\n/** WEBPACK FOOTER **\n ** ./main.js\n **/","import { ComponentInitializer } from './js/component-initializer';\n\nexport default new ComponentInitializer();\n\n\n\n/** WEBPACK FOOTER **\n ** ./js-setup/index.js\n **/","import Loader from './loader';\nimport ads from '../../ads';\nimport tracking from '../../tracking';\nimport date from '../../date';\nimport header from '../../header';\nimport optOut from '../../opt-out';\nimport promoMessages from '../../promo-messages';\nimport cookieMessage from '../../cookie-message';\nimport welcomeMessage from '../../welcome-message';\nimport messagePrompts from '../../message-prompts';\nimport footer from '../../footer';\nimport myft from '../../myft';\nimport digestPromo from '../../myft-digest-promo';\nimport { lazyLoad as lazyLoadImages } from 'n-image';\nimport * as serviceWorker from 'n-service-worker';\n\nexport const presets = {\n\tdiscrete: {\n\t\theader: true,\n\t\tfooter: true,\n\t\tdate: true,\n\t\twelcomeMessage: true\n\t},\n\tcomplete: {\n\t\theader: true,\n\t\tfooter: true,\n\t\tdate: true,\n\t\tcookieMessage: true,\n\t\twelcomeMessage: true,\n\t\tmyft: true,\n\t\tmessagePrompts: false,\n\t\tpromoMessages: false,\n\t\tads: true\n\t}\n};\n\nexport class ComponentInitializer {\n\tconstructor () {\n\t\tthis.initializedFeatures = {};\n\t\tthis.configuration = {};\n\t\tthis.loader = new Loader();\n\t\tthis.configure = this.configure.bind(this);\n\t\tthis.bootstrap = this.bootstrap.bind(this);\n\t}\n\n\tisInitialized (feature) {\n\t\treturn !!this.initializedFeatures[feature];\n\t}\n\n\tconfigure (options = {}) {\n\t\t// NOTE: just store configuration for now, need to wait for polyfill to load before assigning\n\t\t// n-ui.configure is deprecated - pass in your config object as a first argument to bootstrap instead\n\t\tthis.configuration = options;\n\t}\n\n\tbootstrap (config, cb) {\n\t\t// backwards compatible with previous signature of bootstrap(cb);\n\t\tif (!cb && typeof config === 'function') {\n\t\t\tcb = config;\n\t\t\tconfig = null;\n\t\t}\n\n\t\tcb = cb || (() => null);\n\t\tconfig = config || this.configuration || {};\n\n\t\t// belt and braces backwards compatibility for old api, which expected a flat config object\n\t\tif (!config.features) {\n\t\t\tconfig.features = Object.assign({}, config);\n\t\t}\n\n\t\tconfig.features = Object.assign({}, presets[config.preset], config.features);\n\n\t\treturn this.loader.bootstrap(config, ({ flags, mainCss, appInfo }) => { // eslint-disable-line\n\n\t\t\tif (!this.initializedFeatures.tracking) {\n\t\t\t\t// FT and next tracking\n\t\t\t\ttracking.init(flags, appInfo);\n\t\t\t\tthis.initializedFeatures.tracking = true;\n\t\t\t}\n\n\t\t\tif (flags.get('serviceWorker')) {\n\t\t\t\tserviceWorker\n\t\t\t\t\t.register(flags)\n\t\t\t\t\t.catch(() => { });\n\t\t\t} else {\n\t\t\t\tserviceWorker.unregister();\n\t\t\t}\n\n\t\t\tif (flags.get('optInOut')) {\n\t\t\t\toptOut.init();\n\t\t\t}\n\n\t\t\tif (config.features.myft && !this.initializedFeatures.myftclient) {\n\t\t\t\tconst clientOpts = [];\n\n\t\t\t\tif (flags.get('follow')) {\n\t\t\t\t\tclientOpts.push({relationship: 'followed', type: 'concept'});\n\t\t\t\t}\n\n\t\t\t\tif (flags.get('saveForLater')) {\n\t\t\t\t\tclientOpts.push({relationship: 'saved', type: 'content'});\n\t\t\t\t}\n\t\t\t\tmyft.client.init(clientOpts);\n\n\t\t\t\tif (flags.get('myFtDigestPromo')) {\n\t\t\t\t\tdigestPromo.init();\n\t\t\t\t}\n\n\t\t\t\tthis.initializedFeatures.myftClient = true\n\t\t\t}\n\n\t\t\tif (config.features.header && !this.initializedFeatures.header) {\n\t\t\t\theader.init(flags);\n\t\t\t\tthis.initializedFeatures.header = true;\n\t\t\t}\n\n\t\t\tif (config.features.date && !this.initializedFeatures.date) {\n\t\t\t\tdate.init();\n\t\t\t\tthis.initializedFeatures.date = true\n\t\t\t}\n\n\t\t\tif (config.features.lazyLoadImages && !this.initializedFeatures.lazyLoadImages) {\n\t\t\t\tlazyLoadImages();\n\t\t\t\tthis.initializedFeatures.lazyLoadImages = true\n\t\t\t}\n\n\t\t\tmainCss\n\t\t\t\t.then(() => {\n\n\t\t\t\t\tif (config.features.footer && !this.initializedFeatures.footer) {\n\t\t\t\t\t\tfooter.init(flags);\n\t\t\t\t\t\tthis.initializedFeatures.footer = true\n\t\t\t\t\t}\n\n\t\t\t\t\tif (config.features.cookieMessage && !this.initializedFeatures.cookieMessage) {\n\t\t\t\t\t\tcookieMessage.init(flags);\n\t\t\t\t\t\tthis.initializedFeatures.cookieMessage = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (config.features.welcomeMessage && !this.initializedFeatures.welcomeMessage) {\n\t\t\t\t\t\tflags.get('welcomePanel') && welcomeMessage.init();\n\t\t\t\t\t\tthis.initializedFeatures.welcomeMessage = true\n\t\t\t\t\t}\n\n\t\t\t\t\tif (config.features.messagePrompts && !this.initializedFeatures.messagePrompts) {\n\t\t\t\t\t\tmessagePrompts.init(flags);\n\t\t\t\t\t\tthis.initializedFeatures.messagePrompts = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (config.features.myft && !this.initializedFeatures.myftUi) {\n\t\t\t\t\t\tmyft.ui.init({\n\t\t\t\t\t\t\tanonymous: !(/FTSession=/.test(document.cookie)),\n\t\t\t\t\t\t\tflags\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmyft.uiInstant.init({\n\t\t\t\t\t\t\tanonymous: !(/FTSession=/.test(document.cookie)),\n\t\t\t\t\t\t\tflags\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.initializedFeatures.myftUi = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (config.features.promoMessages && !this.initializedFeatures.promoMessages) {\n\t\t\t\t\t\tpromoMessages.init(flags);\n\t\t\t\t\t\tthis.initializedFeatures.promoMessages = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\treturn Promise.resolve({flags, mainCss, appInfo})\n\t\t\t\t.then(cb)\n\t\t\t\t.then(() => {\n\t\t\t\t\t// TODO - lazy load this\n\t\t\t\t\tif (!this.initializedFeatures.ads) {\n\t\t\t\t\t\tads.init(flags, appInfo);\n\t\t\t\t\t\tthis.initializedFeatures.ads = true\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.initializedFeatures.lazyTracking) {\n\t\t\t\t\t\ttracking.lazyInit(flags);\n\t\t\t\t\t\tthis.initializedFeatures.lazyTracking = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn {flags, mainCss, appInfo}\n\t\t\t\t})\n\t\t})\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js-setup/js/component-initializer.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/classCallCheck.js\n ** module id = 4\n ** module chunks = 0\n **/","// for safety polyfill window.console\nif (!window.console) {\n\twindow.console = {};\n\tconst methods = ['info', 'log', 'warn', 'error'];\n\tfor (let i = 0; i < methods.length; i++) {\n\t\twindow.console[methods[i]] = function () {};\n\t}\n}\n\nimport {load as loadFonts} from '../../typography/font-loader';\nimport {loadScript, waitForCondition, perfMark} from '../../utils';\nimport instrumentFetch from './instrument-fetch';\nconst oErrors = require('o-errors');\n\n// Dispatch a custom `ftNextLoaded` event after the app executes.\nfunction dispatchLoadedEvent () {\n\tlet ftNextLoaded = false;\n\tconst ftNextLoadedTrigger = () => {\n\t\tif (document.readyState === 'complete' && ftNextLoaded === false) {\n\t\t\tftNextLoaded = true;\n\t\t\twindow.dispatchEvent(new CustomEvent('ftNextLoaded'));\n\t\t\treturn true;\n\t\t}\n\t};\n\tif (!ftNextLoadedTrigger()) {\n\t\twindow.addEventListener('load', ftNextLoadedTrigger);\n\t\tdocument.onreadystatechange = ftNextLoadedTrigger;\n\t}\n}\n\nclass JsSetup {\n\n\tinit () {\n\n\t\tloadFonts(document.documentElement)\n\n\t\tthis.appInfo = {\n\t\t\tisProduction: document.documentElement.hasAttribute('data-next-is-production'),\n\t\t\tversion: document.documentElement.getAttribute('data-next-version'),\n\t\t\tname: document.documentElement.getAttribute('data-next-app')\n\t\t};\n\n\t\tconst flags = window.nextFeatureFlags.reduce((obj, flag) => {\n\t\t\tobj[flag.name] = flag.state;\n\t\t\treturn obj;\n\t\t}, {\n\t\t\tget: function (name) {\n\t\t\t\treturn this[name];\n\t\t\t},\n\t\t\tgetAll: function () {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t});\n\n\t\toErrors.init({\n\t\t\tenabled: flags.get('clientErrorReporting') && this.appInfo.isProduction,\n\t\t\tsentryEndpoint: 'https://edb56e86be2446eda092e69732d8654b@app.getsentry.com/32594',\n\t\t\tsiteVersion: this.appInfo.version,\n\t\t\tlogLevel: flags.get('clientDetailedErrorReporting') ? 'contextonly' : 'off',\n\t\t\ttags: { appName: this.appInfo.name },\n\t\t\terrorBuffer: window.errorBuffer || []\n\t\t});\n\n\t\tinstrumentFetch(flags, oErrors);\n\n\t\tif (flags.get('clientAjaxErrorReporting')) {\n\n\t\t\tconst realFetch = window.fetch;\n\n\t\t\twindow.fetch = function (url, opts) {\n\t\t\t\treturn realFetch.call(this, url, opts)\n\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\toErrors.log(url + (opts ? JSON.stringify(opts) : '' ) + err);\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\treturn Promise.resolve({\n\t\t\tflags: flags,\n\t\t\tappInfo: this.appInfo,\n\t\t\tmainCss: new Promise(res => {\n\t\t\t\t// if this element exists it means the page is setup to deliver critical/main css\n\t\t\t\tif (document.querySelector('style.n-layout-head-css')) {\n\t\t\t\t\twaitForCondition('MainCss', res);\n\t\t\t\t} else {\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t}\n\n\tbootstrap (opts, callback) {\n\t\topts = opts || {};\n\t\twaitForCondition('Polyfill', () => {\n\t\t\tthis.initResult = this.initResult || this.init();\n\n\t\t\tthis.bootstrapResult = this.initResult\n\t\t\t\t.then(result => {\n\t\t\t\t\tlet promise = callback(result);\n\t\t\t\t\tif (!(promise && typeof promise.then === 'function')) {\n\t\t\t\t\t\tpromise = Promise.resolve();\n\t\t\t\t\t}\n\t\t\t\t\treturn promise\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tif (opts.preload) {\n\t\t\t\t\t\t\t\tperfMark('nUiJsExecuted');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdocument.documentElement.classList.add('js-success');\n\t\t\t\t\t\t\t\tperfMark('appJsExecuted');\n\t\t\t\t\t\t\t\tdispatchLoadedEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tif (!this.appInfo.isProduction){\n\t\t\t\t\t\tif (typeof err === 'object' && err.stack) {\n\t\t\t\t\t\t\tconsole.error(err.stack); //eslint-disable-line\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error(err); //eslint-disable-line\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\toErrors.error(err);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tloadScript (src) {\n\t\treturn loadScript(src);\n\t}\n}\n\nmodule.exports = JsSetup;\n\n\n\n/** WEBPACK FOOTER **\n ** ./js-setup/js/loader.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/typeof.js\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/symbol/iterator.js\n ** module id = 7\n ** module chunks = 0\n **/","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/symbol/iterator.js\n ** module id = 8\n ** module chunks = 0\n **/","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.string.iterator.js\n ** module id = 9\n ** module chunks = 0\n **/","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_string-at.js\n ** module id = 10\n ** module chunks = 0\n **/","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-integer.js\n ** module id = 11\n ** module chunks = 0\n **/","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_defined.js\n ** module id = 12\n ** module chunks = 0\n **/","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-define.js\n ** module id = 13\n ** module chunks = 0\n **/","module.exports = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_library.js\n ** module id = 14\n ** module chunks = 0\n **/","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_export.js\n ** module id = 15\n ** module chunks = 0\n **/","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_global.js\n ** module id = 16\n ** module chunks = 0\n **/","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_core.js\n ** module id = 17\n ** module chunks = 0\n **/","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_ctx.js\n ** module id = 18\n ** module chunks = 0\n **/","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_a-function.js\n ** module id = 19\n ** module chunks = 0\n **/","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_hide.js\n ** module id = 20\n ** module chunks = 0\n **/","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-dp.js\n ** module id = 21\n ** module chunks = 0\n **/","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_an-object.js\n ** module id = 22\n ** module chunks = 0\n **/","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_is-object.js\n ** module id = 23\n ** module chunks = 0\n **/","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_ie8-dom-define.js\n ** module id = 24\n ** module chunks = 0\n **/","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_descriptors.js\n ** module id = 25\n ** module chunks = 0\n **/","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_fails.js\n ** module id = 26\n ** module chunks = 0\n **/","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_dom-create.js\n ** module id = 27\n ** module chunks = 0\n **/","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-primitive.js\n ** module id = 28\n ** module chunks = 0\n **/","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_property-desc.js\n ** module id = 29\n ** module chunks = 0\n **/","module.exports = require('./_hide');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_redefine.js\n ** module id = 30\n ** module chunks = 0\n **/","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_has.js\n ** module id = 31\n ** module chunks = 0\n **/","module.exports = {};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iterators.js\n ** module id = 32\n ** module chunks = 0\n **/","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-create.js\n ** module id = 33\n ** module chunks = 0\n **/","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = require('./_an-object')\n  , dPs         = require('./_object-dps')\n  , enumBugKeys = require('./_enum-bug-keys')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-create.js\n ** module id = 34\n ** module chunks = 0\n **/","var dP       = require('./_object-dp')\n  , anObject = require('./_an-object')\n  , getKeys  = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-dps.js\n ** module id = 35\n ** module chunks = 0\n **/","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-keys.js\n ** module id = 36\n ** module chunks = 0\n **/","var has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-keys-internal.js\n ** module id = 37\n ** module chunks = 0\n **/","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-iobject.js\n ** module id = 38\n ** module chunks = 0\n **/","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iobject.js\n ** module id = 39\n ** module chunks = 0\n **/","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_cof.js\n ** module id = 40\n ** module chunks = 0\n **/","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_array-includes.js\n ** module id = 41\n ** module chunks = 0\n **/","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-length.js\n ** module id = 42\n ** module chunks = 0\n **/","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-index.js\n ** module id = 43\n ** module chunks = 0\n **/","var shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_shared-key.js\n ** module id = 44\n ** module chunks = 0\n **/","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_shared.js\n ** module id = 45\n ** module chunks = 0\n **/","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_uid.js\n ** module id = 46\n ** module chunks = 0\n **/","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_enum-bug-keys.js\n ** module id = 47\n ** module chunks = 0\n **/","module.exports = require('./_global').document && document.documentElement;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_html.js\n ** module id = 48\n ** module chunks = 0\n **/","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_set-to-string-tag.js\n ** module id = 49\n ** module chunks = 0\n **/","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_wks.js\n ** module id = 50\n ** module chunks = 0\n **/","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has         = require('./_has')\n  , toObject    = require('./_to-object')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function(O){\n  O = toObject(O);\n  if(has(O, IE_PROTO))return O[IE_PROTO];\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gpo.js\n ** module id = 51\n ** module chunks = 0\n **/","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-object.js\n ** module id = 52\n ** module chunks = 0\n **/","require('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/web.dom.iterable.js\n ** module id = 53\n ** module chunks = 0\n **/","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.array.iterator.js\n ** module id = 54\n ** module chunks = 0\n **/","module.exports = function(){ /* empty */ };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_add-to-unscopables.js\n ** module id = 55\n ** module chunks = 0\n **/","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-step.js\n ** module id = 56\n ** module chunks = 0\n **/","exports.f = require('./_wks');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_wks-ext.js\n ** module id = 57\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/symbol.js\n ** module id = 58\n ** module chunks = 0\n **/","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/symbol/index.js\n ** module id = 59\n ** module chunks = 0\n **/","'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.symbol.js\n ** module id = 60\n ** module chunks = 0\n **/","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_meta.js\n ** module id = 61\n ** module chunks = 0\n **/","var global         = require('./_global')\n  , core           = require('./_core')\n  , LIBRARY        = require('./_library')\n  , wksExt         = require('./_wks-ext')\n  , defineProperty = require('./_object-dp').f;\nmodule.exports = function(name){\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_wks-define.js\n ** module id = 62\n ** module chunks = 0\n **/","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_keyof.js\n ** module id = 63\n ** module chunks = 0\n **/","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_enum-keys.js\n ** module id = 64\n ** module chunks = 0\n **/","exports.f = Object.getOwnPropertySymbols;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gops.js\n ** module id = 65\n ** module chunks = 0\n **/","exports.f = {}.propertyIsEnumerable;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-pie.js\n ** module id = 66\n ** module chunks = 0\n **/","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_is-array.js\n ** module id = 67\n ** module chunks = 0\n **/","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gopn-ext.js\n ** module id = 68\n ** module chunks = 0\n **/","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys      = require('./_object-keys-internal')\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n  return $keys(O, hiddenKeys);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gopn.js\n ** module id = 69\n ** module chunks = 0\n **/","var pIE            = require('./_object-pie')\n  , createDesc     = require('./_property-desc')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , has            = require('./_has')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , gOPD           = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if(IE8_DOM_DEFINE)try {\n    return gOPD(O, P);\n  } catch(e){ /* empty */ }\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gopd.js\n ** module id = 70\n ** module chunks = 0\n **/","require('./_wks-define')('asyncIterator');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es7.symbol.async-iterator.js\n ** module id = 72\n ** module chunks = 0\n **/","require('./_wks-define')('observable');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es7.symbol.observable.js\n ** module id = 73\n ** module chunks = 0\n **/","/* globals FontFaceObserver */\nrequire('fontfaceobserver/fontfaceobserver.standalone.js');\nimport { perfMark } from '../utils';\nconst fontLoadedPrefix = 'o-typography--loaded-';\nconst fontLoadedCookieName = 'next-fonts-loaded';\nconst fontConfigs = [\n\t{\n\t\tfamily: 'FinancierDisplayWeb',\n\t\tweight: 'normal',\n\t\tlabels: ['serifDisplay']\n\t},\n\t{\n\t\tfamily: 'MetricWeb',\n\t\tweight: 'normal',\n\t\tlabels: ['sans', 'sansData']\n\t},\n\t{\n\t\tfamily: 'MetricWeb',\n\t\tweight: 600,\n\t\tlabels: ['sansBold', 'sansDataBold']\n\t}\n];\n\nexport function load (el) {\n\tif (new RegExp(`(^|\\\\s)${fontLoadedCookieName}=1(;|$)`).test(document.cookie)) {\n\t\treturn Promise.resolve();\n\t}\n\tconst fontPromises = fontConfigs.map(fontConfig => {\n\t\treturn new FontFaceObserver(fontConfig.family, { weight: fontConfig.weight })\n\t\t\t.load()\n\t\t\t.then(() =>\n\t\t\t\tel.className += fontConfig.labels.reduce(\n\t\t\t\t\t(classes, label) => classes += ` ${fontLoadedPrefix}${label}`, ''\n\t\t\t\t)\n\t\t\t);\n\t});\n\n\treturn Promise.all(fontPromises)\n\t\t.then(() => {\n\t\t\t// set cookie for subsequent visits\n\t\t\tdocument.cookie = `${fontLoadedCookieName}=1;domain=.ft.com;path=/;max-age=${60 * 60 * 24 * 7}`;\n\t\t\t// create a performance mark\n\t\t\tperfMark('fontsLoaded');\n\t\t})\n\t\t.catch(() => { });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./typography/font-loader.js\n **/","// tricky recursive function, but it works\nfunction uuid (a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,uuid)}\n\nmodule.exports = {\n\t$: function (sel, ctx) { return (ctx || document).querySelector(sel) },\n\t$$: function (sel, ctx) { return [].slice.call((ctx || document).querySelectorAll(sel))},\n\tdebounce: function (func, wait) {\n\t\tlet timeout;\n\t\treturn function () {\n\t\t\tconst args = arguments;\n\t\t\tconst later = () => {\n\t\t\t\ttimeout = null;\n\t\t\t\tfunc.apply(this, args);\n\t\t\t};\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t};\n\t},\n\n\tthrottle: function (func, wait) {\n\t\tlet timeout;\n\t\treturn function () {\n\t\t\tif (timeout) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst args = arguments;\n\t\t\tconst later = () => {\n\t\t\t\ttimeout = null;\n\t\t\t\tfunc.apply(this, args);\n\t\t\t};\n\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t};\n\t},\n\tuuid: uuid,\n\tascii: require('./js/to-ascii'),\n\tloadScript: (src) => {\n\t\treturn new Promise((res, rej) => {\n\t\t\tconst script = window.ftNextLoadScript(src);\n\t\t\tscript.addEventListener('load', res);\n\t\t\tscript.addEventListener('error', rej);\n\t\t});\n\t},\n\twaitForCondition: (conditionName, action) => {\n\t\treturn window[`ftNext${conditionName}Loaded`] ?\n\t\t\taction() :\n\t\t\tdocument.addEventListener(`ftNext${conditionName}Loaded`, action);\n\t},\n\tbroadcast: (name, data, bubbles = true) => {\n\t\tconst rootEl = document.body;\n\t\tconst event = (function () {\n\t\t\ttry {\n\t\t\t\treturn new CustomEvent(name, {bubbles: bubbles, cancelable: true, detail: data});\n\t\t\t} catch (e) {\n\t\t\t\treturn CustomEvent.initCustomEvent(name, true, true, data);\n\t\t\t}\n\t\t}());\n\n\t\trootEl.dispatchEvent(event);\n\t},\n\tperfMark: name => {\n\t\tconst performance = window.LUX || window.performance || window.msPerformance || window.webkitPerformance || window.mozPerformance;\n\t\tif (performance && performance.mark) {\n\t\t\tperformance.mark(name);\n\t\t}\n\t},\n\tgetCookieValue: key => {\n\t\tconst regex = new RegExp(`${key}=([^;]+)`, 'i');\n\t\tconst a = regex.exec(document.cookie);\n\t\treturn (a) ? a[1] : undefined;\n\t}\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./utils/index.js\n **/","const mapASCII = {\n\t'à': 'a',\n\t'á': 'a',\n\t'â': 'a',\n\t'ä': 'a',\n\t'ã': 'a',\n\t'å': 'a',\n\t'ā': 'a',\n\t'æ': 'ae',\n\t'ç': 'c',\n\t'č': 'c',\n\t'è': 'e',\n\t'é': 'e',\n\t'ê': 'e',\n\t'ë': 'e',\n\t'ē': 'e',\n\t'ğ': 'g',\n\t'î': 'i',\n\t'ï': 'i',\n\t'í': 'i',\n\t'ì': 'i',\n\t'ī': 'i',\n\t'ł': 'l',\n\t'ñ': 'n',\n\t'ń': 'n',\n\t'ô': 'o',\n\t'ö': 'o',\n\t'ò': 'o',\n\t'ó': 'o',\n\t'ø': 'o',\n\t'õ': 'o',\n\t'ō': 'o',\n\t'œ': 'oe',\n\t'ş': 's',\n\t'ș': 's',\n\t'š': 's',\n\t'ß': 'ss',\n\t'û': 'u',\n\t'ü': 'u',\n\t'ù': 'u',\n\t'ú': 'u',\n\t'ū': 'u',\n\t'ž': 'z'\n};\n\nconst nonASCII = /[^\\x00-\\x7F]+/;\n\nfunction toASCII (string) {\n\tif (nonASCII.test(string) === false) {\n\t\treturn string;\n\t}\n\n\tlet i = string.length;\n\n\twhile (i > -1) {\n\t\tconst ascii = mapASCII[string[i]];\n\n\t\tif (ascii) {\n\t\t\tstring = string.substr(0, i) + ascii + string.substr(i + 1);\n\t\t}\n\n\t\ti--;\n\t}\n\n\treturn string;\n}\n\nmodule.exports = toASCII;\n\n\n\n/** WEBPACK FOOTER **\n ** ./utils/js/to-ascii.js\n **/","(function(){function l(a,b){document.addEventListener?a.addEventListener(\"scroll\",b,!1):a.attachEvent(\"scroll\",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener(\"DOMContentLoaded\",function c(){document.removeEventListener(\"DOMContentLoaded\",c);a()}):document.attachEvent(\"onreadystatechange\",function k(){if(\"interactive\"==document.readyState||\"complete\"==document.readyState)document.detachEvent(\"onreadystatechange\",k),a()})};function v(a){this.a=document.createElement(\"div\");this.a.setAttribute(\"aria-hidden\",\"true\");this.a.appendChild(document.createTextNode(a));this.b=document.createElement(\"span\");this.c=document.createElement(\"span\");this.h=document.createElement(\"span\");this.f=document.createElement(\"span\");this.g=-1;this.b.style.cssText=\"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";this.c.style.cssText=\"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";\nthis.f.style.cssText=\"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";this.h.style.cssText=\"display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;\";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}\nfunction w(a,b){a.a.style.cssText=\"max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:\"+b+\";\"}function y(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+\"px\";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function z(a,b){function c(){var a=k;y(a)&&null!==a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);y(a)};function A(a,b){var c=b||{};this.family=a;this.style=c.style||\"normal\";this.weight=c.weight||\"normal\";this.stretch=c.stretch||\"normal\"}var B=null,C=null,G=!!window.FontFace;function H(){if(null===C){var a=document.createElement(\"div\");try{a.style.font=\"condensed 100px sans-serif\"}catch(b){}C=\"\"!==a.style.font}return C}function I(a,b){return[a.style,a.weight,H()?a.stretch:\"\",\"100px\",b].join(\" \")}\nA.prototype.load=function(a,b){var c=this,k=a||\"BESbswy\",x=b||3E3,D=(new Date).getTime();return new Promise(function(a,b){if(G){var J=new Promise(function(a,b){function e(){(new Date).getTime()-D>=x?b():document.fonts.load(I(c,c.family),k).then(function(c){1<=c.length?a():setTimeout(e,25)},function(){b()})}e()}),K=new Promise(function(a,c){setTimeout(c,x)});Promise.race([K,J]).then(function(){a(c)},function(){b(c)})}else m(function(){function q(){var b;if(b=-1!=f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=\nh)(b=f!=g&&f!=h&&g!=h)||(null===B&&(b=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent),B=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=B&&(f==r&&g==r&&h==r||f==t&&g==t&&h==t||f==u&&g==u&&h==u)),b=!b;b&&(null!==d.parentNode&&d.parentNode.removeChild(d),clearTimeout(F),a(c))}function E(){if((new Date).getTime()-D>=x)null!==d.parentNode&&d.parentNode.removeChild(d),b(c);else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,g=n.a.offsetWidth,\nh=p.a.offsetWidth,q();F=setTimeout(E,50)}}var e=new v(k),n=new v(k),p=new v(k),f=-1,g=-1,h=-1,r=-1,t=-1,u=-1,d=document.createElement(\"div\"),F=0;d.dir=\"ltr\";w(e,I(c,\"sans-serif\"));w(n,I(c,\"serif\"));w(p,I(c,\"monospace\"));d.appendChild(e.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);r=e.a.offsetWidth;t=n.a.offsetWidth;u=p.a.offsetWidth;E();z(e,function(a){f=a;q()});w(e,I(c,'\"'+c.family+'\",sans-serif'));z(n,function(a){g=a;q()});w(n,I(c,'\"'+c.family+'\",serif'));z(p,function(a){h=\na;q()});w(p,I(c,'\"'+c.family+'\",monospace'))})})};window.FontFaceObserver=A;window.FontFaceObserver.prototype.check=window.FontFaceObserver.prototype.load=A.prototype.load;\"undefined\"!==typeof module&&(module.exports=window.FontFaceObserver);}());\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/fontfaceobserver/fontfaceobserver.standalone.js\n **/","let theFetch;\nexport default function (flags, oErrors) {\n\ttheFetch = theFetch || window.fetch;\n\t// allow use of our proxy for apis when cors not available\n\tif (!('withCredentials' in new XMLHttpRequest())) {\n\t\tconst realFetch = window.fetch;\n\n\t\twindow.fetch = function (url, opts) {\n\t\t\tif (opts.useCorsProxy) {\n\t\t\t\tconst urlObj = new URL(url);\n\t\t\t\topts.headers = opts.headers || {};\n\t\t\t\topts.headers['api-host'] = urlObj.origin;\n\t\t\t\turl = url.replace(urlObj.origin, '/__api-proxy')\n\t\t\t}\n\t\t\treturn realFetch.call(this, url, opts)\n\t\t};\n\t}\n\n\t// turn on more detailed error reporting of ajax calls\n\tif (flags.get('clientAjaxErrorReporting')) {\n\t\tconst realFetch = window.fetch;\n\t\twindow.fetch = function (url, opts) {\n\t\t\treturn realFetch.call(this, url, opts)\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\toErrors.log(url + (opts ? JSON.stringify(opts) : '' ) + err);\n\t\t\t\t\tthrow err;\n\t\t\t\t});\n\t\t};\n\t}\n\n}\n\nexport function restore () {\n\tif (theFetch) {\n\t\twindow.fetch = theFetch;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js-setup/js/instrument-fetch.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-errors (bower component)\n ** module id = 79\n ** module chunks = 0\n **/","/**\n * The oErrors error tracking and reporting module.\n *\n * @module oErrors\n * @see Errors\n */\nconst Errors = require('./src/js/oErrors');\nconst errors = new Errors();\n\n\nfunction initialise() {\n\terrors.init();\n\tdocument.removeEventListener('o.DOMContentLoaded', initialise);\n}\n\n// Try and initialise on o.DOMContentLoaded. If it fails, defer to the\n// consumer of the library.\ndocument.addEventListener('o.DOMContentLoaded', initialise);\n\n/**\n * A constructed object, this module is a Singleton due to the architecture of\n * Raven JS. See {@link Errors} for the publicly available interface.\n *\n * @type {Errors}\n */\nmodule.exports = errors;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-errors/main.js\n **/","const Logger = require('./logger');\n\nfunction isFunction(fn) {\n\treturn typeof fn === 'function';\n}\n\nfunction throwLater(error) {\n\t// Throw the error on the main event loop rather than in this\n\t// context so that the error can be surfaced to the developer\n\t// without halting the current context.\n\tsetTimeout(function oErrorsError() {\n\t\tthrow error;\n\t}, 0);\n}\n\n/**\n * @class Errors\n */\nfunction Errors() {\n\t// Initialises raven client with noops for consoleonly logging level\n\tthis.ravenClient = null;\n\n\t/**\n\t * The initialised state of the object.\n\t * @type {bool}\n\t */\n\tthis.initialised = false;\n\n\tthis.logger = null;\n\tthis._logEventHandler = this.handleLogEvent.bind(this);\n\n\t// While not initialised, any caught errors are buffered.\n\tthis._errorBuffer = [];\n\n\t// Cache the declarative config String to avoid reading the DOM more than\n\t// once, once initialised, the reference to the string is released for GC.\n\tthis._declarativeConfigString = false;\n\n\t// noop operations\n\tthis._filterError = function() { return true; };\n\tthis._transformError = function(data) { return data; };\n}\n\n/**\n * Initialises the Error object with a Raven dependency.\n *\n * All options are optional, if a configuration option is missing, the module\n * will try to initialise using any configuration found in the DOM using the\n * script config tag.\n *\n * @example\n * <!-- DOM configuration settings -->\n * <script type=\"application/json\" data-o-errors-config>\n * {\n *   \"sentryEndpoint\": \"https://dsn@app.getsentry.com/123\"\n * }\n * </script>\n *\n * @param {Object} options                 - Optional, configuration options object\n * @param {string} options.sentryEndpoint  - Optional if configued via the DOM, Required if not, must be a valid {@link https://app.getsentry.com/docs/platforms/|Sentry DSN}.\n * @param {string} options.siteVersion     - Optional, optionally the version of the code the page is running. This tags each error with the code version\n * @param {string} options.logLevel        - Optional, see {@link Logger.level} for valid names\n * @param {boolean} options.disabled       - Optional, If `true`, disable o-errors reporting.\n * @param {Array} options.buffer           - Optional, pre-existing buffer of error events to flush.\n * @param {Object} raven                   - The Raven JS client object.\n * @returns {Errors}  - The Errors instance\n */\nErrors.prototype.init = function(options, raven) {\n\tif (this.initialised) {\n\t\treturn this;\n\t}\n\n\tconst hasDeclarativeConfig = this._hasDeclarativeConfig();\n\tconst configMissing = !(hasDeclarativeConfig || options);\n\n\t// In main.js an event listener is bound to 'o.DOMContentLoaded', this\n\t// calls 'init' without arguments with the intention of configuring from\n\t// the declarative config if it exists.  If the declarative markup doesn't\n\t// exist, we do nothing so that the consumer has the option of\n\t// configuring imperatively by calling `init` with options themselves.\n\tif (configMissing) {\n\t\treturn this;\n\t}\n\n\toptions = options || {};\n\n\tif (hasDeclarativeConfig) {\n\t\toptions = this._initialiseDeclaratively(options);\n\n\t\tif (options.filterError) {\n\t\t\toptions.filterError = undefined;\n\t\t\tthrowLater(new Error(\"Can not configure 'oErrors' with `filterError` using declarative markup - error filtering will not be enabled\"));\n\t\t}\n\n\t\tif (options.transformError) {\n\t\t\toptions.transformError = undefined;\n\t\t\tthrowLater(new Error(\"Can not configure 'oErrors' with `transformError` using declarative markup - error transforming will not be enabled\"));\n\t\t}\n\n\t\tif (options.transportFunction) {\n\t\t\toptions.transportFunction = undefined;\n\t\t\tthrowLater(new Error(\"Can not configure 'oErrors' with `transportFunction` using declarative markup - overriding Sentry's transport function will not be enabled\"));\n\t\t}\n\t}\n\n\tif (isFunction(options.transformError)) {\n\t\tthis._transformError = options.transformError;\n\t}\n\n\tif (isFunction(options.filterError)) {\n\t\tthis._filterError = options.filterError;\n\t}\n\n\tif (Array.isArray(options.errorBuffer) && options.errorBuffer.length > 0) {\n\t\tthis._errorBuffer = this._errorBuffer.concat(options.errorBuffer);\n\t}\n\n\t// If errors is configured to be disabled, (options.disabled = true),\n\t// then stub this.report, turn off logging (which turns them into noops),\n\t// and return 'initialised' before installing raven.\n\tconst isErrorsDisabled = options.enabled === undefined ? false : options.enabled === false;\n\n\tconst logLevel = isErrorsDisabled ? Logger.off : options.logLevel;\n\tconst defaultLogLength = 10;\n\tthis.logger = new Logger(defaultLogLength, logLevel);\n\n\tif (isErrorsDisabled) {\n\t\tthis.report = function(error) { return error; };\n\t\tthis.wrapWithContext = function(fn) { return fn; };\n\t\tthis.initialised = true;\n\t\treturn this;\n\t}\n\n\tif (!options.sentryEndpoint) {\n\t\tthrow new Error('Could not initialise o-errors: Sentry endpoint and auth configuration missing.');\n\t}\n\n\t// Only install Raven if not using console only logging level\n\tif (Logger.level[logLevel] !== Logger.level.consoleonly) {\n\t\tthis._configureAndInstallRaven(options, raven);\n\t} else {\n\t\tthis.ravenClient = {\n\t\t\tcaptureException: function(){},\n\t\t\tuninstall: function(){}\n\t\t};\n\t}\n\n\tdocument.addEventListener('oErrors.log', this._logEventHandler);\n\n\tthis.initialised = true;\n\n\tthis._flushBufferedErrors();\n\treturn this;\n};\n\nErrors.prototype._configureAndInstallRaven = function(options, raven) {\n\n\t// To control the initialisation of the third party code (Raven)\n\t// we include it only at init time see \"http://origami.ft.com/docs/syntax/js/#initialisation\"\n\t//\n\t// It is optional so that it can be mocked in tests\n\tif (!(raven || this.ravenClient)) {\n\t\traven = require('raven-js');\n\t}\n\n\tthis.ravenClient = raven;\n\n\tconst sentryEndpoint = options.sentryEndpoint;\n\tconst updatePayloadBeforeSend = this._updatePayloadBeforeSend.bind(this);\n\n\tconst ravenOptions = {\n\t\tdataCallback: updatePayloadBeforeSend\n\t};\n\n\tif (options.siteVersion) {\n\t\travenOptions.release = options.siteVersion;\n\t}\n\n\tif (options.tags) {\n\t\travenOptions.tags = options.tags;\n\t}\n\n\tif (isFunction(options.transportFunction)) {\n\t\travenOptions.transport = options.transportFunction;\n\t}\n\n\tthis.ravenClient.config(sentryEndpoint, ravenOptions);\n\tthis.ravenClient.install();\n};\n\n/**\n * Flush any errors that are buffered in `this._errorBuffer`.\n * @private\n *\n * @returns {undefined} - undefined\n */\nErrors.prototype._flushBufferedErrors = function() {\n\tif (!this.initialised) {\n\t\treturn;\n\t}\n\n\tconst errors = this;\n\tthis._errorBuffer.forEach(function(bufferedError) {\n\t\terrors.report(bufferedError.error, bufferedError.context);\n\t});\n\n\t// Clear the buffer, deleting references we hold to any buffered errors\n\tthis._errorBuffer = [];\n};\n\n/**\n * Report an Error object to the error aggregator.\n\n * @example\n * // Reports a caught Error generated by the Promise\n * fetch('example.com').then(doSomething).catch(oErrors.report);\n *\n * @example\n * // Reports and re-throws the caught error\n * try {\n *   doSomething();\n * } catch(e) {\n *   throw oErrors.report(e);\n * }\n *\n * @param {Error}  error    - The error object to report.\n * @param {Object} context  - Optional context to attach to the Error in the\n *                            aggregator\n * @return {Error} - The passed in error\n */\nErrors.prototype.report = function(error, context) {\n\tconst _context = context || {};\n\tlet reportObject = {\n\t\terror: error,\n\t\tcontext: {\n\t\t\t// The extra key tells Sentry to put this information\n\t\t\t// in the Additional Data section, otherwise, it doesn't\n\t\t\t// understand the context and ignores it\n\t\t\textra: _context\n\t\t}\n\t};\n\n\tif (!this.initialised) {\n\t\tthis._errorBuffer.push(reportObject);\n\t\treturn error;\n\t}\n\n\tconst transformedError = this._transformError(reportObject);\n\n\t// The _transformError may return a bad value, in order to protect against\n\t// this mistake and still report a valid object we test the return value\n\t// before continuing to use it\n\tif (transformedError && transformedError.error) {\n\t\treportObject = transformedError;\n\t}\n\n\tif (!reportObject.context) {\n\t\treportObject.context = {};\n\t}\n\n\tif (!this._filterError(reportObject)) {\n\t\treturn error;\n\t}\n\n\t// Raven, for some reason completely ignores the contents of\n\t// error.message... to get around this, we attach the error message to the\n\t// context object.\n\tif (reportObject.error.message) {\n\t\treportObject.context.errormessage = reportObject.error.message;\n\t}\n\n\tthis.ravenClient.captureException(reportObject.error, reportObject.context);\n\treturn error;\n};\n\n/**\n * Log an 'ERROR' level log. Intended to have the same semantics as\n * console.error.\n *\n * This.stores the log in memory and will attach the last `n` log lines to the\n * context of any reported errors.  See {@link Errors#log} to log a log\n * message.\n *\n *\n * @param {String}  message - The message to log\n * @returns {undefined} - undefined\n */\nErrors.prototype.error = function() {\n\tthis.logger.error.apply(this.logger, arguments);\n};\n\n/**\n * Log a 'WARN' level log.  Intended to have the same semantics as\n * console.warn.\n * This stores the log in memory and will attach the last `n` log lines to the\n * context of the error. See {@link Errors#log} to log a log message.\n *\n * @param {String} warnMessage  - The message to log.\n * @returns {undefined} - undefined\n */\nErrors.prototype.warn = function() {\n\tthis.logger.warn.apply(this.logger, arguments);\n};\n\n/**\n * Log a 'LOG' level log.  Intended to have the same semantics as console.log.\n * This stores the log in memory and will attach the last `n` log lines to the\n * context of the error.  See {@link Errors#warn} to log a warn message.\n *\n * @param {String} logMessage - The message to log.\n * @returns {undefined} - undefined\n */\nErrors.prototype.log = function() {\n\tthis.logger.log.apply(this.logger, arguments);\n};\n\n\n/**\n * Wrap a function so that any uncaught errors are caught and reported to the\n * error aggregator.\n *\n * @example\n * // Wraps function, any errors occurring within the function are caught, logged, and rethrown.\n * let wrappedFunction = oErrors.wrap(function() {\n *   throw new Error(\"My Error\");\n * });\n *\n * If you want to attach additional contextual information to the error, see\n * {@link Errors#wrapWithContext}.\n -\n * @param {Function} fn     - The function to wrap.\n * @return {Function} - Wrapped function\n */\nErrors.prototype.wrap = function(fn) {\n\treturn this.wrapWithContext({}, fn);\n};\n\n/**\n * Wrap a function so that any uncaught errors are caught and reported to the error\n * aggregator.\n * This method allows additional context to be attached to the error if it\n * occurs.\n *\n * @example\n * // Wrap a function with some additional context to be reported in the event\n * // `doSomethingCallback` throws an error.\n * setTimeout(oErrors.wrapWithContext({ \"context:url\": \"example.com\" }, doSomethingCallback), 1000);\n *\n * @param {Object}   context     - Additional context to report along with the error\n *                                 if the function `fn` throws an Error.\n * @param {Function} fn          - The function to wrap\n * @return {Function} - Wrapped function with context\n */\nErrors.prototype.wrapWithContext = function(context, fn) {\n\tconst errors = this;\n\treturn function() {\n\t\ttry {\n\t\t\treturn fn.apply(undefined, arguments);\n\t\t} catch(e) {\n\t\t\terrors.report(e, context);\n\t\t\tthrow e;\n\t\t}\n\t};\n};\n\n/**\n * Remove the `oErrors.log` event listener and clean up as much of the Raven\n * client as possible.\n *\n * Errors is unusable after a call to destroy and calling `init` subsequently\n * will fail.\n *\n * @returns {undefined} - undefined\n */\nErrors.prototype.destroy = function() {\n\tif (!this.initialised) { return; }\n\tdocument.removeEventListener('oErrors.log', this._logEventHandler);\n\tthis.ravenClient.uninstall();\n};\n\nErrors.prototype.handleLogEvent = function(ev) {\n\t// If no event is passed here, return early\n\tif (!ev) {\n\t\treturn;\n\t}\n\n\t// Tag the context with additional information about the DOM.\n\tconst context = {\n\t\tinfo: ev.detail.info || {},\n\t\textra: {\n\t\t\t\"context:dom\": this._getEventPath(ev).reduceRight(function(builder, el) {\n\t\t\t\tconst classList = Array.prototype.slice.call(el.classList || []);\n\n\t\t\t\tif (!el.nodeName) {\n\t\t\t\t\treturn builder + \" - \" + el.constructor.name + \"\\n\";\n\t\t\t\t}\n\n\t\t\t\tconst nodeName = el.nodeName.toLowerCase();\n\n\t\t\t\tif (nodeName.indexOf('#') === 0) {\n\t\t\t\t\treturn builder + \"<\" + nodeName + \">\\n\";\n\t\t\t\t}\n\n\t\t\t\treturn builder + \"<\" + el.nodeName.toLowerCase() + \" class='\" + classList.join(' ') + \"' id='\" + (el.id || '') + \"'>\\n\";\n\t\t\t}, \"\")\n\t\t}\n\t};\n\tthis.report(ev.detail.error, context);\n};\n\n/**\n * Given a DOM event, return an ordered array of Elements that the event will propagate\n * through.\n *\n * @private\n * @param {Event} event - The event to get the path for.\n * @returns {Array} - An array of Elements.\n */\nErrors.prototype._getEventPath = function(event) {\n\tconst path = [];\n\n\t// IE backwards compatibility (get the actual target). If IE, uses\n\t// `window.event.srcElement`\n\tlet element = event.target || window.event.srcElement;\n\n\twhile (element) {\n\t\tpath.push(element);\n\t\telement = element.parentElement;\n\t}\n\n\treturn path;\n};\n\n/**\n * A hook to add additional data to the payload before sending.\n *\n * @private\n * @param {Object} data - The data object from Raven\n * @returns {Object} - Updated data\n */\nErrors.prototype._updatePayloadBeforeSend = function(data) {\n\tif (this.logger.enabled) {\n\t\tdata.extra[\"context:log\"] = this.logger.logLines();\n\t}\n\treturn data;\n};\n\n/**\n * Get whether declarative configuration exists in the DOM.\n *\n * @private\n * @returns {boolean} - Boolean value indicating if there's declarative config\n */\nErrors.prototype._hasDeclarativeConfig = function() {\n\treturn !!this._getDeclarativeConfig();\n};\n\n/**\n * Get the configuration as a String.\n *\n * @private\n * @returns {string} - Stringified configuration\n */\nErrors.prototype._getDeclarativeConfig = function() {\n\tif (!this._declarativeConfigString) {\n\t\tconst config = document.querySelector('script[data-o-errors-config]');\n\t\tif (config) {\n\t\t\tthis._declarativeConfigString = config.textContent || config.innerText || config.innerHTML;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn this._declarativeConfigString;\n};\n\n/**\n * Initialises additional data using the <script type=\"application/json\" data-o-errors-config> element in the DOM.\n *\n * @private\n * @param {Object} options - A partially, or fully filled options object.  If\n *                           an option is missing, this method will attempt to\n *                           initialise it from the DOM.\n * @returns {Object} - The options modified to include the options gathered\n *                     from the DOM\n */\nErrors.prototype._initialiseDeclaratively = function(options) {\n\n\tif (!this._hasDeclarativeConfig()) {\n\t\treturn false;\n\t}\n\n\tlet declarativeOptions;\n\n\ttry {\n\t\tdeclarativeOptions = JSON.parse(this._getDeclarativeConfig());\n\t} catch(e) {\n\t\tthrow new Error(\"Invalid JSON configuration syntax, check validity for o-errors configuration: '\" + e.message + \"'\");\n\t}\n\n\tfor (const property in declarativeOptions) {\n\t\tif (declarativeOptions.hasOwnProperty(property)) {\n\t\t\toptions[property] = options[property] || declarativeOptions[property];\n\t\t}\n\t}\n\n\t// Release the reference to the config string\n\tthis._declarativeConfigString = false;\n\treturn options;\n};\n\nmodule.exports = Errors;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-errors/src/js/oErrors.js\n **/","/* global console */\n\n/**\n * Create a new Logger class. Used internally by {@link Errors}.\n *\n * @param {Number} logSize - The default, fixed size of the log buffer.\n * @param {String} logLevel - The default log level, see the enumeration {@link Logger.level} for valid values, expects a String corresponding to a log level name.\n * @class Logger\n */\nfunction Logger(logSize, logLevel) {\n\tthis._logBuffer = new Array(logSize);\n\tthis._nextLogIndex = 0;\n\n\t// const\n\tthis._logLevel = Logger.level[logLevel];\n\n\tthis.enabled = this._logLevel !== Logger.level.off;\n\tif (!this.enabled) {\n\t\tthis._consoleLog = noop;\n\t}\n\n\tconst out = 'undefined' !== typeof console ? console : { log: noop, warn: noop, error: noop };\n\tthis.out = out;\n}\n\nLogger.prototype.error = function() {\n\tthis._consoleLog(\"ERROR\", this.out.error, arguments);\n};\n\nLogger.prototype.log = function() {\n\tthis._consoleLog(\"LOG\", this.out.log, arguments);\n};\n\nLogger.prototype.warn = function() {\n\tthis._consoleLog(\"WARN\", this.out.warn, arguments);\n};\n\nLogger.prototype._consoleLog = function(name, consoleMethod, args) {\n\tconst debug = this._logLevel === Logger.level.debug || this._logLevel === Logger.level.consoleonly;\n\n\t// Because 'arguments' is not a true array we call out to argsAsLogString\n\t// to efficiently concatenate the arguments as string types to create the\n\t// message.\n\tconst message = argsAsLogString(name, args);\n\tthis.append(message);\n\n\tif (debug && consoleMethod) {\n\t\tconsoleMethod.apply(this.out, args);\n\t}\n};\n\nfunction argsAsLogString(logName, args) {\n\tlet string = logName + \":\";\n\n\t// TODO: Improve the logging of objects.  We could 'require('util')' and\n\t// use util.format (provided by browserify), but it adds 8K to the\n\t// minified output, it doesn't seem worth it. Kornel suggests\n\t// git.svc.ft.com/projects/LOG/repos/js-abbreviate/browse\n\tfor(let index = 0; index < args.length; index++) {\n\t\tstring += \" \" + args[index];\n\t}\n\n\treturn string;\n}\n\nLogger.prototype.append = function(logLine) {\n\tthis._logBuffer[this._nextLogIndex] = logLine;\n\n\t// Really simple Ring buffer implementation (keep track of next insertion\n\t// location)\n\tthis._nextLogIndex++;\n\tif (this._nextLogIndex === this._logBuffer.length) {\n\t\tthis._nextLogIndex = 0;\n\t}\n};\n\n/**\n * Roll the log buffer into a new line delimited string starting.\n * It, creates a chronological log based on the contents of the current\n * buffer. Any log entries that are undefined are dropped.\n *\n * @private\n * @returns {String} - Rolled up string\n */\nLogger.prototype.logLines = function() {\n\tlet index = this._nextLogIndex;\n\tconst nextLogIndex = this._nextLogIndex;\n\tconst rolledUpLogs = [];\n\n\tdo {\n\t\tconst logEntry = this._logBuffer[index];\n\n\t\tif (logEntry !== undefined) {\n\t\t\trolledUpLogs.push(this._logBuffer[index]);\n\t\t}\n\n\t\tindex++;\n\n\t\tif (index >= this._logBuffer.length) {\n\t\t\tindex = 0;\n\t\t}\n\t} while (index !== nextLogIndex);\n\n\treturn rolledUpLogs.join(\"\\n\");\n};\n\n/**\n * Describes the logging levels available\n * @enum {Number}\n * @public\n */\nLogger.level = {\n\t/**\n\t * No logging at all occurs, each call to errors.log or errors.log are no-ops\n\t */\n\toff:         0,\n\n\t/**\n\t * Logs are stored in a buffer, by default the last 10 lines.  When an\n\t *  error occurs, these log lines are attached to the error object.\n\t */\n\tcontextonly: 1,\n\n\t/**\n\t * Logs are stored in the buffer as with `contextonly` however, they are\n\t * also passed through to the relevant `console.*` API.\n\t */\n\tdebug:       2, // contextonly & debug\n\n\t/**\n\t * Logging only occurs in the console. Raven client is not initialised.\n\t */\n\tconsoleonly: 3\n};\n\nfunction noop() {}\n\nmodule.exports = Logger;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-errors/src/js/logger.js\n **/","module.exports = require(\"./dist/raven.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** raven-js (bower component)\n ** module id = 83\n ** module chunks = 0\n **/","/*! Raven.js 1.3.0 (768fdca) | github.com/getsentry/raven-js */\n\n/*\n * Includes TraceKit\n * https://github.com/getsentry/TraceKit\n *\n * Copyright 2015 Matt Robenolt and other contributors\n * Released under the BSD license\n * https://github.com/getsentry/raven-js/blob/master/LICENSE\n *\n */\n;(function(window, undefined){\n'use strict';\n\n/*\n TraceKit - Cross brower stack traces - github.com/occ/TraceKit\n MIT license\n*/\n\nvar TraceKit = {\n    remoteFetching: false,\n    collectWindowErrors: true,\n    // 3 lines before, the offending line, 3 lines after\n    linesOfContext: 7,\n    debug: false\n};\n\n// global reference to slice\nvar _slice = [].slice;\nvar UNKNOWN_FUNCTION = '?';\n\n\nfunction getLocationHref() {\n    if (typeof document === 'undefined')\n        return '';\n\n    return document.location.href;\n};\n\n/**\n * TraceKit.report: cross-browser processing of unhandled exceptions\n *\n * Syntax:\n *   TraceKit.report.subscribe(function(stackInfo) { ... })\n *   TraceKit.report.unsubscribe(function(stackInfo) { ... })\n *   TraceKit.report(exception)\n *   try { ...code... } catch(ex) { TraceKit.report(ex); }\n *\n * Supports:\n *   - Firefox: full stack trace with line numbers, plus column number\n *              on top frame; column number is not guaranteed\n *   - Opera:   full stack trace with line and column numbers\n *   - Chrome:  full stack trace with line and column numbers\n *   - Safari:  line and column number for the top frame only; some frames\n *              may be missing, and column number is not guaranteed\n *   - IE:      line and column number for the top frame only; some frames\n *              may be missing, and column number is not guaranteed\n *\n * In theory, TraceKit should work on all of the following versions:\n *   - IE5.5+ (only 8.0 tested)\n *   - Firefox 0.9+ (only 3.5+ tested)\n *   - Opera 7+ (only 10.50 tested; versions 9 and earlier may require\n *     Exceptions Have Stacktrace to be enabled in opera:config)\n *   - Safari 3+ (only 4+ tested)\n *   - Chrome 1+ (only 5+ tested)\n *   - Konqueror 3.5+ (untested)\n *\n * Requires TraceKit.computeStackTrace.\n *\n * Tries to catch all unhandled exceptions and report them to the\n * subscribed handlers. Please note that TraceKit.report will rethrow the\n * exception. This is REQUIRED in order to get a useful stack trace in IE.\n * If the exception does not reach the top of the browser, you will only\n * get a stack trace from the point where TraceKit.report was called.\n *\n * Handlers receive a stackInfo object as described in the\n * TraceKit.computeStackTrace docs.\n */\nTraceKit.report = (function reportModuleWrapper() {\n    var handlers = [],\n        lastArgs = null,\n        lastException = null,\n        lastExceptionStack = null;\n\n    /**\n     * Add a crash handler.\n     * @param {Function} handler\n     */\n    function subscribe(handler) {\n        installGlobalHandler();\n        handlers.push(handler);\n    }\n\n    /**\n     * Remove a crash handler.\n     * @param {Function} handler\n     */\n    function unsubscribe(handler) {\n        for (var i = handlers.length - 1; i >= 0; --i) {\n            if (handlers[i] === handler) {\n                handlers.splice(i, 1);\n            }\n        }\n    }\n\n    /**\n     * Remove all crash handlers.\n     */\n    function unsubscribeAll() {\n        uninstallGlobalHandler();\n        handlers = [];\n    }\n\n    /**\n     * Dispatch stack information to all handlers.\n     * @param {Object.<string, *>} stack\n     */\n    function notifyHandlers(stack, isWindowError) {\n        var exception = null;\n        if (isWindowError && !TraceKit.collectWindowErrors) {\n          return;\n        }\n        for (var i in handlers) {\n            if (hasKey(handlers, i)) {\n                try {\n                    handlers[i].apply(null, [stack].concat(_slice.call(arguments, 2)));\n                } catch (inner) {\n                    exception = inner;\n                }\n            }\n        }\n\n        if (exception) {\n            throw exception;\n        }\n    }\n\n    var _oldOnerrorHandler, _onErrorHandlerInstalled;\n\n    /**\n     * Ensures all global unhandled exceptions are recorded.\n     * Supported by Gecko and IE.\n     * @param {string} message Error message.\n     * @param {string} url URL of script that generated the exception.\n     * @param {(number|string)} lineNo The line number at which the error\n     * occurred.\n     * @param {?(number|string)} colNo The column number at which the error\n     * occurred.\n     * @param {?Error} ex The actual Error object.\n     */\n    function traceKitWindowOnError(message, url, lineNo, colNo, ex) {\n        var stack = null;\n\n        if (lastExceptionStack) {\n            TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(lastExceptionStack, url, lineNo, message);\n            processLastException();\n        } else if (ex) {\n            // New chrome and blink send along a real error object\n            // Let's just report that like a normal error.\n            // See: https://mikewest.org/2013/08/debugging-runtime-errors-with-window-onerror\n            stack = TraceKit.computeStackTrace(ex);\n            notifyHandlers(stack, true);\n        } else {\n            var location = {\n                'url': url,\n                'line': lineNo,\n                'column': colNo\n            };\n            location.func = TraceKit.computeStackTrace.guessFunctionName(location.url, location.line);\n            location.context = TraceKit.computeStackTrace.gatherContext(location.url, location.line);\n            stack = {\n                'message': message,\n                'url': getLocationHref(),\n                'stack': [location]\n            };\n            notifyHandlers(stack, true);\n        }\n\n        if (_oldOnerrorHandler) {\n            return _oldOnerrorHandler.apply(this, arguments);\n        }\n\n        return false;\n    }\n\n    function installGlobalHandler ()\n    {\n        if (_onErrorHandlerInstalled) {\n            return;\n        }\n        _oldOnerrorHandler = window.onerror;\n        window.onerror = traceKitWindowOnError;\n        _onErrorHandlerInstalled = true;\n    }\n\n    function uninstallGlobalHandler ()\n    {\n        if (!_onErrorHandlerInstalled) {\n            return;\n        }\n        window.onerror = _oldOnerrorHandler;\n        _onErrorHandlerInstalled = false;\n        _oldOnerrorHandler = undefined;\n    }\n\n    function processLastException() {\n        var _lastExceptionStack = lastExceptionStack,\n            _lastArgs = lastArgs;\n        lastArgs = null;\n        lastExceptionStack = null;\n        lastException = null;\n        notifyHandlers.apply(null, [_lastExceptionStack, false].concat(_lastArgs));\n    }\n\n    /**\n     * Reports an unhandled Error to TraceKit.\n     * @param {Error} ex\n     * @param {?boolean} rethrow If false, do not re-throw the exception.\n     * Only used for window.onerror to not cause an infinite loop of\n     * rethrowing.\n     */\n    function report(ex, rethrow) {\n        var args = _slice.call(arguments, 1);\n        if (lastExceptionStack) {\n            if (lastException === ex) {\n                return; // already caught by an inner catch block, ignore\n            } else {\n              processLastException();\n            }\n        }\n\n        var stack = TraceKit.computeStackTrace(ex);\n        lastExceptionStack = stack;\n        lastException = ex;\n        lastArgs = args;\n\n        // If the stack trace is incomplete, wait for 2 seconds for\n        // slow slow IE to see if onerror occurs or not before reporting\n        // this exception; otherwise, we will end up with an incomplete\n        // stack trace\n        window.setTimeout(function () {\n            if (lastException === ex) {\n                processLastException();\n            }\n        }, (stack.incomplete ? 2000 : 0));\n\n        if (rethrow !== false) {\n            throw ex; // re-throw to propagate to the top level (and cause window.onerror)\n        }\n    }\n\n    report.subscribe = subscribe;\n    report.unsubscribe = unsubscribe;\n    report.uninstall = unsubscribeAll;\n    return report;\n}());\n\n/**\n * TraceKit.computeStackTrace: cross-browser stack traces in JavaScript\n *\n * Syntax:\n *   s = TraceKit.computeStackTrace(exception) // consider using TraceKit.report instead (see below)\n * Returns:\n *   s.name              - exception name\n *   s.message           - exception message\n *   s.stack[i].url      - JavaScript or HTML file URL\n *   s.stack[i].func     - function name, or empty for anonymous functions (if guessing did not work)\n *   s.stack[i].args     - arguments passed to the function, if known\n *   s.stack[i].line     - line number, if known\n *   s.stack[i].column   - column number, if known\n *   s.stack[i].context  - an array of source code lines; the middle element corresponds to the correct line#\n *\n * Supports:\n *   - Firefox:  full stack trace with line numbers and unreliable column\n *               number on top frame\n *   - Opera 10: full stack trace with line and column numbers\n *   - Opera 9-: full stack trace with line numbers\n *   - Chrome:   full stack trace with line and column numbers\n *   - Safari:   line and column number for the topmost stacktrace element\n *               only\n *   - IE:       no line numbers whatsoever\n *\n * Tries to guess names of anonymous functions by looking for assignments\n * in the source code. In IE and Safari, we have to guess source file names\n * by searching for function bodies inside all page scripts. This will not\n * work for scripts that are loaded cross-domain.\n * Here be dragons: some function names may be guessed incorrectly, and\n * duplicate functions may be mismatched.\n *\n * TraceKit.computeStackTrace should only be used for tracing purposes.\n * Logging of unhandled exceptions should be done with TraceKit.report,\n * which builds on top of TraceKit.computeStackTrace and provides better\n * IE support by utilizing the window.onerror event to retrieve information\n * about the top of the stack.\n *\n * Note: In IE and Safari, no stack trace is recorded on the Error object,\n * so computeStackTrace instead walks its *own* chain of callers.\n * This means that:\n *  * in Safari, some methods may be missing from the stack trace;\n *  * in IE, the topmost function in the stack trace will always be the\n *    caller of computeStackTrace.\n *\n * This is okay for tracing (because you are likely to be calling\n * computeStackTrace from the function you want to be the topmost element\n * of the stack trace anyway), but not okay for logging unhandled\n * exceptions (because your catch block will likely be far away from the\n * inner function that actually caused the exception).\n *\n */\nTraceKit.computeStackTrace = (function computeStackTraceWrapper() {\n    var sourceCache = {};\n\n    /**\n     * Attempts to retrieve source code via XMLHttpRequest, which is used\n     * to look up anonymous function names.\n     * @param {string} url URL of source code.\n     * @return {string} Source contents.\n     */\n    function loadSource(url) {\n        if (!TraceKit.remoteFetching) { //Only attempt request if remoteFetching is on.\n            return '';\n        }\n        try {\n            var getXHR = function() {\n                try {\n                    return new window.XMLHttpRequest();\n                } catch (e) {\n                    // explicitly bubble up the exception if not found\n                    return new window.ActiveXObject('Microsoft.XMLHTTP');\n                }\n            };\n\n            var request = getXHR();\n            request.open('GET', url, false);\n            request.send('');\n            return request.responseText;\n        } catch (e) {\n            return '';\n        }\n    }\n\n    /**\n     * Retrieves source code from the source code cache.\n     * @param {string} url URL of source code.\n     * @return {Array.<string>} Source contents.\n     */\n    function getSource(url) {\n        if (!isString(url)) return [];\n        if (!hasKey(sourceCache, url)) {\n            // URL needs to be able to fetched within the acceptable domain.  Otherwise,\n            // cross-domain errors will be triggered.\n            var source = '';\n            var domain = '';\n            try { domain = document.domain; } catch (e) {}\n            if (url.indexOf(domain) !== -1) {\n                source = loadSource(url);\n            }\n            sourceCache[url] = source ? source.split('\\n') : [];\n        }\n\n        return sourceCache[url];\n    }\n\n    /**\n     * Tries to use an externally loaded copy of source code to determine\n     * the name of a function by looking at the name of the variable it was\n     * assigned to, if any.\n     * @param {string} url URL of source code.\n     * @param {(string|number)} lineNo Line number in source code.\n     * @return {string} The function name, if discoverable.\n     */\n    function guessFunctionName(url, lineNo) {\n        var reFunctionArgNames = /function ([^(]*)\\(([^)]*)\\)/,\n            reGuessFunction = /['\"]?([0-9A-Za-z$_]+)['\"]?\\s*[:=]\\s*(function|eval|new Function)/,\n            line = '',\n            maxLines = 10,\n            source = getSource(url),\n            m;\n\n        if (!source.length) {\n            return UNKNOWN_FUNCTION;\n        }\n\n        // Walk backwards from the first line in the function until we find the line which\n        // matches the pattern above, which is the function definition\n        for (var i = 0; i < maxLines; ++i) {\n            line = source[lineNo - i] + line;\n\n            if (!isUndefined(line)) {\n                if ((m = reGuessFunction.exec(line))) {\n                    return m[1];\n                } else if ((m = reFunctionArgNames.exec(line))) {\n                    return m[1];\n                }\n            }\n        }\n\n        return UNKNOWN_FUNCTION;\n    }\n\n    /**\n     * Retrieves the surrounding lines from where an exception occurred.\n     * @param {string} url URL of source code.\n     * @param {(string|number)} line Line number in source code to centre\n     * around for context.\n     * @return {?Array.<string>} Lines of source code.\n     */\n    function gatherContext(url, line) {\n        var source = getSource(url);\n\n        if (!source.length) {\n            return null;\n        }\n\n        var context = [],\n            // linesBefore & linesAfter are inclusive with the offending line.\n            // if linesOfContext is even, there will be one extra line\n            //   *before* the offending line.\n            linesBefore = Math.floor(TraceKit.linesOfContext / 2),\n            // Add one extra line if linesOfContext is odd\n            linesAfter = linesBefore + (TraceKit.linesOfContext % 2),\n            start = Math.max(0, line - linesBefore - 1),\n            end = Math.min(source.length, line + linesAfter - 1);\n\n        line -= 1; // convert to 0-based index\n\n        for (var i = start; i < end; ++i) {\n            if (!isUndefined(source[i])) {\n                context.push(source[i]);\n            }\n        }\n\n        return context.length > 0 ? context : null;\n    }\n\n    /**\n     * Escapes special characters, except for whitespace, in a string to be\n     * used inside a regular expression as a string literal.\n     * @param {string} text The string.\n     * @return {string} The escaped string literal.\n     */\n    function escapeRegExp(text) {\n        return text.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#]/g, '\\\\$&');\n    }\n\n    /**\n     * Escapes special characters in a string to be used inside a regular\n     * expression as a string literal. Also ensures that HTML entities will\n     * be matched the same as their literal friends.\n     * @param {string} body The string.\n     * @return {string} The escaped string.\n     */\n    function escapeCodeAsRegExpForMatchingInsideHTML(body) {\n        return escapeRegExp(body).replace('<', '(?:<|&lt;)').replace('>', '(?:>|&gt;)').replace('&', '(?:&|&amp;)').replace('\"', '(?:\"|&quot;)').replace(/\\s+/g, '\\\\s+');\n    }\n\n    /**\n     * Determines where a code fragment occurs in the source code.\n     * @param {RegExp} re The function definition.\n     * @param {Array.<string>} urls A list of URLs to search.\n     * @return {?Object.<string, (string|number)>} An object containing\n     * the url, line, and column number of the defined function.\n     */\n    function findSourceInUrls(re, urls) {\n        var source, m;\n        for (var i = 0, j = urls.length; i < j; ++i) {\n            // console.log('searching', urls[i]);\n            if ((source = getSource(urls[i])).length) {\n                source = source.join('\\n');\n                if ((m = re.exec(source))) {\n                    // console.log('Found function in ' + urls[i]);\n\n                    return {\n                        'url': urls[i],\n                        'line': source.substring(0, m.index).split('\\n').length,\n                        'column': m.index - source.lastIndexOf('\\n', m.index) - 1\n                    };\n                }\n            }\n        }\n\n        // console.log('no match');\n\n        return null;\n    }\n\n    /**\n     * Determines at which column a code fragment occurs on a line of the\n     * source code.\n     * @param {string} fragment The code fragment.\n     * @param {string} url The URL to search.\n     * @param {(string|number)} line The line number to examine.\n     * @return {?number} The column number.\n     */\n    function findSourceInLine(fragment, url, line) {\n        var source = getSource(url),\n            re = new RegExp('\\\\b' + escapeRegExp(fragment) + '\\\\b'),\n            m;\n\n        line -= 1;\n\n        if (source && source.length > line && (m = re.exec(source[line]))) {\n            return m.index;\n        }\n\n        return null;\n    }\n\n    /**\n     * Determines where a function was defined within the source code.\n     * @param {(Function|string)} func A function reference or serialized\n     * function definition.\n     * @return {?Object.<string, (string|number)>} An object containing\n     * the url, line, and column number of the defined function.\n     */\n    function findSourceByFunctionBody(func) {\n        if (typeof document === 'undefined')\n            return;\n\n        var urls = [window.location.href],\n            scripts = document.getElementsByTagName('script'),\n            body,\n            code = '' + func,\n            codeRE = /^function(?:\\s+([\\w$]+))?\\s*\\(([\\w\\s,]*)\\)\\s*\\{\\s*(\\S[\\s\\S]*\\S)\\s*\\}\\s*$/,\n            eventRE = /^function on([\\w$]+)\\s*\\(event\\)\\s*\\{\\s*(\\S[\\s\\S]*\\S)\\s*\\}\\s*$/,\n            re,\n            parts,\n            result;\n\n        for (var i = 0; i < scripts.length; ++i) {\n            var script = scripts[i];\n            if (script.src) {\n                urls.push(script.src);\n            }\n        }\n\n        if (!(parts = codeRE.exec(code))) {\n            re = new RegExp(escapeRegExp(code).replace(/\\s+/g, '\\\\s+'));\n        }\n\n        // not sure if this is really necessary, but I don’t have a test\n        // corpus large enough to confirm that and it was in the original.\n        else {\n            var name = parts[1] ? '\\\\s+' + parts[1] : '',\n                args = parts[2].split(',').join('\\\\s*,\\\\s*');\n\n            body = escapeRegExp(parts[3]).replace(/;$/, ';?'); // semicolon is inserted if the function ends with a comment.replace(/\\s+/g, '\\\\s+');\n            re = new RegExp('function' + name + '\\\\s*\\\\(\\\\s*' + args + '\\\\s*\\\\)\\\\s*{\\\\s*' + body + '\\\\s*}');\n        }\n\n        // look for a normal function definition\n        if ((result = findSourceInUrls(re, urls))) {\n            return result;\n        }\n\n        // look for an old-school event handler function\n        if ((parts = eventRE.exec(code))) {\n            var event = parts[1];\n            body = escapeCodeAsRegExpForMatchingInsideHTML(parts[2]);\n\n            // look for a function defined in HTML as an onXXX handler\n            re = new RegExp('on' + event + '=[\\\\\\'\"]\\\\s*' + body + '\\\\s*[\\\\\\'\"]', 'i');\n\n            if ((result = findSourceInUrls(re, urls[0]))) {\n                return result;\n            }\n\n            // look for ???\n            re = new RegExp(body);\n\n            if ((result = findSourceInUrls(re, urls))) {\n                return result;\n            }\n        }\n\n        return null;\n    }\n\n    // Contents of Exception in various browsers.\n    //\n    // SAFARI:\n    // ex.message = Can't find variable: qq\n    // ex.line = 59\n    // ex.sourceId = 580238192\n    // ex.sourceURL = http://...\n    // ex.expressionBeginOffset = 96\n    // ex.expressionCaretOffset = 98\n    // ex.expressionEndOffset = 98\n    // ex.name = ReferenceError\n    //\n    // FIREFOX:\n    // ex.message = qq is not defined\n    // ex.fileName = http://...\n    // ex.lineNumber = 59\n    // ex.columnNumber = 69\n    // ex.stack = ...stack trace... (see the example below)\n    // ex.name = ReferenceError\n    //\n    // CHROME:\n    // ex.message = qq is not defined\n    // ex.name = ReferenceError\n    // ex.type = not_defined\n    // ex.arguments = ['aa']\n    // ex.stack = ...stack trace...\n    //\n    // INTERNET EXPLORER:\n    // ex.message = ...\n    // ex.name = ReferenceError\n    //\n    // OPERA:\n    // ex.message = ...message... (see the example below)\n    // ex.name = ReferenceError\n    // ex.opera#sourceloc = 11  (pretty much useless, duplicates the info in ex.message)\n    // ex.stacktrace = n/a; see 'opera:config#UserPrefs|Exceptions Have Stacktrace'\n\n    /**\n     * Computes stack trace information from the stack property.\n     * Chrome and Gecko use this property.\n     * @param {Error} ex\n     * @return {?Object.<string, *>} Stack trace information.\n     */\n    function computeStackTraceFromStackProp(ex) {\n        if (isUndefined(ex.stack) || !ex.stack) return;\n\n        var chrome = /^\\s*at (.*?) ?\\(?((?:(?:file|https?|chrome-extension):.*?)|<anonymous>):(\\d+)(?::(\\d+))?\\)?\\s*$/i,\n            gecko = /^\\s*(.*?)(?:\\((.*?)\\))?@((?:file|https?|chrome).*?):(\\d+)(?::(\\d+))?\\s*$/i,\n            winjs = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:ms-appx|http|https):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i,\n            lines = ex.stack.split('\\n'),\n            stack = [],\n            parts,\n            element,\n            reference = /^(.*) is undefined$/.exec(ex.message);\n\n        for (var i = 0, j = lines.length; i < j; ++i) {\n            if ((parts = gecko.exec(lines[i]))) {\n                element = {\n                    'url': parts[3],\n                    'func': parts[1] || UNKNOWN_FUNCTION,\n                    'args': parts[2] ? parts[2].split(',') : '',\n                    'line': +parts[4],\n                    'column': parts[5] ? +parts[5] : null\n                };\n            } else if ((parts = chrome.exec(lines[i]))) {\n                element = {\n                    'url': parts[2],\n                    'func': parts[1] || UNKNOWN_FUNCTION,\n                    'line': +parts[3],\n                    'column': parts[4] ? +parts[4] : null\n                };\n            } else if ((parts = winjs.exec(lines[i]))) {\n                element = {\n                    'url': parts[2],\n                    'func': parts[1] || UNKNOWN_FUNCTION,\n                    'line': +parts[3],\n                    'column': parts[4] ? +parts[4] : null\n                };\n            } else {\n                continue;\n            }\n\n            if (!element.func && element.line) {\n                element.func = guessFunctionName(element.url, element.line);\n            }\n\n            if (element.line) {\n                element.context = gatherContext(element.url, element.line);\n            }\n\n            stack.push(element);\n        }\n\n        if (!stack.length) {\n            return null;\n        }\n\n        if (stack[0].line && !stack[0].column && reference) {\n            stack[0].column = findSourceInLine(reference[1], stack[0].url, stack[0].line);\n        } else if (!stack[0].column && !isUndefined(ex.columnNumber)) {\n            // FireFox uses this awesome columnNumber property for its top frame\n            // Also note, Firefox's column number is 0-based and everything else expects 1-based,\n            // so adding 1\n            stack[0].column = ex.columnNumber + 1;\n        }\n\n        return {\n            'name': ex.name,\n            'message': ex.message,\n            'url': getLocationHref(),\n            'stack': stack\n        };\n    }\n\n    /**\n     * Computes stack trace information from the stacktrace property.\n     * Opera 10 uses this property.\n     * @param {Error} ex\n     * @return {?Object.<string, *>} Stack trace information.\n     */\n    function computeStackTraceFromStacktraceProp(ex) {\n        // Access and store the stacktrace property before doing ANYTHING\n        // else to it because Opera is not very good at providing it\n        // reliably in other circumstances.\n        var stacktrace = ex.stacktrace;\n        if (isUndefined(ex.stacktrace) || !ex.stacktrace) return;\n\n        var testRE = / line (\\d+), column (\\d+) in (?:<anonymous function: ([^>]+)>|([^\\)]+))\\((.*)\\) in (.*):\\s*$/i,\n            lines = stacktrace.split('\\n'),\n            stack = [],\n            parts;\n\n        for (var i = 0, j = lines.length; i < j; i += 2) {\n            if ((parts = testRE.exec(lines[i]))) {\n                var element = {\n                    'line': +parts[1],\n                    'column': +parts[2],\n                    'func': parts[3] || parts[4],\n                    'args': parts[5] ? parts[5].split(',') : [],\n                    'url': parts[6]\n                };\n\n                if (!element.func && element.line) {\n                    element.func = guessFunctionName(element.url, element.line);\n                }\n                if (element.line) {\n                    try {\n                        element.context = gatherContext(element.url, element.line);\n                    } catch (exc) {}\n                }\n\n                if (!element.context) {\n                    element.context = [lines[i + 1]];\n                }\n\n                stack.push(element);\n            }\n        }\n\n        if (!stack.length) {\n            return null;\n        }\n\n        return {\n            'name': ex.name,\n            'message': ex.message,\n            'url': getLocationHref(),\n            'stack': stack\n        };\n    }\n\n    /**\n     * NOT TESTED.\n     * Computes stack trace information from an error message that includes\n     * the stack trace.\n     * Opera 9 and earlier use this method if the option to show stack\n     * traces is turned on in opera:config.\n     * @param {Error} ex\n     * @return {?Object.<string, *>} Stack information.\n     */\n    function computeStackTraceFromOperaMultiLineMessage(ex) {\n        // Opera includes a stack trace into the exception message. An example is:\n        //\n        // Statement on line 3: Undefined variable: undefinedFunc\n        // Backtrace:\n        //   Line 3 of linked script file://localhost/Users/andreyvit/Projects/TraceKit/javascript-client/sample.js: In function zzz\n        //         undefinedFunc(a);\n        //   Line 7 of inline#1 script in file://localhost/Users/andreyvit/Projects/TraceKit/javascript-client/sample.html: In function yyy\n        //           zzz(x, y, z);\n        //   Line 3 of inline#1 script in file://localhost/Users/andreyvit/Projects/TraceKit/javascript-client/sample.html: In function xxx\n        //           yyy(a, a, a);\n        //   Line 1 of function script\n        //     try { xxx('hi'); return false; } catch(ex) { TraceKit.report(ex); }\n        //   ...\n\n        var lines = ex.message.split('\\n');\n        if (lines.length < 4) {\n            return null;\n        }\n\n        var lineRE1 = /^\\s*Line (\\d+) of linked script ((?:file|https?)\\S+)(?:: in function (\\S+))?\\s*$/i,\n            lineRE2 = /^\\s*Line (\\d+) of inline#(\\d+) script in ((?:file|https?)\\S+)(?:: in function (\\S+))?\\s*$/i,\n            lineRE3 = /^\\s*Line (\\d+) of function script\\s*$/i,\n            stack = [],\n            scripts = document.getElementsByTagName('script'),\n            inlineScriptBlocks = [],\n            parts,\n            i,\n            len,\n            source;\n\n        for (i in scripts) {\n            if (hasKey(scripts, i) && !scripts[i].src) {\n                inlineScriptBlocks.push(scripts[i]);\n            }\n        }\n\n        for (i = 2, len = lines.length; i < len; i += 2) {\n            var item = null;\n            if ((parts = lineRE1.exec(lines[i]))) {\n                item = {\n                    'url': parts[2],\n                    'func': parts[3],\n                    'line': +parts[1]\n                };\n            } else if ((parts = lineRE2.exec(lines[i]))) {\n                item = {\n                    'url': parts[3],\n                    'func': parts[4]\n                };\n                var relativeLine = (+parts[1]); // relative to the start of the <SCRIPT> block\n                var script = inlineScriptBlocks[parts[2] - 1];\n                if (script) {\n                    source = getSource(item.url);\n                    if (source) {\n                        source = source.join('\\n');\n                        var pos = source.indexOf(script.innerText);\n                        if (pos >= 0) {\n                            item.line = relativeLine + source.substring(0, pos).split('\\n').length;\n                        }\n                    }\n                }\n            } else if ((parts = lineRE3.exec(lines[i]))) {\n                var url = window.location.href.replace(/#.*$/, ''),\n                    line = parts[1];\n                var re = new RegExp(escapeCodeAsRegExpForMatchingInsideHTML(lines[i + 1]));\n                source = findSourceInUrls(re, [url]);\n                item = {\n                    'url': url,\n                    'line': source ? source.line : line,\n                    'func': ''\n                };\n            }\n\n            if (item) {\n                if (!item.func) {\n                    item.func = guessFunctionName(item.url, item.line);\n                }\n                var context = gatherContext(item.url, item.line);\n                var midline = (context ? context[Math.floor(context.length / 2)] : null);\n                if (context && midline.replace(/^\\s*/, '') === lines[i + 1].replace(/^\\s*/, '')) {\n                    item.context = context;\n                } else {\n                    // if (context) alert(\"Context mismatch. Correct midline:\\n\" + lines[i+1] + \"\\n\\nMidline:\\n\" + midline + \"\\n\\nContext:\\n\" + context.join(\"\\n\") + \"\\n\\nURL:\\n\" + item.url);\n                    item.context = [lines[i + 1]];\n                }\n                stack.push(item);\n            }\n        }\n        if (!stack.length) {\n            return null; // could not parse multiline exception message as Opera stack trace\n        }\n\n        return {\n            'name': ex.name,\n            'message': lines[0],\n            'url': getLocationHref(),\n            'stack': stack\n        };\n    }\n\n    /**\n     * Adds information about the first frame to incomplete stack traces.\n     * Safari and IE require this to get complete data on the first frame.\n     * @param {Object.<string, *>} stackInfo Stack trace information from\n     * one of the compute* methods.\n     * @param {string} url The URL of the script that caused an error.\n     * @param {(number|string)} lineNo The line number of the script that\n     * caused an error.\n     * @param {string=} message The error generated by the browser, which\n     * hopefully contains the name of the object that caused the error.\n     * @return {boolean} Whether or not the stack information was\n     * augmented.\n     */\n    function augmentStackTraceWithInitialElement(stackInfo, url, lineNo, message) {\n        var initial = {\n            'url': url,\n            'line': lineNo\n        };\n\n        if (initial.url && initial.line) {\n            stackInfo.incomplete = false;\n\n            if (!initial.func) {\n                initial.func = guessFunctionName(initial.url, initial.line);\n            }\n\n            if (!initial.context) {\n                initial.context = gatherContext(initial.url, initial.line);\n            }\n\n            var reference = / '([^']+)' /.exec(message);\n            if (reference) {\n                initial.column = findSourceInLine(reference[1], initial.url, initial.line);\n            }\n\n            if (stackInfo.stack.length > 0) {\n                if (stackInfo.stack[0].url === initial.url) {\n                    if (stackInfo.stack[0].line === initial.line) {\n                        return false; // already in stack trace\n                    } else if (!stackInfo.stack[0].line && stackInfo.stack[0].func === initial.func) {\n                        stackInfo.stack[0].line = initial.line;\n                        stackInfo.stack[0].context = initial.context;\n                        return false;\n                    }\n                }\n            }\n\n            stackInfo.stack.unshift(initial);\n            stackInfo.partial = true;\n            return true;\n        } else {\n            stackInfo.incomplete = true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Computes stack trace information by walking the arguments.caller\n     * chain at the time the exception occurred. This will cause earlier\n     * frames to be missed but is the only way to get any stack trace in\n     * Safari and IE. The top frame is restored by\n     * {@link augmentStackTraceWithInitialElement}.\n     * @param {Error} ex\n     * @return {?Object.<string, *>} Stack trace information.\n     */\n    function computeStackTraceByWalkingCallerChain(ex, depth) {\n        var functionName = /function\\s+([_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*)?\\s*\\(/i,\n            stack = [],\n            funcs = {},\n            recursion = false,\n            parts,\n            item,\n            source;\n\n        for (var curr = computeStackTraceByWalkingCallerChain.caller; curr && !recursion; curr = curr.caller) {\n            if (curr === computeStackTrace || curr === TraceKit.report) {\n                // console.log('skipping internal function');\n                continue;\n            }\n\n            item = {\n                'url': null,\n                'func': UNKNOWN_FUNCTION,\n                'line': null,\n                'column': null\n            };\n\n            if (curr.name) {\n                item.func = curr.name;\n            } else if ((parts = functionName.exec(curr.toString()))) {\n                item.func = parts[1];\n            }\n\n            if (typeof item.func === 'undefined') {\n              try {\n                item.func = parts.input.substring(0, parts.input.indexOf('{'));\n              } catch (e) { }\n            }\n\n            if ((source = findSourceByFunctionBody(curr))) {\n                item.url = source.url;\n                item.line = source.line;\n\n                if (item.func === UNKNOWN_FUNCTION) {\n                    item.func = guessFunctionName(item.url, item.line);\n                }\n\n                var reference = / '([^']+)' /.exec(ex.message || ex.description);\n                if (reference) {\n                    item.column = findSourceInLine(reference[1], source.url, source.line);\n                }\n            }\n\n            if (funcs['' + curr]) {\n                recursion = true;\n            }else{\n                funcs['' + curr] = true;\n            }\n\n            stack.push(item);\n        }\n\n        if (depth) {\n            // console.log('depth is ' + depth);\n            // console.log('stack is ' + stack.length);\n            stack.splice(0, depth);\n        }\n\n        var result = {\n            'name': ex.name,\n            'message': ex.message,\n            'url': getLocationHref(),\n            'stack': stack\n        };\n        augmentStackTraceWithInitialElement(result, ex.sourceURL || ex.fileName, ex.line || ex.lineNumber, ex.message || ex.description);\n        return result;\n    }\n\n    /**\n     * Computes a stack trace for an exception.\n     * @param {Error} ex\n     * @param {(string|number)=} depth\n     */\n    function computeStackTrace(ex, depth) {\n        var stack = null;\n        depth = (depth == null ? 0 : +depth);\n\n        try {\n            // This must be tried first because Opera 10 *destroys*\n            // its stacktrace property if you try to access the stack\n            // property first!!\n            stack = computeStackTraceFromStacktraceProp(ex);\n            if (stack) {\n                return stack;\n            }\n        } catch (e) {\n            if (TraceKit.debug) {\n                throw e;\n            }\n        }\n\n        try {\n            stack = computeStackTraceFromStackProp(ex);\n            if (stack) {\n                return stack;\n            }\n        } catch (e) {\n            if (TraceKit.debug) {\n                throw e;\n            }\n        }\n\n        try {\n            stack = computeStackTraceFromOperaMultiLineMessage(ex);\n            if (stack) {\n                return stack;\n            }\n        } catch (e) {\n            if (TraceKit.debug) {\n                throw e;\n            }\n        }\n\n        try {\n            stack = computeStackTraceByWalkingCallerChain(ex, depth + 1);\n            if (stack) {\n                return stack;\n            }\n        } catch (e) {\n            if (TraceKit.debug) {\n                throw e;\n            }\n        }\n\n        return {\n            'name': ex.name,\n            'message': ex.message,\n            'url': getLocationHref()\n        };\n    }\n\n    computeStackTrace.augmentStackTraceWithInitialElement = augmentStackTraceWithInitialElement;\n    computeStackTrace.computeStackTraceFromStackProp = computeStackTraceFromStackProp;\n    computeStackTrace.guessFunctionName = guessFunctionName;\n    computeStackTrace.gatherContext = gatherContext;\n\n    return computeStackTrace;\n}());\n\n'use strict';\n\n// First, check for JSON support\n// If there is no JSON, we no-op the core features of Raven\n// since JSON is required to encode the payload\nvar _Raven = window.Raven,\n    hasJSON = !!(typeof JSON === 'object' && JSON.stringify),\n    // Raven can run in contexts where there's no document (react-native)\n    hasDocument = typeof document !== 'undefined',\n    lastCapturedException,\n    lastEventId,\n    globalServer,\n    globalKey,\n    globalProject,\n    globalContext = {},\n    globalOptions = {\n        logger: 'javascript',\n        ignoreErrors: [],\n        ignoreUrls: [],\n        whitelistUrls: [],\n        includePaths: [],\n        crossOrigin: 'anonymous',\n        collectWindowErrors: true,\n        maxMessageLength: 100\n    },\n    isRavenInstalled = false,\n    objectPrototype = Object.prototype,\n    // capture references to window.console *and* all its methods first\n    // before the console plugin has a chance to monkey patch\n    originalConsole = window.console || {},\n    originalConsoleMethods = {},\n    plugins = [],\n    startTime = now();\n\nfor (var method in originalConsole) {\n  originalConsoleMethods[method] = originalConsole[method];\n}\n/*\n * The core Raven singleton\n *\n * @this {Raven}\n */\nvar Raven = {\n    VERSION: '1.3.0',\n\n    debug: false,\n\n    /*\n     * Allow multiple versions of Raven to be installed.\n     * Strip Raven from the global context and returns the instance.\n     *\n     * @return {Raven}\n     */\n    noConflict: function() {\n        window.Raven = _Raven;\n        return Raven;\n    },\n\n    /*\n     * Configure Raven with a DSN and extra options\n     *\n     * @param {string} dsn The public Sentry DSN\n     * @param {object} options Optional set of of global options [optional]\n     * @return {Raven}\n     */\n    config: function(dsn, options) {\n        if (globalServer) {\n            logDebug('error', 'Error: Raven has already been configured');\n            return Raven;\n        }\n        if (!dsn) return Raven;\n\n        var uri = parseDSN(dsn),\n            lastSlash = uri.path.lastIndexOf('/'),\n            path = uri.path.substr(1, lastSlash);\n\n        // merge in options\n        if (options) {\n            each(options, function(key, value){\n                // tags and extra are special and need to be put into context\n                if (key == 'tags' || key == 'extra') {\n                    globalContext[key] = value;\n                } else {\n                    globalOptions[key] = value;\n                }\n            });\n        }\n\n        // \"Script error.\" is hard coded into browsers for errors that it can't read.\n        // this is the result of a script being pulled in from an external domain and CORS.\n        globalOptions.ignoreErrors.push(/^Script error\\.?$/);\n        globalOptions.ignoreErrors.push(/^Javascript error: Script error\\.? on line 0$/);\n\n        // join regexp rules into one big rule\n        globalOptions.ignoreErrors = joinRegExp(globalOptions.ignoreErrors);\n        globalOptions.ignoreUrls = globalOptions.ignoreUrls.length ? joinRegExp(globalOptions.ignoreUrls) : false;\n        globalOptions.whitelistUrls = globalOptions.whitelistUrls.length ? joinRegExp(globalOptions.whitelistUrls) : false;\n        globalOptions.includePaths = joinRegExp(globalOptions.includePaths);\n\n        globalKey = uri.user;\n        globalProject = uri.path.substr(lastSlash + 1);\n\n        // assemble the endpoint from the uri pieces\n        globalServer = '//' + uri.host +\n                      (uri.port ? ':' + uri.port : '') +\n                      '/' + path + 'api/' + globalProject + '/store/';\n\n        if (uri.protocol) {\n            globalServer = uri.protocol + ':' + globalServer;\n        }\n\n        if (globalOptions.fetchContext) {\n            TraceKit.remoteFetching = true;\n        }\n\n        if (globalOptions.linesOfContext) {\n            TraceKit.linesOfContext = globalOptions.linesOfContext;\n        }\n\n        TraceKit.collectWindowErrors = !!globalOptions.collectWindowErrors;\n\n        // return for chaining\n        return Raven;\n    },\n\n    /*\n     * Installs a global window.onerror error handler\n     * to capture and report uncaught exceptions.\n     * At this point, install() is required to be called due\n     * to the way TraceKit is set up.\n     *\n     * @return {Raven}\n     */\n    install: function() {\n        if (isSetup() && !isRavenInstalled) {\n            TraceKit.report.subscribe(handleStackInfo);\n\n            // Install all of the plugins\n            each(plugins, function(_, plugin) {\n                plugin();\n            });\n\n            isRavenInstalled = true;\n        }\n\n        return Raven;\n    },\n\n    /*\n     * Wrap code within a context so Raven can capture errors\n     * reliably across domains that is executed immediately.\n     *\n     * @param {object} options A specific set of options for this context [optional]\n     * @param {function} func The callback to be immediately executed within the context\n     * @param {array} args An array of arguments to be called with the callback [optional]\n     */\n    context: function(options, func, args) {\n        if (isFunction(options)) {\n            args = func || [];\n            func = options;\n            options = undefined;\n        }\n\n        return Raven.wrap(options, func).apply(this, args);\n    },\n\n    /*\n     * Wrap code within a context and returns back a new function to be executed\n     *\n     * @param {object} options A specific set of options for this context [optional]\n     * @param {function} func The function to be wrapped in a new context\n     * @return {function} The newly wrapped functions with a context\n     */\n    wrap: function(options, func) {\n        // 1 argument has been passed, and it's not a function\n        // so just return it\n        if (isUndefined(func) && !isFunction(options)) {\n            return options;\n        }\n\n        // options is optional\n        if (isFunction(options)) {\n            func = options;\n            options = undefined;\n        }\n\n        // At this point, we've passed along 2 arguments, and the second one\n        // is not a function either, so we'll just return the second argument.\n        if (!isFunction(func)) {\n            return func;\n        }\n\n        // We don't wanna wrap it twice!\n        if (func.__raven__) {\n            return func;\n        }\n\n        function wrapped() {\n            var args = [], i = arguments.length,\n                deep = !options || options && options.deep !== false;\n            // Recursively wrap all of a function's arguments that are\n            // functions themselves.\n\n            while(i--) args[i] = deep ? Raven.wrap(options, arguments[i]) : arguments[i];\n\n            try {\n                /*jshint -W040*/\n                return func.apply(this, args);\n            } catch(e) {\n                Raven.captureException(e, options);\n                throw e;\n            }\n        }\n\n        // copy over properties of the old function\n        for (var property in func) {\n            if (hasKey(func, property)) {\n                wrapped[property] = func[property];\n            }\n        }\n        wrapped.prototype = func.prototype;\n\n        // Signal that this function has been wrapped already\n        // for both debugging and to prevent it to being wrapped twice\n        wrapped.__raven__ = true;\n        wrapped.__inner__ = func;\n\n        return wrapped;\n    },\n\n    /*\n     * Uninstalls the global error handler.\n     *\n     * @return {Raven}\n     */\n    uninstall: function() {\n        TraceKit.report.uninstall();\n        isRavenInstalled = false;\n\n        return Raven;\n    },\n\n    /*\n     * Manually capture an exception and send it over to Sentry\n     *\n     * @param {error} ex An exception to be logged\n     * @param {object} options A specific set of options for this error [optional]\n     * @return {Raven}\n     */\n    captureException: function(ex, options) {\n        // If not an Error is passed through, recall as a message instead\n        if (!isError(ex)) return Raven.captureMessage(ex, options);\n\n        // Store the raw exception object for potential debugging and introspection\n        lastCapturedException = ex;\n\n        // TraceKit.report will re-raise any exception passed to it,\n        // which means you have to wrap it in try/catch. Instead, we\n        // can wrap it here and only re-raise if TraceKit.report\n        // raises an exception different from the one we asked to\n        // report on.\n        try {\n            var stack = TraceKit.computeStackTrace(ex);\n            handleStackInfo(stack, options);\n        } catch(ex1) {\n            if(ex !== ex1) {\n                throw ex1;\n            }\n        }\n\n        return Raven;\n    },\n\n    /*\n     * Manually send a message to Sentry\n     *\n     * @param {string} msg A plain message to be captured in Sentry\n     * @param {object} options A specific set of options for this message [optional]\n     * @return {Raven}\n     */\n    captureMessage: function(msg, options) {\n        // config() automagically converts ignoreErrors from a list to a RegExp so we need to test for an\n        // early call; we'll error on the side of logging anything called before configuration since it's\n        // probably something you should see:\n        if (!!globalOptions.ignoreErrors.test && globalOptions.ignoreErrors.test(msg)) {\n            return;\n        }\n\n        // Fire away!\n        send(\n            objectMerge({\n                message: msg + ''  // Make sure it's actually a string\n            }, options)\n        );\n\n        return Raven;\n    },\n\n    addPlugin: function(plugin) {\n        plugins.push(plugin);\n        if (isRavenInstalled) plugin();\n        return Raven;\n    },\n\n    /*\n     * Set/clear a user to be sent along with the payload.\n     *\n     * @param {object} user An object representing user data [optional]\n     * @return {Raven}\n     */\n    setUserContext: function(user) {\n        // Intentionally do not merge here since that's an unexpected behavior.\n        globalContext.user = user;\n\n        return Raven;\n    },\n\n    /*\n     * Merge extra attributes to be sent along with the payload.\n     *\n     * @param {object} extra An object representing extra data [optional]\n     * @return {Raven}\n     */\n    setExtraContext: function(extra) {\n        mergeContext('extra', extra);\n\n        return Raven;\n    },\n\n    /*\n     * Merge tags to be sent along with the payload.\n     *\n     * @param {object} tags An object representing tags [optional]\n     * @return {Raven}\n     */\n    setTagsContext: function(tags) {\n        mergeContext('tags', tags);\n\n        return Raven;\n    },\n\n    /*\n     * Clear all of the context.\n     *\n     * @return {Raven}\n     */\n    clearContext: function() {\n        globalContext = {};\n\n        return Raven;\n    },\n\n    /*\n     * Get a copy of the current context. This cannot be mutated.\n     *\n     * @return {object} copy of context\n     */\n    getContext: function() {\n        // lol javascript\n        return JSON.parse(JSON.stringify(globalContext));\n    },\n\n    /*\n     * Set release version of application\n     *\n     * @param {string} release Typically something like a git SHA to identify version\n     * @return {Raven}\n     */\n    setRelease: function(release) {\n        globalOptions.release = release;\n\n        return Raven;\n    },\n\n    /*\n     * Set the dataCallback option\n     *\n     * @param {function} callback The callback to run which allows the\n     *                            data blob to be mutated before sending\n     * @return {Raven}\n     */\n    setDataCallback: function(callback) {\n        globalOptions.dataCallback = callback;\n\n        return Raven;\n    },\n\n    /*\n     * Set the shouldSendCallback option\n     *\n     * @param {function} callback The callback to run which allows\n     *                            introspecting the blob before sending\n     * @return {Raven}\n     */\n    setShouldSendCallback: function(callback) {\n        globalOptions.shouldSendCallback = callback;\n\n        return Raven;\n    },\n\n    /**\n     * Override the default HTTP transport mechanism that transmits data\n     * to the Sentry server.\n     *\n     * @param {function} transport Function invoked instead of the default\n     *                             `makeRequest` handler.\n     *\n     * @return {Raven}\n     */\n    setTransport: function(transport) {\n        globalOptions.transport = transport;\n\n        return Raven;\n    },\n\n    /*\n     * Get the latest raw exception that was captured by Raven.\n     *\n     * @return {error}\n     */\n    lastException: function() {\n        return lastCapturedException;\n    },\n\n    /*\n     * Get the last event id\n     *\n     * @return {string}\n     */\n    lastEventId: function() {\n        return lastEventId;\n    },\n\n    /*\n     * Determine if Raven is setup and ready to go.\n     *\n     * @return {boolean}\n     */\n    isSetup: function() {\n        return isSetup();\n    }\n};\n\n// Deprecations\nRaven.setUser = Raven.setUserContext;\nRaven.setReleaseContext = Raven.setRelease;\n\nfunction triggerEvent(eventType, options) {\n    // NOTE: `event` is a native browser thing, so let's avoid conflicting wiht it\n    var evt, key;\n\n    if (!hasDocument)\n        return;\n\n    options = options || {};\n\n    eventType = 'raven' + eventType.substr(0,1).toUpperCase() + eventType.substr(1);\n\n    if (document.createEvent) {\n        evt = document.createEvent('HTMLEvents');\n        evt.initEvent(eventType, true, true);\n    } else {\n        evt = document.createEventObject();\n        evt.eventType = eventType;\n    }\n\n    for (key in options) if (hasKey(options, key)) {\n        evt[key] = options[key];\n    }\n\n    if (document.createEvent) {\n        // IE9 if standards\n        document.dispatchEvent(evt);\n    } else {\n        // IE8 regardless of Quirks or Standards\n        // IE9 if quirks\n        try {\n            document.fireEvent('on' + evt.eventType.toLowerCase(), evt);\n        } catch(e) {}\n    }\n}\n\nvar dsnKeys = 'source protocol user pass host port path'.split(' '),\n    dsnPattern = /^(?:(\\w+):)?\\/\\/(?:(\\w+)(:\\w+)?@)?([\\w\\.-]+)(?::(\\d+))?(\\/.*)/;\n\nfunction RavenConfigError(message) {\n    this.name = 'RavenConfigError';\n    this.message = message;\n}\nRavenConfigError.prototype = new Error();\nRavenConfigError.prototype.constructor = RavenConfigError;\n\n/**** Private functions ****/\nfunction parseDSN(str) {\n    var m = dsnPattern.exec(str),\n        dsn = {},\n        i = 7;\n\n    try {\n        while (i--) dsn[dsnKeys[i]] = m[i] || '';\n    } catch(e) {\n        throw new RavenConfigError('Invalid DSN: ' + str);\n    }\n\n    if (dsn.pass)\n        throw new RavenConfigError('Do not specify your private key in the DSN!');\n\n    return dsn;\n}\n\nfunction isUndefined(what) {\n    return what === void 0;\n}\n\nfunction isFunction(what) {\n    return typeof what === 'function';\n}\n\nfunction isString(what) {\n    return objectPrototype.toString.call(what) === '[object String]';\n}\n\nfunction isObject(what) {\n    return typeof what === 'object' && what !== null;\n}\n\nfunction isEmptyObject(what) {\n    for (var k in what) return false;\n    return true;\n}\n\n// Sorta yanked from https://github.com/joyent/node/blob/aa3b4b4/lib/util.js#L560\n// with some tiny modifications\nfunction isError(what) {\n    return isObject(what) &&\n        objectPrototype.toString.call(what) === '[object Error]' ||\n        what instanceof Error;\n}\n\n/**\n * hasKey, a better form of hasOwnProperty\n * Example: hasKey(MainHostObject, property) === true/false\n *\n * @param {Object} host object to check property\n * @param {string} key to check\n */\nfunction hasKey(object, key) {\n    return objectPrototype.hasOwnProperty.call(object, key);\n}\n\nfunction each(obj, callback) {\n    var i, j;\n\n    if (isUndefined(obj.length)) {\n        for (i in obj) {\n            if (hasKey(obj, i)) {\n                callback.call(null, i, obj[i]);\n            }\n        }\n    } else {\n        j = obj.length;\n        if (j) {\n            for (i = 0; i < j; i++) {\n                callback.call(null, i, obj[i]);\n            }\n        }\n    }\n}\n\nfunction handleStackInfo(stackInfo, options) {\n    var frames = [];\n\n    if (stackInfo.stack && stackInfo.stack.length) {\n        each(stackInfo.stack, function(i, stack) {\n            var frame = normalizeFrame(stack);\n            if (frame) {\n                frames.push(frame);\n            }\n        });\n    }\n\n    triggerEvent('handle', {\n        stackInfo: stackInfo,\n        options: options\n    });\n\n    processException(\n        stackInfo.name,\n        stackInfo.message,\n        stackInfo.url,\n        stackInfo.lineno,\n        frames,\n        options\n    );\n}\n\nfunction normalizeFrame(frame) {\n    if (!frame.url) return;\n\n    // normalize the frames data\n    var normalized = {\n        filename:   frame.url,\n        lineno:     frame.line,\n        colno:      frame.column,\n        'function': frame.func || '?'\n    }, context = extractContextFromFrame(frame), i;\n\n    if (context) {\n        var keys = ['pre_context', 'context_line', 'post_context'];\n        i = 3;\n        while (i--) normalized[keys[i]] = context[i];\n    }\n\n    normalized.in_app = !( // determine if an exception came from outside of our app\n        // first we check the global includePaths list.\n        (!!globalOptions.includePaths.test && !globalOptions.includePaths.test(normalized.filename)) ||\n        // Now we check for fun, if the function name is Raven or TraceKit\n        /(Raven|TraceKit)\\./.test(normalized['function']) ||\n        // finally, we do a last ditch effort and check for raven.min.js\n        /raven\\.(min\\.)?js$/.test(normalized.filename)\n    );\n\n    return normalized;\n}\n\nfunction extractContextFromFrame(frame) {\n    // immediately check if we should even attempt to parse a context\n    if (!frame.context || !globalOptions.fetchContext) return;\n\n    var context = frame.context,\n        pivot = ~~(context.length / 2),\n        i = context.length, isMinified = false;\n\n    while (i--) {\n        // We're making a guess to see if the source is minified or not.\n        // To do that, we make the assumption if *any* of the lines passed\n        // in are greater than 300 characters long, we bail.\n        // Sentry will see that there isn't a context\n        if (context[i].length > 300) {\n            isMinified = true;\n            break;\n        }\n    }\n\n    if (isMinified) {\n        // The source is minified and we don't know which column. Fuck it.\n        if (isUndefined(frame.column)) return;\n\n        // If the source is minified and has a frame column\n        // we take a chunk of the offending line to hopefully shed some light\n        return [\n            [],  // no pre_context\n            context[pivot].substr(frame.column, 50), // grab 50 characters, starting at the offending column\n            []   // no post_context\n        ];\n    }\n\n    return [\n        context.slice(0, pivot),    // pre_context\n        context[pivot],             // context_line\n        context.slice(pivot + 1)    // post_context\n    ];\n}\n\nfunction processException(type, message, fileurl, lineno, frames, options) {\n    var stacktrace, i, fullMessage;\n\n    if (!!globalOptions.ignoreErrors.test && globalOptions.ignoreErrors.test(message)) return;\n\n    message += '';\n    fullMessage = type + ': ' + message;\n\n    if (frames && frames.length) {\n        fileurl = frames[0].filename || fileurl;\n        // Sentry expects frames oldest to newest\n        // and JS sends them as newest to oldest\n        frames.reverse();\n        stacktrace = {frames: frames};\n    } else if (fileurl) {\n        stacktrace = {\n            frames: [{\n                filename: fileurl,\n                lineno: lineno,\n                in_app: true\n            }]\n        };\n    }\n\n    if (!!globalOptions.ignoreUrls.test && globalOptions.ignoreUrls.test(fileurl)) return;\n    if (!!globalOptions.whitelistUrls.test && !globalOptions.whitelistUrls.test(fileurl)) return;\n\n    // Fire away!\n    send(\n        objectMerge({\n            // sentry.interfaces.Exception\n            exception: {\n                values: [{\n                    type: type,\n                    value: message,\n                    stacktrace: stacktrace\n                }]\n            },\n            culprit: fileurl,\n            message: fullMessage\n        }, options)\n    );\n}\n\nfunction objectMerge(obj1, obj2) {\n    if (!obj2) {\n        return obj1;\n    }\n    each(obj2, function(key, value){\n        obj1[key] = value;\n    });\n    return obj1;\n}\n\nfunction truncate(str, max) {\n    return str.length <= max ? str : str.substr(0, max) + '\\u2026';\n}\n\nfunction trimPacket(data) {\n    // For now, we only want to truncate the two different messages\n    // but this could/should be expanded to just trim everything\n    var max = globalOptions.maxMessageLength;\n    data.message = truncate(data.message, max);\n    if (data.exception) {\n        var exception = data.exception.values[0];\n        exception.value = truncate(exception.value, max);\n    }\n\n    return data;\n}\n\nfunction now() {\n    return +new Date();\n}\n\nfunction getHttpData() {\n    if (!hasDocument || !document.location || !document.location.href) {\n        return;\n    }\n\n    var httpData = {\n        headers: {\n            'User-Agent': navigator.userAgent\n        }\n    };\n\n    httpData.url = document.location.href;\n\n    if (document.referrer) {\n        httpData.headers.Referer = document.referrer;\n    }\n\n    return httpData;\n}\n\nfunction send(data) {\n    var baseData = {\n        project: globalProject,\n        logger: globalOptions.logger,\n        platform: 'javascript'\n    }, httpData = getHttpData();\n\n    if (httpData) {\n        baseData.request = httpData;\n    }\n\n    data = objectMerge(baseData, data);\n\n    // Merge in the tags and extra separately since objectMerge doesn't handle a deep merge\n    data.tags = objectMerge(objectMerge({}, globalContext.tags), data.tags);\n    data.extra = objectMerge(objectMerge({}, globalContext.extra), data.extra);\n\n    // Send along our own collected metadata with extra\n    data.extra['session:duration'] = now() - startTime;\n\n    // If there are no tags/extra, strip the key from the payload alltogther.\n    if (isEmptyObject(data.tags)) delete data.tags;\n\n    if (globalContext.user) {\n        // sentry.interfaces.User\n        data.user = globalContext.user;\n    }\n\n    // Include the release if it's defined in globalOptions\n    if (globalOptions.release) data.release = globalOptions.release;\n    // Include server_name if it's defined in globalOptions\n    if (globalOptions.serverName) data.server_name = globalOptions.serverName;\n\n    if (isFunction(globalOptions.dataCallback)) {\n        data = globalOptions.dataCallback(data) || data;\n    }\n\n    // Why??????????\n    if (!data || isEmptyObject(data)) {\n        return;\n    }\n\n    // Check if the request should be filtered or not\n    if (isFunction(globalOptions.shouldSendCallback) && !globalOptions.shouldSendCallback(data)) {\n        return;\n    }\n\n    // Send along an event_id if not explicitly passed.\n    // This event_id can be used to reference the error within Sentry itself.\n    // Set lastEventId after we know the error should actually be sent\n    lastEventId = data.event_id || (data.event_id = uuid4());\n\n    // Try and clean up the packet before sending by truncating long values\n    data = trimPacket(data);\n\n    logDebug('debug', 'Raven about to send:', data);\n\n    if (!isSetup()) return;\n\n    (globalOptions.transport || makeRequest)({\n        url: globalServer,\n        auth: {\n            sentry_version: '7',\n            sentry_client: 'raven-js/' + Raven.VERSION,\n            sentry_key: globalKey\n        },\n        data: data,\n        options: globalOptions,\n        onSuccess: function success() {\n            triggerEvent('success', {\n                data: data,\n                src: globalServer\n            });\n        },\n        onError: function failure() {\n            triggerEvent('failure', {\n                data: data,\n                src: globalServer\n            });\n        }\n    });\n}\n\nfunction makeRequest(opts) {\n    // Tack on sentry_data to auth options, which get urlencoded\n    opts.auth.sentry_data = JSON.stringify(opts.data);\n\n    var img = newImage(),\n        src = opts.url + '?' + urlencode(opts.auth),\n        crossOrigin = opts.options.crossOrigin;\n\n    if (crossOrigin || crossOrigin === '') {\n        img.crossOrigin = crossOrigin;\n    }\n    img.onload = opts.onSuccess;\n    img.onerror = img.onabort = opts.onError;\n    img.src = src;\n}\n\n// Note: this is shitty, but I can't figure out how to get\n// sinon to stub document.createElement without breaking everything\n// so this wrapper is just so I can stub it for tests.\nfunction newImage() {\n    return document.createElement('img');\n}\n\nvar ravenNotConfiguredError;\n\nfunction isSetup() {\n    if (!hasJSON) return false;  // needs JSON support\n    if (!globalServer) {\n        if (!ravenNotConfiguredError)\n          logDebug('error', 'Error: Raven has not been configured.');\n        ravenNotConfiguredError = true;\n        return false;\n    }\n    return true;\n}\n\nfunction joinRegExp(patterns) {\n    // Combine an array of regular expressions and strings into one large regexp\n    // Be mad.\n    var sources = [],\n        i = 0, len = patterns.length,\n        pattern;\n\n    for (; i < len; i++) {\n        pattern = patterns[i];\n        if (isString(pattern)) {\n            // If it's a string, we need to escape it\n            // Taken from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\n            sources.push(pattern.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\"));\n        } else if (pattern && pattern.source) {\n            // If it's a regexp already, we want to extract the source\n            sources.push(pattern.source);\n        }\n        // Intentionally skip other cases\n    }\n    return new RegExp(sources.join('|'), 'i');\n}\n\nfunction uuid4() {\n    var crypto = window.crypto || window.msCrypto;\n\n    if (!isUndefined(crypto) && crypto.getRandomValues) {\n        // Use window.crypto API if available\n        var arr = new Uint16Array(8);\n        crypto.getRandomValues(arr);\n\n        // set 4 in byte 7\n        arr[3] = arr[3] & 0xFFF | 0x4000;\n        // set 2 most significant bits of byte 9 to '10'\n        arr[4] = arr[4] & 0x3FFF | 0x8000;\n\n        var pad = function(num) {\n            var v = num.toString(16);\n            while (v.length < 4) {\n                v = '0' + v;\n            }\n            return v;\n        };\n\n        return (pad(arr[0]) + pad(arr[1]) + pad(arr[2]) + pad(arr[3]) + pad(arr[4]) +\n        pad(arr[5]) + pad(arr[6]) + pad(arr[7]));\n    } else {\n        // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n        return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random()*16|0,\n                v = c == 'x' ? r : (r&0x3|0x8);\n            return v.toString(16);\n        });\n    }\n}\n\nfunction logDebug(level) {\n    if (originalConsoleMethods[level] && Raven.debug) {\n        // _slice is coming from vendor/TraceKit/tracekit.js\n        // so it's accessible globally\n        originalConsoleMethods[level].apply(originalConsole, _slice.call(arguments, 1));\n    }\n}\n\nfunction afterLoad() {\n    // Attempt to initialize Raven on load\n    var RavenConfig = window.RavenConfig;\n    if (RavenConfig) {\n        Raven.config(RavenConfig.dsn, RavenConfig.config).install();\n    }\n}\n\nfunction urlencode(o) {\n    var pairs = [];\n    each(o, function(key, value) {\n        pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    });\n    return pairs.join('&');\n}\n\nfunction mergeContext(key, context) {\n    if (isUndefined(context)) {\n        delete globalContext[key];\n    } else {\n        globalContext[key] = objectMerge(globalContext[key] || {}, context);\n    }\n}\n\nafterLoad();\n\n// This is being exposed no matter what because there are too many weird\n// usecases for how people use Raven. If this is really a problem, I'm sorry.\nwindow.Raven = Raven;\n\n// Expose Raven to the world\nif (typeof define === 'function' && define.amd) {\n    // AMD\n    define('raven', [], function() {\n      return Raven;\n    });\n} else if (typeof module === 'object') {\n    // browserify\n    module.exports = Raven;\n} else if (typeof exports === 'object') {\n    // CommonJS\n    exports = Raven;\n}\n\n})(typeof window !== 'undefined' ? window : this);\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/raven-js/dist/raven.js\n **/","const krux = require('./js/krux');\nconst Ads = window.oAds = require('o-ads');\n// TODO move to central shared utils\nconst utils = require('./js/utils');\nconst oAdsConfig = require('./js/oAdsConfig');\nconst Reporter = require('./js/reporter');\nconst sendMetrics = require('./js/metrics');\nconst Sticky = require('./js/sticky');\n\nimport { perfMark } from '../utils'\n\nlet slotCount;\nlet slotsRendered = 0;\nlet onAdsCompleteCallback;\nconst customTimings = {};\n\nfunction initOAds (flags) {\n\tconst initObj = oAdsConfig(flags);\n\tconst containers = [].slice.call(document.querySelectorAll('.o-ads'));\n\n\tutils.log('dfp_targeting', initObj.dfp_targeting);\n\tonAdsCompleteCallback = onAdsComplete.bind(this, flags);\n\n\tdocument.addEventListener('oAds.complete', onAdsCompleteCallback);\n\n\tslotCount = containers.length;\n\n\tutils.log.info(slotCount + ' ad slots found on page');\n\tconst ads = Ads.init(initObj)\n\tads.then(res => containers.forEach(res.slots.initSlot.bind(res.slots)));\n}\n\nfunction onAdsComplete (flags, event) {\n\tconst detail = event.detail;\n\t/* istanbul ignore else  */\n\tif (detail.type !== 'oop') {\n\t\t/* istanbul ignore else  */\n\n\t\tif(flags && flags.get('brokenAdReporter') && detail.slot && detail.slot.container) {\n\t\t\tif(detail.slot.reporter) {\n\t\t\t\tdetail.slot.reporter.destroy();\n\t\t\t}\n\t\t\tdetail.slot.reporter = new Reporter(detail.slot);\n\t\t}\n\n\t\tif (detail.slot.gpt && detail.slot.gpt.isEmpty === false) {\n\t\t\tutils.log.info('Ad loaded in slot', event);\n\t\t\tif (slotsRendered === 0) {\n\t\t\t\tperfMark('firstAdLoaded');\n\t\t\t\tif (/spoor-id=3/.test(document.cookie)) {\n\t\t\t\t\tcustomTimings.firstAdLoaded = new Date().getTime();\n\t\t\t\t\tconst sendTimings = () => {\n\t\t\t\t\t\tcustomTimings.adIframeLoaded = new Date().getTime();\n\t\t\t\t\t\tperfMark('adIframeLoaded');\n\t\t\t\t\t\tsendMetrics(customTimings, detail.slot);\n\t\t\t\t\t\tdocument.body.removeEventListener('oAds.adIframeLoaded', sendTimings);\n\t\t\t\t\t}\n\t\t\t\t\tdocument.body.addEventListener('oAds.adIframeLoaded', sendTimings);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (detail.slot.gpt && detail.slot.gpt.isEmpty === true) {\n\t\t\tutils.log.warn('Failed to load ad, details below');\n\t\t\tutils.log(event);\n\t\t}\n\t\tslotsRendered++;\n\t}\n\n\t/* istanbul ignore else  */\n\tif (slotsRendered === slotCount) {\n\t\tutils.log('Ads component finished');\n\t}\n}\n\nmodule.exports = {\n\tinit: flags => {\n\t\treturn Promise.resolve()\n\t\t\t.then(() => {\n\t\t\t\tif (flags && flags.get('ads')) {\n\t\t\t\t\tif (/(BlackBerry|BBOS|PlayBook|BB10)/.test(navigator.userAgent)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(flags && flags.get('stickyHeaderAd')) {\n\t\t\t\t\t\t\t\t\t\tlet stickyAd = new Sticky(\n\t\t\t\t\t\t\t\t\t\t\tdocument.querySelector('.above-header-advert'),\n\t\t\t\t\t\t\t\t\t\t\t{ 'sibling' : '.header-ad-placeholder__top',\n\t\t\t\t\t\t\t\t\t\t\t'stickUntil' : '#primary-nav .o-header__top'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tstickyAd.init();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(flags && flags.get('stickyRightAd')) {\n\t\t\t\t\t\t\t\t\t\tlet stickyRight = new Sticky(\n\t\t\t\t\t\t\t\t\t\t\tdocument.querySelector('.sidebar-advert'),\n\t\t\t\t\t\t\t\t\t\t\t{\t'topOffset' : '70px',\n\t\t\t\t\t\t\t\t\t\t\t\t'stickUntil' : 'footer'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tstickyRight.init();\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.resolve()\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t// slotsRendered = 0; // Note - this is a global var for this module\n\t\t\t\t\t\t\t// TODO get appName from appInfo\n\t\t\t\t\t\t\tconst appName = utils.getAppName();\n\t\t\t\t\t\t\tif (flags && flags.get('ads') && appName) {\n\t\t\t\t\t\t\t\tinitOAds(flags);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tif(flags && flags.get('krux')) {\n\t\t\t\t\t\t\t\t//Though krux is activated through nextAdsComponent, we also need to load all the additional user matching scripts\n\t\t\t\t\t\t\t\t//that would have been loaded via their tag manager\n\t\t\t\t\t\t\t\tkrux.init(flags);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t})\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./ads/index.js\n **/","const Superstore = require('superstore');\nconst store = new Superstore('session', 'next-krux');\nconst oAds = require('o-ads');\n\nconst addPixel = (src) => {\n\tconst img = new Image();\n\timg.src = src;\n};\n\n// None of the Krux scripts need to run all the time since they are just matching users between various systems\n// In Supertag they were (mostly) set to cap at 3 times a day. So roughly equating that to 2 times a session.\n\nconst frequencyCap = (name, limit, fn) => {\n\tconst key = `scriptExecCount_${name}`;\n\tstore.get(key).then(val => {\n\t\tval = val || 0;\n\t\tif(parseInt(val) < limit) {\n\t\t\tfn();\n\t\t\tstore.set(key, ++val).catch(() => {});\n\t\t}\n\t}).catch(() => {});\n}\n\nexports.init = (flags) => {\n\n\tdocument.body.addEventListener('oAds.kruxScriptLoaded', () => {\n\t\t//If local/sessionStorage unavailable, don't run any of these scripts.\n\t\tif(typeof window.Krux === 'undefined' || !Superstore.isPersisting()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst kuid = oAds.krux.retrieve('kuid');\n\n\t\tif(kuid && typeof kuid !== 'undefined') {\n\n\t\t\t// Rubicon handles programmatic advertising. This matches up the user ID formats so Krux can send segment populations to them.\n\t\t\tif(flags.get('kruxRubiconIntegration')) {\n\t\t\t\tfrequencyCap('rubicon', 2, () => { addPixel(`https://tap.rubiconproject.com/oz/feeds/krux/tokens?afu=${kuid}`); });\n\t\t\t}\n\n\t\t\t// DoubleClick handles display advertising. This matches up the user ID formats so Krux can send segment populations to them.\n\t\t\tif(flags.get('kruxGoogleIntegration')) {\n\t\t\tfrequencyCap('doubleclick', 2, () => { addPixel('https://apiservices.krxd.net/um?partner=google&r=https://cm.g.doubleclick.net/pixel'); });\n\t\t\t}\n\n\n\t\t\t// The following four scripts are user matching scripts for Kruxdata partners\n\t\t\t// They provide 3rd party data on user Demographic (eg:\tMales),\tIntent\t(eg:\tChildren's\tApparel\tBuyers)\n\t\t\tif(flags.get('kruxAcxiomIntegration')) {\n\t\t\t\tfrequencyCap('acxiom', 2, () => { addPixel(`https://idsync.rlcdn.com/379708.gif?partner=${kuid}`); });\n\t\t\t}\n\n\t\t\tif(flags.get('kruxDataLogixIntegration')) {\n\t\t\t\tfrequencyCap('DataLogix', 1, () => {\n\t\t\t\t\tconst kurlParams = encodeURIComponent(`_kuid=${kuid}&_kdpid=2dd640a6-6ebd-4d4f-af30-af8baa441a0d&dlxid=<na_id>&dlxdata=<na_da>`);\n\t\t\t\t\tconst kurl = `https://beacon.krxd.net/data.gif?${kurlParams}`;\n\t\t\t\t\taddPixel(`https://r.nexac.com/e/getdata.xgi?dt=br&pkey=gpwn29rvapq62&ru=${kurl}`);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(flags.get('kruxIXIIntegration')) {\n\t\t\t\tfrequencyCap('ixidigital', 2, () => { addPixel('https://kr.ixiaa.com/C726AB29-0470-440B-B8D2-D552CED3A3DC/a.gif'); });\n\t\t\t}\n\n\n\t\t\tif(flags.get('kruxExelateIntegration')) {\n\t\t\t\tfrequencyCap('exelate', 2, () => {\n\t\t\t\t\taddPixel(`https://loadm.exelator.com/load?_kdpid=e4942ff0-4070-4896-a7ef-e6a5a30ce9f9&buid=${kuid}&p=204&g=270&j=0`);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//AdAdvisor is another Krux data partner with 3rd party data points\n\t\tif(flags.get('kruxAdAdvisorIntegration')) {\n\t\t\tfrequencyCap('AdAdvisor-S2S', 2, () => { addPixel('https://adadvisor.net/adscores/g.js?sid=9212244187&_kdpid=2111c0af-fc3a-446f-ab07-63aa74fbde8e'); });\n\t\t}\n\n\t});\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./ads/js/krux.js\n **/","module.exports = require(\"./lib/superstore.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** superstore (bower component)\n ** module id = 87\n ** module chunks = 0\n **/","/**\n * Superstore\n *\n * @author Matt Andrews <matthew.andrews@ft.com>\n * @copyright The Financial Times [All Rights Reserved]\n */\nvar sync = require('superstore-sync');\n\nvar keys = {};\nvar store = {};\n\nfunction Superstore(type, namespace) {\n  if(!namespace) {\n    throw \"Namespace required\";\n  }\n  this.store = sync[type];\n  this.namespace = \"_ss.\"+namespace+\".\";\n}\n\nSuperstore.prototype.get = function(key) {\n  return new Promise(function(resolve) {\n\tresolve(this.store.get(this.namespace+key));\n  }.bind(this));\n};\n\nSuperstore.prototype.set = function(key, value) {\n  return new Promise(function(resolve){\n    resolve(this.store.set(this.namespace+key, value));\n  }.bind(this));\n};\n\nSuperstore.prototype.unset = function(key) {\n  return new Promise(function(resolve) {\n    resolve(this.store.unset(this.namespace+key));\n  }.bind(this));\n};\n\n/**\n * #clear(true) and #clear() clear cache and persistent layer, #clear(false) only clears cache\n *\n */\nSuperstore.prototype.clear = function() {\n  return new Promise(function(resolve) {\n    resolve(this.store.clear(this.namespace));\n  }.bind(this));\n};\n\nSuperstore.isPersisting = sync.isPersisting;\n\nmodule.exports = Superstore;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/superstore/lib/superstore.js\n **/","module.exports = require(\"./lib/superstore-sync.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** superstore-sync (bower component)\n ** module id = 89\n ** module chunks = 0\n **/","/**\n * Superstore synchronous library\n *\n * @author Matt Andrews <matthew.andrews@ft.com>\n * @copyright The Financial Times [All Rights Reserved]\n */\n\nvar escapeRegex = function(str){\n  return String(str).replace(/([.*+?=^!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\n\nvar keys = {};\nvar store = {};\nvar persist = true;\n\n// Watch for changes from other tabs\n\n\nfunction Superstore(type) {\n\tthis.storage = window[type];\n  this.keys = {};\n  this.store = {};\n  // TODO: check the storageArea so that we only refresh the key when we need to\n  window.addEventListener(\"storage\", function(e) {\n    if (this.keys[e.key]) {\n      this.keys[e.key] = true;\n      this.store[e.key] = JSON.parse(e.newValue);\n    }\n  }.bind(this));\n}\n\n/**\n * get localstorage value for key falling back to in memory for iOS private browsing bug\n * <http://stackoverflow.com/questions/9077101/iphone-localstorage-quota-exceeded-err-issue>\n * @param {String} key\n * @return {*} data for supplied key\n *\n */\nSuperstore.prototype.get = function(key) {\n  if (arguments.length !== 1) {\n    throw Error(\"get expects 1 argument, \" + arguments.length + \" given; \" + key);\n  }\n  if (!this.keys[key] && persist) {\n    var data;\n    try {\n      data = this.storage[key];\n    } catch(e) {\n      persist = false; // Safari 8 with Cookies set to 'Never' throws on every read\n    }\n\n    // Slightly weird hack because JSON.parse of an undefined value throws\n    // a weird exception \"SyntaxError: Unexpected token u\"\n    if (data) data = JSON.parse(data);\n    this.store[key] = data;\n    this.keys[key] = true;\n  }\n  return this.store[key];\n};\n\n/**\n * set localstorage key,value falling back to in memory for iOS private browsing bug\n * <http://stackoverflow.com/questions/9077101/iphone-localstorage-quota-exceeded-err-issue>\n * @param {String} key\n * @param {*} value which will be passed via JSON.stringify\n * @return {*} value\n *\n */\nSuperstore.prototype.set = function(key, value) {\n  if (arguments.length !== 2) {\n    throw Error(\"set expects 2 arguments, \" + arguments.length + \" given; \" + key);\n  }\n  if (persist) {\n    try {\n      this.storage[key] = JSON.stringify(value);\n    } catch(err) {\n\n      // Known iOS Private Browsing Bug - fall back to non-persistent storage\n      if (err.code === 22) {\n        persist = false;\n      } else {\n        throw err;\n      }\n    }\n  }\n\n  this.store[key] = value;\n  this.keys[key] = true;\n  return value;\n};\n\n\n/**\n * unset value in store for key\n * @param {String} key\n */\nSuperstore.prototype.unset = function(key) {\n  delete this.store[key];\n  delete this.keys[key];\n  this.storage.removeItem(key);\n};\n\n/**\n * clear localstorage\n * @param clearPrefix will clear keys starting with `clearPrefix`\n * #clear(true) and #clear() clear cache and persistent layer, #clear(false) only clears cache\n *\n */\nSuperstore.prototype.clear = function(clearPrefix) {\n  if (!clearPrefix) {\n    if (persist) {\n      this.storage.clear();\n    }\n    this.store = {};\n    this.keys = {};\n    return;\n  }\n\n  clearPrefix = escapeRegex(clearPrefix);\n  var clearKeyRegex = new RegExp(\"^\" + clearPrefix);\n  for (var key in this.keys) {\n    if (key.match(clearKeyRegex)) {\n      this.unset(key);\n    }\n  }\n};\n\nmodule.exports.isPersisting = function() {\n\treturn persist;\n};\n\nmodule.exports.local = new Superstore('localStorage');\nmodule.exports.session = new Superstore('sessionStorage');\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/superstore-sync/lib/superstore-sync.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-ads (bower component)\n ** module id = 91\n ** module chunks = 0\n **/","function Ads() {\n\taddDOMEventListener();\n}\n\n// bung all our modules on the protoype\nAds.prototype.config = require('./src/js/config');\nAds.prototype.slots = require('./src/js/slots');\nAds.prototype.gpt = require('./src/js/ad-servers/gpt');\nAds.prototype.krux = require('./src/js/data-providers/krux');\nAds.prototype.rubicon = require('./src/js/data-providers/rubicon');\nAds.prototype.admantx = require('./src/js/data-providers/admantx');\nAds.prototype.targeting = require('./src/js/targeting');\nAds.prototype.utils = require('./src/js/utils');\n\n/**\n* Initialises the ads library and all sub modules\n* @param config {object} a JSON object containing configuration for the current page\n*/\n\n\nAds.prototype.init = function(options) {\n\tthis.config.init();\n\tthis.config(options);\n\tconst targetingApi = this.config().targetingApi\n\tif(targetingApi) {\n\t\treturn Promise.all([fetchData(targetingApi.user), fetchData(targetingApi.page)])\n\t\t.then(response => {\n\n\t\t\tfor(let i = 0; i < response.length; i++){\n\t\t\t\tlet responseObj = response[i]\n\t\t\t\tlet keys = ['user', 'page'];\n\t\t\t\tlet kruxObj = {}\n\n\t\t\t\tif(responseObj.krux && responseObj.krux.attributes) {\n\t\t\t\t\tkruxObj[keys[i]] = this.utils.buildObjectFromArray(responseObj.krux.attributes)\n\t\t\t\t\tthis.krux.add(kruxObj)\n\t\t\t\t}\n\n\t\t\t\tif(responseObj.dfp && responseObj.dfp.targeting) {\n\t\t\t\t\tthis.targeting.add(this.utils.buildObjectFromArray(responseObj.dfp.targeting));\n\t\t\t\t}\n\n\t\t\t\tif(targetingApi.usePageZone && responseObj.dfp && responseObj.dfp.adUnit) {\n\t\t\t\t\tconst gpt = this.config('gpt');\n\t\t\t\t\t/* istanbul ignore else  */\n\t\t\t\t\tif(gpt && gpt.zone) {\n\t\t\t\t\t\tgpt.zone = responseObj.dfp.adUnit.join('/');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.initLibrary();\n\t\t})\n\t\t.catch(this.initLibrary);\n\t} else {\n\t\treturn Promise.resolve(this.initLibrary());\n\t}\n};\n\nconst fetchData = function(target) {\n  if(!target) { return Promise.resolve({}) };\n  return fetch(target, {\n    timeout: 2000,\n\t\t// temporary solution for [next.]ft.com > IE9\n\t\tuseCorsProxy: true\n  })\n  .then(res => {return res.json()})\n  .catch(() => {});\n};\n\nAds.prototype.initLibrary = function() {\n\tthis.slots.init();\n\tthis.gpt.init();\n\tthis.krux.init();\n\tthis.rubicon.init();\n\tthis.admantx.init();\n\tthis.utils.on('debug', this.debug.bind(this));\n\tthis.isInitialised = true;\n\tthis.utils.broadcast('initialised', this);\n\tremoveDOMEventListener();\n\treturn this;\n};\n\nconst initAll = function() {\n\tconst metas = Array.from(document.getElementsByTagName('meta'));\n\tconst stop = metas.filter(function(meta) {\n\t\treturn meta.name === 'o-ads-stop';\n\t});\n\t/* istanbul ignore else  */\n\tif (!stop.length) {\n\n\t\tads.init().then(() => {\n\t\t\tconst slots = Array.from(document.querySelectorAll('.o-ads, [data-o-ads-name]'));\n\t\t\tslots.forEach(ads.slots.initSlot.bind(ads.slots));\n\t\t})\n\n\t}\n};\n\nAds.prototype.debug = function (){\n\tlet remove = true;\n\tif (localStorage.getItem('oAds')) {\n\t\tremove = false;\n\t} else {\n\t\tlocalStorage.setItem('oAds', true);\n\t}\n\tthis.admantx.debug();\n\tthis.gpt.debug();\n\tthis.krux.debug();\n\tthis.slots.debug();\n\tthis.targeting.debug();\n\n\tif (remove) {\n\t\tlocalStorage.removeItem('oAds');\n\t}\n};\n\nfunction addDOMEventListener() {\n\tdocument.addEventListener('o.DOMContentLoaded', initAll);\n}\nfunction removeDOMEventListener() {\n\tdocument.removeEventListener('o.DOMContentLoaded', initAll);\n}\n\nconst ads = new Ads();\nmodule.exports = ads;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/main.js\n **/","//TODO remove all ft.com specific stuff so we can remove this as a global\n// currently all FT specific stuff is wrapped in an if window.FT\n\n/**\n * @fileOverview\n * Third party library for use with google publisher tags.\n *\n * @author Robin Marr, robin.marr@ft.com\n */\n\n/**\n * The FT.ads.config object holds the confiuration properties for an FT.ads.gpt instance.\n * There are four tiers of configuration; cookie level config, default config (set within the constructor), metatag config and global (env) config.\n * Global config, (set in the page FT.env ojbect) takes priority over meta followed by default config with cookie config having the least priority.\n * The FT.ads.config() function acts as an accessor method for the config; allowing getting and setting of configuration values.\n * Calling config() with no parameters returns the entire configuration object.\n * Calling config passing a valid property key will envoke the 'getter' and return the value for that property key.\n * Calling config passing a valid property key and a value will envoke the setter and set the value of the key to the new value.\n * Calling config passing an object of keys and values will envoke a setter that extends the store with the object provided.\n * @name config\n * @memberof FT.ads\n * @function\n*/\nconst utils = require('./utils');\n/**\n* Default configuration set in the constructor.\n*/\nconst defaults = {\n\tformats: {\n\t\tMediumRectangle:  {sizes: [300, 250]},\n\t\tRectangle:  {sizes: [180, 50]},\n\t\tWideSkyscraper:  {sizes: [160, 600]},\n\t\tLeaderboard:  {sizes: [728, 90]},\n\t\tSuperLeaderboard: {sizes: [[970, 90], [970, 66]]},\n\t\tHalfPage: {sizes: [300, 600]},\n\t\tBillboard:  {sizes: [970, 250]},\n\t\tPortrait:  {sizes: [300, 1050]},\n\t\tAdhesionBanner: {sizes: [320, 50]},\n\t\tMicroBar: {sizes: [88, 31]},\n\t\tButton2: {sizes: [120, 60]},\n\t\tResponsive: { sizes: [2,2] }\n\t},\n\tresponsive: {\n\t\textra: [1025, 0], //Reasonable width to show a Billboard (desktop)\n\t\tlarge: [1000, 0], //reasonable width to show SuperLeaderboard (tablet landscape)\n\t\tmedium: [760, 0], //reasonable width to show a leaderboard (tablet portrait)\n\t\tsmall: [0, 0] //Mobile\n\t},\n\tflags: {\n\t\trefresh: true,\n\t\tinview: true\n\t}\n};\n\n/**\n* @private\n* @function\n* fetchMetaConfig pulls out metatag key value pairs into an object returns the object\n*/\nfunction fetchMetaConfig() {\n\tlet results = {};\n\tconst metas = Array.from(document.getElementsByTagName('meta'));\n\tmetas.forEach(meta => {\n\t\tif (meta.name) {\n\t\t\tif (meta.getAttribute('data-contenttype') === 'json') {\n\t\t\t\tresults[meta.name] = (window.JSON) ? JSON.parse(meta.content) : 'UNSUPPORTED';\n\t\t\t} else {\n\t\t\t\tresults[meta.name] = meta.content;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn results;\n}\n\nfunction fetchDeclaritiveConfig() {\n\tlet results = {};\n\tconst scripts = Array.from(document.querySelectorAll('script[data-o-ads-config]'));\n\tscripts.forEach(script => {\n\t\tresults = (window.JSON) ? utils.extend(results, JSON.parse(script.innerHTML)) : 'UNSUPPORTED';\n\t});\n\n\treturn results;\n}\n\n/**\n* @private\n* @function\n* fetchCanonicalURL Grabs the canonical URL from the page meta if it exists.\n*/\nfunction fetchCanonicalURL() {\n\tlet canonical;\n\tconst canonicalTag = document.querySelector('link[rel=\"canonical\"]');\n\tif (canonicalTag) {\n\t\tcanonical = canonicalTag.href;\n\t}\n\n\treturn { canonical: canonical };\n}\n\n/**\n* Defines a store for configuration information and returns a getter/setter method for access.\n* @class\n* @constructor\n*/\nfunction Config() {\n\tthis.store = {};\n}\n\nConfig.prototype.access = function(k, v) {\n\tlet result;\n\tif (utils.isPlainObject(k)) {\n\t\tutils.extend(true, this.store, k);\n\t\tresult = this.store;\n\t} else if (typeof v === 'undefined') {\n\t\tif (typeof k === 'undefined') {\n\t\t\tresult = this.store;\n\t\t} else {\n\t\t\tresult = this.store[k];\n\t\t}\n\t} else {\n\t\tthis.store[k] = v;\n\t\tresult = v;\n\t}\n\n\treturn result;\n};\n\n\nConfig.prototype.clear = function(key) {\n\tif (key) {\n\t\tdelete this.store[key];\n\t} else {\n\t\tthis.store = {};\n\t}\n};\n\nConfig.prototype.init = function() {\n\tthis.store = utils.extend(true, {}, defaults, fetchMetaConfig(), fetchCanonicalURL(), fetchDeclaritiveConfig());\n\treturn this.store;\n};\n\nconst config = new Config();\nmodule.exports = config.access.bind(config);\nmodule.exports.init = config.init.bind(config);\nmodule.exports.clear = config.clear.bind(config);\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/config.js\n **/","/**\n * Utility methods for the advertising library.\n * @author Origami Advertising, origami.advertising@ft.com\n * @module utils\n */\nconst hop = Object.prototype.hasOwnProperty;\n\nconst utils = module.exports;\n/**\n * Uses object prototype toString method to get at the type of object we are dealing,\n * IE returns [object Object] for null and undefined so we need to filter those\n * http://es5.github.com/#x15.2.4.2\n * @private\n * @param {object} Any javascript object\n * @returns The type of the object e.g Array, String, Object\n */\nfunction is(object) {\n\tconst type = Object.prototype.toString.call(object)\n\t.match(/^\\[object\\s(.*)\\]$/)[1];\n\n\tif (object === null) {\n\t\treturn \"Null\";\n\t} else if (object === undefined) {\n\t\treturn \"Undefined\";\n\t} else {\n\t\treturn type;\n\t}\n}\n\n/**\n * Creates a method for testing the type of an Object\n * @private\n * @param {string} The name of the object type to be tested e.g. Array\n * @returns a method that takes any javascript object and tests if it is of\n * the supplied className\n */\nfunction createIsTest(className) {\n\treturn function(obj) {\n\t\treturn is(obj) === className;\n\t};\n}\n\n/**\n * Curries some useful is{ClassName} methods into the supplied Object\n * @private\n * @param {object} The object to add the methods too\n * @param {array} A list of types to create methods for defaults to \"Array\", \"Object\", \"String\", \"Function\"\n * @returns The object supplied in the first param with is{ClassName} Methods Added\n */\nfunction curryIsMethods(obj, classNames) {\n\tclassNames = classNames || [\n\t'Array',\n\t'Object',\n\t'String',\n\t'Function',\n\t'Storage'\n\t];\n\n\twhile (!!classNames.length) {\n\t\tconst className = classNames.pop();\n\t\tobj[`is${className}`] = createIsTest(className);\n\t}\n\n\treturn obj;\n}\n\n/**\n * Test if an object is the global window object\n * @param {object} obj The object to be tested\n * @returns {boolean} true if the object is the window obj, otherwise false\n */\nmodule.exports.isWindow = function(obj) {\n\treturn obj && obj !== null && obj === window;\n};\n\n/**\n * Test if an object inherits from any other objects, used in extend\n * to protect against deep copies running out of memory and constructors\n * losing there prototypes when cloned\n * @param {object} obj The object to be tested\n * @returns {boolean} true if the object is plain false otherwise\n */\nmodule.exports.isPlainObject = function(obj) {\n\tconst hop = Object.prototype.hasOwnProperty;\n\n\t// Must be an Object.\n\t// Because of IE, we also have to check the presence of the constructor property.\n\t// Make sure that DOM nodes and window objects don't pass through, as well\n\tif (!obj || !utils.isObject(obj) || obj.nodeType || utils.isWindow(obj)) {\n\t\treturn false;\n\t}\n\n\ttry {\n\t\t// Not own constructor property must be Object\n\t\tif (obj.constructor && !hop.call(obj, 'constructor') && !hop.call(obj.constructor.prototype, 'isPrototypeOf')) {\n\t\t\treturn false;\n\t\t}\n\t} catch (e) {\n\t\t/* istanbul ignore next  */\n\t\t// IE8,9 Will throw exceptions on certain host objects\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tlet key;\n\tfor (key in obj) {}\n\n\treturn key === undefined || hop.call(obj, key);\n};\n\n/**\n * Test if an object is a string with a length\n * @param {object} str The object to be tested\n * @returns {boolean} true if the object is a string with a length greater than 0\n */\nmodule.exports.isNonEmptyString = function(str) {\n\treturn utils.isString(str) && !!str.length;\n};\n\nmodule.exports.isElement = function(element) {\n\treturn element && element.nodeType === 1 && element.tagName || false;\n};\n\n/**\n * Test if an object is a finite number\n * @param {object} The object to be tested\n * @returns {boolean} true if the object is a finite number, can be a float or int but not NaN or Infinity\n */\nmodule.exports.isNumeric = function(num) {\n\treturn !isNaN(parseFloat(num)) && isFinite(num);\n};\n\n/**\n * Merge or clone objects\n * @function\n * @param {boolean/object} deep/target If boolean specifies if this should be a deep copy or not, otherwise is the target object for the copy\n * @param {object} target If deep copy is true will be the target object of the copy\n * @param {object} objects All other params are objects to be merged into the target\n * @returns {object} The target object extended with the other params\n */\nmodule.exports.extend = extend;\n\nfunction extend() {\n\t/* jshint forin: false */\n\t/* when doing a deep copy we want to copy prototype properties */\n\tlet options;\n\tlet src;\n\tlet copy;\n\tlet copyIsArray;\n\tlet clone;\n\tlet target = arguments[0] || {};\n\tlet length = arguments.length;\n\tlet deep = false;\n\tlet i = 1;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\t/* istanbul ignore else  */\n\tif (typeof target !== \"object\" && !utils.isFunction(target)) {\n\t\ttarget = {};\n\t}\n\n\t// do nothing if only one argument is passed (or 2 for a deep copy)\n\t/* istanbul ignore else  */\n\tif (length === i) {\n\t\treturn target;\n\t}\n\n\tfor (; i < length; i++) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) !== null) {\n\t\t\t// Extend the base object\n\t\t\tfor (let name in options) {\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif(!options.hasOwnProperty(name)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging arrays\n\t\t\t\tif (deep && copy && (utils.isPlainObject(copy) || utils.isArray(copy))) {\n\t\t\t\t\tcopyIsArray = utils.isArray(copy);\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && utils.isArray(src) ? src : [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && utils.isObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n}\n\n/**\n * Create an object hash from a delimited string\n * Beware all properties on the resulting object will have string values.\n * @param {string}        str       The string to transform\n * @param {string|regexp} delimiter The character that delimits each name/value pair\n * @param {string}        pairing   The character that separates the name from the value\n * @return {object}\n *\n */\nmodule.exports.hash = function(str, delimiter, pairing) {\n\tlet pair;\n\tlet value;\n\tconst hash = {};\n\tif (str && str.split) {\n\t\tstr = str.split(delimiter);\n\n\t\tfor (let idx = 0, l = str.length; idx < l; idx += 1) {\n\t\t\tvalue = str[idx];\n\t\t\tpair = value.split(pairing);\n\t\t\tif (pair.length > 1) {\n\t\t\t\thash[pair[0].trim()] = pair.slice(1).join(pairing);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn hash;\n};\n\n/**\n* Takes a script URL as a string value, creates a new script element, sets the src and attaches to the page\n* The async value of the script can be set by the seccond parameter, which is a boolean\n* Note, we should use protocol-relative URL paths to ensure we don't run into http/https issues\n* @param {string} scriptUrl The url to the script file to be added\n* @param {boolean} async Set the async attribute on the script tag\n* @param {function} callback A function to run when the script loads\n* @param {function} errorcb A function to run if the script fails to load\n* @returns {HTMLElement} the created script tag\n*/\nmodule.exports.attach = function(scriptUrl, async, callback, errorcb, autoRemove) {\n\tconst tag = document.createElement('script');\n\tconst node = document.getElementsByTagName('script')[0];\n\tlet hasRun = false;\n\n\tfunction processCallback(callback) {\n\t\t/* istanbul ignore else  */\n\t\tif (!hasRun) {\n\t\t\tcallback.call();\n\t\t\thasRun = true;\n\t\t\t/* istanbul ignore else  */\n\t\t\tif(autoRemove) {\n\t\t\t\ttag.parentElement.removeChild(tag);\n\t\t\t}\n\t\t}\n\t}\n\n\ttag.setAttribute('src', scriptUrl);\n\ttag.setAttribute('o-ads', '');\n\t/* istanbul ignore else */\n\tif (async) {\n\t\ttag.async = 'true';\n\t}\n\t/* istanbul ignore else  */\n\tif (utils.isFunction(callback)) {\n\t\t/* istanbul ignore if - legacy IE code, won't test */\n\t\tif (hop.call(tag, 'onreadystatechange')) {\n\t\t\ttag.onreadystatechange = function() {\n\t\t\t\tif (tag.readyState === \"loaded\") {\n\t\t\t\t\tprocessCallback(callback);\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\ttag.onload = function() {\n\t\t\t\tprocessCallback(callback);\n\t\t\t};\n\t\t}\n\t}\n\n\t/* istanbul ignore else  */\n\tif (utils.isFunction(errorcb)) {\n\t\ttag.onerror = function() {\n\t\t\tprocessCallback(errorcb);\n\t\t};\n\t}\n\t// Use insert before, append child has issues with script tags in some browsers.\n\tnode.parentNode.insertBefore(tag, node);\n\treturn tag;\n};\n\n/*\n* Test to see if a script file is already referenced from the dom\n* @param {string} url The URL to look for\n* @return {boolean} true if the file is already referenced else false\n*/\nmodule.exports.isScriptAlreadyLoaded = function(url) {\n\tconst scripts = document.getElementsByTagName('script');\n\tfor (let i = scripts.length; i--;) {\n\t\tif (scripts[i].src === url) return true;\n\t}\n\n\treturn false;\n};\n\n/*\n* Make a cross domain XHR request\n* @param {string} The url to request\n* @param {string} THe method of the request (GET, POST).\n* @param {function} callback A function to run when the request succeeds\n* @param {function} A function to run if the request fails\n* @returns {HTMLElement} the created XHR object\n*/\nmodule.exports.createCORSRequest = function(url, method, callback, errorcb, timeout) {\n\tlet xhr = new XMLHttpRequest();\n\t/* istanbul ignore else - legacy IE code, won't test */\n\tif ('withCredentials' in xhr) {\n\t\txhr.open(method, url, true);\n\t\txhr.responseType = 'json';\n\t} else if (typeof XDomainRequest !== \"undefined\") {\n\t\txhr = new XDomainRequest();\n\t\txhr.open(method, url, true);\n\t} else {\n\t\txhr = null;\n\t\terrorcb();\n\t}\n\n\t/* istanbul ignore else */\n\tif (typeof timeout === \"number\") {\n\t\t\txhr.timeout = timeout;\n\t}\n\n\txhr.onload = function(xhrEvent) {\n\t\tcallback.call(this, this.response || this.responseText, xhrEvent);\n\t};\n\n\tif (utils.isFunction(errorcb)) {\n\t\txhr.onerror = errorcb;\n\t\txhr.ontimeout = errorcb;\n\t}\n\n\txhr.send();\n\treturn xhr;\n};\n\n/**\n* return the current documents referrer or an empty string if non exists\n* This method enables us to mock the referrer in our tests reliably and doesn't really serve any other purpose\n* @returns {string} document.referrer\n*/\n/* istanbul ignore next - cannot reliably test value of referer */\nmodule.exports.getReferrer = function() {\n\treturn document.referrer || '';\n};\n\n/**\n* Capitalise a string\n* @param {string} string the string to capitalise\n* @returns {string}\n*/\nmodule.exports.capitalise = function(string) {\n\treturn string.replace(/(^[a-z])/, function(match, letter) {\n\t\treturn letter.toUpperCase();\n\t});\n};\n\n/**\n* Remove hyphens from a string and upper case the following letter\n* @param {string} string the string to parse\n* @returns {string}\n*/\nmodule.exports.dehyphenise = function(string) {\n\treturn string.replace(/(-)([a-z])/g, function(match, hyphen, letter) {\n\t\treturn letter.toUpperCase();\n\t});\n};\n\n/**\n* Find uppercase characters in a string, lower case them and add a preceding hyphen\n* @param {string} string the string to parse\n* @returns {string}\n*/\nmodule.exports.hyphenise = function(string) {\n\treturn string.replace(/([A-Z])/g, function(match, letter) {\n\t\treturn `-${letter.toLowerCase()}`;\n\t});\n};\n\n/**\n* remove prefixes from o-ads data attributes and dehyphenise the name\n* @param {string|} name the name of the attribute to parse\n* @returns {string}\n*/\nmodule.exports.parseAttributeName = function(attribute) {\n\tconst name = utils.isString(attribute) ? attribute : attribute.name;\n\treturn utils.dehyphenise(name.replace(/(data-)?o-ads-/, ''));\n};\n\n/**\n* return the current documents url or an empty string if non exists\n* This method enables us to mock the document location string in our tests reliably and doesn't really serve any other purpose\n* @returns {string}\n*/\n/* istanbul ignore next - cannot reliably test value of location */\nmodule.exports.getLocation = function() {\n\treturn document.location.href || '';\n};\n\n/**\n* return the current documents search or an empty string if non exists\n* also strips the initial ? from the search string for easier parsing\n* This method enables us to mock the search string in our tests reliably and doesn't really serve any other purpose\n* @returns {string}\n*/\nmodule.exports.getQueryString = function() {\n\treturn document.location.search.substring(1) || '';\n};\n\n/**\n* returns a timestamp of the current date/time in the format YYYYMMDDHHMMSS\n* @returns {string}\n*/\nmodule.exports.getTimestamp = function() {\n\tconst now = new Date();\n\treturn [\n\tnow.getFullYear(),\n\t(`0${(now.getMonth() + 1)}`).slice(-2),\n\t(`0${now.getDate()}`).slice(-2),\n\t(`0${now.getHours()}`).slice(-2),\n\t(`0${now.getMinutes()}`).slice(-2),\n\t(`0${now.getSeconds()}`).slice(-2)\n\t].join(\"\");\n};\n\n// capture all iframes in the page in a live node list\nconst iframes = document.getElementsByTagName('iframe');\n\n/**\n* Given the window object of an iframe this method returns the o-ads slot name\n* that rendered the iframe, if the iframe was not rendered by o-ads this will\n* return false\n* @param {window}  a window object\n* @returns {String|Boolean}\n*/\nmodule.exports.iframeToSlotName = function(iframeWindow) {\n\tlet slotName;\n\tlet node;\n\tlet i = iframes.length;\n\n\t// Figure out which iframe DOM node we have the window for\n\twhile (i--) {\n\t\t/* istanbul ignore else  */\n\t\tif (iframes[i].contentWindow === iframeWindow) {\n\t\t\tnode = iframes[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\t/* istanbul ignore else  */\n\tif (node) {\n\t\t// find the closest parent with a data-o-ads-name attribute, that's our slot name\n\t\twhile (node.parentNode) {\n\t\t\tslotName = node.getAttribute('data-o-ads-name');\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (slotName) {\n\t\t\t\treturn slotName;\n\t\t\t}\n\n\t\t\tnode = node.parentNode;\n\t\t}\n\t}\n\n\treturn false;\n};\n\nmodule.exports.buildObjectFromArray = function buildObjectFromArray(targetObject) {\n\treturn targetObject.reduce((prev, data) => {\n\t\tprev[data.key] = data.value;\n\t\treturn prev;\n\t}, {});\n}\n\nextend(module.exports, require('./cookie.js'));\nextend(module.exports, require('./events.js'));\nextend(module.exports, require('./messenger.js'));\nmodule.exports.responsive = require('./responsive.js');\nmodule.exports.timers = require('./timers.js')();\nmodule.exports.queue = require('./queue.js');\nmodule.exports.log = require('./log');\ncurryIsMethods(module.exports);\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/utils/index.js\n **/","/**\n * Utility methods for reading.writing cookie. Inspired by the jQuery Cookie plugin (https://github.com/carhartl/jquery-cookie).\n * @author Origami Advertising, origami.advertising@ft.com\n * @module utils/cookie\n * @see utils\n */\n\nconst utils = require('./index.js');\nconst pluses = /\\+/g;\nconst today = new Date();\n\nfunction raw(s) {\n\treturn s;\n}\n\nfunction decoded(s) {\n\treturn decodeURIComponent(s.replace(pluses, ' '));\n}\n\n/*\n*\tRead or write a cookie\n* @exports utils/cookie\n* @param {string} key the name of the cookie to be read/written\n* @param {string} value The value to set to the written cookie (if param is missing the cookie will be read)\n* @param {object} options Expires,\n*/\nconst config = module.exports.cookie = function(key, value, options) {\n\t// write\n\tif (value !== undefined) {\n\t\toptions = utils.extend({}, config.defaults, options);\n\n\t\tif (value === null) {\n\t\t\toptions.expires = -1;\n\t\t}\n\n\t\tif (typeof options.expires === 'number') {\n\t\t\tconst days = options.expires;\n\t\t\tconst t = options.expires = new Date();\n\t\t\tt.setDate(t.getDate() + days);\n\t\t}\n\n\t\tvalue = config.json ? JSON.stringify(value) : String(value);\n\t\tvalue = config.raw ? value : encodeURIComponent(value);\n\t\tif (!!options.expires && (options.expires.valueOf() - today.valueOf()) < 0) {\n\t\t\tdelete utils.cookies[encodeURIComponent(key)];\n\t\t} else {\n\t\t\tutils.cookies[encodeURIComponent(key)] = value;\n\t\t}\n\n\t\treturn (document.cookie = [\n\t\tencodeURIComponent(key), '=', value,\n\t\toptions.expires ? `; expires=${options.expires.toUTCString()}` : '', // use expires attribute, max-age is not supported by IE\n\t\toptions.path ? `; path=${options.path}` : '',\n\t\toptions.domain ? `; domain=${options.domain}` : '',\n\t\toptions.secure ? `; secure` : ''\n\t\t].join(''));\n\t}\n\n\t// read\n\tconst decode = config.raw ? raw : decoded;\n\tconst cookie = utils.cookies[encodeURIComponent(key)];\n\tif (!!cookie || cookie === '') {\n\t\treturn config.json ? JSON.parse(decode(cookie)) : decode(cookie);\n\t}\n\n\treturn null;\n};\n\nconfig.defaults = {};\n\n/*\n* Delete a cookie\n* @exports utils/cookie/removeCookie\n* @param {string} name The cookie's name\n* @param {object} options see options above\n*/\nmodule.exports.removeCookie = function(key, options) {\n\tif (module.exports.cookie(key) !== null) {\n\t\tmodule.exports.cookie(key, null, options);\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n/*\n* Get the regex required to parse values from a cookie\n* @private\n* @param {string} name The cookie's name\n* @param {string} param The parameter's name\n* @return {string|undefined}\n*/\nfunction getRegExp(name, param) {\n\tlet re;\n\n\tconst formats = {\n\t\t\"AYSC\": \"underscore\",\n\t\t\"FT_U\": \"underscoreEquals\",\n\t\t\"FT_Remember\": \"colonEquals\",\n\t\t\"FT_User\": \"colonEquals\",\n\t\t\"FTQA\": \"commaEquals\"\n\t};\n\n\tswitch (formats[name]) {\n\tcase \"underscore\":\n\t\tre = `_${param}([^_]*)_`;\n\t\tbreak;\n\tcase \"underscoreEquals\":\n\t\tre = `_${param}=([^_]*)_`;\n\t\tbreak;\n\tcase \"colonEquals\":\n\t\tre = `:${param}=([^:]*)`;\n\t\tbreak;\n\tcase \"commaEquals\":\n\t\tre = `${param}=([^,]*)`;\n\t\tbreak;\n\tdefault:\n\t\tre = /((.|\\n)*)/; // match everything\n\t\tbreak;\n\t}\n\treturn new RegExp(re);\n}\n\n/*\n* Get a parameter from a named cookie\n* @exports utils/cookie/getCookieParam\n* @param {string} name The cookie's name\n* @param {string} param The parameter's name\n* @return {string|undefined}\n*/\nmodule.exports.getCookieParam = function(name, param) {\n\tlet matches;\n\n\tconst wholeValue = module.exports.cookie(name) || \"\";\n\t/* istanbul ignore else  */\n\tif (param) {\n\t\tmatches = wholeValue.match(getRegExp(name, param));\n\t}\n\n\treturn (matches && matches.length) ? matches[1] : undefined;\n};\n\n/*\n* Parse document.cookie into an object for easier reading\n* @name cookies\n* @member cookie\n*/\nmodule.exports.cookies = utils.hash(document.cookie, ';', '=');\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/utils/cookie.js\n **/","/**\n * Utility methods for o-ads events. Methods defined here are added to the utils object not the utils.event object.\n * @author Origami Advertising, origami.advertising@ft.com\n * @module utils/events\n * @see utils\n */\n\n/**\n* Broadscasts an o-ads event\n* @param {string} name The name of the cookie to be read/written\n* @param {object} data The value to set to the written cookie (if param is missing the cookie will be read)\n* @param {HTMLElement} target The element to attach the event listener to\n*/\nmodule.exports.broadcast = broadcast;\nfunction broadcast(name, data, target) {\n\t/* istanbul ignore next: ignore the final fallback as hard trigger */\n\ttarget = target || document.body || document.documentElement;\n\tname = `oAds.${name}`;\n\tconst opts = {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tdetail: data\n\t};\n\ttarget.dispatchEvent(new CustomEvent(name, opts));\n}\n\n/**\n* Sets an event listener for an oAds event\n* @param {string} name The name of the cookie to be read/written\n* @param {function} callback The value to set to the written cookie (if param is missing the cookie will be read)\n* @param {HTMLElement} target The element to attach the event listener to\n*/\n\nmodule.exports.on = on;\nfunction on(name, callback, target) {\n\tname = `oAds.${name}`;\n\t/* istanbul ignore next: ignore the final fallback as hard trigger */\n\ttarget = target || document.body || document.documentElement;\n\ttarget.addEventListener(name, callback);\n}\n\n/**\n* Sets a one time event listener for an oAds event\n* @param {string} name The name of the cookie to be read/written\n* @param {function} callback The value to set to the written cookie (if param is missing the cookie will be read)\n* @param {HTMLElement} target The element to attach the event listener to\n*/\nmodule.exports.once = once;\nfunction once(name, callback, target) {\n\tconst handler = function(event) {\n\t\t/* istanbul ignore next: ignore the final fallback as hard trigger */\n\t\tconst targ = event.target || event.srcElement;\n\t\ttarg.removeEventListener(name = `oAds.${name}`, callback);\n\t\tif (callback) {\n\t\t\tcallback(event);\n\n\t\t\t// we set callback to null so if for some reason the listener isn't removed the callback will still only be called once\n\t\t\tcallback = null;\n\t\t}\n\t};\n\ton(name, handler, target);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/utils/events.js\n **/","/**\n * Utility methods for postMessage api.\n * @author Origami Advertising, origami.advertising@ft.com\n * @module utils\n */\n\nmodule.exports.messenger = {\n\tpost: function(message, source) {\n\t\tmessage = (typeof message === 'string') ? message : JSON.stringify(message);\n\t\tsource = arguments[1] || window.top;\n\t\tsource.postMessage(message, '*');\n\t},\n\tparse: function(message) {\n\n\t\t// Check whether the message looks like an object before trying to parse it\n\t\tif (typeof message !== 'string' || message[0] !== '{') {\n\t\t\treturn message;\n\t\t}\n\n\t\t// try returning the parsed object\n\t\ttry {\n\t\t\treturn JSON.parse(message);\n\t\t}\n\t\t// return the original message\n\t\tcatch(e){\n\t\t\treturn message;\n\t\t}\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/utils/messenger.js\n **/","let callback;\nlet breakpoints;\nlet current;\nconst utils = require('./index.js');\nconst oViewport = require('o-viewport');\n\nfunction getNearestBreakpoint() {\n\tlet winner;\n\tconst dims = oViewport.getSize(true);\n\tfunction findCurrentBreakpoint(breakpoint) {\n\t\tconst breakpointDims = breakpoints[breakpoint];\n\t\tif (dims.width >= breakpointDims[0] && dims.height >= breakpointDims[1]) {\n\t\t\tif (!winner || breakpointDims[0] >= breakpoints[winner][0]) {\n\t\t\t\twinner = breakpoint;\n\t\t\t}\n\t\t}\n\t}\n\n\tObject.keys(breakpoints).forEach(findCurrentBreakpoint);\n\n\treturn winner;\n}\n\nfunction fire() {\n\tconst winner = getNearestBreakpoint();\n\n\tif (current !== winner) {\n\t\tsetCurrent(winner);\n\t\tcallback(winner);\n\t}\n}\n\nfunction setCurrent(name) {\n\tcurrent = name;\n}\n\nfunction getCurrent() {\n\treturn current;\n}\n\nfunction init(brps, cb) {\n\n\tif (!utils.isFunction(cb)) {\n\t\t// must have a call back function\n\t\treturn false;\n\t}\n\n\tbreakpoints = brps;\n\tcallback = cb;\n\n\tsetCurrent(getNearestBreakpoint());\n\tdocument.body.addEventListener('oViewport.orientation', fire);\n\tdocument.body.addEventListener('oViewport.resize', fire);\n\toViewport.listenTo('orientation');\n\toViewport.listenTo('resize');\n\n\treturn getCurrent();\n}\n\nmodule.exports = init;\nmodule.exports.getCurrent = getCurrent;\nmodule.exports.setThrottleInterval = oViewport.setThrottleInterval;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/utils/responsive.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-viewport (bower component)\n ** module id = 99\n ** module chunks = 0\n **/","// let debug;\nconst utils = require('./src/utils');\nconst throttle = utils.throttle;\nconst debounce = utils.debounce;\n\nconst listeners = {};\nconst intervals = {\n\tresize: 100,\n\torientation: 100,\n\tvisibility: 100,\n\tscroll: 100\n};\n\nfunction setThrottleInterval(eventType, interval) {\n\tif (typeof arguments[0] === 'number') {\n\t\tsetThrottleInterval('scroll', arguments[0]);\n\t\tsetThrottleInterval('resize', arguments[1]);\n\t\tsetThrottleInterval('orientation', arguments[2]);\n\t\tsetThrottleInterval('visibility', arguments[3]);\n\t} else if (interval) {\n\t\tintervals[eventType] = interval;\n\t}\n}\n\nfunction listenToResize() {\n\tif (listeners.resize) {\n\t\treturn;\n\t}\n\tconst eventType = 'resize';\n\tconst handler = debounce(function(ev) {\n\t\tutils.broadcast('resize', {\n\t\t\tviewport: utils.getSize(),\n\t\t\toriginalEvent: ev\n\t\t});\n\t}, intervals.resize);\n\n\n\twindow.addEventListener(eventType, handler);\n\tlisteners.resize = {\n\t\teventType: eventType,\n\t\thandler: handler\n\t};\n}\n\nfunction listenToOrientation() {\n\n\tif (listeners.orientation) {\n\t\treturn;\n\t}\n\n\tconst eventType = 'orientationchange';\n\tconst handler = debounce(function(ev) {\n\t\tutils.broadcast('orientation', {\n\t\t\tviewport: utils.getSize(),\n\t\t\torientation: utils.getOrientation(),\n\t\t\toriginalEvent: ev\n\t\t});\n\t}, intervals.orientation);\n\n\twindow.addEventListener(eventType, handler);\n\tlisteners.orientation = {\n\t\teventType: eventType,\n\t\thandler: handler\n\t};\n}\n\nfunction listenToVisibility() {\n\n\tif (listeners.visibility) {\n\t\treturn;\n\t}\n\n\tconst eventType = utils.detectVisiblityAPI().eventType;\n\tconst handler = debounce(function(ev) {\n\t\tutils.broadcast('visibility', {\n\t\t\thidden: utils.getVisibility(),\n\t\t\toriginalEvent: ev\n\t\t});\n\t}, intervals.visibility);\n\n\twindow.addEventListener(eventType, handler);\n\n\tlisteners.visibility = {\n\t\teventType: eventType,\n\t\thandler: handler\n\t};\n}\n\nfunction listenToScroll() {\n\n\tif (listeners.scroll) {\n\t\treturn;\n\t}\n\n\tconst eventType = 'scroll';\n\tconst handler = throttle(function(ev) {\n\t\tconst scrollPos = utils.getScrollPosition();\n\t\tutils.broadcast('scroll', {\n\t\t\tviewport: utils.getSize(),\n\t\t\tscrollHeight: scrollPos.height,\n\t\t\tscrollLeft: scrollPos.left,\n\t\t\tscrollTop: scrollPos.top,\n\t\t\tscrollWidth: scrollPos.width,\n\t\t\toriginalEvent: ev\n\t\t});\n\t}, intervals.scroll);\n\n\twindow.addEventListener(eventType, handler);\n\tlisteners.scroll = {\n\t\teventType: eventType,\n\t\thandler: handler\n\t};\n}\n\nfunction listenTo(eventType) {\n\tif (eventType === 'resize' || eventType === 'all') {\n\t\tlistenToResize();\n\t}\n\n\tif (eventType === 'scroll' || eventType === 'all') {\n\t\tlistenToScroll();\n\t}\n\n\tif (eventType === 'orientation' || eventType === 'all') {\n\t\tlistenToOrientation();\n\t}\n\n\tif (eventType === 'visibility' || eventType === 'all') {\n\t\tlistenToVisibility();\n\t}\n}\n\nfunction stopListeningTo(eventType) {\n\tif (eventType === 'all') {\n\t\tObject.keys(listeners).forEach(stopListeningTo);\n\t} else if (listeners[eventType]) {\n\t\twindow.removeEventListener(listeners[eventType].eventType, listeners[eventType].handler);\n\t\tdelete listeners[eventType];\n\t}\n}\n\nmodule.exports = {\n\tdebug: function() {\n\t\t// debug = true;\n\t\tutils.debug();\n\t},\n\tlistenTo: listenTo,\n\tstopListeningTo: stopListeningTo,\n\tsetThrottleInterval: setThrottleInterval,\n\tgetOrientation: utils.getOrientation,\n\tgetSize: utils.getSize,\n\tgetScrollPosition: utils.getScrollPosition\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-viewport/main.js\n **/","/* jshint devel: true */\n\nlet debug;\n\nfunction broadcast(eventType, data, target) {\n\ttarget = target || document.body;\n\n\tif (debug) {\n\t\tconsole.log('o-viewport', eventType, data);\n\t}\n\n\ttarget.dispatchEvent(new CustomEvent('oViewport.' + eventType, {\n\t\tdetail: data,\n\t\tbubbles: true\n\t}));\n}\n\nfunction getHeight(ignoreScrollbars) {\n\treturn ignoreScrollbars ? document.documentElement.clientHeight : Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n}\n\nfunction getWidth(ignoreScrollbars) {\n\treturn ignoreScrollbars ? document.documentElement.clientWidth : Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n}\n\nfunction getSize(ignoreScrollbars) {\n\treturn {\n\t\theight: module.exports.getHeight(ignoreScrollbars),\n\t\twidth: module.exports.getWidth(ignoreScrollbars)\n\t};\n}\n\nfunction getScrollPosition() {\n\tconst de = document.documentElement;\n\tconst db = document.body;\n\n\t// adapted from https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY\n\tconst isCSS1Compat = ((document.compatMode || '') === 'CSS1Compat');\n\n\tconst ieX = isCSS1Compat ? de.scrollLeft : db.scrollLeft;\n\tconst ieY = isCSS1Compat ? de.scrollTop : db.scrollTop;\n\treturn {\n\t\theight: db.scrollHeight,\n\t\twidth: db.scrollWidth,\n\t\tleft: window.pageXOffset || window.scrollX || ieX,\n\t\ttop: window.pageYOffset || window.scrollY || ieY\n\t};\n}\n\nfunction getOrientation() {\n\tconst orientation = window.screen.orientation || window.screen.mozOrientation || window.screen.msOrientation || undefined;\n\tif (orientation) {\n\t\treturn typeof orientation === 'string' ?\n\t\t\torientation.split('-')[0] :\n\t\t\torientation.type.split('-')[0];\n\t} else if (window.matchMedia) {\n\t\treturn window.matchMedia('(orientation: portrait)').matches ? 'portrait' : 'landscape';\n\t} else {\n\t\treturn getHeight() >= getWidth() ? 'portrait' : 'landscape';\n\t}\n}\n\nfunction detectVisiblityAPI() {\n\tlet hiddenName;\n\tlet eventType;\n\tif (typeof document.hidden !== 'undefined') {\n\t\thiddenName = 'hidden';\n\t\teventType = 'visibilitychange';\n\t} else if (typeof document.mozHidden !== 'undefined') {\n\t\thiddenName = 'mozHidden';\n\t\teventType = 'mozvisibilitychange';\n\t} else if (typeof document.msHidden !== 'undefined') {\n\t\thiddenName = 'msHidden';\n\t\teventType = 'msvisibilitychange';\n\t} else if (typeof document.webkitHidden !== 'undefined') {\n\t\thiddenName = 'webkitHidden';\n\t\teventType = 'webkitvisibilitychange';\n\t}\n\n\treturn {\n\t\thiddenName: hiddenName,\n\t\teventType: eventType\n\t};\n}\n\nfunction getVisibility() {\n\tconst hiddenName = detectVisiblityAPI().hiddenName;\n\treturn document[hiddenName];\n}\n\nfunction debounce (func, wait) {\n\tlet timeout;\n\treturn function () {\n\t\tconst args = arguments;\n\t\tconst later = () => {\n\t\t\ttimeout = null;\n\t\t\tfunc.apply(this, args);\n\t\t};\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t};\n};\n\nfunction throttle (func, wait) {\n\tlet timeout;\n\treturn function () {\n\t\tif (timeout) {\n\t\t\treturn;\n\t\t}\n\t\tconst args = arguments;\n\t\tconst later = () => {\n\t\t\ttimeout = null;\n\t\t\tfunc.apply(this, args);\n\t\t};\n\n\t\ttimeout = setTimeout(later, wait);\n\t};\n};\n\nmodule.exports = {\n\tdebug: function() {\n\t\tdebug = true;\n\t},\n\tbroadcast: broadcast,\n\tgetWidth: getWidth,\n\tgetHeight: getHeight,\n\tgetSize: getSize,\n\tgetScrollPosition: getScrollPosition,\n\tgetVisibility: getVisibility,\n\tgetOrientation: getOrientation,\n\tdetectVisiblityAPI: detectVisiblityAPI,\n\tthrottle: throttle,\n\tdebounce: debounce\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-viewport/src/utils.js\n **/","\nfunction now() {\n\treturn (new Date()).valueOf();\n}\n\nfunction Timer(interval, fn, maxTicks, opts) {\n\tthis.interval = (parseFloat(interval) || 1) * 1000;\n\tthis.maxTicks = parseInt(maxTicks, 10) || 0;\n\tthis.fn = fn;\n\tthis.ticks = 0;\n\tthis.opts = opts || {};\n\tthis.start();\n\treturn this;\n}\n\nTimer.prototype.tick = function() {\n\tconst Timer = this;\n\treturn function() {\n\t\tTimer.ticks++;\n\t\tTimer.fn.apply(Timer);\n\t\tTimer.lastTick = now();\n\n\t\tif (Timer.ticks === Timer.maxTicks) {\n\t\t\tTimer.stop();\n\t\t}\n\t};\n};\n\nTimer.prototype.start = function() {\n\tthis.startTime = this.lastTick = now();\n\tthis.id = setInterval(this.tick(), this.interval);\n\treturn true;\n};\n\nTimer.prototype.resume = function() {\n\tif (this.timeLeft) {\n\t\tthis.id = setInterval(this.tick(), this.timeLeft);\n\t\tdelete this.timeLeft;\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\nTimer.prototype.pause = function() {\n\tif (this.id) {\n\t\tthis.timeLeft = (this.interval) - (now() - this.lastTick);\n\t\tthis.kill();\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\nTimer.prototype.reset = function() {\n\tif (!!this.startTime) {\n\t\tthis.startTime = now();\n\t\tthis.ticks = 1; // ticks are set to 1 because we're about to execute the first tick again\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTimer.prototype.kill = function() {\n\tif (this.id) {\n\t\tclearInterval(this.id);\n\t\tdelete this.id;\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\nTimer.prototype.stop = function() {\n\tif (this.id || this.timeLeft) {\n\t\tthis.ticks = 0;\n\t\tthis.kill();\n\t\tdelete this.timeLeft;\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\nfunction Timers() {\n\tif (!(this instanceof Timers)) {\n\t\treturn new Timers();\n\t}\n\n\tconst scope = this;\n\tthis.timers = [];\n\n\tfunction all(method) {\n\t\treturn function() {\n\t\t\tconst j = scope.timers.length;\n\n\t\t\tfor (let i = 0; i < j; i++) {\n\t\t\t\tscope.timers[i][method]();\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction hasExecutionPaused(fn) {\n\t\treturn function() {\n\t\t\tconst Timer = this;\n\t\t\tconst time = now() - Timer.lastTick - Timer.interval;\n\t\t\tconst threshold = Timer.interval * 1.5;\n\n\t\t\tif (threshold < time) {\n\t\t\t\t\tTimer.reset();\n\t\t\t}\n\n\t\t\tfn.apply(Timer);\n\t\t};\n\t}\n\n\tfunction create(interval, fn, maxTicks, opts) {\n\t\tif ((opts && opts.reset)) {\n\t\t\tfn = hasExecutionPaused(fn);\n\t\t}\n\n\t\tconst timer = new Timer(interval, fn, maxTicks, opts);\n\t\tscope.timers.push(timer);\n\t\treturn timer;\n\t}\n\n\treturn {\n\t\tcreate: create,\n\t\tresumeall: all('resume'),\n\t\tpauseall: all('pause'),\n\t\tstopall: all('stop')\n\t};\n}\n\nmodule.exports = Timers;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/utils/timers.js\n **/","\nfunction Queue(processor) {\n\tif (!(this instanceof Queue)) {\n\t\treturn new Queue(processor);\n\t}\n\n\tthis.items = [];\n\tthis.processed = false;\n\tthis.processor = processor || function() {};\n}\n\nQueue.prototype.setProcessor = function(processor) {\n\tthis.processor = processor;\n\treturn this;\n};\n\nQueue.prototype.process = function() {\n\tthis.processed = true;\n\tthis.items.forEach(item => {\n\t\tthis.processor(item);\n\t});\n\n\treturn this;\n};\n\nQueue.prototype.add = function(item) {\n\tif (this.processed === true) {\n\t\tthis.processor(item);\n\t} else {\n\t\tthis.items.push(item);\n\t}\n\n\treturn this;\n};\n\nmodule.exports = Queue;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/utils/queue.js\n **/","/**\n * Utility methods for logging.\n * @author Origami Advertising, origami.advertising@ft.com\n * @module utils/log\n * @see utils\n */\n\n/* jshint devel: true */\n\nmodule.exports = log;\n\n/**\n * Safe logger for the browser\n * @exports utils/log\n * @param {string} type Sets the type of log message log, warn, error or info, if not set to one of these values log will be used\n * @param {any} args the arguments to be passed to console[type]\n */\nfunction log() {\n\tlet type;\n\tlet args;\n\tlet argsIndex;\n\tif ('log warn error info'.indexOf(arguments[0]) === -1) {\n\t\ttype = 'log';\n\t\targsIndex = 0;\n\t} else {\n\t\ttype = arguments[0];\n\t\targsIndex = 1;\n\t}\n\n\targs = [].slice.call(arguments, argsIndex);\n\n\tif (log.isOn(type)) {\n\t\twindow.console[type].apply(window.console, args);\n\t}\n}\n\n/**\n * Determine if debug logging is on and if the type if supported\n * @param {string} type\n */\nmodule.exports.isOn = function(type) {\n\t/* istanbul ignore else  */\n\tconst debug = localStorage.getItem('oAds') || location.search.indexOf('DEBUG=OADS') !== -1;\n\treturn debug && window.console && window.console[type];\n};\n\n/**\n * Log a warning message\n */\nmodule.exports.warn = function() {\n\tconst args = ['warn'].concat([].slice.call(arguments, 0));\n\tlog.apply(null, args);\n};\n\n/**\n * Log an error message\n */\nmodule.exports.error = function() {\n\tconst args = ['error'].concat([].slice.call(arguments, 0));\n\tlog.apply(null, args);\n};\n\n/**\n * Log an info message\n */\nmodule.exports.info = function() {\n\tconst args = ['info'].concat([].slice.call(arguments, 0));\n\tlog.apply(null, args);\n};\n\n/**\n * Start a collapsed group\n * @param {string} group the name of the group, defaults to o-ads\n */\nmodule.exports.start = function(group) {\n\tif (!log.isOn('groupCollapsed')) {\n\t\treturn;\n\t}\n\n\twindow.console.groupCollapsed(group || 'o-ads');\n};\n\n/**\n * End a collapsed group\n */\nmodule.exports.end = function() {\n\tif (!log.isOn('groupEnd')) {\n\t\treturn;\n\t}\n\n\twindow.console.groupEnd();\n};\n\nmodule.exports.table = function(data, columns) {\n\tif (log.isOn('log') && window.console) {\n\t\tif(console.table) {\n\t\t\tconsole.table(data, columns);\n\t\t} else {\n\t\t\tconsole.log(data);\n\t\t}\n\t}\n};\n\nmodule.exports.attributeTable = function(object, columns) {\n\tconst utils = require('../utils');\n\tif (log.isOn('log') && window.console) {\n\t\tif (object && console.table) {\n\t\t\tconst data = Object.keys(object).map((item) => {\n\t\t\t\tlet val;\n\t\t\t\tif (utils.isArray(object[item]) || utils.isObject(object[item])) {\n\t\t\t\t\tval = JSON.stringify(object[item]);\n\t\t\t\t} else {\n\t\t\t\t\tval = object[item];\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tkey: item,\n\t\t\t\t\tvalue: val\n\t\t\t\t};\n\t\t\t});\n\t\t\tconsole.table(data, columns);\n\t\t} else {\n\t\t\tconsole.log(object);\n\t\t}\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/utils/log.js\n **/","const utils = require('./utils');\nconst config = require('./config');\nconst Slot = require('./slot');\n\nlet screensize = null;\n\n/**\n* The Slots instance tracks all ad slots on the page\n* configures global page events used by a slot and\n* provides utlity methods that act on all slots\n* @constructor\n*/\nfunction Slots() {\n}\n\nfunction invokeMethodOnSlots(names, method, callback) {\n\tlet slots = [];\n\tnames = names || Object.keys(this);\n\n\t/* istanbul ignore else\t*/\n\tif (utils.isNonEmptyString(names)) {\n\t\tslots.push(names);\n\t} else if (utils.isArray(names)) {\n\t\tslots = names;\n\t}\n\n\tslots.forEach(run.bind(null, this, method));\n\n\tif(utils.isFunction(callback)){\n\t\t\tcallback.call(this, slots);\n\t}\n\n\treturn this;\n}\n\n/*\n* Either run a method or fire an event on the named slot.\n* @private\n* @param slots the slots object\n*/\nfunction run(slots, action, name) {\n\tconst slot = slots[name];\n\tif (slot) {\n\t\tif (utils.isFunction(slot[action])) {\n\t\t\tslot[action]();\n\t\t} else {\n\t\t\tif(utils.isFunction(slot.fire)){\n\t\t\t\tslot.fire(action);\n\t\t\t} else {\n\t\t\t\tutils.log.warn('Attempted to %s on a non-slot %s', action, name);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tutils.log.warn('Attempted to %s non-existant slot %s', action, name);\n\t}\n}\n\nfunction findFormatBySize(size) {\n\tif(!size) {\n\t\treturn false;\n\t}\n\tconst formats = config('formats');\n\tfor(let prop in formats) {\n\t\t/* istanbul ignore else\t*/\n\t\tif(formats.hasOwnProperty(prop)) {\n\n\t\t\tlet sizes = formats[prop].sizes;\n\t\t\tsizes = utils.isArray(sizes[0]) ? sizes : [sizes];\n\t\t\tconst match = sizes.filter(function(s) {\n\t\t\t\treturn (s[0] === parseInt(size[0]) && s[1] === parseInt(size[1]));\n\t\t\t});\n\t\t\tif(match.length) {\n\t\t\t\treturn prop;\n\t\t\t}\n\t\t}\n\t}\n}\n/**\n* Given a slot name or an array of slot names will collapse the slots using the collapse method on the slot\n*/\nSlots.prototype.collapse = function(names) {\n\treturn invokeMethodOnSlots.call(this, names, 'collapse');\n};\n\n/**\n* Given a slot name or an array of slot names will uncollapse the slots using the uncollapse method on the slot\n*/\nSlots.prototype.uncollapse = function(names) {\n\treturn invokeMethodOnSlots.call(this, names, 'uncollapse');\n};\n\n/**\n* Given a slot name or an array of slot names of slotnames will refresh the slots using the refresh method on the slot\n*/\nSlots.prototype.refresh = function(names) {\n\treturn invokeMethodOnSlots.call(this, names, 'refresh');\n};\n\n\n/**\n* Given a slot name or an array of slot names will clear the slots using the clear method on the slot\n*/\nSlots.prototype.clear = function(names) {\n\treturn invokeMethodOnSlots.call(this, names, 'clear');\n};\n\n/**\n* Given a slot name or an array of slot names will clear the slots using the clear method on the slot and remove the reference to the slot\n*/\nSlots.prototype.destroy = function(names) {\n\treturn invokeMethodOnSlots.call(this, names, 'clear', function(names){\n\t\t\tnames.forEach(name => {\n\t\t\t\tthis[name] = null;\n\t\t\t\tdelete this[name];\n\t\t\t});\n\t});\n};\n\n/**\n* Given a slot name will submit a delayed impression for the slot\n*/\nSlots.prototype.submitImpression = function(name) {\n\treturn invokeMethodOnSlots.call(this, name, 'submitImpression');\n};\n\n/**\n* Confirms a container in the page exists and creates a Slot object\n*/\nSlots.prototype.initSlot = function(container) {\n\t// if container is a string this is a legacy implementation using ids\n\t// find the element and remove the ID in favour of a data attribute\n\tif (utils.isString(container)) {\n\t\tcontainer = document.getElementById(container) || document.querySelector(`[data-o-ads-name=\"${container}\"]`);\n\t\tif (container && container.id) {\n\t\t\tcontainer.setAttribute('data-o-ads-name', container.id);\n\t\t\tcontainer.removeAttribute('id');\n\t\t}\n\t}\n\n\t// if not an element or we can't find it in the DOM exit\n\tif (!utils.isElement(container)) {\n\t\tutils.log.error('slot container must be an element!', container);\n\t\treturn false;\n\t}\n\n\t// add the aria hidden attribute\n\tcontainer.setAttribute('aria-hidden', 'true');\n\t// pass the method to retrieve or create the single IntersectionObserver instance\n\tconst slot = new Slot(container, screensize, this.initLazyLoading.bind(this));\n\t/* istanbul ignore else\t*/\n\tif (slot && !this[slot.name]) {\n\t\tthis[slot.name] = slot;\n\t\tslot.fire('ready');\n\t} else if (this[slot.name]) {\n\t\tutils.log.error('slot %s is already defined!', slot.name);\n\t}\n\n\treturn slot;\n};\n\nSlots.prototype.initRefresh = function() {\n\tif (config('flags').refresh && config('refresh')) {\n\t\tconst data = config('refresh');\n\t\t/* istanbul ignore else\t*/\n\t\tif (data.time && !data.inview) {\n\t\t\tthis.timers.refresh = utils.timers.create(data.time, this.refresh.bind(this), data.max || 0);\n\t\t}\n\t}\n\n\treturn this;\n};\n\n/*\n*\tlistens for the rendered event from a slot and fires the complete event,\n* after extending the slot with information from the server.\n*/\nSlots.prototype.initRendered = function() {\n\tutils.on('rendered', function(slots, event) {\n\t\tconst slot = slots[event.detail.name];\n\t\t/* istanbul ignore else\t*/\n\t\tif (slot) {\n\t\t\tutils.extend(slot[slot.server], event.detail[slot.server]);\n\t\t\tconst size = event.detail.gpt.size;\n\t\t\tconst format = findFormatBySize(size);\n\t\t\tslot.setFormatLoaded(format);\n\t\t\tslot.maximise(size);\n\t\t\tslot.fire('complete', event.detail);\n\t\t}\n\t}.bind(null, this));\n\treturn this;\n};\n\n/*\n* if responsive configuration exists listen for breakpoint changes\n*/\nSlots.prototype.initResponsive = function() {\n\tconst breakpoints = config('responsive');\n\t/* istanbul ignore else\t*/\n\tif (utils.isObject(breakpoints)) {\n\t\tscreensize = utils.responsive(breakpoints, onBreakpointChange.bind(null, this));\n\t}\n\n\treturn this;\n};\n\n/*\n* called when a responsive breakpoint is crossed though window resizing or orientation change.\n*/\nfunction onBreakpointChange(slots, screensize) {\n\tslots.forEach(function(slot) {\n\t\t/* istanbul ignore else\t*/\n\t\tif (slot) {\n\t\t\t// ADS-766 if format name is Responsive then we have requested a responsive creative and do not want to request new ads at different breakpoints\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tconst isCurrentlyResponsive = slot.container && slot.container.getAttribute('data-o-ads-loaded') === 'Responsive';\n\t\t\tconst stillWantsResponsive = slot.sizes[screensize] && slot.sizes[screensize].filter(size => findFormatBySize(size) === 'Responsive').length > 0;\n\n\t\t\tif (isCurrentlyResponsive && stillWantsResponsive) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tslot.screensize = screensize;\n\t\t\tslot.fire('breakpoint', { screensize: screensize });\n\t\t}\n\t});\n}\n\n/*\n* Initialise the postMessage API\n*/\nSlots.prototype.initPostMessage = function() {\n\t// Listen for messages coming from ads\n\twindow.addEventListener('message', pmHandler.bind(null, this), false);\n\n\tfunction pmHandler(slots, event) {\n\t\tconst data = utils.messenger.parse(event.data);\n\t\t/* istanbul ignore else\tdon't process messages with a non oAds type*/\n\t\tif (data.type && (/^oAds\\./.test(data.type) || /^touch/.test(data.type))) {\n\t\t\tconst type = data.type.replace('oAds\\.', '');\n\t\t\tlet slot = data.name ? slots[data.name] : false;\n\t\t\tif (type === 'whoami' && event.source) {\n\n\t\t\t\tdocument.body.dispatchEvent( new CustomEvent('oAds.adIframeLoaded'));\n\n\t\t\t\tconst messageToSend = { type: 'oAds.youare' };\n\t\t\t\tconst slotName = utils.iframeToSlotName(event.source.window);\n\t\t\t\tslot = slots[slotName] || false;\n\n\t\t\t\tif (slot) {\n\t\t\t\t\tif (data.collapse) {\n\t\t\t\t\t\tslot.collapse();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.mastercompanion) {\n\t\t\t\t\t\tconst size = slot.gpt.size;\n\t\t\t\t\t\tconst format = findFormatBySize(size);\n\t\t\t\t\t\tslots.forEach(function(s) {\n\t\t\t\t\t\t\tif(s.companion && s.name !== slot.name) {\n\t\t\t\t\t\t\t\ts.fire('masterLoaded', slot);\n\t\t\t\t\t\t\t\ts.container.setAttribute('data-o-ads-master-loaded', format);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n          if (data.customMessages && typeof data.customMessages === \"object\") {\n\t\t\t\t\t\t\tslot.fire('customMessages', data.customMessages);\n          }\n\t\t\t\t\tif(slot.disableSwipeDefault) {\n\t\t\t\t\t\tmessageToSend.disableDefaultSwipeHandler = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tmessageToSend.name = slotName;\n\t\t\t\t\tmessageToSend.sizes = slot.sizes;\n\n\t\t\t\t\tutils.messenger.post(messageToSend, event.source);\n\t\t\t\t} else {\n\t\t\t\t\tutils.log.error('Message received from unidentified slot');\n\t\t\t\t\tutils.messenger.post(messageToSend, event.source);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!slot) {\n\t\t\t\t\tutils.log.error('Message received from unidentified slot');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(type === 'responsive') {\n\t\t\t\t\tslot.setResponsiveCreative(true);\n\t\t\t\t} else if (utils.isFunction(slot[type])) {\n\t\t\t\t\tslot[type]();\n\t\t\t\t} else if (/^touch/.test(data.type)) {\n\t\t\t\t\tslot.fire('touch', data);\n\t\t\t\t} else {\n\t\t\t\t\tdelete data.type;\n\t\t\t\t\tdelete data.name;\n\t\t\t\t\tslot.fire(type, data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nSlots.prototype.initLazyLoading = function(slotConfig) {\n\tconst lazyLoadingConfig = config('lazyLoad') || slotConfig;\n\t// If we don't already have an instance of the observer, and it is enabled globally or on a slot (force), then create one.\n\t/* istanbul ignore else\t*/\n\tif('IntersectionObserver' in window && !this.lazyLoadObserver && !!lazyLoadingConfig) {\n\t\tlet options = {};\n\n\t\tfunction onChange(changes) {\n\t\t\t//Execute the changes in the order they appear on the page. This is because the top slot often determines what the lower slots display.\n\t\t\t/* istanbul ignore next */\n\t\t\tchanges\n\t\t\t.filter(a => a.intersectionRect.height || a.intersectionRect.width || a.intersectionRect.top || a.intersectionRect.left)\n\t\t\t.sort((a,b) => a.intersectionRect.top - b.intersectionRect.top)\n\t\t\t.forEach((change) => {\n\t\t\t\tconst slotName = change.target.getAttribute('data-o-ads-name');\n\t\t\t\t/* istanbul ignore else */\n\t\t\t\tif(slotName) {\n\t\t\t\t\tinvokeMethodOnSlots.call(this, slotName, 'render');\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t/* istanbul ignore else\t*/\n\t\tif(typeof lazyLoadingConfig  === 'object') {\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tif(lazyLoadingConfig.viewportMargin){\n\t\t\t\toptions.rootMargin = lazyLoadingConfig.viewportMargin;\n\t\t\t}\n\t\t\t/* istanbul ignore else\t*/\n\t\t\tif(lazyLoadingConfig.threshold) {\n\t\t\t\toptions.threshold = lazyLoadingConfig.threshold;\n\t\t\t}\n\t\t}\n\t\tthis.lazyLoadObserver = new IntersectionObserver(onChange.bind(this), options);\n\t}\n\n\treturn this.lazyLoadObserver;\n\n};\n\nSlots.prototype.forEach = function(fn) {\n\tObject.keys(this).forEach(name => {\n\t\tconst slot = this[name];\n\t\t/* istanbul ignore else\t*/\n\t\tif (slot instanceof Slot) {\n\t\t\tfn.call(this, slot);\n\t\t}\n\t});\n\treturn this;\n};\n\n/*\n* Initialise slots\n*/\nSlots.prototype.init = function() {\n\tthis.initRefresh();\n\tthis.initRendered();\n\tthis.initResponsive();\n\tthis.initPostMessage();\n\tthis.initLazyLoading();\n};\n\nSlots.prototype.timers = {};\n\nSlots.prototype.debug = function (){\n\tconst log = utils.log;\n\tconst data = [];\n\n\tthis.forEach(function (slot) {\n\t\tconst row = {\n\t\t\tname: slot.name,\n\t\t\t'unit name': slot.gpt.unitName,\n\t\t\t'creative id': slot.gpt.creativeId || 'N/A',\n\t\t\t'line item id': slot.gpt.lineItemId || 'N/A',\n\t\t\tsize: (utils.isArray(slot.gpt.size) && slot.gpt.size.join('×')) || (slot.gpt.isEmpty && 'empty') || 'N/A',\n\t\t\tsizes: (utils.isArray(slot.sizes) && slot.sizes.map(function(item){ return item.join('×'); }).join(', ')) || 'responsive slot',\n\t\t\ttargeting: Object.keys(slot.targeting).map(function (param) { return `${param}=${slot.targeting[param]}`;} ).join(', ')\n\t\t};\n\t\tdata.push(row);\n\t});\n\n\tlog.start('Creatives');\n\tlog.table(data);\n\tlog.end();\n};\n\n\n\nmodule.exports = new Slots();\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/slots.js\n **/","const utils = require('./utils');\nconst config = require('./config');\n\nconst VALID_SIZE_STRINGS = ['fluid'];\n\nconst attributeParsers = {\n\tsizes: function(value, sizes) {\n\t\tif (value === false || value === 'false') {\n\t\t\treturn false;\n\t\t}\n\t\t/* istanbul ignore else  */\n\t\telse if (utils.isArray(sizes)) {\n\t\t\tconst regex = /(\\d+)x(\\d+)/;\n\t\t\tvalue.split(',').filter(size => size.length).forEach(size => {\n\t\t\t\tif(regex.test(size)) {\n\t\t\t\t\tsize.replace(regex, function(match, width, height) {\n\t\t\t\t\t\tsizes.push([parseInt(width, 10), parseInt(height, 10)]);\n\t\t\t\t\t});\n\t\t\t\t} else if (VALID_SIZE_STRINGS.indexOf(size) >= 0) {\n\t\t\t\t\tsizes.push(size);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn sizes;\n\t},\n\n\tformats: function(value, sizes) {\n\t\tif (value === false || value === 'false') {\n\t\t\tsizes = false;\n\t\t} else {\n\t\t\tconst mapping = config().formats;\n\t\t\tconst formats = utils.isArray(value) ? value : value.split(',');\n\t\t\tformats.forEach(format => {\n\t\t\t\tif (mapping && mapping[format]) {\n\t\t\t\t\tformat = mapping[format];\n\t\t\t\t\tif (utils.isArray(format.sizes[0]) || VALID_SIZE_STRINGS.indexOf(format.sizes[0]) >= 0) {\n\t\t\t\t\t\tformat.sizes.forEach(size => {\n\t\t\t\t\t\t\tsizes.push(size);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsizes.push(format.sizes);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tutils.log.error(`Slot configured with unknown format ${format}`);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn sizes;\n\t},\n\n\tresponsiveSizes: function(name, value, sizes) {\n\t\tconst screenName = name.replace(/^sizes/, '').toLowerCase();\n\t\t/* istanbul ignore else\t*/\n\t\tif (!utils.isPlainObject(sizes)) {\n\t\t\tsizes = {};\n\t\t}\n\n\t\tsizes[screenName] = attributeParsers.sizes(value, sizes[screenName] || []);\n\t\treturn sizes;\n\t},\n\n\tresponsiveFormats: function(name, value, sizes) {\n\t\tconst screenName = name.replace(/^formats/, '').toLowerCase();\n\t\t/* istanbul ignore else\t*/\n\t\tif (!utils.isPlainObject(sizes)) {\n\t\t\tsizes = {};\n\t\t}\n\n\t\tsizes[screenName] = attributeParsers.formats(value, []);\n\t\treturn sizes;\n\t},\n\n\tlazyLoadThreshold: function(value) {\n\t\treturn value.split(',').map(Number);\n\t},\n\n\ttargeting: function(value, targeting) {\n\t\tvalue = utils.hash(value, ';', '=');\n\t\tutils.extend(targeting, value);\n\t\treturn targeting;\n\t},\n\n\tbase: function(value) {\n\t\t/* istanbul ignore else\t*/\n\t\tif (value === '' || value === 'true') {\n\t\t\tvalue = true;\n\t\t} else if (value === 'false') {\n\t\t\tvalue = false;\n\t\t}\n\n\t\treturn value;\n\t}\n};\n\nconst convertLazyLoadBooleanToObject = (obj) => {\n\tif(obj.lazyLoad === true) {\n\t\tobj.lazyLoad = {};\n\t}\n}\n\n/**\n * The Slot class.\n * @class\n * @constructor\n */\nfunction Slot(container, screensize, initLazyLoading) {\n\tlet slotConfig = config('slots') || {};\n\tlet disableSwipeDefault = config('disableSwipeDefault') || false;\n\n\t// store the container\n\tthis.container = container;\n\t// the current responsive screensize\n\n\t/* istanbul ignore else\t*/\n\tif (screensize) {\n\t\tthis.screensize = screensize;\n\t}\n\n\t// init slot dom structure\n\tthis.outer = this.addContainer(container, {\n\t\t'class': 'o-ads__outer'\n\t});\n\tthis.inner = this.addContainer(this.outer, {\n\t\t'class': 'o-ads__inner'\n\t});\n\n\t// make sure the slot has a name\n\tthis.setName();\n\tthis.setResponsiveCreative(false);\n\tslotConfig = slotConfig[this.name] || {};\n\n\t// default configuration properties\n\tthis.server = 'gpt';\n\tthis.defer = false;\n\n\t// global slots configuration\n\tthis.targeting = slotConfig.targeting || {};\n\tthis.sizes = slotConfig.sizes || [];\n\tthis.center = slotConfig.center || false;\n\tthis.label = slotConfig.label || false;\n\tthis.outOfPage = slotConfig.outOfPage || false;\n\n\tthis.disableSwipeDefault = slotConfig.disableSwipeDefault || disableSwipeDefault;\n\tthis.companion = (slotConfig.companion === false ? false : true);\n\tthis.collapseEmpty = slotConfig.collapseEmpty;\n\t/* istanbul ignore else */\n\tif (utils.isArray(slotConfig.formats)) {\n\t\tattributeParsers.formats(slotConfig.formats, this.sizes);\n\t} else if (utils.isPlainObject(slotConfig.formats)) {\n\t\tthis.sizes = {};\n\t\tObject.keys(slotConfig.formats).forEach(screenName => {\n\t\t\tthis.sizes[screenName] = attributeParsers.formats(slotConfig.formats[screenName], []);\n\t\t});\n\t}\n\n\tif (typeof slotConfig.lazyLoad !== 'undefined') {\n\t\tthis.lazyLoad = slotConfig.lazyLoad;\n\t} else {\n\t\tthis.lazyLoad = config('lazyLoad') || false;\n\t}\n\n\t// extend with imperative configuration options\n\tthis.parseAttributeConfig();\n\t/* istanbul ignore else\t*/\n\tif (!this.sizes.length && !utils.isPlainObject(this.sizes)) {\n\t\tutils.log.error('slot %s has no configured sizes!', this.name);\n\t\treturn false;\n\t}\n\n\t// Either retrieve the existing IntersectionObserver, or tell slots.js to create a new one.\n\tthis.lazyLoadObserver = initLazyLoading(this.lazyLoad);\n\tthis.initLazyLoad();\n\n\tthis.centerContainer();\n\tthis.labelContainer();\n\n\tthis.initResponsive();\n\n}\n\n/**\n * parse slot attribute config\n */\nSlot.prototype.parseAttributeConfig = function() {\n\tArray.from(this.container.attributes).forEach(attribute => {\n\t\tconst name = utils.parseAttributeName(attribute.name);\n\t\tconst value = attribute.value;\n\t\tif (name === 'formats') {\n\t\t\tthis[name] = attributeParsers[name](value, this.sizes);\n\t\t} else if (name === 'lazyLoadThreshold' && this.lazyLoad) {\n\t\t\tconvertLazyLoadBooleanToObject(this);\n\t\t\tthis.lazyLoad.threshold = attributeParsers.lazyLoadThreshold(value);\n\t\t} else if (name === 'lazyLoadViewportMargin' && this.lazyLoad) {\n\t\t\tconvertLazyLoadBooleanToObject(this);\n\t\t\tthis.lazyLoad.viewportMargin = attributeParsers.base(value);} else if (attributeParsers[name]) {\n\t\t\tthis[name] = attributeParsers[name](value, this[name]);\n\t\t} else if (/^formats\\w*/.test(name)) {\n\t\t\tthis.sizes = attributeParsers.responsiveFormats(name, value, this.sizes);\n\t\t} else if (/^sizes\\w*/.test(name)) {\n\t\t\tthis.sizes = attributeParsers.responsiveSizes(name, value, this.sizes);\n\t\t}\n\t\telse if (this.hasOwnProperty(name)) {\n\t\t\tthis[name] = attributeParsers.base(value);\n\t\t}\n\t});\n};\n\nSlot.prototype.getAttributes = function() {\n\tconst attributes = {};\n\tArray.from(this.container.attributes).forEach(attribute => {\n\t\tattributes[utils.parseAttributeName(attribute)] = attribute.value;\n\t});\n\tthis.attributes = attributes;\n\treturn this;\n};\n\n/**\n *\tLoad a slot when it appears in the viewport\n */\nSlot.prototype.initLazyLoad = function() {\n\t/* istanbul ignore else  */\n\tif (this.lazyLoadObserver && this.lazyLoad) {\n\t\tthis.defer = true;\n\t\tthis.lazyLoadObserver.observe(this.container);\n\n\t\t//Master/Companion ads don't work with lazy loading, so if a master ad loads trigger\n\t\t/* istanbul ignore else */\n\t\tif(this.companion) {\n\t\t\tutils.once('masterLoaded', () => {\n\t\t\t\tif (this.hasValidSize()){\n\t\t\t\t\tthis.render();\n\t\t\t\t}\n\t\t\t}, this.container);\n\t\t}\n\t}\n\treturn this;\n}\n\nSlot.prototype.render = function() {\n\tthis.fire('render');\n\t/* istanbul ignore else  */\n\tif(this.lazyLoadObserver) {\n\t\tthis.lazyLoadObserver.unobserve(this.container);\n\t}\n};\n\n\n/**\n *\tListen to responsive breakpoints and collapse slots\n * where the configured size is set to false\n */\n Slot.prototype.initResponsive = function() {\n\t/* istanbul ignore else */\n\tif (utils.isPlainObject(this.sizes)) {\n\t\t/* istanbul ignore else */\n\t\tif (!this.hasValidSize()) {\n\t\t\tthis.collapse();\n\t\t}\n\n\t\tutils.on('breakpoint', function(event) {\n\t\t\tconst slot = event.detail.slot;\n\t\t\tslot.screensize = event.detail.screensize;\n\n\t\t\tif (slot.hasValidSize()) {\n\t\t\t\tslot.uncollapse();\n\t\t\t} else {\n\t\t\t\tslot.collapse();\n\t\t\t\tslot.clear();\n\t\t\t}\n\t\t}, this.container);\n\t}\n\n\treturn this;\n };\n\n/**\n * Maximise the slot when size is 100x100\n */\nSlot.prototype.maximise = function(size) {\n\tif (size && +size[0] === 100 && +size[1] === 100) {\n\t\tthis.fire('resize', {\n\t\t\tsize: ['100%', '100%']\n\t\t});\n\t}\n};\n\n/**\n *\tIf the slot doesn't have a name give it one\n */\nSlot.prototype.setName = function() {\n\tthis.name = this.container.getAttribute('data-o-ads-name') || this.container.getAttribute('o-ads-name');\n\tif (!this.name) {\n\t\tthis.name = `o-ads-slot-${(Math.floor(Math.random() * 10000))}`;\n\t\tthis.container.setAttribute('data-o-ads-name', this.name);\n\t}\n\treturn this;\n};\n\n/**\n *\tIf the slot doesn't have a name give it one\n */\nSlot.prototype.setResponsiveCreative = function(value) {\n\tthis.responsiveCreative = value;\n\treturn this;\n};\n\n\n/**\n * add the empty class to the slot\n */\nSlot.prototype.collapse = function() {\n\tthis.container.classList.add('o-ads--empty');\n\tthis.setFormatLoaded(false);\n\tdocument.body.classList.add(`o-ads-no-${this.name}`);\n\treturn this;\n};\n\n/**\n * sets a classname of the format\n */\nSlot.prototype.setFormatLoaded = function(format) {\n\tthis.container.setAttribute('data-o-ads-loaded', format);\n\treturn this;\n};\n\n/**\n * remove the empty class from the slot\n */\nSlot.prototype.uncollapse = function() {\n\tthis.container.classList.remove('o-ads--empty');\n\tdocument.body.classList.remove(`o-ads-no-${this.name}`);\n\treturn this;\n};\n\n/**\n * call the ad server clear method on the slot if one exists\n */\nSlot.prototype.clear = function() {\n\t/* istanbul ignore else  */\n\tif (utils.isFunction(this['clearSlot'])) {\n\t\tthis.clearSlot();\n\t}\n\treturn this;\n};\n\n/**\n * call the ad server impression URL for an out of page slot if it has been configured correctly for delayed impressions\n */\nSlot.prototype.submitImpression = function() {\n\t/* istanbul ignore else  */\n\tif (utils.isFunction(this['submitGptImpression'])) {\n\t\tthis.submitGptImpression();\n\t}\n\treturn this;\n};\n\n/**\n *\tfire an event on the slot\n */\nSlot.prototype.fire = function(name, data) {\n\tconst details = {\n\t\tname: this.name,\n\t\tslot: this\n\t};\n\n\tif (utils.isPlainObject(data)) {\n\t\tutils.extend(details, data);\n\t}\n\n\tutils.broadcast(name, details, this.container);\n\treturn this;\n};\n\n/**\n *\tadd a div tag into the current slot container\n **/\nSlot.prototype.addContainer = function(node, attrs) {\n\tlet container = '<div ';\n\t/* istanbul ignore else  */\n\tif (attrs) {\n\t\tObject.keys(attrs).forEach(function(attr) {\n\t\t\tconst value = attrs[attr];\n\t\t\tcontainer += `${attr}=${value} `;\n\t\t});\n\t}\n\tcontainer += '></div>';\n\tnode.insertAdjacentHTML('beforeend', container);\n\treturn node.lastChild;\n};\n\n\nSlot.prototype.hasValidSize = function(screensize) {\n\tscreensize = screensize || this.screensize;\n\tif (screensize && utils.isPlainObject(this.sizes)) {\n\t\treturn this.sizes[screensize] !== false;\n\t}\n\n\treturn true;\n};\n\n\n/**\n * Add a center class to the main container\n */\nSlot.prototype.centerContainer = function() {\n\tif (this.center) {\n\t\tthis.container.classList.add('o-ads--center');\n\t}\n\n\treturn this;\n};\n\n\n/**\n * Add a label class to the main container\n */\nSlot.prototype.labelContainer = function() {\n\tlet className;\n\tif (this.label === true || this.label === 'left') {\n\t\tclassName = 'label-left';\n\t} else if (this.label === 'right') {\n\t\tclassName = 'label-right';\n\t}\n\n\tif (className) {\n\t\tthis.container.classList.add(`o-ads--${className}`);\n\t}\n\treturn this;\n};\n\nmodule.exports = Slot;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/slot.js\n **/","/*globals googletag: true */\n\n/**\n* @fileOverview\n* ad server modukes for o-ads implementing Google publisher tags ad requests.\n*\n* @author Robin Marr, robin.marr@ft.com\n*/\n\nconst config = require('../config');\nconst utils = require('../utils');\nconst targeting = require('../targeting');\nlet breakpoints = false;\n/*\n//###########################\n// Initialisation handlers ##\n//###########################\n*/\n\n/*\n* Initialise Google publisher tags functionality\n*/\nfunction init() {\n\tconst gptConfig = config('gpt') || {};\n\tbreakpoints = config('responsive');\n\tinitGoogleTag();\n\tutils.on('ready', onReady.bind(null, slotMethods));\n\tutils.on('render', onRender);\n\tutils.on('refresh', onRefresh);\n\tutils.on('resize', onResize);\n\tgoogletag.cmd.push(setup.bind(null, gptConfig));\n}\n\n/*\n* initalise the googletag global namespace and add the google publish tags library to the page\n*/\nfunction initGoogleTag() {\n\tif (!window.googletag) {\n\t\t// set up a place holder for the gpt code downloaded from google\n\t\twindow.googletag = {};\n\n\t\t// this is a command queue used by GPT any methods added to it will be\n\t\t// executed when GPT code is available, if GPT is already available they\n\t\t// will be executed immediately\n\t\twindow.googletag.cmd = [];\n\t}\n\n\tutils.attach('//www.googletagservices.com/tag/js/gpt.js', true, null, function(err) {\n\t\tutils.broadcast('adServerLoadError', err);\n\t});\n}\n\n/*\n//#################################\n// Global configuration handlers ##\n//#################################\n*/\n\n/*\n* Configure the GPT library for the current page\n* this method is pushed onto the googletag command queue and run\n* when the library is available\n*/\nfunction setup(gptConfig) {\n\tgoogletag.pubads().addEventListener('slotRenderEnded', onRenderEnded);\n\tenableCompanions(gptConfig);\n\tsetRenderingMode(gptConfig);\n\tsetPageTargeting(targeting.get());\n\tsetPageCollapseEmpty(gptConfig);\n\tgoogletag.enableServices();\n\treturn true;\n}\n\n/*\n* set the gpt rendering mode to either sync or async\n* default is async\n*/\n\nfunction setRenderingMode(gptConfig) {\n\tconst rendering = gptConfig.rendering;\n\tif (rendering === 'sync') {\n\t\tgoogletag.pubads().enableSyncRendering();\n\t} else if (rendering === 'sra') {\n\t\tgoogletag.pubads().enableSingleRequest();\n\t} else {\n\t\tgoogletag.pubads().enableAsyncRendering();\n\t}\n}\n\n/**\n* Adds page targeting to GPT ad calls\n* @name setPageTargeting\n* @memberof GPT\n* @lends GPT\n*/\nfunction setPageTargeting(targeting) {\n\n\tfunction setTargeting(key, value) {\n\t\tgoogletag.pubads().setTargeting(key, value);\n\t}\n\n\tif (utils.isPlainObject(targeting)) {\n\t\tObject.keys(targeting).forEach(function(param) {\n\t\t\tgoogletag.cmd.push(setTargeting.bind(null, param, targeting[param]));\n\t\t});\n\t} else {\n\t\tutils.log.warn('invalid targeting object passed', targeting);\n\t}\n\n\treturn targeting;\n}\n\n/**\n* Sets behaviour of empty slots can be 'after', 'before' or 'never'\n* * after collapse slots that return an empty ad\n* * before collapses all slots and only displays them on\n* true is synonymous with before\n* false is synonymous with never\n*/\nfunction setPageCollapseEmpty(gptConfig) {\n\tconst mode = gptConfig.collapseEmpty;\n\n\tif (mode === 'before' || mode === true) {\n\t\tgoogletag.pubads().collapseEmptyDivs(true, true);\n\t} else if (mode === 'never' || mode === false) {\n\t\tgoogletag.pubads().collapseEmptyDivs(false);\n\t} else { //default is after\n\t\tgoogletag.pubads().collapseEmptyDivs(true);\n\t}\n\n}\n\n/**\n* When companions are enabled we delay the rendering of ad slots until\n* either a master is returned or all slots are returned without a master\n*/\nfunction enableCompanions(gptConfig) {\n\tif (gptConfig.companions) {\n\t\tgoogletag.pubads().disableInitialLoad();\n\t\tgoogletag.companionAds().setRefreshUnfilledSlots(true);\n\t}\n}\n\n/*\n//##################\n// Event handlers ##\n//##################\n*/\n\n/*\n* Event handler for when a slot is ready for an ad to rendered\n*/\nfunction onReady(slotMethods, event) {\n\tconst slot = event.detail.slot;\n\t/* istanbul ignore else  */\n\tif (slot.server === 'gpt') {\n\t\tslot.gpt = {};\n\n\t\t// extend the slot with gpt methods\n\t\tutils.extend(slot, slotMethods);\n\n\t\t// setup the gpt configuration the ad\n\t\tgoogletag.cmd.push(() => {\n\t\t\tslot.defineSlot()\n\t\t\t.addServices()\n\t\t\t.setCollapseEmpty()\n\t\t\t.setTargeting()\n\t\t\t.setURL();\n\n\t\t\tif (!slot.defer && slot.hasValidSize()) {\n\t\t\t\tslot.display();\n\t\t\t}\n\t\t});\n\t}\n}\n/*\n* Render is called when a slot is not rendered when the ready event fires\n*/\nfunction onRender(event) {\n\tconst slot = event.detail.slot;\n\t/* istanbul ignore else  */\n\tif (utils.isFunction(slot.display)) {\n\t\tslot.display();\n\t}\n}\n\n/*\n* refresh is called when a slot requests the ad be flipped\n*/\nfunction onRefresh(event) {\n\twindow.googletag.cmd.push(() => {\n\t\tconst targeting = event.detail.targeting;\n\t\tif (utils.isPlainObject(targeting)) {\n\t\t\tObject.keys(targeting).forEach(name => {\n\t\t\t\tevent.detail.slot.gpt.slot.setTargeting(name, targeting[name]);\n\t\t\t});\n\t\t}\n\t\tgoogletag.pubads().refresh([event.detail.slot.gpt.slot]);\n\t});\n\treturn this;\n}\n\nfunction onResize(event) {\n\tconst iframe = event.detail.slot.gpt.iframe;\n\tconst size = event.detail.size;\n\tiframe.width = size[0];\n\tiframe.height = size[1];\n}\n\n/*\n* function passed to the gpt library that is run when an ad completes rendering\n*/\nfunction onRenderEnded(event) {\n\tconst data = {\n\t\tgpt: {}\n\t};\n\n\tconst gptSlotId = event.slot.getSlotId();\n\tconst domId = gptSlotId.getDomId().split('-');\n\tconst iframeId = `google_ads_iframe_${gptSlotId.getId()}`;\n\tdata.type = domId.pop();\n\tdata.name = domId.join('-');\n\tconst detail = data.gpt;\n\tdetail.isEmpty = event.isEmpty;\n\tdetail.size = event.size;\n\tdetail.creativeId = event.creativeId;\n\tdetail.lineItemId = event.lineItemId;\n\tdetail.serviceName = event.serviceName;\n\tdetail.iframe = document.getElementById(iframeId);\n\tutils.broadcast('rendered', data);\n}\n\n/*\n//################\n// Slot methods ##\n//################\n* Set of methods extended on to the slot constructor for GPT served slots\n*/\nconst slotMethods = {\n\t/**\n\t* define a GPT slot\n\t*/\n\tdefineSlot: function() {\n\t\twindow.googletag.cmd.push(() => {\n\t\t\tthis.gpt.id = `${this.name}-gpt`;\n\t\t\tthis.inner.setAttribute('id', this.gpt.id);\n\t\t\tthis.setUnitName();\n\t\t\tif (!this.outOfPage) {\n\t\t\t\tif (breakpoints && utils.isObject(this.sizes)) {\n\t\t\t\t\tthis.initResponsive();\n\t\t\t\t\tthis.gpt.slot = googletag.defineSlot(this.gpt.unitName, [], this.gpt.id).defineSizeMapping(this.gpt.sizes);\n\t\t\t\t} else {\n\t\t\t\t\tthis.gpt.slot = googletag.defineSlot(this.gpt.unitName, this.sizes, this.gpt.id);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.gpt.slot = googletag.defineOutOfPageSlot(this.gpt.unitName, this.gpt.id);\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t},\n\tclearSlot: function(gptSlot) {\n\t\tif (window.googletag.pubadsReady && window.googletag.pubads) {\n\t\t\tgptSlot = gptSlot || this.gpt.slot;\n\t\t\treturn googletag.pubads().clear([gptSlot]);\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tinitResponsive: function() {\n\t\twindow.googletag.cmd.push(() => {\n\t\t\tutils.on('breakpoint', (event) => {\n\t\t\t\tconst slot = event.detail.slot;\n\t\t\t\tconst screensize = event.detail.screensize;\n\n\t\t\t\tupdatePageTargeting({ res: screensize });\n\n\t\t\t\tif (slot.hasValidSize(screensize) && !slot.responsiveCreative) {\n\t\t\t\t\t/* istanbul ignore else  */\n\t\t\t\t\tif (slot.gpt.iframe) {\n\t\t\t\t\t\tslot.fire('refresh');\n\t\t\t\t\t} else if (!this.defer) {\n\t\t\t\t\t\tslot.display();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this.container);\n\n\t\t\tconst mapping = googletag.sizeMapping();\n\t\t\tObject.keys(breakpoints).forEach(breakpoint => {\n\t\t\t\tif (this.sizes[breakpoint]) {\n\t\t\t\t\tmapping.addSize(breakpoints[breakpoint], this.sizes[breakpoint]);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.gpt.sizes = mapping.build();\n\t\t});\n\t\treturn this;\n\t},\n\t/*\n\t*\tTell gpt to request an ad\n\t*/\n\tdisplay: function() {\n\t\twindow.googletag.cmd.push(() => {\n\t\t\tgoogletag.display(this.gpt.id);\n\t\t});\n\t\treturn this;\n\t},\n\t/**\n\t* Set the DFP unit name for the slot.\n\t*/\n\tsetUnitName: function() {\n\t\twindow.googletag.cmd.push(() => {\n\t\t\tlet unitName;\n\t\t\tconst gpt = config('gpt') || {};\n\t\t\tconst attr = this.container.getAttribute('data-o-ads-gpt-unit-name');\n\n\t\t\tif (utils.isNonEmptyString(attr)) {\n\t\t\t\tunitName = attr;\n\t\t\t} else if (utils.isNonEmptyString(gpt.unitName)) {\n\t\t\t\tunitName = gpt.unitName;\n\t\t\t} else {\n\t\t\t\tconst network = gpt.network;\n\t\t\t\tconst site = gpt.site;\n\t\t\t\tconst zone = gpt.zone;\n\t\t\t\tunitName = `/${network}`;\n\t\t\t\tunitName += utils.isNonEmptyString(site) ? `/${site}` : '';\n\t\t\t\tunitName += utils.isNonEmptyString(zone) ? `/${zone}` : '';\n\t\t\t}\n\t\t\tthis.gpt.unitName = unitName;\n\t\t});\n\t\treturn this;\n\t},\n\t/**\n\t* Add the slot to the pub ads service and add a companion service if configured\n\t*/\n\taddServices: function(gptSlot) {\n\t\twindow.googletag.cmd.push(() => {\n\t\t\tconst gpt = config('gpt') || {};\n\t\t\tgptSlot = gptSlot || this.gpt.slot;\n\t\t\tgptSlot.addService(googletag.pubads());\n\t\t\tif (gpt.companions && this.companion !== false) {\n\t\t\t\tgptSlot.addService(googletag.companionAds());\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t},\n\n\t/**\n\t* Sets the GPT collapse empty mode for a given slot\n\t* values can be 'after', 'before', 'never'\n\t* after as in after ads have rendered is the default\n\t* true is synonymous with before\n\t* false is synonymous with never\n\t*/\n\tsetCollapseEmpty: function() {\n\t\twindow.googletag.cmd.push(() => {\n\t\t\tconst mode = this.collapseEmpty || config('collapseEmpty');\n\n\t\t\tif (mode === true || mode === 'after') {\n\t\t\t\tthis.gpt.slot.setCollapseEmptyDiv(true);\n\t\t\t} else if (mode === 'before') {\n\t\t\t\tthis.gpt.slot.setCollapseEmptyDiv(true, true);\n\t\t\t} else if (mode === false || mode === 'never') {\n\t\t\t\tthis.gpt.slot.setCollapseEmptyDiv(false);\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t},\n\tsubmitGptImpression : function() {\n\t\tif (this.outOfPage && this.gpt.iframe) {\n\t\t\tfunction getImpressionURL(iframe) {\n\t\t\t\tconst trackingUrlElement = iframe.contentWindow.document.querySelector('[data-o-ads-impression-url]');\n\t\t\t\tif (trackingUrlElement) {\n\t\t\t\t\treturn trackingUrlElement.dataset.oAdsImpressionUrl;\n\t\t\t\t} else {\n\t\t\t\t\tutils.log.warn('Impression URL not found, this is set via a creative template.');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst impressionURL = getImpressionURL(this.gpt.iframe);\n\t\t\t/* istanbul ignore else  */\n\t\t\tif(impressionURL){\n\t\t\t\tutils.attach(impressionURL, true,\n\t\t\t\t\t() => {\n\t\t\t\t\t\tutils.log.info('Impression Url requested');\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\tutils.log.info('CORS request to submit an impression failed');\n\t\t\t\t\t},\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tutils.log.warn('Attempting to call submitImpression on a non-oop slot');\n\t\t}\n\t},\n\t/**\n\t* Sets page url to be sent to google\n\t* prevents later url changes via javascript from breaking the ads\n\t*/\n\tsetURL: function(gptSlot) {\n\t\twindow.googletag.cmd.push(() => {\n\t\t\tgptSlot = gptSlot || this.gpt.slot;\n\t\t\tconst canonical = config('canonical');\n\t\t\tgptSlot.set('page_url', (canonical ? canonical : utils.getLocation()));\n\t\t});\n\t\treturn this;\n\t},\n\n\t/**\n\t* Adds key values from a given object to the slot targeting\n\t*/\n\tsetTargeting: function(gptSlot) {\n\t\twindow.googletag.cmd.push(() => {\n\t\t\tgptSlot = gptSlot || this.gpt.slot;\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (utils.isPlainObject(this.targeting)) {\n\t\t\t\tObject.keys(this.targeting).forEach(param => {\n\t\t\t\t\tgptSlot.setTargeting(param, this.targeting[param]);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t},\n};\n\n/*\n//####################\n// External methods ##\n//####################\n*/\n\n/**\n* The correlator is a random number added to ad calls.\n* It is used by the ad server to determine which impressions where served to the same page\n* Updating is used to tell the ad server to treat subsequent ad calls as being on a new page\n*/\nfunction updateCorrelator() {\n\tgoogletag.cmd.push(() => {\n\t\tgoogletag.pubads().updateCorrelator();\n\t});\n}\n\nfunction updatePageTargeting(override) {\n\tif (window.googletag) {\n\t\tconst params = utils.isPlainObject(override) ? override : targeting.get();\n\t\tsetPageTargeting(params);\n\t}\n\telse {\n\t\tutils.log.warn('Attempting to set page targeting before the GPT library has initialized');\n\t}\n}\n\nmodule.exports.init = init;\nmodule.exports.updateCorrelator = updateCorrelator;\nmodule.exports.updatePageTargeting = updatePageTargeting;\n\nmodule.exports.debug = () => {\n\tconst log = utils.log;\n\tconst conf = config('gpt');\n\tif(!conf){\n\t\treturn;\n\t}\n\n\tlog.start('gpt');\n\t\tlog.attributeTable(conf);\n\tlog.end();\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/ad-servers/gpt.js\n **/","\nconst config = require('./config');\nconst utils = require('./utils');\nlet parameters = {};\n\nfunction Targeting() {\n}\n\nTargeting.prototype.get = function() {\n\tconst methods = {\n\t\tsocialReferrer: this.getSocialReferrer,\n\t\tpageReferrer: this.getPageReferrer,\n\t\ttimestamp: this.timestamp,\n\t\tresponsive: this.responsive\n\t};\n\n\tutils.extend(parameters, this.getFromConfig(), this.searchTerm());\n\n\tfor (let item in methods) {\n\t/* istanbul ignore else  */\n\t\tif (methods.hasOwnProperty(item)) {\n\t\t\tutils.extend(parameters, methods[item]());\n\t\t}\n\t}\n\n\treturn parameters;\n};\n\nTargeting.prototype.add = function(obj) {\n\t/* istanbul ignore else  */\n\tif (utils.isPlainObject(obj)) {\n\t\tutils.extend(parameters, obj);\n\t}\n};\n\nTargeting.prototype.clear = function() {\n\tparameters = {};\n};\n\n/**\n* getFromConfig returns an object containing all the key values pairs specified in the dfp_targeting\n* config.\n*/\nTargeting.prototype.getFromConfig = function() {\n\tlet targeting = config('dfp_targeting') || {};\n\tif (!utils.isPlainObject(targeting)) {\n\t\t/* istanbul ignore else  */\n\t\tif (utils.isString(targeting)) {\n\t\t\ttargeting = utils.hash(targeting, ';', '=');\n\t\t}\n\t}\n\n\treturn targeting;\n};\n\nTargeting.prototype.getPageReferrer = function() {\n\tlet hostRegex;\n\tlet match = null;\n\tconst referrer = utils.getReferrer();\n\n\t//referrer is not article\n\tif (referrer !== '') {\n\t\thostRegex = /^.*?:\\/\\/.*?(\\/.*)$/;\n\n\t\t//remove hostname from results\n\t\tmatch = hostRegex.exec(referrer)[1];\n\t\t/* istanbul ignore else  */\n\t\tif (match !== null) {\n\t\t\tmatch.substring(1);\n\t\t}\n\t}\n\n\treturn match && {rf: match.substring(1)} || {};\n};\n\nTargeting.prototype.getSocialReferrer = function() {\n\tlet codedValue;\n\tlet refUrl;\n\tconst referrer = utils.getReferrer();\n\tconst refererRegexTemplate = '^http(|s)://(www.)*(SUBSTITUTION)/|_i_referer=http(|s)(:|%3A)(\\/|%2F){2}(www.)*(SUBSTITUTION)(\\/|%2F)';\n\tconst lookup = {\n\t\t't.co': 'twi',\n\t\t'facebook.com': 'fac',\n\t\t'linkedin.com': 'lin',\n\t\t'drudgereport.com': 'dru'\n\t};\n\n\t/* istanbul ignore else  */\n\tif (utils.isString(referrer)) {\n\t\tfor (refUrl in lookup) {\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (lookup.hasOwnProperty(refUrl)) {\n\t\t\t\tconst refererRegex = new RegExp(refererRegexTemplate.replace(/SUBSTITUTION/g, refUrl));\n\t\t\t\t/* istanbul ignore else  */\n\t\t\t\tif (refUrl !== undefined && refererRegex.test(referrer)) {\n\t\t\t\t\tcodedValue = lookup[refUrl];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn codedValue && { socref: codedValue } || {};\n};\n\nTargeting.prototype.searchTerm = function() {\n\tconst qs = utils.hash(utils.getQueryString(), /\\&|\\;/, '=');\n\tlet keywords = qs.q || qs.s || qs.query || qs.queryText || qs.searchField || undefined;\n\n\t/* istanbul ignore else\t*/\n\tif (keywords && keywords !== '') {\n\t\tkeywords = unescape(keywords).toLowerCase()\n\t\t.replace(/[';\\^\\+]/g, ' ')\n\t\t.replace(/\\s+/g, ' ')\n\t\t.trim();\n\t}\n\n\treturn {kw: keywords};\n};\n\nTargeting.prototype.timestamp = function() {\n\treturn { ts: utils.getTimestamp() };\n};\n\nTargeting.prototype.responsive = function() {\n\treturn config('responsive') ? { res: utils.responsive.getCurrent() } : {};\n};\n\nTargeting.prototype.debug = function () {\n\tconst log = utils.log;\n\tconst parameters = this.get();\n\t/* istanbul ignore else  */\n\tif (Object.keys(parameters).length !== 0) {\n\t\tlog.start('Targeting');\n\t\tlog.attributeTable(this.get());\n\t\tlog.end();\n\t}\n};\n\n\nmodule.exports = new Targeting();\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/targeting.js\n **/","const utils = require('../utils');\nconst config = require('../config');\nconst Delegate = require('ftdomdelegate');\nconst targeting = require('../targeting');\n\n/**\n * The Krux class defines an FT.ads.krux instance\n * @class\n * @constructor\n*/\nfunction Krux() {\n this.customAttributes = {}\n}\n\nKrux.prototype.add = function (target) {\n\tutils.extend(true, this.customAttributes, target);\n};\n\nKrux.prototype.init = function() {\n\tthis.config = config('krux');\n\tif (this.config && this.config.id) {\n\n\t\t/* istanbul ignore else  */\n\t\tif (!window.Krux) {\n\t\t\t((window.Krux = function() {\n\t\t\t\twindow.Krux.q.push(arguments);\n\t\t\t}).q = []\n\t\t\t);\n\t\t}\n\n\t\tthis.api = window.Krux;\n\t\t/* istanbul ignore else  */\n\t\tif(this.config.attributes) {\n\t\t\tthis.add(this.config.attributes)\n\t\t\tthis.setAttributes('page_attr_', this.customAttributes.page || {});\n\t\t\tthis.setAttributes('user_attr_', this.customAttributes.user || {});\n\t\t\tthis.setAttributes('', this.customAttributes.custom || {});\n\t\t}\n\n\t\tlet src;\n\t\tconst m = utils.getLocation().match(/\\bkxsrc=([^&]+)/);\n\t\tif (m) {\n\t\t\tsrc = decodeURIComponent(m[1]);\n\t\t}\n\n\t\tconst finalSrc = /^https?:\\/\\/([^\\/]+\\.)?krxd\\.net(:\\d{1,5})?\\//i.test(src) ? src : src === \"disable\" ? \"\" : `//cdn.krxd.net/controltag/${this.config.id}.js`;\n\n\t\tconst loadKruxScript = () => {\n\t\t\tutils.attach(finalSrc, true, () => {\n\t\t\t\tutils.broadcast('kruxScriptLoaded');\n\t\t\t});\n\t\t\tthis.events.init();\n\t\t};\n\t\tsetTimeout(() => {\n\t\t\tif('requestIdleCallback' in window) {\n\t\t\t\trequestIdleCallback(loadKruxScript);\n\t\t\t} else {\n\t\t\t\tloadKruxScript();\n\t\t\t}\n\t\t}, 1000);\n\n\t\ttargeting.add(this.targeting());\n\t} else {\n\t\t// can't initialize Krux because no Krux ID is configured, please add it as key id in krux config.\n\t}\n};\n\n/**\n* retrieve Krux values from localstorage or cookies in older browsers.\n* @name retrieve\n* @memberof Krux\n* @lends Krux\n*/\nKrux.prototype.retrieve = function(name) {\n\tlet value;\n\tname = `kx${name}`;\n\t/* istanbul ignore else  */\n\tif (window.localStorage && localStorage.getItem(name)) {\n\t\tvalue = localStorage.getItem(name);\n\t} else if (utils.cookie(name)) {\n\t\tvalue = utils.cookie(name);\n\t}\n\n\treturn value;\n};\n\n/**\n* retrieve Krux segments\n* @name segments\n* @memberof Krux\n* @lends Krux\n*/\nKrux.prototype.segments = function() {\n\treturn this.retrieve('segs');\n};\n\n/**\n* Retrieve all Krux values used in targeting and return them in an object\n* Also limit the number of segments going into the ad calls via krux.limit config\n* @name targeting\n* @memberof Krux\n* @lends Krux\n*/\nKrux.prototype.targeting = function() {\n\tlet segs = this.segments();\n\t/* istanbul ignore else  */\n\tif (segs) {\n\t\tsegs = segs.split(',');\n\t\t/* istanbul ignore else  */\n\t\tif (config('krux').limit) {\n\t\t\tsegs = segs.slice(0, config('krux').limit);\n\t\t}\n\t}\n\n\treturn {\n\t\t\"kuid\": this.retrieve('user'),\n\t\t\"ksg\": segs,\n\t\t\"khost\": encodeURIComponent(location.hostname),\n\t\t\"bht\": segs && segs.length > 0 ? 'true' : 'false'\n\t};\n};\n\n/**\n* An object holding methods used by krux event pixels\n* @name events\n* @memberof Krux\n* @lends Krux\n*/\nKrux.prototype.events = {\n\tdwell_time: function(config) {\n\t\t/* istanbul ignore else  */\n\t\tif (config) {\n\t\t\tconst fire = this.fire;\n\t\t\tconst interval = config.interval || 5;\n\t\t\tconst max = (config.total / interval) || 120;\n\t\t\tconst uid = config.id;\n\t\t\tutils.timers.create(interval, (function() {\n\t\t\t\treturn function() {\n\t\t\t\t\tfire(uid, {dwell_time: (this.interval * this.ticks) / 1000 });\n\t\t\t\t};\n\t\t\t}()), max, {reset: true});\n\t\t}\n\t},\n\tdelegated: function(config) {\n\t\t/* istanbul ignore else  */\n\t\tif (window.addEventListener) {\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (config) {\n\t\t\t\tconst fire = this.fire;\n\t\t\t\tconst eventScope = function(kEvnt) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tfire(config[kEvnt].id);\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\twindow.addEventListener('load', function() {\n\t\t\t\t\tconst delEvnt = new Delegate(document.body);\n\t\t\t\t\tfor (let kEvnt in config) {\n\t\t\t\t\t\t/* istanbul ignore else  */\n\t\t\t\t\t\tif (config.hasOwnProperty(kEvnt)) {\n\t\t\t\t\t\t\tdelEvnt.on(config[kEvnt].eType, config[kEvnt].selector, eventScope(kEvnt));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t}\n};\n\nKrux.prototype.events.fire = function(id, attrs) {\n\t/* istanbul ignore else  */\n\tif (id) {\n\t\tattrs = utils.isPlainObject(attrs) ? attrs : {};\n\t\treturn window.Krux('admEvent', id, attrs); // eslint-disable-line new-cap\n\t}\n\n\treturn false;\n};\n\nKrux.prototype.events.init = function() {\n\tlet event;\n    const configured = config('krux') && config('krux').events;\n\t/* istanbul ignore else  */\n\tif (utils.isPlainObject(configured)) {\n\t\tfor (event in configured) {\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (utils.isFunction(this[event])) {\n\t\t\t\tthis[event](configured[event]);\n\t\t\t} else if (utils.isFunction(configured[event].fn)) {\n\t\t\t\tconfigured[event].fn(configured[event]);\n\t\t\t}\n\t\t}\n\t}\n};\n\nKrux.prototype.setAttributes = function (prefix, attributes) {\n\t/* istanbul ignore else  */\n\tif(attributes){\n\t\tObject.keys(attributes).forEach(item => {\n\t\t\tthis.api('set', prefix + item, attributes[item]);\n\t\t});\n\t}\n};\n\nKrux.prototype.debug = function() {\n\tconst log = utils.log;\n\tif (!this.config) {\n\t\treturn;\n\t}\n\tlog.start('Krux©');\n\t\tlog('%c id:', 'font-weight: bold', this.config.id);\n\n\t\tif (this.config.limit) {\n\t\t\tlog('%c segment limit:', 'font-weight: bold', this.config.limit);\n\t\t}\n\n\t\tif (this.config.attributes) {\n\t\t\tconst attributes = this.config.attributes;\n\t\t\tlog.start('Attributes');\n\t\t\t\tlog.start('Page');\n\t\t\t\t\tlog.attributeTable(attributes.page);\n\t\t\t\tlog.end();\n\n\t\t\t\tlog.start('User');\n\t\t\t\t\tlog.attributeTable(attributes.user);\n\t\t\t\tlog.end();\n\n\t\t\t\tlog.start('Custom');\n\t\t\t\t\tlog.attributeTable(attributes.custom);\n\t\t\t\tlog.end();\n\t\t\tlog.end();\n\t\t}\n\t\tif (this.config.events) {\n\t\t\tconst events = this.config.events;\n\t\t\tlog.start('Events');\n\t\t\t\tif (events.dwell_time) {\n\t\t\t\t\tlog.start('Dwell Time');\n\t\t\t\t\t\tlog('%c interval:', 'font-weight: bold', events.dwell_time.interval);\n\t\t\t\t\t\tlog('%c id:', 'font-weight: bold', events.dwell_time.id);\n\t\t\t\t\t\tlog('%c total:', 'font-weight: bold', events.dwell_time.total);\n\t\t\t\t\tlog.end();\n\t\t\t\t}\n\t\t\t\tlog.start('Delegated');\n\t\t\t\t\tlog.table(events.delegated);\n\t\t\t\tlog.end();\n\t\t\tlog.end();\n\t\t}\n\n\t\tconst targeting = this.targeting();\n\t\tlog.start('Targeting');\n\t\t\tlog.attributeTable(targeting);\n\t\tlog.end();\n\n\t\tconst tags = Array.from(document.querySelectorAll(\".kxinvisible\"));\n\t\tif (tags.length) {\n\t\t\tlog.start(`${tags.length} Supertag© scripts`);\n\t\t\t\ttags.forEach(function(tag) {\n\t\t\t\t\tlog(tag.dataset.alias, tag.querySelector(\"script\"));\n\t\t\t\t});\n\t\t\tlog.end();\n\t\t}\n\tlog.end();\n};\n\nmodule.exports = new Krux();\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/data-providers/krux.js\n **/","module.exports = require(\"./lib/delegate.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ftdomdelegate (bower component)\n ** module id = 110\n ** module chunks = 0\n **/","/*jshint browser:true, node:true*/\n\n'use strict';\n\nmodule.exports = Delegate;\n\n/**\n * DOM event delegator\n *\n * The delegator will listen\n * for events that bubble up\n * to the root node.\n *\n * @constructor\n * @param {Node|string} [root] The root node or a selector string matching the root node\n */\nfunction Delegate(root) {\n\n  /**\n   * Maintain a map of listener\n   * lists, keyed by event name.\n   *\n   * @type Object\n   */\n  this.listenerMap = [{}, {}];\n  if (root) {\n    this.root(root);\n  }\n\n  /** @type function() */\n  this.handle = Delegate.prototype.handle.bind(this);\n}\n\n/**\n * Start listening for events\n * on the provided DOM element\n *\n * @param  {Node|string} [root] The root node or a selector string matching the root node\n * @returns {Delegate} This method is chainable\n */\nDelegate.prototype.root = function(root) {\n  var listenerMap = this.listenerMap;\n  var eventType;\n\n  // Remove master event listeners\n  if (this.rootElement) {\n    for (eventType in listenerMap[1]) {\n      if (listenerMap[1].hasOwnProperty(eventType)) {\n        this.rootElement.removeEventListener(eventType, this.handle, true);\n      }\n    }\n    for (eventType in listenerMap[0]) {\n      if (listenerMap[0].hasOwnProperty(eventType)) {\n        this.rootElement.removeEventListener(eventType, this.handle, false);\n      }\n    }\n  }\n\n  // If no root or root is not\n  // a dom node, then remove internal\n  // root reference and exit here\n  if (!root || !root.addEventListener) {\n    if (this.rootElement) {\n      delete this.rootElement;\n    }\n    return this;\n  }\n\n  /**\n   * The root node at which\n   * listeners are attached.\n   *\n   * @type Node\n   */\n  this.rootElement = root;\n\n  // Set up master event listeners\n  for (eventType in listenerMap[1]) {\n    if (listenerMap[1].hasOwnProperty(eventType)) {\n      this.rootElement.addEventListener(eventType, this.handle, true);\n    }\n  }\n  for (eventType in listenerMap[0]) {\n    if (listenerMap[0].hasOwnProperty(eventType)) {\n      this.rootElement.addEventListener(eventType, this.handle, false);\n    }\n  }\n\n  return this;\n};\n\n/**\n * @param {string} eventType\n * @returns boolean\n */\nDelegate.prototype.captureForType = function(eventType) {\n  return ['blur', 'error', 'focus', 'load', 'resize', 'scroll'].indexOf(eventType) !== -1;\n};\n\n/**\n * Attach a handler to one\n * event for all elements\n * that match the selector,\n * now or in the future\n *\n * The handler function receives\n * three arguments: the DOM event\n * object, the node that matched\n * the selector while the event\n * was bubbling and a reference\n * to itself. Within the handler,\n * 'this' is equal to the second\n * argument.\n *\n * The node that actually received\n * the event can be accessed via\n * 'event.target'.\n *\n * @param {string} eventType Listen for these events\n * @param {string|undefined} selector Only handle events on elements matching this selector, if undefined match root element\n * @param {function()} handler Handler function - event data passed here will be in event.data\n * @param {Object} [eventData] Data to pass in event.data\n * @returns {Delegate} This method is chainable\n */\nDelegate.prototype.on = function(eventType, selector, handler, useCapture) {\n  var root, listenerMap, matcher, matcherParam;\n\n  if (!eventType) {\n    throw new TypeError('Invalid event type: ' + eventType);\n  }\n\n  // handler can be passed as\n  // the second or third argument\n  if (typeof selector === 'function') {\n    useCapture = handler;\n    handler = selector;\n    selector = null;\n  }\n\n  // Fallback to sensible defaults\n  // if useCapture not set\n  if (useCapture === undefined) {\n    useCapture = this.captureForType(eventType);\n  }\n\n  if (typeof handler !== 'function') {\n    throw new TypeError('Handler must be a type of Function');\n  }\n\n  root = this.rootElement;\n  listenerMap = this.listenerMap[useCapture ? 1 : 0];\n\n  // Add master handler for type if not created yet\n  if (!listenerMap[eventType]) {\n    if (root) {\n      root.addEventListener(eventType, this.handle, useCapture);\n    }\n    listenerMap[eventType] = [];\n  }\n\n  if (!selector) {\n    matcherParam = null;\n\n    // COMPLEX - matchesRoot needs to have access to\n    // this.rootElement, so bind the function to this.\n    matcher = matchesRoot.bind(this);\n\n  // Compile a matcher for the given selector\n  } else if (/^[a-z]+$/i.test(selector)) {\n    matcherParam = selector;\n    matcher = matchesTag;\n  } else if (/^#[a-z0-9\\-_]+$/i.test(selector)) {\n    matcherParam = selector.slice(1);\n    matcher = matchesId;\n  } else {\n    matcherParam = selector;\n    matcher = matches;\n  }\n\n  // Add to the list of listeners\n  listenerMap[eventType].push({\n    selector: selector,\n    handler: handler,\n    matcher: matcher,\n    matcherParam: matcherParam\n  });\n\n  return this;\n};\n\n/**\n * Remove an event handler\n * for elements that match\n * the selector, forever\n *\n * @param {string} [eventType] Remove handlers for events matching this type, considering the other parameters\n * @param {string} [selector] If this parameter is omitted, only handlers which match the other two will be removed\n * @param {function()} [handler] If this parameter is omitted, only handlers which match the previous two will be removed\n * @returns {Delegate} This method is chainable\n */\nDelegate.prototype.off = function(eventType, selector, handler, useCapture) {\n  var i, listener, listenerMap, listenerList, singleEventType;\n\n  // Handler can be passed as\n  // the second or third argument\n  if (typeof selector === 'function') {\n    useCapture = handler;\n    handler = selector;\n    selector = null;\n  }\n\n  // If useCapture not set, remove\n  // all event listeners\n  if (useCapture === undefined) {\n    this.off(eventType, selector, handler, true);\n    this.off(eventType, selector, handler, false);\n    return this;\n  }\n\n  listenerMap = this.listenerMap[useCapture ? 1 : 0];\n  if (!eventType) {\n    for (singleEventType in listenerMap) {\n      if (listenerMap.hasOwnProperty(singleEventType)) {\n        this.off(singleEventType, selector, handler);\n      }\n    }\n\n    return this;\n  }\n\n  listenerList = listenerMap[eventType];\n  if (!listenerList || !listenerList.length) {\n    return this;\n  }\n\n  // Remove only parameter matches\n  // if specified\n  for (i = listenerList.length - 1; i >= 0; i--) {\n    listener = listenerList[i];\n\n    if ((!selector || selector === listener.selector) && (!handler || handler === listener.handler)) {\n      listenerList.splice(i, 1);\n    }\n  }\n\n  // All listeners removed\n  if (!listenerList.length) {\n    delete listenerMap[eventType];\n\n    // Remove the main handler\n    if (this.rootElement) {\n      this.rootElement.removeEventListener(eventType, this.handle, useCapture);\n    }\n  }\n\n  return this;\n};\n\n\n/**\n * Handle an arbitrary event.\n *\n * @param {Event} event\n */\nDelegate.prototype.handle = function(event) {\n  var i, l, type = event.type, root, phase, listener, returned, listenerList = [], target, /** @const */ EVENTIGNORE = 'ftLabsDelegateIgnore';\n\n  if (event[EVENTIGNORE] === true) {\n    return;\n  }\n\n  target = event.target;\n\n  // Hardcode value of Node.TEXT_NODE\n  // as not defined in IE8\n  if (target.nodeType === 3) {\n    target = target.parentNode;\n  }\n\n  root = this.rootElement;\n\n  phase = event.eventPhase || ( event.target !== event.currentTarget ? 3 : 2 );\n  \n  switch (phase) {\n    case 1: //Event.CAPTURING_PHASE:\n      listenerList = this.listenerMap[1][type];\n    break;\n    case 2: //Event.AT_TARGET:\n      if (this.listenerMap[0] && this.listenerMap[0][type]) listenerList = listenerList.concat(this.listenerMap[0][type]);\n      if (this.listenerMap[1] && this.listenerMap[1][type]) listenerList = listenerList.concat(this.listenerMap[1][type]);\n    break;\n    case 3: //Event.BUBBLING_PHASE:\n      listenerList = this.listenerMap[0][type];\n    break;\n  }\n\n  // Need to continuously check\n  // that the specific list is\n  // still populated in case one\n  // of the callbacks actually\n  // causes the list to be destroyed.\n  l = listenerList.length;\n  while (target && l) {\n    for (i = 0; i < l; i++) {\n      listener = listenerList[i];\n\n      // Bail from this loop if\n      // the length changed and\n      // no more listeners are\n      // defined between i and l.\n      if (!listener) {\n        break;\n      }\n\n      // Check for match and fire\n      // the event if there's one\n      //\n      // TODO:MCG:20120117: Need a way\n      // to check if event#stopImmediatePropagation\n      // was called. If so, break both loops.\n      if (listener.matcher.call(target, listener.matcherParam, target)) {\n        returned = this.fire(event, target, listener);\n      }\n\n      // Stop propagation to subsequent\n      // callbacks if the callback returned\n      // false\n      if (returned === false) {\n        event[EVENTIGNORE] = true;\n        event.preventDefault();\n        return;\n      }\n    }\n\n    // TODO:MCG:20120117: Need a way to\n    // check if event#stopPropagation\n    // was called. If so, break looping\n    // through the DOM. Stop if the\n    // delegation root has been reached\n    if (target === root) {\n      break;\n    }\n\n    l = listenerList.length;\n    target = target.parentElement;\n  }\n};\n\n/**\n * Fire a listener on a target.\n *\n * @param {Event} event\n * @param {Node} target\n * @param {Object} listener\n * @returns {boolean}\n */\nDelegate.prototype.fire = function(event, target, listener) {\n  return listener.handler.call(target, event, target);\n};\n\n/**\n * Check whether an element\n * matches a generic selector.\n *\n * @type function()\n * @param {string} selector A CSS selector\n */\nvar matches = (function(el) {\n  if (!el) return;\n  var p = el.prototype;\n  return (p.matches || p.matchesSelector || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector || p.oMatchesSelector);\n}(Element));\n\n/**\n * Check whether an element\n * matches a tag selector.\n *\n * Tags are NOT case-sensitive,\n * except in XML (and XML-based\n * languages such as XHTML).\n *\n * @param {string} tagName The tag name to test against\n * @param {Element} element The element to test with\n * @returns boolean\n */\nfunction matchesTag(tagName, element) {\n  return tagName.toLowerCase() === element.tagName.toLowerCase();\n}\n\n/**\n * Check whether an element\n * matches the root.\n *\n * @param {?String} selector In this case this is always passed through as null and not used\n * @param {Element} element The element to test with\n * @returns boolean\n */\nfunction matchesRoot(selector, element) {\n  /*jshint validthis:true*/\n  if (this.rootElement === window) return element === document;\n  return this.rootElement === element;\n}\n\n/**\n * Check whether the ID of\n * the element in 'this'\n * matches the given ID.\n *\n * IDs are case-sensitive.\n *\n * @param {string} id The ID to test against\n * @param {Element} element The element to test with\n * @returns boolean\n */\nfunction matchesId(id, element) {\n  return id === element.id;\n}\n\n/**\n * Short hand for off()\n * and root(), ie both\n * with no parameters\n *\n * @return void\n */\nDelegate.prototype.destroy = function() {\n  this.off();\n  this.root();\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/ftdomdelegate/lib/delegate.js\n **/","/**\n * @fileOverview\n * Third party library for use with google publisher tags.\n *\n * @author Robin Marr, robin.marr@com\n */\n/**\n * ads.rubicon provides rubicon real time pricing integration for the FT advertising library\n * @name targeting\n * @memberof ads\n*/\nconst utils = require('../utils');\nconst config = require('../config');\n\nfunction Rubicon() {\n\n}\n\nRubicon.prototype.init = function() {\n\tthis.queue = utils.queue(this.initValuation.bind(this));\n\tthis.config = config('rubicon') || {};\n\tif (this.config.id && this.config.site) {\n\t\tlet api = this.config.api || '//tap-cdn.rubiconproject.com/partner/scripts/rubicon/dorothy.js?pc=';\n\t\tapi += `${this.config.id}/${this.config.site}`;\n\t\tutils.attach(api, true, () => {\n\t\t\tthis.queue.process();\n\t\t}, () => {\n\t\t\tthis.queue.setProcessor(function(slot) {\n\t\t\t\tutils.log.error('%s rtp valuation call failed', slot.name);\n\t\t\t}).process();\n\t\t});\n\n\t\tutils.on('ready', event => {\n\t\t\tthis.queue.add(event.detail.slot);\n\t\t});\n\t}\n};\n\n/**\n * initialise rubicon valuation for a slot\n * @name initValuation\n * @memberof Rubicon\n * @lends Rubicon\n*/\nRubicon.prototype.initValuation = function(slot) {\n\tconst config = this.config;\n\tconst zone = (config.zones) ? config.zones[slot.name] : false;\n\tconst size = (config.formats) ? config.formats[slot.name] : false;\n\n\tif (zone && size) {\n\t\t// rubicon loves globals\n\t\twindow.oz_api = 'valuation';\n\t\twindow.oz_callback = this.valuationCallbackFactory.bind(null, slot, config.target);\n\t\twindow.oz_ad_server = 'gpt';\n\t\twindow.oz_async = true;\n\t\twindow.oz_cached_only = config.cached || true;\n\t\twindow.oz_site = `${config.id}/${config.site}`;\n\t\twindow.oz_ad_slot_size = size;\n\t\twindow.oz_zone = zone;\n\t\twindow.oz_insight();\n\t}\n};\n\n/**\n * Valuation request callback factory\n * This generates the callback that receives the data from a valution request, it keeps the slotname in a closure.\n * @name init\n * @memberof Rubicon\n * @lends Rubicon\n*/\nRubicon.prototype.valuationCallbackFactory = function(slot, target, results) {\n\tslot.container.setAttribute('data-o-ads-rtp', results.estimate.tier);\n\tif (target) {\n\t\tslot.targeting.rtp = results.estimate.tier;\n\t}\n};\n\nmodule.exports = new Rubicon();\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/data-providers/rubicon.js\n **/","const utils = require('../utils');\nconst config = require('../config');\nconst targeting = require('../targeting');\n\n\nfunction Admantx() {\n\n}\n\nAdmantx.prototype.init = function() {\n\tthis.config = config('admantx') || {};\n\tif (this.config.id) {\n\t\tthis.collections = this.config.collections || {admants: true};\n\t\tthis.api = this.config.url || 'http://usasync01.admantx.com/admantx/service?request=';\n\t\tthis.makeAPIRequest();\n\t}\n};\n\nAdmantx.prototype.makeAPIRequest = function() {\n\tconst requestData = {\n\t\t\"key\": this.config.id,\n\t\t\"method\":\"descriptor\",\n\t\t\"mode\":\"async\",\n\t\t\"decorator\":\"template.ft\",\n\t\t\"filter\":[\"default\"],\n\t\t\"type\":\"URL\",\n\t\t\"body\": encodeURIComponent(utils.getLocation())\n\t};\n\tconst url = this.api + encodeURIComponent(JSON.stringify(requestData));\n\tthis.xhr = utils.createCORSRequest(url, 'GET', this.resolve.bind(this), this.resolve.bind(this));\n};\n\nAdmantx.prototype.processCollection = function(collection, max) {\n\tconst names = [];\n\tconst j = utils.isNumeric(max) ? Math.min(max, collection.length) : collection.length;\n\tfor (let i=0; i < j; i++) {\n\t\tnames.push(collection[i].name || collection[i]);\n\t}\n\n\treturn names;\n};\n\nAdmantx.prototype.resolve = function(response){\n\tconst collections = this.collections;\n\tconst targetingObj = {};\n\tlet collection;\n\tlet shortName;\n\t/* istanbul ignore else  */\n\tif (utils.isString(response)) {\n\t\ttry {\n\t\t\tresponse = JSON.parse(response);\n\t\t} catch (e) {\n\t\t\t/* istanbul ignore next  */\n\t\t\t// if the response is not valid JSON;\n\t\t\tresponse = false;\n\t\t}\n\t}\n\n\t//parse required targetting data from the response\n\t/* istanbul ignore else  */\n\tif (response) {\n\t\tfor (collection in collections) {\n\t\t\t/* istanbul ignore else  */\n\t\t\tif (collections.hasOwnProperty(collection) && collections[collection] && response[collection]) {\n\t\t\t\tshortName = collection.substr(0, 2);\n\t\t\t\ttargetingObj[shortName] = this.processCollection(response[collection], collections[collection]);\n\t\t\t}\n\t\t}\n\n\t\ttargeting.add(targetingObj);\n\t}\n};\n\nAdmantx.prototype.debug = function() {\n\tconst log = utils.log;\n\n\tif (!this.config) {\n\t\t\treturn;\n\t}\n\n\tlog.start('Admantx');\n\t\tlog('%c id:', 'font-weight: bold', this.config.id);\n\t\tlog('%c api:', 'font-weight: bold', this.api);\n\n\t\tif (this.config.collections) {\n\t\t\tlog.start('Collections');\n\t\t\t\tlog('%c admants:', 'font-weight: bold' ,this.config.collections.admants);\n\t\t\t\tlog('%c categories:', 'font-weight: bold', this.config.collections.categories);\n\t\t\tlog.end();\n\t\t}\n\n\t\tif (this.xhr && this.xhr.response) {\n\t\t\tlog.start('Response');\n\t\t\t\tlog.start('Admants');\n\t\t\t\t\tlog.attributeTable(this.xhr.response.admants, ['value']);\n\t\t\t\tlog.end();\n\t\t\t\tlog.start('Categories');\n\t\t\t\t\tlog.attributeTable(this.xhr.response.categories, ['value']);\n\t\t\t\tlog.end();\n\t\t\tlog.end();\n\t\t}\n\tlog.end();\n};\n\nmodule.exports = new Admantx();\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-ads/src/js/data-providers/admantx.js\n **/","/*istanbul ignore next*/\nfunction debounce (func, wait, immediate) {\n\tlet timeout;\n\treturn function () {\n\t\tconst context = this;\n\t\tconst args = arguments;\n\t\tconst later = function () {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) func.apply(context, args);\n\t\t};\n\t\tconst callNow = immediate && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t\tif (callNow) {\n\t\t\tfunc.apply(context, args);\n\t\t}\n\t};\n};\n\nfunction getAppName () {\n\tconst element = document.querySelector('[data-next-app]');\n\tif (element) {\n\t\treturn element.getAttribute('data-next-app');\n\t}\n\treturn 'unknown';\n}\n\n\nfunction getLayoutName () {\n\tlet layout = 'default';\n\tconst abStateEl = document.querySelector('[data-ab-state]');\n\tif (window.location.search.indexOf('adsLayout') === 1) {\n\t\tconst regex = new RegExp('(adsLayout=([^&#]*)|&|#|$)');\n\t\tlayout = regex.exec(window.location.search.substring(1))[2];\n\t}\n\telse if (document.querySelector('[data-ads-layout]')) {\n\t\tlayout = document.querySelector('[data-ads-layout]').getAttribute('data-ads-layout');\n\t}\n\tif(abStateEl) {\n\t\tconst abState = abStateEl.getAttribute('data-ab-state');\n\t\tconst adsLayoutAB = abState && abState.match(/adsLazyLoadPosition:(control|50pc|100pc|onload)/);\n\t\tif(adsLayoutAB && adsLayoutAB.length > 1) {\n\t\t\tlayout = `lazyload-${adsLayoutAB[1]}`;\n\t\t}\n\t}\n\n\treturn layout;\n}\n\nfunction getMetaData (name) {\n\tconst meta = document.querySelector('meta[name=\"'+name+'\"]');\n\tif (meta) {\n\t\treturn meta.getAttribute('content');\n\t}\n\treturn false;\n}\n\nfunction keyValueString (obj) {\n\treturn Object.keys(obj).map(function (key) {\n\t\treturn key + '=' + obj[key];\n\t}).join(';');\n}\n\nfunction getReferrer () {\n\treturn document.referrer;\n}\n\nfunction isEmpty (htmlNode) {\n\treturn htmlNode.firstChild === null || htmlNode.firstChild.nodeType !== 1 || htmlNode.firstChild.style.display === 'none';\n}\n\nfunction log () {\n\tlet type;\n\tlet args;\n\tlet argsIndex;\n\tif ('log warn error info'.indexOf(arguments[0]) === -1) {\n\t\ttype = 'log';\n\t\targsIndex = 0;\n\t} else {\n\t\ttype = arguments[0];\n\t\targsIndex = 1;\n\t}\n\n\targs = [].slice.call(arguments, argsIndex);\n\n\tif (!log.isOn() || !window.console || !window.console[type]) {\n\t\treturn;\n\t}\n\n\twindow.console[type].apply(window.console, args);\n}\n\nlog.warn = function () {\n\tconst args = ['warn'].concat([].slice.call(arguments, 0));\n\tlog.apply(null, args);\n};\n\nlog.error = function () {\n\tconst args = ['error'].concat([].slice.call(arguments, 0));\n\tlog.apply(null, args);\n};\n\nlog.info = function () {\n\tconst args = ['info'].concat([].slice.call(arguments, 0));\n\tlog.apply(null, args);\n};\n\nlog.start = function () {\n\tif(!log.isOn() || !window.console || !window.console.groupCollapsed){\n\t\treturn;\n\t}\n\n\twindow.console.groupCollapsed('next-ads-component');\n};\n\nlog.end = function () {\n\tif (!log.isOn() || !window.console || !window.console.groupEnd) {\n\t\treturn;\n\t}\n\n\twindow.console.groupEnd();\n};\n\nlog.isOn = function () {\n\treturn location.search.indexOf('DEBUG=ADS') > -1;\n};\n\nmodule.exports = {\n\tdebounce: debounce,\n\tgetAppName: getAppName,\n\tgetLayoutName: getLayoutName,\n\tgetMetaData: getMetaData,\n\tgetReferrer: getReferrer,\n\tkeyValueString: keyValueString,\n\tisEmpty: isEmpty,\n\tlog: log\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./ads/js/utils.js\n **/","const utils = require('./utils');\nconst sandbox = require('./sandbox');\nconst extend = require('o-ads').utils.extend;\nconst apiUrlRoot = 'https://ads-api.ft.com/v1/'\n\nfunction getLazyLoadConfig (flags) {\n\tswitch(flags.adsLazyLoadPosition) {\n\t\tcase 'onload':\n\t\t\treturn false;\n\t\tcase '50pc':\n\t\t\treturn { viewportMargin: '50% 0%' };\n\t\tcase '100pc':\n\t\t\treturn { viewportMargin: '100% 0%' };\n\t\tdefault:\n\t\t\treturn { viewportMargin: '0%' };\n\t}\n}\n\nmodule.exports = function (flags) {\n\tconst pageType = utils.getAppName();\n\tconst eidMatch = document.cookie.match(/EID=(\\d+)/);\n\n\t//Temporarily get EID from FT_U cookie until all ad systems stop using it\n\tconst userCookieMetadata = {\n\t\teid: eidMatch && eidMatch.length > 1 ? eidMatch[1] : null\n\t};\n\n\tconst targeting = extend({\n\t\tpt: pageType.toLowerCase().substr(0, 3),\n\t\tnlayout: utils.getLayoutName()\n\t}, userCookieMetadata);\n\n\n\tconst kruxConfig = (flags.get('krux')) && {\n\t\tid: 'KHUSeE3x',\n\t\tattributes: {\n\t\t\tuser: userCookieMetadata,\n\t\t\tpage: {}\n\t\t}\n\t};\n\n\tfunction getContextualTargeting (appName) {\n\t\tlet uuid;\n\t\tlet url;\n\t\tconst apiUrlRoot = 'https://ads-api.ft.com/v1/';\n\t\tif (appName === 'article') {\n\t\t\tuuid = document.querySelector('[data-content-id]').getAttribute('data-content-id');\n\n\t\t\tconst referrer = utils.getReferrer();\n\t\t\turl = `${apiUrlRoot}content/${uuid}`;\n\t\t\tif(referrer) {\n\t\t\t\turl += `?referrer=${encodeURIComponent(referrer.split(/[?#]/)[0])}`;\n\t\t\t}\n\t\t} else if (appName === 'stream-page') {\n\t\t\tuuid = document.querySelector('[data-concept-id]').getAttribute('data-concept-id');\n\t\t\turl = `${apiUrlRoot}concept/${uuid}`;\n\t\t}\n\n\t\treturn url;\n\t};\n\n\tfunction getZone () {\n\t\tlet zone = [ utils.getMetaData('dfp_site'), utils.getMetaData('dfp_zone') ].filter( a => a );\n\t\tif(!zone.length) {\n\t\t\tzone = ['unclassified'];\n\t\t}\n\t\treturn zone.join('/');\n\t}\n\n\treturn {\n\t\tgpt: {\n\t\t\tnetwork: '5887',\n\t\t\tsite: sandbox.isActive() ? 'sandbox.next.ft' :'ft.com',\n\t\t\tzone: getZone()\n\t\t},\n\t\tformats: {\n\t\t\tPaidPost: {\n\t\t\t\tsizes: 'fluid'\n\t\t\t}\n\t\t},\n\t\tkrux: kruxConfig,\n\t\tcollapseEmpty: 'before',\n\t\tdfp_targeting: utils.keyValueString(targeting),\n\t\tlazyLoad: getLazyLoadConfig(flags),\n\t\ttargetingApi: {\n\t\t\tuser: `${apiUrlRoot}user`,\n\t\t\tpage: getContextualTargeting(pageType),\n\t\t\tusePageZone: true\n\t\t}\n\t};\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./ads/js/oAdsConfig.js\n **/","function sandbox () {\n\treturn location.hash.indexOf('adsandbox') > -1;\n}\n\nmodule.exports.isActive = sandbox;\n\n\n\n/** WEBPACK FOOTER **\n ** ./ads/js/sandbox.js\n **/","/**\n* The Reporter instance adds a \"Report broken Ad\"\n* link to a container (Slot) and provides methods\n* to report the loaded advert to a given endpoint\n* @constructor\n*/\nfunction Reporter (slot) {\n\tthis.config = {\n\t\tendpoint: '/broken-ad-reporter/report/', // endpoint that handles POST report\n\t\tslackChannel: 'https://financialtimes.slack.com/messages/advertising-dev', // slack channel for reporting broken ads\n\t\tdefaultText: 'Report broken Ad', // default text on the link\n\t\tcssClass: 'advert__report-link' // link css class\n\t};\n\n\tthis.adData = {\n\t\tgpt: {\n\t\t\tcreativeId: slot.gpt.creativeId,\n\t\t\tlineItemId: slot.gpt.lineItemId,\n\t\t\tsize: slot.gpt.size,\n\t\t\tserviceName: slot.gpt.serviceName,\n\t\t\tunitName: slot.gpt.unitName\n\t\t},\n\t\ttargeting: slot.targeting\n\t};\n\tthis.container = slot.container; // store ref to container\n\tthis.link = this.addLinkToContainer(); // add link and store ref\n\tthis.onClickHandler = this.addEvent('click', this.onClick, this); // store ref to handler for use within promise\n\tthis.hasReported = false;\n}\n\n/**\n* Given an event type, a handler and a caller, will addEventListener on link\n* done in this way so we store a reference to the handler for later use (i.e removal)\n* @returns event handler\n*/\nReporter.prototype.addEvent = function (event, handler, caller) {\n\tlet _handler;\n\tthis.link.addEventListener(event, _handler = function (e) {\n\t\thandler.call(caller, e);\n\t});\n\treturn _handler;\n};\n\n/**\n* Given an event type and a ref to the handler function to remove, will removeEventListener on link\n*/\nReporter.prototype.removeEvent = function (event, handler) {\n\tthis.link.removeEventListener(event, handler);\n};\n\nReporter.prototype.destroy = function () {\n\tthis.removeEvent('click', this.onClickHandler);\n\tif(this.link) {\n\t\tthis.link.parentElement.removeChild(this.link);\n\t}\n}\n\n/**\n* Adds the link to the container\n* by default it simply links to the config.slack_channel\n* @returns link\n*/\nReporter.prototype.addLinkToContainer = function () {\n\tlet btn = document.createElement('button');\n\tbtn.classList.add(this.config.cssClass);\n\tbtn.innerHTML = this.config.defaultText;\n\t// attatch the link\n\tthis.container.appendChild(btn);\n\treturn this.container.lastChild;\n};\n\n\n/**\n* Changes the innerHTML of the link\n* @returns this\n*/\nReporter.prototype.updateLink = function (html) {\n\tthis.link.innerHTML = html;\n\treturn this;\n};\n\n/**\n* Click event handler for the link\n* will replace the default href behaviour (going to config.slack_channel)\n*/\nReporter.prototype.onClick = function (e) {\n\te.preventDefault();\n\tif(this.hasReported) {\n\t\twindow.open(this.config.slackChannel, '_blank');\n\t} else {\n\t\tthis.dispatch(this.adData);\n\t}\n\n};\n\n/**\n* Given data, POST to config.next_ads_reporter_url and handle response\n*/\nReporter.prototype.dispatch = function (data) {\n\t// remove the event listener, we dont want to trigger dispatch again\n\t// will revert to href link whether success or fail\n\tthis.hasReported = true;\n\n\tif (!this.adData) {\n\t\tthis.updateLink('Insufficient Ad data, try #slack');\n\t\treturn;\n\t}\n\n\tconst opts = {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tcredentials: 'include',\n\t\tbody: JSON.stringify(data)\n\t};\n\n\tfetch(this.config.endpoint, opts)\n\t\t.then(function (response) {\n\t\t\tif (response.status !== 200) {\n\t\t\t\tthrow Error(response.statusText || response.status);\n\t\t\t}\n\t\t\treturn response.text(); // read and pass on the response.text()\n\t\t})\n\t\t.then((response) => {\n\t\t\tthis.updateLink('&#10004; ' + response + ', follow up on #slack');\n\t\t})\n\t\t.catch((err) => {\n\t\t\tthis.updateLink('&#10008; Failed to report Ad, try #slack');\n\t\t\treturn console.error(`Failed to report Ad: ${err}`); //eslint-disable-line\n\t\t});\n};\n\nmodule.exports = Reporter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./ads/js/reporter.js\n **/","import { broadcast } from '../../utils'\n\nmodule.exports = (timingsObject, slotDetails) => {\n\tconst performance = window.performance || window.msPerformance || window.webkitPerformance || window.mozPerformance\n\tif (performance && performance.mark && timingsObject) {\n\t\tconst offsets = _calculateOffsets(performance, timingsObject)\n\t\tconst marks = _calculateMarks(performance, timingsObject)\n\n\t\tbroadcast('oTracking.event', {\n\t\t\tcategory: 'ads',\n\t\t\taction: 'first-load',\n\t\t\ttimings: { offsets, marks },\n\t\t\tcreative: {\n\t\t\t\tid: slotDetails.gpt.creativeId,\n\t\t\t\tserviceName: slotDetails.gpt.serviceName,\n\t\t\t\tsize: slotDetails.container.getAttribute('data-o-ads-loaded')\n\t\t\t}\n\n\t\t});\n\t}\n}\n\nconst _calculateOffsets = (performance, timings) => {\n\tconst offsets = {}\n\tObject.keys(timings).forEach((timingName) => {\n\t\toffsets[timingName] = {\n\t\t\tdomContentLoadedEventEnd: timings[timingName] - performance.timing['domContentLoadedEventEnd'],\n\t\t\tloadEventEnd: timings[timingName] - performance.timing['loadEventEnd'],\n\t\t\tdomInteractive: timings[timingName] - performance.timing['domInteractive']\n\t\t}\n\t})\n\treturn offsets\n}\n\nconst _calculateMarks = (performance, timings) => {\n\tconst marks = {}\n\tif (performance.getEntriesByName) {\n\t\tObject.keys(timings).forEach((timingName) => {\n\t\t\tperformance.getEntriesByName(timingName).forEach((mark) => {\n\t\t\t\tmarks[mark.name] = Math.round(mark.startTime)\n\t\t\t})\n\t\t})\n\t}\n\treturn marks\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./ads/js/metrics.js\n **/","const debounce = require('./utils').debounce;\n\nfunction Sticky (el, opts) {\n\tthis.el = el;\n\tthis.opts = opts || {};\n\tthis.sibling = (opts.sibling) ? document.querySelector(opts.sibling) : null;\n\tthis.stickUntil = (opts.stickUntil) ? document.querySelector(opts.stickUntil) : null;\n\tif (typeof el === 'undefined') return;\n\tthis.opts.stickAfter = this.el.getBoundingClientRect().top;\n}\n\nSticky.prototype.stick = function () {\n\tthis.el.style.position = 'fixed';\n\tthis.el.style.top = this.opts.topOffset || '0';\n\tif (this.sibling) {this.sibling.style.marginTop = this.el.offsetHeight + 'px';}\n};\n\nSticky.prototype.onScroll = function () {\n\tif((this.stickyUntilPoint > window.pageYOffset) && (window.pageYOffset > this.opts.stickAfter)) {\n\t\trequestAnimationFrame(this.stick.bind(this));\n\t} else if (this.stickyUntilPoint < window.pageYOffset) {\n\t\trequestAnimationFrame(this.unstick.bind(this));\n\t}\n\telse if (window.pageYOffset < this.opts.stickAfter) {\n\t\tthis.el.style.position = 'static';\n\t}\n};\n\nSticky.prototype.bindScroll = function () {\n\tthis.onScrollListener = debounce(this.onScroll).bind(this);\n\twindow.addEventListener('scroll', this.onScrollListener);\n};\n\nSticky.prototype.unstick = function () {\n\n\tthis.el.style.position = 'absolute';\n\tthis.el.style.top = (this.stickyUntilPoint - this.el.offsetHeight) + 'px';\n\t//this.sibling.style.marginTop = this.el.offsetHeight + 'px';\n};\n\nSticky.prototype.init = function () {\n\tif(!this.el || window.pageYOffset > 0) {\n\t\treturn;\n\t};\n\tthis.stickyUntilPoint = (this.stickUntil.offsetTop + this.stickUntil.offsetHeight - this.el.offsetHeight);\n\tthis.el.style.zIndex = '23';\n\tthis.bindScroll();\n};\n\nmodule.exports = Sticky;\n\n\n\n/** WEBPACK FOOTER **\n ** ./ads/js/sticky.js\n **/","module.exports = {\n\tinit: function (flags, appInfo) {\n\t\trequire('./ft').init(flags, appInfo);\n\t},\n\tlazyInit: function (flags) {\n\t\twindow.addEventListener('ftNextLoaded', function () {\n\t\t\trequire('./third-party/floodlight')(flags);\n\t\t\trequire('./third-party/chartbeat')(flags);\n\t\t\trequire('./third-party/mouseflow')(flags);\n\t\t\trequire('./third-party/sourcepoint')(flags);\n\t\t});\n\t},\n\tscrollDepthComponents: require('./ft/events/scroll-depth-components')\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/index.js\n **/","const oTracking = require('o-tracking');\nconst oGrid = require('o-grid');\nconst oViewport = require('o-viewport');\nconst nextEvents = require('./next-events');\n\nimport {broadcast} from '../../utils'\n\n\nfunction nodesToArray (nodelist) {\n\treturn [].slice.call(nodelist);\n}\n\nfunction getRootData (name) {\n\treturn document.documentElement.getAttribute(`data-${name}`);\n}\n\nconst oTrackingWrapper = {\n\tinit: function (flags, appInfo) {\n\n\t\tif (!flags || !flags.get('oTracking')) {\n\t\t\treturn;\n\t\t}\n\n\t\t// oTracking sometimes errors - this makes sure that if it does it won't bring the whole bootstrap process down with it\n\t\ttry {\n\t\t\tconst userData = {\n\t\t\t\tlayout: oGrid.getCurrentLayout(),\n\t\t\t\torientation: oViewport.getOrientation()\n\t\t\t};\n\n\t\t\tconst connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\n\n\t\t\tif (connection && connection.type) {\n\t\t\t\tuserData.connectionType = connection.type;\n\t\t\t}\n\n\t\t\tconst context = {\n\t\t\t\tproduct: 'next',\n\t\t\t\tapp: appInfo && appInfo.name,\n\t\t\t\tappVersion: appInfo && appInfo.version\n\t\t\t};\n\n\t\t\tconst contentId = getRootData('content-id');\n\t\t\tif (contentId) {\n\t\t\t\tcontext.rootContentId = contentId;\n\t\t\t}\n\n\t\t\tconst conceptId = getRootData('concept-id');\n\t\t\tif (conceptId) {\n\t\t\t\tcontext.rootConceptId = conceptId;\n\t\t\t\tcontext.rootTaxonomy = getRootData('taxonomy');\n\t\t\t}\n\n\t\t\tconst errorStatus = (/nextErrorStatus=(\\d{3})/.exec(window.location.search) || [])[1];\n\t\t\tconst pageViewConf = {context: {}};\n\n\t\t\tif (errorStatus) {\n\t\t\t\t// TODO after https://github.com/Financial-Times/o-tracking/issues/122#issuecomment-194970465\n\t\t\t\t// this should be redundant as context woudl propagate down to each event in its entirety\n\t\t\t\tcontext.url = pageViewConf.context.url = window.parent.location.toString();\n\t\t\t\tcontext.referrer = pageViewConf.context.referrer = window.parent.document.referrer;\n\t\t\t\tcontext.errorStatus = pageViewConf.context.errorStatus = errorStatus;\n\t\t\t}\n\n\t\t\tconst edition = document.querySelector('[data-next-edition]') ? document.querySelector('[data-next-edition]').getAttribute('data-next-edition') : null;\n\t\t\tcontext.edition = edition;\n\t\t\tconst segmentId = String(window.location.search).match(/[?&]segmentId=([^?&])/) || [];\n\t\t\tif (segmentId[1]) {\n\t\t\t\tcontext['marketing_segment_id'] = segmentId[1];\n\t\t\t}\n\t\t\tconst pageMeta = window.FT && window.FT.pageMeta;\n\t\t\tif (pageMeta && (pageMeta === Object(pageMeta))) {\n\t\t\t\tfor (let key in pageMeta) {\n\t\t\t\t\tif (pageMeta.hasOwnProperty(key)) {\n\t\t\t\t\t\tcontext[key] = pageMeta[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toTracking.init({\n\t\t\t\tserver: 'https://spoor-api.ft.com/ingest',\n\t\t\t\tcontext: context,\n\t\t\t\tuser: userData,\n\t\t\t\tuseSendBeacon: flags.get('sendBeacon')\n\t\t\t});\n\n\t\t\t// barriers\n\t\t\tlet barrierType = document.querySelector('[data-barrier]');\n\t\t\tlet productSelectorFlag = document.querySelector('[data-barrier-is-product-selector]');\n\n\t\t\tif (barrierType) {\n\t\t\t\tpageViewConf.context.barrier = true;\n\t\t\t\tpageViewConf.context.barrierType = barrierType.getAttribute('data-barrier');\n\t\t\t};\n\n\t\t\t// FIXME - should not fire on barriers, but needs to be around for a while data analytics fix their SQL\n\t\t\toTracking.page(pageViewConf.context);\n\n\t\t\tif (barrierType) {\n\n\t\t\t\tconst isProductSelector = (productSelectorFlag) ? productSelectorFlag.getAttribute('data-barrier-is-product-selector') === 'true' : false;\n\n\t\t\t\t// https://docs.google.com/document/d/18_yV2s813XCrBF7w6196FLhLJzWXK4hXT2sIpDZVvhQ/edit?ts=575e9368#\n\t\t\t\tconst opportunity = {\n\t\t\t\t\ttype: (isProductSelector) ? 'products' : 'barrier',\n\t\t\t\t\tsubtype: barrierType.getAttribute('data-barrier')\n\t\t\t\t}\n\n\t\t\t\tconst offers = document.querySelectorAll('[data-offer-id]');\n\t\t\t\tconst acquisitionContext = document.querySelectorAll('[data-acquisition-context]');\n\n\t\t\t\tbroadcast('oTracking.event', Object.assign({\n\t\t\t\t\tcategory: 'barrier',\n\t\t\t\t\taction: 'view',\n\t\t\t\t\topportunity: opportunity,\n\t\t\t\t\ttype: barrierType.getAttribute('data-barrier'),\n\t\t\t\t\tacquisitionContext: nodesToArray(acquisitionContext).map(e => e.getAttribute('data-acquisition-context')),\n\t\t\t\t\toffers: nodesToArray(offers).map(e => e.getAttribute('data-offer-id'))\n\t\t\t\t}, context))\n\t\t\t}\n\n\t\t} catch (err) {\n\t\t\tbroadcast('oErrors.log', {\n\t\t\t\terror: err,\n\t\t\t\tinfo: {\n\t\t\t\t\tmessage: 'Failed to init o-tracking'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tnextEvents.init();\n\t}\n};\n\nmodule.exports = oTrackingWrapper;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/index.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-tracking (bower component)\n ** module id = 122\n ** module chunks = 0\n **/","/*global require, module */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\nconst settings = require('./src/javascript/core/settings');\nconst user = require('./src/javascript/core/user');\nconst session = require('./src/javascript/core/session');\nconst send = require('./src/javascript/core/send');\n\n/**\n * The version of the tracking module.\n * @type {string}\n */\nconst version = '1.1.11';\n/**\n * The source of this event.\n * @type {string}\n */\nconst source = 'o-tracking';\n/**\n * The API key.\n * @type {string}\n */\nconst api_key = 'qUb9maKfKbtpRsdp0p2J7uWxRPGJEP';\n\n/**\n * @class Tracking\n */\nfunction Tracking() {\n\tthis.version = version;\n\tthis.source = source;\n\tthis.api_key = api_key;\n\n\t/**\n\t * The initialised state of the object.\n\t * @type {boolean}\n\t */\n\tthis.initialised = false;\n}\n\n/**\n * Turn on/off developer mode. (Can also be activated on init.)\n * @param {boolean} level - Turn on or off, defaults to false if omitted.\n * @return {undefined}\n */\nTracking.prototype.developer = function(level) {\n\tif (level) {\n\t\tsettings.set('developer', true);\n\t} else {\n\t\tsettings.destroy('developer', null);\n\t\tsettings.destroy('no_send', null);\n\t}\n};\n\n/**\n * Clean up the tracking module.\n * @return {undefined}\n */\nTracking.prototype.destroy = function() {\n\tthis.developer(false);\n\tthis.initialised = false;\n\n\tsettings.destroy('config');\n\tsettings.destroy('page_sent');\n};\n\n/**\n * Overload toString method to show the version.\n * @return {string} The module's version.\n */\nTracking.prototype.toString = function() {\n\treturn 'oTracking version ' + version;\n};\n\nTracking.prototype.page = require('./src/javascript/events/page-view');\n\nTracking.prototype.event = require('./src/javascript/events/custom');\n\nTracking.prototype.link = require('./src/javascript/events/link-click');\n\nTracking.prototype.utils = require('./src/javascript/utils');\n\n/**\n * Initialises the Tracking object.\n *\n * All options are optional, if a configuration option is missing, the module\n * will try to initialise using any configuration found in the DOM using the\n * script config tag.\n *\n * @example\n * <!-- DOM configuration settings -->\n * <script type='application/json' data-o-tracking-config>\n * page: {\n * \t product: 'desktop'\n * },\n * user: {\n *   user_id: '023ur9jfokwenvcklwnfiwhfoi324'\n * }\n * </script>\n *\n * @param {Object} config \t\t\t\t\t- See {@link Tracking} for the configuration options.\n * @param {boolean} config.developer        - Optional, if `true`, logs certain actions.\n * @param {boolean} config.noSend           - Optional, if `true`, won't send events.\n * @param {string} config.configId          - Optional\n * @param {string} config.session           - Optional\n *\n * @return {Tracking} - Returns the tracking object\n */\nTracking.prototype.init = function(config) {\n\tif (this.initialised) {\n\t\treturn this;\n\t}\n\n\tconst hasDeclarativeConfig = !!this._getDeclarativeConfigElement();\n\n\tif (!(hasDeclarativeConfig || config)) {\n\t\treturn this;\n\t}\n\n\tconfig = config || {};\n\tif (hasDeclarativeConfig) {\n\t\tconfig = this._getDeclarativeConfig(config);\n\t}\n\n\tsettings.set('config', config);\n\tsettings.set('version', this.version);\n\tsettings.set('source', this.source);\n\tsettings.set('api_key', this.api_key);\n\n\tsettings.set('page_sent', false);\n\n\t// Developer mode\n\tif (config.developer) {\n\t\tthis.developer(config.developer);\n\n\t\tif (config.noSend) {\n\t\t\tsettings.set('no_send', true);\n\t\t}\n\t}\n\n\t// User identifier\n\tuser.init(config.user ? config.user.user_id : null);\n\n\t// Session\n\tsession.init(config.session);\n\n\t// Initialize the sending queue.\n\tsend.init();\n\n\tthis.event.init();\n\tthis.page.init();\n\tthis.initialised = true;\n\treturn this;\n};\n\n/**\n * Checks if the <script type='application/json' data-o-tracking-config> element is in the DOM\n * @private\n * @return {HTMLElement} - Returns the <script> element if found\n */\nTracking.prototype._getDeclarativeConfigElement = function() {\n\treturn document.querySelector('script[data-o-tracking-config]');\n};\n\n/**\n * Initialises additional data using the <script type='application/json' data-o-tracking-config> element in the DOM.\n * @private\n * @param {Object} options - A partially, or fully filled options object.  If\n *                           an option is missing, this method will attempt to\n *                           initialise it from the DOM.\n * @return {Object} - The options modified to include the options gathered from the DOM\n */\nTracking.prototype._getDeclarativeConfig = function(options) {\n\tconst configEl = this._getDeclarativeConfigElement();\n\tlet declarativeConfigString;\n\tif (configEl) {\n\t\tdeclarativeConfigString = configEl.textContent || configEl.innerText || configEl.innerHTML;\n\t} else {\n\t\treturn false;\n\t}\n\n\tlet declarativeOptions;\n\n\ttry {\n\t\tdeclarativeOptions = JSON.parse(declarativeConfigString);\n\t} catch(e) {\n\t\tconst configError = new Error('Invalid JSON configuration syntax, check validity for o-tracking configuration: \"' + e.message + '\"');\n\t\tthis.utils.broadcast('oErrors', 'log', {\n\t\t\terror: configError.message,\n\t\t\tinfo: { module: 'o-tracking' }\n\t\t});\n\t\tthrow configError;\n\t}\n\n\tfor (const property in declarativeOptions) {\n\t\tif (declarativeOptions.hasOwnProperty(property)) {\n\t\t\toptions[property] = options[property] || declarativeOptions[property];\n\t\t}\n\t}\n\n\treturn options;\n};\n\nconst tracking = new Tracking();\n\nfunction initialise() {\n\ttracking.init();\n\tdocument.removeEventListener('o.DOMContentLoaded', initialise);\n}\n\n// Try and initialise on o.DOMContentLoaded. If it fails, defer to the\n// consumer of the library.\ndocument.addEventListener('o.DOMContentLoaded', initialise);\n\n/**\n * A constructed object, this module is a Singleton as we only want one\n * instance sending events. See {@link Tracking} for the publicly available\n * interface.\n * @type {Tracking}\n */\nmodule.exports = tracking;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/main.js\n **/","/*global module */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\nconst settings = {};\n\n/**\n * Very basic implementation of deep clone, and only supports simple POJO objects and\n * native arrays.\n * @param  {*} value Any value\n * @return {*}       Copy of value\n * @private\n */\nfunction clone(value) {\n\tif (value === undefined) {\n\t\treturn value;\n\t}\n\tswitch (Object.prototype.toString.call(value)) {\n\t\tcase '[object Object]':\n\t\t\treturn JSON.parse(JSON.stringify(value));\n\t\tcase '[object Array]':\n\t\t\treturn [].slice.call(value);\n\t\tdefault:\n\t\t\treturn value;\n\t}\n}\n\n/**\n * Saves a value. Stores a copy rather than a reference, to avoid mutations leaking.\n *\n * @param {string} key - The key to use to store the object\n * @param {*} value - The value\n * @return {undefined}\n */\nfunction setValue(key, value) {\n\tsettings[key] = clone(value);\n}\n\n/**\n * Retrieves a value from the settings object. Returns a copy rather than reference, to\n * avoid mutations leaking.\n *\n * @param {string} key - The key to get\n * @return {*} - The setting.\n */\nfunction getValue(key) {\n\treturn clone(settings[key]);\n}\n\n/**\n * Deletes a value\n *\n * @param  {string} key - The key to delete\n * @return {undefined}\n */\nfunction destroy(key) {\n\tdelete settings[key];\n}\n\nmodule.exports = {\n\t'set': setValue,\n\t'get': getValue,\n\t'destroy': destroy\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core/settings.js\n **/","/*global module, require */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\nlet userID;\nlet store;\nconst defaultUserConfig = {\n\tstorage: 'cookie',\n\tname: 'spoor-id',\n\tvalue: null,\n\tdomain: (document.URL.match(/^https?\\:\\/\\/([^\\/?#]+)(?:[\\/?#]|$)/i)[1].indexOf('ft.com') > -1 ? 'ft.com' : null)\n};\n\nconst utils = require('../utils');\nconst Store = require('./store');\n\n/**\n * migrate_across_domains\n * Clean up after forgetting to write cookies to the 'root' ft.com domain.\n * - Check local storage for the 'proper' value.\n * - If it exists, use it.\n * - If not, set current user id as the 'proper' value.\n * - If this value and the cookie match, then we've already fixed it.\n * - If not, drop the cookie and it will be reset it on the root domain.\n *\n * @param {Store} store - The storage instance used for storing the ID.\n * @param {String} user_id - The user ID to check against storage.\n * @return {String} - The real user ID.\n */\nfunction migrate_across_domains(store, user_id) {\n\tconst ls_name = 'o-tracking-proper-id';\n\tlet proper_id;\n\n\ttry {\n\t\t// This isn't consistent in at least Firefox, maybe more, localstorage seems secured at subdomian level.\n\t\tproper_id = utils.getValueFromCookie(ls_name+'=([^;]+)');\n\n\t\tif (!proper_id) {\n\t\t\tconst d = new Date();\n\t\t\td.setTime(d.getTime() + (10 * 365 * 24 * 60 * 60 * 1000));\n\t\t\tconst expires = 'expires=' + d.toGMTString() + ';';\n\n\t\t\twindow.document.cookie = ls_name + '=' + utils.encode(user_id) + ';' + expires + 'path=/;domain=.' + defaultUserConfig.domain + ';';\n\t\t\tproper_id = user_id;\n\t\t}\n\t} catch (error) {\n\t\tutils.broadcast('oErrors', 'log', {\n\t\t\terror: error.message,\n\t\t\tinfo: { module: 'o-tracking' }\n\t\t});\n\t\tproper_id = user_id;\n\t}\n\n\t// Expire the cookie on the (sub)domain\n\twindow.document.cookie = 'spoor-id=0;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;';\n\t// Re-set the cookie on the  root domain\n\tstore.write(proper_id);\n\n\treturn proper_id;\n}\n\n/**\n * Init\n *\n * @param {String|Object} value The value of a userID to use or configuration object.\n * @return {String} - The user ID.\n */\nfunction init(value) {\n\tconst config = utils.merge(defaultUserConfig, { value: value });\n\n\t// config.name is important here, means the user has specifically asked for a cookie name.\n\tif (config.storage === 'cookie' && config.name) {\n\t\tconfig.nameOverride = config.name;\n\t}\n\n\tstore = new Store(config.name, config);\n\n\tuserID = store.read();\n\n\tif (userID) {\n\t\tuserID = migrate_across_domains(store, userID);\n\t}\n\n\tif (!userID) {\n\t\tuserID = config.value;\n\t}\n\n\tif (!userID) {\n\t\tuserID = utils.guid();\n\t}\n\n\tstore.write(userID); // Refreshes the cookie...\n\n\treturn userID;\n}\n\nfunction destroy() {\n\tstore.destroy();\n}\n\nmodule.exports = {\n\tinit: init,\n\tuserID: function () { return userID; },\n\tdestroy: destroy\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core/user.js\n **/","/*global module, require, window */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\n/**\n * Shared 'internal' scope.\n * @private\n */\nconst settings = require('./core/settings');\n\n/**\n * CUID Generator\n */\nconst cuid = require('../libs/browser-cuid');\n\n/**\n * Record of callbacks to call when a page is tracked.\n */\nconst page_callbacks = [];\n\n/**\n * Log messages to the browser console. Requires 'log' to be set on init.\n *\n * @param {*} List of objects to log\n * @return {undefined}\n */\nfunction log() {\n\tif (settings.get('developer') && window.console) {\n\t\tfor (let i=0;i<arguments.length;i++) {\n\t\t\twindow.console.log(arguments[i]);\n\t\t}\n\t}\n}\n\n/**\n * Tests if variable is a certain type. Defaults to check for undefined if no type specified.\n *\n * @param {*} variable - The variable to check.\n * @param {string} type - The type to test for. Defaults to undefined.\n *\n * @return {boolean} - The answer for if the variable is of type.\n */\nfunction is(variable, type) {\n\tif (!type) {\n\t\ttype = 'undefined';\n\t}\n\treturn typeof variable === type;\n}\n\n/**\n * Merge objects together. Will remove 'falsy' values.\n *\n * @param {Object} target - The original object to merge in to.\n * @param {Object} options - The object to merge into the target. If omitted, will merge target into a new empty Object.\n *\n * @return {Object} The merged object.\n */\nfunction merge(target, options) {\n\tif (!options) {\n\t\toptions = target;\n\t\ttarget = {};\n\t}\n\n\tlet name;\n\tlet src;\n\tlet copy;\n\n\t/* jshint -W089 */\n\t/* eslint guard-for-in: 0 */\n\tfor (name in options) {\n\t\tsrc = target[name];\n\t\tcopy = options[name];\n\n\t\t// Prevent never-ending loop\n\t\tif (target === copy) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Gets rid of missing values too\n\t\tif (typeof copy !== 'undefined' && copy !== null) {\n\t\t\ttarget[name] = (src === Object(src) && !is(src, 'function') ? merge(src, copy) : copy);\n\t\t}\n\t}\n\t/* jshint +W089 */\n\t/* jslint forin:true */\n\n\treturn target;\n}\n\n/**\n * URL encode a string.\n * @param {string} str - The string to be encoded.\n *\n * @return {string} The encoded string.\n */\nfunction encode(str) {\n\tif (window.encodeURIComponent) {\n\t\treturn window.encodeURIComponent(str);\n\t} else {\n\t\treturn window.escape(str);\n\t}\n}\n\n/**\n * URL decode a string.\n * @param {string} str - The string to be decoded.\n *\n * @return {string} The decoded string.\n */\nfunction decode(str) {\n\tif (window.decodeURIComponent) {\n\t\treturn window.decodeURIComponent(str);\n\t} else {\n\t\treturn window.unescape(str);\n\t}\n}\n\n/*\n * Utility to add event listeners.\n *\n * @param {Element} element\n * @param {string} event\n * @param {Function} listener\n */\nfunction addEvent(element, event, listener) {\n\tif (element.addEventListener) {\n\t\telement.addEventListener(event, listener, false);\n\t} else {\n\t\telement.attachEvent('on' + event, listener);\n\t}\n}\n\n/*\n * Utility for dispatching custom events from window\n *\n * @param {string} namespace\n * @param {string} eventType\n * @param {Object} detail\n */\nfunction broadcast(namespace, eventType, detail) {\n\tdetail = detail || {};\n\ttry {\n        window.dispatchEvent(new CustomEvent(namespace + '.' + eventType, {\n            detail: detail,\n            bubbles: true\n        }));\n    } catch (error) {}\n}\n\n/**\n * Listen for page tracking requests.\n *\n * @param {Function} cb - The callback to be called whenever a page is tracked.\n * @return {undefined}\n */\nfunction onPage(cb) {\n\tif (is(cb, 'function')) {\n\t\tpage_callbacks.push(cb);\n\t}\n}\n\n/**\n * Trigger the 'page' listeners.\n * @return {undefined}\n */\nfunction triggerPage() {\n\tfor (let i = 0; i < page_callbacks.length; i++) {\n\t\tpage_callbacks[i]();\n\t}\n}\n\n/**\n * Get a value from document.cookie matching the first match of the regexp you supply\n * @param {RegExp} matcher - The Regex to match with\n * @return {String} - The vale from the cookie\n */\nfunction getValueFromCookie(matcher) {\n\treturn document.cookie.match(matcher) && RegExp.$1 !== '' && RegExp.$1 !== 'null' ? RegExp.$1 : null;\n}\n\n/**\n * Get a value from the url, used for uuid or querystring parameters\n * @param {RegExp} matcher - The Regex to match with\n * @return {String} - The value from the URL\n */\nfunction getValueFromUrl(matcher) {\n\treturn document.location.href.match(matcher) && RegExp.$1 !== '' ? RegExp.$1 : null;\n}\n\n/**\n * Get a value from a specified JavaScript variable.\n * @param {String} str - The name of variable, in dot syntax.\n * @return {String} The value from the JS variable.\n */\nfunction getValueFromJsVariable(str) {\n\tif (typeof str !== 'string') {\n\t\treturn null;\n\n\t}\n\n\tlet i;\n\tconst namespaces = str.split('.');\n\tlet test = window;\n\n\tfor (i = 0; i < namespaces.length; i = i + 1) {\n\t\tif (typeof test[namespaces[i]] === 'undefined') {\n\t\t\treturn null;\n\t\t}\n\n\t\ttest = test[namespaces[i]];\n\t}\n\n\treturn test !== '' ? test : null;\n}\n\nmodule.exports = {\n\tlog: log,\n\tis: is,\n\tisUndefined: is,\n\tmerge: merge,\n\tencode: encode,\n\tdecode: decode,\n\tguid: cuid,\n\taddEvent: addEvent,\n\tbroadcast: broadcast,\n\tonPage: onPage,\n\ttriggerPage: triggerPage,\n\tgetValueFromCookie: getValueFromCookie,\n\tgetValueFromUrl: getValueFromUrl,\n\tgetValueFromJsVariable: getValueFromJsVariable\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/utils.js\n **/","/*eslint-disable*/\n/**\n * cuid.js\n * Collision-resistant UID generator for browsers and node.\n * Sequential for fast db lookups and recency sorting.\n * Safe for element IDs and server-side lookups.\n *\n * Extracted from CLCTR\n *\n * Copyright (c) Eric Elliott 2012\n * MIT License\n */\n\n/*global window, navigator, document, require, process, module */\n(function (app) {\n  'use strict';\n  var namespace = 'cuid',\n    c = 0,\n    blockSize = 4,\n    base = 36,\n    discreteValues = Math.pow(base, blockSize),\n\n    pad = function pad(num, size) {\n      var s = \"000000000\" + num;\n      return s.substr(s.length-size);\n    },\n\n    randomBlock = function randomBlock() {\n      return pad((Math.random() *\n            discreteValues << 0)\n            .toString(base), blockSize);\n    },\n\n    safeCounter = function () {\n      c = (c < discreteValues) ? c : 0;\n      c++; // this is not subliminal\n      return c - 1;\n    },\n\n    api = function cuid() {\n      // Starting with a lowercase letter makes\n      // it HTML element ID friendly.\n      var letter = 'c', // hard-coded allows for sequential access\n\n        // timestamp\n        // warning: this exposes the exact date and time\n        // that the uid was created.\n        timestamp = (new Date().getTime()).toString(base),\n\n        // Prevent same-machine collisions.\n        counter,\n\n        // A few chars to generate distinct ids for different\n        // clients (so different computers are far less\n        // likely to generate the same id)\n        fingerprint = api.fingerprint(),\n\n        // Grab some more chars from Math.random()\n        random = randomBlock() + randomBlock();\n\n        counter = pad(safeCounter().toString(base), blockSize);\n\n      return  (letter + timestamp + counter + fingerprint + random);\n    };\n\n  api.slug = function slug() {\n    var date = new Date().getTime().toString(36),\n      counter,\n      print = api.fingerprint().slice(0,1) +\n        api.fingerprint().slice(-1),\n      random = randomBlock().slice(-2);\n\n      counter = safeCounter().toString(36).slice(-4);\n\n    return date.slice(-2) +\n      counter + print + random;\n  };\n\n  api.globalCount = function globalCount() {\n    // We want to cache the results of this\n    var cache = (function calc() {\n        var i,\n          count = 0;\n\n        for (i in window) {\n          count++;\n        }\n\n        return count;\n      }());\n\n    api.globalCount = function () { return cache; };\n    return cache;\n  };\n\n  api.fingerprint = function browserPrint() {\n    return pad((navigator.mimeTypes.length +\n      navigator.userAgent.length).toString(36) +\n      api.globalCount().toString(36), 4);\n  };\n\n  // don't change anything from here down.\n  if (typeof module !== 'undefined') {\n    module.exports = api;\n  } else {\n    app[namespace] = api;\n  }\n\n}(this));\n/*eslint-enable */\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/libs/browser-cuid.js\n **/","/*global module, require, window */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\n/**\n * Class for storing data\n * Will choose the 'best' storage method available. Can also specify a type of storage.\n *\n * @class  Store\n * @param {string} name - The name of the store\n * @param {Object} config - Optional, config object for extra configuration\n */\nconst Store = function (name, config) {\n\n\t/**\n\t * Internal Storage key prefix.\n\t */\n\tconst keyPrefix = 'o-tracking';\n\n\t/**\n\t * Temporary var containing data from a previously saved store.\n\t * @property loadStore\n\t */\n\tlet loadStore;\n\tconst utils = require('../utils');\n\n\tif (utils.isUndefined(name)) {\n\t\tconst undefinedName = new Error('You must specify a name for the store.');\n\t\tutils.broadcast('oErrors', 'log', {\n\t\t\terror: undefinedName.message,\n\t\t\tinfo: { module: 'o-tracking' }\n\t\t});\n\t\tthrow undefinedName;\n\t}\n\n\tthis.config = utils.merge({ storage: 'best', expires: (10 * 365 * 24 * 60 * 60 * 1000) }, config);\n\n\t/**\n\t * Store data.\n\t */\n\tthis.data = null;\n\n\t/**\n\t * The key/name of this store.\n\t */\n\tthis.storageKey = (this.config.hasOwnProperty('nameOverride') ? this.config.nameOverride : [keyPrefix, name].join('_'));\n\n\t/**\n\t * The storage method to use. Determines best storage method.\n\t *\n\t * @type {Object}\n\t */\n\tthis.storage = (function (config, window) {\n\t\tconst test_key = keyPrefix + '_InternalTest';\n\n\t\t// If cookie has been manually specified, don't bother with local storage.\n\t\tif (config.storage !== 'cookie') {\n\t\t\ttry {\n\t\t\t\tif (window.localStorage) {\n\t\t\t\t\twindow.localStorage.setItem(test_key, 'TEST');\n\n\t\t\t\t\tif (window.localStorage.getItem(test_key) === 'TEST') {\n\t\t\t\t\t\twindow.localStorage.removeItem(test_key);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t_type: 'localStorage',\n\t\t\t\t\t\t\tload: function (name) { return window.localStorage.getItem.call(window.localStorage, name); },\n\t\t\t\t\t\t\tsave: function (name, value) { return window.localStorage.setItem.call(window.localStorage, name, value); },\n\t\t\t\t\t\t\tremove: function (name) { return window.localStorage.removeItem.call(window.localStorage, name); }\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\t\terror: error.message,\n\t\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction cookieLoad(name) {\n\t\t\tname = name + '=';\n\n\t\t\tconst cookies = window.document.cookie.split(';');\n\t\t\tlet i;\n\t\t\tlet cookie;\n\n\t\t\tfor (i = 0; i < cookies.length; i = i + 1) {\n\t\t\t\tcookie = cookies[i].replace(/^\\s+|\\s+$/g, '');\n\t\t\t\tif (cookie.indexOf(name) === 0) {\n\t\t\t\t\treturn utils.decode(cookie.substring(name.length, cookie.length));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction cookieSave(name, value, expiry) {\n\t\t\tlet d;\n\t\t\tlet expires = '';\n\t\t\tlet cookie;\n\n\t\t\tif (utils.is(expiry, 'number')) {\n\t\t\t\td = new Date();\n\t\t\t\td.setTime(d.getTime() + expiry);\n\t\t\t\texpires = 'expires=' + d.toGMTString() + ';';\n\t\t\t}\n\n\t\t\tcookie = utils.encode(name) + '=' + utils.encode(value) + ';' + expires + 'path=/;' + (config.domain ? 'domain=.' + config.domain + ';' : '');\n\t\t\twindow.document.cookie = cookie;\n\t\t}\n\n\t\tfunction cookieRemove(name) {\n\t\t\tcookieSave(name, '', -1);\n\t\t}\n\n\t\tcookieSave(test_key, 'TEST');\n\n\t\tif (cookieLoad(test_key) === 'TEST') {\n\t\t\tcookieRemove(test_key);\n\n\t\t\treturn {\n\t\t\t\t_type: 'cookie',\n\t\t\t\tload: cookieLoad,\n\t\t\t\tsave: cookieSave,\n\t\t\t\tremove: cookieRemove\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\t_type: 'none',\n\t\t\tload: function () {},\n\t\t\tsave: function () {},\n\t\t\tremove: function () {}\n\t\t};\n\t}(this.config, window));\n\n\t// Retrieve any previous store with the same name.\n\tloadStore = this.storage.load(this.storageKey);\n\tif (loadStore) {\n\t\ttry {\n\t\t\tthis.data = JSON.parse(loadStore);\n\t\t} catch (error) {\n\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\terror: error.message,\n\t\t\t\tmodule: 'o-tracking'\n\t\t\t});\n\t\t\tthis.data = loadStore;\n\t\t}\n\t}\n\n\treturn this;\n};\n\n/**\n * Get/Read the current data.\n *\n * @return {Object} Returns the data from the store.\n */\nStore.prototype.read = function () {\n\treturn this.data;\n};\n\n/**\n * Write the supplied data to the store.\n *\n * @param {String} data - The data to write.\n * @return {Store} - The instance of the store\n */\nStore.prototype.write = function (data) {\n\t// Set this.data, in-case we're on a file:// domain and can't set cookies.\n\tthis.data = data;\n\tthis.storage.save(this.storageKey, (typeof this.data === 'string' ? this.data : JSON.stringify(this.data)), this.config.expires);\n\n\treturn this;\n};\n\n/**\n * Delete the current data.\n * @return {Store} - The instance of the store\n */\nStore.prototype.destroy = function () {\n\tthis.data = null;\n\tthis.storage.remove(this.storageKey);\n\treturn this;\n};\n\nmodule.exports = Store;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core/store.js\n **/","/*global module, require */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\nlet store;\nconst defaultSessionConfig = {\n\tstorage: 'best',\n\tname: 'session',\n\texpires: (30 * 60 * 1000) // 30 minutes\n};\n\nconst utils = require('../utils');\nconst Store = require('./store');\n\n/**\n * Set the session in the store.\n *\n * @param {String} session - The session to be stored.\n * @return {undefined}\n */\nfunction setSession(session) {\n\tconst d = new Date();\n\td.setTime(d.getTime() + store.config.expires);\n\n\tstore.write({\n\t\tvalue: session,\n\t\texpiry: d.valueOf()\n\t});\n}\n\n/**\n * Get the session from the store. Expiry and gen of a new session are handled here.\n *\n * @return {Object} the current session\n */\nfunction getSession() {\n\tconst s = store.read();\n\tlet session;\n\tlet isNew = false;\n\n\tif (s) {\n\t\tconst d = (new Date()).valueOf();\n\t\tconst exp = parseInt(s.expiry);\n\n\t\t// If current session is active.\n\t\tif (exp >= d) {\n\t\t\tsession = s.value;\n\t\t}\n\t}\n\n\t// No active session, gen a new one.\n\tif (!session) {\n\t\tsession = utils.guid();\n\t\tisNew = true;\n\t}\n\n\t// Refreshes the cookie...\n\tsetSession(session);\n\n\treturn {\n\t\tid: session,\n\t\tisNew: isNew\n\t};\n}\n\n/**\n * Init\n *\n * @param {String|Object} config The name used to store the session or configuration object.\n * @return {Session} - The session\n */\nfunction init(config) {\n\tif (utils.is(config, 'string')) {\n\t\tconfig = { name: config };\n\t}\n\n\tif (utils.isUndefined(config)) {\n\t\tconfig = {};\n\t}\n\n\tconst c = utils.merge(defaultSessionConfig, config);\n\n\t// config.name is important here, means the user has specifically asked for a cookie name.\n\tif (c.storage === 'cookie' && config.name) {\n\t\tc.nameOverride = c.name;\n\t}\n\n\tstore = new Store(c.name, c);\n\n\treturn getSession();\n}\n\nmodule.exports = {\n\tinit: init,\n\tsession: getSession\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core/session.js\n **/","/*global module, require, window */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\nconst settings = require('./settings');\nconst utils = require('../utils');\nconst Queue = require('./queue');\nconst transports = require('./transports');\n/**\n * Default collection server.\n */\nlet domain = 'http://test.spoor-api.ft.com';\n\n/**\n * Queue queue.\n *\n * @type {Queue}\n */\nlet queue;\n\n/**\n * Consistent check to see if we should use sendBeacon or not.\n *\n * @return {boolean} Should we use sendBeacon?\n */\nfunction should_use_sendBeacon() {\n\treturn (navigator.sendBeacon && Promise && (settings.get('config') || {}).useSendBeacon);\n}\n\n/**\n * Attempts to send a tracking request.\n *\n * @param {Object} request The request to be sent.\n * @param {Function} callback Callback to fire the next item in the queue.\n * @return {undefined}\n */\nfunction sendRequest(request, callback) {\n\tconst queueTime = request.queueTime;\n\tconst offlineLag = new Date().getTime() - queueTime;\n\tlet path;\n\tconst transport = should_use_sendBeacon() ? transports.get('sendBeacon')() :\n\t\t\t\t\t\t\t\t\t\twindow.XMLHttpRequest && 'withCredentials' in new window.XMLHttpRequest() ? transports.get('xhr')() :\n\t\t\t\t\t\t\t\t\t\ttransports.get('image')();\n\tconst user_callback = request.callback;\n\n\tconst core_system = settings.get('config') && settings.get('config').system || {};\n\tconst system = utils.merge(core_system, {\n\t\tapi_key: settings.get('api_key'), // String - API key - Make sure the request is from a valid client (idea nicked from Keen.io) useful if a page gets copied onto a Russian website and creates noise\n\t\tversion: settings.get('version'), // Version of the tracking client e.g. '1.2'\n\t\tsource: settings.get('source'), // Source of the tracking client e.g. 'o-tracking'\n\t});\n\n\trequest = utils.merge({ system: system }, request);\n\n\t// Only bothered about offlineLag if it's longer than a second, but less than 12 months. (Especially as Date can be dodgy)\n\tif (offlineLag > 1000 && offlineLag < (12 * 30 * 24 * 60 * 60 * 1000)) {\n\t\trequest.time = request.time || {};\n\t\trequest.time.offset = offlineLag;\n\t}\n\tdelete request.callback;\n\tdelete request.async;\n\tdelete request.type;\n\tdelete request.queueTime;\n\n\tutils.log('user_callback', user_callback);\n\tutils.log('PreSend', request);\n\n\tpath = JSON.stringify(request);\n\n\tutils.log('path', path);\n\n\ttransport.complete(function (error) {\n\t\tif (utils.is(user_callback, 'function')) {\n\t\t\tuser_callback.call(request);\n\t\t\tutils.log('calling user_callback');\n\t\t}\n\n\t\tif (error) {\n\t\t\t// Re-add to the queue if it failed.\n\t\t\t// Re-apply queueTime here\n\t\t\trequest.queueTime = queueTime;\n\t\t\tqueue.add(request).save();\n\n\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\terror: error.message,\n\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t});\n\t\t} else {\n\t\t\tcallback && callback();\n\t\t}\n\t});\n\n\t// Both developer and noSend flags have to be set to stop the request sending.\n\tif (!(settings.get('developer') && settings.get('no_send'))) {\n\t\ttransport.send(domain, path);\n\t}\n}\n\n/**\n * Adds a new request to the list of pending requests\n *\n * @param {Tracking} request The request to queue\n * @return {undefined}\n */\nfunction add(request) {\n\trequest.queueTime = (new Date()).getTime();\n\tif (should_use_sendBeacon()) {\n\t\tsendRequest(request);\n\t} else {\n\t\tqueue.add(request).save();\n\t}\n\tutils.log('AddedToQueue', queue);\n}\n\n/**\n * If there are any requests queued, attempts to send the next one\n * Otherwise, does nothing\n * @param {Function} callback - Optional callback\n * @return {undefined}\n */\nfunction run(callback) {\n\tif (utils.isUndefined(callback)) {\n\t\tcallback = function () {};\n\t}\n\n    // Investigate queue lengths bug\n    // https://jira.ft.com/browse/DTP-330\n    const all_events = queue.all();\n\n    if (all_events.length > 200) {\n        const counts = {};\n\n        all_events.forEach(function (event) {\n            const label = [event.category, event.action].join(':');\n\n            if (!counts.hasOwnProperty(label)) {\n                counts[label] = 0;\n            }\n\n            counts[label] += 1;\n        });\n\n        queue.replace([]);\n\n        queue.add({\n            category: 'o-tracking',\n            action: 'queue-bug',\n            context: {\n                url: document.url,\n                queue_length: all_events.length,\n                counts: counts,\n                storage: queue.storage.storage._type\n            }\n        });\n    }\n\n\tconst next = function () {\n\t\trun();\n\t\tcallback();\n\t};\n\tconst nextRequest = queue.shift();\n\n\t// Cancel if we've run out of requests.\n\tif (!nextRequest) {\n\t\treturn callback();\n\t}\n\n\t// Send this request, then try run again.\n\treturn sendRequest(nextRequest, next);\n}\n\n/**\n * Convenience function to add and run a request all in one go.\n *\n * @param {Object} request The request to queue and run.\n * @return {undefined}\n */\nfunction addAndRun(request) {\n\tadd(request);\n\trun();\n}\n\n/**\n * Init the queue and send any leftover events.\n * @return {undefined}\n */\nfunction init() {\n\tqueue = new Queue('requests');\n\n\tif (settings.get('config') && settings.get('config').server) {\n\t\tdomain = settings.get('config').server;\n\t}\n\n\t// If any tracking calls are made whilst offline, try sending them the next time the device comes online\n\tutils.addEvent(window, 'online', run);\n\n\t// On startup, try sending any requests queued from a previous session.\n\trun();\n\n\treturn queue;\n}\n\nmodule.exports = {\n\tinit: init,\n\tadd: add,\n\trun: run,\n\taddAndRun: addAndRun\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core/send.js\n **/","/*global module, require */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\nconst utils = require('../utils');\nconst Store = require('./store');\n\n/**\n * Class for handling a queue backed up by a store.\n * @class Queue\n *\n * @param {String} name - The name of the queue.\n * @return {Queue} - Returns the instance of the queue.\n */\nconst Queue = function (name) {\n\tif (utils.isUndefined(name)) {\n\t\tconst undefinedName = new Error('You must specify a name for the queue.');\n\t\tutils.broadcast('oErrors', 'log', {\n\t\t\terror: undefinedName.message,\n\t\t\tinfo: { module: 'o-tracking' }\n\t\t});\n\t\tthrow undefinedName;\n\t}\n\n\t/**\n\t * Queue data.\n\t * @type {Array}\n\t */\n\tthis.queue = [];\n\n\t/**\n\t * The storage method to use. Determines best storage method.\n\t * @type {Object}\n\t */\n\tthis.storage = new Store(name);\n\n\t// Retrieve any previous store with the same name.\n\tif (this.storage.read()) {\n\t\tthis.queue = this.storage.read();\n\t}\n\n\treturn this;\n};\n\n/**\n * Gets the contents of the store.\n *\n * @return {Array} The array of items.\n */\nQueue.prototype.all = function () {\n\tif (this.queue.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst items = [];\n\n\tfor (let i = 0; i < this.queue.length; i = i + 1) {\n\t\titems.push(this.queue[i].item);\n\t}\n\n\treturn items;\n};\n\n/**\n * Gets the first item in the store.\n *\n * @return {Object} Returns the item.\n */\nQueue.prototype.first = function () {\n\tif (this.queue.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn this.queue[0].item;\n};\n\n/**\n * Gets the last item in the store.\n *\n * @return {Object} Returns the item.\n */\nQueue.prototype.last = function () {\n\tif (this.queue.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn this.queue.slice(-1)[0].item;\n};\n\n/**\n * Add data to the store.\n *\n * @param {Object} item - An item or an array of items.\n *\n * @return {Queue} - Returns the instance of the queue.\n */\nQueue.prototype.add = function (item) {\n\t// I was trying to turn this whole add function into a little module, to stop doAdd function being created everytime, but couldn't work out how to get to 'this' from within the module.\n\n\tconst self = this;\n\tlet i;\n\n\tfunction doAdd(item) {\n\t\tself.queue.push({\n\t\t\tcreated_at: (new Date()).valueOf(),\n\t\t\titem: item\n\t\t});\n\t}\n\n\tif (utils.is(item, 'object') && item.constructor.toString().match(/array/i)) {\n\t\tfor (i = 0; i < item.length; i = i + 1) {\n\t\t\tdoAdd(item[i]);\n\t\t}\n\t} else {\n\t\tdoAdd(item);\n\t}\n\n\treturn self;\n};\n\n/**\n * Overwrite the store with something completely new.\n *\n * @param {Array} items The new array of data.\n *\n * @return {Queue} - Returns the instance of the queue.\n */\nQueue.prototype.replace = function (items) {\n\tif (utils.is(items, 'object') && items.constructor.toString().match(/array/i)) {\n\t\tthis.queue = [];\n\t\tthis.add(items).save();\n\n\t\treturn this;\n\t}\n\n\tconst invalidArg = new Error('Argument invalid, must be an array.');\n\tutils.broadcast('oErrors', 'log', {\n\t\terror: invalidArg.message,\n\t\tinfo: { module: 'o-tracking' }\n\t});\n\tthrow invalidArg;\n};\n\n/**\n * Pop the first item from the queue.\n *\n * @return {Object} The item.\n */\nQueue.prototype.shift = function () {\n\tif (this.queue.length === 0) {\n\t\treturn null;\n\t}\n\n\tconst item = this.queue.shift().item;\n\n\tthis.save();\n\n\treturn item;\n};\n\n/**\n * Save the current store to localStorage so that old requests can still be sent after a page refresh.\n *\n * @return {Queue} - Returns the instance of the queue.\n */\nQueue.prototype.save = function () {\n\tthis.storage.write(this.queue);\n\n\treturn this;\n};\n\nmodule.exports = Queue;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core/queue.js\n **/","module.exports = {\n\txhr: require('./xhr'),\n\tsendBeacon: require('./send-beacon'),\n\timage: require('./image'),\n\tget: function (name) {\n\t\treturn this.mock || this[name];\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core/transports/index.js\n **/","module.exports = function () {\n\tconst xhr = new window.XMLHttpRequest();\n\n\treturn {\n\t\tsend: function (url, data) {\n\t\t\txhr.open('POST', url, true);\n\t\t\txhr.withCredentials = true;\n\t\t\txhr.setRequestHeader('Content-type', 'application/json');\n\t\t\txhr.send(data);\n\t\t},\n\t\tcomplete: function (callback) {\n\t\t\txhr.onerror = function () {\n\t\t\t\tcallback(this);\n\t\t\t};\n\t\t\txhr.onload = function () {\n\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\n\t\t\t\t\tcallback();\n\t\t\t\t} else {\n\t\t\t\t\tcallback('Incorrect response: ' + xhr.status);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t};\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core/transports/xhr.js\n **/","module.exports = function () {\n    let resolver;\n    let rejecter;\n    const p = new Promise((resolve, reject) => {\n        resolver = resolve;\n        rejecter = reject;\n    });\n    return {\n        send: function (url, data) {\n            if (navigator.sendBeacon(url, data)) {\n                resolver();\n            } else {\n                rejecter(new Error('Failed to send beacon event: ' + data.toString()));\n            }\n\n        },\n        complete: function (callback) {\n            callback && p.then(callback, callback);\n        }\n    };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core/transports/send-beacon.js\n **/","const utils = require('../../utils');\n\nmodule.exports = function () {\n\tconst image = new Image(1,1);\n\n\treturn {\n\t\tsend: function (url, data) {\n\t\t\timage.src = url + '?data=' + utils.encode(data);\n\t\t},\n\t\tcomplete: function (callback) {\n\t\t\tif (image.addEventListener) {\n\t\t\t\timage.addEventListener('error', callback);\n\t\t\t\timage.addEventListener('load', () => callback());\n\t\t\t} else { // it's IE!\n\t\t\t\timage.attachEvent('onerror', callback);\n\t\t\t\timage.attachEvent('onload', () => callback());\n\t\t\t}\n\t\t}\n\t};\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core/transports/image.js\n **/","/*global module, require */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\nconst Core = require('../core');\nconst utils = require('../utils');\n\n/**\n * Default properties for page tracking requests.\n *\n * @return {Object} - The default properties for pages.\n */\nconst defaultPageConfig = function () {\n\treturn {\n\t\tcategory: 'page',\n\t\taction: 'view',\n\t\tcontext: {\n\t\t\turl: document.URL,\n\t\t\treferrer: document.referrer\n\t\t},\n\n\t\tasync: true // Send this event asyncronously - as sync doesn't work in FF, as it doesn't send cookies. https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#withCredentials\n\t};\n};\n\n/**\n * Make the page tracking request.\n *\n * @param {Object} config - Configuration object. If omitted, will use the defaults.\n * @param {Function} callback - Callback function. Called when request completed.\n * @return {undefined}\n */\nfunction page(config, callback) {\n\tconfig = utils.merge(defaultPageConfig(), {\n\t\tcontext: config\n\t});\n\n\t// New PageID for a new Page.\n\tCore.setRootID();\n\tCore.track(config, callback);\n\n\t// Alert internally that a new page has been tracked - for single page apps for example.\n\tutils.triggerPage();\n}\n\n/**\n * Listener for pages.\n *\n * @param {CustomEvent} e - The CustomEvent\n * @private\n * @return {undefined}\n */\nfunction listener(e) {\n\tpage(e.detail);\n}\n\n\n\nmodule.exports = page;\nmodule.exports.init = function () {\n\tutils.addEvent(window, 'oTracking.page', listener);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/events/page-view.js\n **/","/*global module, require */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\nconst Send = require('./core/send');\nconst User = require('./core/user');\nconst Session = require('./core/session');\n\n/**\n * Shared 'internal' scope.\n * @type {Object}\n */\nconst settings = require('./core/settings');\nconst utils = require('./utils');\n\n/**\n * Default properties for sending a tracking request.\n * @type {Object}\n * @return {Object} - The default settings for the component.\n */\nconst defaultConfig = function () {\n\treturn {\n\t\tasync: true,\n\t\tcallback: function () {},\n\t\tsystem: {},\n\t\tcontext: {},\n\t\tuser: {\n\t\t\tpassport_id: utils.getValueFromCookie(/USERID=([0-9]+):/) || utils.getValueFromCookie(/PID=([0-9]+)\\_/),\n\t\t\tft_session: utils.getValueFromCookie(/FTSession=([^;]+)/)\n\t\t}\n\t};\n};\n\n/**\n * Generate and store a new rootID.\n * @param {string} new_id - Optional rootID, if you want to use your own. Otherwise we'll create one for you.\n * @return {string|*} The rootID.\n */\nfunction setRootID(new_id) {\n\tsettings.set('root_id', requestID(new_id));\n\treturn settings.get('root_id');\n}\n\n/**\n * Get rootID.\n * @return {string|*} The rootID.\n */\nfunction getRootID() {\n\tlet root_id = settings.get('root_id');\n\n\tif (utils.isUndefined(root_id)) {\n\t\troot_id = setRootID();\n\t}\n\n\treturn root_id;\n}\n\n/**\n * Create a requestID (unique identifier) for the page impression.\n *\n * @param {string} request_id - Optional RequestID, if you want to use your own. Otherwise will create one for you.\n *\n * @return {string|*} The RequestID.\n */\nfunction requestID(request_id) {\n\tif (utils.isUndefined(request_id)) {\n\t\trequest_id = utils.guid();\n\t}\n\n\treturn request_id;\n}\n\n/**\n * Make a tracking request.\n *\n * @param {Object} config - Should be passed an object containing a format and the values for that format\n * @param {function} callback - Fired when the request has been made.\n *\n * @return {Object} request\n */\nfunction track(config, callback) {\n\tif (utils.isUndefined(callback)) {\n\t\tcallback = function () {};\n\t}\n\n\tconst coreContext = settings.get('config') && settings.get('config').context || {};\n\tconfig.context = utils.merge(coreContext, config.context);\n\n\tlet request = utils.merge(defaultConfig(), utils.merge(config, { callback: callback }));\n\n\tconst session = Session.session();\n\n\t/* Values here are kinda the mandatory ones, so we want to make sure they're possible. */\n\trequest = utils.merge({\n\t\tcontext: {\n\t\t\tid: requestID(request.id), // Keep an ID if it's been set elsewhere.\n\t\t\troot_id: getRootID()\n\t\t},\n\n\t\tuser: settings.get('config') ? settings.get('config').user : {},\n\n\t\tdevice: {\n\t\t\tspoor_session: session.id,\n\t\t\tspoor_session_is_new: session.isNew,\n\t\t\tspoor_id: User.userID()\n\t\t}\n\t}, request);\n\n\tutils.log('Core.Track', request);\n\t// Send it.\n\tSend.addAndRun(request);\n\n\treturn request;\n}\n\nmodule.exports = {\n\tsetRootID: setRootID,\n\tgetRootID: getRootID,\n\ttrack: track\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/core.js\n **/","/*global module, require */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\nconst Core = require('../core');\nconst utils = require('../utils');\n\n/**\n * Default properties for events.\n *\n * @type {Object}\n * @return {Object} - Default configuration for events\n */\nconst defaultEventConfig = function () {\n\treturn {\n\t\tcategory: 'event',\n\t\taction: 'generic',\n\t\tcontext: {}\n\t};\n};\n\n/**\n * Track an event.\n *\n * @param {Event} trackingEvent - The event, which could the following properties in its 'detail' key:\n *   [category] - The category, for example: video\n *   [action] - The action performed, for example: play\n *   [component_id] - Optional. The ID for the component instance.\n *\n * @param {Function} callback - Optional, Callback function. Called when request completed.\n * @return {undefined}\n */\nfunction event(trackingEvent, callback) {\n\tif (utils.is(trackingEvent.detail.category) || utils.is(trackingEvent.detail.action)) {\n\t\tconst noCategoryActionVals = 'Missing category or action values';\n\t\tutils.broadcast('oErrors', 'log', {\n\t\t\terror: noCategoryActionVals,\n\t\t\tinfo: { module: 'o-tracking' }\n\t\t});\n\t\tthrow noCategoryActionVals;\n\t}\n\n\tconst config = utils.merge(defaultEventConfig(), {\n\t\tcategory: trackingEvent.detail.category,\n\t\taction: trackingEvent.detail.action,\n\t\tcontext: trackingEvent.detail\n\t});\n\n\tdelete config.context.category;\n\tdelete config.context.action;\n\n\tconst origamiElement = getOrigamiEventTarget(trackingEvent);\n\tif (origamiElement) {\n\t\tconfig.context.component_name = origamiElement.getAttribute('data-o-component');\n\t\tconfig.context.component_id = config.context.component_id || getComponentId(origamiElement);\n\t} else {\n\t\tconfig.context.component_name = config.context.component_name;\n\t\tconfig.context.component_id = config.context.component_id;\n\t}\n\n\tCore.track(config, callback);\n}\n\n/**\n * Helper function that gets the target of an event if it's an Origami component\n * @param  {Event} event - The event triggered.\n * @return {HTMLElement|undefined} - Returns the HTML element if an Origami component, else undefined.\n */\nfunction getOrigamiEventTarget(event) {\n\t// IE backwards compatibility (get the actual target). If not IE, uses\n\t// `event.target`\n\tconst element = event.target || event.srcElement;\n\n\tif (element && element.getAttribute('data-o-component')) {\n\t\treturn element;\n\t} else {\n\t\treturn;\n\t}\n}\n\n/**\n * Helper function that generates a component id based on its xpath\n *\n * @param {HTMLElement} element - The HTML Element to gen an ID for.\n *\n * @return {string} hash\n */\nfunction getComponentId(element) {\n\tconst path = _getElementPath(element);\n\n\tif (typeof path === 'undefined') {\n\t\treturn;\n\t}\n\n\t// Select the source element (first item in the ordered sequence `path`)\n\tconst srcElement = path[0];\n\n\t// Because, you could have two identical elements in the DOM as siblings,\n\t// we need to determine the 'sibling index': the order they're sitting within a DOM node.\n\t// Although in reality this is unlikely to always be the same, it's just a\n\t// best guess - unless child elements are always appended to an element rather than added as the first child.\n\tconst siblingIndex = (function getSiblingIndex(element) {\n\t\tconst srcParent = element.parentElement;\n\t\tif (srcParent) {\n\t\t\tfor (let i = 0; i < srcParent.childNodes.length; i++) {\n\t\t\t\tif (srcParent.childNodes[i] === srcElement) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}(srcElement));\n\n\t// Generate a normalised string (normalising browser quirks) from the sequence of elements\n\tconst normalisedStringPath = path.reduceRight(function(builder, el) {\n\t\tif (!el.nodeName) {\n\t\t\treturn builder + ' - ' + el.constructor.name + '\\n';\n\t\t}\n\n\t\tconst nodeName = el.nodeName.toLowerCase();\n\n\t\t// In some browsers, document is prepended with a '#'\n\t\tif (nodeName.indexOf('#') === 0) {\n\t\t\treturn builder + '<' + nodeName + '>';\n\t\t}\n\n\t\t// Replace this stuff with stuff that makes each node unique - without including styling detail (as this may change depending on animation state etc, position)\n\t\treturn builder + '<' + nodeName +' id=\"' + (el.id || '') + '\">';\n\t}, '');\n\n\n\t// Append a sibling index to the string and use some simple, off the shelf string hashing algorithm.\n\treturn _generateHash(normalisedStringPath + '_siblingIndex=' + siblingIndex);\n}\n\n/**\n * Gets the xpath for an element\n *\n * @param  {HTMLElement} element - The element to get a path for.\n *\n * @private\n *\n * @return {array} The xpath\n */\nfunction _getElementPath(element) {\n\tconst path = [];\n\n\twhile (element) {\n\t\tpath.push(element);\n\t\telement = element.parentElement;\n\t}\n\n\treturn path;\n}\n\n/**\n * JS Implementation of MurmurHash2\n *\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/murmurhash-js\n * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>\n * @see http://sites.google.com/site/murmurhash/\n * Copyright (c) 2011 Gary Court\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n * @param {string} str  - The string to hash, ASCII only.\n *\n * @return {number} 32-bit positive integer hash\n *\n * @private\n */\nfunction _generateHash(str) {\n\tlet l = str.length;\n\tlet h = 1 ^ l;\n\tlet i = 0;\n\tlet k;\n\n\twhile (l >= 4) {\n\t\tk = ((str.charCodeAt(i) & 0xff)) |\n\t\t\t((str.charCodeAt(++i) & 0xff) << 8) |\n\t\t\t((str.charCodeAt(++i) & 0xff) << 16) |\n\t\t\t((str.charCodeAt(++i) & 0xff) << 24);\n\n\t\tk = (((k & 0xffff) * 0x5bd1e995) + ((((k >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n\t\tk ^= k >>> 24;\n\t\tk = (((k & 0xffff) * 0x5bd1e995) + ((((k >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n\n\t\th = (((h & 0xffff) * 0x5bd1e995) + ((((h >>> 16) * 0x5bd1e995) & 0xffff) << 16)) ^ k;\n\n\t\tl -= 4;\n\t\t++i;\n\t}\n\n\tswitch (l) {\n\t\tcase 3:\n\t\t\th ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\th ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\th ^= (str.charCodeAt(i) & 0xff);\n\t\t\th = (((h & 0xffff) * 0x5bd1e995) + ((((h >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n\t}\n\n\th ^= h >>> 13;\n\th = (((h & 0xffff) * 0x5bd1e995) + ((((h >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n\th ^= h >>> 15;\n\n\treturn h >>> 0;\n}\n\n\n\nmodule.exports = event;\nmodule.exports.init = function () {\n\tutils.addEvent(window, 'oTracking.event', event);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/events/custom.js\n **/","/*global module, require, window */\n/*eslint-disable*/\n'use strict';\n/*eslint-enable*/\n\nconst Queue = require('../core/queue');\nconst Core = require('../core');\nconst utils = require('../utils');\nlet internalQueue;\n\n/**\n * Default properties for events.\n *\n * @type {Object}\n * @return {Object} The default link configuration.\n */\nconst defaultLinkConfig = function () {\n\treturn {\n\t\tcategory: 'link',\n\t\taction: 'click',\n\t\tcontext: {}\n\t};\n};\n\nlet callback = function () {};\n\n/**\n * Check if a URL is going to the same site (internal)\n *\n * @param {string} url - The url to check.\n *\n * @return {boolean} - Result of internal url.\n * @private\n */\nfunction isInternal(url) {\n\treturn url.indexOf(window.document.location.hostname) > -1;\n}\n\n/**\n * Check if a URL is going to an external site.\n *\n * @param {string} url - The url to check.\n *\n * @return {boolean} - The result of external url.\n * @private\n */\nfunction isExternal(url) {\n\treturn !isInternal(url);\n}\n\n/**\n * Checks if a URL is pointing at a file.\n * NOTE: Don't want to maintain a list of file extensions, so try best guess.\n *\n * @param {string} url - The url to check.\n *\n * @return {boolean} - The result if a url is a file location.\n * @private\n */\nfunction isFile(url) {\n\tconst path = url.replace(/^\\w+:\\/\\//, '').replace(/(#|\\?).+/g, '').replace(/\\/$/, '');\n\n\t// It must have a slash to have a file path\n\tif (path.indexOf('/') === -1) {\n\t\treturn false;\n\t}\n\n\t// No extension\n\tif (!path.match(/\\.(\\w{2,4})$/)) {\n\t\treturn false;\n\t}\n\n\t// Obviously a web page.\n\tif (['html', 'htm', 'php'].indexOf(RegExp.$1) > -1) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n/**\n * Calculates the parents of a HTML element.\n *\n * @param {Element} element - The starting element.\n *\n * @return {array} The tree of parent elements.\n * @private\n */\nfunction parentTree(element) {\n\tif (!element) {\n\t\treturn [];\n\t}\n\n\tconst tree = [element];\n\n\tif (element.nodeName === 'BODY') {\n\t\treturn tree;\n\t}\n\n\treturn tree.concat(parentTree(element.parentElement));\n}\n\n/**\n * Create the identifier of the link. TODO: https://rally1.rallydev.com/#/16966478977d/detail/defect/17919485944\n *\n * @param {Element} link - The link element.\n *\n * @return {string} The ID for the link.\n * @private\n */\nfunction createLinkID(link) {\n\tconst parents = parentTree(link);\n\t/*\n\tlet name = link.href || link.text || link.name || link.id;\n\n\tname = name.replace(/^http:\\/\\/[\\w\\.\\:]+/, '') // Remove http://[something].\n\t\t.replace(/^\\//, '') // Remove slash at beginning\n\t\t.replace(/(\\?|#).*$/, '') // Remove query string and page anchor (#)\n\t\t.replace(/\\/$/, '') // Remove trailing slash\n\t\t.replace(/\\.[a-z]{3,4}$/, ''); // Remove final '.com' or similar\n\n\t// If it's an external URL\n\tif (name === '') {\n\t\tname = link.href.replace(/^http:\\/\\//, '').split('?')[0].replace(/\\/$/, '');\n\t}\n\n\t// Last 2 items of URL\n\tname = name.split('/').slice(-2).filter(function (obj) { return (obj); });\n\n\t// If uuid then take final value only\n\tif (name.slice(-1)[0].match(/[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}/)) {\n\t\tname = name.slice(-1);\n\t}\n\n\t// Remove slashes as final outcome is slash delimited\n\tname = (name.length > 1 ? name.slice(0, 2).join('-') : name[0]).toLowerCase();\n\t*/\n\treturn parents.map(function (p) {\n\t\treturn p.getAttribute('data-position') || p.getAttribute('data-trackable') || p.tagName.toLowerCase() + ((p.id ? '#' + p.id : '') || (p.className ? '.' + p.className.split(' ')[0] : ''));\n\t}).filter(function (e, i, arr) {\n\t\treturn arr.lastIndexOf(e) === i;\n\t}).reverse();\n\n}\n\n/**\n * Track the link.\n *\n * @param {Element} element - The element being tracked.\n * @param {Object} click_config - Supplementary config.\n *\n * @return {Object|boolean} - If synscronous, returns when the tracking event is sent, if async, returns true immediately.\n */\nfunction track(element, click_config) {\n\tif (utils.isUndefined(click_config)) {\n\t\tclick_config = {};\n\t}\n\n\tconst identifier = createLinkID(element);\n\n\tconst config = utils.merge(defaultLinkConfig(), {\n\t\tcategory: ['BUTTON', 'INPUT', 'SELECT'].indexOf(element.tagName) > -1 ? element.tagName.toLowerCase() : 'link',\n\t\tcontext: {\n\t\t\tlink: utils.merge({\n\t\t\t\tdom_path: identifier.join(' | '),\n\t\t\t\tdom_path_tokens: identifier,\n\t\t\t\tnode_name: element.tagName,\n\t\t\t\tsource_id: Core.getRootID(),\n\t\t\t\tdestination: element.href,\n\t\t\t\ttext: (['INPUT', 'SELECT'].indexOf(element.tagName) > -1 ? element.name : element.text).toString().trim(),\n\t\t\t\tis_internal: isInternal(element.href)\n\t\t\t}, click_config)\n\t\t}\n\t});\n\n\tif (isExternal(element.href) || isFile(element.href)) {\n\t\t// Send now\n\t\tconfig.async = false;\n\t\treturn Core.track(config, callback);\n\t}\n\n\tif (isInternal(element.href)) {\n\t\t// Queue and send on next page.\n\t\tinternalQueue.add(config).save();\n\t}\n\n\treturn true;\n}\n\n/**\n * Handle a click event.\n *\n * @param {Event} event - The event.\n *\n * @return {boolean} - Returns the result of the tracking request\n * @private\n */\nfunction clickEvent(event) {\n\treturn track(event.target);\n}\n\n/**\n * Set the callback called on every link tracking event.\n *\n * @param {Function} cb - The callback.\n * @return {undefined}\n */\nfunction onClick(cb) {\n\tcallback = cb;\n}\n\n/**\n * If there are any requests queued, attempts to send the next one\n * Otherwise, does nothing\n * @return {undefined}\n */\nfunction runQueue() {\n\tconst next = function () { runQueue(); callback(); };\n\tconst nextLink = internalQueue.shift();\n\tif (nextLink) {\n\t\tCore.track(nextLink, next);\n\t}\n}\n\n/**\n * Listener for links.\n *\n * @param {CustomEvent} e - The CustomEvent\n * @private\n * @return {undefined}\n */\nfunction listener(e) {\n\ttrack(e.detail);\n}\n\n/**\n * Setup and initialise link tracking.\n *\n * @param {Object}  config - Initial configuration\n * @param {Element} config.root - Optional. The root element to search for links. Defaults to window.document - useful if trying to track links from an iframe.\n * @param {string}  config.selector - Optional. The selector to use to search for links. Defaults to 'a'.\n * @param {string}  config.event - Optional. The event to listen on. Defaults to 'click'.\n * @param {array}   config.links - Optional. If you've already worked out the links to track, then this is used to pass them over. Must be an array with elements that accept events.\n *\n * @return {array} The links setup in this init.\n */\nfunction init(config) {\n\tlet links;\n\tlet i;\n\n\tinternalQueue = new Queue('links');\n\n\trunQueue();\n\n\t// Listen for page requests. If this is a single page app, we can send link requests now.\n\tutils.onPage(runQueue);\n\n\tif (utils.isUndefined(config)) {\n\t\tconfig = {};\n\t}\n\tconfig = utils.merge({\n\t\troot: window.document,\n\t\tselector: 'a',\n\t\tevent: 'click',\n\t\tlinks: null\n\t}, config);\n\n\tif (config.hasOwnProperty('callback')) {\n\t\tcallback = config.callback;\n\t}\n\n\tif (config.links && utils.is(config.links, 'object') && config.links.constructor.toString().match(/array/i)) {\n\t\tlinks = config.links;\n\n\t\tfor (i = 0; i < links.length; i = i + 1) {\n\t\t\tutils.addEvent(links[i], config.event, clickEvent);\n\t\t}\n\t} else {\n\t\tif (typeof config.root !== 'object' || typeof config.selector !== 'string') {\n\t\t\tconst configException = 'If supplying a config it must have a valid root element and a selector string';\n\t\t\tutils.broadcast('oErrors', 'log', {\n\t\t\t\terror: configException,\n\t\t\t\tinfo: { module: 'o-tracking' }\n\t\t\t});\n\t\t\tthrow configException;\n\t\t}\n\n\t\tutils.addEvent(config.root, config.event, function (event) {\n\t\t\tif (event.target.tagName === config.selector.toUpperCase()) {\n\t\t\t\tclickEvent.call(event.target, event);\n\t\t\t}\n\t\t});\n\t}\n\n\tutils.addEvent(window, 'oTracking.link', listener);\n}\n\nmodule.exports = {\n\tinit: init,\n\tonClick: onClick,\n\ttrack: track\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-tracking/src/javascript/events/link-click.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-grid (bower component)\n ** module id = 140\n ** module chunks = 0\n **/","/*global module*/\n\n/**\n * Detect IE 8 through injected conditional comments:\n * no UA detection, no need for conditional compilation or JS check\n * @return {Bool} true if the browser is IE 8\n */\nconst isIE8 = (function() {\n\tconst b = document.createElement('B');\n\tconst docElem = document.documentElement;\n\tlet isIE;\n\n\tb.innerHTML = '<!--[if IE 8]><b id=\"ie8test\"></b><![endif]-->';\n\tdocElem.appendChild(b);\n\tisIE = !!document.getElementById('ie8test');\n\tdocElem.removeChild(b);\n\treturn isIE;\n}());\n\n/**\n * Grab grid properties surfaced in html:after's content\n * @return {Object} layout names and gutter widths\n */\nfunction getGridProperties() {\n\t// Contained in a try/catch as it should not error if o-grid styles are not (deliberately or accidentally) loaded\n\t// e.g. o-tracking will always try to read this property, but the page is not obliged to use o-grid for layout\n\ttry {\n\t\tlet gridProperties = window.getComputedStyle(document.documentElement, ':after').getPropertyValue('content');\n\t\t// Firefox computes: \"{\\\"foo\\\": \\\"bar\\\"}\"\n\t\t// We want readable JSON: {\"foo\": \"bar\"}\n\t\tgridProperties = gridProperties.replace(/'/g, '').replace(/\\\\/g, '').replace(/^\"/, '').replace(/\"$/, '');\n\t\treturn JSON.parse(gridProperties);\n\t} catch (e) {\n\t\treturn {};\n\t}\n}\n\n/**\n * Grab the current layout\n * @return {String} Layout name\n */\nfunction getCurrentLayout() {\n\tif (isIE8) {\n\t\treturn 'L';\n\t}\n\n\treturn getGridProperties().layout;\n}\n\n/**\n * Grab the current space between columns\n * @return {String} Gutter width in pixels\n */\nfunction getCurrentGutter() {\n\tif (isIE8) {\n\t\treturn '20px';\n\t}\n\n\treturn getGridProperties().gutter;\n}\n\nexport default {\n\tgetCurrentLayout: getCurrentLayout,\n\tgetCurrentGutter: getCurrentGutter\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-grid/main.js\n **/","const Timing = require('./events/navigation-timing');\nconst Cta = require('./events/cta');\nconst Copy = require('./events/copy');\nconst Attention = require('./events/page-attention');\nconst Positional = require('./events/positional');\n\nconst NextEvents = function () {};\n\nNextEvents.prototype.init = function () {\n\n\t// Initialise any call-to-action tracking code\n\tthis.cta = new Cta();\n\tthis.cta.track(document.body);\n\n\t// text copy -> clipboard tracking\n\tthis.copy = new Copy(document.body);\n\tthis.copy.track();\n\tthis.attention = new Attention();\n\tthis.attention.init();\n\n\tthis.positional = new Positional();\n\tthis.positional.init(document);\n\n\t// Nav timing - https://developer.mozilla.org/en-US/docs/Navigation_timing\n\tnew Timing().track();\n};\n\nNextEvents.prototype.destroy = function () {\n\tthis.cta.destroy();\n};\n\nmodule.exports = new NextEvents();\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/next-events.js\n **/","const broadcast = require('../../../utils').broadcast;\n\n// ordered performance timing events that are fired\nconst timingEvents = [\n\t'navigationStart',\n\t'unloadEventStart',\n\t'unloadEventEnd',\n\t'redirectStart',\n\t'redirectEnd',\n\t'fetchStart',\n\t'domainLookupStart',\n\t'domainLookupEnd',\n\t'connectStart',\n\t'connectEnd',\n\t'secureConnectionStart',\n\t'requestStart',\n\t'responseStart',\n\t'responseEnd',\n\t'domLoading',\n\t'domInteractive',\n\t'domContentLoadedEventStart',\n\t'domContentLoadedEventEnd',\n\t'domComplete',\n\t'loadEventStart',\n\t'loadEventEnd'\n];\n\nconst getOffsets = performance => {\n\tconst timing = performance.timing;\n\treturn ['navigationStart', 'domLoading']\n\t\t.reduce((offsets, offsetEvent) => {\n\t\t\tconst offsetTime = timing[offsetEvent];\n\t\t\toffsets[offsetEvent] = timingEvents.slice(timingEvents.indexOf(offsetEvent) + 1)\n\t\t\t\t.reduce((events, event) => {\n\t\t\t\t\tconst eventTime = timing[event];\n\t\t\t\t\tif (eventTime) {\n\t\t\t\t\t\tevents[event] = eventTime - offsetTime;\n\t\t\t\t\t}\n\t\t\t\t\treturn events;\n\t\t\t\t}, {});\n\t\t\treturn offsets;\n\t\t}, {});\n};\n\nconst getMarks = performance =>\n\tperformance.getEntriesByType ?\n\t\tperformance.getEntriesByType('mark')\n\t\t\t.reduce((marks, mark) => {\n\t\t\t\tmarks[mark.name] = Math.round(mark.startTime);\n\t\t\t\treturn marks;\n\t\t\t}, {}) :\n\t{};\n\nconst getCustom = (window, performance) => {\n\tconst custom = {};\n\t// first paint metric, cribbed from https://github.com/addyosmani/timing.js/blob/master/timing.js\n\tconst chromeObj = window.chrome;\n\tif (chromeObj && chromeObj.loadTimes) {\n\t\tconst chromeLoadTimes = chromeObj.loadTimes();\n\t\tcustom.firstPaint = Math.round((chromeLoadTimes.firstPaintTime * 1000) - (chromeLoadTimes.startLoadTime * 1000));\n\t} else if (typeof performance.timing.msFirstPaint === 'number') {\n\t\tcustom.firstPaint = performance.timing.msFirstPaint - performance.timing.navigationStart;\n\t}\n\n\treturn custom;\n};\n\nconst NavigationTiming = function () { };\n\nNavigationTiming.prototype.track = function () {\n\twindow.addEventListener('load', () => {\n\t\tconst performance = window.performance || window.webkitPerformance || window.msPerformance || window.mozPerformance;\n\t\tif (!performance || !('timing' in performance) || !/spoor-id=0/.test(document.cookie)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tconst offsets = getOffsets(performance);\n\t\t\tconst marks = getMarks(performance);\n\t\t\tconst custom = getCustom(window, performance);\n\n\t\t\tbroadcast('oTracking.event', {\n\t\t\t\tcategory: 'page-load',\n\t\t\t\taction: 'timing',\n\t\t\t\ttimings: { offsets, marks, custom }\n\t\t\t});\n\t\t}, 0);\n\t});\n};\n\nmodule.exports = NavigationTiming;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/events/navigation-timing.js\n **/","const getDomPath = require('../utils/getDomPath');\nconst getDomPathString = require('../utils/getDomPathString');\nconst getHref = require('../utils/getHref');\nconst Delegate = require('ftdomdelegate');\n\nconst broadcast = require('../../../utils').broadcast;\n\nconst CTA = function () {\n\tthis.allowedElementsSelector = 'a, button, input[type=\"checkbox\"]';\n\tthis.delegate = new Delegate();\n};\n\n// Event delegate for all clicks on the document. Rebroadcasts them as\n// 'trackable' events if the approriate data attribute is found.\nCTA.prototype.track = function (root) {\n\tthis.delegate.root(root);\n\tthis.clickHandler = (function (e, element) {\n\t\tconst nodeName = element.nodeName.toLowerCase();\n\t\tconst isTrackable = element.hasAttribute('data-trackable');\n\n\t\tif (!isTrackable) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst ariaPressed = element.getAttribute('aria-pressed');\n\t\tconst href = getHref(element);\n\n\t\tlet meta = element.getAttribute('data-trackable-meta');\n\t\tmeta = meta ? JSON.parse(meta) : {};\n\n\t\tmeta.nodeName = nodeName;\n\t\tmeta.domPath = getDomPathString(element);\n\t\tmeta.textContent = element.textContent;\n\n\t\tif (href) {\n\t\t\tmeta.destination = getHref(href);\n\t\t}\n\n\t\t// Reflect ARIA state so people can track open/close actions\n\t\tmeta.aria = {\n\t\t\tpressed: ariaPressed === 'true',\n\t\t\texpanded: element.getAttribute('aria-expanded') === 'true',\n\t\t\trole: element.getAttribute('role')\n\t\t};\n\n\t\t// FIXME - DEPRECATED in favour of `meta.aria` remove this hack once\n\t\t// everyone's updated their markup and js '' is for backwards\n\t\t// compatibility with the oft used but mistaken\n\t\t// practice of using the existence of aria-pressed as the flag, rather\n\t\t// than its value\n\t\tmeta.domPressed = ariaPressed === 'true' || ariaPressed === '';\n\n\t\tmeta.domPathTokens = getDomPath(element, []).reverse();\n\t\tmeta.target = element.getAttribute('data-trackable');\n\t\tmeta.conceptId = element.getAttribute('data-concept-id');\n\t\tmeta.contentId = element.getAttribute('data-content-id');\n\n\t\tconst position = element.getAttribute('data-position');\n\t\tconst siblings = element.getAttribute('data-siblings');\n\t\tconst destination = element.getAttribute('href');\n\n\t\tif (position) {\n\t\t\tmeta.position = parseInt(position);\n\t\t}\n\n\t\tif (siblings) {\n\t\t\tmeta.siblings = parseInt(siblings);\n\t\t}\n\n\t\tif (destination) {\n\t\t\tmeta.destination = destination;\n\t\t}\n\n\t\tmeta.category = 'click';\n\t\tmeta.action = 'cta';\n\t\tmeta.referrer = document.referrer;\n\t\tmeta.url = document.location.href;\n\t\tbroadcast('oTracking.event', meta);\n\n\t}).bind(this);\n\n\t// Event capture avoids missing events that has been prevented from bubbling\n\tthis.delegate.on('click', this.allowedElementsSelector, this.clickHandler, true);\n};\n\n\nCTA.prototype.destroy = function () {\n\tthis.delegate.destroy();\n};\n\nmodule.exports = CTA;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/events/cta.js\n **/","/*\n\nGiven an element this will return the _trackable path_ by traversing the DOM\nancestors.\n\nAny ancestor with a `data-trackable` attribute will be added to the _path_.\n\nEg,\n\n\t<div data-trackable=\"foo\">\n\t\t<ul>\n\t\t\t<li data-trackable=\"item 1\">\n\t\t\t\t<button data-trackable=\"hello\">hello</button>\n\t\t\t<li data-trackable=\"item 2\" data-trackable-once> // handler removed after first interactiton\n\t\t\t\t..\n\t\t\t<li data-trackable=\"item 3\">\n\t\t\t\t<span></span>\n\t</div>\n\nSo, given the BUTTON element, `getDomPath` will return `['hello', 'item 1', 'foo']`.\n\nGiven SPAN `getDomPath` will return `['item 3 | foo']`.\n\n*/\nconst getDomPath = function (el, path, depth) {\n\n\tdepth = depth || 0;\n\n\tif (!el.parentNode) {\n\t\treturn path;\n\t}\n\n\t// Transponse the parent node where the target element is a text node\n\tif (path.length === 0 && (el.nodeType === Node.TEXT_NODE)) {\n\t\tel = el.parentNode;\n\t}\n\n\tconst trackable = el.getAttribute('data-trackable');\n\n\tif (trackable) {\n\t\tpath.push(trackable);\n\t}\n\n\tconst trackableOnce = el.hasAttribute('data-trackable-once');\n\n\t// Only track some elements once per page\n\tif (trackableOnce && depth === 0) {\n\t\tel.removeAttribute('data-trackable');\n\t}\n\n\t// Terminate the path traversal\n\tif (el.hasAttribute('data-trackable-terminate')) {\n\t\treturn path;\n\t}\n\n\treturn getDomPath(el.parentNode, path, depth + 1);\n};\n\nmodule.exports = getDomPath;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/utils/getDomPath.js\n **/","const getDomPath = require('./getDomPath');\n\nconst getDomPathString = function (element) {\n\treturn getDomPath(element, []).reverse().join(' | ');\n};\n\nmodule.exports = getDomPathString;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/utils/getDomPathString.js\n **/","const getHref = function (el, path) {\n\n\tif (!el.parentNode) {\n\t\treturn path;\n\t}\n\n\tconst href = el.getAttribute('href');\n\n\tif (href) {\n\t\tconst a = document.createElement('a');\n\t\ta.href = href;\n\t\treturn `${a.protocol}//${a.hostname}${a.pathname}`;\n\t}\n\n\treturn getHref(el.parentNode, path);\n};\n\nmodule.exports = getHref;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/utils/getHref.js\n **/","const broadcast = require('../../../utils').broadcast;\n\nconst Copy = function (root) {\n\tthis.root = root || document;\n};\n\nCopy.prototype.track = function () {\n\n\tthis.root.addEventListener('copy', function (e) {\n\n\t\tconst element = e.target;\n\t\tconst data = {\n\t\t\taction: 'copy',\n\t\t\tcategory: 'text',\n\t\t\tcontext: {\n\t\t\t\tnodeName: element.nodeName.toLowerCase(),\n\t\t\t\tproduct: 'next'\n\t\t\t}\n\t\t};\n\n\t\tif (window.getSelection) {\n\t\t\tconst selection = window.getSelection().toString();\n\t\t\tdata.context.characters = selection.length;\n\t\t\tdata.context.words = Math.ceil(selection.split(/\\b/).length / 2);\n\t\t\tif (selection.length > 100) {\n\t\t\t\tdata.selection = selection.substr(0, 47) + ' ... ' + selection.substr(-47);\n\t\t\t} else {\n\t\t\t\tdata.selection = selection;\n\t\t\t}\n\t\t}\n\t\tbroadcast('oTracking.event', data);\n\t});\n};\n\nmodule.exports = Copy;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/events/copy.js\n **/","const oViewport = require('o-viewport');\nconst broadcast = require('../../../utils').broadcast;\nconst ATTENTION_INTERVAL = 5000;\nconst ATTENTION_EVENTS = ['load', 'click', 'focus', 'scroll', 'mousemove', 'touchstart', 'touchend', 'touchcancel', 'touchleave'];\nconst UNATTENTION_EVENTS = ['blur'];\nconst eventToSend = ('onbeforeunload' in window) ? 'beforeunload' : 'unload';\n\nclass Attention {\n\tconstructor () {\n\t\tthis.totalAttentionTime = 0;\n\t\tthis.startAttentionTime;\n\t\tthis.endAttentionTime;\n\t}\n\n\tinit () {\n\n\t\t//Add events for all the other Attention events\n\t\tfor (let i = 0; i < ATTENTION_EVENTS.length; i++) {\n\t\t\twindow.addEventListener(ATTENTION_EVENTS[i], ev => this.startAttention(ev));\n\t\t}\n\n\t\tfor (let i = 0; i < UNATTENTION_EVENTS.length; i++) {\n\t\t\twindow.addEventListener(UNATTENTION_EVENTS[i], ev => this.endAttention(ev));\n\t\t}\n\n\t\toViewport.listenTo('visibility');\n\t\tdocument.body.addEventListener('oViewport.visibility', ev => this.handleVisibilityChange(ev), false);\n\n\t\tthis.addVideoEvents();\n\n\t\t// Add event to send data on unload\n\t\twindow.addEventListener(eventToSend, () => {\n\t\t\tthis.endAttention();\n\t\t\tbroadcast('oTracking.event', {\n\t\t\t\tcategory: 'page',\n\t\t\t\taction: 'interaction',\n\t\t\t\tcontext: {\n\t\t\t\t\tattention: {\n\t\t\t\t\t\ttotal: this.totalAttentionTime\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t}\n\n\tstartAttention () {\n\t\tclearTimeout(this.attentionTimeout);\n\t\tif(!this.startAttentionTime) {\n\t\t\tthis.startAttentionTime = (new Date()).getTime();\n\t\t}\n\t\tthis.attentionTimeout = setTimeout(() => this.endAttention(), ATTENTION_INTERVAL);\n\t}\n\n\tstartConstantAttention () {\n\t\tthis.constantAttentionInterval = setInterval(() => this.startAttention(), ATTENTION_INTERVAL);\n\t}\n\n\tendConstantAttention () {\n\t\tthis.endAttention();\n\t\tclearInterval(this.constantAttentionInterval);\n\t}\n\n\tendAttention () {\n\t\tif(this.startAttentionTime) {\n\t\t\tthis.endAttentionTime = (new Date()).getTime();\n\t\t\tthis.totalAttentionTime += Math.round((this.endAttentionTime - this.startAttentionTime)/1000);\n\t\t\tclearTimeout(this.attentionTimeout);\n\t\t\tthis.startAttentionTime = null;\n\t\t}\n\t}\n\n\taddVideoEvents () {\n\t\tthis.videoPlayers;\n\t\tif (window.FTVideo) {\n\t\t\tthis.videoPlayers = document.getElementsByClassName('BrightcoveExperience');\n\t\t\tfor (let i = 0; i < this.videoPlayers.length; i++) {\n\t\t\t\twindow.FTVideo.createPlayerAsync(this.videoPlayers[i].id, function (player) {\n\t\t\t\t\tplayer.on(player.MEDIA_PLAY_EVENT, ev => this.startConstantAttention(ev));\n\t\t\t\t\tplayer.on(player.MEDIA_STOP_EVENT, ev => this.endConstantAttention(ev));\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.videoPlayers = document.getElementsByTagName('video');\n\t\t\tfor (let i = 0; i < this.videoPlayers.length; i++) {\n\t\t\t\tthis.videoPlayers[i].addEventListener('playing', ev => this.startConstantAttention(ev));\n\t\t\t\tthis.videoPlayers[i].addEventListener('pause', ev => this.endConstantAttention(ev));\n\t\t\t\tthis.videoPlayers[i].addEventListener('ended', ev => this.endConstantAttention(ev));\n\t\t\t}\n\t\t}\n\t}\n\n\thandleVisibilityChange (ev) {\n\t\tif (ev.detail.hidden) {\n\t\t\tthis.endAttention();\n\t\t} else {\n\t\t\tthis.startAttention();\n\t\t}\n\t}\n\n}\n\nmodule.exports = Attention;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/events/page-attention.js\n **/","const Delegate = require('ftdomdelegate');\n\nconst $ = (q) => [].slice.call(q);\n\nclass Positional {\n\n\tconstructor () {\n\t\tthis.delegate = new Delegate();\n\t}\n\n\tinit (el) {\n\t\t$(el.querySelectorAll('[role=main] section'))\n\t\t\t.forEach((section) => {\n\t\t\t\t$(section.querySelectorAll('article'))\n\t\t\t\t\t.forEach((article, index, articles) => {\n\t\t\t\t\t\t$(article.querySelectorAll('a'))\n\t\t\t\t\t\t\t.forEach(link => {\n\t\t\t\t\t\t\t\tlink.setAttribute('data-position', index + 1);\n\t\t\t\t\t\t\t\tlink.setAttribute('data-siblings', articles.length);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t}\n\n\tdestroy () {\n\t\tthis.delegate.destroy();\n\t}\n}\n\nmodule.exports = Positional;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/events/positional.js\n **/","// Loads Google Floodlight\nmodule.exports = function (flags) {\n\n\tconst isAnonymous = !/FTSession/.test(document.cookie);\n\tconst spoorId = /spoor-id=([^;]+)/.exec(document.cookie);\n\tconst host = 'https://4235225.fls.doubleclick.net/activityi;src=4235225';\n\n\t// sign-up attributes\n\tconst c = document.querySelector(['data-signup-country']);\n\tconst t = document.querySelector(['data-signup-term']);\n\tconst o = document.querySelector(['data-signup-offer']);\n\n\tconst country = (c) ? c.getAttribute('data-signup-country') : undefined;\n\tconst term = (t) ? c.getAttribute('data-signup-term') : undefined;\n\tconst offer = (o) ? c.getAttribute('data-signup-offer') : undefined;\n\n\t// sign-up funnel flags\n\tconst isSignUpForm = /^\\/signup/.test(location.pathname);\n\tconst isSubscriptionConfirmation = /^\\/thank-you/.test(location.pathname);\n\tconst isTrialConfirmation = /(4998d861-8960-a8d1-3738-eae97bcd07a2|41218b9e-c8ae-c934-43ad-71b13fcb4465)/.test(offer);\n\n\tconst spoor = (spoorId) ? spoorId[1] : '';\n\n\tif (flags && (flags.get('floodlight') && isAnonymous && spoorId)) {\n\n\t\tconst i = new Image();\n\n\t\tif (isSignUpForm) {\n\t\t\ti.src = `${host};type=signu107;cat=ft-ne00;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=1`;\n\t\t} else if (isSubscriptionConfirmation) {\n\t\t\ti.src = `${host};type=trans658;cat=ft-ne0;qty=1;u5=${offer};u7=${country};u8=${term};u10=${spoor};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;`;\n\t\t} else if (isTrialConfirmation) {\n\t\t\ti.src = `${host};type=trans658;cat=ft-ne00;qty=1;u5=${offer};u7=${country};u8=${term};u10=${spoor};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;`;\n\t\t} else {\n\t\t\ti.src = `${host};type=homeo886;cat=ft-ne000;u10=${spoor};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=1;num=1`;\n\t\t}\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/third-party/floodlight.js\n **/","/*\nChartbeat (https://chartbeat.com) is a tracking service.\nOriginally for advertising, they've moved their suite towards editorial applications.\nIn this case we are only interested in the editorial; specifically the HUD (heads up display).\nEventually this will be replaced by FT's in-house \"lantern\" application, utilising our own data.\n*/\n\nimport {loadScript, getCookieValue} from '../../utils';\n\nconst enableChartbeat = () => {\n\twindow._sf_async_config = {\n\t\tuid: 14181,\n\t\tdomain: 'next.ft.com', // Leave this as next.ft.com, even after it changes to ft.com\n\t\tuseCanonical: true\n\t};\n\n\t// HACK: If the user is on the front page override the path so that it is different depending on the edition.\n\t// Use a path that looks like the old-style FT.com front pages so that they still sort of make sense.\n\tif (location.pathname === '/' && document.querySelector('[data-next-edition]')) {\n\t\twindow._sf_async_config.path = '/home/' + (document.querySelector('[data-next-edition]').getAttribute('data-next-edition') || '');\n\t}\n\tloadScript('//static.chartbeat.com/js/chartbeat.js');\n}\n\n// The chartbeat Heads-Up-Display (HUD) requires the chartbeat script to be loaded.\n// Editorial users who wish to use the HUD will need to toggle \"chartbeatHud\" on.\n// For non-HUD uses, load chartbeat for a random 20% of device IDs (i.e. users).\nmodule.exports = flags => {\n\tif (flags.get('chartbeatHud')) {\n\t\tenableChartbeat();\n\t}\n\telse if (flags.get('chartbeat')) {\n\t\tconst spoorId = getCookieValue('spoor-id');\n\t\tconst spoorNumber = spoorId.replace(/-/g, '');\n\t\tconst spoorNumberTrim = spoorNumber.substring(spoorNumber.length - 12, spoorNumber.length); // Don't overflow the int\n\t\tconst spoorNumberDec = parseInt(spoorNumberTrim, 16);\n\t\tif (spoorNumberDec % 100 < 20) { // 20%\n\t\t\tenableChartbeat();\n\t\t}\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/third-party/chartbeat.js\n **/","import {loadScript, getCookieValue} from '../../utils';\n\nfunction enableMouseflow () {\n\twindow._mfq = window._mfq || [];\n\twindow._mfq.push(['setVariable', 'spoorId', getCookieValue('spoor-id')]);\n\tloadScript('https://cdn.mouseflow.com/projects/3d6fc486-2914-4efc-a5ae-35a5eac972f2.js');\n}\n\n// Loads mouseflow tracking code\nmodule.exports = function (flags) {\n\n\tconst isAutomatedTest = window.location.href.indexOf('backend') !== -1;\n\tconst isSignUpApp = !!document.querySelector('html[data-next-app=signup]') && !isAutomatedTest;\n\tconst hasLightSignup = !!document.querySelector('.o-email-only-signup');\n\n\tif (flags.get('mouseflowForce')) {\n\t\tenableMouseflow();\n\t}\n\telse if (flags.get('mouseflow')) {\n\n\t\tif (isSignUpApp) {\n\t\t\tenableMouseflow();\n\t\t}\n\t\tif (hasLightSignup && Math.random() <= 0.01) {\n\t\t\tenableMouseflow();\n\t\t}\n\t\telse {\n\t\t\tconst spoorId = getCookieValue('spoor-id');\n\t\t\tconst spoorNumber = spoorId.replace(/-/g, '');\n\t\t\tconst spoorNumberTrim = spoorNumber.substring(spoorNumber.length - 12, spoorNumber.length); // Don't overflow the int\n\t\t\tconst spoorNumberDec = parseInt(spoorNumberTrim, 16)\n\n\t\t\tif (spoorNumberDec % 100 === 0) {\n\t\t\t\tenableMouseflow();\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/third-party/mouseflow.js\n **/","import {broadcast} from '../../utils';\n\nconst isAllocated = function () {\n\treturn /spoor-id=0/.test(document.cookie);\n}\n\n// Loads Sourcepoint\nmodule.exports = function (flags) {\n\tif (flags && flags.get('sourcepoint') && isAllocated()) {\n\n\t\tdocument.addEventListener('sp.blocking', function () {\n\t\t\tbroadcast('oTracking.event', {\n\t\t\t\tcategory: 'ads',\n\t\t\t\taction: 'blocked',\n\t\t\t\tcontext: {\n\t\t\t\t\tprovider: 'sourcepoint'\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tconst sp = document.createElement('script');\n\t\tsp.async = sp.defer = true;\n\t\tsp.src = 'https://h2.ft.com/static-files/sp/prod/long/sp/sp-2.js';\n\t\tsp.setAttribute('data-client-id', 'pHQAcgfacNTVtzm');\n\t\tdocument.body.appendChild(sp);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/third-party/sourcepoint.js\n **/","const broadcast = require('../../../utils').broadcast;\n\nconst track = (componentId, componentPos) =>\n\tbroadcast('oTracking.event', { category: 'page', action: 'scrolldepth', componentId, componentPos });\n\nconst intersectionCallback = (observer, changes) =>\n\tchanges.forEach(change => {\n\t\tconst component = change.target;\n\t\tconst componentId = component.id;\n\t\t// get the component's position\n\t\tconst componentPos = [...document.querySelectorAll('.js-track-scroll-event')]\n\t\t\t.findIndex(component => component.id === componentId);\n\t\ttrack(componentId, componentPos + 1);\n\t\tobserver.unobserve(component);\n\t});\n\nconst init = () => {\n\tif (!/spoor-id=0/.test(document.cookie) || !window.IntersectionObserver) {\n\t\treturn false;\n\t}\n\tconst observer = new IntersectionObserver(\n\t\tfunction (changes) {\n\t\t\tintersectionCallback(this, changes);\n\t\t}\n\t);\n\t[...document.querySelectorAll('.js-track-scroll-event')]\n\t\t.forEach(component => {\n\t\t\tobserver.observe(component);\n\t\t});\n}\n\nexport default { init }\n\n\n\n/** WEBPACK FOOTER **\n ** ./tracking/ft/events/scroll-depth-components.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/toConsumableArray.js\n ** module id = 156\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/array/from.js\n ** module id = 157\n ** module chunks = 0\n **/","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/array/from.js\n ** module id = 158\n ** module chunks = 0\n **/","'use strict';\nvar ctx            = require('./_ctx')\n  , $export        = require('./_export')\n  , toObject       = require('./_to-object')\n  , call           = require('./_iter-call')\n  , isArrayIter    = require('./_is-array-iter')\n  , toLength       = require('./_to-length')\n  , createProperty = require('./_create-property')\n  , getIterFn      = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.array.from.js\n ** module id = 159\n ** module chunks = 0\n **/","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-call.js\n ** module id = 160\n ** module chunks = 0\n **/","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_is-array-iter.js\n ** module id = 161\n ** module chunks = 0\n **/","'use strict';\nvar $defineProperty = require('./_object-dp')\n  , createDesc      = require('./_property-desc');\n\nmodule.exports = function(object, index, value){\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_create-property.js\n ** module id = 162\n ** module chunks = 0\n **/","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/core.get-iterator-method.js\n ** module id = 163\n ** module chunks = 0\n **/","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_classof.js\n ** module id = 164\n ** module chunks = 0\n **/","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-detect.js\n ** module id = 165\n ** module chunks = 0\n **/","module.exports = require('o-date');\nmodule.exports.__wrapsOrigami = true;\n\n\n\n/** WEBPACK FOOTER **\n ** ./date/index.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-date (bower component)\n ** module id = 167\n ** module chunks = 0\n **/","/*global module*/\n\nconst months = '[\"' + 'January,February,March,April,May,June,July,August,September,October,November,December'.split(',').join('\",\"') + '\"]';\nconst days = '[\"' + 'Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(',').join('\",\"') + '\"]';\nconst formats = {\n\tdatetime: 'MMMM d, yyyy h:mm a',\n\tdate: 'MMMM d, yyyy'\n};\n\nconst compiledTemplates = {};\n\n/**\n * See http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html for formatting conventions used\n *\n *Comments indicate the value returned for 3.05 pm on Tuesday 4th February 2014\n*/\nconst formatReplacementsMap = {\n\tMMMM: 'months[date.getMonth()]',  // e.g. February\n\tMMM: 'months[date.getMonth()].substr(0,3)', // Feb\n\tMM: 'pad2(date.getMonth() + 1, 2)', // 02\n\tM: '(date.getMonth() + 1)', // 2\n\tyyyy: 'date.getFullYear()', // 2014\n\tyy: '(\"\"+date.getFullYear()).substr(-2, 2)', // 14\n\tEEEE: 'days[date.getDay()]', // Tuesday\n\tEEE: 'days[date.getDay()].substr(0,3)', // Tue\n\td: 'date.getDate()', // 4\n\tdd: 'pad2(date.getDate())', // 04\n\tm: 'date.getMinutes()', // 5\n\tmm: 'pad2(date.getMinutes())', // 05\n\th: '(((date.getHours() + 11) % 12) + 1)', // 3\n\thh: 'pad2(((date.getHours() + 11) % 12) + 1)', // 03\n\tH: 'date.getHours()', // 15\n\tHH: 'pad2(date.getHours())', // 15\n\ta: '(date.getHours() >= 12 ? \"pm\" : \"am\")' // pm\n};\n\nconst inSeconds = {\n\tminute: 60,\n\thour: 60 * 60,\n\tday: 24 * 60 * 60,\n\tweek: 7 * 24 * 60 * 60,\n\tmonth: 60 * 60 * 24 * 30,\n\tyear: 365 * 24 * 60 * 60\n};\n\nlet interval;\n\nfunction ODate(rootEl) {\n\tif (!rootEl) {\n\t\trootEl = document.body;\n\t} else if (!(rootEl instanceof HTMLElement)) {\n\t\trootEl = document.querySelector(rootEl);\n\t}\n\n\tif (rootEl.getAttribute('data-o-component') === \"o-date\") {\n\t\tthis.el = rootEl;\n\t} else {\n\t\tthis.el = rootEl.querySelector('[data-o-component~=\"o-date\"]');\n\t}\n\n\tif (this.el !== undefined) {\n\t\tdocument.body.addEventListener('oDate.update', () => {\n\t\t\tthis.update();\n\t\t});\n\n\t\tthis.update();\n\t}\n\n\tif (!interval) {\n\t\tinterval = setInterval(function() {\n\t\t\tdocument.body.dispatchEvent(new CustomEvent('oDate.update'));\n\t\t}, 60000);\n\t}\n}\n\nODate.prototype.update = function() {\n\tlet el = this.el;\n\n\tlet date = el.getAttribute('datetime');\n\tlet format = el.getAttribute('data-o-date-format');\n\n\tconst printer = el.querySelector('.o-date__printer') || el;\n\tconst hasTextNode = printer.firstChild && printer.firstChild.nodeType === 3;\n\n\tif (date) {\n\t\tdate = ODate.toDate(date);\n\t} else if (hasTextNode) {\n\t\t// Only define new date if printer is empty\n\t\tdate = new Date();\n\t}\n\n\tif (!date) return;\n\n\tlet dateString;\n\n\tif (format === 'today-or-yesterday-or-nothing') {\n\t\tdateString = ODate.asTodayOrYesterdayOrNothing(date);\n\t} else if (format === 'date-only') {\n\t\tdateString = ODate.format(date, 'date');\n\t} else if (format === 'time-ago-limit-4-hours'){\n\t\tdateString = ODate.timeAgo(date, { limit: 4*inSeconds.hour });\n\t} else {\n\t\t dateString = ODate.ftTime(date);\n\t}\n\n\t// To avoid triggering a parent live region unnecessarily\n\t// <https://github.com/Financial-Times/o-date/pull/43>\n\tif (hasTextNode) {\n\t\tprinter.firstChild.nodeValue = dateString;\n\t} else {\n\t\tprinter.innerHTML = dateString;\n\t}\n\n\tel.title = ODate.format(date, 'datetime');\n\tel.setAttribute('data-o-date-js', '');\n\tel.setAttribute('aria-label', dateString);\n};\n\nfunction compile(format) {\n\tconst tpl = formats[format] || format;\n\n\tlet funcString = 'var months= ' + months + ', days= ' + days + ';';\n\tfuncString +='function pad2 (number) {return (\"0\" + number).slice(-2)}';\n\tfuncString += 'return \"' + tpl.replace(/\\\\?[a-z]+/ig, function (match) {\n\t\tif (match.charAt(0) === '\\\\') {\n\t\t\treturn match.substr(1);\n\t\t}\n\t\tconst replacer = formatReplacementsMap[match];\n\n\t\treturn replacer ? '\" + ' + replacer + ' + \"' : match;\n\t}) + '\"';\n\n\treturn (compiledTemplates[format] = new Function('date', funcString));  // jshint ignore:line\n}\n\nODate.toDate = function(date) {\n\tdate = date instanceof Date ? date : new Date(date);\n\tif (date.toString() !== 'Invalid Date') {\n\t\treturn date;\n\t}\n};\n\nODate.format = function(date, dateFormat) {\n\tdateFormat = dateFormat || 'datetime';\n\tconst tpl = compiledTemplates[dateFormat] || compile(dateFormat);\n\tdate = ODate.toDate(date);\n\treturn date && tpl(date);\n};\n\nODate.getSecondsBetween = function(time, otherTime) {\n\treturn Math.round((time - otherTime) / 1000);\n};\n\nODate.ftTime = function(dateObj) {\n\tconst now = new Date();\n\tconst interval = ODate.getSecondsBetween(now, dateObj);\n\tlet dateString;\n\n\t// If the date will occur in the next 5 minutes. This check is to allow for\n\t// reasonably differences in machine clocks.\n\tif (ODate.isNearFuture(interval)) {\n\t\tdateString = 'just now';\n\n\t// If it's beyond 5 minutes, fall back to printing the whole date, the machine\n\t// clock could be way out.\n\t} else if (ODate.isFarFuture(interval)) {\n\t\tdateString = ODate.format(dateObj, 'date');\n\n\t// Relative times for today or within the last 4 hours\n\t} else if (ODate.isToday(dateObj, now, interval) || (interval < (4 * inSeconds.hour))) {\n\t\tdateString = ODate.timeAgo(dateObj, interval);\n\n\t// 'Yesterday' for dates that occurred yesterday\n\t} else if (ODate.isYesterday(dateObj, now, interval)) {\n\t\tdateString = 'yesterday';\n\n\t// Else print the date\n\t} else {\n\t\tdateString = ODate.format(dateObj, 'date');\n\t}\n\n\treturn dateString;\n};\n\nODate.isNearFuture = function(interval) {\n\t// If the interval within the next 5 minutes\n\treturn (interval < 0 && interval > -(5 * inSeconds.minute));\n};\n\nODate.isFarFuture = function(interval) {\n\t// If the interval is further in the future than 5 minutes\n\treturn interval < -(5 * inSeconds.minute);\n};\n\nODate.isToday = function(date, now, interval) {\n\tconst within24Hours = interval < inSeconds.day;\n\tconst sameDayOfWeek = now.getDay() === date.getDay();\n\treturn (within24Hours && sameDayOfWeek);\n};\n\nODate.isYesterday = function(date, now, interval) {\n\tconst within48Hours = interval < 2 * inSeconds.day;\n\tconst consecutiveDaysOfTheWeek = now.getDay() === date.getDay()+1;\n\treturn (within48Hours && consecutiveDaysOfTheWeek);\n};\n\nODate.timeAgo = function(date, interval, options) {\n\n\tdate = ODate.toDate(date);\n\tif (!date) return;\n\n\t// Accept an interval argument for backwards compatibility\n\tif (arguments.length === 2 && typeof interval === 'object') {\n\t\toptions = interval;\n\t\tinterval = options.interval;\n\t}\n\n\t// Default the interval option to the time since the given date\n\tif (!interval) {\n\t\tinterval = ODate.getSecondsBetween(new Date(), date);\n\t}\n\n\t// If a limit has been supplied and the interval is longer ago than that limit\n\tif (options && options.limit > 0 && (!interval || interval > options.limit)) {\n\t\treturn '';\n\t}\n\n\tif (interval < inSeconds.minute) {\n\t\treturn interval + ' seconds ago';\n\t} else if (interval < (1.5 * inSeconds.minute)) {\n\t\treturn 'a minute ago';\n\t} else if (interval < (59 * inSeconds.minute) ) {\n\t\treturn Math.round(interval / inSeconds.minute) + ' minutes ago';\n\t} else if (interval < (1.5 * inSeconds.hour)) {\n\t\treturn 'an hour ago';\n\t} else if (interval < 22 * inSeconds.hour) {\n\t\treturn Math.round(interval / inSeconds.hour) + ' hours ago';\n\t} else if (interval < (1.5 * inSeconds.day)) {\n\t\treturn 'a day ago';\n\t} else if (interval < 25 * inSeconds.day) {\n\t\treturn Math.round(interval / inSeconds.day) + ' days ago';\n\t} else if (interval < (45 * inSeconds.day)) {\n\t\treturn 'a month ago';\n\t} else if (interval < 345 * inSeconds.day) {\n\t\treturn Math.round(interval / inSeconds.month) + ' months ago';\n\t} else if (interval < (547 * inSeconds.day)) {\n\t\treturn 'a year ago';\n\t} else {\n\t\treturn Math.max(2, Math.floor(interval / inSeconds.year)) + ' years ago';\n\t}\n};\n\nODate.asTodayOrYesterdayOrNothing = function(date){\n\n\tif (!date) return;\n\n\tconst now = new Date();\n\tconst interval = ODate.getSecondsBetween(now, date);\n\n\tlet dateString;\n\n\t// If this was less than a day ago\n\tif (ODate.isToday(date, now, interval)) {\n\t\tdateString = 'today';\n\t} else if (ODate.isYesterday(date, now, interval)) {\n\t\tdateString = 'yesterday';\n\t} else {\n\t\tdateString = '';\n\t}\n\n\treturn dateString;\n};\n\nODate.init = function(el) {\n\tif (!el) {\n\t\tel = document.body;\n\t}\n\tif (!(el instanceof HTMLElement)) {\n\t\tel = document.querySelector(el);\n\t}\n\t/* If el's data-o-component has \\bo-date\\b in it, ie it is itself a date,\n\t return a new o-date */\n\tif (/\\bo-date\\b/.test(el.getAttribute('data-o-component'))) {\n\t\treturn new ODate(el);\n\t}\n\n\t// If el contains date components, return o-dates\n\tconst dateEls = el.querySelectorAll('[data-o-component~=\"o-date\"]');\n\treturn [].map.call(dateEls, function(el) {\n\t\treturn new ODate(el);\n\t});\n};\n\nconst constructAll = function() {\n\tODate.init();\n\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n};\n\nif (typeof window !== 'undefined') {\n\tdocument.addEventListener('o.DOMContentLoaded', constructAll);\n}\n\nmodule.exports = ODate;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-date/main.js\n **/","const OHeader = require('o-header');\nconst Typeahead = require('./js/typeahead');\nconst promoHandler = require('./js/promoHandler');\n\nfunction init (flags) {\n\tpromoHandler.init(flags);\n\n\tnew OHeader();\n\n\t// initialise separate sticky header\n\tnew OHeader(document.querySelector('[data-o-header--sticky]'));\n\n\tconst typeaheadElements = document.querySelectorAll('[data-typeahead]');\n\tif (flags.get('typeahead') && typeaheadElements.length) {\n\t\tfor (let i = 0; i < typeaheadElements.length; i++) {\n\t\t\tlet element = typeaheadElements[i]\n\t\t\tnew Typeahead( element, `//${window.location.host}/search-suggestions?q=` );\n\t\t}\n\t}\n}\n\nmodule.exports = { init };\n\n\n\n/** WEBPACK FOOTER **\n ** ./header/index.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-header (bower component)\n ** module id = 170\n ** module chunks = 0\n **/","import Header from './src/js/header';\n\nconst constructAll = () => {\n\tHeader.init();\n\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n};\n\ndocument.addEventListener('o.DOMContentLoaded', constructAll);\n\nexport default Header;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-header/main.js\n **/","import search from './search';\nimport mega from './mega';\nimport drawer from './drawer';\nimport subnav from './subnav';\nimport sticky from './sticky';\n\nclass Header {\n\n\tconstructor (headerEl) {\n\t\tif (!headerEl) {\n\t\t\theaderEl = document.querySelector('[data-o-component=\"o-header\"]');\n\t\t} else if (typeof headerEl === 'string') {\n\t\t\theaderEl = document.querySelector(headerEl);\n\t\t}\n\n\t\tif (headerEl.hasAttribute('data-o-header--js')) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.headerEl = headerEl;\n\n\t\tsearch.init(this.headerEl);\n\t\tmega.init(this.headerEl);\n\t\tdrawer.init(this.headerEl);\n\t\tsubnav.init(this.headerEl);\n\t\tsticky.init(this.headerEl);\n\n\t\tthis.headerEl.removeAttribute('data-o-header--no-js');\n\t\tthis.headerEl.setAttribute('data-o-header--js', '');\n\t}\n\n\tstatic init (rootEl) {\n\t\tif (!rootEl) {\n\t\t\trootEl = document.body;\n\t\t}\n\t\tif (!(rootEl instanceof HTMLElement)) {\n\t\t\trootEl = document.querySelector(rootEl);\n\t\t}\n\t\tif (/\\bo-header\\b/.test(rootEl.getAttribute('data-o-component'))) {\n\t\t\treturn new Header(rootEl);\n\t\t}\n\n\t\treturn [].map.call(rootEl.querySelectorAll('[data-o-component=\"o-header\"]'), el => {\n\t\t\tif (!el.hasAttribute('data-o-header--js')) {\n\t\t\t\treturn new Header(el);\n\t\t\t}\n\t\t}).filter((header) => {\n\t\t\treturn header !== undefined;\n\t\t});\n\t}\n\n}\n\nexport default Header;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-header/src/js/header.js\n **/","import Toggle from 'o-toggle';\n\nfunction init (headerEl) {\n\tconst target = headerEl.querySelector('[data-o-header-search]');\n\tconst controls = target && headerEl.querySelectorAll(`[aria-controls=\"${target.id}\"]`);\n\n\tif (controls === null || controls.length === 0) {\n\t\treturn;\n\t}\n\n\tconst opening = [];\n\n\tconst callback = function (state, e) {\n\t\tif (state === 'open') {\n\t\t\t// record the opening control\n\t\t\topening.push(e.currentTarget);\n\t\t\ttarget.querySelector('[name=\"q\"]').focus();\n\t\t} else {\n\t\t\t// re-focus opening control\n\t\t\topening.length && opening.pop().focus();\n\t\t}\n\t};\n\n\tfor (let i = 0, len = controls.length; i < len; i++) {\n\t\tnew Toggle(controls[i], { target, callback });\n\t}\n}\n\nexport default { init };\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-header/src/js/search.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-toggle (bower component)\n ** module id = 174\n ** module chunks = 0\n **/","class Toggle {\n\n\tconstructor(toggleEl, config) {\n\t\tif (!toggleEl) {\n\t\t\treturn;\n\t\t} else if (!(toggleEl instanceof HTMLElement)) {\n\t\t\ttoggleEl = document.querySelector(toggleEl);\n\t\t}\n\n\t\t\tif (toggleEl.hasAttribute('data-o-toggle--js')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\tif (!config) {\n\t\t\tconfig = {};\n\t\t\t// Try to get config set declaratively on the element\n\t\t\tArray.prototype.forEach.call(toggleEl.attributes, (attr) => {\n\t\t\t\tif (attr.name.indexOf('data-o-toggle') === 0) {\n\t\t\t\t\t// Remove the prefix part of the data attribute name\n\t\t\t\t\tconst key = attr.name.replace('data-o-toggle-', '');\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// If it's a JSON, a boolean or a number, we want it stored like that, and not as a string\n\t\t\t\t\t\t// We also replace all ' with \" so JSON strings are parsed correctly\n\t\t\t\t\t\tconfig[key] = JSON.parse(attr.value.replace(/\\'/g, '\"'));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconfig[key] = attr.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.callback = config.callback;\n\t\tif (typeof this.callback === 'string') {\n\t\t\tthis.callback = new Function(this.callback);\n\t\t}\n\n\t\tthis.targetEl = config.target;\n\t\tif (!(this.targetEl instanceof HTMLElement)) {\n\t\t\tthis.targetEl = document.querySelector(this.targetEl);\n\t\t}\n\n\t\tthis.toggleEl = toggleEl;\n\n\t\tif (typeof Toggle._toggles.get(this.targetEl) === 'undefined') {\n\t\t\tToggle._toggles.set(this.targetEl, [this]);\n\t\t} else {\n\t\t\tToggle._toggles.get(this.targetEl).push(this);\n\t\t}\n\n\t\tif (this.toggleEl.nodeName === 'A') {\n\t\t\tthis.toggleEl.setAttribute('role', 'button');\n\t\t}\n\n\t\tthis.toggleEl.setAttribute('aria-expanded', 'false');\n\t\tthis.toggle = this.toggle.bind(this);\n\t\tthis.toggleEl.addEventListener('click', this.toggle);\n\n\t\tthis.targetEl.setAttribute('aria-hidden', 'true');\n\t\tthis.toggleEl.setAttribute('data-o-toggle--js', 'true');\n\t}\n\n\ttoggle(e) {\n\t\t// Toggle returns true if class is not present and needs to be added\n\t\tconst state = this.targetEl.classList.toggle('o-toggle--active');\n\n\t\tToggle._toggles.get(this.targetEl).forEach((toggle) => {\n\t\t\ttoggle.toggleEl.setAttribute('aria-expanded', state);\n\t\t});\n\n\t\tthis.targetEl.setAttribute('aria-hidden', !state);\n\n\t\te && e.preventDefault();\n\t\tthis.callback && this.callback(state ? 'open' : 'close', e);\n\t}\n\n\tdestroy() {\n\t\tthis.toggleEl.removeEventListener('click', this.toggle);\n\t\tthis.toggleEl.removeAttribute('aria-expanded');\n\t\tthis.toggleEl.removeAttribute('role');\n\t\tthis.toggleEl.removeAttribute('data-o-toggle--js');\n\t\tthis.targetEl.removeAttribute('aria-hidden');\n\n\t\tconst targetArray = Toggle._toggles.get(this.targetEl);\n\t\tconst togglePosition = targetArray.indexOf(this);\n\t\t// Generates a new array removing the current toggle from the list\n\t\tToggle._toggles.set(this.targetEl,\n\t\t\t\t\t\t\ttargetArray.slice(0, togglePosition)\n\t\t\t\t\t\t\t\t\t\t.join(targetArray.slice(togglePosition + 1)));\n\n\t\tthis.targetEl = undefined;\n\t\tthis.toggleEl = undefined;\n\t\tthis.callback = undefined;\n\t}\n\n\tstatic init(el, config) {\n\t\tif (!el) {\n\t\t\tel = document.body;\n\t\t} else if (!(el instanceof HTMLElement)) {\n\t\t\tel = document.querySelector(el);\n\t\t}\n\t\tconst toggleEls = el.querySelectorAll('[data-o-component=\"o-toggle\"]');\n\t\tconst toggles = [];\n\t\tfor (let toggleEl of toggleEls) {\n\t\t\tif (!toggleEl.hasAttribute('data-o-toggle--js')) {\n\t\t\t\ttoggles.push(new Toggle(toggleEl, config));\n\t\t\t}\n\t\t}\n\t\treturn toggles;\n\t}\n};\n\nToggle._toggles = new Map();\n\nconst constructAll = () => {\n\tToggle.init();\n\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n};\n\ndocument.addEventListener('o.DOMContentLoaded', constructAll);\n\nexport default Toggle;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-toggle/main.js\n **/","const INTENT_ENTER = 300;\nconst INTENT_LEAVE = 400;\n\nconst expanded = [];\n\nfunction addEvents (parent, menu) {\n\tlet timeout;\n\n\tparent.addEventListener('mouseenter', () => {\n\t\tclearTimeout(timeout);\n\n\t\tif (isOpen(menu)) {\n\t\t\treturn;\n\t\t}\n\n\t\ttimeout = setTimeout(() => {\n\t\t\tif (expanded.length) {\n\t\t\t\thide(expanded[0]);\n\t\t\t\tshow(menu, false);\n\t\t\t} else {\n\t\t\t\tshow(menu, true);\n\t\t\t}\n\t\t}, INTENT_ENTER);\n\t});\n\n\tparent.addEventListener('mouseleave', () => {\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(() => isOpen(menu) && hide(menu), INTENT_LEAVE);\n\t});\n}\n\nfunction isOpen (menu) {\n\treturn expanded.indexOf(menu) !== -1;\n}\n\nfunction show (menu, animate) {\n\tif (animate) {\n\t\tmenu.classList.add('o-header__mega--animation');\n\t}\n\n\tmenu.setAttribute('aria-hidden', 'false');\n\tmenu.setAttribute('aria-expanded', 'true');\n\n\tmenu.dispatchEvent(new CustomEvent('oHeader.MegaMenuShow', { bubbles: true }));\n\n\texpanded.push(menu);\n}\n\nfunction hide (menu) {\n\tmenu.classList.remove('o-header__mega--animation');\n\tmenu.setAttribute('aria-hidden', 'true');\n\tmenu.setAttribute('aria-expanded', 'false');\n\n\tmenu.dispatchEvent(new CustomEvent('oHeader.MegaMenuHide', { bubbles: true }));\n\n\texpanded.splice(expanded.indexOf(menu), 1);\n}\n\nfunction init (headerEl) {\n\tconst menus = Array.from(headerEl.querySelectorAll('[data-o-header-mega]'));\n\tconst parents = menus.map(menu => menu.parentNode);\n\n\tmenus.forEach(menu => {\n\t\tmenu.setAttribute('aria-hidden', 'true');\n\t\tmenu.setAttribute('aria-expanded', 'false');\n\t});\n\n\tparents.forEach((parent, i) => addEvents(parent, menus[i]));\n}\n\nexport default { init, show, hide };\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-header/src/js/mega.js\n **/","import Toggle from 'o-toggle';\n\nconst LISTEN_DELAY = 300;\nconst INTENT_DELAY = 1000;\n\nfunction handleCloseEvents (scope, callback) {\n\tlet timeout;\n\n\tconst handleKeydown = (e) => {\n\t\tif (e.keyCode === 27) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\tconst handleClick = (e) => {\n\t\tif (!scope.contains(e.target)) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\tconst handleMouseenter = () => {\n\t\tclearTimeout(timeout);\n\t};\n\n\tconst handleMouseleave = () => {\n\t\ttimeout = setTimeout(callback, INTENT_DELAY);\n\t};\n\n\tconst removeEvents = () => {\n\t\tclearTimeout(timeout);\n\n\t\tscope.removeEventListener('mouseenter', handleMouseenter);\n\t\tscope.removeEventListener('mouseleave', handleMouseleave);\n\t\tdocument.removeEventListener('click', handleClick);\n\t\tdocument.removeEventListener('touchstart', handleClick);\n\t\tdocument.removeEventListener('keydown', handleKeydown);\n\t};\n\n\tconst addEvents = () => {\n\t\tscope.addEventListener('mouseenter', handleMouseenter);\n\t\tscope.addEventListener('mouseleave', handleMouseleave);\n\t\tdocument.addEventListener('click', handleClick);\n\t\tdocument.addEventListener('touchstart', handleClick);\n\t\tdocument.addEventListener('keydown', handleKeydown);\n\t};\n\n\treturn { addEvents, removeEvents };\n}\n\nfunction addDrawerToggles (drawerEl) {\n\tconst controls = [...document.body.querySelectorAll(`[aria-controls=\"${drawerEl.id}\"]`)];\n\n\tlet handleClose;\n\tfunction toggleCallback(state) {\n\t\tif (state === 'close') {\n\t\t\thandleClose.removeEvents();\n\t\t} else {\n\t\t\t// don't capture the initial click or accidental double taps etc.\n\t\t\t// we could use transitionend but scoping is tricky and it needs prefixing and...\n\t\t\tsetTimeout(handleClose.addEvents, LISTEN_DELAY);\n\t\t}\n\n\t\tdrawerEl.classList.toggle('o-header__drawer--closing', state === 'close');\n\t\tdrawerEl.classList.toggle('o-header__drawer--opening', state === 'open');\n\t}\n\n\tcontrols.forEach((control) => {\n\t\tconst drawerToggle = new Toggle(control, {\n\t\t\ttarget: drawerEl,\n\t\t\tcallback: toggleCallback\n\t\t});\n\n\t\t// Both toggles have the same target, so the toggle function will be the same\n\t\t// If there's a separate handleClose instance for each toggle, removeEvents doesn't work\n\t\t// when the close toggle is clicked\n\t\tif (!handleClose) {\n\t\t\thandleClose = handleCloseEvents(drawerEl, drawerToggle.toggle);\n\t\t}\n\t});\n}\n\nfunction addSubmenuToggles (drawerEl) {\n\tconst submenus = drawerEl.querySelectorAll('[id^=\"o-header-drawer-child-\"]');\n\n\tArray.from(submenus).forEach(submenu => {\n\t\tconst button = drawerEl.querySelector(`[aria-controls=\"${submenu.id}\"]`);\n\n\t\tsubmenu.setAttribute('aria-hidden', 'true');\n\n\t\tnew Toggle(button, {\n\t\t\ttarget: submenu,\n\t\t\tcallback: (state) => {\n\t\t\t\tbutton.textContent = button.textContent.replace(/fewer|more/, state === 'open' ? 'fewer' : 'more');\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction appendUserDetail (target) {\n\treturn fetch('https://session-next.ft.com/', {\n\t\tcredentials: 'include'\n\t})\n\t.then((response) => {\n\t\tif (response.ok) {\n\t\t\treturn response.json();\n\t\t} else {\n\t\t\treturn response.text().then((err) => { throw new Error(err); });\n\t\t}\n\t})\n\t.then((data) => {\n\t\ttarget.innerText = data.emailAddress;\n\t});\n}\n\nfunction init () {\n\tconst drawerEl = document.body.querySelector('[data-o-header-drawer]');\n\tif (!drawerEl) {\n\t\treturn;\n\t}\n\taddSubmenuToggles(drawerEl);\n\taddDrawerToggles(drawerEl);\n\n\tconst emailEl = drawerEl.querySelector('[data-o-header-drawer-user-email]');\n\n\t// if the browser doesn't support CORS then bail\n\tif (emailEl && ('withCredentials' in new XMLHttpRequest())) {\n\t\tappendUserDetail(emailEl);\n\t}\n\n\tdrawerEl.removeAttribute('data-o-header-drawer--no-js');\n\tdrawerEl.setAttribute('data-o-header-drawer--js', 'true');\n}\n\nexport default { init };\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-header/src/js/drawer.js\n **/","import * as oUtils from 'o-utils';\n\nfunction init(headerEl) {\n\tconst subnav = headerEl.querySelector('[data-o-header-subnav]');\n\n\tif (subnav === null) {\n\t\treturn;\n\t}\n\n\tconst wrapper = subnav.querySelector('[data-o-header-subnav-wrapper]');\n\tconst buttons = Array.from(subnav.getElementsByTagName('button'));\n\n\tlet scrollWidth;\n\tlet clientWidth;\n\n\tfunction direction(button) {\n\t\treturn button.className.match(/left|right/).pop();\n\t}\n\n\tfunction scrollable() {\n\t\tscrollWidth = wrapper.scrollWidth;\n\t\tclientWidth = wrapper.clientWidth;\n\n\t\tbuttons.forEach(button => {\n\t\t\tif (direction(button) === 'left') {\n\t\t\t\tbutton.disabled = wrapper.scrollLeft === 0;\n\t\t\t} else {\n\t\t\t\tconst remaining = scrollWidth - clientWidth - wrapper.scrollLeft;\n\t\t\t\t// Allow a little difference as scrollWidth is fast, not accurate.\n\t\t\t\tbutton.disabled = remaining <= 1;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction scroll(e) {\n\t\tlet distance = 100;\n\n\t\tif (direction(e.currentTarget) === 'left') {\n\t\t\tdistance = (wrapper.scrollLeft > distance ? distance : wrapper.scrollLeft) * -1;\n\t\t} else {\n\t\t\tconst remaining = scrollWidth - clientWidth - wrapper.scrollLeft;\n\t\t\tdistance = remaining > distance ? distance : remaining;\n\t\t}\n\n\t\twrapper.scrollLeft = wrapper.scrollLeft + distance;\n\n\t\tscrollable();\n\t}\n\n\twrapper.addEventListener('scroll', oUtils.throttle(scrollable, 100));\n\twindow.addEventListener('oViewport.resize', scrollable);\n\n\tbuttons.forEach(button => {\n\t\tbutton.onclick = scroll;\n\t});\n\n\tscrollable();\n}\n\nmodule.exports = { init };\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-header/src/js/subnav.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-utils (bower component)\n ** module id = 179\n ** module chunks = 0\n **/","/**\n*\n* Debounces function so it is only called after n milliseconds\n* without it not being called\n*\n* @example\n* Utils.debounce(myFunction() {}, 100);\n*\n* @param {Function} func - Function to be debounced\n* @param {number} wait - Time in miliseconds\n*\n* @returns {Function} - Debounced function\n*/\nfunction debounce(func, wait) {\n\tlet timeout;\n\treturn function() {\n\t\tconst args = arguments;\n\t\tconst later = () => {\n\t\t\ttimeout = null;\n\t\t\tfunc.apply(this, args);\n\t\t};\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t};\n};\n\n/**\n*\n* Throttle function so it is only called once every n milliseconds\n*\n* @example\n* Utils.throttle(myFunction() {}, 100);\n*\n* @param {Function} func - Function to be throttled\n* @param {number} wait - Time in miliseconds\n*\n* @returns {Function} - Throttled function\n*/\nfunction throttle(func, wait) {\n\tlet timeout;\n\treturn function() {\n\t\tif (timeout) {\n\t\t\treturn;\n\t\t}\n\t\tconst args = arguments;\n\t\tconst later = () => {\n\t\t\ttimeout = null;\n\t\t\tfunc.apply(this, args);\n\t\t};\n\n\t\ttimeout = setTimeout(later, wait);\n\t};\n};\n\nexport {\n\tdebounce,\n\tthrottle\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-utils/main.js\n **/","import { debounce } from 'o-utils';\n\nfunction init (headerEl) {\n\tif (!headerEl.hasAttribute('data-o-header--sticky')) {\n\t\treturn;\n\t}\n\n\tlet viewportOffset;\n\tlet lastScrollDepth;\n\tlet lastAnimationFrame;\n\n\tfunction handleFrame () {\n\t\t// sticky el will appear when scrolled down from page top to\n\t\t// (arbitrarily) > half the viewport height\n\t\tconst scrollDepth = window.pageYOffset || window.scrollY;\n\t\tconst isActive = scrollDepth > viewportOffset;\n\n\t\theaderEl.classList.toggle('o-header--sticky-active', isActive);\n\n\t\t// allow a little wiggling room so we don't get too hasty toggling up/down state\n\t\tif (Math.abs(scrollDepth - lastScrollDepth) > 20) {\n\t\t\tconst isScrollingDown = lastScrollDepth < scrollDepth;\n\t\t\theaderEl.classList.toggle('o-header--sticky-scroll-down', isActive && isScrollingDown);\n\t\t\theaderEl.classList.toggle('o-header--sticky-scroll-up', isActive && !isScrollingDown);\n\t\t}\n\n\t\tlastScrollDepth = scrollDepth;\n\t}\n\n\tfunction startLoop () {\n\t\tviewportOffset = window.innerHeight / 2;\n\n\t\tlastAnimationFrame = window.requestAnimationFrame(() => {\n\t\t\thandleFrame();\n\t\t\tstartLoop();\n\t\t});\n\t}\n\n\tfunction stopLoop () {\n\t\tlastAnimationFrame && window.cancelAnimationFrame(lastAnimationFrame);\n\t}\n\n\tfunction scrollStart () {\n\t\twindow.removeEventListener('scroll', scrollStart);\n\t\twindow.addEventListener('scroll', debouncedScrollEnd);\n\t\tstartLoop();\n\t}\n\n\tfunction scrollEnd () {\n\t\tstopLoop();\n\t\twindow.removeEventListener('scroll', debouncedScrollEnd);\n\t\twindow.addEventListener('scroll', scrollStart);\n\t}\n\n\tconst debouncedScrollEnd = debounce(scrollEnd, 300);\n\n\twindow.addEventListener('scroll', scrollStart);\n\n\thandleFrame();\n};\n\nexport default { init };\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-header/src/js/sticky.js\n **/","/*global fetch*/\nconst Awesomplete = require('awesomplete');\nconst utils = require('../../utils');\n\nconst MIN_LENGTH = 2;\nconst DISPLAY_ITEMS = 6;\n\nclass Typeahead {\n\n\tconstructor (target, dataUrl) {\n\t\tthis.target = target;\n\t\tthis.input = target.querySelector('input');\n\t\tthis.context = getParentElDataTrackableValue(target);\n\t\tthis.dataUrl = dataUrl;\n\n\t\tthis.searchTerm = '';\n\n\t\tthis.awesomplete = new Awesomplete(this.input, {\n\t\t\tmaxItems: DISPLAY_ITEMS,\n\t\t\tfilter: function (text, input) {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\treturn Awesomplete.FILTER_CONTAINS(utils.ascii(text.label), utils.ascii(input));\n\t\t\t},\n\t\t\titem: function (text, input) {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\treturn Awesomplete.ITEM(utils.ascii(text.label), utils.ascii(input));\n\t\t\t},\n\t\t\tsort: new Function()\n\t\t});\n\n\t\tthis.target.addEventListener('submit', this.handleSubmit.bind(this));\n\t\tthis.input.addEventListener('keyup', utils.debounce(this.handleType.bind(this), 300));\n\t\tthis.input.addEventListener('awesomplete-select', this.handleSelect.bind(this));\n\t\tthis.input.addEventListener('focus', this.handleFocus.bind(this));\n\t}\n\n\thandleType () {\n\t\tconst latestTerm = this.input.value.trim();\n\n\t\tif (this.searchTerm !== latestTerm) {\n\t\t\tthis.searchTerm = latestTerm;\n\n\t\t\tif (this.searchTerm.length >= MIN_LENGTH) {\n\t\t\t\tthis.getSuggestions(this.searchTerm);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleSelect (ev) {\n\t\ttrackSearchEvent(this.context);\n\t\tev.preventDefault();\n\t\twindow.location.href = ev.text.value;\n\t}\n\n\thandleSubmit () {\n\t\ttrackSearchEvent(this.context);\n\t}\n\n\thandleFocus () {\n\t\tif (this.searchTerm.length >= MIN_LENGTH) {\n\t\t\tthis.awesomplete.open();\n\t\t}\n\t}\n\n\tgetSuggestions (value) {\n\t\treturn fetch(this.dataUrl + encodeURIComponent(value))\n\t\t\t.then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(response.statusText);\n\t\t\t\t}\n\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then(suggestions => {\n\t\t\t\tthis.setSuggestions(suggestions);\n\t\t\t});\n\t}\n\n\tsetSuggestions (suggestions) {\n\t\tthis.awesomplete.list = suggestions.map(makeAwesompleteReadable);\n\t}\n\n}\n\nfunction getParentElDataTrackableValue (el) {\n\tif (el.hasAttribute('data-trackable-terminate')) {\n\t\treturn '';\n\t} else if (el.parentNode && el.parentNode.getAttribute('data-trackable')) {\n\t\treturn `-${el.parentNode.getAttribute('data-trackable')}`;\n\t} else {\n\t\treturn getParentElDataTrackableValue(el.parentNode);\n\t};\n}\n\nfunction makeAwesompleteReadable (suggestion) {\n\treturn [ suggestion.name, suggestion.url || `/stream/${suggestion.taxonomy}Id/${suggestion.id}` ];\n}\n\nfunction trackSearchEvent (context) {\n\tconst tracking = new CustomEvent('oTracking.event', {\n\t\tdetail: {\n\t\t\tcategory: 'page',\n\t\t\taction: `search-submit${context}`\n\t\t},\n\t\tbubbles: true\n\t});\n\n\tdocument.body.dispatchEvent(tracking);\n}\n\nexport default Typeahead;\n\n\n\n/** WEBPACK FOOTER **\n ** ./header/js/typeahead.js\n **/","module.exports = require(\"././awesomplete.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** awesomplete (bower component)\n ** module id = 183\n ** module chunks = 0\n **/","/**\n * Simple, lightweight, usable local autocomplete library for modern browsers\n * Because there weren’t enough autocomplete scripts in the world? Because I’m completely insane and have NIH syndrome? Probably both. :P\n * @author Lea Verou http://leaverou.github.io/awesomplete\n * MIT license\n */\n\n(function () {\n\nvar _ = function (input, o) {\n\tvar me = this;\n\n\t// Setup\n\n\tthis.input = $(input);\n\tthis.input.setAttribute(\"autocomplete\", \"off\");\n\tthis.input.setAttribute(\"aria-autocomplete\", \"list\");\n\n\to = o || {};\n\n\tconfigure(this, {\n\t\tminChars: 2,\n\t\tmaxItems: 10,\n\t\tautoFirst: false,\n\t\tdata: _.DATA,\n\t\tfilter: _.FILTER_CONTAINS,\n\t\tsort: _.SORT_BYLENGTH,\n\t\titem: _.ITEM,\n\t\treplace: _.REPLACE\n\t}, o);\n\n\tthis.index = -1;\n\n\t// Create necessary elements\n\n\tthis.container = $.create(\"div\", {\n\t\tclassName: \"awesomplete\",\n\t\taround: input\n\t});\n\n\tthis.ul = $.create(\"ul\", {\n\t\thidden: \"hidden\",\n\t\tinside: this.container\n\t});\n\n\tthis.status = $.create(\"span\", {\n\t\tclassName: \"visually-hidden\",\n\t\trole: \"status\",\n\t\t\"aria-live\": \"assertive\",\n\t\t\"aria-relevant\": \"additions\",\n\t\tinside: this.container\n\t});\n\n\t// Bind events\n\n\t$.bind(this.input, {\n\t\t\"input\": this.evaluate.bind(this),\n\t\t\"blur\": this.close.bind(this, { reason: \"blur\" }),\n\t\t\"keydown\": function(evt) {\n\t\t\tvar c = evt.keyCode;\n\n\t\t\t// If the dropdown `ul` is in view, then act on keydown for the following keys:\n\t\t\t// Enter / Esc / Up / Down\n\t\t\tif(me.opened) {\n\t\t\t\tif (c === 13 && me.selected) { // Enter\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tme.select();\n\t\t\t\t}\n\t\t\t\telse if (c === 27) { // Esc\n\t\t\t\t\tme.close({ reason: \"esc\" });\n\t\t\t\t}\n\t\t\t\telse if (c === 38 || c === 40) { // Down/Up arrow\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tme[c === 38? \"previous\" : \"next\"]();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t$.bind(this.input.form, {\"submit\": this.close.bind(this, { reason: \"submit\" })});\n\n\t$.bind(this.ul, {\"mousedown\": function(evt) {\n\t\tvar li = evt.target;\n\n\t\tif (li !== this) {\n\n\t\t\twhile (li && !/li/i.test(li.nodeName)) {\n\t\t\t\tli = li.parentNode;\n\t\t\t}\n\n\t\t\tif (li && evt.button === 0) {  // Only select on left click\n\t\t\t\tevt.preventDefault();\n\t\t\t\tme.select(li, evt.target);\n\t\t\t}\n\t\t}\n\t}});\n\n\tif (this.input.hasAttribute(\"list\")) {\n\t\tthis.list = \"#\" + this.input.getAttribute(\"list\");\n\t\tthis.input.removeAttribute(\"list\");\n\t}\n\telse {\n\t\tthis.list = this.input.getAttribute(\"data-list\") || o.list || [];\n\t}\n\n\t_.all.push(this);\n};\n\n_.prototype = {\n\tset list(list) {\n\t\tif (Array.isArray(list)) {\n\t\t\tthis._list = list;\n\t\t}\n\t\telse if (typeof list === \"string\" && list.indexOf(\",\") > -1) {\n\t\t\t\tthis._list = list.split(/\\s*,\\s*/);\n\t\t}\n\t\telse { // Element or CSS selector\n\t\t\tlist = $(list);\n\n\t\t\tif (list && list.children) {\n\t\t\t\tvar items = [];\n\t\t\t\tslice.apply(list.children).forEach(function (el) {\n\t\t\t\t\tif (!el.disabled) {\n\t\t\t\t\t\tvar text = el.textContent.trim();\n\t\t\t\t\t\tvar value = el.value || text;\n\t\t\t\t\t\tvar label = el.label || text;\n\t\t\t\t\t\tif (value !== \"\") {\n\t\t\t\t\t\t\titems.push({ label: label, value: value });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._list = items;\n\t\t\t}\n\t\t}\n\n\t\tif (document.activeElement === this.input) {\n\t\t\tthis.evaluate();\n\t\t}\n\t},\n\n\tget selected() {\n\t\treturn this.index > -1;\n\t},\n\n\tget opened() {\n\t\treturn !this.ul.hasAttribute(\"hidden\");\n\t},\n\n\tclose: function (o) {\n\t\tif (!this.opened) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.ul.setAttribute(\"hidden\", \"\");\n\t\tthis.index = -1;\n\n\t\t$.fire(this.input, \"awesomplete-close\", o || {});\n\t},\n\n\topen: function () {\n\t\tthis.ul.removeAttribute(\"hidden\");\n\n\t\tif (this.autoFirst && this.index === -1) {\n\t\t\tthis.goto(0);\n\t\t}\n\n\t\t$.fire(this.input, \"awesomplete-open\");\n\t},\n\n\tnext: function () {\n\t\tvar count = this.ul.children.length;\n\n\t\tthis.goto(this.index < count - 1? this.index + 1 : -1);\n\t},\n\n\tprevious: function () {\n\t\tvar count = this.ul.children.length;\n\n\t\tthis.goto(this.selected? this.index - 1 : count - 1);\n\t},\n\n\t// Should not be used, highlights specific item without any checks!\n\tgoto: function (i) {\n\t\tvar lis = this.ul.children;\n\n\t\tif (this.selected) {\n\t\t\tlis[this.index].setAttribute(\"aria-selected\", \"false\");\n\t\t}\n\n\t\tthis.index = i;\n\n\t\tif (i > -1 && lis.length > 0) {\n\t\t\tlis[i].setAttribute(\"aria-selected\", \"true\");\n\t\t\tthis.status.textContent = lis[i].textContent;\n\n\t\t\t$.fire(this.input, \"awesomplete-highlight\", {\n\t\t\t\ttext: this.suggestions[this.index]\n\t\t\t});\n\t\t}\n\t},\n\n\tselect: function (selected, origin) {\n\t\tif (selected) {\n\t\t\tthis.index = $.siblingIndex(selected);\n\t\t} else {\n\t\t\tselected = this.ul.children[this.index];\n\t\t}\n\n\t\tif (selected) {\n\t\t\tvar suggestion = this.suggestions[this.index];\n\n\t\t\tvar allowed = $.fire(this.input, \"awesomplete-select\", {\n\t\t\t\ttext: suggestion,\n\t\t\t\torigin: origin || selected\n\t\t\t});\n\n\t\t\tif (allowed) {\n\t\t\t\tthis.replace(suggestion);\n\t\t\t\tthis.close({ reason: \"select\" });\n\t\t\t\t$.fire(this.input, \"awesomplete-selectcomplete\", {\n\t\t\t\t\ttext: suggestion\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\tevaluate: function() {\n\t\tvar me = this;\n\t\tvar value = this.input.value;\n\n\t\tif (value.length >= this.minChars && this._list.length > 0) {\n\t\t\tthis.index = -1;\n\t\t\t// Populate list with options that match\n\t\t\tthis.ul.innerHTML = \"\";\n\n\t\t\tthis.suggestions = this._list\n\t\t\t\t.map(function(item) {\n\t\t\t\t\treturn new Suggestion(me.data(item, value));\n\t\t\t\t})\n\t\t\t\t.filter(function(item) {\n\t\t\t\t\treturn me.filter(item, value);\n\t\t\t\t})\n\t\t\t\t.sort(this.sort)\n\t\t\t\t.slice(0, this.maxItems);\n\n\t\t\tthis.suggestions.forEach(function(text) {\n\t\t\t\t\tme.ul.appendChild(me.item(text, value));\n\t\t\t\t});\n\n\t\t\tif (this.ul.children.length === 0) {\n\t\t\t\tthis.close({ reason: \"nomatches\" });\n\t\t\t} else {\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.close({ reason: \"nomatches\" });\n\t\t}\n\t}\n};\n\n// Static methods/properties\n\n_.all = [];\n\n_.FILTER_CONTAINS = function (text, input) {\n\treturn RegExp($.regExpEscape(input.trim()), \"i\").test(text);\n};\n\n_.FILTER_STARTSWITH = function (text, input) {\n\treturn RegExp(\"^\" + $.regExpEscape(input.trim()), \"i\").test(text);\n};\n\n_.SORT_BYLENGTH = function (a, b) {\n\tif (a.length !== b.length) {\n\t\treturn a.length - b.length;\n\t}\n\n\treturn a < b? -1 : 1;\n};\n\n_.ITEM = function (text, input) {\n\tvar html = input === '' ? text : text.replace(RegExp($.regExpEscape(input.trim()), \"gi\"), \"<mark>$&</mark>\");\n\treturn $.create(\"li\", {\n\t\tinnerHTML: html,\n\t\t\"aria-selected\": \"false\"\n\t});\n};\n\n_.REPLACE = function (text) {\n\tthis.input.value = text.value;\n};\n\n_.DATA = function (item/*, input*/) { return item; };\n\n// Private functions\n\nfunction Suggestion(data) {\n\tvar o = Array.isArray(data)\n\t  ? { label: data[0], value: data[1] }\n\t  : typeof data === \"object\" && \"label\" in data && \"value\" in data ? data : { label: data, value: data };\n\n\tthis.label = o.label || o.value;\n\tthis.value = o.value;\n}\nObject.defineProperty(Suggestion.prototype = Object.create(String.prototype), \"length\", {\n\tget: function() { return this.label.length; }\n});\nSuggestion.prototype.toString = Suggestion.prototype.valueOf = function () {\n\treturn \"\" + this.label;\n};\n\nfunction configure(instance, properties, o) {\n\tfor (var i in properties) {\n\t\tvar initial = properties[i],\n\t\t    attrValue = instance.input.getAttribute(\"data-\" + i.toLowerCase());\n\n\t\tif (typeof initial === \"number\") {\n\t\t\tinstance[i] = parseInt(attrValue);\n\t\t}\n\t\telse if (initial === false) { // Boolean options must be false by default anyway\n\t\t\tinstance[i] = attrValue !== null;\n\t\t}\n\t\telse if (initial instanceof Function) {\n\t\t\tinstance[i] = null;\n\t\t}\n\t\telse {\n\t\t\tinstance[i] = attrValue;\n\t\t}\n\n\t\tif (!instance[i] && instance[i] !== 0) {\n\t\t\tinstance[i] = (i in o)? o[i] : initial;\n\t\t}\n\t}\n}\n\n// Helpers\n\nvar slice = Array.prototype.slice;\n\nfunction $(expr, con) {\n\treturn typeof expr === \"string\"? (con || document).querySelector(expr) : expr || null;\n}\n\nfunction $$(expr, con) {\n\treturn slice.call((con || document).querySelectorAll(expr));\n}\n\n$.create = function(tag, o) {\n\tvar element = document.createElement(tag);\n\n\tfor (var i in o) {\n\t\tvar val = o[i];\n\n\t\tif (i === \"inside\") {\n\t\t\t$(val).appendChild(element);\n\t\t}\n\t\telse if (i === \"around\") {\n\t\t\tvar ref = $(val);\n\t\t\tref.parentNode.insertBefore(element, ref);\n\t\t\telement.appendChild(ref);\n\t\t}\n\t\telse if (i in element) {\n\t\t\telement[i] = val;\n\t\t}\n\t\telse {\n\t\t\telement.setAttribute(i, val);\n\t\t}\n\t}\n\n\treturn element;\n};\n\n$.bind = function(element, o) {\n\tif (element) {\n\t\tfor (var event in o) {\n\t\t\tvar callback = o[event];\n\n\t\t\tevent.split(/\\s+/).forEach(function (event) {\n\t\t\t\telement.addEventListener(event, callback);\n\t\t\t});\n\t\t}\n\t}\n};\n\n$.fire = function(target, type, properties) {\n\tvar evt = document.createEvent(\"HTMLEvents\");\n\n\tevt.initEvent(type, true, true );\n\n\tfor (var j in properties) {\n\t\tevt[j] = properties[j];\n\t}\n\n\treturn target.dispatchEvent(evt);\n};\n\n$.regExpEscape = function (s) {\n\treturn s.replace(/[-\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n};\n\n$.siblingIndex = function (el) {\n\t/* eslint-disable no-cond-assign */\n\tfor (var i = 0; el = el.previousElementSibling; i++);\n\treturn i;\n};\n\n// Initialization\n\nfunction init() {\n\t$$(\"input.awesomplete\").forEach(function (input) {\n\t\tnew _(input);\n\t});\n}\n\n// Are we in a browser? Check for Document constructor\nif (typeof Document !== \"undefined\") {\n\t// DOM already loaded?\n\tif (document.readyState !== \"loading\") {\n\t\tinit();\n\t}\n\telse {\n\t\t// Wait for it\n\t\tdocument.addEventListener(\"DOMContentLoaded\", init);\n\t}\n}\n\n_.$ = $;\n_.$$ = $$;\n\n// Make sure to export Awesomplete on self when in a browser\nif (typeof self !== \"undefined\") {\n\tself.Awesomplete = _;\n}\n\n// Expose Awesomplete as a CJS module\nif (typeof module === \"object\" && module.exports) {\n\tmodule.exports = _;\n}\n\nreturn _;\n\n}());\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/awesomplete/awesomplete.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 185\n ** module chunks = 0\n **/","// MAKE ANY DISCOUNT CHANGES HERE\n// Update flags and next-product selector accordingly\nconst discount = {\n\tL: 50,\n\tS: 25,\n\tS_5: 25\n}\n\nfunction fetchSession () {\n\treturn fetch('https://session-next.ft.com/', {\n\t\ttimeout: 2000,\n\t\tcredentials: 'include'\n\t});\n}\n\nfunction extractResult (response) {\n\tswitch (response.status) {\n\t\tcase 404:\n\t\t\treturn {};\n\t\tcase 200:\n\t\t\treturn response.json();\n\t\tdefault:\n\t\t\tthrow new Error(`${response.status} - ${response.statusTest}`);\n\t}\n}\n\n\nfunction supportsCors () {\n\treturn ('withCredentials' in new XMLHttpRequest());\n}\n\nfunction decorateTheSession (session) {\n\tsession.isForRegisteredUser = sessionIsForRegisteredUser(session);\n\tsession.isForWeekendUser = sessionIsForWeekendUser(session);\n\tsession.isForAnonymousUser = !session.products;\n\treturn session;\n}\n\nfunction isSignupForm () {\n\treturn window.location.pathname === '/signup'\n\t\t|| window.location.pathname === '/thank-you';\n}\n\nfunction isBarrier () {\n\treturn !!document.querySelector('.barrier');\n}\n\nfunction showPromo (flags) {\n\tconst promo = document.querySelector('.n-header__marketing-promo');\n\n\tif (promo) {\n\t\tconst discountSpan = document.querySelector('#discountPercent');\n\n\t\tif (discountSpan) {\n\t\t\tdiscountSpan.innerText = `${discount[flags.barrierDiscountByCohort]}%`;\n\t\t}\n\t\tpromo.classList.add('visible');\n\t}\n}\n\nfunction checkAnonWithoutSession () {\n\treturn document.cookie.indexOf('USERNAME');\n}\n\nfunction sessionIsForRegisteredUser (session) {\n\treturn session.products\n\t\t&& session.products.indexOf('P0') > -1\n\t\t&& session.products.indexOf('P1') === -1\n\t\t&& session.products.indexOf('P2') === -1;\n}\n\nfunction sessionIsForWeekendUser (session) {\n\treturn session.products\n\t\t&& session.products.indexOf('P6') > -1\n\t\t&& session.products.indexOf('P1') === -1\n\t\t&& session.products.indexOf('P2') === -1;\n}\n\n/**\n * We want to show the marketing promo to:\n * - Anonymous users\n * - Weekend users\n * - Registered users\n *\n * We want to hide the marketing promo from:\n * - Signup form\n * - Barriers\n */\nexport function init (flags) {\n\n\t// If it's the signup form or a barrier, just stop\n\tif (!isSignupForm() && !isBarrier()) {\n\n\t\t// If it's a CORS-compatible browser, fetch the session\n\t\tif (supportsCors()) {\n\t\t\tfetchSession()\n\t\t\t\t.then(extractResult)\n\t\t\t\t.then(decorateTheSession)\n\t\t\t\t.then(function (session) {\n\t\t\t\t\tif (session.isForAnonymousUser || session.isForRegisteredUser || session.isForWeekendUser) {\n\t\t\t\t\t\tshowPromo(flags);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\telse if (checkAnonWithoutSession()) {\n\t\t\t// If can't do cors but anonymous, just show the promo\n\t\t\t// Pending cors solution\n\t\t\tshowPromo(flags);\n\t\t}\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./header/js/promoHandler.js\n **/","import { $$ } from '../utils';\n\nconst IOS_DEVICE_REGEX = /OS (7|8|9|10).* like Mac OS X.*/i;\nconst ANDROID_DEVICE_REGEX = /Android (4\\.[3-9]|[5-9])/i;\n\nfunction isWebAppCapableDevice (userAgent) {\n\treturn IOS_DEVICE_REGEX.test(userAgent);\n}\n\nfunction isModernAndroidDevice (userAgent) {\n\treturn ANDROID_DEVICE_REGEX.test(userAgent);\n}\n\nfunction showWebAppLink () {\n\t$$('.js-webapp-link').forEach(a => {\n\t\ta.pathname = location.pathname;\n\t\ta.search = location.search;\n\t\ta.hidden = false;\n\t});\n}\n\nfunction showAndroidLink () {\n\t$$('.js-android-link').forEach(a => {\n\t\tconst param = 'location=' + encodeURIComponent(location.pathname + location.search);\n\t\ta.search = a.search + (a.search.length ? '&' : '?') + param;\n\t\ta.hidden = false;\n\t});\n}\n\nfunction init () {\n\tif (isWebAppCapableDevice(navigator.userAgent)) {\n\t\tshowWebAppLink();\n\t} else if (isModernAndroidDevice(navigator.userAgent)) {\n\t\tshowAndroidLink();\n\t}\n}\n\nmodule.exports = {\n\tinit,\n\tisWebAppCapableDevice,\n\tisModernAndroidDevice\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./opt-out/index.js\n **/","import store from 'superstore-sync';\n\nconst FLAG_NOT_ON = 'Flag not on';\nconst EXIT_PAGE = 'Exit page';\nconst COOKIE_CONSENT = 'n-cookie-message:consented';\n\nexport default class CookieMessage {\n\n\tstatic init (flags) {\n\t\treturn CookieMessage\n\t\t\t.ensureMessageIsRequired(flags)\n\t\t\t.then(CookieMessage.setupView)\n\t}\n\n\tstatic ensureMessageIsRequired (flags) {\n\t\tif(!flags.get('cookieMessage')) {\n\t\t\treturn Promise.reject(FLAG_NOT_ON);\n\t\t}\n\t\tif (/^\\/(errors|opt-out-confirm)/.test(location.pathname)) {\n\t\t\treturn Promise.reject(EXIT_PAGE);\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\tstatic setupView () {\n\n\t\tif (userHasConsentedToCookies()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = document.createElement('div');\n\n\t\tinsertMessage();\n\n\t\tfunction insertMessage () {\n\t\t\tmessage.innerHTML = CookieMessage.template();\n\t\t\tmessage.querySelector('.cookie-message__close-btn').addEventListener('click', flagUserAsConsentingToCookies);\n\t\t\tdocument.body.insertBefore(message, document.body.firstChild);\n\t\t}\n\n\t\tfunction hideMessage () {\n\t\t\tmessage.classList.add('cookie-message--hidden');\n\t\t}\n\n\t\tfunction flagUserAsConsentingToCookies () {\n\t\t\tstore.local.set(COOKIE_CONSENT, 1);\n\t\t\thideMessage();\n\t\t}\n\n\t\tfunction userHasConsentedToCookies () {\n\t\t\tif (store.local.get(COOKIE_CONSENT) === 1) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// HACK: Whilst FT.com is still around auto-opt user in if they have accepted over there.\n\t\t\tif (/\\bcookieconsent=accepted(?:;|$)/.test(document.cookie)){\n\t\t\t\tflagUserAsConsentingToCookies();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tstatic template () {\n\t\treturn `\n\t\t\t<div class=\"cookie-message cookie-message--banner-centric\"\n\t\t\t\tdata-trackable=\"cookie-message\"\n\t\t\t\ttransition=\"t-cookie-message\">\n\n\t\t\t\t<div class=\"cookie-message__container\">\n\t\t\t\t\t<p class=\"cookie-message__description\">\n\t\t\t\t\t\tBy continuing to use this site you consent to the use of cookies.\n\t\t\t\t\t\t<a class=\"cookie-message__link\"\n\t\t\t\t\t\t\tdata-trackable=\"more-info\"\n\t\t\t\t\t\t\thref=\"http://help.ft.com/tools-services/how-the-ft-manages-cookies-on-its-websites/\">\n\t\t\t\t\t\t\tFind out more\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class=\"cookie-message__close-btn-container\">\n\t\t\t\t\t\t<button class=\"cookie-message__close-btn\" data-trackable=\"close\">\n\t\t\t\t\t\t\t<span class=\"cookie-message__close-btn-label n-util-visually-hidden\">Close</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./cookie-message/index.js\n **/","const superstore = require('superstore-sync');\n\nimport { $ } from '../utils';\n\nconst STORAGE_KEY = 'n-welcome-message-seen';\nconst TEST_KEY = 'n-welcome-message-test';\nconst TEST_VAL = 'can-store';\n\nfunction hasLocalStorage () {\n\tsuperstore.local.set(TEST_KEY, TEST_VAL);\n\tconst retrieved = superstore.local.get(TEST_KEY);\n\tsuperstore.local.unset(TEST_KEY);\n\treturn TEST_VAL === retrieved && superstore.isPersisting();\n}\n\nfunction init () {\n\tconst fixedEl = $('.n-welcome-message--fixed');\n\tconst staticEl = $('.n-welcome-message--static');\n\n\tconst segmentId = String(window.location.search).match(/[?&]segmentId=([^?&])/);\n\tif (segmentId) {\n\t\tif (hasLocalStorage()) {\n\t\t\tsuperstore.local.set(STORAGE_KEY, 1);\n\t\t}\n\t\tfixedEl.hidden = true;\n\t\tstaticEl.hidden = true;\n\t}\n\n\tif (Boolean(superstore.local.get(STORAGE_KEY)) === false && hasLocalStorage()) {\n\t\tconst closeButton = $('button', fixedEl);\n\n\t\tcloseButton.onclick = function () {\n\t\t\tfixedEl.hidden = true;\n\t\t};\n\n\t\tfixedEl.hidden = false;\n\t\tstaticEl.hidden = true;\n\n\t\t// only display the bar the first time\n\t\tsuperstore.local.set(STORAGE_KEY, 1);\n\t}\n};\n\nmodule.exports = { init };\n\n\n\n/** WEBPACK FOOTER **\n ** ./welcome-message/index.js\n **/","// deprecated\nmodule.exports = {};//require('n-message-prompts');\n\n\n\n/** WEBPACK FOOTER **\n ** ./message-prompts/index.js\n **/","'use strict';\n\nfunction init () {\n\trequire('o-footer').init();\n}\n\nmodule.exports = { init };\n\n\n\n/** WEBPACK FOOTER **\n ** ./footer/index.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-footer (bower component)\n ** module id = 193\n ** module chunks = 0\n **/","import Footer from './src/js/footer';\n\nconst constructAll = () => {\n\tFooter.init();\n\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n};\n\ndocument.addEventListener('o.DOMContentLoaded', constructAll);\n\nexport default Footer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-footer/main.js\n **/","import Toggle from 'o-toggle';\nimport layout from './layout';\n\nconst COLLAPSIBLE_BREAKPOINTS = ['default', 'XS', 'S'];\n\nclass Footer {\n\n\tconstructor (footerEl) {\n\t\tif (!footerEl) {\n\t\t\tfooterEl = document.querySelector('[data-o-component=\"o-footer\"]');\n\t\t} else if (typeof footerEl === 'string') {\n\t\t\tfooterEl = document.querySelector(footerEl);\n\t\t}\n\n\t\tthis.footerEl = footerEl;\n\n\t\tlayout(breakpoint => {\n\t\t\tif (COLLAPSIBLE_BREAKPOINTS.indexOf(breakpoint) !== -1 && !this._toggles) {\n\t\t\t\treturn this.setup();\n\t\t\t}\n\n\t\t\tif (COLLAPSIBLE_BREAKPOINTS.indexOf(breakpoint) === -1 && this._toggles) {\n\t\t\t\treturn this.destroy();\n\t\t\t}\n\t\t});\n\n\t\tthis.footerEl.removeAttribute('data-o-footer--no-js');\n\t\tthis.footerEl.setAttribute('data-o-footer--js', '');\n\t}\n\n\tsetup () {\n\t\tthis._toggles = [];\n\n\t\tconst toggleEls = this.footerEl.querySelectorAll('[aria-controls]');\n\n\t\tArray.prototype.forEach.call(toggleEls, toggleEl => {\n\t\t\tconst target = document.getElementById(toggleEl.getAttribute('aria-controls'));\n\t\t\ttoggleEl.setAttribute('role', 'button');\n\t\t\tthis._toggles.push(new Toggle(toggleEl, { target }));\n\t\t});\n\t}\n\n\tdestroy () {\n\t\tthis._toggles.forEach(toggle => toggle.destroy());\n\t\tthis._toggles = null;\n\t}\n\n\tstatic init (rootEl) {\n\t\tif (!rootEl) {\n\t\t\trootEl = document.body;\n\t\t} else if (typeof rootEl === 'string') {\n\t\t\trootEl = document.querySelector(rootEl);\n\t\t}\n\n\t\tconst footerEl = rootEl.querySelector('[data-o-component=\"o-footer\"]');\n\t\treturn new Footer(footerEl);\n\t}\n\n}\n\nexport default Footer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-footer/src/js/footer.js\n **/","import oGrid from 'o-grid';\nimport oViewport from 'o-viewport';\n\nexport default function init (callback) {\n\toViewport.listenTo('resize');\n\n\tlet lastBreakpoint = oGrid.getCurrentLayout();\n\n\tdocument.body.addEventListener('oViewport.resize', () => {\n\t\tconst breakpoint = oGrid.getCurrentLayout();\n\n\t\tif (breakpoint !== lastBreakpoint) {\n\t\t\tcallback(breakpoint);\n\t\t\tlastBreakpoint = breakpoint;\n\t\t}\n\t});\n\n\tcallback(lastBreakpoint);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-footer/src/js/layout.js\n **/","module.exports = {\n\tclient: require('next-myft-client'),\n\tui: require('./ui'),\n\tuiInstant: require('./ui-instant')\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./myft/index.js\n **/","module.exports = require(\"./myft-bower.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** next-myft-client (bower component)\n ** module id = 198\n ** module chunks = 0\n **/","'use strict';\n\nimport MyFtClient from './src/myft-client.js';\n\nexport default new MyFtClient({\n\tapiRoot: '/__myft/api/onsite/',\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/next-myft-client/myft-bower.js\n **/","'use strict';\n\nconst session = require('next-session-client');\nconst fetchres = require('fetchres');\n\nconst lib = {\n\tpersonaliseUrl: require('./lib/personalise-url')\n};\n\nconst emptyResponse = {\n\ttotal: 0,\n\titems: [],\n\tcount: 0\n};\n\nclass MyFtClient {\n\tconstructor ({apiRoot} = {}) {\n\t\tif (!apiRoot) {\n\t\t\tthrow 'User prefs must be constructed with an api root';\n\t\t}\n\t\tthis.apiRoot = apiRoot;\n\t\tthis.loaded = {};\n\t}\n\n\t/**\n\t* loads user's preferred, enabled and created relationships, as well as requested additional relationships\n\t* @param additionalRelationships\n\t* @returns {*}\n\t*/\n\tinit (additionalRelationships = []) {\n\n\t\tif (this.initialised) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\tthis.initialised = true;\n\t\tthis.setPerfMark();\n\t\treturn session.uuid()\n\t\t\t.then(({uuid}) => {\n\n\t\t\t\tif(!uuid) {\n\t\t\t\t\treturn Promise.reject('Session service returned undefined.');\n\t\t\t\t}\n\n\t\t\t\tthis.userId = uuid;\n\n\t\t\t\tthis.headers = {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-FT-Session-Token': session.cookie()\n\t\t\t\t};\n\n\t\t\t\tlet relationships = new Set([\n\t\t\t\t\t{relationship: 'preferred', type: 'preference'},\n\t\t\t\t\t{relationship: 'enabled', type: 'endpoint'},\n\t\t\t\t\t{relationship: 'created', type: 'list'}\n\t\t\t\t]);\n\n\t\t\t\tadditionalRelationships.forEach(rel => {\n\t\t\t\t\tif(!relationships.has(rel)) { relationships.add(rel); }\n\t\t\t\t});\n\n\t\t\t\trelationships.forEach(relationship => this.load(relationship));\n\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\t// Keeps console clean for anonymous users\n\t\t\t\tif (e.message === 'No session cookie found') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthrow e;\n\t\t\t});\n\t}\n\n\tsetPerfMark () {\n\t\tconst p = window.performance || window.msPerformance || window.webkitPerformance || window.mozPerformance;\n\t\tif (!p || !p.mark) return;\n\t\tPromise.all([\n\t\t\tnew Promise(res => {\n\t\t\t\tdocument.addEventListener('myft.user.followed.concept.load', res)\n\t\t\t}),\n\t\t\tnew Promise(res => {\n\t\t\t\tdocument.addEventListener('myft.user.saved.content.load', res)\n\t\t\t})\n\t\t])\n\t\t\t.then(() => p.mark('myftLoaded'));\n\t}\n\n\temit (name, data) {\n\t\tdocument.body.dispatchEvent(new CustomEvent(`myft.${name}`, {\n\t\t\tdetail: data,\n\t\t\tbubbles: true\n\t\t}));\n\t}\n\n\tfetchJson (method, endpoint, data) {\n\t\tlet options = {\n\t\t\tmethod,\n\t\t\theaders: this.headers,\n\t\t\tcredentials: 'include'\n\t\t};\n\n\t\tif (method !== 'GET') {\n\t\t\toptions.body = JSON.stringify(data || {});\n\t\t}\n\t\treturn fetch(this.apiRoot + endpoint, options)\n\t\t\t.then(fetchres.json);\n\n\t}\n\n\tload (relationship) {\n\t\tconst key = `${relationship.relationship}.${relationship.type}`;\n\n\t\tthis.fetchJson('GET', `${this.userId}/${relationship.relationship}/${relationship.type}`)\n\t\t\t.then(results => {\n\t\t\t\tif(!results) {\n\t\t\t\t\tresults = emptyResponse;\n\t\t\t\t}\n\t\t\t\tthis.loaded[key] = results;\n\t\t\t\tthis.emit(`user.${key}.load`, results);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tif (err.message === 'No user data exists') {\n\t\t\t\t\tthis.loaded[key] = emptyResponse;\n\t\t\t\t\tthis.emit(`user.${key}.load`, emptyResponse);\n\t\t\t\t} else {\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tadd (actor, actorId, relationship, type, subject, data) {\n\t\tactorId = this.getFallbackActorIdIfNecessary(actor, actorId);\n\t\treturn this.fetchJson('PUT', `${actor}/${actorId}/${relationship}/${type}/${subject}`, data)\n\t\t\t.then(results => {\n\t\t\t\tconst details = {actorId, results, subject, data};\n\t\t\t\tthis.emit(`${actor}.${relationship}.${type}.add`, details);\n\t\t\t\treturn details;\n\t\t\t});\n\t}\n\n\tremove (actor, actorId, relationship, type, subject, data) {\n\t\tactorId = this.getFallbackActorIdIfNecessary(actor, actorId);\n\t\treturn this.fetchJson('DELETE', `${actor}/${actorId}/${relationship}/${type}/${subject}`)\n\t\t\t.then(()=> {\n\t\t\t\tconst details = {actorId, subject, data};\n\t\t\t\tthis.emit(`${actor}.${relationship}.${type}.remove`, details);\n\t\t\t\treturn details;\n\t\t\t});\n\t}\n\n\tupdateRelationship (actor, actorId, relationship, type, subject, data) {\n\t\tactorId = this.getFallbackActorIdIfNecessary(actor, actorId);\n\t\treturn this.fetchJson('PUT', `${actor}/${actorId}/${relationship}/${type}/${subject}`, data)\n\t\t\t.then(results => {\n\t\t\t\tconst details = {actorId, results, subject, data};\n\t\t\t\tthis.emit(`${actor}.${relationship}.${type}.update`, details);\n\t\t\t\treturn details;\n\t\t\t});\n\t}\n\n\tget (relationship, type, subject) {\n\t\treturn this.getAll(relationship, type).then(items => {\n\t\t\treturn items.filter(item => this.getUuid(item).indexOf(subject) > -1);\n\t\t});\n\t}\n\n\tgetAll (relationship, type) {\n\t\treturn new Promise((resolve) => {\n\t\t\tif (this.loaded[`${relationship}.${type}`]) {\n\t\t\t\tresolve(this.getItems(relationship, type));\n\t\t\t} else {\n\t\t\t\tdocument.body.addEventListener(`myft.user.${relationship}.${type}.load`, () => {\n\t\t\t\t\tresolve(this.getItems(relationship, type));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\thas (relationship, type, subject) {\n\t\treturn this.get(relationship, type, subject)\n\t\t\t.then(items => items.length > 0);\n\t}\n\n\tgetUuid (topic) {\n\t\treturn topic.uuid;\n\t}\n\n\tgetItems (relationship, type) {\n\t\treturn this.loaded[`${relationship}.${type}`].items || [];\n\t}\n\n\tpersonaliseUrl (url) {\n\t\treturn session.uuid()\n\t\t\t.then(({uuid}) => {\n\t\t\t\treturn lib.personaliseUrl(url, uuid);\n\t\t\t});\n\t}\n\n\t//private\n\tgetFallbackActorIdIfNecessary (actor, actorId) {\n\t\tif(!actorId) {\n\t\t\tif(actor === 'user') {\n\t\t\t\treturn this.userId;\n\t\t\t} else {\n\t\t\t\tthrow new Error('no actorId specified');\n\t\t\t}\n\t\t} else {\n\t\t\treturn actorId;\n\t\t}\n\t}\n}\n\nexport default MyFtClient;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/next-myft-client/src/myft-client.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** next-session-client (bower component)\n ** module id = 201\n ** module chunks = 0\n **/","'use strict';\nvar request = require('./src/request');\nvar cache = require('./src/cache');\nvar promises = {};\n\nfunction uuid(){\n\tvar uuid = cache('uuid')\n\n\tif (uuid){\n\t\treturn Promise.resolve({\n\t\t\tuuid:uuid\n\t\t});\n\t}\n\tif (!promises.uuid) {\n\t\tpromises.uuid = request('/uuid').then(function(response){\n\t\t\tcache('uuid', response.uuid);\n\t\t\treturn response;\n\t\t});\n\t}\n\n\treturn promises.uuid;\n}\n\nfunction validate(){\n\treturn request('/validate');\n}\n\nmodule.exports = {\n\tuuid : uuid,\n\tvalidate : validate,\n\tcache : cache,\n\tcookie : function () {\n\t\treturn (/FTSession=([^;]+)/.exec(document.cookie) || [null, ''])[1];\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/next-session-client/main.js\n **/","'use strict';\n\nfunction request(url){\n\t// if we don't have a session token cookie, don't bother..\n\tif (document.cookie.indexOf('FTSession=') === -1) {\n\t\treturn Promise.reject(new Error('No session cookie found'));\n\t}\n\n\treturn fetch(`https://session-next.ft.com${url}`, {\n\t\tcredentials:'include',\n\t\tuseCorsProxy: true\n\t}).then(function(response){\n\t\tif (response.ok){\n\t\t\treturn (url === '/validate') ? Promise.resolve(true) : response.json();\n\t\t} else {\n\t\t\treturn (url === '/validate') ? Promise.resolve(false) : Promise.reject(response.status);\n\t\t}\n\n\t}).catch(function(e) {\n\t\tvar message = e.message || \"\";\n\t\tif (message.indexOf('timed out') > -1 || message.indexOf('Network request failed') > -1 || message.indexOf('Not Found') > -1) {\n\t\t\t// HTTP timeouts and invalid sessions are a fact of life on the internet.\n\t\t\t// We don't want to report this to Sentry.\n\t\t} else {\n\t\t\tdocument.body.dispatchEvent(new CustomEvent('oErrors.log', {\n\t\t\t\tbubbles: true,\n\t\t\t\tdetail: {\n\t\t\t\t\terror: e,\n\t\t\t\t\tinfo: {\n\t\t\t\t\t\tcomponent: 'next-session-client'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}))\n\t\t}\n\t});\n}\n\nmodule.exports = request;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/next-session-client/src/request.js\n **/","'use strict';\n\nvar detailsCache = {};\n\n\nfunction cache(name, value) {\n\tif(typeof name === 'object'){\n\t\tdetailsCache = name;\n\t\treturn;\n\t}\n\n\tif(typeof name === 'string' && typeof value === 'string') {\n\t\tdetailsCache[name] = value;\n\t\treturn;\n\t}\n\n\tif(typeof name === 'string' && typeof value === 'undefined') {\n\t\treturn detailsCache[name] || null;\n\t}\n\n\tif(typeof name === 'undefined' && typeof value === 'undefined') {\n\t\treturn detailsCache;\n\t}\n\n\tthrow new Error('Invalid arguments');\n}\n\ncache.clear = function(){\n\tdetailsCache = {};\n};\n\nmodule.exports = cache;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/next-session-client/src/cache.js\n **/","module.exports = require(\"./src/fetchres.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** fetchres (bower component)\n ** module id = 205\n ** module chunks = 0\n **/","\"use strict\";\n\nexport function json(response) {\n\tif (Array.isArray(response)) {\n\t\treturn Promise.all(response.map(json));\n\t}\n\tif (!response.ok) {\n\t\tthrow new BadServerResponseError(response.status);\n\t}\n\n\tif (response.status === 204) {\n\t\treturn undefined;\n\t}\n\n\treturn response.json()\n\t\t.catch(function(err) {\n\t\t\tif (err.message.indexOf('timeout') > -1) {\n\t\t\t\tthrow new ReadTimeoutError(err.message);\n\t\t\t}\n\t\t\t// probably invalid json\n\t\t\tthrow new InvalidJsonError(err.message);\n\t\t});\n}\n\nexport function text(response) {\n\tif (Array.isArray(response)) {\n\t\treturn Promise.all(response.map(text));\n\t}\n\n\tif (!response.ok) {\n\t\tthrow new BadServerResponseError(response.status);\n\t}\n\n\tif (response.status === 204) {\n\t\treturn undefined;\n\t}\n\n\treturn response.text();\n}\n\nexport class BadServerResponseError extends Error {\n\t// es6 smells\n\t// https://twitter.com/andrewsmatt/status/554792707139584001\n\tconstructor(options) {\n\t\tsuper();\n\t\tthis.message = options;\n\t\tthis.name = 'BadServerResponseError';\n\t}\n}\n\nexport class InvalidJsonError extends Error {\n\tconstructor(options) {\n\t\tsuper();\n\t\tthis.message = options;\n\t\tthis.name = 'InvalidJsonError';\n\t}\n}\n\nexport class ReadTimeoutError extends Error {\n\tconstructor(options) {\n\t\tsuper();\n\t\tthis.message = options;\n\t\tthis.name = 'ReadTimeoutError';\n\t}\n}\n\nexport function originatedError(err) {\n\tif (err.name === BadServerResponseError.name\n\t\t|| err.name === InvalidJsonError.name\n\t\t|| err.name === ReadTimeoutError.name) {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/fetchres/src/fetchres.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/possibleConstructorReturn.js\n ** module id = 207\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/inherits.js\n ** module id = 208\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/set-prototype-of.js\n ** module id = 209\n ** module chunks = 0\n **/","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/set-prototype-of.js\n ** module id = 210\n ** module chunks = 0\n **/","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.set-prototype-of.js\n ** module id = 211\n ** module chunks = 0\n **/","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_set-proto.js\n ** module id = 212\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/create.js\n ** module id = 213\n ** module chunks = 0\n **/","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D){\n  return $Object.create(P, D);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/create.js\n ** module id = 214\n ** module chunks = 0\n **/","var $export = require('./_export')\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', {create: require('./_object-create')});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.create.js\n ** module id = 215\n ** module chunks = 0\n **/","'use strict';\n\nconst isImmutableUrl = require('./is-immutable-url');\nconst isValidUuid = require('./is-valid-uuid');\n\nmodule.exports = function (url, userId) {\n\tif (isImmutableUrl(url)) {\n\t\treturn url;\n\t}\n\n\tif(!userId || !userId.length || !isValidUuid(userId)) {\n\t\tthrow new Error('Invalid user uuid: ' + userId);\n\t}\n\n\treturn url.replace(/myft(?:\\/([a-zA-z\\-]*))?(\\/.[^$\\/])?\\/?/, function ($0, $1, $2) {\n\t\treturn 'myft/' + ($1 ? $1 + '/' : '') + userId + ($2 || '');\n\t});\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/next-myft-client/src/lib/personalise-url.js\n **/","'use strict';\n\nconst isPersonalisedUrl = require('./is-personalised-url');\nconst isLegacyUrl = require('./is-legacy-url');\n\nmodule.exports = url => /^\\/(__)?myft\\/api\\//.test(url) ||\n\t/^\\/(__)?myft\\/product-tour/.test(url) ||\n\t/^\\/(__)?myft\\/list/.test(url) ||\n\tisLegacyUrl(url) ||\n\tisPersonalisedUrl(url);\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/next-myft-client/src/lib/is-immutable-url.js\n **/","'use strict';\n\nmodule.exports = function (path) {\n\treturn /\\/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/.test(path);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/next-myft-client/src/lib/is-personalised-url.js\n **/","module.exports = path => /^\\/myft\\/(my-news|my-topics|preferences)/.test(path);\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/next-myft-client/src/lib/is-legacy-url.js\n **/","'use strict';\n\nmodule.exports = str => /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(str);\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/next-myft-client/src/lib/is-valid-uuid.js\n **/","//TODO: refactor the massive out of this\n\nconst nextButtons = require('../buttons');\nconst nNotification = require('../notification');\nconst Overlay = require('../overlay');\nconst myftClient = require('next-myft-client');\nconst Delegate = require('ftdomdelegate');\n\nconst delegate = new Delegate(document.body);\nconst grabUrlHashWithPrefix = require('./js/grab-url-hash-with-prefix');\nconst followEmail = require('./js/follow-email');\nconst uuid = require('../utils').uuid;\nconst $$ = require('../utils').$$\n\nconst subscribeUrl = '/products?segID=400863&segmentID=190b4443-dc03-bd53-e79b-b4b6fbd04e64';\nconst signInLink = '/login';\n\nlet flags;\nlet results = {};\nlet initialised;\nlet collectionPending = false;\n\nconst types = {\n\tsaved: 'content',\n\tfollowed: 'concept',\n\tpreferred: 'preference',\n\tcontained: 'content'\n};\n\nconst actors = {\n\tsaved: 'user',\n\tfollowed: 'user',\n\tpreferred: 'user',\n\tcontained: 'list'\n};\n\nconst uiSelectors = {\n\tsaved: '[data-myft-ui=\"saved\"]',\n\tfollowed: '[data-myft-ui=\"follow\"]',\n\tpreferred: '[data-myft-ui=\"prefer\"]',\n\tcontained: '[data-myft-ui=\"contained\"]'\n};\n\nconst idProperties = {\n\tsaved: 'data-content-id',\n\tfollowed: 'data-concept-id',\n\tpreferred: 'data-preference-name',\n\tcontained: 'data-content-id'\n};\n\nconst nNotificationMsgs = {\n\tfollowAnon: `Please <a href=\"${subscribeUrl}\" data-trackable=\"Subscribe\">subscribe</a> or <a href=\"${signInLink}\" data-trackable=\"Sign In\">sign in</a> to follow this topic.`,\n\tsaveAnon: `Please <a href=\"${subscribeUrl}\" data-trackable=\"Subscribe\">subscribe</a> or <a href=\"${signInLink}\" data-trackable=\"Sign In\">sign in</a> to save this article.`,\n\topted: 'You‘ve opted into our new site. You can return to FT.com at any time.'\n};\n\nfunction myFtFeatureFromEvent (ev) {\n\treturn ev.type.replace('myft.', '').split('.')[1];\n}\n\nfunction actionFromEvent (ev) {\n\tconst eventType = ev.type.split('.');\n\treturn eventType[eventType.length - 1];\n}\n\nfunction getUuid (item) {\n\treturn item.UUID || item.uuid;\n}\n\nfunction toggleButton (buttonEl, state) {\n\tconst isPressed = buttonEl.getAttribute('aria-pressed') === 'true';\n\n\tif (state !== isPressed) {\n\t\tnextButtons.toggleState(buttonEl);\n\t}\n\tbuttonEl.removeAttribute('disabled');\n}\n\n\nfunction updateUiForFeature (opts) {\n\tif (!uiSelectors[opts.myftFeature]) {\n\t\treturn;\n\t}\n\n\tconst featureForms = $$(uiSelectors[opts.myftFeature], opts.context);\n\tconst idProperty = idProperties[opts.myftFeature];\n\tconst uuids = opts.subjects.map(getUuid);\n\n\t// if there are multiple buttons, use the button with the same value as the rel property\n\t// if there are no multiple buttons, use opts.state\n\tfeatureForms.forEach(form => {\n\t\tconst index = uuids.indexOf(form.getAttribute(idProperty));\n\t\tif (index > -1) {\n\t\t\tconst relBtns = form.querySelectorAll('button[name^=\"_rel.\"]');\n\t\t\tconst hasRelBtns = (relBtns.length > 0);\n\t\t\tlet activeMultiButton;\n\n\t\t\t// if the form has _rel.foo buttons, but there is no _rel.foo in the subject object nor an 'off' ('delete') button, then go to next iteration\n\t\t\t// this is for when 1 item is changed on a page with > 1 form, and the returned rel object only has a property for the changed item\n\t\t\tif (hasRelBtns) {\n\t\t\t\tactiveMultiButton = getActiveMultiButton(relBtns, form, opts.subjects[index]);\n\t\t\t\tif (!activeMultiButton) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$$('button', form).forEach(button => {\n\t\t\t\tconst newButtonState = (hasRelBtns) ? (button === activeMultiButton) : opts.state;\n\t\t\t\ttoggleButton(button, newButtonState);\n\t\t\t});\n\n\t\t\t// add a BEM modifier for on/off-only styling of the form (e.g. show RSS link if RSS pref is on)\n\t\t\tform.classList.toggle(`myft-ui--${opts.myftFeature}-on`, !!opts.state);\n\t\t}\n\t});\n}\n\nfunction getActiveMultiButton (relBtns, form, subject) {\n\tconst relName = relBtns[0].getAttribute('name').replace('_rel.', '');\n\tconst relValue = subject._rel && subject._rel[relName];\n\t// can remove delete button part once old myft alerts page is retired\n\tconst activeButton = form.querySelector(`button[value=\"${relValue || 'delete'}\"]`);\n\treturn activeButton;\n}\n\nfunction openOverlay (html, { name = 'myft-ui', title = '&nbsp;', shaded = true }) {\n\tconst overlay = new Overlay(name, {\n\t\theading: { title, shaded },\n\t\thtml\n\t});\n\n\toverlay.open();\n\n\treturn new Promise(resolve => {\n\t\tdocument.body.addEventListener('oOverlay.ready', () => resolve(overlay));\n\t});\n}\n\nfunction setUpSaveToExistingListListeners (overlay, contentId) {\n\n\tconst saveToExistingListButton = overlay.content.querySelector('.js-save-to-existing-list');\n\tconst listSelect = overlay.content.querySelector('.js-list-select');\n\n\tif (saveToExistingListButton) {\n\t\tsaveToExistingListButton.addEventListener('click', ev => {\n\t\t\tev.preventDefault();\n\n\t\t\tif(!listSelect.value) {\n\t\t\t\tconst nameFormGroup = overlay.content.querySelector('.js-uuid-group');\n\t\t\t\tnameFormGroup.className += ' o-forms--error n-myft-ui__error--no-name';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst listId = listSelect.options[listSelect.selectedIndex].value;\n\t\t\tmyftClient.add('list', listId, 'contained', 'content', contentId)\n\t\t\t\t.then(detail => {\n\t\t\t\t\tupdateAfterIO('contained', detail);\n\t\t\t\t\toverlay.close();\n\t\t\t\t});\n\t\t});\n\t}\n}\n\nfunction setUpNewListListeners (overlay, contentId) {\n\n\tconst createListButton = overlay.content.querySelector('.js-create-list');\n\tconst nameInput = overlay.content.querySelector('.js-name');\n\tconst descriptionInput = overlay.content.querySelector('.js-description');\n\n\tcreateListButton.addEventListener('click', ev => {\n\t\tev.preventDefault();\n\n\t\tif(!nameInput.value) {\n\t\t\tconst nameFormGroup = overlay.content.querySelector('.js-name-group');\n\t\t\tnameFormGroup.className += ' o-forms--error n-myft-ui__error--no-name';\n\t\t\treturn;\n\t\t}\n\n\t\tconst createListData = {\n\t\t\tname: nameInput.value,\n\t\t\tdescription: descriptionInput.value\n\t\t};\n\n\t\tmyftClient.add('user', null, 'created', 'list', uuid(), createListData)\n\t\t\t.then(detail => {\n\t\t\t\tif(contentId) {\n\t\t\t\t\treturn myftClient.add('list', detail.subject, 'contained', 'content', contentId);\n\t\t\t\t} else {\n\t\t\t\t\treturn detail;\n\t\t\t\t}\n\n\t\t\t})\n\t\t\t.then(detail => {\n\t\t\t\tif(contentId){\n\t\t\t\t\tupdateAfterIO('contained', detail);\n\t\t\t\t}\n\t\t\t\toverlay.close();\n\t\t\t})\n\t\t\t.catch(err => {\n\n\t\t\t\t// TODO: this should use some formalised system for handling generic errors (context: https://github.com/Financial-Times/next-myft-ui/pull/65)\n\t\t\t\tnNotification.show({\n\t\t\t\t\tcontent: contentId ? 'Error adding article to new list' : 'Error creating new list',\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\tthrow err;\n\t\t\t});\n\t});\n\n}\n\nfunction showListsOverlay (overlayTitle, formHtmlUrl, contentId) {\n\n\tmyftClient.personaliseUrl(formHtmlUrl)\n\t\t.then(url => fetch(url, {\n\t\t\tcredentials: 'same-origin'\n\t\t}))\n\t\t.then(res => res.text())\n\t\t.then(html => openOverlay(html, { title: overlayTitle }))\n\t\t.then(overlay => {\n\t\t\tsetUpSaveToExistingListListeners(overlay, contentId);\n\t\t\tsetUpNewListListeners(overlay, contentId);\n\t\t});\n\n}\n\nfunction showCopyToListOverlay (contentId, excludeList) {\n\tshowListsOverlay('Copy to list', `/myft/list?fragment=true&copy=true&contentId=${contentId}&excludeList=${excludeList}`, contentId)\n}\n\nfunction showArticleSavedOverlay (contentId, fromClippings) {\n\tshowListsOverlay('Article saved', `/myft/list?fragment=true&fromArticleSaved=true&contentId=${contentId}${fromClippings && '&fromClippings=true'}`, contentId)\n}\n\nfunction showCreateListOverlay () {\n\tshowListsOverlay('Create list', '/myft/list?fragment=true');\n}\n\nfunction getMessage (relationship, detail, href) {\n\tdetail.data = detail.data || {};\n\n\tconst messages = {\n\t\tfollowed:\n\t\t\t`<a href=\"/myft\" class=\"myft-ui__logo\" data-trackable=\"myft-logo\"><abbr title=\"myFT\" class=\"myft-ui__icon\"></abbr></a>\n\t\t\t${detail.results ? 'You are following' : 'You unfollowed'} <b>${detail.data.name}</b>.\n\t\t\t<a href=\"${href}\" data-trackable=\"alerts\">Manage topics</a>`,\n\t\tsaved:\n\t\t\t`<a href=\"/myft\" class=\"myft-ui__logo\" data-trackable=\"myft-logo\"><abbr title=\"myFT\" class=\"myft-ui__icon\"></abbr></a>\n\t\t\t${detail.results ? 'Article added to your' : 'Article removed from your'}\n\t\t\t<a href=\"${href}\" data-trackable=\"saved-cta\">saved articles</a>`,\n\t\tcontained:\n\t\t\t`<a href=\"/myft\" class=\"myft-ui__logo\" data-trackable=\"myft-logo\"><abbr title=\"myFT\" class=\"myft-ui__icon\"></abbr></a>\n\t\t\t${detail.results ? `Article added to your list.\n\t\t\t<a href=\"${href}\" data-trackable=\"alerts\">View list</a>` : 'Article removed from your list'}`\n\t};\n\n\treturn (messages.hasOwnProperty(relationship)) ? messages[relationship]: '';\n}\n\nfunction getPersonaliseUrlPromise (page, relationship, detail) {\n\treturn myftClient.personaliseUrl(`/myft/${page}`)\n\t\t.then(personalisedUrl => ({\n\t\t\ttype: 'default',\n\t\t\tmessage: getMessage(relationship, detail, personalisedUrl)\n\t\t}));\n}\n\nfunction updateAfterIO (myftFeature, detail, action) {\n\n\tupdateUiForFeature({\n\t\tmyftFeature,\n\t\tsubjects: [{ uuid: detail.subject, '_rel': detail.data && detail.data._rel }],\n\t\tstate: !!detail.results\n\t});\n\n\tlet messagePromise = Promise.resolve({});\n\n\tswitch (myftFeature) {\n\t\tcase 'followed':\n\t\t\tif (flags.get('myFtFollowEmail') && detail.results && !collectionPending && action !== 'update') {\n\n\t\t\t\tif (!followEmail.prefs.subscribedToDigest && !followEmail.prefs.userDismissed && detail.data.name) {\n\n\t\t\t\t\treturn myftClient.personaliseUrl(`/myft/api/onsite/follow-email/form?fragment=true&name=${encodeURIComponent(detail.data.name)}`)\n\t\t\t\t\t\t.then(url => fetch(url, { credentials: 'same-origin' }))\n\t\t\t\t\t\t.then(res => res.text())\n\t\t\t\t\t\t.then(html => openOverlay(html, {\n\t\t\t\t\t\t\tname: 'myft-follow',\n\t\t\t\t\t\t\tshaded: false\n\t\t\t\t\t\t}))\n\t\t\t\t\t\t.then(overlay => followEmail.setUpOverlayListeners(overlay))\n\t\t\t\t\t\t.catch(() => null);\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'saved':\n\t\t\tif (flags.get('myftLists') && detail.results) {\n\t\t\t\tmessagePromise = myftClient.getAll('created', 'list')\n\t\t\t\t\t.then(createdLists => createdLists.filter(list => !list.isRedirect))\n\t\t\t\t\t.then(createdLists => {\n\t\t\t\t\t\tif (createdLists.length) {\n\t\t\t\t\t\t\tshowArticleSavedOverlay(detail.subject);\n\t\t\t\t\t\t\treturn {message: null};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {};\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'contained':\n\t\t\tmessagePromise = getPersonaliseUrlPromise(`list/${detail.actorId}`, 'contained', detail);\n\t\t\tbreak;\n\t\tcase 'preferred':\n\t\t\t//FIXME: remove this and make myFtClient.loaded update after client-side changes\n\t\t\tif (detail.subject === 'email-digest') {\n\t\t\t\tfollowEmail.prefs.subscribedToDigest = true;\n\t\t\t} else if (detail.subject === 'follow-email-dismissed') {\n\t\t\t\tfollowEmail.prefs.userDismissed = true;\n\t\t\t}\n\t\t\tbreak;\n\t}\n\n\tmessagePromise\n\t\t.then(({message = null, type = null}) => {\n\t\t\tif (!message) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnNotification.show({\n\t\t\t\tcontent: message,\n\t\t\t\ttype,\n\t\t\t\ttrackable: 'myft-feedback-notification'\n\t\t\t});\n\t\t});\n\n}\n\nfunction onLoad (ev) {\n\tconst myftFeature = myFtFeatureFromEvent(ev);\n\tresults[myftFeature] = ev.detail.Items || ev.detail.items || [];\n\n\t//FIXME: remove this and make myFtClient.loaded update after client-side changes\n\tif (myftFeature === 'preferred') {\n\t\tfollowEmail.setInitialPrefs();\n\t}\n\n\tupdateUiForFeature({\n\t\tmyftFeature,\n\t\tsubjects: results[myftFeature],\n\t\tstate: true\n\t});\n}\n\n// extract properties with _rel. prefix into nested object, as expected by the API for relationship props\nfunction extractMetaData (inputs) {\n\tconst meta = {};\n\n\tinputs.forEach((input) => {\n\t\tif (input.name.startsWith('_rel.')) {\n\t\t\tconst key = input.name.slice('_rel.'.length);\n\t\t\tmeta._rel = meta._rel || {};\n\t\t\tmeta._rel[key] = input.value;\n\n\t\t} else if (input.type === 'hidden') {\n\t\t\tmeta[input.name] = input.value;\n\t\t}\n\t});\n\n\treturn meta;\n}\n\nfunction getInteractionHandler (myftFeature) {\n\treturn function (ev, el) {\n\t\tev.preventDefault();\n\n\t\tconst buttonWithValTriggered = !!(el.tagName.toLowerCase() === 'button' && el.name && el.value);\n\t\tconst activeButton = (buttonWithValTriggered) ? el : el.querySelector('button');\n\t\tconst form = (buttonWithValTriggered) ? el.closest('form') : el;\n\t\tconst formButtons = (buttonWithValTriggered) ? $$('button', form) : [activeButton];\n\n\t\tif (formButtons.some((button) => button.hasAttribute('disabled'))) {\n\t\t\treturn;\n\t\t}\n\n\t\tformButtons.forEach((button) => button.setAttribute('disabled', ''));\n\n\t\tconst isPressed = activeButton.getAttribute('aria-pressed') === 'true';\n\n\t\tlet action;\n\t\tif (buttonWithValTriggered) {\n\t\t\taction = (activeButton.value === 'delete') ? 'remove' : 'add';\n\t\t} else {\n\t\t\taction = (isPressed) ? 'remove' : 'add';\n\t\t}\n\n\t\tconst id = form.getAttribute(idProperties[myftFeature]);\n\t\tconst type = types[myftFeature];\n\t\tconst hiddenFields = $$('input[type=\"hidden\"]', form);\n\t\tconst metaFields = (buttonWithValTriggered) ? [activeButton, ...hiddenFields] : hiddenFields;\n\n\t\tlet meta = extractMetaData(metaFields);\n\n\t\tif (~['add', 'remove'].indexOf(action)) {\n\t\t\tconst actorId = form.getAttribute('data-actor-id');\n\n\t\t\tif (type === 'concept') {\n\t\t\t\tconst conceptIds = id.split(',');\n\t\t\t\tconst taxonomies = meta.taxonomy.split(',');\n\t\t\t\tconst names = meta.name.split(',');\n\n\t\t\t\t// Prevents the email overlay from triggering if there are bulk follow actions\n\t\t\t\tif (conceptIds.length > 1) {\n\t\t\t\t\tcollectionPending = true;\n\t\t\t\t}\n\n\t\t\t\tconst followPromises = conceptIds.map((conceptId, i) => {\n\t\t\t\t\tconst singleMeta = Object.assign({}, meta, {\n\t\t\t\t\t\tname: names[i],\n\t\t\t\t\t\ttaxonomy: taxonomies[i]\n\t\t\t\t\t});\n\t\t\t\t\treturn myftClient[action](actors[myftFeature], actorId, myftFeature, type, conceptId, singleMeta);\n\t\t\t\t});\n\n\t\t\t\tPromise.all(followPromises)\n\t\t\t\t\t.then(() => toggleButton(activeButton, action === 'add'))\n\t\t\t\t\t.catch(() => {})\n\t\t\t\t\t.then(() => collectionPending = false)\n\n\t\t\t} else {\n\t\t\t\tmyftClient[action](actors[myftFeature], actorId, myftFeature, type, id, meta);\n\t\t\t}\n\n\t\t} else {\n\t\t\tmyftClient[action](myftFeature, type, id, meta);\n\t\t}\n\t};\n}\n\nexport function init (opts) {\n\tif (initialised) {\n\t\treturn;\n\t}\n\tinitialised = true;\n\tflags = opts.flags;\n\n\tgrabUrlHashWithPrefix('myft:notification:')\n\t\t.then(messageKey => {\n\t\t\tif (!messageKey || !nNotificationMsgs.hasOwnProperty(messageKey)) { return; }\n\t\t\tnNotification.show({\n\t\t\t\tcontent: nNotificationMsgs[messageKey],\n\t\t\t\ttype: 'clippings',\n\t\t\t\tduration: 0\n\t\t\t});\n\t\t});\n\n\tgrabUrlHashWithPrefix('myft:list-overlay:')\n\t\t.then(messageKey => {\n\t\t\tif (messageKey === 'clippings') {\n\t\t\t\tconst matches = window.location.pathname.match(/^\\/content\\/([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/);\n\t\t\t\tif (matches && matches.length) {\n\t\t\t\t\tshowArticleSavedOverlay(matches[1], true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\tif (opts && opts.anonymous) {\n\t\t['follow', 'save'].forEach(action => {\n\t\t\tdelegate.on('submit', `.n-myft-ui--${action}`, ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tnNotification.show({\n\t\t\t\t\tcontent: nNotificationMsgs[`${action}Anon`],\n\t\t\t\t\ttrackable: 'myft-anon'\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t} else {\n\t\tpersonaliseLinks();\n\n\t\tObject.keys(uiSelectors).forEach(myftFeature => {\n\t\t\tif (myftClient.loaded[`myftFeature.${types[myftFeature]}`]) {\n\t\t\t\tresults[myftFeature] = myftClient.loaded[`myftFeature.${types[myftFeature]}`];\n\n\t\t\t\tupdateUiForFeature({\n\t\t\t\t\tmyftFeature,\n\t\t\t\t\tsubjects: results[myftFeature],\n\t\t\t\t\tstate: true\n\t\t\t\t});\n\n\t\t\t\t//FIXME: remove this and make myFtClient.loaded update after client-side changes\n\t\t\t\tif (myftFeature === 'preferred') {\n\t\t\t\t\tfollowEmail.setInitialPrefs();\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tdocument.body.addEventListener(`myft.user.${myftFeature}.${types[myftFeature]}.load`, onLoad);\n\t\t\t}\n\n\t\t\tdocument.body.addEventListener(`myft.${actors[myftFeature]}.${myftFeature}.${types[myftFeature]}.add`, ev => updateAfterIO(myFtFeatureFromEvent(ev), ev.detail, actionFromEvent(ev)));\n\t\t\tdocument.body.addEventListener(`myft.${actors[myftFeature]}.${myftFeature}.${types[myftFeature]}.remove`, ev => updateAfterIO(myFtFeatureFromEvent(ev), ev.detail, actionFromEvent(ev)));\n\t\t\tdocument.body.addEventListener(`myft.${actors[myftFeature]}.${myftFeature}.${types[myftFeature]}.update`, ev => updateAfterIO(myFtFeatureFromEvent(ev), ev.detail, actionFromEvent(ev)));\n\n\t\t\tdelegate.on('submit', uiSelectors[myftFeature], getInteractionHandler(myftFeature));\n\t\t});\n\n\t\tdelegate.on('click', '.n-myft-ui--prefer-group button', getInteractionHandler('preferred'));\n\n\t\t//copy from list to list\n\t\tdelegate.on('click', '[data-myft-ui=\"copy-to-list\"]', ev => {\n\t\t\tev.preventDefault();\n\t\t\tshowCopyToListOverlay(ev.target.getAttribute('data-content-id'), ev.target.getAttribute('data-actor-id'));\n\t\t});\n\n\t\tdelegate.on('click', '[data-myft-ui=\"create-list\"]', ev => {\n\t\t\tev.preventDefault();\n\t\t\tshowCreateListOverlay();\n\t\t});\n\t}\n}\n\nexport function\tupdateUi (el, ignoreLinks) {\n\tif (!ignoreLinks) {\n\t\tpersonaliseLinks(el);\n\t}\n\n\tObject.keys(uiSelectors).forEach(myftFeature => {\n\t\tif (!results[myftFeature]) {\n\t\t\treturn;\n\t\t}\n\n\t\tupdateUiForFeature({\n\t\t\tmyftFeature,\n\t\t\tsubjects: results[myftFeature],\n\t\t\tstate: true,\n\t\t\tcontext: el\n\t\t});\n\t});\n}\n\nexport function personaliseLinks (el) {\n\tconst links = (el && el.nodeName === 'A') ? [el] : $$('a[href^=\"/myft\"]', el);\n\tlinks.forEach(link => {\n\t\tmyftClient.personaliseUrl(link.getAttribute('href'))\n\t\t\t.then(personalisedUrl => link.setAttribute('href', personalisedUrl));\n\t});\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./myft/ui.js\n **/","module.exports = {\n\ttoggleState: function (btn, alreadyToggled) {\n\n\t\tconst ariaLabel = btn.getAttribute('aria-label');\n\t\tconst alternateAriaLabel = btn.getAttribute('data-alternate-label');\n\n\t\tif (ariaLabel) {\n\t\t\tbtn.setAttribute('aria-label', alternateAriaLabel);\n\t\t\tbtn.setAttribute('title', alternateAriaLabel);\n\t\t\tbtn.setAttribute('data-alternate-label', ariaLabel);\n\t\t}\n\t\tconst text = btn.textContent || btn.innerText;\n\n\t\tif (text) {\n\t\t\tconst alternateText = btn.getAttribute('data-alternate-text') || alternateAriaLabel;\n\t\t\tbtn.textContent = alternateText;\n\t\t\tbtn.setAttribute('data-alternate-text', text);\n\t\t}\n\n\t\tconst isPressed = btn.getAttribute('aria-pressed') === 'true';\n\n\t\tif (!alreadyToggled) {\n\t\t\tbtn.setAttribute('aria-pressed', !isPressed);\n\t\t}\n\n\t\tbtn.dispatchEvent(new CustomEvent('nButtons.stateChange', {\n\t\t\tdetail: {\n\t\t\t\tstate: isPressed\n\t\t\t},\n\t\t\tbubbles: true\n\t\t}));\n\n\t\treturn btn;\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./buttons/index.js\n **/","module.exports = require('n-notification');\n\n\n\n/** WEBPACK FOOTER **\n ** ./notification/index.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** n-notification (bower component)\n ** module id = 224\n ** module chunks = 0\n **/","const template = require('./src/js/template');\nconst timeoutDuration = 5000;\n\nconst stack = [];\nconst eventShow = (e) => show(e.detail);\nlet isInstantiated = false;\nlet container;\n\nclass Notice {\n\n\tconstructor (options) {\n\n\t\toptions.trackable = options.trackable || `notification-${options.type}`;\n\n\t\tthis.notice = document.createElement('div');\n\t\tthis.notice.appendChild(template(options));\n\t\tthis.notice.querySelector('button').onclick = this.hide.bind(this);\n\n\t\tconst firstChild = container.firstChild;\n\t\tcontainer.insertBefore(this.notice, firstChild);\n\n\t\tif(options.duration !== 0){\n\t\t\tthis.timeout = setTimeout(this.hide.bind(this), options.duration || timeoutDuration);\n\t\t}\n\n\t\tthis.optionsContent = options.content;\n\t}\n\n\thide() {\n\t\tclearTimeout(this.timeout);\n\t\tthis.notice.parentNode.removeChild(this.notice);\n\t\tconst index = stack.indexOf(this);\n\t\tif (index > -1) {\n\t\t\tstack.splice(index, 1);\n\t\t}\n\t\tthis.dispatchNotificationCloseEvent();\n\t}\n\n\tdispatchNotificationCloseEvent () {\n\t\tdocument.dispatchEvent(new CustomEvent('nNotification.close'));\n\t}\n}\n\nfunction show (options) {\n\tif (!isInstantiated) {init();}\n\tif (stack.length > 0 && stack[stack.length - 1].optionsContent === options.content) {\n\t\tlet lastNotice = stack[stack.length - 1];\n\t\tclearTimeout(lastNotice.timeout);\n\t\tlastNotice.timeout = setTimeout(lastNotice.hide.bind(lastNotice), timeoutDuration);\n\t} else {\n\t\tstack.push(new Notice(options));\n\t}\n}\n\nfunction init (){\n\tif (isInstantiated) return;\n\n\tcontainer = document.createElement('div');\n\tcontainer.className = ('n-notification');\n\tdocument.body.appendChild(container);\n\tdocument.addEventListener(\"nNotification.show\", eventShow, false);\n\tisInstantiated = true;\n}\n\nfunction teardown() {\n\tstack.forEach(item => item.hide());\n\tstack.length = 0;\n\tcontainer.parentNode.removeChild(container);\n\tdocument.removeEventListener(\"nNotification.show\", eventShow, false);\n\tisInstantiated = false;\n}\n\nmodule.exports = {\n\tinit: init,\n\tshow: show,\n\tteardown: teardown\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/n-notification/main.js\n **/","module.exports = (options) => {\n\n\tconst noticeEl = document.createElement('div');\n\tnoticeEl.className = `n-notification__item n-notification--${options.type ? options.type : 'default'}`;\n\tnoticeEl.setAttribute(\"role\", \"alert\");\n\tnoticeEl.setAttribute(\"data-trackable\", options.trackable);\n\n\tconst contentWrapperEl = document.createElement('div');\n\tcontentWrapperEl.className = \"n-notification__content-wrapper\";\n\n\tif (options.title) {\n\t\tconst titleEl = document.createElement('h3');\n\t\ttitleEl.className = \"n-notification__title\";\n\t\ttitleEl.innerHTML = options.title;\n\t\tcontentWrapperEl.appendChild(titleEl);\n\t}\n\n\tif (options.content) {\n\t\tconst contentEl = document.createElement('div');\n\t\tcontentEl.className = \"n-notification__content\";\n\t\tcontentEl.innerHTML = options.content;\n\t\tcontentWrapperEl.appendChild(contentEl);\n\t}\n\n\tconst buttonEl = document.createElement('button');\n\tbuttonEl.className = \"n-notification__close\";\n\tbuttonEl.setAttribute(\"data-trackable\", \"close\");\n\tbuttonEl.innerHTML = \"Close\";\n\n\tnoticeEl.appendChild(contentWrapperEl);\n\tnoticeEl.appendChild(buttonEl);\n\n\treturn noticeEl;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/n-notification/src/js/template.js\n **/","module.exports = require('o-overlay');\nmodule.exports.__wrapsOrigami = true;\n\n\n\n/** WEBPACK FOOTER **\n ** ./overlay/index.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-overlay (bower component)\n ** module id = 228\n ** module chunks = 0\n **/","const oOverlay = require('./src/js/overlay');\nconst constructAll = function() {\n\toOverlay.init();\n\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n};\n\ndocument.addEventListener('o.DOMContentLoaded', constructAll);\nmodule.exports = oOverlay;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-overlay/main.js\n **/","const Delegate = require('ftdomdelegate');\nconst viewport = require('o-viewport');\nconst oLayers = require('o-layers');\nconst utils = require('./utils');\nconst overlays = {};\n\nconst checkOptions = function(opts) {\n\tif (opts.trigger && !(opts.trigger instanceof HTMLElement)) {\n\t\topts.trigger = document.querySelector(opts.trigger);\n\t}\n\n\t// There can't be a heading with an empty title\n\tif (opts.heading && (!opts.heading.title || !opts.heading.title.trim())) {\n\t\tthrow new Error('\"o-overlay error\": To have a heading, a non-empty title needs to be set');\n\t}\n\n\t// Overlays that don't point at anything should be modal by default\n\tif (!opts.arrow && typeof opts.modal === 'undefined') {\n\t\topts.modal = true;\n\t}\n\n\tif (opts.compact && opts.heading && opts.heading.shaded) {\n\t\tthrow new Error('\"o-overlay error\": Compact overlays can\\'t have a shaded header');\n\t}\n\n\tif (opts.arrow) {\n\t\t// Default arrow position is 'left'\n\t\tif (!opts.arrow.position) {\n\t\t\topts.arrow.position = 'left';\n\t\t}\n\n\t\t// Overlays with arrows can not be modal\n\t\tif (opts.modal) {\n\t\t\topts.modal = false;\n\t\t}\n\n\t\tif (opts.arrow.position !== 'left' && opts.arrow.position !== 'right' && opts.arrow.position !== 'top' && opts.arrow.position !== 'bottom') {\n\t\t\tthrow new Error('\"o-overlay error\": The position of the arrow has to be either \"top\", \"bottom\", \"left\" or \"right\".');\n\t\t}\n\n\t\t// If the position of the arrow is 'top' or 'bottom', the heading can't be shaded\n\t\tif ((opts.arrow.position === 'top' || opts.arrow.position === 'bottom') && (opts.heading && opts.heading.shaded)) {\n\t\t\tthrow new Error('\"o-overlay error\": The position of the arrow can\\'t be set to \"top\" or \"bottom\" when the shaded heading option is set to true.');\n\t\t}\n\n\t\t// Default target for the arrow will be the trigger\n\t\tif (!opts.arrow.target) {\n\t\t\tif (opts.trigger) {\n\t\t\t\topts.arrow.target = opts.trigger;\n\t\t\t} else {\n\t\t\t\tthrow new Error('\"o-overlay error\": For overlays with arrows, if you don\\'t set a trigger, you do need to set a target for the overlay.');\n\t\t\t}\n\t\t} else if (!(opts.arrow.target instanceof HTMLElement)) {\n\t\t\topts.arrow.target = document.querySelector(opts.arrow.target);\n\t\t}\n\t}\n\n\treturn opts;\n};\n\nconst getOptionsFromTrigger = function(trigger) {\n\tlet opts = {};\n\t// Get config from data attributes set in the trigger if they haven't been passed via JS\n\tif (trigger instanceof HTMLElement) {\n\t\tArray.prototype.forEach.call(trigger.attributes, function(attr) {\n\t\t\tif (attr.name.indexOf('data-o-overlay') === 0) {\n\t\t\t\t// Remove the unnecessary part of the string the first time this is run for each attribute\n\t\t\t\tconst key = attr.name.replace('data-o-overlay-', '');\n\t\t\t\topts = utils.optionsFromKey(key, attr.value, opts);\n\t\t\t}\n\t\t});\n\t\topts.trigger = trigger;\n\t}\n\treturn opts;\n};\n\nconst triggerClickHandler = function(id, ev) {\n\tev.stopPropagation();\n\tconst overlay = overlays[id];\n\tif (overlay) {\n\t\tif (overlay.visible === true) {\n\t\t\toverlay.close();\n\t\t} else {\n\t\t\toverlay.open();\n\t\t}\n\t}\n};\n\nconst Overlay = function(id, opts) {\n\tviewport.listenTo('resize');\n\tthis.visible = false;\n\tthis.id = id;\n\n\ttry {\n\t\tthis.opts = checkOptions(opts);\n\t} catch(e) {\n\t\tthis.broadcast('log', 'oErrors', {\n\t\t\terror: e\n\t\t});\n\t\tthrow e;\n\t}\n\n\tif (!this.opts) {\n\t\tconst noOptError = new Error('\"o-overlay error\": Required options have not been set');\n\t\tthis.broadcast('log', 'oErrors', {\n\t\t\terror: noOptError\n\t\t});\n\t\tthrow noOptError;\n\t}\n\tif (this.opts.trigger) {\n\t\tthis.opts.trigger.addEventListener('click', triggerClickHandler.bind(this.opts.trigger, id), false);\n\t\tthis.context = this.opts.arrow ? oLayers.getLayerContext(this.opts.arrow.target) : oLayers.getLayerContext(this.opts.trigger);\n\t} else {\n\t\tthis.context = this.opts.arrow ? oLayers.getLayerContext(this.opts.arrow.target) : document.body;\n\t}\n\n\tthis.delegates = {\n\t\tdoc: new Delegate(),\n\t\twrap: new Delegate(),\n\t\tcontext: new Delegate()\n\t};\n\n\t// Add this overlay to the overlays hashmap\n\toverlays[id] = this;\n};\n\nOverlay.prototype.open = function() {\n\tif (this.opts.trigger) {\n\t\tthis.opts.trigger.setAttribute('aria-pressed', 'true');\n\t}\n\n\tif (!this.content) {\n\t\tconst overlay = this;\n\t\tthis.loadContent(function(html) {\n\t\t\toverlay.opts.html = html;\n\t\t\tif (!overlay.opts.html) {\n\t\t\t\tthrow new Error('\"o-overlay error\": Content for the overlay needs to be set via the \"html\" or the \"src\" option.');\n\t\t\t}\n\t\t\toverlay.render();\n\t\t});\n\t} else {\n\t\tthis.show();\n\t}\n};\n\nOverlay.prototype.loadContent = function(callback) {\n\tif (!this.opts.html && this.opts.src) {\n\t\tif (/^(https?\\:\\/)?\\//.test(this.opts.src)) {\n\t\t\tutils.copyContentFromUrl(this.opts.src, function(html) {\n\t\t\t\tcallback(html);\n\t\t\t});\n\t\t} else {\n\t\t\tutils.copyContentFromElement(document.querySelector(this.opts.src), function(html) {\n\t\t\t\tcallback(html);\n\t\t\t});\n\t\t}\n\t} else {\n\t\tcallback(this.opts.html);\n\t}\n};\n\nOverlay.prototype.render = function() {\n\tconst wrapperEl = document.createElement('div');\n\twrapperEl.className = 'o-overlay';\n\twrapperEl.classList.add('o-overlay--' + this.id.replace(' ', '-'));\n\twrapperEl.setAttribute('role', 'dialog');\n\tif (this.opts.zindex) {\n\t\twrapperEl.style.zIndex = this.opts.zindex;\n\t}\n\tthis.wrapper = wrapperEl;\n\n\tif (this.opts.heading) {\n\t\tconst heading = document.createElement('header');\n\t\tconst headingId = this.opts.heading.title.replace(' ', '-').toLowerCase();\n\t\theading.classList.add('o-overlay__heading');\n\t\theading.setAttribute('id', headingId);\n\t\twrapperEl.setAttribute('aria-labelledby', headingId);\n\n\t\tif (this.opts.heading.shaded) {\n\t\t\theading.classList.add('o-overlay__heading--shaded');\n\t\t}\n\n\t\tconst button = document.createElement('a');\n\t\tbutton.className = 'o-overlay__close';\n\t\tbutton.setAttribute('role', 'button');\n\t\tbutton.setAttribute('tabindex', '0');\n\t\tbutton.setAttribute('href', '#void');\n\t\tbutton.setAttribute('aria-label', 'Close');\n\t\tbutton.setAttribute('title', 'Close');\n\n\t\tconst title = document.createElement('span');\n\t\ttitle.setAttribute('role', 'heading');\n\t\ttitle.className = 'o-overlay__title';\n\t\ttitle.innerHTML = this.opts.heading.title;\n\n\t\theading.appendChild(button);\n\t\theading.appendChild(title);\n\t\twrapperEl.appendChild(heading);\n\t}\n\n\tconst content = document.createElement('section');\n\tcontent.className = 'o-overlay__content';\n\twrapperEl.appendChild(content);\n\n\tthis.content = content;\n\n\tif (this.opts.compact) {\n\t\twrapperEl.classList.add('o-overlay--compact');\n\t}\n\n\tthis.show();\n};\n\nOverlay.prototype.show = function() {\n\tif (this.opts.modal) {\n\t\tthis.wrapper.classList.add('o-overlay--modal');\n\t\tconst shadow = document.createElement('div');\n\t\tshadow.className = 'o-overlay-shadow';\n\t\tthis.shadow = shadow;\n\t\tdocument.body.appendChild(shadow);\n\t}\n\n\tthis.delegates.doc.root(document.body);\n\tthis.delegates.wrap.root(this.wrapper);\n\tthis.delegates.context.root(this.context);\n\n\tthis.closeHandler = this.close.bind(this);\n\tthis.resizeListenerHandler = this.resizeListener.bind(this);\n\tthis.delegates.doc.on('oViewport.resize', 'body', this.resizeListenerHandler);\n\tthis.closeOnNewLayerHandler = this.closeOnNewLayer.bind(this);\n\tthis.delegates.context.on('oLayers.new', this.closeOnNewLayerHandler);\n\n\tif (this.opts.heading) {\n\t\tthis.delegates.wrap.on('click', '.o-overlay__close', this.closeHandler);\n\t\tthis.delegates.wrap.on('touchend', '.o-overlay__close', this.closeHandler);\n\t}\n\n\tthis.closeOnExternalClickHandler = this.closeOnExternalClick.bind(this);\n\tthis.delegates.doc.on('click', 'body', this.closeOnExternalClickHandler);\n\tthis.delegates.doc.on('touchend', 'body', this.closeOnExternalClickHandler);\n\n\tthis.closeOnEscapePressHandler = this.closeOnEscapePress.bind(this);\n\tthis.delegates.doc.on('keyup', this.closeOnEscapePressHandler);\n\n\tthis.broadcast('new', 'oLayers');\n\tthis.context.appendChild(this.wrapper);\n\n\t// Give the overlay focus\n\tthis.wrapper.setAttribute('tabindex', '0');\n\tthis.wrapper.style.outline = 0;\n\n\n\t// Renders content after overlay has been added so css is applied before that\n\t// Thay way if an element has autofocus, the window won't scroll to the bottom\n\t// in Safari as the overlay is already in position\n\tconst overlay = this;\n\twindow.requestAnimationFrame(function() {\n\t\tif (!overlay.content.innerHTML) {\n\t\t\t// overlay.respondToWindow(viewport.getSize());\n\t\t\tif (typeof overlay.opts.html === 'string') {\n\t\t\t\toverlay.content.innerHTML = overlay.opts.html;\n\t\t\t} else {\n\t\t\t\toverlay.content.appendChild(overlay.opts.html);\n\t\t\t}\n\t\t}\n\t\toverlay.width = overlay.getWidth();\n\t\toverlay.height = overlay.getHeight();\n\t\toverlay.respondToWindow(viewport.getSize());\n\t\toverlay.visible = true;\n\t\toverlay.wrapper.focus();\n\t\toverlay.broadcast('ready');\n\n\t\t// Add o-tracking integration\n\t\toverlay.broadcast('event', 'oTracking', {\n\t\t\tcategory: 'overlay',\n\t\t\taction: 'show',\n\t\t\toverlay_id: overlay.id\n\t\t});\n\t});\n};\n\nOverlay.prototype.close = function() {\n\tthis.delegates.doc.destroy();\n\tthis.delegates.wrap.destroy();\n\tthis.delegates.context.destroy();\n\n\tviewport.stopListeningTo('resize');\n\n\tthis.broadcast('destroy');\n\tthis.broadcast('event', 'oTracking', {\n\t\tcategory: 'overlay',\n\t\taction: 'close',\n\t\toverlay_id: this.id\n\t});\n\n\tthis.context.removeChild(this.wrapper);\n\tif (this.opts.modal) {\n\t\tthis.shadow.parentNode.removeChild(this.shadow);\n\t}\n\n\t// Put focus back on the triggering element\n\tif (this.opts.trigger) {\n\t\tthis.opts.trigger.focus();\n\t\tthis.opts.trigger.setAttribute('aria-pressed', 'false');\n\t}\n\tthis.visible = false;\n\tthis.broadcast('close', 'oLayers');\n\treturn false;\n};\n\nOverlay.prototype.closeOnExternalClick = function(ev) {\n\tif (!this.wrapper.contains(ev.target) && !this.opts.modal && (this.opts.trigger && !this.opts.trigger.contains(ev.target))) {\n\t\tthis.close();\n\t}\n};\n\nOverlay.prototype.closeOnEscapePress = function(ev) {\n\tif (ev.keyCode === 27) {\n\t\tthis.close();\n\t}\n};\n\nOverlay.prototype.closeOnNewLayer = function(ev) {\n\tif (!ev.detail || ev.detail.el !== this) {\n\t\tthis.close();\n\t}\n};\n\nOverlay.prototype.resizeListener = function(ev) {\n\tif (!this.wrapper.contains(ev.target)) {\n\t\tthis.respondToWindow(ev.detail.viewport);\n\t}\n};\n\nOverlay.prototype.broadcast = function(eventType, namespace, detail) {\n\tnamespace = namespace || 'oOverlay';\n\tconst target = namespace === 'oLayers' ? this.context : this.wrapper || document.body;\n\n\tdetail = detail || {};\n\n\tif (namespace !== 'oTracking') {\n\t\tdetail.el = this;\n\t}\n\n\ttarget.dispatchEvent(new CustomEvent(namespace + '.' + eventType, {\n\t\tdetail: detail,\n\t\t// Don't bubble above the overlay's layer context otherwise we risk triggering a listener on a parent context\n\t\tbubbles: namespace !== 'oLayers' ? true : false\n\t}));\n};\n\nOverlay.prototype.realign = function(dimension, size) {\n\tconst edge = dimension === 'width' ? 'left' : 'top';\n\n\tif (size <= this[dimension]) {\n\t\tthis.wrapper.classList.add('o-overlay--full-' + dimension);\n\t\tthis.wrapper.style[edge] = '0';\n\t\tthis.wrapper.style['margin' + utils.capitalise(edge)] = 0;\n\t\tif (dimension === 'height') {\n\t\t\t// Set the exact height that the content of the overlay will have which is the total\n\t\t\t// height of the overlay minus the heading if there is one. If height = 100%, the\n\t\t\t// heading is part of that 100%, so some content is truncated.\n\t\t\tconst borderHeight = this.wrapper.offsetHeight - this.wrapper.clientHeight;\n\t\t\tthis.content.style.height = this.wrapper.offsetHeight - (this.opts.heading ? this.wrapper.querySelector('header').offsetHeight : 0) - borderHeight + 'px';\n\t\t}\n\t} else {\n\t\tif (dimension === 'height') {\n\t\t\t// Remove the property and let the overlay extend to its content\n\t\t\tthis.content.style.height = null;\n\t\t}\n\t\tthis.wrapper.classList.remove('o-overlay--full-' + dimension);\n\t\tif (!this.opts.arrow) {\n\t\t\tthis.wrapper.style['margin' + utils.capitalise(edge)] = -(this.wrapper['offset' + utils.capitalise(dimension)]/2) + 'px';\n\t\t}\n\t\t// Set alignment in JavaScript (not via CSS) after all other styles have been applied\n\t\t// so that browsers compute it properly. If it's applied earlier, when the negative\n\t\t// margin is calculated, the overlay might not fit, so it shrinks and the negative\n\t\t// margin would be incorrect\n\t\tthis.wrapper.style[edge] = '50%';\n\t}\n};\n\nOverlay.prototype.respondToWindow = function(size) {\n\tthis.realign('width', size.width);\n\tthis.realign('height', size.height);\n\n\tthis.wrapper.classList.remove('o-overlay__arrow-top');\n\tthis.wrapper.classList.remove('o-overlay__arrow-bottom');\n\tthis.wrapper.classList.remove('o-overlay__arrow-left');\n\tthis.wrapper.classList.remove('o-overlay__arrow-right');\n\n\tif (this.opts.arrow && !this.fills()) {\n\t\tthis.opts.arrow.currentposition = this.getCurrentArrowPosition(this.opts.arrow.position);\n\t\tthis.wrapper.classList.add('o-overlay__arrow-' + this.opts.arrow.currentposition);\n\n\t\tconst edge = (this.opts.arrow.currentposition === 'left' || this.opts.arrow.currentposition === 'right') ? 'left' : 'top';\n\t\tconst oppositeEdge = (this.opts.arrow.currentposition === 'left' || this.opts.arrow.currentposition === 'right') ? 'top' : 'left';\n\t\tconst dimension = (this.opts.arrow.currentposition === 'left' || this.opts.arrow.currentposition === 'right') ? 'height' : 'width';\n\n\t\tlet offset = 0;\n\t\t// Protrusion distance for the arrow. It's 13 due to the border around it\n\t\tconst arrowSize = 13;\n\t\tconst targetClientRect = utils.getOffsetRect(this.opts.arrow.target);\n\t\tconst dimensionValue = targetClientRect[dimension];\n\t\tswitch (this.opts.arrow.currentposition) {\n\t\t\tcase 'left':\n\t\t\t\toffset = targetClientRect.left + targetClientRect.width + arrowSize;\n\t\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\toffset = targetClientRect.left - this.width - arrowSize;\n\t\t\t\tbreak;\n\t\t\tcase 'top':\n\t\t\t\toffset = targetClientRect.top + targetClientRect.height + arrowSize;\n\t\t\t\tbreak;\n\t\t\tcase 'bottom':\n\t\t\t\toffset = targetClientRect.top - this.height - arrowSize;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.wrapper.style[edge] = offset + 'px';\n\t\t// 1. Get where the element is positioned\n\t\t// 2. Add its width or height divided by two to get its center\n\t\t// 3. Substract the width or height divided by two of the overlay so the arrow, which is in the center, points to the center of the side of the target\n\t\tthis.wrapper.style[oppositeEdge] = targetClientRect[oppositeEdge] + (dimensionValue / 2) - (this[dimension] / 2) + 'px';\n\t}\n};\n\nOverlay.prototype.getCurrentArrowPosition = function(position) {\n\tconst targetClientRect = this.opts.arrow.target.getBoundingClientRect();\n\t// Protrusion distance for the arrow. It's 13 due to the border around it\n\tconst arrowSize = 13;\n\tconst wrapperWidth = this.wrapper.getBoundingClientRect().width + arrowSize;\n\tconst wrapperHeight = this.wrapper.getBoundingClientRect().height + arrowSize;\n\t// Check if the overlay won't fit on the side set in the options and that it will on the opposite side.\n\t// In that case, use the opposite side\n\tswitch (this.opts.arrow.position) {\n\t\tcase 'left':\n\t\t\tif (targetClientRect.right + wrapperWidth >= window.innerWidth &&\n\t\t\t\t\ttargetClientRect.left - wrapperWidth > 0) {\n\n\t\t\t\tposition = 'right';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tif (targetClientRect.left - wrapperWidth <= 0 &&\n\t\t\t\t\ttargetClientRect.right + wrapperWidth < window.innerWidth) {\n\n\t\t\t\tposition = 'left';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'top':\n\t\t\tif (targetClientRect.bottom + wrapperHeight >= window.innerHeight &&\n\t\t\t\t\ttargetClientRect.top - wrapperHeight + arrowSize > 0) {\n\n\t\t\t\tposition = 'bottom';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'bottom':\n\t\t\tif (targetClientRect.top - wrapperHeight <= 0 &&\n\t\t\t\t\ttargetClientRect.bottom + wrapperHeight < window.innerHeight) {\n\n\t\t\t\tposition = 'top';\n\t\t\t}\n\t\t\tbreak;\n\t}\n\treturn position;\n};\n\nOverlay.prototype.fills = function(dimension) {\n\treturn this.wrapper.classList.contains('o-overlay--full-' + dimension);\n};\n\nOverlay.prototype.destroy = function() {\n\tif (this.visible === true) {\n\t\tthis.close();\n\t}\n\tif (this.opts.trigger) {\n\t\tthis.opts.trigger.removeEventListener('click', triggerClickHandler);\n\t}\n\tdelete overlays[this.id];\n};\n\nOverlay.prototype.getHeight = function() {\n\tconst borderHeight = this.wrapper.offsetHeight - this.wrapper.clientHeight;\n\treturn this.content.scrollHeight + (this.opts.heading ? this.wrapper.querySelector('header').offsetHeight : 0) + borderHeight;\n};\n\nOverlay.prototype.getWidth = function() {\n\tconst borderWidth = this.wrapper.offsetWidth - this.wrapper.clientWidth;\n\treturn this.content.scrollWidth + borderWidth;\n};\n\nOverlay.init = function(el) {\n\tif (!el) {\n\t\tel = document.body;\n\t}\n\tif (!(el instanceof HTMLElement)) {\n\t\tel = document.querySelector(el);\n\t}\n\tconst triggers = el.querySelectorAll('.o-overlay-trigger');\n\tconst overlaysArray = [];\n\tfor (let t = 0; t < triggers.length; t++) {\n\t\t// There can only be one overlay per trigger when set declaratively, so the first trigger found for a given overlay will be the one used to create the overlay\n\t\tif (!overlays[triggers[t].getAttribute('data-o-overlay-id')]) {\n\t\t\toverlaysArray.push(new Overlay(triggers[t].getAttribute('data-o-overlay-id'), getOptionsFromTrigger(triggers[t])));\n\t\t}\n\t}\n\n\treturn overlaysArray;\n};\n\nOverlay.destroy = function() {\n\tconst overlayIds = Object.keys(overlays);\n\toverlayIds.forEach(function(id) {\n\t\toverlays[id].destroy();\n\t});\n};\n\nOverlay.getOverlays = function() {\n\treturn overlays;\n};\n\nmodule.exports = Overlay;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-overlay/src/js/overlay.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-layers (bower component)\n ** module id = 231\n ** module chunks = 0\n **/","'use strict';\n\nvar dom = require('o-dom');\n\nmodule.exports = {\n\tgetLayerContext: function (el) {\n\t\treturn dom.getClosestMatch(el, '.o-layers__context') || document.body;\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-layers/main.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-dom (bower component)\n ** module id = 233\n ** module chunks = 0\n **/","/*global exports*/\n'use strict';\n\nfunction getClosestMatch(el, selector) {\n\twhile (el) {\n\t\tif (el.matches(selector)) {\n\t\t\treturn el;\n\t\t} else {\n\t\t\tel = el.parentElement;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction getIndex(el) {\n\tvar i = 0;\n\tif (el && typeof el === 'object' && el.nodeType === 1) {\n\t\twhile (el.previousSibling) {\n\t\t\tel = el.previousSibling;\n\t\t\tif (el.nodeType === 1) {\n\t\t\t\t++i;\n\t\t\t}\n\t\t}\n\t\treturn i;\n\t}\n}\n\nexports.getClosestMatch = getClosestMatch;\nexports.getIndex = getIndex;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-dom/main.js\n **/","module.exports = {\n\tunCapitalise: function(str) {\n\t\treturn str.charAt(0).toLowerCase() + str.substr(1);\n\t},\n\n\tcapitalise: function(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.substr(1);\n\t},\n\n\tcopyContentFromElement: function(content, callback) {\n\t\tconst html = content.nodeName === 'SCRIPT' ? content.innerHTML : content.outerHTML;\n\t\tcallback(html);\n\t},\n\n\tcopyContentFromUrl: function(url, callback) {\n\t\tconst xhr = new XMLHttpRequest();\n\t\txhr.open('GET', url, true);\n\t\txhr.onload = function() { // eslint complains of e not being used\n\t\t\tif (xhr.readyState === 4) {\n\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\tcallback(xhr.responseText);\n\t\t\t\t} else {\n\t\t\t\t\tcallback('Content failed to load correctly');\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\txhr.onerror = function(e) {\n\t\t\tthrow new Error('\"o-overlay error\": Fetching content from ' + url + ' failed with errror ' + e);\n\t\t};\n\n\t\txhr.send(null);\n\t},\n\n\toptionsFromKey: function(key, value, opts) {\n\t\tconst dashIndex = key.indexOf('-');\n\t\tif (dashIndex === -1) {\n\t\t\ttry {\n\t\t\t\t// If it's a JSON, a boolean or a number, we want it stored like that, and not as a string\n\t\t\t\t// We also replace all ' with \" so JSON strings are parsed correctly\n\t\t\t\topts[key] = JSON.parse(value.replace(/\\'/g, '\"'));\n\t\t\t} catch (e) {\n\t\t\t\topts[key] = value;\n\t\t\t}\n\t\t} else {\n\t\t\t// Key that holds an object instead of a value\n\t\t\tconst subKey = key.substr(0, dashIndex);\n\n\t\t\t// If sub-object doesn't exist already, create it\n\t\t\tif (!opts[subKey]){\n\t\t\t\topts[subKey] = {};\n\t\t\t}\n\n\t\t\t// Run function again starting with the rest of the key\n\t\t\topts[subKey] = this.optionsFromKey(key.substr(dashIndex+1), value, opts[subKey]);\n\t\t}\n\n\t\treturn opts;\n\t},\n\n\t// Code based on this article to get coordinates independent of scroll: http://javascript.info/tutorial/coordinates\n\tgetOffsetRect: function(e) {\n\t\tconst eClientRect = e.getBoundingClientRect();\n\n\t\tconst body = document.body;\n\t\tconst docElem = document.documentElement;\n\n\t\t// docElem.scrollTop/Left for IE, use body as a last resort\n\t\tconst scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n\t\tconst scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\n\t\t// IE sometimes shifts the upper left corner\n\t\tconst clientTop = docElem.clientTop || body.clientTop || 0;\n\t\tconst clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\n\t\treturn {\n\t\t\t// IE8 doesn't support getBoundingClientRect().height and .weight\n\t\t\twidth: eClientRect.width || eClientRect.right - eClientRect.left,\n\t\t\theight: eClientRect.height || eClientRect.bottom - eClientRect.top,\n\t\t\ttop: eClientRect.top + scrollTop - clientTop,\n\t\t\tleft: eClientRect.left + scrollLeft - clientLeft\n\t\t};\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-overlay/src/js/utils.js\n **/","let initialized = false;\nlet supportsHistory;\n\nfunction removeHash () {\n\tconst loc = window.location;\n\tconst body = document.body;\n\tlet scrollV;\n\tlet scrollH;\n\n\tif (supportsHistory)\n\t\thistory.replaceState('', document.title, loc.pathname + loc.search);\n\telse {\n\t\t// flicker-free solution for <=IE9\n\t\tscrollV = body.scrollTop;\n\t\tscrollH = body.scrollLeft;\n\t\tloc.hash = '';\n\t\tbody.scrollTop = scrollV;\n\t\tbody.scrollLeft = scrollH;\n\t}\n}\n\nmodule.exports = (hashPrefix) => {\n\tif (!initialized) {\n\t\tsupportsHistory = window.history && 'replaceState' in history;\n\t}\n\tinitialized = true;\n\n\tconst hash = location.hash.substring(1);\n\tconst startsWithPrefix = hash && hash.indexOf(hashPrefix) === 0;\n\tconst messageKey = hash.substring(hashPrefix.length);\n\n\tif (startsWithPrefix) {\n\t\tremoveHash();\n\t\treturn Promise.resolve(messageKey);\n\t} else {\n\t\treturn Promise.resolve();\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./myft/js/grab-url-hash-with-prefix.js\n **/","/*** IMPORTS FROM imports-loader ***/\nvar requireText = require;\n\nconst _myFtClient = require('next-myft-client');\nconst _setFollowPreferences = require('./set-follow-preferences');\n\n//TODO: clean up on overlay close\n\nlet _overlayForm;\n\n//FIXME: remove this and make myFtClient.loaded update after client-side changes\nlet prefs = {\n\tsubscribedToDigest: null,\n\tuserDismissed: null\n};\n\nfunction setInitialPrefs () {\n\tconst allLoadedPrefs = _myFtClient.loaded['preferred.preference'].items;\n\n\tprefs.subscribedToDigest = allLoadedPrefs.find(pref => pref.uuid === 'email-digest');\n\tprefs.userDismissed = allLoadedPrefs.find(pref => pref.uuid === 'follow-email-dismissed');\n}\n\nfunction _overlayFormHandler (ev, overlay) {\n\tev.preventDefault();\n\t// Default for users who hit enter\n\tlet method = 'put';\n\n\tif (ev.currentTarget.tagName.toLowerCase() === 'button') {\n\t\tmethod = ev.currentTarget.value;\n\t}\n\n\t_setFollowPreferences(_myFtClient.userId, method, _overlayForm['follow-email-dismissed'].checked)\n\t\t.catch(() => null)\n\t\t.then(() => overlay.close());\n}\n\nfunction setUpOverlayListeners (overlay) {\n\t_overlayForm = (overlay) ? overlay.content.querySelector('.js-follow-email-form') : null;\n\n\tif (!_overlayForm) { return; }\n\n\t_overlayForm.addEventListener('submit', ev => {\n\t\t_overlayFormHandler(ev, overlay);\n\t});\n\n\t[..._overlayForm.querySelectorAll('button')]\n\t\t.forEach(el => el.addEventListener('click', ev => {\n\t\t\t_overlayFormHandler(ev, overlay);\n\t\t}));\n}\n\nmodule.exports = {\n\tprefs,\n\tsetInitialPrefs,\n\tsetUpOverlayListeners\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./myft/js/follow-email.js\n **/","const myFtApi = require('next-myft-client');\nconst relData = {\n\ttimezone: 'Europe/London',\n\ttype: 'daily'\n};\n\nfunction addPref (uuid, userId, rel) {\n\tconst data = {};\n\n\tif (rel) {\n\t\tdata._rel = rel;\n\t}\n\n\t//TODO: align client/server-side methods in client\n\tif (typeof myFtApi.addRelationship === 'function') {\n\t\treturn myFtApi.addRelationship('user', userId, 'preferred', 'preference', Object.assign({}, data, { uuid }));\n\t} else {\n\t\treturn myFtApi.add('user', userId, 'preferred', 'preference', uuid, data);\n\t}\n}\n\nmodule.exports = (userId, method, userDismissed) => {\n\tlet emailPrefPromise = Promise.resolve();\n\tlet dismissPrefPromise = Promise.resolve();\n\n\tif (method === 'put') {\n\t\temailPrefPromise = addPref('email-digest', userId, relData);\n\t}\n\n\tif (userDismissed) {\n\t\tdismissPrefPromise = addPref('follow-email-dismissed', userId);\n\t}\n\n\treturn Promise.all([emailPrefPromise, dismissPrefPromise]);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./myft/js/set-follow-preferences.js\n **/","/*\n* ui for instant alerts buttons\n* ui.js has become so complex that we are splitting instant alerts into its own file until it gets refactored\n*/\n\nconst nextButtons = require('../buttons');\nconst nNotification = require('../notification');\nconst Delegate = require('ftdomdelegate');\nconst myftClient = require('next-myft-client');\n\nconst delegate = new Delegate(document.body);\nconst $ = require('../utils').$\nconst $$ = require('../utils').$$\nconst subscribeUrl = '/products?segID=400863&segmentID=190b4443-dc03-bd53-e79b-b4b6fbd04e64';\nconst signInLink = '/login';\n\nconst UI_HOOK = '[data-myft-ui=\"instant\"]';\nlet config;\n\n// until API is updated to return modelled response data from create calls, fallback to old raw format\nfunction apiBackwardsCompatibility (response) {\n\treturn (response._rel) ? response._rel.instant : response.results[0].rel.properties.instant;\n}\n\nfunction updateConceptData (subjectId, data) {\n\tmyftClient.updateRelationship('user', null, 'followed', 'concept', subjectId, data);\n}\n\nfunction toggleButton (buttonEl, state) {\n\tconst isPressed = buttonEl.getAttribute('aria-pressed') === 'true';\n\n\tif (state !== isPressed) {\n\t\tnextButtons.toggleState(buttonEl);\n\t}\n\tbuttonEl.removeAttribute('disabled');\n\tbuttonEl.setAttribute('value', !state);\n}\n\nfunction updateButtons (subjectId, newState) {\n\tconst affectedButtons = $$(`${UI_HOOK}[data-concept-id=\"${subjectId}\"] button`);\n\taffectedButtons.forEach((button) => {\n\t\ttoggleButton(button, newState);\n\t});\n}\n\nfunction conceptRemoved (conceptData) {\n\tupdateButtons(conceptData.subject, false);\n}\n\nfunction conceptUpdated (conceptData) {\n\tconst newState = apiBackwardsCompatibility(conceptData);\n\tupdateButtons(conceptData.subject, newState);\n}\n\nfunction showAnonNotification () {\n\tnNotification.show({\n\t\tcontent: `Please <a href=\"${subscribeUrl}\" data-trackable=\"Subscribe\">subscribe</a> or <a href=\"${signInLink}\" data-trackable=\"Sign In\">sign in</a> to receive instant alerts.`,\n\t\ttrackable: 'myft-anon'\n\t});\n}\n\nfunction extractMetaData (inputs) {\n\tconst meta = {};\n\n\tinputs.forEach((input) => {\n\t\tif (input.name.startsWith('_rel.')) {\n\t\t\tconst key = input.name.slice('_rel.'.length);\n\t\t\tmeta._rel = meta._rel || {};\n\t\t\tmeta._rel[key] = input.value;\n\n\t\t} else if (input.type === 'hidden') {\n\t\t\tmeta[input.name] = input.value;\n\t\t}\n\t});\n\n\treturn meta;\n}\n\nfunction formSubmitted (event, element) {\n\tevent.preventDefault();\n\tif (config && config.anonymous) {\n\t\tshowAnonNotification();\n\t} else {\n\t\tconst subjectId = element.getAttribute('data-concept-id');\n\t\tconst submitEl = $('button', element);\n\t\tconst inputs = $$('input', element);\n\t\tinputs.push(submitEl);\n\t\tupdateConceptData(subjectId, extractMetaData(inputs));\n\t}\n}\n\n// update UI to show real state of instant alerts\n// until we have ESI, we cannot do this server-side as it could cache the wrong state\nfunction applyModel () {\n\tif (myftClient.loaded && myftClient.loaded['followed.concept']) {\n\t\tmyftClient.loaded['followed.concept'].items.forEach((item) => {\n\t\t\tif (item._rel.instant) {\n\t\t\t\tupdateButtons(item.uuid, true);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction eventListeners () {\n\tdocument.body.addEventListener('myft.user.followed.concept.load', applyModel);\n\tdocument.body.addEventListener('myft.user.followed.concept.remove', ev => conceptRemoved(ev.detail));\n\tdocument.body.addEventListener('myft.user.followed.concept.update', ev => conceptUpdated(ev.detail));\n\tdelegate.on('submit', `${UI_HOOK}`, formSubmitted);\n}\n\n// delegate is listening to the whole body therefore events look for forms across the whole page rather than setting up instances\n// if we used instances we could reduce the amount of DOM queries that we do\nexport function init (opts) {\n\tconst instantAlertForms = $$(UI_HOOK);\n\tconfig = opts;\n\tif (instantAlertForms.length > 0) {\n\t\tapplyModel();\n\t\teventListeners();\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./myft/ui-instant.js\n **/","const myFtClient = require('next-myft-client');\nconst buttons = require('../buttons');\nconst superstore = require('superstore-sync');\nconst STORAGE_KEY = 'n-myft-digest-promo-seen';\n\nconst CLASSES = {\n\tctaBtn:'.n-myft-digest-promo__cta-btn',\n\tdismissBtn:'.n-myft-digest-promo__dismiss-btn',\n\tpromoComponent:'.n-myft-digest-promo',\n\tpromoEnabled:'n-myft-digest-promo--enabled'\n};\n\nlet btn;\nlet element;\nlet conceptId;\n\nfunction bindListeners () {\n\tconst btn = document.querySelector(CLASSES.ctaBtn);\n\tconst dismissBtn = document.querySelector(CLASSES.dismissBtn);\n\n\tbtn.addEventListener('click', addToDigest, false);\n\tdismissBtn.addEventListener('click', () => {\n\t\thidePromo();\n\t\tsetDismissState();\n\t}, false);\n}\n\nfunction shouldShowPromo (conceptId){\n\treturn Promise.all([\n\t\tmyFtClient.get('followed', 'concept', conceptId),\n\t\tmyFtClient.get('preferred', 'preference', 'email-digest')\n\t]).then(([follows, prefers]) => {\n\t\treturn follows.length === 0 && prefers.length === 0 && !getDismissState();\n})\n}\n\nfunction showPromo () {\n\telement = document.querySelector(CLASSES.promoComponent);\n\telement.classList.add(CLASSES.promoEnabled);\n}\n\nfunction hidePromo () {\n\telement = document.querySelector(CLASSES.promoComponent);\n\telement.classList.remove(CLASSES.promoEnabled);\n}\n\nfunction getDismissState () {\n\treturn superstore.session.get(STORAGE_KEY);\n}\n\nfunction setDismissState () {\n\tsuperstore.session.set(STORAGE_KEY, 1);\n}\n\nfunction addToDigest () {\n\tconst metaConcept = {\n\t\tname: btn.getAttribute('data-title'),\n\t\ttaxonomy: btn.getAttribute('data-taxonomy')\n\t};\n\tconst metaEmail = {\n\t\t_rel: {\n\t\t\ttype: 'daily',\n\t\t\ttimezone: 'Europe/London'\n\t\t}\n\t};\n\nreturn Promise.all([\n\t\tmyFtClient.add('user', null, 'followed', 'concept', conceptId, metaConcept),\n\t\tmyFtClient.add('user', null, 'preferred', 'preference', 'email-digest', metaEmail)\n\t]).then(() => {\n\t\tbuttons.toggleState(btn, true);\n\t\tbtn.setAttribute('disabled', true);\n\t});\n}\n\nfunction init () {\n\telement = document.querySelector(CLASSES.promoComponent);\n\tif(!superstore.isPersisting() || !element) { return; }\n\tbtn = document.querySelector(CLASSES.ctaBtn);\n\tconceptId = btn.getAttribute('data-concept-id');\n\tshouldShowPromo(conceptId).then(shouldShow => {\n\t\tif(shouldShow) {\n\t\t\tshowPromo();\n\t\t\tbindListeners();\n\t\t}\n\t});\n};\n\nmodule.exports = { init };\n\n\n\n/** WEBPACK FOOTER **\n ** ./myft-digest-promo/index.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/slicedToArray.js\n ** module id = 241\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/is-iterable.js\n ** module id = 242\n ** module chunks = 0\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/is-iterable.js\n ** module id = 243\n ** module chunks = 0\n **/","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function(it){\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/core.is-iterable.js\n ** module id = 244\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/get-iterator.js\n ** module id = 245\n ** module chunks = 0\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/get-iterator.js\n ** module id = 246\n ** module chunks = 0\n **/","var anObject = require('./_an-object')\n  , get      = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/core.get-iterator.js\n ** module id = 247\n ** module chunks = 0\n **/","module.exports = require(\"./main-client.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** n-image (bower component)\n ** module id = 248\n ** module chunks = 0\n **/","import lazyLoad from './src/lib/lazy-load';\n\nexport { lazyLoad };\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/n-image/main-client.js\n **/","const lazyLoadingModifier = 'lazy-loading';\nconst lazyLoadingImageClass = `n-image--${lazyLoadingModifier}`;\nconst lazyLoadingWrapperClass = `n-image-wrapper--${lazyLoadingModifier}`;\n\nconst imageHasLoaded = img => {\n\timg.classList.remove(lazyLoadingImageClass);\n\timg.parentNode.classList.remove(lazyLoadingWrapperClass);\n\timg.removeEventListener('load', imageHasLoaded);\n};\n\nconst loadImage = img => {\n\timg.addEventListener('load', () => {\n\t\t// NOTE: rather arbitrary, needed to get the fading to always work (possibly classes being removed to quickly)\n\t\tsetTimeout(imageHasLoaded.bind(null, img), 13);\n\t});\n\t// add the src/srcset attribtues back in\n\t[...img.attributes]\n\t\t.forEach(attr => {\n\t\t\tif (/^data-src(set)?$/.test(attr.name)) {\n\t\t\t\timg.setAttribute(attr.name.replace('data-', ''), attr.value);\n\t\t\t\timg.removeAttribute(attr.name);\n\t\t\t}\n\t\t});\n};\n\nconst intersectionCallback = (observer, changes) => {\n\tchanges.forEach(change => {\n\t\tconst observedImg = change.target;\n\t\tloadImage(observedImg);\n\t\tobserver.unobserve(observedImg);\n\t});\n};\n\nconst observeIntersection = ({ observer }, img) => {\n\tif (observer) {\n\t\tobserver.observe(img);\n\t} else {\n\t\tloadImage(img);\n\t}\n\timg.setAttribute('data-n-image-lazy-load-js', '');\n};\n\n/**\n * @param {Object} [opts = {}]\n * @param {Element} [opts.root = document] - Where in the DOM to search for images\n */\nexport default ({ root = document } = { }) => {\n\tconst observer = window.IntersectionObserver ?\n\t\tnew IntersectionObserver(\n\t\t\tfunction (changes) {\n\t\t\t\tintersectionCallback(this, changes);\n\t\t\t}\n\t\t) :\n\t\tnull;\n\t[...root.querySelectorAll(`.${lazyLoadingImageClass}`)]\n\t\t.filter(img => !img.hasAttribute('data-n-image-lazy-load-js'))\n\t\t.forEach(observeIntersection.bind(null, { observer }));\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/n-image/src/lib/lazy-load.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** n-service-worker (bower component)\n ** module id = 251\n ** module chunks = 0\n **/","const message = msg => {\n\tif ('serviceWorker' in navigator) {\n\t\treturn navigator.serviceWorker.ready\n\t\t\t.then(registration =>\n\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t// Create a Message Channel\n\t\t\t\t\tconst messageChannel = new MessageChannel();\n\t\t\t\t\t// Handler for recieving message reply from service worker\n\t\t\t\t\tmessageChannel.port1.onmessage = ev => {\n\t\t\t\t\t\tif (ev.data.error) {\n\t\t\t\t\t\t\treject(ev.data.error);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(ev.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t// Send message to service worker along with port for reply\n\t\t\t\t\tregistration.active.postMessage(msg, [messageChannel.port2]);\n\t\t\t\t})\n\t\t\t);\n\t} else {\n\t\treturn Promise.reject('Service Worker unavailable');\n\t}\n}\n\nconst register = flags => {\n\tif ('serviceWorker' in navigator && flags.get('serviceWorker')) {\n\t\tif (document.cookie.length > 4000) {\n\t\t\tconsole.warn('Cookie is greater than 4000 characters - unregistering service worker due to potential failure to retrieve updates');\n\t\t\treturn unregister();\n\t\t}\n\t\treturn navigator.serviceWorker.register('/__sw.js?cache-bust=1')\n\t\t\t.then(registration =>\n\t\t\t\tpassFlags(JSON.parse(JSON.stringify(flags))) // to avoid error caused by the getters\n\t\t\t\t\t.then(() => registration)\n\t\t\t);\n\t} else {\n\t\treturn Promise.reject('Service Worker unavailable, or serviceWorker flag off');\n\t}\n};\n\nconst unregister = () => {\n\tif ('serviceWorker' in navigator) {\n\t\treturn navigator.serviceWorker.getRegistration()\n\t\t\t.then(registration => registration ? registration.unregister() : false);\n\t} else {\n\t\treturn Promise.resolve(false);\n\t}\n};\n\n// Make sure install barrier never gets shown\n// (at least while we consider the web app's role)\nwindow.addEventListener('beforeinstallprompt', ev => {\n\tev.preventDefault();\n\treturn false;\n});\n\nfunction passFlags (flags) {\n\treturn message({\n\t\ttype: 'flagsUpdate',\n\t\tflags: flags\n\t})\n}\n\nexport { register, unregister, message, passFlags };\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/n-service-worker/main.js\n **/","module.exports = require(\"./index.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** babel-polyfill-silencer (bower component)\n ** module id = 253\n ** module chunks = 0\n **/","// Dummy Symbol implementations purely to avoid babelified code\n// that expects these to be defined erroring\nwindow.__BabelPolyfillSilencerSymbol = function () {\n\tconsole.warn('Symbol is not available in this browser yet. You may have a race condition with code reliant on Symbol executing before a polyfill has loaded')\n\treturn {}\n};\nwindow.__BabelPolyfillSilencerSymbol.iterator = {};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/babel-polyfill-silencer/index.js\n **/","module.exports = require('o-expander');\nmodule.exports.__wrapsOrigami = true;\n\n\n\n/** WEBPACK FOOTER **\n ** ./expander/index.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-expander (bower component)\n ** module id = 256\n ** module chunks = 0\n **/","const viewport = require('o-viewport');\n\nconst rootClassName = 'o-expander';\nlet count = 0;\n\n\nconst expandMethods = {\n\ttoggleContent: function (state) {\n\t\tif (state === 'expand') {\n\t\t\tthis.contentEl.classList.add(this.contentClassName + '--expanded');\n\t\t\tthis.contentEl.classList.remove(this.contentClassName + '--collapsed');\n\t\t} else {\n\t\t\tthis.contentEl.classList.remove(this.contentClassName + '--expanded');\n\t\t\tthis.contentEl.classList.add(this.contentClassName + '--collapsed');\n\t\t}\n\t},\n\thasStateDefined: function () {\n\t\treturn this.contentEl.classList.contains(this.contentClassName + '--expanded') || this.contentEl.classList.contains(this.contentClassName + '--collapsed');\n\t},\n\tisRequired: function () {\n\t\tlet overflows = false;\n\t\tif (typeof this.opts.shrinkTo === 'number') {\n\t\t\tif (this.el.querySelectorAll(this.opts.countSelector).length > this.opts.shrinkTo) {\n\t\t\t\toverflows = true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.isCollapsed()) {\n\t\t\t\toverflows = this.contentEl.clientHeight < this.contentEl.scrollHeight;\n\t\t\t} else {\n\t\t\t\tthis.collapse();\n\t\t\t\toverflows = this.contentEl.clientHeight < this.contentEl.scrollHeight;\n\t\t\t\tthis.expand();\n\t\t\t}\n\t\t}\n\t\treturn overflows;\n\t},\n\tisCollapsed: function () {\n\t\treturn !this.contentEl.classList.contains(this.contentClassName + '--expanded');\n\t}\n};\n\nconst hiderMethods = {\n\ttoggleContent: function (state) {\n\t\tif (state === 'expand') {\n\t\t\tthis.contentEl.setAttribute('aria-hidden', 'false');\n\t\t} else {\n\t\t\tthis.contentEl.setAttribute('aria-hidden', 'true');\n\t\t}\n\t},\n\thasStateDefined: function () {\n\t\treturn this.contentEl.hasAttribute('aria-hidden');\n\t},\n\tisRequired: function () {\n\t\treturn true;\n\t},\n\tisCollapsed: function () {\n\t\treturn this.contentEl.getAttribute('aria-hidden') === 'true';\n\t}\n};\n\n\nfunction mixin(target, methods) {\n\tObject.keys(methods).forEach(function (key) {\n\t\ttarget[key] = methods[key];\n\t});\n}\n\nconst Expander = function (el, opts) {\n\tthis.opts = opts || {};\n\tthis.el = el;\n\n\tthis.className = this.opts.className || rootClassName;\n\tthis.contentClassName = this.opts.contentClassName || rootClassName + '__content';\n\tthis.toggleClassName = this.opts.toggleClassName || rootClassName + '__toggle';\n\n\tthis.configure('shrinkTo', 'height');\n\tthis.configure('countSelector', '.' + this.contentClassName + ' > li');\n\tthis.configure('expandedToggleText', this.opts.shrinkTo === 'hidden' ? 'hide' : this.opts.shrinkTo === 'height' ? 'less' : 'fewer');\n\tthis.configure('collapsedToggleText', this.opts.shrinkTo === 'hidden' ? 'show' : 'more');\n\tthis.configure('toggleSelector', 'button.' + this.toggleClassName);\n\tthis.configure('toggleState', 'all');\n\n\n\tif (/^\\d+$/.test(this.opts.shrinkTo)) {\n\t\tthis.opts.shrinkTo = +this.opts.shrinkTo;\n\t}\n\n\tif (this.opts.shrinkTo === 'hidden') {\n\t\tmixin(this, hiderMethods);\n\t} else {\n\t\tmixin(this, expandMethods);\n\t}\n\n\tif (typeof this.opts.shrinkTo === 'number' && !this.opts.countSelector) {\n\t\tthrow('when collapsing to a number of items specify a selector to identify how many items exist');\n\t}\n\n\tthis.contentEl = this.el.querySelector('.' + this.contentClassName);\n\n\tthis.toggles = [].slice.apply(this.el.querySelectorAll(this.opts.toggleSelector));\n\n\tif (!this.toggles.length) {\n\t\tthrow new Error('o-expander needs a toggle button (use a button not a link)');\n\t}\n\tthis.ariaToggles();\n\n\tif (this.opts.shrinkTo === 'height') {\n\t\tviewport.listenTo('resize');\n\t\tviewport.listenTo('orientation');\n\t\tdocument.body.addEventListener('oViewport.orientation', () => this.apply());\n\t\tdocument.body.addEventListener('oViewport.resize', () => this.apply());\n\t}\n\n\tthis.toggles.forEach(toggle => {\n\t\ttoggle.addEventListener('click', () => this.invertState());\n\t});\n\tthis.el.setAttribute('data-o-expander-js', '');\n\tthis.apply(true);\n\tthis.emit('init');\n};\n\nExpander.prototype.configure = function (setting, defaultVal) {\n\tlet candidate = this.el.getAttribute('data-o-expander-' + setting.replace(/[A-Z]/g, function ($0) {\n\t\treturn '-' + $0.toLowerCase();\n\t}));\n\tif (typeof candidate === 'undefined' || candidate === null) {\n\t\tcandidate = this.opts[setting];\n\t}\n\tthis.opts[setting] = !(typeof candidate === 'undefined' || candidate === null) ? candidate : defaultVal;\n};\n\nExpander.prototype.apply = function (isSilent) {\n\tif (!this.isRequired()) {\n\t\tthis.el.classList.add(this.className + '--inactive');\n\t} else {\n\t\tthis.el.classList.remove(this.className + '--inactive');\n\t\tif (typeof this.opts.shrinkTo === 'number') {\n\t\t\t[].slice.call(this.el.querySelectorAll(this.opts.countSelector), this.opts.shrinkTo)\n\t\t\t\t// The class is added via JS, so it can use the default name\n\t\t\t\t.forEach(el => el.classList.add('o-expander__collapsible-item'));\n\t\t}\n\t\tif (this.hasStateDefined()) {\n\t\t\tthis.displayState(isSilent);\n\t\t} else {\n\t\t\tthis.collapse(isSilent);\n\t\t}\n\t}\n};\n\nExpander.prototype.destroy = function () {\n\tif (this.opts.shrinkTo === 'height') {\n\t\tdocument.body.removeEventListener('oViewport.orientation', () => this.apply());\n\t\tdocument.body.removeEventListener('oViewport.resize', () => this.apply());\n\t}\n\tthis.toggles.forEach(toggle => {\n\t\ttoggle.removeEventListener('click', this.invertState);\n\t\ttoggle.removeAttribute('aria-controls');\n\t\ttoggle.removeAttribute('aria-expanded');\n\t});\n\tthis.contentEl.removeAttribute('aria-hidden');\n\tthis.contentEl.classList.remove(this.contentClassName + '--expanded');\n\tthis.contentEl.classList.remove(this.contentClassName + '--collapsed');\n\tthis.el.removeAttribute('data-o-expander-js');\n};\n\nExpander.prototype.ariaToggles = function () {\n\tthis.id = this.contentEl.id;\n\n\tif (!this.id) {\n\t\twhile(document.querySelector('#o-expander__toggle--' + count)) {\n\t\t\tcount++;\n\t\t}\n\t\tthis.id = this.contentEl.id = 'o-expander__toggle--' + count;\n\t}\n\n\tconst id = this.id;\n\tthis.toggles.forEach(toggle => toggle.setAttribute('aria-controls', id));\n};\n\nExpander.prototype.invertState = function () {\n\tthis.isCollapsed() ? this.expand() : this.collapse();\n};\n\nExpander.prototype.displayState = function (isSilent) {\n\tthis.isCollapsed() ? this.collapse(isSilent) : this.expand(isSilent);\n};\n\n\nExpander.prototype.expand = function (isSilent) {\n\tthis.toggleExpander('expand', isSilent);\n};\n\nExpander.prototype.collapse = function (isSilent) {\n\tthis.toggleExpander('collapse', isSilent);\n};\n\nExpander.prototype.emit = function (name) {\n\tthis.el.dispatchEvent(new CustomEvent('oExpander.' + name, {bubbles: true}));\n};\n\nExpander.prototype.toggleExpander = function (state, isSilent) {\n\tthis.toggleContent(state);\n\tif (this.opts.toggleState !== 'none') {\n\t\tthis.toggles.forEach(toggle => {\n\t\t\tif (this.opts.toggleState !== 'aria') {\n\t\t\t\ttoggle.innerHTML = this.opts[state === 'expand' ? 'expandedToggleText' : 'collapsedToggleText'] + '<i></i>';\n\t\t\t}\n\t\t\ttoggle.setAttribute('aria-expanded', state === 'expand' ? 'true' : 'false');\n\t\t});\n\t}\n\tif (!isSilent) {\n\t\tthis.emit(state);\n\t}\n};\n\nconst construct = function (el, opts) {\n\treturn el.hasAttribute('data-o-expander-js') ? undefined : new Expander(el, opts);\n};\n\nconst init = function(el, opts) {\n\tif (!el) {\n\t\tel = document.body;\n\t}\n\tif (!(el instanceof HTMLElement)) {\n\t\tel = document.querySelector(el);\n\t}\n\tif (/\\bo-expander\\b/.test(el.getAttribute('data-o-component'))) {\n\t\treturn construct(el, opts);\n\t}\n\treturn [].map.call(el.querySelectorAll('[data-o-component~=\"o-expander\"]'), el => construct(el, opts));\n};\n\nconst constructAll = function() {\n\tinit();\n\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n};\n\nif (typeof window !== 'undefined') {\n\tdocument.addEventListener('o.DOMContentLoaded', constructAll);\n}\n\n\nmodule.exports = {\n\tinit: init\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-expander/main.js\n **/","const oGrid = require('o-grid');\nconst viewport = require('../viewport');\nconst utils = require('../utils');\n\nlet listening = false;\n\nfunction fireBreakpointEvent (breakpoint) {\n\tutils.broadcast('grid.layoutChange', {layout:breakpoint});\n}\n\nfunction listenForBreakpointChanges () {\n\tif(listening){\n\t\treturn;\n\t}\n\n\tlet lastBreakpoint = oGrid.getCurrentLayout();\n\tfireBreakpointEvent(lastBreakpoint);\n\tviewport.listenTo('resize');\n\tdocument.body.addEventListener('oViewport.resize', () => {\n\t\tlet breakpoint = oGrid.getCurrentLayout();\n\t\tif(breakpoint !== lastBreakpoint){\n\t\t\tfireBreakpointEvent(breakpoint);\n\t\t\tlastBreakpoint = breakpoint;\n\t\t}\n\t});\n\tlistening = true;\n}\n\nmodule.exports = oGrid;\nmodule.exports.listenForBreakpointChanges = listenForBreakpointChanges;\nmodule.exports.__wrapsOrigami = true;\n\n\n\n/** WEBPACK FOOTER **\n ** ./grid/index.js\n **/","module.exports = require('o-viewport');\nmodule.exports.__wrapsOrigami = true;\n\n\n\n/** WEBPACK FOOTER **\n ** ./viewport/index.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-video (bower component)\n ** module id = 260\n ** module chunks = 0\n **/","import Video from './src/js/video.js';\n\nconst constructAll = () => {\n\tVideo.init();\n\tdocument.removeEventListener('o.DOMContentLoaded', constructAll);\n};\n\ndocument.addEventListener('o.DOMContentLoaded', constructAll);\n\nexport default Video;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-video/main.js\n **/","/* global fetch */\nimport crossDomainFetch from 'o-fetch-jsonp';\nimport getRendition from './helpers/get-rendition';\nimport VideoAds from './ads';\nimport VideoInfo from './info';\nimport Playlist from './playlist';\n\nfunction eventListener(video, ev) {\n\t// Dispatch progress event at start, 25%, 50%, 75% and 100%\n\tif (ev.type === 'progress' && video.getProgress() % 25 !== 0) {\n\t\treturn;\n\t}\n\n\tconst event = new CustomEvent('oTracking.event', {\n\t\tdetail: {\n\t\t\taction: ev.type,\n\t\t\tadvertising: video.opts.advertising,\n\t\t\tcategory: 'video',\n\t\t\tcontentId: video.opts.id,\n\t\t\tprogress: video.getProgress(),\n\t\t},\n\t\tbubbles: true\n\t});\n\tdocument.body.dispatchEvent(event);\n}\n\nfunction addEvents(video, events) {\n\tevents.forEach(event => {\n\t\tvideo.videoEl.addEventListener(event, eventListener.bind(this, video));\n\t});\n}\n\n// use the image resizing service, if width supplied\nfunction updatePosterUrl(posterImage, width) {\n\tlet url = `https://image.webservices.ft.com/v1/images/raw/${encodeURIComponent(posterImage)}?source=o-video&quality=low`;\n\tif (width) {\n\t\turl += `&fit=scale-down&width=${width}`;\n\t}\n\n\treturn url;\n}\n\n// converts data-o-video attributes to an options object\nfunction getOptionsFromDataAttributes(attributes) {\n\tconst opts = {};\n\t// Try to get config set declaratively on the element\n\tArray.prototype.forEach.call(attributes, (attr) => {\n\t\tif (attr.name.indexOf('data-o-video') === 0) {\n\t\t\t// Remove the prefix part of the data attribute name and hyphen-case to camelCase\n\t\t\tconst key = attr.name.replace('data-o-video-', '').replace(/-([a-z])/g, (m, w) => {\n\t\t\t\treturn w.toUpperCase();\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\t// If it's a JSON, a boolean or a number, we want it stored like that, and not as a string\n\t\t\t\t// We also replace all ' with \" so JSON strings are parsed correctly\n\t\t\t\topts[key] = JSON.parse(attr.value.replace(/\\'/g, '\"'));\n\t\t\t} catch (e) {\n\t\t\t\topts[key] = attr.value;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn opts;\n}\n\nconst defaultOpts = {\n\tadvertising: false,\n\tautorender: true,\n\tclasses: [],\n\toptimumwidth: null,\n\tplaceholder: false,\n\tplaceholderInfo: ['title'],\n\tdata: null\n};\n\nclass Video {\n\tconstructor(el, opts) {\n\t\tthis.containerEl = el;\n\n\t\tthis.opts = Object.assign({}, defaultOpts, opts, getOptionsFromDataAttributes(this.containerEl.attributes));\n\n\t\tif (typeof this.opts.classes === 'string') {\n\t\t\tthis.opts.classes = this.opts.classes.split(' ');\n\t\t}\n\n\t\tif (this.opts.classes.indexOf('o-video__video') === -1) {\n\t\t\tthis.opts.classes.push('o-video__video');\n\t\t}\n\n\t\tthis.targeting = {\n\t\t\tsite: '/5887/ft.com',\n\t\t\tposition: 'video',\n\t\t\tsizes: '592x333|400x225',\n\t\t\tvideoId: this.opts.id\n\t\t};\n\n\t\tif (this.opts.advertising) {\n\t\t\tthis.videoAds = new VideoAds(this);\n\t\t}\n\n\t\tthis.containerEl.setAttribute('data-o-video-js', '');\n\n\t\tif (this.opts.autorender === true) {\n\t\t\tthis.init();\n\t\t}\n\t}\n\n\tgetData() {\n\t\tconst dataPromise = this.opts.data ?\n\t\t\tPromise.resolve(this.opts.data) :\n\t\t\tcrossDomainFetch(`//next-video.ft.com/api/${this.opts.id}`)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\treturn response.json();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow Error('Brightcove responded with a ' + response.status + ' (' + response.statusText + ') for id ' + this.opts.id);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\n\t\treturn dataPromise.then(data => {\n\t\t\tthis.videoData = data;\n\t\t\tthis.posterImage = updatePosterUrl(data.videoStillURL, this.opts.optimumwidth);\n\t\t\tthis.rendition = getRendition(data.renditions, this.opts);\n\t\t});\n\t}\n\n\trenderVideo() {\n\t\tif (this.rendition) {\n\t\t\tif (this.opts.placeholder) {\n\t\t\t\tthis.addPlaceholder();\n\t\t\t} else {\n\t\t\t\tthis.addVideo();\n\t\t\t}\n\t\t}\n\t}\n\n\tinit() {\n\t\treturn (this.opts.advertising ? this.videoAds.loadAdsLibrary() : Promise.resolve())\n\t\t\t.catch(() => {\n\t\t\t\t// If ad doesn't load for some reason, load video as normal\n\t\t\t\tthis.opts.advertising = false;\n\t\t\t})\n\t\t\t.then(() => this.getData())\n\t\t\t.then(() => this.renderVideo());\n\t}\n\n\taddVideo() {\n\t\tthis.videoEl = document.createElement('video');\n\t\tthis.videoEl.controls = true;\n\t\tthis.videoEl.className = Array.isArray(this.opts.classes) ? this.opts.classes.join(' ') : this.opts.classes;\n\t\tthis.containerEl.classList.add('o-video--player');\n\n\t\tthis.updateVideo();\n\n\t\tif (this.placeholderEl && !this.opts.advertising) {\n\t\t\tthis.videoEl.autoplay = this.videoEl.autostart = true;\n\t\t}\n\n\t\tthis.containerEl.appendChild(this.videoEl);\n\n\t\taddEvents(this, ['play', 'playing', 'pause', 'ended', 'progress']);\n\t\tthis.videoEl.addEventListener('playing', this.pauseOtherVideos.bind(this));\n\t\tthis.videoEl.addEventListener('suspend', this.clearCurrentlyPlaying.bind(this));\n\t\tthis.videoEl.addEventListener('ended', this.clearCurrentlyPlaying.bind(this));\n\n\t\tif (this.opts.advertising) {\n\t\t\tthis.videoAds.setUpAds();\n\t\t}\n\t}\n\n\tupdateVideo() {\n\t\tthis.videoEl.poster = this.posterImage;\n\t\tthis.videoEl.src = this.rendition && this.rendition.url;\n\t}\n\n\taddPlaceholder() {\n\t\tthis.placeholderEl = document.createElement('div');\n\t\tthis.placeholderEl.className = 'o-video__placeholder';\n\n\t\tthis.placeholderImageEl = document.createElement('img');\n\t\tthis.placeholderImageEl.className = 'o-video__placeholder-image';\n\t\tthis.placeholderImageEl.setAttribute('role', 'presentation');\n\t\tthis.placeholderImageEl.setAttribute('alt', '');\n\n\t\tthis.placeholderEl.appendChild(this.placeholderImageEl);\n\n\t\t// info panel\n\t\tif (this.opts.placeholderInfo.length) {\n\t\t\tthis.infoPanel = new VideoInfo(this);\n\t\t}\n\n\t\t// play button\n\t\tconst playButtonEl = document.createElement('button');\n\t\tplayButtonEl.className = 'o-video__play-button';\n\n\t\tconst playButtonTextEl = document.createElement('span');\n\t\tplayButtonTextEl.className = 'o-video__play-button-text';\n\t\tplayButtonTextEl.textContent = 'Play video';\n\t\tplayButtonEl.appendChild(playButtonTextEl);\n\n\t\tconst playButtonIconEl = document.createElement('i');\n\t\tplayButtonIconEl.className = 'o-video__play-button-icon';\n\t\tplayButtonEl.appendChild(playButtonIconEl);\n\n\t\tthis.placeholderEl.appendChild(playButtonEl);\n\n\t\tthis.placeholderEl.addEventListener('click', () => {\n\t\t\t// Adds video soon so ads can start loading\n\t\t\tthis.addVideo();\n\t\t\tthis.videoEl.focus();\n\t\t\tthis.videoEl.paused && this.videoEl.play();\n\n\t\t\tthis.containerEl.removeChild(this.placeholderEl);\n\t\t\tthis.infoPanel && this.infoPanel.teardown();\n\n\t\t\tdelete this.placeholderEl;\n\t\t\tdelete this.placeholderImageEl;\n\t\t});\n\n\t\tthis.updatePlaceholder();\n\n\t\tthis.containerEl.appendChild(this.placeholderEl);\n\t}\n\n\tupdatePlaceholder() {\n\t\tthis.placeholderImageEl.src = this.posterImage;\n\t\tthis.infoPanel && this.infoPanel.update();\n\t}\n\n\tupdate(newOpts) {\n\t\tthis.videoEl && this.videoEl.pause();\n\t\tthis.clearCurrentlyPlaying();\n\n\t\tthis.opts = Object.assign(this.opts, { data: null }, newOpts);\n\n\t\tif (!this.videoEl && !this.placeholderEl) {\n\t\t\treturn this.init();\n\t\t}\n\n\t\treturn this.getData().then(() => {\n\t\t\tif (this.placeholderEl) {\n\t\t\t\tthis.updatePlaceholder();\n\t\t\t} else {\n\t\t\t\tthis.updateVideo();\n\t\t\t}\n\t\t});\n\t}\n\n\tgetProgress() {\n\t\treturn this.videoEl.duration ? parseInt(100 * this.videoEl.currentTime / this.videoEl.duration, 10) : 0;\n\t}\n\n\tpauseOtherVideos() {\n\t\tif (this.currentlyPlayingVideo && this.currentlyPlayingVideo !== this.videoEl) {\n\t\t\tthis.currentlyPlayingVideo.pause();\n\t\t}\n\n\t\tthis.currentlyPlayingVideo = this.videoEl;\n\t}\n\n\tclearCurrentlyPlaying() {\n\t\tif (this.currentlyPlayingVideo !== this.videoEl) {\n\t\t\tthis.currentlyPlayingVideo = null;\n\t\t}\n\t}\n\n\tstatic init(rootEl, config) {\n\t\tconst videos = [];\n\t\tif (!rootEl) {\n\t\t\trootEl = document.body;\n\t\t} else if (typeof rootEl === 'string') {\n\t\t\trootEl = document.querySelector(rootEl);\n\t\t}\n\n\t\tconst videoEls = rootEl.querySelectorAll(':not([data-o-video-js])[data-o-component~=\"o-video\"]');\n\n\t\tfor (let i = 0; i < videoEls.length; i++) {\n\t\t\tvideos.push(new Video(videoEls[i], config));\n\t\t}\n\n\t\treturn videos;\n\t}\n}\n\nVideo.Playlist = Playlist;\n\nexport default Video;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-video/src/js/video.js\n **/","module.exports = require(\"./main.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** o-fetch-jsonp (bower component)\n ** module id = 263\n ** module chunks = 0\n **/","const jsonpCallbackNames = [];\n\nconst generateCallbackName = () => {\n\tconst base = 'jsonpCallback';\n\tconst callbackName = `${base}_${jsonpCallbackNames.length + 1}`;\n\tjsonpCallbackNames.push(callbackName);\n\treturn callbackName;\n};\n\nconst crossDomainFetch = (...args) => {\n\tconst crossDomainFetch = ('withCredentials' in new XMLHttpRequest()) ? fetch : jsonpFetch;\n\treturn crossDomainFetch(...args);\n};\n\nconst jsonpFetch = (url, opts) => {\n\tconst defaultOpts = {\n\t\ttimeout: 2000\n\t};\n\topts = opts || {};\n\tObject.keys(defaultOpts).forEach(defaultOptsKey => {\n\t\tif (!opts.hasOwnProperty(defaultOptsKey)) {\n\t\t\topts[defaultOptsKey] = defaultOpts[defaultOptsKey];\n\t\t}\n\t});\n\treturn new Promise((resolve, reject) => {\n\t\tconst callbackName = generateCallbackName();\n\t\tlet timeout;\n\t\twindow.FT = window.FT || {};\n\t\twindow.FT[callbackName] = response => {\n\t\t\tconst status = response.status ? response.status : 200;\n\t\t\tresolve({\n\t\t\t\tok: Math.floor(status / 100) === 2,\n\t\t\t\tstatus: status,\n\t\t\t\tjson: () => Promise.resolve(response.body || response)\n\t\t\t});\n\t\t\tif (timeout) {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t}\n\t\t};\n\n\t\tconst scriptTag = document.createElement('script');\n\t\tscriptTag.defer = true;\n\t\tscriptTag.src = `${url}${url.indexOf('?') > -1 ? '&' : '?'}callback=FT.${callbackName}`;\n\t\tdocument.body.appendChild(scriptTag);\n\n\t\ttimeout = setTimeout(() => {\n\t\t\treject(new Error(`JSONP request to ${url} timed out`));\n\t\t}, opts.timeout);\n\t});\n};\n\nexport default crossDomainFetch;\nexport { jsonpFetch };\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-fetch-jsonp/main.js\n **/","import supportedFormats from './supported-formats';\n\nfunction getRendition(renditions, options) {\n\t// allow mocking of supported formats module\n\tconst opts = options || {};\n\tconst width = opts.optimumvideowidth;\n\tconst formats = opts.supportedFormats || supportedFormats();\n\tlet appropriateRendition;\n\t// order smallest to largest\n\tconst orderedRenditions = renditions\n\t\t.filter(rendition => {\n\t\t\treturn formats.indexOf(rendition.videoCodec.toLowerCase()) > -1;\n\t\t})\n\t\t.sort((renditionOne, renditionTwo) => {\n\t\t\treturn renditionOne.frameWidth - renditionTwo.frameWidth;\n\t\t});\n\n\t// if no width supplied, get largest\n\tif (!width) {\n\t\treturn orderedRenditions.pop();\n\t}\n\t// NOTE: rather use find...\n\torderedRenditions.some(rendition => {\n\t\tif (rendition.frameWidth >= width) {\n\t\t\tappropriateRendition = rendition;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t});\n\n\treturn appropriateRendition || orderedRenditions.pop();\n};\n\nexport default getRendition;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-video/src/js/helpers/get-rendition.js\n **/","const formats = {\n\tmpeg4: [\n\t\t'video/mp4; codecs=\"mp4v.20.8\"'\n\t],\n\th264: [\n\t\t'video/mp4; codecs=\"avc1.42E01E\"',\n\t\t'video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"'\n\t],\n\togg: [\n\t\t'video/ogg; codecs=\"theora\"'\n\t],\n\twebm: [\n\t\t'video/webm; codecs=\"vp8, vorbis\"'\n\t]\n};\n\nfunction supportedFormats () {\n\tconst testEl = document.createElement('video');\n\tconst supported = [];\n\n\ttry {\n\t\tObject.keys(formats).filter(format => {\n\t\t\tformats[format].some(type => testEl.canPlayType(type)) && supported.push(format);\n\t\t});\n\t} catch(e) { }\n\n\treturn supported;\n}\n\nexport default supportedFormats;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-video/src/js/helpers/supported-formats.js\n **/","/* global google */\n\nlet sdkScriptLoaded = false;\n\nfunction createVideoOverlayElement() {\n\tconst overlayEl = document.createElement('div');\n\toverlayEl.classList.add('o-video__overlay');\n\treturn overlayEl;\n}\n\nclass VideoAds {\n\tconstructor(video) {\n\t\tthis.video = video;\n\t\tthis.adsLoaded = false;\n\t\tthis.videoLoad = false;\n\n\t\tif (!this.video.opts.placeholder) {\n\t\t\tthis.overlayEl = createVideoOverlayElement();\n\t\t\tthis.video.containerEl.appendChild(this.overlayEl);\n\t\t}\n\t}\n\n\tloadAdsLibrary() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet googleSdkScript = document.querySelector('[src=\"//imasdk.googleapis.com/js/sdkloader/ima3.js\"]');\n\n\t\t\tif (!googleSdkScript) {\n\t\t\t\tgoogleSdkScript = document.createElement('script');\n\t\t\t\tgoogleSdkScript.setAttribute('type', 'text/javascript');\n\t\t\t\tgoogleSdkScript.setAttribute('src', `//imasdk.googleapis.com/js/sdkloader/ima3.js`);\n\t\t\t\tgoogleSdkScript.setAttribute('async', true);\n\t\t\t\tgoogleSdkScript.setAttribute('defer', true);\n\t\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(googleSdkScript);\n\t\t\t}\n\n\t\t\tif (sdkScriptLoaded) {\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tgoogleSdkScript.addEventListener('load', () => {\n\t\t\t\t\tsdkScriptLoaded = true;\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\n\t\t\t\tgoogleSdkScript.addEventListener('error', (e) => {\n\t\t\t\t\treject(e);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tgetVideoBrand() {\n\t\tif (!this.video.videoData || !this.video.videoData.tags || this.video.videoData.tags.length === 0) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tlet filtered = this.video.videoData.tags.filter(val => val.toLowerCase().indexOf('brand:') !== -1);\n\t\t\tif (filtered.length > 0) {\n\t\t\t\ttry {\n\t\t\t\t\t // when we target the value in the ad server, we only want to target actual brand name, so we strip out \"brand:\" part of the string\n\t\t\t\t\t return filtered.pop().substring(6);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t return false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetUpAds() {\n\t\tthis.adContainerEl = document.createElement('div');\n\t\tthis.video.containerEl.appendChild(this.adContainerEl);\n\t\tthis.adDisplayContainer = new google.ima.AdDisplayContainer(this.adContainerEl, this.video.videoEl);\n\n\t\t// Create ads loader.\n\t\tthis.adsLoader = new google.ima.AdsLoader(this.adDisplayContainer);\n\n\t\t// Sets up bindings for all Ad related handlers\n\t\tthis.adsManagerLoadedHandler = this.adsManagerLoadedHandler.bind(this);\n\t\tthis.adErrorHandler = this.adErrorHandler.bind(this);\n\t\tthis.adEventHandler = this.adEventHandler.bind(this);\n\t\tthis.contentPauseRequestHandler = this.contentPauseRequestHandler.bind(this);\n\t\tthis.contentResumeRequestHandler = this.contentResumeRequestHandler.bind(this);\n\n\t\t// Listen and respond to ads loaded and error events.\n\t\tthis.adsLoader.addEventListener(\n\t\t\tgoogle.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,\n\t\t\tthis.adsManagerLoadedHandler,\n\t\t\tfalse);\n\t\tthis.adsLoader.addEventListener(\n\t\t\tgoogle.ima.AdErrorEvent.Type.AD_ERROR,\n\t\t\tthis.adErrorHandler,\n\t\t\tfalse);\n\n\t\tthis.requestAds();\n\n\t\tthis.playAdEventHandler = this.playAdEventHandler.bind(this);\n\t\tif (this.video.opts.placeholder) {\n\t\t\tthis.playAdEventHandler();\n\t\t} else {\n\t\t\tthis.overlayEl && this.overlayEl.addEventListener('click', this.playAdEventHandler);\n\t\t}\n\t}\n\n\trequestAds() {\n\t\t// Request video ads.\n\t\tconst adsRequest = new google.ima.AdsRequest();\n\n\t\tlet targeting = `pos=${this.video.targeting.position}&ttid=${this.video.targeting.videoId}`;\n\t\tconst brand = this.getVideoBrand();\n\t\tif (brand) {\n\t\t\ttargeting += `&brand=${brand}`;\n\t\t}\n\n\t\tlet advertisingUrl = `http://pubads.g.doubleclick.net/gampad/ads?env=vp&gdfp_req=1&impl=s&output=xml_vast2&iu=${this.video.targeting.site}&sz=${this.video.targeting.sizes}&unviewed_position_start=1&scp=${encodeURIComponent(targeting)}`;\n\n\t\tadsRequest.adTagUrl = advertisingUrl;\n\n\t\t// Specify the linear and nonlinear slot sizes. This helps the SDK\n\t\t// select the correct creative if multiple are returned.\n\t\tadsRequest.linearAdSlotWidth = 592;\n\t\tadsRequest.linearAdSlotHeight = 333;\n\n\t\tadsRequest.nonLinearAdSlotWidth = 592;\n\t\tadsRequest.nonLinearAdSlotHeight = 150;\n\n\t\tthis.adsLoader.requestAds(adsRequest);\n\t}\n\n\tadsManagerLoadedHandler(adsManagerLoadedEvent) {\n\t\t// Get the ads manager.\n\t\tconst adsRenderingSettings = new google.ima.AdsRenderingSettings();\n\t\tadsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete = true;\n\t\tthis.adsManager = adsManagerLoadedEvent.getAdsManager(this.video.videoEl, adsRenderingSettings);\n\n\t\t// Add listeners to the required events.\n\t\tthis.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this.adErrorHandler);\n\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, this.contentPauseRequestHandler);\n\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, this.contentResumeRequestHandler);\n\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED, this.adEventHandler);\n\n\t\t// Listen to any additional events, if necessary.\n\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED, this.adEventHandler);\n\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED, this.adEventHandler);\n\t\tthis.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE, this.adEventHandler);\n\n\t\tthis.adsLoaded = true;\n\t\tthis.startAds();\n\t}\n\n\tstartAds() {\n\n\t\t// For ads to play correctly both the video and the advert video need to be ready to\n\t\t// play; this function needs to be called after the two flags in adsManagerLoadedHandler()\n\t\t// and playAdEventHandler() have been set.\n\t\t// So if the video hasn't loaded yet, wait until it has.\n\t\tif (!this.videoLoaded) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If ads have failed to load, which resets the advertising support flag, play the video\n\t\t// instead; otherwise, wait until the ads have loaded.\n\t\tif (!this.video.opts.advertising) {\n\t\t\tthis.video.videoEl.play();\n\t\t} else if (!this.adsLoaded) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\t// Initialize the ads manager. Ad rules playlist will start at this time.\n\t\t\tthis.adsManager.init(this.video.videoEl.clientWidth, this.video.videoEl.clientHeight, google.ima.ViewMode.NORMAL);\n\t\t\t// Call play to start showing the ad. Single video and overlay ads will\n\t\t\t// start at this time; the call will be ignored for ad rules.\n\t\t\tthis.adsManager.start();\n\t\t} catch (adError) {\n\t\t\t// An error may be thrown if there was a problem with the VAST response.\n\t\t\tthis.video.videoEl.play();\n\t\t}\n\t}\n\n\tplayAdEventHandler() {\n\t\t// Sets the styling now so the ad occupies the space of the video\n\t\tthis.adContainerEl.classList.add('o-video__ad');\n\n\t\tthis.adDisplayContainer.initialize();\n\n\t\tconst loadedmetadataHandler = () => {\n\t\t\tthis.videoLoaded = true;\n\t\t\tthis.startAds();\n\t\t\tthis.video.videoEl.removeEventListener('loadedmetadata', loadedmetadataHandler);\n\t\t};\n\t\tthis.video.videoEl.addEventListener('loadedmetadata', loadedmetadataHandler);\n\n\t\t// Initialize the video. Must be done via a user action on mobile devices.\n\t\tthis.video.videoEl.load();\n\n\t\tthis.overlayEl && this.overlayEl.removeEventListener('click', this.playAdEventHandler);\n\t\tthis.overlayEl && this.video.containerEl.removeChild(this.overlayEl);\n\t\tdelete this.overlayEl;\n\t}\n\n\tadEventHandler(adEvent) {\n\t\t// Retrieve the ad from the event. Some events (e.g. ALL_ADS_COMPLETED)\n\t\t// don't have ad object associated.\n\t\tconst ad = adEvent.getAd();\n\t\tswitch (adEvent.type) {\n\t\t\tcase google.ima.AdEvent.Type.LOADED:\n\t\t\t\t// This is the first event sent for an ad - it is possible to\n\t\t\t\t// determine whether the ad is a video ad or an overlay.\n\t\t\t\tif (!ad.isLinear()) {\n\t\t\t\t\t// Position AdDisplayContainer correctly for overlay.\n\t\t\t\t\t// Use ad.width and ad.height.\n\t\t\t\t\tthis.video.videoEl.play();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase google.ima.AdEvent.Type.STARTED:\n\t\t\t\t// This event indicates the ad has started - the video player\n\t\t\t\t// can adjust the UI, for example display a pause button and\n\t\t\t\t// remaining time.\n\t\t\t\tif (ad.isLinear()) {\n\t\t\t\t\t// For a linear ad, a timer can be started to poll for\n\t\t\t\t\t// the remaining time.\n\t\t\t\t\t// TODO: We could use this to add a skip ad button\n\t\t\t\t\t// Currently not used, could be used in an interval\n\t\t\t\t\t// const remainingTime = this.adsManager.getRemainingTime();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase google.ima.AdEvent.Type.COMPLETE:\n\t\t\t\tif (ad.isLinear()) {\n\t\t\t\t\t// Would be used to clear the interval\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tadErrorHandler() {\n\t\tthis.adsManager && this.adsManager.destroy();\n\t\tthis.video.containerEl.removeChild(this.adContainerEl);\n\t\tif (this.overlayEl) {\n\t\t\tthis.overlayEl.removeEventListener('click', this.playAdEventHandler);\n\t\t\tthis.video.containerEl.removeChild(this.overlayEl);\n\t\t\tdelete this.overlayEl;\n\t\t}\n\t\tthis.video.placeholderEl && this.video.placeholderEl.removeEventListener('click', this.playAdEventHandler);\n\t\tthis.video.opts.advertising = false;\n\t\tthis.startAds();\n\t}\n\n\tcontentPauseRequestHandler() {\n\t\tthis.video.videoEl.pause();\n\t}\n\n\tcontentResumeRequestHandler() {\n\t\tthis.video.containerEl.removeChild(this.adContainerEl);\n\t\tthis.video.videoEl.play();\n\t}\n}\n\nexport default VideoAds;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-video/src/js/ads.js\n **/","function formatBrand (tags) {\n\tconst regex = /brand:/i;\n\tconst tag = tags && tags.find(tag => regex.test(tag));\n\n\treturn tag && tag.replace(regex, '');\n}\n\nfunction formatDuration (lengthInMs) {\n\tconst lengthInSeconds = Math.ceil(lengthInMs / 1000);\n\tconst minutes = '' + Math.floor(lengthInSeconds / 60);\n\tconst seconds = '' + (lengthInSeconds % 60);\n\n\treturn `${minutes}:${seconds.length === 1 ? '0' + seconds : seconds}`;\n}\n\nclass VideoInfo {\n\tconstructor (video) {\n\t\tthis.video = video;\n\n\t\tthis.opts = this.video.opts.placeholderInfo.reduce((map, key) => {\n\t\t\tmap[key] = true;\n\t\t\treturn map;\n\t\t}, {});\n\n\t\tthis.infoEl = document.createElement('div');\n\t\tthis.infoEl.className = 'o-video__info';\n\n\t\tif (this.opts.brand) {\n\t\t\tthis.brandEl = document.createElement('span');\n\t\t\tthis.brandEl.className = 'o-video__info-brand';\n\t\t\tthis.infoEl.appendChild(this.brandEl);\n\t\t}\n\n\t\tif (this.opts.duration) {\n\t\t\tthis.durationEl = document.createElement('span');\n\t\t\tthis.durationEl.className = 'o-video__info-duration';\n\t\t\tthis.infoEl.appendChild(this.durationEl);\n\t\t}\n\n\t\tif (this.opts.title) {\n\t\t\tthis.titleEl = document.createElement('h4');\n\t\t\tthis.titleEl.className = 'o-video__info-title';\n\t\t\tthis.infoEl.appendChild(this.titleEl);\n\t\t}\n\n\t\tif (this.opts.description) {\n\t\t\tthis.descriptionEl = document.createElement('p');\n\t\t\tthis.descriptionEl.className = 'o-video__info-description';\n\t\t\tthis.infoEl.appendChild(this.descriptionEl);\n\t\t}\n\n\t\tthis.update();\n\n\t\tthis.video.placeholderEl.appendChild(this.infoEl);\n\t}\n\n\tupdate () {\n\t\tif (this.brandEl) {\n\t\t\tthis.brandEl.textContent = formatBrand(this.video.videoData.tags);\n\t\t}\n\n\t\tif (this.durationEl) {\n\t\t\tthis.durationEl.textContent = formatDuration(this.video.videoData.length);\n\t\t}\n\n\t\tif (this.titleEl) {\n\t\t\tthis.titleEl.textContent = this.video.videoData.name;\n\t\t}\n\n\t\tif (this.descriptionEl) {\n\t\t\tthis.descriptionEl.textContent = this.video.videoData.shortDescription;\n\t\t}\n\t}\n\n\tteardown () {\n\t\tthis.video.placeholderEl.removeChild(this.infoEl);\n\n\t\tdelete this.infoEl;\n\t\tdelete this.brandEl;\n\t\tdelete this.titleEl;\n\t\tdelete this.durationEl;\n\t\tdelete this.descriptionEl;\n\t}\n}\n\nexport default VideoInfo;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-video/src/js/info.js\n **/","class Playlist {\n\tconstructor (opts) {\n\t\tthis.opts = opts;\n\n\t\t// find the currently playing video, always deal with strings\n\t\tconst currentId = opts.player.videoData ? opts.player.videoData.id : opts.player.opts.id;\n\t\tthis.currentIndex = currentId ? opts.queue.indexOf(currentId.toString()) : -1;\n\n\t\tthis.cache = {};\n\n\t\tif (this.opts.autoplay) {\n\t\t\tthis.opts.player.containerEl.addEventListener('ended', this.next.bind(this), true);\n\n\t\t\tif ( this.currentIndex === -1) {\n\t\t\t\tthis.next();\n\t\t\t}\n\t\t}\n\t}\n\n\tnext () {\n\t\tthis.goto(this.currentIndex + 1);\n\t}\n\n\tprev () {\n\t\tthis.goto(this.currentIndex - 1);\n\t}\n\n\tgoto (index) {\n\t\tif (index < 0) {\n\t\t\tthis.currentIndex = this.opts.queue.length - 1;\n\t\t} else if (index >= this.opts.queue.length) {\n\t\t\tthis.currentIndex = 0;\n\t\t} else {\n\t\t\tthis.currentIndex = index;\n\t\t}\n\n\t\t// store the current data for quick access later\n\t\tconst currentVideoId = this.opts.player.videoData && this.opts.player.videoData.id;\n\n\t\tif (currentVideoId && !this.cache[currentVideoId]) {\n\t\t\tthis.cache[currentVideoId] = this.opts.player.videoData;\n\t\t}\n\n\t\tconst nextVideoId = this.opts.queue[this.currentIndex];\n\n\t\tconst nextVideoOpts = {\n\t\t\tid: nextVideoId,\n\t\t\tdata: this.cache[nextVideoId]\n\t\t};\n\n\t\treturn this.opts.player.update(nextVideoOpts).then(() => {\n\t\t\tthis.opts.player.videoEl && this.opts.player.videoEl.play();\n\t\t});\n\t}\n}\n\nexport default Playlist;\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/o-video/src/js/playlist.js\n **/","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('proptypes'), require('preact-svg'), require('preact')) :\n\ttypeof define === 'function' && define.amd ? define(['proptypes', 'preact-svg', 'preact'], factory) :\n\t(global.preactCompat = factory(global.PropTypes,global.preactSvg,global.preact));\n}(this, function (PropTypes,SVG,preact) {\n\n\tPropTypes = 'default' in PropTypes ? PropTypes['default'] : PropTypes;\n\tSVG = 'default' in SVG ? SVG['default'] : SVG;\n\n\tvar version = '15.1.0';\n\n\tvar ELEMENTS = 'a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan'.split(' ');\n\n\tvar REACT_ELEMENT_TYPE = typeof Symbol === 'function' && Symbol.for && Symbol.for('react.element') || 0xeac7;\n\n\tvar AUTOBIND_BLACKLIST = {\n\t\tconstructor: 1,\n\t\trender: 1,\n\t\tshouldComponentUpdate: 1,\n\t\tcomponentWillRecieveProps: 1,\n\t\tcomponentWillUpdate: 1,\n\t\tcomponentDidUpdate: 1,\n\t\tcomponentWillMount: 1,\n\t\tcomponentDidMount: 1,\n\t\tcomponentWillUnmount: 1,\n\t\tcomponentDidUnmount: 1\n\t};\n\n\tvar BYPASS_HOOK = {};\n\n\tvar DEV = typeof process !== 'undefined' && process.env && process.env.NODE_ENV !== 'production';\n\n\tvar EmptyComponent = function () {\n\t\treturn null;\n\t};\n\n\tvar VNode = preact.h('').constructor;\n\tVNode.prototype.$$typeof = REACT_ELEMENT_TYPE;\n\n\tObject.defineProperty(VNode.prototype, 'type', {\n\t\tget: function () {\n\t\t\treturn this.nodeName;\n\t\t},\n\t\tset: function (v) {\n\t\t\tthis.nodeName = v;\n\t\t}\n\t});\n\n\tObject.defineProperty(VNode.prototype, 'props', {\n\t\tget: function () {\n\t\t\treturn this.attributes;\n\t\t},\n\t\tset: function (v) {\n\t\t\tthis.attributes = v;\n\t\t}\n\t});\n\n\tvar childrenPropertyAlias = {\n\t\tget: function () {\n\t\t\treturn this.attributes && this.attributes.children;\n\t\t},\n\t\tset: function (children) {\n\t\t\tvar a = this.attributes || (this.attributes = {});\n\t\t\ta.children = children;\n\t\t}\n\t};\n\n\tvar oldVnodeHook = preact.options.vnode || EmptyComponent;\n\tpreact.options.vnode = function (vnode) {\n\t\tvar a = vnode.attributes;\n\t\tif (!a) a = vnode.attributes = {};\n\n\t\tif (Object.isExtensible && !Object.isExtensible(a)) {\n\t\t\ta = extend({}, a, true);\n\t\t}\n\t\tObject.defineProperty(a, 'children', childrenPropertyAlias);\n\t\toldVnodeHook(vnode);\n\t};\n\n\tfunction render$1(vnode, parent, callback) {\n\t\tvar prev = parent._preactCompatRendered;\n\t\tif (prev && prev.parentNode !== parent) prev = null;\n\t\tvar out = preact.render(vnode, parent, prev);\n\t\tparent._preactCompatRendered = out;\n\t\tif (typeof callback === 'function') callback();\n\t\treturn out && out._component;\n\t}\n\n\tfunction unmountComponentAtNode(container) {\n\t\tvar existing = container._preactCompatRendered;\n\t\tif (existing && existing.parentNode === container) {\n\t\t\tpreact.render(preact.h(EmptyComponent), container, existing);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tvar ARR = [];\n\n\tvar Children = {\n\t\tmap: function (children, fn, ctx) {\n\t\t\tchildren = Children.toArray(children);\n\t\t\tif (ctx && ctx !== children) fn = fn.bind(ctx);\n\t\t\treturn children.map(fn);\n\t\t},\n\t\tforEach: function (children, fn, ctx) {\n\t\t\tchildren = Children.toArray(children);\n\t\t\tif (ctx && ctx !== children) fn = fn.bind(ctx);\n\t\t\tchildren.forEach(fn);\n\t\t},\n\t\tcount: function (children) {\n\t\t\tchildren = Children.toArray(children);\n\t\t\treturn children.length;\n\t\t},\n\t\tonly: function (children) {\n\t\t\tchildren = Children.toArray(children);\n\t\t\tif (children.length !== 1) throw new Error('Children.only() expects only one child.');\n\t\t\treturn children[0];\n\t\t},\n\t\ttoArray: function (children) {\n\t\t\treturn Array.isArray && Array.isArray(children) ? children : ARR.concat(children);\n\t\t}\n\t};\n\n\tvar currentComponent = void 0;\n\n\tfunction createFactory(type) {\n\t\treturn createElement.bind(null, type);\n\t}\n\n\tvar DOM = {};\n\tfor (var i = ELEMENTS.length; i--;) {\n\t\tDOM[ELEMENTS[i]] = createFactory(ELEMENTS[i]);\n\t}\n\n\tfunction createElement() {\n\t\tvar vnode = preact.h.apply(undefined, arguments);\n\n\t\tif (vnode.nodeName === 'svg') {\n\t\t\tvnode.nodeName = SVG;\n\t\t}\n\n\t\tapplyClassName(vnode);\n\n\t\tvar ref = vnode.attributes && vnode.attributes.ref;\n\t\tif (currentComponent && ref && typeof ref === 'string') {\n\t\t\tvnode.attributes.ref = createStringRefProxy(ref, currentComponent);\n\t\t}\n\n\t\treturn vnode;\n\t}\n\n\tfunction cloneElement$1(element, props) {\n\t\tvar node = preact.h(element.nodeName || element.type, element.attributes || element.props, element.children || element.props.children);\n\n\t\tfor (var _len = arguments.length, children = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n\t\t\tchildren[_key - 2] = arguments[_key];\n\t\t}\n\n\t\tif (preact.cloneElement) {\n\t\t\treturn preact.cloneElement.apply(undefined, [node, props].concat(children));\n\t\t}\n\t\treturn createElement.apply(undefined, [node.nodeName, extend(extend({}, node.attributes || {}), props)].concat(children.length && children || node.children || []));\n\t}\n\n\tfunction isValidElement(element) {\n\t\treturn element && (element instanceof VNode || element.$$typeof === REACT_ELEMENT_TYPE);\n\t}\n\n\tfunction createStringRefProxy(name, component) {\n\t\treturn component._refProxies[name] || (component._refProxies[name] = function (resolved) {\n\t\t\tif (component && component.refs) {\n\t\t\t\tcomponent.refs[name] = resolved;\n\t\t\t\tif (resolved === null) {\n\t\t\t\t\tdelete component._refProxies[name];\n\t\t\t\t\tcomponent = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction applyClassName(_ref) {\n\t\tvar attributes = _ref.attributes;\n\n\t\tif (!attributes) return;\n\t\tvar cl = attributes.className || attributes.class;\n\t\tif (cl) attributes.className = cl;\n\t}\n\n\tfunction extend(base, props, all) {\n\t\tfor (var key in props) {\n\t\t\tif (all === true || props[key] != null) {\n\t\t\t\tbase[key] = props[key];\n\t\t\t}\n\t\t}\n\t\treturn base;\n\t}\n\n\tvar findDOMNode = function (component) {\n\t\treturn component.base || component;\n\t};\n\n\tfunction F() {}\n\n\tfunction createClass(obj) {\n\t\tfunction cl(props, context) {\n\t\t\textend(this, obj);\n\t\t\tComponent$1.call(this, props, context, BYPASS_HOOK);\n\t\t\tbindAll(this);\n\t\t\tnewComponentHook.call(this, props, context);\n\t\t}\n\n\t\tif (obj.propTypes) {\n\t\t\tcl.propTypes = obj.propTypes;\n\t\t}\n\t\tif (obj.defaultProps) {\n\t\t\tcl.defaultProps = obj.defaultProps;\n\t\t}\n\t\tif (obj.getDefaultProps) {\n\t\t\tcl.defaultProps = obj.getDefaultProps();\n\t\t}\n\n\t\tF.prototype = Component$1.prototype;\n\t\tcl.prototype = new F();\n\t\tcl.prototype.constructor = cl;\n\n\t\tcl.displayName = obj.displayName || 'Component';\n\n\t\treturn cl;\n\t}\n\n\tfunction bindAll(ctx) {\n\t\tfor (var _i in ctx) {\n\t\t\tvar v = ctx[_i];\n\t\t\tif (typeof v === 'function' && !v.__bound && !AUTOBIND_BLACKLIST.hasOwnProperty(_i)) {\n\t\t\t\t(ctx[_i] = v.bind(ctx)).__bound = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction callMethod(ctx, m, args) {\n\t\tif (typeof m === 'string') {\n\t\t\tm = ctx.constructor.prototype[m];\n\t\t}\n\t\tif (typeof m === 'function') {\n\t\t\treturn m.apply(ctx, args);\n\t\t}\n\t}\n\n\tfunction multihook() {\n\t\tvar hooks = arguments;\n\t\treturn function () {\n\t\t\tvar ret = void 0;\n\t\t\tfor (var _i2 = 0; _i2 < hooks.length; _i2++) {\n\t\t\t\tvar r = callMethod(this, hooks[_i2], arguments);\n\t\t\t\tif (r !== undefined) ret = r;\n\t\t\t}\n\t\t\treturn ret;\n\t\t};\n\t}\n\n\tfunction newComponentHook(props, context) {\n\t\tpropsHook.call(this, props, context);\n\t\tthis.componentWillReceiveProps = multihook(this.componentWillReceiveProps || 'componentWillReceiveProps', propsHook);\n\t\tthis.render = multihook(beforeRender, this.render || 'render', afterRender);\n\t}\n\n\tfunction propsHook(props) {\n\t\tif (!props) return;\n\n\t\tvar c = props.children;\n\t\tif (c && c.length === 1) {\n\t\t\tprops.children = c[0];\n\n\t\t\tif (props.children && typeof props.children === 'object') {\n\t\t\t\tprops.children.length = 1;\n\t\t\t\tprops.children[0] = props.children;\n\t\t\t}\n\t\t}\n\n\t\tif (DEV) {\n\t\t\tvar propTypes = this.propTypes || this.constructor.propTypes;\n\t\t\tif (propTypes) {\n\t\t\t\tfor (var prop in propTypes) {\n\t\t\t\t\tif (propTypes.hasOwnProperty(prop) && typeof propTypes[prop] === 'function') {\n\t\t\t\t\t\tvar err = propTypes[prop](props, prop, this.constructor.name, 'prop');\n\t\t\t\t\t\tif (err) throw err;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction beforeRender() {\n\t\tcurrentComponent = this;\n\t}\n\n\tfunction afterRender() {\n\t\tif (currentComponent === this) {\n\t\t\tcurrentComponent = null;\n\t\t}\n\t}\n\n\tfunction Component$1(props, context, opts) {\n\t\tpreact.Component.call(this, props, context);\n\t\tthis.refs = {};\n\t\tthis._refProxies = {};\n\t\tif (opts !== BYPASS_HOOK) {\n\t\t\tnewComponentHook.call(this, props, context);\n\t\t}\n\t}\n\tComponent$1.prototype = new preact.Component();\n\textend(Component$1.prototype, {\n\t\tconstructor: Component$1,\n\n\t\tisReactComponent: {},\n\n\t\tgetDOMNode: function () {\n\t\t\treturn this.base;\n\t\t},\n\t\tisMounted: function () {\n\t\t\treturn !!this.base;\n\t\t}\n\t});\n\n\tvar index = { version: version, DOM: DOM, PropTypes: PropTypes, Children: Children, render: render$1, createClass: createClass, createFactory: createFactory, createElement: createElement, cloneElement: cloneElement$1, isValidElement: isValidElement, findDOMNode: findDOMNode, unmountComponentAtNode: unmountComponentAtNode, Component: Component$1 };\n\n\treturn index;\n\n}));\n//# sourceMappingURL=preact-compat.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/preact-compat/dist/preact-compat.js\n ** module id = 270\n ** module chunks = 0\n **/","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/process/browser.js\n ** module id = 271\n ** module chunks = 0\n **/","(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define('PropTypes', ['exports', 'module'], factory);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    factory(exports, module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, mod);\n    global.PropTypes = mod.exports;\n  }\n})(this, function (exports, module) {\n\n  'use strict';\n\n  var REACT_ELEMENT_TYPE = typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element') || 0xeac7;\n\n  var ReactElement = {};\n\n  ReactElement.isValidElement = function (object) {\n    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  var ReactPropTypeLocationNames = {\n    prop: 'prop',\n    context: 'context',\n    childContext: 'child context'\n  };\n\n  var emptyFunction = {\n    thatReturns: function thatReturns(what) {\n      return function () {\n        return what;\n      };\n    }\n  };\n\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator';\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker\n  };\n\n  function createChainableTypeChecker(validate) {\n    function checkType(isRequired, props, propName, componentName, location, propFullName) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n      if (props[propName] == null) {\n        var locationName = ReactPropTypeLocationNames[location];\n        if (isRequired) {\n          return new Error('Required ' + locationName + ' `' + propFullName + '` was not specified in ' + ('`' + componentName + '`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        var locationName = ReactPropTypeLocationNames[location];\n\n        var preciseType = getPreciseType(propValue);\n\n        return new Error('Invalid ' + locationName + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunction.thatReturns(null));\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var locationName = ReactPropTypeLocationNames[location];\n        var propType = getPropType(propValue);\n        return new Error('Invalid ' + locationName + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']');\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!ReactElement.isValidElement(props[propName])) {\n        var locationName = ReactPropTypeLocationNames[location];\n        return new Error('Invalid ' + locationName + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var locationName = ReactPropTypeLocationNames[location];\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new Error('Invalid ' + locationName + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      return createChainableTypeChecker(function () {\n        return new Error('Invalid argument supplied to oneOf, expected an instance of array.');\n      });\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (propValue === expectedValues[i]) {\n          return null;\n        }\n      }\n\n      var locationName = ReactPropTypeLocationNames[location];\n      var valuesString = JSON.stringify(expectedValues);\n      return new Error('Invalid ' + locationName + ' `' + propFullName + '` of value `' + propValue + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        var locationName = ReactPropTypeLocationNames[location];\n        return new Error('Invalid ' + locationName + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (propValue.hasOwnProperty(key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      return createChainableTypeChecker(function () {\n        return new Error('Invalid argument supplied to oneOfType, expected an instance of array.');\n      });\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName) == null) {\n          return null;\n        }\n      }\n\n      var locationName = ReactPropTypeLocationNames[location];\n      return new Error('Invalid ' + locationName + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        var locationName = ReactPropTypeLocationNames[location];\n        return new Error('Invalid ' + locationName + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        var locationName = ReactPropTypeLocationNames[location];\n        return new Error('Invalid ' + locationName + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || ReactElement.isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      return 'object';\n    }\n    return propType;\n  }\n\n  function getPreciseType(propValue) {\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  module.exports = ReactPropTypes;\n});\n\n//# sourceMappingURL=index.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/proptypes/index.js\n ** module id = 272\n ** module chunks = 0\n **/","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('preact')) :\n\ttypeof define === 'function' && define.amd ? define(['preact'], factory) :\n\t(global.preactSvg = factory(global.preact));\n}(this, function (preact) { 'use strict';\n\n\tvar babelHelpers = {};\n\n\tbabelHelpers.classCallCheck = function (instance, Constructor) {\n\t  if (!(instance instanceof Constructor)) {\n\t    throw new TypeError(\"Cannot call a class as a function\");\n\t  }\n\t};\n\n\tbabelHelpers.extends = Object.assign || function (target) {\n\t  for (var i = 1; i < arguments.length; i++) {\n\t    var source = arguments[i];\n\n\t    for (var key in source) {\n\t      if (Object.prototype.hasOwnProperty.call(source, key)) {\n\t        target[key] = source[key];\n\t      }\n\t    }\n\t  }\n\n\t  return target;\n\t};\n\n\tbabelHelpers.inherits = function (subClass, superClass) {\n\t  if (typeof superClass !== \"function\" && superClass !== null) {\n\t    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n\t  }\n\n\t  subClass.prototype = Object.create(superClass && superClass.prototype, {\n\t    constructor: {\n\t      value: subClass,\n\t      enumerable: false,\n\t      writable: true,\n\t      configurable: true\n\t    }\n\t  });\n\t  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n\t};\n\n\tbabelHelpers.objectWithoutProperties = function (obj, keys) {\n\t  var target = {};\n\n\t  for (var i in obj) {\n\t    if (keys.indexOf(i) >= 0) continue;\n\t    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n\t    target[i] = obj[i];\n\t  }\n\n\t  return target;\n\t};\n\n\tbabelHelpers.possibleConstructorReturn = function (self, call) {\n\t  if (!self) {\n\t    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\t  }\n\n\t  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n\t};\n\n\tbabelHelpers;\n\n\tvar DOM = typeof document !== 'undefined' && !!document.createElement;\n\n\tvar SVG_ATTRS = ['viewBox'];\n\n\tvar NS = {\n\t\txlink: 'http://www.w3.org/1999/xlink'\n\t};\n\n\tvar NS_ATTR = /^([a-zA-Z]+)(?:\\:|([A-Z]))/;\n\n\tvar PROP_TO_ATTR_MAP = {\n\t\t'className': 'class'\n\t};\n\n\tvar EMPTY = {};\n\n\tvar updateMode = false;\n\n\tif (DOM) {\n\t\t(function () {\n\t\t\tvar div = document.createElement('div');\n\n\t\t\tvar oldCreate = document.createElement;\n\t\t\tdocument.createElement = function (name) {\n\t\t\t\tif (updateMode || name === 'svg') {\n\t\t\t\t\tvar el = document.createElementNS('http://www.w3.org/2000/svg', name);\n\n\t\t\t\t\tel.setAttribute = createAttributeShim('setAttribute');\n\t\t\t\t\tel.getAttribute = createAttributeShim('getAttribute');\n\t\t\t\t\tel.removeAttribute = createAttributeShim('removeAttribute');\n\t\t\t\t\tfor (var key in el) {\n\t\t\t\t\t\tif (~SVG_ATTRS.indexOf(key) || !(key in div) || PROP_TO_ATTR_MAP.hasOwnProperty(key)) {\n\t\t\t\t\t\t\toverwriteProperty(el, key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t\treturn oldCreate.call(document, name);\n\t\t\t};\n\t\t})();\n\t}\n\n\tvar PROPERTY_ERRORS = {};\n\tvar hasPropertyErrors = false;\n\n\tfunction overwriteProperty(el, key) {\n\t\tvar err = PROPERTY_ERRORS[key];\n\t\tif (err === false) {\n\t\t\tObject.defineProperty(el, key, contentPropertyDef(key));\n\t\t} else {\n\t\t\tattemptOverwriteProperty(el, key);\n\t\t}\n\t}\n\n\tfunction attemptOverwriteProperty(el, key) {\n\t\ttry {\n\t\t\tObject.defineProperty(el, key, contentPropertyDef(key));\n\t\t\tPROPERTY_ERRORS[key] = false;\n\t\t} catch (e) {\n\t\t\tif (!PROPERTY_ERRORS[key]) {\n\t\t\t\tvar err = el.nodeName + ': ' + e;\n\t\t\t\tPROPERTY_ERRORS[key] = err;\n\t\t\t\tif (!hasPropertyErrors && 'undefined' !== typeof console && console.warn) {\n\t\t\t\t\thasPropertyErrors = true;\n\t\t\t\t\tconsole.warn('Error overwriting some SVG properties.', { errors: PROPERTY_ERRORS });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tvar memoize = function (fn) {\n\t\tvar mem = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\treturn function (k) {\n\t\t\treturn mem.hasOwnProperty(k) ? mem[k] : mem[k] = fn(k);\n\t\t};\n\t};\n\n\tvar contentPropertyDef = memoize(function (prop) {\n\t\tvar attr = arguments.length <= 1 || arguments[1] === undefined ? PROP_TO_ATTR_MAP[prop] || prop : arguments[1];\n\t\treturn {\n\t\t\tset: function (v) {\n\t\t\t\tif (v === null || v === undefined) this.removeAttribute(attr);else this.setAttribute(attr, v);\n\t\t\t},\n\t\t\tget: function () {\n\t\t\t\treturn this.getAttribute(attr);\n\t\t\t}\n\t\t};\n\t});\n\n\tvar createAttributeShim = memoize(function (method) {\n\t\treturn function (name, value) {\n\t\t\tvar proto = this.constructor.prototype,\n\t\t\t    p = name.match(NS_ATTR);\n\t\t\tif (p && NS.hasOwnProperty(p[1])) {\n\t\t\t\tname = name.replace(NS_ATTR, '$2').toLowerCase();\n\t\t\t\tvar ns = NS[p[1]];\n\t\t\t\treturn proto[method + 'NS'].call(this, ns, name, value);\n\t\t\t} else {\n\t\t\t\treturn proto[method].call(this, name, value);\n\t\t\t}\n\t\t};\n\t});\n\n\tvar SVG = function (_Component) {\n\t\tbabelHelpers.inherits(SVG, _Component);\n\n\t\tfunction SVG() {\n\t\t\tbabelHelpers.classCallCheck(this, SVG);\n\t\t\treturn babelHelpers.possibleConstructorReturn(this, _Component.apply(this, arguments));\n\t\t}\n\n\t\tSVG.prototype.componentWillUpdate = function componentWillUpdate() {\n\t\t\tupdateMode = true;\n\t\t};\n\n\t\tSVG.prototype.componentDidUpdate = function componentDidUpdate() {\n\t\t\tupdateMode = false;\n\t\t};\n\n\t\tSVG.prototype.render = function render(_ref) {\n\t\t\tvar children = _ref.children;\n\t\t\tvar props = babelHelpers.objectWithoutProperties(_ref, ['children']);\n\n\t\t\tif (!this.hasRendered) {\n\t\t\t\tthis.hasRendered = updateMode = true;\n\n\t\t\t\tthis.setState(EMPTY, setStateUpdateProxy(this));\n\t\t\t}\n\n\t\t\treturn preact.h(\n\t\t\t\t'svg',\n\t\t\t\tbabelHelpers.extends({ version: '1.1', xmlns: 'http://www.w3.org/2000/svg' }, props),\n\t\t\t\tchildren\n\t\t\t);\n\t\t};\n\n\t\treturn SVG;\n\t}(preact.Component);\n\n\tfunction setStateUpdateProxy(component) {\n\t\treturn function () {\n\t\t\tcomponent.componentDidUpdate();\n\t\t\tcomponent = null;\n\t\t};\n\t}\n\n\treturn SVG;\n\n}));\n//# sourceMappingURL=preact-svg.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/preact-compat/~/preact-svg/dist/preact-svg.js\n ** module id = 273\n ** module chunks = 0\n **/","!function(global, factory) {\n    'object' == typeof exports && 'undefined' != typeof module ? module.exports = factory() : 'function' == typeof define && define.amd ? define(factory) : global.preact = factory();\n}(this, function() {\n    'use strict';\n    function VNode(nodeName, attributes, children) {\n        this.nodeName = nodeName;\n        this.attributes = attributes;\n        this.children = children;\n    }\n    function extend(obj, props) {\n        for (var i in props) if (hasOwnProperty.call(props, i)) obj[i] = props[i];\n        return obj;\n    }\n    function clone(obj) {\n        var out = {};\n        for (var i in obj) out[i] = obj[i];\n        return out;\n    }\n    function memoize(fn, mem) {\n        mem = mem || {};\n        return function(k) {\n            return hasOwnProperty.call(mem, k) ? mem[k] : mem[k] = fn(k);\n        };\n    }\n    function delve(obj, key) {\n        for (var p = key.split('.'), i = 0; i < p.length && obj; i++) obj = obj[p[i]];\n        return obj;\n    }\n    function toArray(obj) {\n        var arr = [], i = obj.length;\n        for (;i--; ) arr[i] = obj[i];\n        return arr;\n    }\n    function styleObjToCss(s) {\n        var str = '';\n        for (var prop in s) {\n            var val = s[prop];\n            if (!empty(val)) {\n                if (str) str += ' ';\n                str += jsToCss(prop);\n                str += ': ';\n                str += val;\n                if ('number' == typeof val && !NON_DIMENSION_PROPS[prop]) str += 'px';\n                str += ';';\n            }\n        }\n        return str;\n    }\n    function hashToClassName(c) {\n        var str = '';\n        for (var prop in c) if (c[prop]) {\n            if (str) str += ' ';\n            str += prop;\n        }\n        return str;\n    }\n    function normalize(obj, prop, fn) {\n        var v = obj[prop];\n        if (v && !isString(v)) obj[prop] = fn(v);\n    }\n    function optionsHook(name, a, b) {\n        return hook(options, name, a, b);\n    }\n    function hook(obj, name, a, b, c) {\n        if (obj[name]) return obj[name](a, b, c); else ;\n    }\n    function deepHook(obj, type) {\n        do hook(obj, type); while (obj = obj._component);\n    }\n    function h(nodeName, attributes) {\n        var len = arguments.length, attributeChildren = attributes && attributes.children, children = void 0, arr = void 0, lastSimple = void 0;\n        if (attributeChildren) {\n            delete attributes.children;\n            if (3 > len) return h(nodeName, attributes, attributeChildren);\n        }\n        for (var i = 2; len > i; i++) {\n            var _p = arguments[i];\n            if (!falsey(_p)) {\n                if (!children) children = [];\n                if (_p.join) arr = _p; else {\n                    arr = SHARED_TEMP_ARRAY;\n                    arr[0] = _p;\n                }\n                for (var j = 0; j < arr.length; j++) {\n                    var child = arr[j], simple = !(falsey(child) || child instanceof VNode);\n                    if (simple) child = String(child);\n                    if (simple && lastSimple) children[children.length - 1] += child; else if (!falsey(child)) children.push(child);\n                    lastSimple = simple;\n                }\n            } else ;\n        }\n        var p = new VNode(nodeName, attributes || void 0, children || void 0);\n        optionsHook('vnode', p);\n        return p;\n    }\n    function createLinkedState(component, key, eventPath) {\n        var path = key.split('.'), p0 = path[0], len = path.length;\n        return function(e) {\n            var _component$setState;\n            var t = this, s = component.state, obj = s, v = void 0, i = void 0;\n            if (isString(eventPath)) {\n                v = delve(e, eventPath);\n                if (empty(v) && (t = t._component)) v = delve(t, eventPath);\n            } else v = (t.nodeName + t.type).match(/^input(check|rad)/i) ? t.checked : t.value;\n            if (isFunction(v)) v = v.call(t);\n            if (len > 1) {\n                for (i = 0; len - 1 > i; i++) obj = obj[path[i]] || (obj[path[i]] = {});\n                obj[path[i]] = v;\n                v = s[p0];\n            }\n            component.setState((_component$setState = {}, _component$setState[p0] = v, _component$setState));\n        };\n    }\n    function enqueueRender(component) {\n        if (1 === items.push(component)) (options.debounceRendering || setImmediate)(rerender);\n    }\n    function rerender() {\n        if (items.length) {\n            var currentItems = items, p = void 0;\n            items = itemsOffline;\n            itemsOffline = currentItems;\n            for (;p = currentItems.pop(); ) if (p._dirty) renderComponent(p);\n        }\n    }\n    function isFunctionalComponent(_ref) {\n        var nodeName = _ref.nodeName;\n        return isFunction(nodeName) && !(nodeName.prototype && nodeName.prototype.render);\n    }\n    function buildFunctionalComponent(vnode, context) {\n        return vnode.nodeName(getNodeProps(vnode), context || EMPTY) || EMPTY_BASE;\n    }\n    function ensureNodeData(node) {\n        return node[ATTR_KEY] || (node[ATTR_KEY] = {});\n    }\n    function getNodeType(node) {\n        return node.nodeType;\n    }\n    function appendChildren(parent, children) {\n        var len = children.length, many = len > 2, into = many ? document.createDocumentFragment() : parent;\n        for (var i = 0; len > i; i++) into.appendChild(children[i]);\n        if (many) parent.appendChild(into);\n    }\n    function removeNode(node) {\n        var p = node.parentNode;\n        if (p) p.removeChild(node);\n    }\n    function getAccessor(node, name, value, cache) {\n        if ('type' !== name && 'style' !== name && name in node) return node[name];\n        var attrs = node[ATTR_KEY];\n        if (cache !== !1 && attrs && hasOwnProperty.call(attrs, name)) return attrs[name];\n        if ('class' === name) return node.className;\n        if ('style' === name) return node.style.cssText; else return value;\n    }\n    function setAccessor(node, name, value) {\n        if ('class' === name) node.className = value || ''; else if ('style' === name) node.style.cssText = value || ''; else if ('dangerouslySetInnerHTML' === name) {\n            if (value && value.__html) node.innerHTML = value.__html;\n        } else if ('key' === name || name in node && 'type' !== name) {\n            node[name] = value;\n            if (falsey(value)) node.removeAttribute(name);\n        } else setComplexAccessor(node, name, value);\n        ensureNodeData(node)[name] = value;\n    }\n    function setComplexAccessor(node, name, value) {\n        if ('on' !== name.substring(0, 2)) {\n            var type = typeof value;\n            if (falsey(value)) node.removeAttribute(name); else if ('function' !== type && 'object' !== type) node.setAttribute(name, value);\n        } else {\n            var _type = normalizeEventName(name), l = node._listeners || (node._listeners = {}), fn = !l[_type] ? 'add' : !value ? 'remove' : null;\n            if (fn) node[fn + 'EventListener'](_type, eventProxy);\n            l[_type] = value;\n        }\n    }\n    function eventProxy(e) {\n        var fn = this._listeners[normalizeEventName(e.type)];\n        if (fn) return fn.call(this, optionsHook('event', e) || e); else ;\n    }\n    function getNodeAttributes(node) {\n        return node[ATTR_KEY] || getRawNodeAttributes(node) || EMPTY;\n    }\n    function getRawNodeAttributes(node) {\n        var list = node.attributes;\n        if (!list || !list.getNamedItem) return list; else return getAttributesAsObject(list);\n    }\n    function getAttributesAsObject(list) {\n        var attrs = void 0;\n        for (var i = list.length; i--; ) {\n            var item = list[i];\n            if (!attrs) attrs = {};\n            attrs[item.name] = item.value;\n        }\n        return attrs;\n    }\n    function isSameNodeType(node, vnode) {\n        if (isFunctionalComponent(vnode)) return !0;\n        var nodeName = vnode.nodeName;\n        if (isFunction(nodeName)) return node._componentConstructor === nodeName;\n        if (3 === getNodeType(node)) return isString(vnode); else return toLowerCase(node.nodeName) === nodeName;\n    }\n    function getNodeProps(vnode) {\n        var props = clone(vnode.attributes), c = vnode.children;\n        if (c) props.children = c;\n        var defaultProps = vnode.nodeName.defaultProps;\n        if (defaultProps) for (var i in defaultProps) if (hasOwnProperty.call(defaultProps, i) && !(i in props)) props[i] = defaultProps[i];\n        return props;\n    }\n    function collectNode(node) {\n        cleanNode(node);\n        var name = normalizeName(node.nodeName), list = nodes[name];\n        if (list) list.push(node); else nodes[name] = [ node ];\n    }\n    function createNode(nodeName) {\n        var name = normalizeName(nodeName), list = nodes[name], node = list && list.pop() || document.createElement(nodeName);\n        ensureNodeData(node);\n        return node;\n    }\n    function cleanNode(node) {\n        removeNode(node);\n        if (3 !== getNodeType(node)) {\n            if (!node[ATTR_KEY]) node[ATTR_KEY] = getRawNodeAttributes(node);\n            node._component = node._componentConstructor = null;\n        }\n    }\n    function diff(dom, vnode, context) {\n        var originalAttributes = vnode.attributes;\n        for (;isFunctionalComponent(vnode); ) vnode = buildFunctionalComponent(vnode, context);\n        if (isFunction(vnode.nodeName)) return buildComponentFromVNode(dom, vnode, context);\n        if (isString(vnode)) {\n            if (dom) {\n                var type = getNodeType(dom);\n                if (3 === type) {\n                    dom[TEXT_CONTENT] = vnode;\n                    return dom;\n                } else if (1 === type) collectNode(dom);\n            }\n            return document.createTextNode(vnode);\n        }\n        var out = dom, nodeName = vnode.nodeName || UNDEFINED_ELEMENT;\n        if (!dom) out = createNode(nodeName); else if (toLowerCase(dom.nodeName) !== nodeName) {\n            out = createNode(nodeName);\n            appendChildren(out, toArray(dom.childNodes));\n            recollectNodeTree(dom);\n        }\n        innerDiffNode(out, vnode, context);\n        diffAttributes(out, vnode);\n        if (originalAttributes && originalAttributes.ref) (out[ATTR_KEY].ref = originalAttributes.ref)(out);\n        return out;\n    }\n    function innerDiffNode(dom, vnode, context) {\n        var children = void 0, keyed = void 0, keyedLen = 0, len = dom.childNodes.length, childrenLen = 0;\n        if (len) {\n            children = [];\n            for (var i = 0; len > i; i++) {\n                var child = dom.childNodes[i], key = child._component ? child._component.__key : getAccessor(child, 'key');\n                if (!empty(key)) {\n                    if (!keyed) keyed = {};\n                    keyed[key] = child;\n                    keyedLen++;\n                } else children[childrenLen++] = child;\n            }\n        }\n        var vchildren = vnode.children, vlen = vchildren && vchildren.length, min = 0;\n        if (vlen) for (var i = 0; vlen > i; i++) {\n            var vchild = vchildren[i], child = void 0;\n            if (keyedLen) {\n                var attrs = vchild.attributes, key = attrs && attrs.key;\n                if (!empty(key) && hasOwnProperty.call(keyed, key)) {\n                    child = keyed[key];\n                    keyed[key] = null;\n                    keyedLen--;\n                }\n            }\n            if (!child && childrenLen > min) for (var j = min; childrenLen > j; j++) {\n                var c = children[j];\n                if (c && isSameNodeType(c, vchild)) {\n                    child = c;\n                    children[j] = null;\n                    if (j === childrenLen - 1) childrenLen--;\n                    if (j === min) min++;\n                    break;\n                }\n            }\n            child = diff(child, vchild, context);\n            if (dom.childNodes[i] !== child) {\n                var c = child.parentNode !== dom && child._component, next = dom.childNodes[i + 1];\n                if (c) deepHook(c, 'componentWillMount');\n                if (next) dom.insertBefore(child, next); else dom.appendChild(child);\n                if (c) deepHook(c, 'componentDidMount');\n            }\n        }\n        if (keyedLen) for (var i in keyed) if (hasOwnProperty.call(keyed, i) && keyed[i]) children[min = childrenLen++] = keyed[i];\n        if (childrenLen > min) removeOrphanedChildren(children);\n    }\n    function removeOrphanedChildren(children, unmountOnly) {\n        for (var i = children.length; i--; ) {\n            var child = children[i];\n            if (child) recollectNodeTree(child, unmountOnly);\n        }\n    }\n    function recollectNodeTree(node, unmountOnly) {\n        var attrs = node[ATTR_KEY];\n        if (attrs) hook(attrs, 'ref', null);\n        var component = node._component;\n        if (component) unmountComponent(component, !unmountOnly); else {\n            if (!unmountOnly) {\n                if (1 !== getNodeType(node)) {\n                    removeNode(node);\n                    return;\n                }\n                collectNode(node);\n            }\n            var c = node.childNodes;\n            if (c && c.length) removeOrphanedChildren(c, unmountOnly);\n        }\n    }\n    function diffAttributes(dom, vnode) {\n        var old = getNodeAttributes(dom) || EMPTY, attrs = vnode.attributes || EMPTY, name = void 0, value = void 0;\n        for (name in old) if (empty(attrs[name])) setAccessor(dom, name, null);\n        if (attrs !== EMPTY) for (name in attrs) if (hasOwnProperty.call(attrs, name)) {\n            value = attrs[name];\n            if (!empty(value) && value != getAccessor(dom, name)) setAccessor(dom, name, value);\n        }\n    }\n    function collectComponent(component) {\n        var name = component.constructor.name, list = components[name];\n        if (list) list.push(component); else components[name] = [ component ];\n    }\n    function createComponent(Ctor, props, context) {\n        var list = components[Ctor.name], len = list && list.length, c = void 0;\n        for (var i = 0; len > i; i++) {\n            c = list[i];\n            if (c.constructor === Ctor) {\n                list.splice(i, 1);\n                var inst = new Ctor(props, context);\n                inst.nextBase = c.base;\n                return inst;\n            }\n        }\n        return new Ctor(props, context);\n    }\n    function triggerComponentRender(component) {\n        if (!component._dirty) {\n            component._dirty = !0;\n            enqueueRender(component);\n        }\n    }\n    function setComponentProps(component, props, opts, context) {\n        var d = component._disableRendering;\n        component.__ref = props.ref;\n        component.__key = props.key;\n        delete props.ref;\n        delete props.key;\n        component._disableRendering = !0;\n        if (context) {\n            if (!component.prevContext) component.prevContext = component.context;\n            component.context = context;\n        }\n        if (component.base) hook(component, 'componentWillReceiveProps', props, component.context);\n        if (!component.prevProps) component.prevProps = component.props;\n        component.props = props;\n        component._disableRendering = d;\n        if (!opts || opts.render !== !1) if (opts && opts.renderSync || options.syncComponentUpdates !== !1) renderComponent(component); else triggerComponentRender(component);\n        hook(component, '__ref', component);\n    }\n    function renderComponent(component, opts) {\n        if (!component._disableRendering) {\n            var skip = void 0, rendered = void 0, props = component.props, state = component.state, context = component.context, previousProps = component.prevProps || props, previousState = component.prevState || state, previousContext = component.prevContext || context, isUpdate = component.base, initialBase = isUpdate || component.nextBase;\n            if (isUpdate) {\n                component.props = previousProps;\n                component.state = previousState;\n                component.context = previousContext;\n                if (hook(component, 'shouldComponentUpdate', props, state, context) === !1) skip = !0; else hook(component, 'componentWillUpdate', props, state, context);\n                component.props = props;\n                component.state = state;\n                component.context = context;\n            }\n            component.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n            component._dirty = !1;\n            if (!skip) {\n                rendered = hook(component, 'render', props, state, context);\n                var childComponent = rendered && rendered.nodeName, childContext = component.getChildContext ? component.getChildContext() : context, toUnmount = void 0, base = void 0;\n                if (isFunction(childComponent) && childComponent.prototype.render) {\n                    var inst = component._component;\n                    if (inst && inst.constructor !== childComponent) {\n                        toUnmount = inst;\n                        inst = null;\n                    }\n                    var childProps = getNodeProps(rendered);\n                    if (inst) setComponentProps(inst, childProps, SYNC_RENDER, childContext); else {\n                        inst = createComponent(childComponent, childProps, childContext);\n                        inst._parentComponent = component;\n                        component._component = inst;\n                        if (isUpdate) deepHook(inst, 'componentWillMount');\n                        setComponentProps(inst, childProps, NO_RENDER, childContext);\n                        renderComponent(inst, DOM_RENDER);\n                        if (isUpdate) deepHook(inst, 'componentDidMount');\n                    }\n                    base = inst.base;\n                } else {\n                    var cbase = initialBase;\n                    toUnmount = component._component;\n                    if (toUnmount) cbase = component._component = null;\n                    if (initialBase || opts && opts.build) base = diff(cbase, rendered || EMPTY_BASE, childContext);\n                }\n                if (initialBase && base !== initialBase) {\n                    var p = initialBase.parentNode;\n                    if (p && base !== p) p.replaceChild(base, initialBase);\n                }\n                if (toUnmount) unmountComponent(toUnmount, !0);\n                component.base = base;\n                if (base) {\n                    var componentRef = component, t = component;\n                    for (;t = t._parentComponent; ) componentRef = t;\n                    base._component = componentRef;\n                    base._componentConstructor = componentRef.constructor;\n                }\n                if (isUpdate) hook(component, 'componentDidUpdate', previousProps, previousState, previousContext);\n            }\n            var cb = component._renderCallbacks, fn = void 0;\n            if (cb) for (;fn = cb.pop(); ) fn.call(component);\n            return rendered;\n        }\n    }\n    function buildComponentFromVNode(dom, vnode, context) {\n        var c = dom && dom._component, oldDom = dom;\n        var isOwner = c && dom._componentConstructor === vnode.nodeName;\n        for (;c && !isOwner && (c = c._parentComponent); ) isOwner = c.constructor === vnode.nodeName;\n        if (isOwner) {\n            setComponentProps(c, getNodeProps(vnode), SYNC_RENDER, context);\n            dom = c.base;\n        } else {\n            if (c) {\n                unmountComponent(c, !0);\n                dom = oldDom = null;\n            }\n            dom = createComponentFromVNode(vnode, dom, context);\n            if (oldDom && dom !== oldDom) {\n                oldDom._component = null;\n                recollectNodeTree(oldDom);\n            }\n        }\n        return dom;\n    }\n    function createComponentFromVNode(vnode, dom, context) {\n        var props = getNodeProps(vnode);\n        var component = createComponent(vnode.nodeName, props, context);\n        if (dom && !component.base) component.base = dom;\n        setComponentProps(component, props, NO_RENDER, context);\n        renderComponent(component, DOM_RENDER);\n        return component.base;\n    }\n    function unmountComponent(component, remove) {\n        hook(component, '__ref', null);\n        hook(component, 'componentWillUnmount');\n        var inner = component._component;\n        if (inner) {\n            unmountComponent(inner, remove);\n            remove = !1;\n        }\n        var base = component.base;\n        if (base) {\n            if (remove !== !1) removeNode(base);\n            removeOrphanedChildren(base.childNodes, !0);\n        }\n        if (remove) {\n            component._parentComponent = null;\n            collectComponent(component);\n        }\n        hook(component, 'componentDidUnmount');\n    }\n    function Component(props, context) {\n        this._dirty = this._disableRendering = !1;\n        this.prevState = this.prevProps = this.prevContext = this.base = this.nextBase = this._parentComponent = this._component = this.__ref = this.__key = this._linkedStates = this._renderCallbacks = null;\n        this.context = context || {};\n        this.props = props;\n        this.state = hook(this, 'getInitialState') || {};\n    }\n    function render(vnode, parent, merge) {\n        var existing = merge && merge._component && merge._componentConstructor === vnode.nodeName, built = diff(merge, vnode), c = !existing && built._component;\n        if (c) deepHook(c, 'componentWillMount');\n        if (built.parentNode !== parent) parent.appendChild(built);\n        if (c) deepHook(c, 'componentDidMount');\n        return built;\n    }\n    var NO_RENDER = {\n        render: !1\n    };\n    var SYNC_RENDER = {\n        renderSync: !0\n    };\n    var DOM_RENDER = {\n        build: !0\n    };\n    var EMPTY = {};\n    var EMPTY_BASE = '';\n    var HAS_DOM = 'undefined' != typeof document;\n    var TEXT_CONTENT = !HAS_DOM || 'textContent' in document ? 'textContent' : 'nodeValue';\n    var ATTR_KEY = 'undefined' != typeof Symbol ? Symbol['for']('preactattr') : '__preactattr_';\n    var UNDEFINED_ELEMENT = 'undefined';\n    var NON_DIMENSION_PROPS = {\n        boxFlex: 1,\n        boxFlexGroup: 1,\n        columnCount: 1,\n        fillOpacity: 1,\n        flex: 1,\n        flexGrow: 1,\n        flexPositive: 1,\n        flexShrink: 1,\n        flexNegative: 1,\n        fontWeight: 1,\n        lineClamp: 1,\n        lineHeight: 1,\n        opacity: 1,\n        order: 1,\n        orphans: 1,\n        strokeOpacity: 1,\n        widows: 1,\n        zIndex: 1,\n        zoom: 1\n    };\n    var isFunction = function(obj) {\n        return 'function' == typeof obj;\n    };\n    var isString = function(obj) {\n        return 'string' == typeof obj;\n    };\n    var hasOwnProperty = {}.hasOwnProperty;\n    var empty = function(x) {\n        return null == x;\n    };\n    var falsey = function(value) {\n        return value === !1 || null == value;\n    };\n    var jsToCss = memoize(function(s) {\n        return s.replace(/([A-Z])/g, '-$1').toLowerCase();\n    });\n    var toLowerCase = memoize(function(s) {\n        return s.toLowerCase();\n    });\n    var ch = void 0;\n    try {\n        ch = new MessageChannel();\n    } catch (e) {}\n    var setImmediate = ch ? function(f) {\n        ch.port1.onmessage = f;\n        ch.port2.postMessage('');\n    } : setTimeout;\n    var options = {\n        vnode: function(n) {\n            var attrs = n.attributes;\n            if (attrs && !isFunction(n.nodeName)) {\n                var p = attrs.className;\n                if (p) {\n                    attrs['class'] = p;\n                    delete attrs.className;\n                }\n                if (attrs['class']) normalize(attrs, 'class', hashToClassName);\n                if (attrs.style) normalize(attrs, 'style', styleObjToCss);\n            }\n        }\n    };\n    var SHARED_TEMP_ARRAY = [];\n    var items = [];\n    var itemsOffline = [];\n    var normalizeEventName = memoize(function(t) {\n        return t.replace(/^on/i, '').toLowerCase();\n    });\n    var nodes = {};\n    var normalizeName = memoize(function(name) {\n        return name.toUpperCase();\n    });\n    var components = {};\n    extend(Component.prototype, {\n        linkState: function(key, eventPath) {\n            var c = this._linkedStates || (this._linkedStates = {}), cacheKey = key + '|' + (eventPath || '');\n            return c[cacheKey] || (c[cacheKey] = createLinkedState(this, key, eventPath));\n        },\n        setState: function(state, callback) {\n            var s = this.state;\n            if (!this.prevState) this.prevState = clone(s);\n            extend(s, isFunction(state) ? state(s, this.props) : state);\n            if (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n            triggerComponentRender(this);\n        },\n        forceUpdate: function() {\n            renderComponent(this);\n        },\n        render: function() {\n            return null;\n        }\n    });\n    var preact = {\n        h: h,\n        Component: Component,\n        render: render,\n        rerender: rerender,\n        options: options,\n        hooks: options\n    };\n    return preact;\n});\n//# sourceMappingURL=preact.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/preact/dist/preact.js\n ** module id = 274\n ** module chunks = 0\n **/","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/timers-browserify/main.js\n ** module id = 275\n ** module chunks = 0\n **/"],"sourceRoot":""}